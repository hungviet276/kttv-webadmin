<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <title>Thông tin báo cáo</title>
</head>
<body id="view_chart_body">
</body>
<script src="/admin_lte/plugins/jquery/jquery.min.js"></script>
<script th:inline="javascript">

    /*<![CDATA[*/
    const listParameterTypeId = /*[[${listParameterTypeId}]]*/;
    const stationCode = /*[[${stationCode}]]*/;
    const apiUrl = /*[[${session.apiUrl}]]*/;
    const token = /*[[${session.token}]]*/;
    /*]]>*/
    // get startDate from amountDay
    // ve chart
    function displayChart(parameterTypeId, type, startDate, endDate) {
        let divWrap = $('<div style="position: relative; width: 100%; height: 500px; min-height: 500px;">');
        let iframe = $('<iframe>');
        let urlChart = '/report/parameter';
        iframe.attr('src', encodeURI(urlChart + '?stationCode=' + stationCode + '&parameterTypeId=' + parameterTypeId  + '&type='+ type + '&startDate=' + startDate + '&endDate=' + endDate));
        iframe.attr('width', '100%');
        iframe.attr('height', '500');
        divWrap.append(iframe);
        $('#view_chart_body').append(divWrap);
    }
    // lay du lieu hien thi len view
    if (listParameterTypeId != null) {
        for (let i = 0; i < listParameterTypeId.length; i++) {
            let dataReq = {
                stationCode: stationCode,
                parameterTypeId: listParameterTypeId[i].parameterTypeId,
                type: listParameterTypeId[i].type,
                startDate: listParameterTypeId[i].startDate,
                endDate: listParameterTypeId[i].endDate
            };
            displayChart(listParameterTypeId[i].parameterTypeId, listParameterTypeId[i].type, listParameterTypeId[i].startDate, listParameterTypeId[i].endDate);
        }
    }
</script>
</html>