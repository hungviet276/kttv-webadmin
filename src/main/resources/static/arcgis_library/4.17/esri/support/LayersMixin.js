// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../core/Collection ../core/collectionUtils ../core/Logger ../core/promiseUtils ../core/accessorSupport/decorators ../layers/Layer".split(" "),function(u,f,g,n,p,q,r,k,t){function h(c,l,b){var a;if(c)for(var d=0,e=c.length;d<e;d++)if(a=c.getItemAt(d),a[l]===b||a&&"group"===a.type&&(a=h(a.layers,l,b)))return a}Object.defineProperty(f,"__esModule",{value:!0});f.LayersMixin=void 0;var m=q.getLogger("esri.support.LayersMixin");f.LayersMixin=function(c){return function(c){function b(){for(var a=
[],d=0;d<arguments.length;d++)a[d]=arguments[d];var b=c.apply(this,a)||this;b.layers=new n;b.layers.on("before-add",function(a){a=a.item;a.parent&&"remove"in a.parent&&a.parent.remove(a)});b.layers.on("after-add",function(a){a=a.item;a.parent=b;b.layerAdded(a);"elevation"!==a.type&&"base-elevation"!==a.type||m.error("Layer 'title:"+a.title+", id:"+a.id+"' of type '"+a.type+"' is not supported as an operational layer and will therefore be ignored.")});b.layers.on("after-remove",function(a){a=a.item;
a.parent=null;b.layerRemoved(a)});return b}g.__extends(b,c);b.prototype.destroy=function(){for(var a=0,b=this.layers.removeAll();a<b.length;a++){var e=b[a];this.layerRemoved(e);e.destroy()}this.layers.destroy()};Object.defineProperty(b.prototype,"layers",{set:function(a){this._set("layers",p.referenceSetter(a,this._get("layers")))},enumerable:!1,configurable:!0});b.prototype.add=function(a,b){var d=this,c=this.layers;b=c.getNextIndex(b);a instanceof t?a.parent===this?this.reorder(a,b):c.add(a,b):
r.isPromiseLike(a)?a.then(function(a){d.destroyed||d.add(a,b)}):m.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")};b.prototype.addMany=function(a,b){var d=this,c=this.layers;b=c.getNextIndex(b);a.slice().forEach(function(a){a.parent===d?d.reorder(a,b):(c.add(a,b),b+=1)})};b.prototype.findLayerById=function(a){return h(this.layers,"id",a)};b.prototype.findLayerByUid=function(a){return h(this.layers,"uid",a)};b.prototype.remove=function(a){return this.layers.remove(a)};
b.prototype.removeMany=function(a){return this.layers.removeMany(a)};b.prototype.removeAll=function(){return this.layers.removeAll()};b.prototype.reorder=function(a,b){return this.layers.reorder(a,b)};b.prototype.layerAdded=function(a){};b.prototype.layerRemoved=function(a){};g.__decorate([k.property()],b.prototype,"layers",null);return b=g.__decorate([k.subclass("esri.support.LayersMixin")],b)}(c)}});