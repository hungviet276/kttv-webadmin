// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
require({cache:{"esri/arcade/arcade":function(){define("require exports ./arcadeCompiler ./arcadeRuntime ./languageUtils ./parser ./treeAnalysis ../core/has ../core/promiseUtils ../intl/moment @dojo/framework/shim/Promise".split(" "),function(v,a,l,u,m,k,h,e,f,g){function p(b,c){if(null===P)throw Error("Async Arcade must be enabled for this script");return e("csp-restrictions")||!1===d?function(d){return P.executeScript(b,d)}:l.compileScript(b,c,!0)}function y(b,d){void 0===d&&(d=[]);return k.parseScript(b,
d)}function n(b,d){if(!0===d.useAsync||!0===b.isAsync){if(null===P)throw Error("Async Arcade must be enabled for this script");return P.executeScript(b,d)}return u.executeScript(b,d)}function c(b,d){return u.referencesMember(b,d)}function C(b,d){void 0===d&&(d=[]);void 0===b.usesGeometry&&h.findScriptDependencies(b,d);return!0===b.usesGeometry}function F(){return O?O:O=f.all([new Promise(function(b,d){v(["../geometry/geometryEngine"],b,d)}),new Promise(function(b,d){v(["./functions/geomsync"],b,d)})]).then(function(b){var d=
b[0];b=b[1];z=!0;b.setGeometryEngine(d);return!0})}function L(){return null!==S?S:S=l.enableAsyncSupport().then(function(){return new Promise(function(b,d){v(["./arcadeAsyncRuntime"],b,d)})}).then(function(b){P=b;b=0;for(var d=K;b<d.length;b++){var c=d[b];P.extend(c);l.extend(c,"async")}K=null;return!0})}function T(){return P?!0:!1}function V(){return W?W:W=L().then(function(){return f.all([new Promise(function(b,d){v(["./featureSetUtils"],b,d)}),new Promise(function(b,d){v(["./functions/featuresetbase"],
b,d)}),new Promise(function(b,d){v(["./functions/featuresetgeom"],b,d)}),new Promise(function(b,d){v(["./functions/featuresetstats"],b,d)}),new Promise(function(b,d){v(["./functions/featuresetstring"],b,d)})]).then(function(b){var d=b[1],c=b[2],a=b[3],f=b[4];Y=b[0];P.extend([d,c,a,f]);l.extend([d,c,a,f],"async");return I=!0})})}function A(b,d){void 0===d&&(d=[]);void 0===b.usesFeatureSet&&h.findScriptDependencies(b,d);return!0===b.usesFeatureSet}function b(b,d){if(d)for(var a=0;a<d.length;a++)if(c(b,
d[a]))return!0;return!1}function q(){return null!==na?na:na=g.loadMoment().then(function(b){m.MomentLibrary.Moment=b;return!0})}Object.defineProperty(a,"__esModule",{value:!0});a.load=a.featureSetUtils=a.scriptTouchesGeometry=a.loadScriptDependencies=a.scriptIsAsync=a.scriptUsesFeatureSet=a.enableFeatureSetSupport=a.isGeometryEnabled=a.isAsyncEnabled=a.isFeatureSetSupportEnabled=a.enableAsyncSupport=a.enableGeometrySupport=a.scriptUsesGeometryEngine=a.extractFieldLiterals=a.referencesFunction=a.referencesMember=
a.executeScript=a.parseAndExecuteScript=a.scriptCheck=a.validateScript=a.parseScript=a.extend=a.compileScript=void 0;var d=function(){if(e("csp-restrictions"))return!1;try{return(new Function("function* test() {}; return true"))()}catch(ra){return!1}}(),I=!1,z=!1,P=null,K=[];a.compileScript=function(b,d){return!0===d.useAsync||!0===b.isAsync?p(b,d):e("csp-restrictions")?function(d){return u.executeScript(b,d)}:l.compileScript(b,d)};a.extend=function(b){u.extend(b);l.extend(b,"sync");null===P?K.push(b):
(l.extend(b,"async"),P.extend(b))};a.parseScript=y;a.validateScript=function(b,d,c){void 0===c&&(c="");return k.validateScript(b,d,c)};a.scriptCheck=function(b,d,c,a){void 0===a&&(a="");return k.scriptCheck(b,d,c,a)};a.parseAndExecuteScript=function(b,d,c){void 0===c&&(c=[]);b=k.parseScript(b,c);return n(b,d)};a.executeScript=n;a.referencesMember=c;a.referencesFunction=function(b,d){return u.referencesFunction(b,d)};a.extractFieldLiterals=function(b,d){void 0===d&&(d=!1);return k.extractFieldLiterals(b,
d)};a.scriptUsesGeometryEngine=C;var O=null;a.enableGeometrySupport=F;var S=null;a.enableAsyncSupport=L;a.isFeatureSetSupportEnabled=function(){return I};a.isAsyncEnabled=T;a.isGeometryEnabled=function(){return z};var W=null;a.enableFeatureSetSupport=V;a.scriptUsesFeatureSet=A;a.scriptIsAsync=function(b,d){void 0===d&&(d=[]);void 0===b.isAsync&&h.findScriptDependencies(b,d);return!0===b.isAsync};a.loadScriptDependencies=function(d,c,a,g){void 0===a&&(a=[]);void 0===g&&(g=!1);return f.create(function(e,
p){var h="string"===typeof d?y(d):d,n=[];n.push(q());h&&(!1===z&&(C(h)||g)&&n.push(F()),!1===T()&&(!0===h.isAsync||c)&&n.push(L()),!1===I&&(A(h)||b(h,a))&&n.push(V()));n?f.all(n).then(function(){e(!0)},p):e(!0)})};a.scriptTouchesGeometry=function(b){if(C(b))return!0;b=h.findFunctionCalls(b);return-1<b.indexOf("geometry")||-1<b.indexOf("feature")?!0:!1};var Y=null;a.featureSetUtils=function(){return Y};a.load=q;var na=null})},"esri/arcade/arcadeCompiler":function(){define("require exports ./ArcadePortal ./Attachment ./Dictionary ./Feature ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../core/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/SpatialReference ../views/2d/layers/features/support/FeatureSetReader @dojo/framework/shim/Promise".split(" "),
function(v,a,l,u,m,k,h,e,f,g,p,y,n,c,C,F,L,T,V,A,b,q,d,I,z){function P(b,d,c){try{return c(b,null,d)}catch(Qa){throw Qa;}}function K(b){return b instanceof Error?L.reject(b):L.reject(Error(b))}function O(b,d){try{switch(d.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return ra(b,d);case "VariableDeclaration":for(var c=[],a=0;a<d.declarations.length;a++)c.push(O(b,d.declarations[a]));return c.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":return na(b,
d);case "FunctionDeclaration":var f;var t=d.id.name.toLowerCase(),q={isAsync:b.isAsync,spatialReference:b.spatialReference,console:b.console,lrucache:b.lrucache,services:b.services,symbols:b.symbols,mangleMap:b.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:b.depthCounter+1,globalScope:b.globalScope};if(64<q.depthCounter)throw Error("Exceeded maximum function depth");c="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";
for(a=0;a<d.params.length;a++){var Ma=d.params[a].name.toLowerCase(),e=w(b);q.localScope._SymbolsMap[Ma]=e;q.mangleMap[Ma]=e;c+="lscope['"+e+"']\x3darguments["+a.toString()+"];\n"}!0===b.isAsync?(c=c+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(na(q,d.body)+"\n return lastStatement; "),c+="});  }, runtimeCtx))\n lastStatement \x3d lc.voidOperation; \n"):(c+=na(q,d.body)+"\n return lastStatement; }, runtimeCtx))",c+="\n lastStatement \x3d lc.voidOperation; \n");void 0!==b.globalScope[t]?
f="gscope['"+t+"']\x3d"+c:void 0!==b.globalScope._SymbolsMap[t]?f="gscope['"+b.globalScope._SymbolsMap[t]+"']\x3d"+c:(e=w(b),b.globalScope._SymbolsMap[t]=e,b.mangleMap[t]=e,f="gscope['"+e+"']\x3d"+c);return f;case "ReturnStatement":var za;za=null===d.argument?"return lc.voidOperation":"return "+O(b,d.argument)+"";return za;case "IfStatement":if("AssignmentExpression"===d.test.type||"UpdateExpression"===d.test.type)throw Error(g.nodeErrorMessage(d.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
var h=O(b,d.test),p=ja(b),n="var "+p+" \x3d "+h+";\n if ("+p+" \x3d\x3d\x3d true) {\n"+Y(b,d.consequent)+"\n }\n",n=null!==d.alternate?n+("else if ("+p+"\x3d\x3d\x3dfalse)   { \n"+Y(b,d.alternate)+"}\n"):n+("else if ("+p+"\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n");return n+="else { lang.error({type: '"+d.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";case "ExpressionStatement":var k;k="AssignmentExpression"===d.expression.type?"lastStatement \x3d lc.voidOperation; "+
O(b,d.expression)+"; \n ":"lastStatement \x3d "+O(b,d.expression)+"; ";return k;case "AssignmentExpression":return W(b,d);case "UpdateExpression":return S(b,d);case "BreakStatement":return"break";case "ContinueStatement":return"continue";case "TemplateLiteral":try{for(var C=[],t=f=0,a=d.quasis;t<a.length;t++){var R=a[t];C.push(R.value?JSON.stringify(R.value.cooked):JSON.stringify(""));!1===R.tail&&(C.push(d.expressions[f]?"lang.castString(lang.aCheck("+O(b,d.expressions[f])+", 'TemplateLiteral'))":
""),f++)}c="(["+C.join(",")+"]).join('')"}catch(aa){throw aa;}return c;case "TemplateElement":return JSON.stringify(d.value?d.value.cooked:"");case "ForStatement":c="lastStatement \x3d lc.voidOperation; \n";null!==d.init&&(c+=O(b,d.init)+"; ");var ga=ja(b),y=ja(b),c=c+("var "+ga+" \x3d true; ")+"\n do { ";null!==d.update&&(c+=" if ("+ga+"\x3d\x3d\x3dfalse) {\n "+O(b,d.update)+"  \n}\n "+ga+"\x3dfalse; \n");null!==d.test&&(c+="var "+y+" \x3d "+O(b,d.test)+"; ",c+="if ("+y+"\x3d\x3d\x3dfalse) { break; } else if ("+
y+"!\x3d\x3dtrue) { lang.error({type: '"+d.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n");c+=O(b,d.body);null!==d.update&&(c+="\n "+O(b,d.update));return c+("\n"+ga+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");case "ForInStatement":var m=ja(b),J=ja(b),F=ja(b),E="var "+m+" \x3d "+O(b,d.right)+";\n";"VariableDeclaration"===d.left.type&&(E+=O(b,d.left));var I="VariableDeclaration"===d.left.type?d.left.declarations[0].id.name:d.left.name,I=I.toLowerCase(),
c="";null!==b.localScope&&(void 0!==b.localScope[I]?c="lscope['"+I+"']":void 0!==b.localScope._SymbolsMap[I]&&(c="lscope['"+b.localScope._SymbolsMap[I]+"']"));""===c&&(void 0!==b.globalScope[I]?c="gscope['"+I+"']":void 0!==b.globalScope._SymbolsMap[I]&&(c="gscope['"+b.globalScope._SymbolsMap[I]+"']"));E=E+("if ("+m+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n ")+("else if (lc.isArray("+m+") || lc.isString("+m+")) {")+("var "+J+"\x3d"+m+".length; \n")+("for(var "+F+"\x3d0; "+F+"\x3c"+
J+"; "+F+"++) {\n");E+=c+"\x3d"+F+";\n";E+=O(b,d.body);E+="\n}\n";E+=" lastStatement \x3d lc.voidOperation; \n";E+=" \n}\n";E+="else if (lc.isImmutableArray("+m+")) {";E=E+("var "+J+"\x3d"+m+".length(); \n")+("for(var "+F+"\x3d0; "+F+"\x3c"+J+"; "+F+"++) {\n");E+=c+"\x3d"+F+";\n";E+=O(b,d.body);E+="\n}\n";E+=" lastStatement \x3d lc.voidOperation; \n";E+=" \n}\n";E+="else if (( "+m+" instanceof lang.Dictionary) || ( "+m+" instanceof lang.Feature)) {";E=E+("var "+J+"\x3d"+m+".keys(); \n")+("for(var "+
F+"\x3d0; "+F+"\x3c"+J+".length; "+F+"++) {\n");E+=c+"\x3d"+J+"["+F+"];\n";E+=O(b,d.body);E+="\n}\n";E+=" lastStatement \x3d lc.voidOperation; \n";E+=" \n}\n";b.isAsync&&(E+="else if (lc.isFeatureSet("+m+")) {",E=E+("var "+J+"\x3d"+m+".iterator(runtimeCtx.abortSignal); \n")+("for(var "+F+"\x3dlang. graphicToFeature( yield "+J+".next(),"+m+"); "+F+"!\x3dnull; "+F+"\x3dlang. graphicToFeature( yield "+J+".next(),"+m+")) {\n")+(c+"\x3d"+F+";\n"),E+=O(b,d.body),E+="\n}\n",E+=" lastStatement \x3d lc.voidOperation; \n",
E+=" \n}\n");return E+"else { lastStatement \x3d lc.voidOperation; } \n";case "Identifier":return pa(b,d);case "MemberExpression":var l;try{c=void 0,c=!0===d.computed?O(b,d.property):"'"+d.property.name+"'",l="lang.member("+O(b,d.object)+","+c+")"}catch(aa){throw aa;}return l;case "Literal":return null===d.value||void 0===d.value?"null":JSON.stringify(d.value);case "ThisExpression":throw Error(g.nodeErrorMessage(d,"RUNTIME","NOTSUPPORTED"));case "CallExpression":try{if("Identifier"!==d.callee.type)throw Error(g.nodeErrorMessage(d,
"RUNTIME","ONLYNODESSUPPORTED"));var A=d.callee.name.toLowerCase(),c="";null!==b.localScope&&(void 0!==b.localScope[A]?c="lscope['"+A+"']":void 0!==b.localScope._SymbolsMap[A]&&(c="lscope['"+b.localScope._SymbolsMap[A]+"']"));""===c&&(void 0!==b.globalScope[A]?c="gscope['"+A+"']":void 0!==b.globalScope._SymbolsMap[A]&&(c="gscope['"+b.globalScope._SymbolsMap[A]+"']"));if(""!==c){a="[";for(R=0;R<d.arguments.length;R++)0<R&&(a+=", "),a+=O(b,d.arguments[R]);a+="]";C=b.isAsync?"(yield lang.callfunc("+
c+","+a+",runtimeCtx) )":"lang.callfunc("+c+","+a+",runtimeCtx)"}else throw Error(g.nodeErrorMessage(d,"RUNTIME","NOTFOUND"));}catch(aa){throw aa;}return C;case "UnaryExpression":var L;try{L="lang.unary("+O(b,d.argument)+",'"+d.operator+"')"}catch(aa){throw aa;}return L;case "BinaryExpression":var ua;try{ua="lang.binary("+O(b,d.left)+","+O(b,d.right)+",'"+d.operator+"')"}catch(aa){throw aa;}return ua;case "LogicalExpression":var V;try{if("AssignmentExpression"===d.left.type||"UpdateExpression"===
d.left.type)throw Error(g.nodeErrorMessage(d.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===d.right.type||"UpdateExpression"===d.right.type)throw Error(g.nodeErrorMessage(d.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("\x26\x26"===d.operator||"||"===d.operator)V="(lang.logicalCheck("+O(b,d.left)+") "+d.operator+" lang.logicalCheck("+O(b,d.right)+"))";else throw Error(g.nodeErrorMessage(d,"RUNTIME","ONLYORORAND"));}catch(aa){throw aa;}return V;case "ConditionalExpression":throw Error(g.nodeErrorMessage(d,
"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":var u;try{c=[];for(a=0;a<d.elements.length;a++)"Literal"===d.elements[a].type?c.push(O(b,d.elements[a])):c.push("lang.aCheck("+O(b,d.elements[a])+",'ArrayExpression')");u="["+c.join(",")+"]"}catch(aa){throw aa;}return u;case "ObjectExpression":c="lang.dictionary([";for(a=0;a<d.properties.length;a++){var T=d.properties[a],z="Identifier"===T.key.type?"'"+T.key.name+"'":O(b,T.key),Ba=O(b,T.value);0<a&&(c+=",");c+="lang.strCheck("+z+",'ObjectExpression'),lang.aCheck("+
Ba+", 'ObjectExpression')"}return c+"])";case "Property":throw Error("Should not get here");case "Array":throw Error(g.nodeErrorMessage(d,"RUNTIME","NOTSUPPORTED"));default:throw Error(g.nodeErrorMessage(d,"RUNTIME","UNREOGNISED"));}}catch(aa){throw aa;}}function S(b,d){var c=null,a="";if("MemberExpression"===d.argument.type)return c=O(b,d.argument.object),a=!0===d.argument.computed?O(b,d.argument.property):"'"+d.argument.property.name+"'","lang.memberupdate("+c+","+a+",'"+d.operator+"',"+d.prefix+
")";c=d.argument.name.toLowerCase();if(null!==b.localScope){if(void 0!==b.localScope[c])return"lang.update(lscope, '"+c+"','"+d.operator+"',"+d.prefix+")";if(void 0!==b.localScope._SymbolsMap[c])return"lang.update(lscope, '"+b.localScope._SymbolsMap[c]+"','"+d.operator+"',"+d.prefix+")"}if(void 0!==b.globalScope[c])return"lang.update(gscope, '"+c+"','"+d.operator+"',"+d.prefix+")";if(void 0!==b.globalScope._SymbolsMap[c])return"lang.update(gscope, '"+b.globalScope._SymbolsMap[c]+"','"+d.operator+
"',"+d.prefix+")";throw Error("Variable not recognised");}function W(b,d){var c=O(b,d.right),a=null,f="";if("MemberExpression"===d.left.type)return a=O(b,d.left.object),f=!0===d.left.computed?O(b,d.left.property):"'"+d.left.property.name+"'","lang.assignmember("+a+","+f+",'"+d.operator+"',"+c+")";a=d.left.name.toLowerCase();if(null!==b.localScope){if(void 0!==b.localScope[a])return"lscope['"+a+"']\x3dlang.assign("+c+",'"+d.operator+"', lscope['"+a+"'])";if(void 0!==b.localScope._SymbolsMap[a])return"lscope['"+
b.localScope._SymbolsMap[a]+"']\x3dlang.assign("+c+",'"+d.operator+"', lscope['"+b.localScope._SymbolsMap[a]+"'])"}if(void 0!==b.globalScope[a])return"gscope['"+a+"']\x3dlang.assign("+c+",'"+d.operator+"', gscope['"+a+"'])";if(void 0!==b.globalScope._SymbolsMap[a])return"gscope['"+b.globalScope._SymbolsMap[a]+"']\x3dlang.assign("+c+",'"+d.operator+"', gscope['"+b.globalScope._SymbolsMap[a]+"'])";throw Error("Variable not recognised");}function Y(b,d){return"BlockStatement"===d.type?O(b,d):"ReturnStatement"===
d.type||"BreakStatement"===d.type||"ContinueStatement"===d.type?O(b,d)+"; ":"UpdateExpression"===d.type?"lastStatement \x3d "+O(b,d)+"; ":"ExpressionStatement"===d.type?O(b,d):"ObjectExpression"===d.type?"lastStatement \x3d "+O(b,d)+"; ":O(b,d)+"; "}function na(b,d){for(var c="",a=0;a<d.body.length;a++)c="ReturnStatement"===d.body[a].type?c+(O(b,d.body[a])+"; \n"):"BreakStatement"===d.body[a].type?c+(O(b,d.body[a])+"; \n"):"ContinueStatement"===d.body[a].type?c+(O(b,d.body[a])+"; \n"):"UpdateExpression"===
d.body[a].type?c+("lastStatement \x3d "+O(b,d.body[a])+"; \n"):"ObjectExpression"===d.body[a].type?c+("lastStatement \x3d "+O(b,d.body[a])+"; \n"):c+(O(b,d.body[a])+" \n");return c}function ra(b,d){var c=null===d.init?null:O(b,d.init);c===f.voidOperation&&(c=null);d=d.id.name.toLowerCase();if(null!==b.localScope){if(void 0!==b.localScope[d])return"lscope['"+d+"']\x3d"+c+"; ";if(void 0!==b.localScope._SymbolsMap[d])return"lscope['"+b.localScope._SymbolsMap[d]+"']\x3d"+c+"; ";var a=w(b);b.localScope._SymbolsMap[d]=
a;b.mangleMap[d]=a;return"lscope['"+a+"']\x3d"+c+"; "}if(void 0!==b.globalScope[d])return"gscope['"+d+"']\x3d"+c+"; ";if(void 0!==b.globalScope._SymbolsMap[d])return"gscope['"+b.globalScope._SymbolsMap[d]+"']\x3d"+c+"; ";a=w(b);b.globalScope._SymbolsMap[d]=a;b.mangleMap[d]=a;return"gscope['"+a+"']\x3d"+c+"; "}function U(b,d,c){d=d.toLowerCase();switch(d){case "hasz":return b=b.hasZ,void 0===b?!1:b;case "hasm":return b=b.hasM,void 0===b?!1:b;case "spatialreference":return d=b.spatialReference._arcadeCacheId,
void 0===d&&(c=!0,Object.freeze&&Object.isFrozen(b.spatialReference)&&(c=!1),c&&(ka++,d=b.spatialReference._arcadeCacheId=ka)),b=new m({wkt:b.spatialReference.wkt,wkid:b.spatialReference.wkid}),void 0!==d&&(b._arcadeCacheId="SPREF"+d.toString()),b}switch(b.type){case "extent":switch(d){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return b=b[d],void 0!==b?b:null;case "type":return"Extent"}break;case "polygon":switch(d){case "rings":return d=b.cache._arcadeCacheId,
void 0===d&&(ka++,d=ka,b.cache._arcadeCacheId=d),b=new h(b.rings,b.spatialReference,!0===b.hasZ,!0===b.hasM,d);case "type":return"Polygon"}break;case "point":switch(d){case "x":case "y":case "z":case "m":return void 0!==b[d]?b[d]:null;case "type":return"Point"}break;case "polyline":switch(d){case "paths":return d=b.cache._arcadeCacheId,void 0===d&&(ka++,d=ka,b.cache._arcadeCacheId=d),b=new h(b.paths,b.spatialReference,!0===b.hasZ,!0===b.hasM,d);case "type":return"Polyline"}break;case "multipoint":switch(d){case "points":return d=
b.cache._arcadeCacheId,void 0===d&&(ka++,d=ka,b.cache._arcadeCacheId=d),b=new e(b.points,b.spatialReference,!0===b.hasZ,!0===b.hasM,d,1);case "type":return"Multipoint"}}throw Error(g.nodeErrorMessage(c,"RUNTIME","PROPERTYNOTFOUND"));}function pa(b,d){try{var c=d.name.toLowerCase();if(null!==b.localScope){if(void 0!==b.localScope[c])return"lscope['"+c+"']";if(void 0!==b.localScope._SymbolsMap[c])return"lscope['"+b.localScope._SymbolsMap[c]+"']"}if(void 0!==b.globalScope[c])return"gscope['"+c+"']";
if(void 0!==b.globalScope._SymbolsMap[c])return"gscope['"+b.globalScope._SymbolsMap[c]+"']";throw Error(g.nodeErrorMessage(d,"RUNTIME","VARIABLENOTFOUND"));}catch(Qa){throw Qa;}}function sa(c){return null===c?"":f.isArray(c)||f.isImmutableArray(c)?"Array":f.isDate(c)?"Date":f.isString(c)?"String":f.isBoolean(c)?"Boolean":f.isNumber(c)?"Number":c instanceof u?"Attachment":c instanceof l?"Portal":c instanceof m?"Dictionary":c instanceof k?"Feature":c instanceof b?"Point":c instanceof q?"Polygon":c instanceof
d?"Polyline":c instanceof A?"Multipoint":c instanceof T?"Extent":f.isFunctionParameter(c)?"Function":f.isFeatureSet(c)?"FeatureSet":f.isFeatureSetCollection(c)?"FeatureSetCollection":c===f.voidOperation?"":"number"===typeof c&&isNaN(c)?"Number":"Unrecognised Type"}function Q(b,d,c,a){try{if(f.equalityTest(d[c],a))return d[c+1];var t=d.length-c;return 1===t?d[c]:2===t?null:3===t?d[c+2]:Q(b,d,c+2,a)}catch(Ha){throw Ha;}}function ia(b,d,c,a){try{if(!0===a)return d[c+1];if(3===d.length-c)return d[c+2];
var t=d[c+2];if(!1===f.isBoolean(t))throw Error("WHEN needs boolean test conditions");return ia(b,d,c+2,t)}catch(Ha){throw Ha;}}function M(b,d){var c=b.length,a=Math.floor(c/2);if(0===c)return[];if(1===c)return[b[0]];var t=M(b.slice(0,a),d);b=M(b.slice(a,c),d);for(c=[];0<t.length||0<b.length;)0<t.length&&0<b.length?(a=d(t[0],b[0]),isNaN(a)&&(a=0),0>=a?(c.push(t[0]),t=t.slice(1)):(c.push(b[0]),b=b.slice(1))):0<t.length?(c.push(t[0]),t=t.slice(1)):0<b.length&&(c.push(b[0]),b=b.slice(1));return c}function ma(b,
d){try{var c=b.length,a=Math.floor(c/2);if(0===c)return L.resolve([]);if(1===c)return L.resolve([b[0]]);var t=[ma(b.slice(0,a),d),ma(b.slice(a,c),d)];return L.all(t).then(function(b){return la(b[0],b[1],d,[])})}catch(Ha){return L.reject(Ha)}}function la(b,d,c,a){return L.create(function(t,f){0<b.length||0<d.length?0<b.length&&0<d.length?c(b[0],d[0]).then(function(q){try{isNaN(q)&&(q=1),0>=q?(a.push(b[0]),b=b.slice(1)):(a.push(d[0]),d=d.slice(1)),la(b,d,c,a).then(function(b){t(b)},f)}catch(Ga){f(Ga)}},
f):0<b.length?(a.push(b[0]),b=b.slice(1),la(b,d,c,a).then(function(b){t(b)},f)):0<d.length&&(a.push(d[0]),d=d.slice(1),la(b,d,c,a).then(function(b){t(b)},f)):t(a)})}function w(b){b.symbols.symbolCounter++;return"_T"+b.symbols.symbolCounter.toString()}function ja(b){b.symbols.symbolCounter++;return"_Tvar"+b.symbols.symbolCounter.toString()}function ta(b,d,c){var a={};b||(b={});c||(c={});a._SymbolsMap={};a.textformatting=1;a.infinity=1;a.pi=1;for(var t in d)a[t]=1;for(t in c)a[t]=1;for(t in b)a[t]=
1;return a}function da(b,d){for(var c={mode:d,compiled:!0,functions:{},signatures:[],failDefferred:K,standardFunction:P,standardFunctionAsync:P,evaluateIdentifier:X},a=0;a<b.length;a++)b[a].registerFunctions(c);if("sync"===d){for(var t in c.functions)J[t]=new f.NativeFunction(c.functions[t]),ga.prototype[t]=J[t];for(a=0;a<c.signatures.length;a++)g.addFunctionDeclaration(c.signatures[a],"sync")}else{for(t in c.functions)E[t]=new f.NativeFunction(c.functions[t]),R.prototype[t]=E[t];for(a=0;a<c.signatures.length;a++)g.addFunctionDeclaration(c.signatures[a],
"async")}}function X(b,d){d=d.name;if("_SymbolsMap"===d)throw"Illegal";if(0<b.localStack.length){if("_t"!==d.substr(0,2).toLowerCase()&&void 0!==b.localStack[b.localStack.length-1][d])return b.localStack[b.localStack.length-1][d];var c=b.mangleMap[d];if(void 0!==c&&void 0!==b.localStack[b.localStack.length-1][c])return b.localStack[b.localStack.length-1][c]}if("_t"!==d.substr(0,2).toLowerCase()&&void 0!==b.globalScope[d]||1===b.globalScope._SymbolsMap[d])return b.globalScope[d];d=b.mangleMap[d];if(void 0!==
d)return b.globalScope[d]}function Da(b){console.log(b)}Object.defineProperty(a,"__esModule",{value:!0});a.enableAsyncSupport=a.compileScript=a.referencesFunction=a.referencesMember=a.validateScript=a.extractFieldLiterals=a.executeScript=a.extend=a.functionHelper=void 0;var ka=0,J={};p.registerFunctions(J,P);F.registerFunctions(J,P);c.registerFunctions(J,P);y.registerFunctions(J,P);C.registerFunctions(J,P);J["typeof"]=function(b,d){return P(b,d,function(b,d,c){f.pcCheck(c,1,1);b=sa(c[0]);if("Unrecognised Type"===
b)throw Error("Unrecognised Type");return b})};J.iif=function(b,d){try{return P(b,d,function(b,d,c){f.pcCheck(c,3,3);if(!1===f.isBoolean(c[0]))throw Error("IF Function must have a boolean test condition");return c[0]?c[1]:c[2]})}catch(Fa){throw Fa;}};J.decode=function(b,d){try{return P(b,d,function(d,c,a){if(2>a.length)throw Error("Missing Parameters");if(2===a.length)return a[1];if(0===(a.length-1)%2)throw Error("Must have a default value result.");return Q(b,a,1,a[0])})}catch(Fa){throw Fa;}};J.when=
function(b,d){try{return P(b,d,function(d,c,a){if(3>a.length)throw Error("Missing Parameters");if(0===a.length%2)throw Error("Must have a default value result.");d=a[0];if(!1===f.isBoolean(d))throw Error("WHEN needs boolean test conditions");return ia(b,a,0,d)})}catch(Fa){throw Fa;}};J.top=function(b,d){return P(b,d,function(b,d,c){f.pcCheck(c,2,2);if(f.isArray(c[0]))return f.toNumber(c[1])>=c[0].length?c[0].slice(0):c[0].slice(0,f.toNumber(c[1]));if(f.isImmutableArray(c[0]))return f.toNumber(c[1])>=
c[0].length()?c[0].slice(0):c[0].slice(0,f.toNumber(c[1]));throw Error("Top cannot accept this parameter type");})};J.first=function(b,d){return P(b,d,function(b,d,c){f.pcCheck(c,1,1);return f.isArray(c[0])?0===c[0].length?null:c[0][0]:f.isImmutableArray(c[0])?0===c[0].length()?null:c[0].get(0):null})};J.sort=function(b,d){return P(b,d,function(d,c,a){f.pcCheck(a,1,2);c=a[0];f.isImmutableArray(c)&&(c=c.toArray());if(!1===f.isArray(c))throw Error("Illegal Argument");if(1<a.length){if(!1===f.isFunctionParameter(a[1]))throw Error("Illegal Argument");
var t=function(b,c){return Ba.callfunc(a[1],[b,c],d)};return b.isAsync?ma(c,t):c=M(c,function(b,d){return t(b,d)})}if(0===c.length)return[];for(var q={},g=0;g<c.length;g++){var e=sa(c[g]);""!==e&&(q[e]=!0)}if(!0===q.Array||!0===q.Dictionary||!0===q.Feature||!0===q.Point||!0===q.Polygon||!0===q.Polyline||!0===q.Multipoint||!0===q.Extent||!0===q.Function)return c.slice(0);var g=0,e="",p;for(p in q)g++,e=p;return c=1<g||"String"===e?M(c,function(b,d){if(null===b||void 0===b||b===f.voidOperation)return null===
d||void 0===d||d===f.voidOperation?0:1;if(null===d||void 0===d||d===f.voidOperation)return-1;b=f.toString(b);d=f.toString(d);return b<d?-1:b===d?0:1}):"Number"===e?M(c,function(b,d){return b-d}):"Boolean"===e?M(c,function(b,d){return b===d?0:d?-1:1}):"Date"===e?M(c,function(b,d){return d-b}):c.slice(0)})};var E={},t;for(t in J)E[t]=new f.NativeFunction(J[t]);n.registerFunctions(J,P);for(t in J)J[t]=new f.NativeFunction(J[t]);var ga=function(){};ga.prototype=J;var R=function(){};R.prototype=E;a.functionHelper=
{fixSpatialReference:f.fixSpatialReference,parseArguments:function(b,d){for(var c=[],a=0;a<d.arguments.length;a++)c.push(O(b,d.arguments[a]));return c},standardFunction:P};a.extend=da;a.executeScript=function(b,d){return b(d)};a.extractFieldLiterals=function(b,d){void 0===d&&(d=!1);return g.findFieldLiterals(b)};a.validateScript=function(b,d){return g.validateScript(b,d,"sync")};a.referencesMember=function(b,d){return g.referencesMember(b,d)};a.referencesFunction=function(b,d){return g.referencesFunction(b,
d)};var ua=0,Ba={error:function(b,d,c){throw Error(g.nodeErrorMessage(b,d,c));},__awaiter:function(b,d,c,a){return L.create(function(c,t){function f(b){try{g(a.next(b))}catch(Aa){t(Aa)}}function q(b){try{g(a["throw"](b))}catch(Aa){t(Aa)}}function g(b){b.done?c(b.value):b.value&&b.value.then?b.value.then(f,q):(ua++,0===ua%100?setTimeout(function(){ua=0;f(b.value)},0):f(b.value))}g((a=a.apply(b,d||[])).next())})},functionDepthchecker:function(b,d){return function(){d.depthCounter++;d.localStack.push([]);
if(64<d.depthCounter)throw Error("Exceeded maximum function depth");var c=b.apply(this,arguments);if(L.isPromiseLike(c))return c.then(function(b){d.depthCounter--;--d.localStack.length;return b});d.depthCounter--;--d.localStack.length;return c}},castString:function(b){return f.toString(b)},aCheck:function(b,d){if(f.isFunctionParameter(b))throw Error(g.nodeErrorMessage({type:d},"RUNTIME","FUNCTIONCONTEXTILLEGAL"));return b===f.voidOperation?null:b},Dictionary:m,Feature:k,dictionary:function(b){for(var d=
{},c=0;c<b.length;c+=2){if(f.isFunctionParameter(b[c+1]))throw Error("Illegal Argument");if(!1===f.isString(b[c]))throw Error("Illegal Argument");d[b[c].toString()]=b[c+1]===f.voidOperation?null:b[c+1]}b=new m(d);b.immutable=!1;return b},strCheck:function(b){if(!1===f.isString(b))throw Error("Illegal Argument");return b},unary:function(b,d){if(f.isBoolean(b)){if("!"===d)return!b;if("-"===d)return-1*f.toNumber(b);if("+"===d)return 1*f.toNumber(b);if("~"===d)return~f.toNumber(b);throw Error(g.nodeErrorMessage({type:"UnaryExpression",
operator:d,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===d)return-1*f.toNumber(b);if("+"===d)return 1*f.toNumber(b);if("~"===d)return~f.toNumber(b);throw Error(g.nodeErrorMessage({type:"UnaryExpression",operator:d,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));},logicalCheck:function(b){if(!1===f.isBoolean(b))throw Error(g.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));return b},logical:function(b,
d,c){if(f.isBoolean(b)&&f.isBoolean(d))switch(c){case "||":return b||d;case "\x26\x26":return b&&d}throw Error(g.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));},binary:function(b,d,c){switch(c){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return f.binaryOperator(f.toNumber(b),f.toNumber(d),c);case "\x3d\x3d":return f.equalityTest(b,d);case "\x3d":return f.equalityTest(b,d);case "!\x3d":return!f.equalityTest(b,
d);case "\x3c":return f.greaterThanLessThan(b,d,c);case "\x3e":return f.greaterThanLessThan(b,d,c);case "\x3c\x3d":return f.greaterThanLessThan(b,d,c);case "\x3e\x3d":return f.greaterThanLessThan(b,d,c);case "+":return f.isString(b)||f.isString(d)?f.toString(b)+f.toString(d):f.toNumber(b)+f.toNumber(d);case "-":return f.toNumber(b)-f.toNumber(d);case "*":return f.toNumber(b)*f.toNumber(d);case "/":return f.toNumber(b)/f.toNumber(d);case "%":return f.toNumber(b)%f.toNumber(d);default:throw Error(g.nodeErrorMessage({type:"BinaryExpression",
operator:c,left:b,right:d},"RUNTIME","OPERATORNOTRECOGNISED"));}},assign:function(b,d,c){switch(d){case "\x3d":return b===f.voidOperation?null:b;case "/\x3d":return f.toNumber(c)/f.toNumber(b);case "*\x3d":return f.toNumber(c)*f.toNumber(b);case "-\x3d":return f.toNumber(c)-f.toNumber(b);case "+\x3d":return f.isString(c)||f.isString(b)?f.toString(c)+f.toString(b):f.toNumber(c)+f.toNumber(b);case "%\x3d":return f.toNumber(c)%f.toNumber(b);default:throw Error(g.nodeErrorMessage({type:"AssignmentExpression",
operator:d,left:null,right:null},"RUNTIME","OPERATORNOTRECOGNISED"));}},update:function(b,d,c,a){var t=f.toNumber(b[d]);b[d]="++"===c?t+1:t-1;return!1===a?t:"++"===c?t+1:t-1},graphicToFeature:function(b,d){return null===b?null:k.createFromGraphicLikeObject(b.geometry,b.attributes,d)},memberupdate:function(b,d,c,a){var t;if(f.isArray(b))if(f.isNumber(d)){0>d&&(d=b.length+d);if(0>d||d>=b.length)throw Error("Assignment outside of array bounds");t=f.toNumber(b[d]);b[d]="++"===c?t+1:t-1}else throw Error("Invalid Parameter");
else if(b instanceof m){if(!1===f.isString(d))throw Error("Dictionary accessor must be a string");if(!0===b.hasField(d))t=f.toNumber(b.field(d)),b.setField(d,"++"===c?t+1:t-1);else throw Error("Invalid Parameter");}else if(b instanceof k){if(!1===f.isString(d))throw Error("Feature accessor must be a string");if(!0===b.hasField(d))t=f.toNumber(b.field(d)),b.setField(d,"++"===c?t+1:t-1);else throw Error("Invalid Parameter");}else{if(f.isImmutableArray(b))throw Error("Array is Immutable");throw Error("Invalid Parameter");
}return!1===a?t:"++"===c?t+1:t-1},assignmember:function(b,d,c,a){if(f.isArray(b))if(f.isNumber(d)){0>d&&(d=b.length+d);if(0>d||d>b.length)throw Error("Assignment outside of array bounds");if(d===b.length&&"\x3d"!==c)throw Error("Invalid Parameter");b[d]=this.assign(a,c,b[d])}else throw Error("Invalid Parameter");else if(b instanceof m){if(!1===f.isString(d))throw Error("Dictionary accessor must be a string");if(!0===b.hasField(d))b.setField(d,this.assign(a,c,b.field(d)));else{if("\x3d"!==c)throw Error("Invalid Parameter");
b.setField(d,this.assign(a,c,null))}}else if(b instanceof k){if(!1===f.isString(d))throw Error("Feature accessor must be a string");if(!0===b.hasField(d))b.setField(d,this.assign(a,c,b.field(d)));else{if("\x3d"!==c)throw Error("Invalid Parameter");b.setField(d,this.assign(a,c,null))}}else{if(f.isImmutableArray(b))throw Error("Array is Immutable");throw Error("Invalid Parameter");}},member:function(b,d){if(null===b)throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},
"RUNTIME","NOTFOUND"));if(b instanceof z.FeatureSetReader){if(f.isString(d))return b.field(d);throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(b instanceof m||b instanceof k){if(f.isString(d))return b.field(d);throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(b instanceof V){if(f.isString(d))return U(b,d,"MemberExpression");throw Error(g.nodeErrorMessage({type:"MemberExpression",
object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(f.isArray(b)){if(f.isNumber(d)&&isFinite(d)&&Math.floor(d)===d){0>d&&(d=b.length+d);if(d>=b.length||0>d)throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return b[d]}throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(f.isString(b)){if(f.isNumber(d)&&isFinite(d)&&Math.floor(d)===d){0>
d&&(d=b.length+d);if(d>=b.length||0>d)throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return b[d]}throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(f.isImmutableArray(b)&&f.isNumber(d)&&isFinite(d)&&Math.floor(d)===d){0>d&&(d=b.length()+d);if(d>=b.length()||0>d)throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},
"RUNTIME","OUTOFBOUNDS"));return b.get(d)}throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));},callfunc:function(b,d,c){return b instanceof f.NativeFunction?b.fn(c,d):b instanceof f.SizzleFunction?b.fn.apply(this,d):b.apply(this,d)}};a.compileScript=function(b,d,c){void 0===d&&(d=null);void 0===c&&(c=!1);null===d&&(d={vars:{},customfunctions:{}});d={isAsync:c,globalScope:ta(d.vars,c?E:J,d.customfunctions),localScope:null,mangleMap:{},
console:Da,lrucache:d.lrucache,services:d.services,symbols:{symbolCounter:0}};b=O(d,b.body[0].body);""===b&&(b="lc.voidOperation; ");d={lc:f,lang:Ba,mangles:d.mangleMap,postProcess:function(b){b instanceof f.ReturnResult&&(b=b.value);b instanceof f.ImplicitResult&&(b=b.value);b===f.voidOperation&&(b=null);if(b===f.breakResult)throw Error("Cannot return BREAK");if(b===f.continueResult)throw Error("Cannot return CONTINUE");if(f.isFunctionParameter(b))throw Error("Cannot return FUNCTION");return b},
prepare:function(b,d){var c=b.spatialReference;if(null===c||void 0===c)c=new I({wkid:102100});var a=b.vars,t=b.customfunctions,f=d?new R:new ga;a||(a={});t||(t={});var q=new m({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});q.immutable=!1;f._SymbolsMap={textformatting:1,infinity:1,pi:1};f.textformatting=q;f.infinity=Number.POSITIVE_INFINITY;f.pi=Math.PI;for(var g in t)f[g]=t[g],f._SymbolsMap[g]=1;for(g in a)f._SymbolsMap[g]=1,f[g]=a[g]&&"esri.Graphic"===
a[g].declaredClass?k.createFromGraphic(a[g]):a[g];return{localStack:[],isAsync:d,mangleMap:this.mangles,spatialReference:c,globalScope:f,abortSignal:void 0===b.abortSignal||null===b.abortSignal?{aborted:!1}:b.abortSignal,localScope:null,services:b.services,console:b.console?b.console:Da,lrucache:b.lrucache,symbols:{symbolCounter:0},depthCounter:1}}};return(new Function("context","spatialReference",c?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+
b+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+b+"\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(d)};a.enableAsyncSupport=function(){return(new Promise(function(b,d){v(["./functions/geomasync"],b,d)})).then(function(b){da([b],"async");
return!0})}})},"esri/arcade/ArcadePortal":function(){define(["require","exports","tslib","./Dictionary"],function(v,a,l,u){return function(a){function k(h){var e=a.call(this)||this;e.immutable=!1;e.setField("url",h);e.immutable=!0;return e}l.__extends(k,a);return k}(u)})},"esri/arcade/Dictionary":function(){define(["require","exports","./ImmutableArray","./languageUtils","../geometry/Geometry"],function(v,a,l,u,m){function k(a){var f=null;if(null!==a)if(u.isNumber(a))f=u.toNumber(a);else if(u.isBoolean(a))f=
u.toBoolean(a);else if(u.isString(a))f=u.toString(a);else if(u.isDate(a))f=u.toDate(a);else if(u.isArray(a))for(var f=[],g=0;g<a.length;g++)f.push(k(a[g]));else{if(0===Object.keys(a).length)return null;f=new h;f.immutable=!1;for(var g=0,e=Object.keys(a);g<e.length;g++){var m=e[g];f.setField(m,k(a[m]))}f.immutable=!0}return f}var h=function(){function a(f){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=f instanceof a?f.attributes:void 0===
f?{}:null===f?{}:f}a.prototype.field=function(a){var f=a.toLowerCase(),e=this.attributes[a];if(void 0!==e)return e;for(var h in this.attributes)if(h.toLowerCase()===f)return this.attributes[h];throw Error("Field not Found : "+a);};a.prototype.setField=function(a,g){if(this.immutable)throw Error("Dictionary is Immutable");var f=a.toLowerCase();if(void 0===this.attributes[a])for(var e in this.attributes)if(e.toLowerCase()===f){this.attributes[e]=g;return}this.attributes[a]=g};a.prototype.hasField=function(a){var f=
a.toLowerCase();if(void 0!==this.attributes[a])return!0;for(var e in this.attributes)if(e.toLowerCase()===f)return!0;return!1};a.prototype.keys=function(){var a=[],g;for(g in this.attributes)a.push(g);return a=a.sort()};a.prototype.castToText=function(){var a="",g;for(g in this.attributes){""!==a&&(a+=",");var e=this.attributes[g];null==e?a+=JSON.stringify(g)+":null":u.isBoolean(e)||u.isNumber(e)||u.isString(e)?a+=JSON.stringify(g)+":"+JSON.stringify(e):e instanceof m?a+=JSON.stringify(g)+":"+u.toStringExplicit(e):
e instanceof l?a+=JSON.stringify(g)+":"+u.toStringExplicit(e):e instanceof Array?a+=JSON.stringify(g)+":"+u.toStringExplicit(e):e instanceof Date?a+=JSON.stringify(g)+":"+JSON.stringify(e):null!==e&&"object"===typeof e&&void 0!==e.castToText&&(a+=JSON.stringify(g)+":"+e.castToText())}return"{"+a+"}"};a.convertObjectToArcadeDictionary=function(f){var g=new a;g.immutable=!1;for(var e in f)g.setField(e.toString(),k(f[e]));g.immutable=!0;return g};return a}();return h})},"esri/arcade/ImmutableArray":function(){define(["require",
"exports"],function(v,a){return function(){function a(a){void 0===a&&(a=[]);this._elements=a}a.prototype.length=function(){return this._elements.length};a.prototype.get=function(a){return this._elements[a]};a.prototype.toArray=function(){for(var a=[],m=0;m<this.length();m++)a.push(this.get(m));return a};return a}()})},"esri/arcade/languageUtils":function(){define("require exports ./FunctionWrapper ./ImmutableArray ./ImmutablePathArray ./ImmutablePointArray ../core/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../core/number ../geometry/support/coordsUtils ../core/maybe".split(" "),
function(v,a,l,u,m,k,h,e,f,g,p,y,n,c,C,F){function L(b,d,c){return""===d||null===d||void 0===d||d===c||d===c?b:b=b.split(d).join(c)}function T(b){return b instanceof M||b instanceof l||b instanceof ma}function V(d){return A(d)||q(d)||z(d)||b(d)||null===d||d===a.voidOperation||"number"===typeof d?!0:!1}function A(b){return"string"===typeof b||b instanceof String}function b(b){return"boolean"===typeof b}function q(b){return"number"===typeof b}function d(b){return b instanceof Array}function I(b){return b instanceof
u}function z(b){return b instanceof Date}function P(b,d){if(!1===isNaN(b)){if(void 0===d||null===d||""===d)return b.toString();d=L(d,"\u2030","");d=L(d,"\u00a4","");return c.format(b,{pattern:d})}return b.toString()}function K(b,d){b=a.MomentLibrary.Moment(b);return void 0===d||null===d||""===d?b.format():b.format(O(d))}function O(b){return b.replace(/(LTS)|L|l/g,function(b){return"["+b+"]"})}function S(b,d,c){switch(c){case "\x3e":return b>d;case "\x3c":return b<d;case "\x3e\x3d":return b>=d;case "\x3c\x3d":return b<=
d}return!1}function W(b,d){if(b===d||null===b&&d===a.voidOperation||null===d&&b===a.voidOperation)return!0;if(z(b)&&z(d))return b.getTime()===d.getTime();if(b instanceof m||b instanceof k)return b.equalityTest(d);if(b instanceof p&&d instanceof p){var c=void 0,q=void 0,c=b.cache._arcadeCacheId,q=d.cache._arcadeCacheId;if(void 0!==c&&null!==c)return c===q}return void 0!==b&&void 0!==d&&null!==b&&null!==d&&"object"===typeof b&&"object"===typeof d&&(b._arcadeCacheId===d._arcadeCacheId&&void 0!==b._arcadeCacheId&&
null!==b._arcadeCacheId||b._underlyingGraphic===d._underlyingGraphic&&void 0!==b._underlyingGraphic&&null!==b._underlyingGraphic)?!0:!1}function Y(c,a){if(A(c))return c;if(null===c)return"";if(q(c))return P(c,a);if(b(c))return c.toString();if(z(c))return K(c,a);if(c instanceof f)return JSON.stringify(c.toJSON());if(d(c)){a=[];for(var g=0;g<c.length;g++)a[g]=ra(c[g]);return"["+a.join(",")+"]"}if(c instanceof u){a=[];for(g=0;g<c.length();g++)a[g]=ra(c.get(g));return"["+a.join(",")+"]"}return null!==
c&&"object"===typeof c&&void 0!==c.castToText?c.castToText():T(c)?"object, Function":""}function na(c,a){if(A(c))return c;if(null===c)return"";if(q(c))return P(c,a);if(b(c))return c.toString();if(z(c))return K(c,a);if(c instanceof f)return c instanceof e?'{"xmin":'+c.xmin.toString()+',"ymin":'+c.ymin.toString()+","+(c.hasZ?'"zmin":'+c.zmin.toString()+",":"")+(c.hasM?'"mmin":'+c.mmin.toString()+",":"")+'"xmax":'+c.xmax.toString()+',"ymax":'+c.ymax.toString()+","+(c.hasZ?'"zmax":'+c.zmax.toString()+
",":"")+(c.hasM?'"mmax":'+c.mmax.toString()+",":"")+'"spatialReference":'+sa(c.spatialReference)+"}":sa(c.toJSON(),function(b,d){return b.key===d.key?0:"spatialReference"===b.key?1:"spatialReference"===d.key||b.key<d.key?-1:b.key>d.key?1:0});if(d(c)){a=[];for(var g=0;g<c.length;g++)a[g]=ra(c[g]);return"["+a.join(",")+"]"}if(c instanceof u){a=[];for(g=0;g<c.length();g++)a[g]=ra(c.get(g));return"["+a.join(",")+"]"}return null!==c&&"object"===typeof c&&void 0!==c.castToText?c.castToText():T(c)?"object, Function":
""}function ra(d){return null===d?"null":b(d)||q(d)||A(d)?JSON.stringify(d):d instanceof f||d instanceof u||d instanceof Array?na(d):d instanceof Date?JSON.stringify(K(d,"")):null!==d&&"object"===typeof d&&void 0!==d.castToText?d.castToText():"null"}function U(f,g){return q(f)?f:null===f||""===f?0:z(f)?NaN:b(f)?f?1:0:d(f)||""===f||void 0===f?NaN:void 0!==g&&A(f)?(g=L(g,"\u2030",""),g=L(g,"\u00a4",""),c.parse(f,{pattern:g})):f===a.voidOperation?0:Number(f)}function pa(b,d){var c;d.fields.some(function(d){d.name===
b&&(c=d.domain);return!!c});return c}function sa(b,d){d||(d={});"function"===typeof d&&(d={cmp:d});var c="boolean"===typeof d.cycles?d.cycles:!1,a=d.cmp&&function(b){return function(d){return function(c,a){return b({key:c,value:d[c]},{key:a,value:d[a]})}}}(d.cmp),f=[];return function ka(b){b&&b.toJSON&&"function"===typeof b.toJSON&&(b=b.toJSON());if(void 0!==b){if("number"===typeof b)return isFinite(b)?""+b:"null";if("object"!==typeof b)return JSON.stringify(b);var d,t;if(Array.isArray(b)){t="[";
for(d=0;d<b.length;d++)d&&(t+=","),t+=ka(b[d])||"null";return t+"]"}if(null===b)return"null";if(-1!==f.indexOf(b)){if(c)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var q=f.push(b)-1,g=Object.keys(b).sort(a&&a(b));t="";for(d=0;d<g.length;d++){var e=g[d],h=ka(b[e]);h&&(t&&(t+=","),t+=JSON.stringify(e)+":"+h)}f.splice(q,1);return"{"+t+"}"}}(b)}function Q(b,d){if(d instanceof p)b.push(d.hasZ?d.hasM?[d.x,d.y,d.z,d.m]:[d.x,d.y,d.z]:[d.x,d.y]);else throw Error("Invalid Argument");
}Object.defineProperty(a,"__esModule",{value:!0});a.binaryOperator=a.MomentLibrary=a.tick=a.toStringArray=a.autoCastArrayOfPointsToMultiPoint=a.autoCastArrayOfPointsToPolyline=a.autoCastArrayOfPointsToPolygon=a.autoCastFeatureToGeometry=a.stableStringify=a.getDomain=a.getDomainCode=a.getDomainValue=a.fixNullGeometry=a.fixSpatialReference=a.toBoolean=a.toDateM=a.toDate=a.toNumber=a.toStringExplicit=a.toNumberArray=a.toString=a.equalityTest=a.greaterThanLessThan=a.standardiseDateFormat=a.formatDate=
a.formatNumber=a.generateUUID=a.pcCheck=a.isDate=a.isImmutableArray=a.isFeatureSetCollection=a.isFeatureSet=a.isArray=a.isNumber=a.isBoolean=a.isString=a.defaultUndefined=a.isSimpleType=a.isFunctionParameter=a.multiReplace=a.continueResult=a.breakResult=a.voidOperation=a.SizzleFunction=a.ReturnResult=a.ImplicitResult=a.NativeFunction=a.SizzleFunctionE=a.NativeFunctionE=a.ImplicitResultE=a.ReturnResultE=void 0;v=function(){return function(b){this.value=b}}();a.ReturnResultE=v;var ia=function(){return function(b){this.value=
b}}();a.ImplicitResultE=ia;var M=function(){return function(b){this.fn=b}}();a.NativeFunctionE=M;var ma=function(){return function(b){this.fn=b}}();a.SizzleFunctionE=ma;a.NativeFunction=M;a.ImplicitResult=ia;a.ReturnResult=v;a.SizzleFunction=ma;a.voidOperation={type:"VOID"};a.breakResult={type:"BREAK"};a.continueResult={type:"CONTINUE"};a.multiReplace=L;a.isFunctionParameter=T;a.isSimpleType=V;a.defaultUndefined=function(b,d){return void 0===b?d:b};a.isString=A;a.isBoolean=b;a.isNumber=q;a.isArray=
d;a.isFeatureSet=function(b){return!0===(b&&b.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===b.declaredRootClass)};a.isFeatureSetCollection=function(b){return!0===(b&&b.declaredRootClass&&"esri.arcade.featureSetCollection"===b.declaredRootClass)};a.isImmutableArray=I;a.isDate=z;a.pcCheck=function(b,d,c){if(b.length<d||b.length>c)throw Error("Function called with wrong number of Parameters");};a.generateUUID=function(){var b=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,
function(d){var c=(b+16*Math.random())%16|0;b=Math.floor(b/16);return("x"===d?c:c&3|8).toString(16)})};a.formatNumber=P;a.formatDate=K;a.standardiseDateFormat=O;a.greaterThanLessThan=function(d,c,f){if(null===d){if(null===c||c===a.voidOperation)return S(null,null,f);if(q(c))return S(0,c,f);if(A(c)||b(c))return S(0,U(c),f);if(z(c))return S(0,c.getTime(),f)}if(d===a.voidOperation){if(null===c||c===a.voidOperation)return S(null,null,f);if(q(c))return S(0,c,f);if(A(c)||b(c))return S(0,U(c),f);if(z(c))return S(0,
c.getTime(),f)}else if(q(d)){if(q(c))return S(d,c,f);if(b(c))return S(d,U(c),f);if(null===c||c===a.voidOperation)return S(d,0,f);if(A(c))return S(d,U(c),f);if(z(c))return S(d,c.getTime(),f)}else if(A(d)){if(A(c))return S(Y(d),Y(c),f);if(z(c))return S(U(d),c.getTime(),f);if(q(c))return S(U(d),c,f);if(null===c||c===a.voidOperation)return S(U(d),0,f);if(b(c))return S(U(d),U(c),f)}else if(z(d)){if(z(c))return S(d,c,f);if(null===c||c===a.voidOperation)return S(d.getTime(),0,f);if(q(c))return S(d.getTime(),
c,f);if(b(c)||A(c))return S(d.getTime(),U(c),f)}else if(b(d)){if(b(c))return S(d,c,f);if(q(c))return S(U(d),U(c),f);if(z(c))return S(U(d),c.getTime(),f);if(null===c||c===a.voidOperation)return S(U(d),0,f);if(A(c))return S(U(d),U(c),f)}return!W(d,c)||"\x3c\x3d"!==f&&"\x3e\x3d"!==f?!1:!0};a.equalityTest=W;a.toString=Y;a.toNumberArray=function(b){var c=[];if(!1===d(b))return null;if(b instanceof u){for(var a=0;a<b.length();a++)c[a]=U(b.get(a));return c}for(a=0;a<b.length;a++)c[a]=U(b[a]);return c};a.toStringExplicit=
na;a.toNumber=U;a.toDate=function(b,d){return z(b)?b:A(b)&&(b=a.MomentLibrary.Moment(b,[void 0===d||null===d||""===d?a.MomentLibrary.Moment.ISO_8601:d]),b.isValid())?b.toDate():null};a.toDateM=function(b,d){return z(b)?a.MomentLibrary.Moment(b):A(b)&&(b=a.MomentLibrary.Moment(b,[void 0===d||null===d||""===d?a.MomentLibrary.Moment.ISO_8601:d]),b.isValid())?b:null};a.toBoolean=function(d){return b(d)?d:A(d)?(d=d.toLowerCase(),"true"===d?!0:!1):q(d)?0===d||isNaN(d)?!1:!0:!1};a.fixSpatialReference=function(b,
d){if(F.isNone(b))return null;if(null===b.spatialReference||void 0===b.spatialReference)b.spatialReference=d;return b};a.fixNullGeometry=function(b){return null===b?null:b instanceof p?"NaN"===b.x||null===b.x||isNaN(b.x)?null:b:b instanceof y?0===b.rings.length?null:b:b instanceof n?0===b.paths.length?null:b:b instanceof g?0===b.points.length?null:b:b instanceof e?"NaN"===b.xmin||null===b.xmin||isNaN(b.xmin)?null:b:null};a.getDomainValue=function(b,d){if(!b||!b.domain)return d;var c=null;if("string"===
b.field.type||"esriFieldTypeString"===b.field.type)d=Y(d);else{if(null===d||void 0===d)return null;if(""===d)return d;d=U(d)}for(var a=0;a<b.domain.codedValues.length;a++){var f=b.domain.codedValues[a];f.code===d&&(c=f)}return null===c?d:c.name};a.getDomainCode=function(b,d){if(!b||!b.domain)return d;var c=null;d=Y(d);for(var a=0;a<b.domain.codedValues.length;a++){var f=b.domain.codedValues[a];f.name===d&&(c=f)}return null===c?d:c.code};a.getDomain=function(b,d,c,a){void 0===c&&(c=null);if(!d||!d.fields)return null;
for(var f=null,q=0;q<d.fields.length;q++){var g=d.fields[q];g.name.toLowerCase()===b.toString().toLowerCase()&&(f=g)}if(null===f)throw Error("Field not found");var e,h;a||(a=c&&d.typeIdField&&c._field(d.typeIdField));null!=a&&d.types.some(function(b){return b.id===a?((e=b.domains&&b.domains[f.name])&&"inherited"===e.type&&(e=pa(f.name,d),h=!0),!0):!1});h||e||(e=pa(b,d));return{field:f,domain:e}};a.stableStringify=sa;a.autoCastFeatureToGeometry=function(b){if(null===b)return null;for(var d=[],c=0;c<
b.length;c++){var a=b[c];a&&(a.declaredClass&&"esri.arcade.Feature"===a.declaredClass||"FeatureSetReader"===a.type)?d.push(a.geometry()):d.push(a)}return d};a.autoCastArrayOfPointsToPolygon=function(b,c){if(d(b)||I(b)){var a=!1,f=!1,q=[];if(d(b)){for(var g=0;g<b.length;g++){var e=b[g];Q(q,e)}0<q.length&&(c=b[0].spatialReference,a=b[0].hasZ,f=b[0].hasM)}else if(b instanceof k)q=b._elements,0<q.length&&(a=b._hasZ,f=b._hasM,c=b.get(0).spatialReference);else if(I(b)){for(var g=0,h=b.toArray();g<h.length;g++)e=
h[g],Q(q,e);0<q.length&&(c=b.get(0).spatialReference,a=!0===b.get(0).hasZ,f=!0===b.get(0).hasM)}else throw Error("Invalid Argument");if(0===q.length)return null;!1===C.isClockwise(q,f,a)&&(q=q.slice(0).reverse());return new y({rings:[q],spatialReference:c,hasZ:a,hasM:f})}return b};a.autoCastArrayOfPointsToPolyline=function(b,c){if(d(b)||I(b)){var a=!1,f=!1,q=[];if(d(b)){for(var g=0;g<b.length;g++){var e=b[g];Q(q,e)}0<q.length&&(c=b[0].spatialReference,a=!0===b[0].hasZ,f=!0===b[0].hasM)}else if(b instanceof
k)q=b._elements,0<q.length&&(a=b._hasZ,f=b._hasM,c=b.get(0).spatialReference);else if(I(b)){for(var g=0,h=b.toArray();g<h.length;g++)e=h[g],Q(q,e);0<q.length&&(c=b.get(0).spatialReference,a=!0===b.get(0).hasZ,f=!0===b.get(0).hasM)}return 0===q.length?null:new n({paths:[q],spatialReference:c,hasZ:a,hasM:f})}return b};a.autoCastArrayOfPointsToMultiPoint=function(b,c){if(d(b)||I(b)){var a=!1,f=!1,q=[];if(d(b)){for(var e=0;e<b.length;e++){var h=b[e];Q(q,h)}0<q.length&&(c=b[0].spatialReference,a=!0===
b[0].hasZ,f=!0===b[0].hasM)}else if(b instanceof k)q=b._elements,0<q.length&&(a=b._hasZ,f=b._hasM,c=b.get(0).spatialReference);else if(I(b)){for(var e=0,n=b.toArray();e<n.length;e++)h=n[e],Q(q,h);0<q.length&&(c=b.get(0).spatialReference,a=!0===b.get(0).hasZ,f=!0===b.get(0).hasM)}return 0===q.length?null:new g({points:q,spatialReference:c,hasZ:a,hasM:f})}return b};a.toStringArray=function(b,c){void 0===c&&(c=!1);var a=[];if(null===b)return a;if(!0===d(b)){for(var f=0;f<b.length;f++){var q=Y(b[f]);
""===q&&!0!==c||a.push(q)}return a}if(b instanceof u){for(f=0;f<b.length();f++)q=Y(b.get(f)),""===q&&!0!==c||a.push(q);return a}return V(b)?(q=Y(b),""===q&&!0!==c||a.push(q),a):[]};var la=0;a.tick=function(b){la++;return 0===la%100?(la=0,h.create(function(d){setTimeout(function(){d(b)},0)})):b};a.MomentLibrary={Moment:null};a.binaryOperator=function(b,d,c){switch(c){case "\x26":return b&d;case "|":return b|d;case "^":return b^d;case "\x3c\x3c":return b<<d;case "\x3e\x3e":return b>>d;case "\x3e\x3e\x3e":return b>>>
d}}})},"esri/arcade/FunctionWrapper":function(){define(["require","exports"],function(v,a){return function(){return function(a,u){this.context=this.definition=null;this.definition=a;this.context=u}}()})},"esri/arcade/ImmutablePathArray":function(){define(["require","exports","tslib","./ImmutableArray","./ImmutablePointArray"],function(v,a,l,u,m){return function(a){function h(e,f,g,h,k){e=a.call(this,e)||this;e._lazyPath=[];e._hasZ=!1;e._hasM=!1;e._hasZ=g;e._hasM=h;e._spRef=f;e._cacheId=k;return e}
l.__extends(h,a);h.prototype.get=function(a){if(void 0===this._lazyPath[a]){var f=this._elements[a];if(void 0===f)return;this._lazyPath[a]=new m(f,this._spRef,this._hasZ,this._hasM,this._cacheId,a)}return this._lazyPath[a]};h.prototype.equalityTest=function(a){return a===this?!0:null===a||!1===a instanceof h?!1:a.getUniqueHash()===this.getUniqueHash()};h.prototype.getUniqueHash=function(){return this._cacheId.toString()};return h}(u)})},"esri/arcade/ImmutablePointArray":function(){define(["require",
"exports","tslib","./ImmutableArray","../geometry/Point"],function(v,a,l,u,m){return function(a){function h(e,f,g,h,k,n){e=a.call(this,e)||this;e._lazyPt=[];e._hasZ=!1;e._hasM=!1;e._spRef=f;e._hasZ=g;e._hasM=h;e._cacheId=k;e._partId=n;return e}l.__extends(h,a);h.prototype.get=function(a){if(void 0===this._lazyPt[a]){var f=this._elements[a];if(void 0===f)return;var g=this._hasZ,e=this._hasM,h=null,h=g&&!e?new m(f[0],f[1],f[2],void 0,this._spRef):e&&g?new m(f[0],f[1],void 0,f[2],this._spRef):g&&e?new m(f[0],
f[1],f[2],f[3],this._spRef):new m(f[0],f[1],this._spRef);h.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+a.toString();this._lazyPt[a]=h}return this._lazyPt[a]};h.prototype.equalityTest=function(a){return a===this?!0:null===a||!1===a instanceof h?!1:a.getUniqueHash()===this.getUniqueHash()};h.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return h}(u)})},"esri/core/number":function(){define(["require","exports","tslib",
"../core/string","../intl/locale"],function(v,a,l,u,m){function k(c){c||(c=m.getLocale());var a=c in p;if(!a){var f=c.split("-");1<f.length&&f[0]in p&&(c=f[0],a=!0);a||(c="en")}c=p[c];a=c[2];return{decimal:c[0],group:c[1],pattern:void 0===a?"#,##0.###":a}}function h(c,a,f){f=f||{};!0===f.places&&(f.places=0);Infinity===f.places&&(f.places=6);a=a.split(".");var g="string"===typeof f.places&&f.places.indexOf(","),e=f.places;g?e=f.places.substring(g+1):0<=e||(e=(a[1]||[]).length);0>f.round||(c=Number(c.toFixed(Number(e))));
c=String(Math.abs(c)).split(".");var h=c[1]||"";a[1]||f.places?(g&&(f.places=f.places.substring(0,g)),g=void 0!==f.places?f.places:a[1]&&a[1].lastIndexOf("0")+1,g>h.length&&(c[1]=u.padEnd(h,Number(g),"0")),e<h.length&&(c[1]=h.substr(0,Number(e)))):c[1]&&c.pop();e=a[0].replace(",","");g=e.indexOf("0");-1!==g&&(g=e.length-g,g>c[0].length&&(c[0]=u.padStart(c[0],g,"0")),-1===e.indexOf("#")&&(c[0]=c[0].substr(c[0].length-g)));var e=a[0].lastIndexOf(","),n,b;-1!==e&&(n=a[0].length-e-1,a=a[0].substr(0,e),
e=a.lastIndexOf(","),-1!==e&&(b=a.length-e-1));a=[];for(e=c[0];e;)g=e.length-n,a.push(0<g?e.substr(g):e),e=0<g?e.slice(0,g):"",b&&(n=b,b=void 0);c[0]=a.reverse().join(f.group||",");return c.join(f.decimal||".")}function e(c){c=c||{};var a=k(c.locale),g=c.pattern||a.pattern,e=a.group,h=a.decimal,p=1;if(-1!==g.indexOf("%"))p/=100;else if(-1!==g.indexOf("\u2030"))p/=1E3;else if(-1!==g.indexOf("\u00a4"))throw Error("currency notation not supported");a=g.split(";");1===a.length&&a.push("-"+a[0]);return{regexp:n(a,
function(a){a="(?:"+u.escapeRegExpString(a,".")+")";return a.replace(y,function(b){var a={signed:!1,separator:c.strict?e:[e,""],fractional:c.fractional,decimal:h,exponent:!1};b=b.split(".");var d=c.places;1===b.length&&1!==p&&(b[1]="###");1===b.length||0===d?a.fractional=!1:(void 0===d&&(d=c.pattern?b[1].lastIndexOf("0")+1:Infinity),d&&null==c.fractional&&(a.fractional=!0),!c.places&&d<b[1].length&&(d+=","+b[1].length),a.places=d);b=b[0].split(",");1<b.length&&(a.groupSize=b.pop().length,1<b.length&&
(a.groupSize2=b.pop().length));return"("+f(a)+")"})},!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:e,decimal:h,factor:p}}function f(c){c=c||{};"places"in c||(c.places=Infinity);"string"!==typeof c.decimal&&(c.decimal=".");"fractional"in c&&!/^0/.test(String(c.places))||(c.fractional=[!0,!1]);"exponent"in c||(c.exponent=[!0,!1]);"eSigned"in c||(c.eSigned=[!0,!1]);var a=g(c),f=n(c.fractional,function(a){var f="";a&&0!==c.places&&(f="\\"+c.decimal,f=Infinity===c.places?"(?:"+f+"\\d+)?":f+("\\d{"+c.places+
"}"));return f},!0),e=n(c.exponent,function(a){return a?"([eE]"+g({signed:c.eSigned})+")":""}),a=a+f;f&&(a="(?:(?:"+a+")|(?:"+f+"))");return a+e}function g(c){c=c||{};"signed"in c||(c.signed=[!0,!1]);"separator"in c?"groupSize"in c||(c.groupSize=3):c.separator="";var a=n(c.signed,function(c){return c?"[-+]":""},!0),f=n(c.separator,function(a){if(!a)return"(?:\\d+)";a=u.escapeRegExpString(a);" "===a?a="\\s":"\u00a0"===a&&(a="\\s\\xa0");var f=c.groupSize,g=c.groupSize2;return g?(a="(?:0|[1-9]\\d{0,"+
(g-1)+"}(?:["+a+"]\\d{"+g+"})*["+a+"]\\d{"+f+"})",0<f-g?"(?:"+a+"|(?:0|[1-9]\\d{0,"+(f-1)+"}))":a):"(?:0|[1-9]\\d{0,"+(f-1)+"}(?:["+a+"]\\d{"+f+"})*)"},!0);return a+f}Object.defineProperty(a,"__esModule",{value:!0});a.parse=a._parseInfo=a.regexp=a.format=a.getCustoms=void 0;var p={ar:[".",","],bs:[",","."],ca:[",","."],cs:[",","\u00a0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\u00a0"],fi:[",","\u00a0"],fr:[",",
"\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\u00a0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\u00a0"],lv:[",","\u00a0"],mk:[",","."],nb:[",","\u00a0"],nl:[",","."],pl:[",","\u00a0"],pt:[",","."],"pt-pt":[",","\u00a0"],ro:[",","."],ru:[",","\u00a0"],sk:[",","\u00a0"],sl:[",","."],sr:[",","."],sv:[",","\u00a0"],th:[".",","],tr:[",","."],uk:[",","\u00a0"],vi:[",","."],zh:[".",","]};a.getCustoms=k;a.format=
function(c,a){a=l.__assign({},a);var f=k(a.locale);a.customs=f;var g=a.pattern||f.pattern;if(isNaN(c)||Infinity===Math.abs(c))return null;a=a||{};var f=a.customs.group,e=a.customs.decimal,g=g.split(";"),n=g[0],g=g[0>c?1:0]||"-"+n;if(-1!==g.indexOf("%"))c*=100;else if(-1!==g.indexOf("\u2030"))c*=1E3;else{if(-1!==g.indexOf("\u00a4"))throw Error("currency notation not supported");if(-1!==g.indexOf("E"))throw Error("exponential notation not supported");}var p=y,n=n.match(p);if(!n)throw Error("unable to find a number expression in pattern: "+
g);!1===a.fractional&&(a.places=0);return g.replace(p,h(c,n[0],{decimal:e,group:f,places:a.places,round:a.round}))};var y=/[#0,]*[#0](?:\.0*#*)?/;a.regexp=function(c){return e(c).regexp};a._parseInfo=e;a.parse=function(c,a){a=e(a);c=(new RegExp("^"+a.regexp+"$")).exec(c);if(!c)return NaN;var f=c[1];if(!c[1]){if(!c[2])return NaN;f=c[2];a.factor*=-1}f=f.replace(new RegExp("["+a.group+"\\s\\xa0]","g"),"").replace(a.decimal,".");return Number(f)*a.factor};var n=function(c,a,f){if(!(c instanceof Array))return a(c);
for(var g=[],e=0;e<c.length;e++)g.push(a(c[e]));c=g.join("|");return"("+(f?"?:":"")+c+")"}})},"esri/arcade/Attachment":function(){define(["require","exports","tslib","./Dictionary"],function(v,a,l,u){return function(a){function k(h,e,f,g,p){var k=a.call(this)||this;k.attachmentUrl=p;k.immutable=!1;k.setField("id",h);k.setField("name",e);k.setField("contenttype",f);k.setField("size",g);k.immutable=!0;return k}l.__extends(k,a);return k}(u)})},"esri/arcade/Feature":function(){define("require exports tslib ./Dictionary ./ImmutableArray ./languageUtils ../geometry/Geometry ../geometry/Point ../geometry/support/jsonUtils ./featureset/support/shared ../layers/graphics/featureConversionUtils ../core/maybe".split(" "),
function(v,a,l,u,m,k,h,e,f,g,p,y){return function(){function a(){this.declaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=this._optimizedGeomDefinition=null;this.immutable=this._datesfixed=!0;this._datefields=null;this.immutable=!0}a.createFromGraphic=function(c){var f=new a;f._geometry=y.isSome(c.geometry)?c.geometry:null;f.attributes=void 0===c.attributes?{}:null===c.attributes?{}:c.attributes;c._sourceLayer?(f._layer=c._sourceLayer,f._datesfixed=!1):c._layer?(f._layer=
c._layer,f._datesfixed=!1):c.layer?(f._layer=c.layer,f._datesfixed=!1):c.sourceLayer&&(f._layer=c.sourceLayer,f._datesfixed=!1);return f};a.createFromArcadeFeature=function(c){var f=new a;f._datesfixed=c._datesfixed;f.attributes=c.attributes;f._geometry=c._geometry;f._optimizedGeomDefinition=c._optimizedGeomDefinition;c._layer&&(f._layer=c._layer);return f};a.createFromOptimisedFeature=function(c,f,g){var e=new a;e._geometry=c.geometry?{geometry:c.geometry}:null;e._optimizedGeomDefinition=g;e.attributes=
c.attributes||{};e._layer=f;e._datesfixed=!1;return e};a.createFromArcadeDictionary=function(c){var f=new a;f.attributes=c.field("attributes");null!==f.attributes?f.attributes instanceof u?(f.attributes=f.attributes.attributes,null===f.attributes&&(f.attributes={})):f.attributes={}:f.attributes={};f._geometry=c.field("geometry");null!==f._geometry&&(f._geometry instanceof u?f._geometry=a.parseGeometryFromDictionary(f._geometry):f._geometry instanceof h||(f._geometry=null));return f};a.createFromGraphicLikeObject=
function(c,f,g){void 0===g&&(g=null);var e=new a;null===f&&(f={});e.attributes=f;e._geometry=y.isSome(c)?c:null;e._layer=g;e._layer&&(e._datesfixed=!1);e._adapter=null;return e};a.prototype.repurposeFromGraphicLikeObject=function(c,a,f){void 0===f&&(f=null);null===a&&(a={});this.attributes=a;this._geometry=c?c:null;this._datesfixed=(this._layer=f)?!1:!0};a.prototype.repurposeFromAdapter=function(c,a){void 0===a&&(a=null);this._adapter=c;this._layer=a};a.prototype.castToText=function(){if(this._adapter)return this._adapter.castToText();
var c="";!1===this._datesfixed&&this._fixDates();for(var a in this.attributes){""!==c&&(c+=",");var f=this.attributes[a];null==f?c+=JSON.stringify(a)+":null":k.isBoolean(f)||k.isNumber(f)||k.isString(f)?c+=JSON.stringify(a)+":"+JSON.stringify(f):f instanceof h?c+=JSON.stringify(a)+":"+k.toStringExplicit(f):f instanceof m?c+=JSON.stringify(a)+":"+k.toStringExplicit(f):f instanceof Array?c+=JSON.stringify(a)+":"+k.toStringExplicit(f):f instanceof Date?c+=JSON.stringify(a)+":"+JSON.stringify(f):null!==
f&&"object"===typeof f&&void 0!==f.castToText&&(c+=JSON.stringify(a)+":"+f.castToText())}return'{"geometry":'+(null===this.geometry()?"null":k.toStringExplicit(this.geometry()))+',"attributes":{'+c+"}}"};a.prototype._fixDates=function(){if(null!==this._datefields)0<this._datefields.length&&this._fixDateFields(this._datefields);else{for(var c=[],a=0;a<this._layer.fields.length;a++){var f=this._layer.fields[a];"date"!==f.type&&"esriFieldTypeDate"!==f.type||c.push(f.name)}this._datefields=c;0<c.length&&
this._fixDateFields(c)}this._datesfixed=!0};a.prototype._fixDateFields=function(c){this.attributes=l.__assign({},this.attributes);for(var a=0;a<c.length;a++){var f=this.attributes[c[a]];if(null!==f)if(void 0===f)for(var g in this.attributes){if(g.toLowerCase()===c[a].toLowerCase()){f=this.attributes[g];null===f||f instanceof Date||(this.attributes[g]=new Date(f));break}}else f instanceof Date||(this.attributes[c[a]]=new Date(f))}};a.prototype.geometry=function(){if(this._adapter)return this._adapter.geometry();
if(null===this._geometry||this._geometry instanceof h)return this._geometry;this._optimizedGeomDefinition?(this._geometry=y.unwrap(f.fromJSON(p.convertToGeometry(this._geometry,this._optimizedGeomDefinition.geometryType,this._optimizedGeomDefinition.hasZ,this._optimizedGeomDefinition.hasM))),this._geometry.spatialReference=this._optimizedGeomDefinition.spatialReference):this._geometry=y.unwrap(f.fromJSON(this._geometry));return this._geometry};a.prototype.field=function(c){if(this._adapter)return this._adapter.field(c);
!1===this._datesfixed&&this._fixDates();var a=this.attributes[c];if(void 0!==a)return a;var a=c.toLowerCase(),f;for(f in this.attributes)if(f.toLowerCase()===a)return this.attributes[f];if(this._hasFieldDefinition(a))return null;throw Error("Field not Found : "+c);};a.prototype._hasFieldDefinition=function(c){if(null===this._layer)return!1;for(var a=0;a<this._layer.fields.length;a++)if(this._layer.fields[a].name.toLowerCase()===c)return!0;return!1};a.prototype._field=function(c){var a;if(this._adapter)return null!==
(a=this._adapter.field(c))&&void 0!==a?a:null;!1===this._datesfixed&&this._fixDates();a=c.toLowerCase();c=this.attributes[c];if(void 0!==c)return c;for(var f in this.attributes)if(f.toLowerCase()===a)return this.attributes[f];return null};a.prototype.setField=function(c,a){if(this.immutable)throw Error("Feature is Immutable");if(!1===k.isSimpleType(a))throw Error("Illegal Value Assignment to Feature");if(this._adapter)this._adapter.setField(c,a);else{var f=c.toLowerCase();if(void 0===this.attributes[c])for(var g in this.attributes)if(g.toLowerCase()===
f){this.attributes[g]=a;return}this.attributes[c]=a}};a.prototype.hasField=function(c){if(this._adapter)return this._adapter.hasField(c);var a=c.toLowerCase();if(void 0!==this.attributes[c])return!0;for(var f in this.attributes)if(f.toLowerCase()===a)return!0;return this._hasFieldDefinition(a)?!0:!1};a.prototype.keys=function(){if(this._adapter)return this._adapter.keys();var c=[],a={},f;for(f in this.attributes)c.push(f),a[f.toLowerCase()]=1;if(null!==this._layer)for(f=0;f<this._layer.fields.length;f++){var g=
this._layer.fields[f];1!==a[g.name.toLowerCase()]&&c.push(g.name)}return c=c.sort()};a.parseGeometryFromDictionary=function(c){c=a.convertDictionaryToJson(c,!0);void 0!==c.spatialreference&&(c.spatialReference=c.spatialreference,delete c.spatialreference);void 0!==c.rings&&(c.rings=this.fixPathArrays(c.rings,!0===c.hasZ,!0===c.hasM));void 0!==c.paths&&(c.paths=this.fixPathArrays(c.paths,!0===c.hasZ,!0===c.hasM));void 0!==c.points&&(c.points=this.fixPointArrays(c.points,!0===c.hasZ,!0===c.hasM));return f.fromJSON(c)};
a.fixPathArrays=function(c,a,f){var g=[];if(c instanceof Array)for(var e=0;e<c.length;e++)g.push(this.fixPointArrays(c[e],a,f));else if(c instanceof m)for(e=0;e<c.length();e++)g.push(this.fixPointArrays(c.get(e),a,f));return g};a.fixPointArrays=function(c,a,f){var g=[];if(c instanceof Array)for(var h=0;h<c.length;h++){var p=c[h];p instanceof e?a&&f?g.push([p.x,p.y,p.z,p.m]):a?g.push([p.x,p.y,p.z]):f?g.push([p.x,p.y,p.m]):g.push([p.x,p.y]):p instanceof m?g.push(p.toArray()):g.push(p)}else if(c instanceof
m)for(h=0;h<c.length();h++)p=c.get(h),p instanceof e?a&&f?g.push([p.x,p.y,p.z,p.m]):a?g.push([p.x,p.y,p.z]):f?g.push([p.x,p.y,p.m]):g.push([p.x,p.y]):p instanceof m?g.push(p.toArray()):g.push(p);return g};a.convertDictionaryToJson=function(c,f){void 0===f&&(f=!1);var g={},e;for(e in c.attributes){var h=c.attributes[e];h instanceof u&&(h=a.convertDictionaryToJson(h));f?g[e.toLowerCase()]=h:g[e]=h}return g};a.parseAttributesFromDictionary=function(a){var c={},f;for(f in a.attributes){var g=a.attributes[f];
if(k.isSimpleType(g))c[f]=g;else throw Error("Illegal Argument");}return c};a.fromJson=function(c){var g=null;null!==c.geometry&&void 0!==c.geometry&&(g=f.fromJSON(c.geometry));var e={};if(null!==c.attributes&&void 0!==c.attributes)for(var h in c.attributes){var p=c.attributes[h];if(null===p)e[h]=p;else if(k.isString(p)||k.isNumber(p)||k.isBoolean(p)||k.isDate(p))e[h]=p;else throw Error("Illegal Argument");}return a.createFromGraphicLikeObject(g,e,null)};a.prototype.fullDomain=function(a,f){return null!==
this._layer&&this._layer.fields?k.getDomain(a,this._layer,this,f):null};a.prototype.subtypes=function(){return null!==this._layer&&this._layer.fields?this._layer.typeIdField?{subtypeField:this._layer.typeIdField,subtypes:this._layer.types?this._layer.types.map(function(a){return{name:a.name,code:a.id}}):[]}:null:null};a.prototype.domainValueLookup=function(a,f,g){if(null===this._layer||!this._layer.fields)return null;g=k.getDomain(a,this._layer,this,g);if(void 0===f)try{f=this.field(a)}catch(L){return null}return k.getDomainValue(g,
f)};a.prototype.domainCodeLookup=function(a,f,g){if(null===this._layer||!this._layer.fields)return null;if(void 0===f){try{f=this.field(a)}catch(L){return null}return f}a=k.getDomain(a,this._layer,this,g);return k.getDomainCode(a,f)};a.prototype.schema=function(){if(null===this._layer||!this._layer.fields)return null;for(var a=[],f=0,e=this._layer.fields;f<e.length;f++)a.push(g.esriFieldToJson(e[f]));return{objectIdField:this._layer.objectIdField,typeIdField:this._layer.typeIdField,geometryType:void 0===
g.layerGeometryEsriRestConstants[this._layer.geometryType]?"":g.layerGeometryEsriRestConstants[this._layer.geometryType],hasZ:!0===this._layer.hasZ,hasM:!0===this._layer.hasM,fields:a}};return a}()})},"esri/arcade/featureset/support/shared":function(){define(["require","exports","../../../core/promiseUtils","../../../geometry/Extent","../../../layers/support/Field"],function(v,a,l,u,m){function k(a){return a instanceof Date}Object.defineProperty(a,"__esModule",{value:!0});a.stableStringify=a.extractServiceUrl=
a.reduceArrayWithPromises=a.toEsriGeometryType=a.layerFieldEsriConstants=a.layerGeometryEsriRestConstants=a.layerGeometryEsriConstants=a.callback=a.errback=a.defaultMaxRecords=a.sameGeomType=a.convertLinearUnitsToCode=a.shapeExtent=a.convertSquareUnitsToCode=a.cloneAttributes=a.equalityTest=a.isDate=a.isArray=a.isNumber=a.isBoolean=a.isString=a.IdState=a.esriFieldToJson=a.cloneField=a.FeatureServiceDatabaseType=void 0;(function(a){a[a.Standardised=0]="Standardised";a[a.StandardisedNoInterval=1]="StandardisedNoInterval";
a[a.SqlServer=2]="SqlServer";a[a.Oracle=3]="Oracle";a[a.Postgres=4]="Postgres";a[a.PGDB=5]="PGDB";a[a.FILEGDB=6]="FILEGDB";a[a.NotEvaluated=7]="NotEvaluated"})(a.FeatureServiceDatabaseType||(a.FeatureServiceDatabaseType={}));a.cloneField=function(a){return m.fromJSON(a.toJSON())};a.esriFieldToJson=function(a){return a.toJSON()};(function(a){a[a.InFeatureSet=0]="InFeatureSet";a[a.NotInFeatureSet=1]="NotInFeatureSet";a[a.Unknown=2]="Unknown"})(a.IdState||(a.IdState={}));a.isString=function(a){return"string"===
typeof a||a instanceof String};a.isBoolean=function(a){return"boolean"===typeof a};a.isNumber=function(a){return"number"===typeof a};a.isArray=function(a){return a instanceof Array};a.isDate=k;a.equalityTest=function(a,e){return a===e?!0:k(a)&&k(e)?a.getTime()===e.getTime():!1};a.cloneAttributes=function(a){var e={},f;for(f in a)e[f]=a[f];return e};a.convertSquareUnitsToCode=function(a){if(void 0===a)return null;if("number"===typeof a)return a;switch(a.toLowerCase()){case "meters":case "meter":return 109404;
case "miles":case "mile":return 109413;case "kilometers":case "kilometer":case "km":return 109414}return null};a.shapeExtent=function(a){if(null===a)return null;switch(a.type){case "polygon":case "multipoint":case "polyline":return a.extent;case "point":return new u({xmin:a.x,ymin:a.y,xmax:a.x,ymax:a.y,spatialReference:a.spatialReference});case "extent":return a}return null};a.convertLinearUnitsToCode=function(a){if(void 0===a)return null;if("number"===typeof a||"number"===typeof a)return a;switch(a.toLowerCase()){case "meters":case "meter":return 9001;
case "miles":case "mile":return 9035;case "kilometers":case "kilometer":case "km":return 9036}return null};a.sameGeomType=function(a,e){return a===e||"point"===a&&"esriGeometryPoint"===e||"polyline"===a&&"esriGeometryPolyline"===e||"polygon"===a&&"esriGeometryPolygon"===e||"extent"===a&&"esriGeometryEnvelope"===e||"multipoint"===a&&"esriGeometryMultipoint"===e||"point"===e&&"esriGeometryPoint"===a||"polyline"===e&&"esriGeometryPolyline"===a||"polygon"===e&&"esriGeometryPolygon"===a||"extent"===e&&
"esriGeometryEnvelope"===a||"multipoint"===e&&"esriGeometryMultipoint"===a?!0:!1};a.defaultMaxRecords=1E3;a.errback=function(a){return function(e){a.reject(e)}};a.callback=function(a,e){return function(){try{a.apply(null,arguments)}catch(f){e.reject(f)}}};a.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",
esriGeometryEnvelope:"extent",envelope:"extent"};a.layerGeometryEsriRestConstants={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};a.layerFieldEsriConstants=
{"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger","long":"esriFieldTypeLong",single:"esriFieldTypeSingle","double":"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",
esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};a.toEsriGeometryType=
function(a){switch(a){case "point":return"esriGeometryPoint";case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};a.reduceArrayWithPromises=function(a,e){return l.create(function(f,g){var p=l.resolve(!0);a.reduce(function(a,f,c,g){return a.then(function(a){try{return e(a,f,c,g)}catch(L){return l.reject(L)}},function(a){return l.reject(a)})},p).then(f,g)})};a.extractServiceUrl=function(a){if(void 0===
a)return"";a=a.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");a=a.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return a=a.split("?")[0]};a.stableStringify=function(a,e){e||(e={});"function"===typeof e&&(e={cmp:e});var f="boolean"===typeof e.cycles?e.cycles:!1,g=e.cmp&&function(a){return function(f){return function(c,g){return a({key:c,value:f[c]},{key:g,value:f[g]})}}}(e.cmp),p=[];return function n(a){a&&a.toJSON&&"function"===typeof a.toJSON&&(a=a.toJSON());if(void 0!==a){if("number"===typeof a)return isFinite(a)?
""+a:"null";if("object"!==typeof a)return JSON.stringify(a);var c,e;if(Array.isArray(a)){e="[";for(c=0;c<a.length;c++)c&&(e+=","),e+=n(a[c])||"null";return e+"]"}if(null===a)return"null";if(-1!==p.indexOf(a)){if(f)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var h=p.push(a)-1,k=Object.keys(a).sort(g&&g(a));e="";for(c=0;c<k.length;c++){var m=k[c],l=n(a[m]);l&&(e&&(e+=","),e+=JSON.stringify(m)+":"+l)}p.splice(h,1);return"{"+e+"}"}}(a)}})},"esri/layers/graphics/featureConversionUtils":function(){define("require exports ../../core/Error ../../core/Logger ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),
function(v,a,l,u,m,k,h,e){function f(b,d){return b?d?4:3:d?3:2}function g(b,d,a,c){if(b){if(a)return d&&c?ka:X;if(d&&c)return Da}else if(d&&c)return X;return da}function p(b,d){return Math.round((d-b.translate[0])/b.scale[0])}function y(b,d){return Math.round((b.translate[1]-d)/b.scale[1])}function n(b,d){return d*b.scale[0]+b.translate[0]}function c(b,d){return b.translate[1]-d*b.scale[1]}function C(b){b=b.coords;return{x:b[0],y:b[1]}}function F(b,d){b.coords[0]=d.x;b.coords[1]=d.y;return b}function L(b){b=
b.coords;return{x:b[0],y:b[1],z:b[2]}}function T(b,d){b.coords[0]=d.x;b.coords[1]=d.y;b.coords[2]=d.z;return b}function V(b){b=b.coords;return{x:b[0],y:b[1],m:b[2]}}function A(b,d){b.coords[0]=d.x;b.coords[1]=d.y;b.coords[2]=d.m;return b}function b(b){b=b.coords;return{x:b[0],y:b[1],z:b[2],m:b[3]}}function q(b,d){b.coords[0]=d.x;b.coords[1]=d.y;b.coords[2]=d.z;b.coords[3]=d.m;return b}function d(b,d){return b&&d?q:b?T:d?A:F}function I(b,a,c,f,g){c=d(c,f);for(f=0;f<a.length;f++){var q=a[f],t=q.geometry,
q=q.attributes,p=void 0;t&&(p=c(new e.default,t));b.push(new k.default(p,q,null,q[g]))}return b}function z(b,d,a,c){for(var f=0;f<d.length;f++){var g=d[f],q=g.geometry,g=g.attributes,e=void 0;q&&(e=P(q,a,c));b.push({attributes:g,geometry:e})}return b}function P(b,d,a){if(!b)return null;for(var c=f(d,a),g=[],q=0;q<b.coords.length;q+=c){for(var e=[],t=0;t<c;t++)e.push(b.coords[q+t]);g.push(e)}return d?a?{points:g,hasZ:d,hasM:a}:{points:g,hasZ:d}:a?{points:g,hasM:a}:{points:g}}function K(b,d,a,c,g){a=
f(a,c);for(c=0;c<d.length;c++){var q=d[c],t=q.geometry,q=q.attributes,p=void 0;t&&(p=O(new e.default,t,a));b.push(new k.default(p,q,null,q[g]))}return b}function O(b,d,a){void 0===a&&(a=f(d.hasZ,d.hasM));b.lengths[0]=d.points.length;var c=b.coords,g=0,q=0;for(d=d.points;q<d.length;q++)for(var e=d[q],t=0;t<a;t++)c[g++]=e[t];return b}function S(b,d,a){if(!b)return null;var c=f(d,a),g=b.coords,q=[],e=0,t=0;for(b=b.lengths;t<b.length;t++){for(var p=b[t],n=[],h=0;h<p;h++){for(var k=[],R=0;R<c;R++)k.push(g[e++]);
n.push(k)}q.push(n)}return d?a?{paths:q,hasZ:d,hasM:a}:{paths:q,hasZ:d}:a?{paths:q,hasM:a}:{paths:q}}function W(b,d,a,c,g){a=f(a,c);for(c=0;c<d.length;c++){var q=d[c],t=q.geometry,q=q.attributes,p=void 0;t&&(p=Y(new e.default,t,a));b.push(new k.default(p,q,null,q[g]))}return b}function Y(b,d,a){void 0===a&&(a=f(d.hasZ,d.hasM));var c=b.lengths,g=b.coords,q=0,e=0;for(d=d.paths;e<d.length;e++){for(var t=d[e],p=0,n=t;p<n.length;p++)for(var h=n[p],k=0;k<a;k++)g[q++]=h[k];c.push(t.length)}return b}function na(b,
d,a){if(!b)return null;var c=f(d,a),g=b.coords,q=[],e=0,t=0;for(b=b.lengths;t<b.length;t++){for(var p=b[t],n=[],h=0;h<p;h++){for(var k=[],R=0;R<c;R++)k.push(g[e++]);n.push(k)}q.push(n)}return d?a?{rings:q,hasZ:d,hasM:a}:{rings:q,hasZ:d}:a?{rings:q,hasM:a}:{rings:q}}function ra(b,d,a,c,f){for(var g=0;g<d.length;g++){var q=d[g],t=q.geometry,p=q.centroid,q=q.attributes,n=void 0;t&&(n=U(new e.default,t,a,c));p?b.push(new k.default(n,q,F(new e.default,p),q[f])):b.push(new k.default(n,q,null,q[f]))}return b}
function U(b,d,a,c){void 0===a&&(a=d.hasZ);void 0===c&&(c=d.hasM);pa(b,d.rings,a,c);return b}function pa(b,d,a,c){a=f(a,c);c=b.lengths;for(var g=b.coords,q=0,e=c.length=g.length=0;e<d.length;e++){for(var t=d[e],p=0,n=t;p<n.length;p++)for(var h=n[p],k=0;k<a;k++)g[q++]=h[k];c.push(t.length)}return b}function sa(b,d,a,c,f,g){b.length=0;if(!a){for(a=0;a<d.length;a++)c=d[a],b.push(new k.default(null,c.attributes,null,c.attributes[g]));return b}switch(a){case "esriGeometryPoint":return I(b,d,c,f,g);case "esriGeometryMultipoint":return K(b,
d,c,f,g);case "esriGeometryPolyline":return W(b,d,c,f,g);case "esriGeometryPolygon":return ra(b,d,c,f,g);default:ja.error("convertToFeatureSet:unknown-geometry",new l("Unable to parse unknown geometry type '"+a+"'")),b.length=0}return b}function Q(d,a,c,f){d=d&&("coords"in d?d:d.geometry);if(!d)return null;switch(a){case "esriGeometryPoint":return a=C,c&&f?a=b:c?a=L:f&&(a=V),a(d);case "esriGeometryMultipoint":return P(d,c,f);case "esriGeometryPolyline":return S(d,c,f);case "esriGeometryPolygon":return na(d,
c,f);default:ja.error("convertToGeometry:unknown-geometry",new l("Unable to parse unknown geometry type '"+a+"'"))}}function ia(d,a,c,f,g){d.length=0;switch(c){case "esriGeometryPoint":c=C;f&&g?c=b:f?c=L:g&&(c=V);for(f=0;f<a.length;f++){var q=a[f];g=q.geometry;q=q.attributes;g=g?c(g):null;d.push({attributes:q,geometry:g})}break;case "esriGeometryMultipoint":return z(d,a,f,g);case "esriGeometryPolyline":for(c=0;c<a.length;c++){var e=a[c],q=e.geometry,e=e.attributes,t=void 0;q&&(t=S(q,f,g));d.push({attributes:e,
geometry:t})}break;case "esriGeometryPolygon":for(c=0;c<a.length;c++){var t=a[c],e=t.geometry,q=t.attributes,p=t.centroid,t=void 0;e&&(t=na(e,f,g));p?(e=C(p),d.push({attributes:q,centroid:e,geometry:t})):d.push({attributes:q,geometry:t})}break;default:ja.error("convertToFeatureSet:unknown-geometry",new l("Unable to parse unknown geometry type '"+c+"'"))}return d}function M(b,d,a,c,q,e,n,h){void 0===n&&(n=a);void 0===h&&(h=c);b.lengths.length&&(b.lengths.length=0);b.coords.length&&(b.coords.length=
0);if(!d||!d.coords.length)return null;q=ta[q];var t=d.coords;d=d.lengths;var k=f(a,c),m=f(a&&n,c&&h);a=g(a,c,n,h);if(!d.length)return a(b.coords,t,0,0,p(e,t[0]),y(e,t[1])),b.lengths.length&&(b.lengths.length=0),b.coords.length=k,b;for(var E,R=0,J,I=0,ga=0;ga<d.length;ga++){var l=d[ga];if(!(l<q)){var A=0;J=I;h=c=p(e,t[R]);E=n=y(e,t[R+1]);a(b.coords,t,J,R,h,E);A++;R+=k;J+=m;for(var u=1;u<l;u++,R+=k)if(h=p(e,t[R]),E=y(e,t[R+1]),h!==c||E!==n)a(b.coords,t,J,R,h-c,E-n),J+=m,A++,c=h,n=E;A>=q&&(b.lengths.push(A),
I=J)}}b.coords.length=I;return b.coords.length?b:null}function ma(b,d,a,c,f,g,q){for(var e=c,t=0,p,n=g+a;n<q;n+=a){p=d[n];var h=d[n+1],k=d[q],m=d[q+1],E=d[g],R=d[g+1],y=k-E,J=m-R;if(0!==y||0!==J){var I=((p-E)*y+(h-R)*J)/(y*y+J*J);1<I?(E=k,R=m):0<I&&(E+=y*I,R+=J*I)}y=p-E;J=h-R;p=y*y+J*J;p>e&&(t=n,e=p)}e>c&&(t-g>a&&ma(b,d,a,c,f,g,t),f(b,d,b.length,t,d[t],d[t+1]),q-t>a&&ma(b,d,a,c,f,t,q))}function la(b,d,a,g,q){var e=d.coords,p=d.lengths,t=a?g?ka:X:g?X:da;a=f(a,g);if(!e.length)return b!==d&&(b.lengths.length=
0,b.coords.length=0),b;if(!p.length)return t(b.coords,e,0,0,n(q,e[0]),c(q,e[1])),b!==d&&(b.lengths.length=0,b.coords.length=a),b;var h=q.scale;g=h[0];for(var h=h[1],k=0,m=0;m<p.length;m++){var E=p[m];b.lengths[m]=E;var y=n(q,e[k]),J=c(q,e[k+1]);t(b.coords,e,k,k,y,J);for(var k=k+a,R=1;R<E;R++,k+=a)y+=e[k]*g,J-=e[k+1]*h,t(b.coords,e,k,k,y,J)}b!==d&&(b.lengths.length=p.length,b.coords.length=e.length);return b}function w(b,d,a,c){for(var f=0,g=b[c*d],q=b[c*(d+1)],e=1;e<a;e++)var p=g+b[c*(d+e)],t=q+b[c*
(d+e)+1],n=(p-g)*(t+q),g=p,q=t,f=f+n;return.5*f}Object.defineProperty(a,"__esModule",{value:!0});a.deltaDecodeGeometry=a.deltaEncodeGeometry=a.getQuantizedArea=a.getSignedQuantizedRingArea=a.removeCollinearVectices=a.removeZMValues=a.unquantizeOptimizedGeometry=a.getQuantizedBoundsOptimizedGeometry=a.getBoundsOptimizedGeometry=a.generalizeOptimizedGeometry=a.quantizeOptimizedGeometry=a.quantizeOptimizedFeatureSet=a.unquantizeOptimizedFeatureSet=a.convertFromFeatureSet=a.convertToFeatureSet=a.convertToFeatures=
a.convertToGeometry=a.convertFromGeometry=a.convertToFeature=a.convertFromGraphics=a.convertFromFeatures=a.convertFromFeature=a.convertFromNestedArray=a.convertFromPolygon=a.convertToPolygon=a.convertFromPolyline=a.convertFromPolylineFeatures=a.convertToPolyline=a.convertFromMultipoint=a.convertFromMultipointFeatures=a.convertToMultipoint=a.convertToMultipointFeatures=a.convertFromPoint=a.convertFromPointFeatures=a.convertToPoint=a.unquantizeY=a.unquantizeX=a.quantizeY=a.quantizeX=void 0;var ja=u.getLogger("esri.tasks.support.optimizedFeatureSet"),
ta={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},da=function(b,d,a,c,f,g){b[a]=f;b[a+1]=g},X=function(b,d,a,c,f,g){b[a]=f;b[a+1]=g;b[a+2]=d[c+2]},Da=function(b,d,a,c,f,g){b[a]=f;b[a+1]=g;b[a+2]=d[c+3]},ka=function(b,d,a,c,f,g){b[a]=f;b[a+1]=g;b[a+2]=d[c+2];b[a+3]=d[c+3]};a.quantizeX=p;a.quantizeY=y;a.unquantizeX=n;a.unquantizeY=c;a.convertToPoint=function(d,a,c){return d?a?c?b(d):L(d):c?V(d):C(d):null};a.convertFromPointFeatures=I;a.convertFromPoint=function(b,
a,c){void 0===c&&(c=d(null!=a.z,null!=a.m));return c(b,a)};a.convertToMultipointFeatures=z;a.convertToMultipoint=P;a.convertFromMultipointFeatures=K;a.convertFromMultipoint=O;a.convertToPolyline=S;a.convertFromPolylineFeatures=W;a.convertFromPolyline=Y;a.convertToPolygon=na;a.convertFromPolygon=U;a.convertFromNestedArray=pa;var J=[],E=[];a.convertFromFeature=function(b,d,a,c,f){J[0]=b;b=sa(E,J,d,a,c,f)[0];J.length=E.length=0;return b};a.convertFromFeatures=sa;a.convertFromGraphics=function(b,d,a,
c,f,g){var q=b.length;switch(a){case "esriGeometryPoint":I(b,d,c,f,g);break;case "esriGeometryMultipoint":K(b,d,c,f,g);break;case "esriGeometryPolyline":W(b,d,c,f,g);break;case "esriGeometryPolygon":ra(b,d,c,f,g);break;default:ja.error("convertToFeatureSet:unknown-geometry",new l("Unable to parse unknown geometry type '"+a+"'"))}for(c=0;c<d.length;c++)b[c+q].geometryType=a,b[c+q].insertAfter=d[c].insertAfter,b[c+q].groupId=d[c].groupId;return b};a.convertToFeature=function(b,d,a,c){E[0]=b;ia(J,E,
d,a,c);b=J[0];J.length=E.length=0;return b};a.convertFromGeometry=function(b,a,c){if(!b)return null;var g=new e.default;"hasZ"in b&&null==a&&(a=b.hasZ);"hasM"in b&&null==c&&(c=b.hasM);if(m.isPoint(b))return d(null!=a?a:null!=b.z,null!=c?c:null!=b.m)(g,b);if(m.isPolygon(b))return U(g,b,a,c);if(m.isPolyline(b))return Y(g,b,f(a,c));if(m.isMultipoint(b))return O(g,b,f(a,c));ja.error("convertFromGeometry:unknown-geometry",new l("Unable to parse unknown geometry type '"+b+"'"))};a.convertToGeometry=Q;a.convertToFeatures=
ia;a.convertToFeatureSet=function(b){var d=b.objectIdFieldName,a=b.spatialReference,c=b.transform,f=b.fields,g=b.hasM,q=b.hasZ,e=b.geometryType,p=b.exceededTransferLimit,n=b.uniqueIdField,h=b.queryGeometry,k=b.queryGeometryType;b=ia([],b.features,e,q,g);h=Q(h,k,!1,!1);d={features:b,fields:f,geometryType:e,objectIdFieldName:d,spatialReference:a,uniqueIdField:n,queryGeometry:h};c&&(d.transform=c);p&&(d.exceededTransferLimit=p);g&&(d.hasM=g);q&&(d.hasZ=q);return d};a.convertFromFeatureSet=function(b,
d){var a=new h.default,c=b.hasM,f=b.hasZ,g=b.features,q=b.objectIdFieldName,e=b.spatialReference,p=b.geometryType,n=b.exceededTransferLimit,k=b.transform;if(b=b.fields)a.fields=b;a.geometryType=p;a.objectIdFieldName=q||d;a.spatialReference=e;if(!a.objectIdFieldName)return ja.error(new l("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),a;g&&sa(a.features,g,p,f,c,a.objectIdFieldName);n&&(a.exceededTransferLimit=n);c&&(a.hasM=c);f&&(a.hasZ=f);k&&(a.transform=k);return a};
a.unquantizeOptimizedFeatureSet=function(b){var d=b.transform,a=b.hasM,c=b.hasZ;if(!d)return b;for(var f=0,g=b.features;f<g.length;f++){var q=g[f];q.geometry&&la(q.geometry,q.geometry,a,c,d);q.centroid&&la(q.centroid,q.centroid,a,c,d)}b.transform=null;return b};a.quantizeOptimizedFeatureSet=function(b,d){var a=d.geometryType,c=d.features,f=d.hasM,g=d.hasZ;if(!b)return d;for(var q=0;q<c.length;q++){var p=c[q],n=p.weakClone();n.geometry=new e.default;M(n.geometry,p.geometry,f,g,a,b);p.centroid&&(n.centroid=
new e.default,M(n.centroid,p.centroid,f,g,"esriGeometryPoint",b));c[q]=n}d.transform=b;return d};a.quantizeOptimizedGeometry=M;a.generalizeOptimizedGeometry=function(b,d,a,c,q,e,p,n){void 0===p&&(p=a);void 0===n&&(n=c);b.lengths.length&&(b.lengths.length=0);b.coords.length&&(b.coords.length=0);if(!d||!d.coords.length)return null;q=ta[q];var h=d.coords;d=d.lengths;var k=f(a,c),t=f(a&&p,c&&n);a=g(a,c,p,n);if(!d.length)return a(b.coords,h,0,0,h[0],h[1]),b.lengths.length&&(b.lengths.length=0),b.coords.length=
k,b;c=0;e*=e;for(p=0;p<d.length;p++){n=d[p];if(!(n<q)){var m=b.coords.length/t,E=c,y=c+(n-1)*k;a(b.coords,h,b.coords.length,E,h[E],h[E+1]);ma(b.coords,h,k,e,a,E,y);a(b.coords,h,b.coords.length,y,h[y],h[y+1]);E=b.coords.length/t-m;E>=q?b.lengths.push(E):b.coords.length=m*t}c+=n*k}return b.coords.length?b:null};a.getBoundsOptimizedGeometry=function(b,d,a,c){if(!d||!d.coords||!d.coords.length)return null;a=f(a,c);var g=c=Number.POSITIVE_INFINITY,q=Number.NEGATIVE_INFINITY,e=Number.NEGATIVE_INFINITY;
if(d&&d.coords){d=d.coords;for(var p=0;p<d.length;p+=a){var n=d[p],h=d[p+1];c=Math.min(c,n);q=Math.max(q,n);g=Math.min(g,h);e=Math.max(e,h)}}b[0]=c;b[1]=g;b[2]=q;b[3]=e;return b};a.getQuantizedBoundsOptimizedGeometry=function(b,d,a,c){a=f(a,c);c=d.coords;var g=Number.POSITIVE_INFINITY,q=Number.POSITIVE_INFINITY,e=Number.NEGATIVE_INFINITY,p=Number.NEGATIVE_INFINITY,n=0,h=0;for(d=d.lengths;h<d.length;h++)for(var k=d[h],t=c[n],E=c[n+1],g=Math.min(t,g),q=Math.min(E,q),e=Math.max(t,e),p=Math.max(E,p),
n=n+a,m=1;m<k;m++,n+=a){var y=c[n],J=c[n+1],t=t+y,E=E+J;0>y&&(g=Math.min(g,t));0<y&&(e=Math.max(e,t));0>J?q=Math.min(q,E):0<J&&(p=Math.max(p,E))}b[0]=g;b[1]=q;b[2]=e;b[3]=p;return b};a.unquantizeOptimizedGeometry=la;a.removeZMValues=function(b,d,a,c,q,e){var p,n=f(a,c);a=g(a,c,q,e);c=d.coords;b.coords.length=0;b.lengths.length=0;(p=b.lengths).push.apply(p,d.lengths);for(d=0;d<c.length;d+=n)a(b.coords,c,b.coords.length,d,c[d],c[d+1]);return b};a.removeCollinearVectices=function(b,d,a,c,q){if(!d||!d.coords||
!d.coords.length)return null;a=ta[a];var e=d.coords;d=d.lengths;var p=g(c,q,c,q);c=f(c,q);for(var n=q=0,h=0,k=0,t=0;t<d.length;t++){var E=d[t],n=k;p(b.coords,e,n,q,e[q],e[q+1]);q+=c;var m=e[q],y=e[q+1],J=m,I=y,l=y/m,n=n+c;p(b.coords,e,n,q,J,I);q+=c;for(var A=2;A<E;A++){var m=e[q],y=e[q+1],R=y/m,u=l===R||!isFinite(l)&&!isFinite(R),l=u&&isFinite(R)?0<=l&&0<=R||0>=l&&0>=R:0<=I&&0<=y||0>=I&&0>=y;u&&l?(J+=m,I+=y):(J=m,I=y,n+=c);p(b.coords,e,n,q,J,I);q+=c;l=R}n+=c;E=(n-k)/c;E>=a&&(b.lengths[h]=E,k=n,h++)}b.coords.length>
k&&(b.coords.length=k);b.lengths.length>h&&(b.lengths.length=h);return b.coords.length&&b.lengths.length?b:null};a.getSignedQuantizedRingArea=w;a.getQuantizedArea=function(b,d){var a=b.coords;b=b.lengths;for(var c=0,f=0,g=0;g<b.length;g++)f+=w(a,c,b[g],d),c+=g;return Math.abs(f)};a.deltaEncodeGeometry=function(b,d){var a=b.clone(),c=b.coords;b=b.lengths;for(var f=0,g=0;g<b.length;g++){for(var q=b[g],e=c[d*f],p=c[d*f+1],n=1;n<q;n++){var h=c[d*(f+n)],k=c[d*(f+n)+1],p=k-p;a.coords[d*(f+n)]=h-e;a.coords[d*
(f+n)+1]=p;e=h;p=k}f+=q}return a};a.deltaDecodeGeometry=function(b,d){var a=b.clone(),c=b.coords;b=b.lengths;for(var f=0,g=0;g<b.length;g++){for(var q=b[g],e=c[d*f],p=c[d*f+1],n=1;n<q;n++)e+=c[d*(f+n)],p+=c[d*(f+n)+1],a.coords[d*(f+n)]=e,a.coords[d*(f+n)+1]=p;f+=q}return a}})},"esri/layers/graphics/OptimizedFeature":function(){define(["require","exports"],function(v,a){Object.defineProperty(a,"__esModule",{value:!0});v=function(){function a(a,m,k,h){void 0===a&&(a=null);void 0===m&&(m={});this.displayId=
0;this.geohashIndexed=!1;this.geohashY=this.geohashX=0;this.geometry=a;m&&(this.attributes=m);k&&(this.centroid=k);null!=h&&(this.objectId=h)}Object.defineProperty(a.prototype,"hasGeometry",{get:function(){return!(!this.geometry||!this.geometry.coords||!this.geometry.coords.length)},enumerable:!1,configurable:!0});a.prototype.weakClone=function(){var l=new a(this.geometry,this.attributes,this.centroid,this.objectId);l.displayId=this.displayId;l.geohashIndexed=this.geohashIndexed;l.geohashX=this.geohashX;
l.geohashY=this.geohashY;return l};return a}();a.default=v})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(["require","exports"],function(v,a){Object.defineProperty(a,"__esModule",{value:!0});v=function(){function a(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=
this.uniqueIdField=null}a.prototype.weakClone=function(){var l=new a;l.objectIdFieldName=this.objectIdFieldName;l.globalIdFieldName=this.globalIdFieldName;l.geohashFieldName=this.geohashFieldName;l.geometryProperties=this.geometryProperties;l.geometryType=this.geometryType;l.spatialReference=this.spatialReference;l.hasZ=this.hasZ;l.hasM=this.hasM;l.features=this.features;l.fields=this.fields;l.transform=this.transform;l.exceededTransferLimit=this.exceededTransferLimit;l.uniqueIdField=this.uniqueIdField;
l.queryGeometry=this.queryGeometry;l.queryGeometryType=this.queryGeometryType;return l};return a}();a.default=v})},"esri/layers/graphics/OptimizedGeometry":function(){define(["require","exports"],function(v,a){Object.defineProperty(a,"__esModule",{value:!0});v=function(){function a(a,m,k){void 0===a&&(a=[]);void 0===m&&(m=[]);void 0===k&&(k=!1);this.lengths=a;this.coords=m;this.hasIndeterminateRingOrder=k}Object.defineProperty(a.prototype,"isPoint",{get:function(){return 0===this.lengths.length},
enumerable:!1,configurable:!0});a.prototype.forEachVertex=function(a){var m=0;this.lengths.length||a(this.coords[0],this.coords[1]);for(var k=0;k<this.lengths.length;k++){for(var h=this.lengths[k],e=0;e<h;e++)a(this.coords[2*(e+m)],this.coords[2*(e+m)+1]);m+=h}};a.prototype.clone=function(){return new a(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};return a}();a.default=v})},"esri/arcade/treeAnalysis":function(){define(["require","exports"],function(v,a){function l(b,a){return"0"!==
b.min&&a.length<Number(b.min)||"*"!==b.max&&a.length>Number(b.max)?-2:1}function u(b,a,d){if(null!==d.localScope&&void 0!==d.localScope[b.toLowerCase()]){var c=d.localScope[b.toLowerCase()];if("FormulaFunction"===c.type||"any"===c.type)return void 0===c.signature&&(c.signature={min:"0",max:"*"}),l(c.signature,a)}return void 0!==d.globalScope[b.toLowerCase()]&&(c=d.globalScope[b.toLowerCase()],"FormulaFunction"===c.type||"any"===c.type)?(void 0===c.signature&&(c.signature={min:"0",max:"*"}),l(c.signature,
a)):-1}function m(b,a){if(b)for(var d=0;d<b.length;d++)k(b[d],a)}function k(b,a){if(b&&!1!==a(b))switch(b.type){case "ArrayExpression":m(b.elements,a);break;case "AssignmentExpression":case "BinaryExpression":k(b.left,a);k(b.right,a);break;case "BlockStatement":m(b.body,a);break;case "CallExpression":k(b.callee,a);m(b.arguments,a);break;case "ConditionalExpression":k(b.test,a);k(b.alternate,a);k(b.consequent,a);break;case "DoWhileStatement":k(b.test,a);k(b.body,a);break;case "ExpressionStatement":k(b.expression,
a);break;case "ForInStatement":k(b.left,a);k(b.right,a);k(b.body,a);break;case "ForStatement":k(b.init,a);k(b.test,a);k(b.update,a);k(b.body,a);break;case "FunctionDeclaration":case "FunctionDeclaration":case "FunctionExpression":k(b.id,a);m(b.params,a);k(b.body,a);break;case "IfStatement":k(b.test,a);k(b.consequent,a);k(b.alternate,a);break;case "LogicalExpression":k(b.left,a);k(b.right,a);break;case "MemberExpression":k(b.object,a);k(b.property,a);break;case "NewExpression":k(b.callee,a);m(b.arguments,
a);break;case "ObjectExpression":m(b.properties,a);break;case "Program":m(b.body,a);break;case "Property":k(b.key,a);k(b.value,a);break;case "ReturnStatement":k(b.argument,a);break;case "UnaryExpression":k(b.argument,a);break;case "UpdateExpression":k(b.argument,a);break;case "VariableDeclaration":m(b.declarations,a);break;case "VariableDeclarator":k(b.id,a);k(b.init,a);break;case "TemplateLiteral":m(b.expressions,a),m(b.quasis,a)}}function h(b,a){void 0===a&&(a=!0);var d=n(b,"SYNTAX","UNREOGNISED");
try{switch(b.type){case "VariableDeclarator":return null!==b.init&&"FunctionExpression"===b.init.type?n(b,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"):"Identifier"!==b.id.type?n(b,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==b.init?h(b.init,!1):"";case "VariableDeclaration":for(var c=0;c<b.declarations.length;c++)if(d=h(b.declarations[c],a),""!==d)return d;return"";case "ForInStatement":d=h(b.left,a);if(""!==d)break;if("VariableDeclaration"===b.left.type){if(1<b.left.declarations.length)return n(b,"SYNTAX",
"ONLY1VAR");if(null!==b.left.declarations[0].init)return n(b,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==b.left.type)return n(b,"SYNTAX","LEFTNOTVAR");d=h(b.right,a);if(""!==d)break;d=h(b.body,a);if(""!==d)break;return"";case "ForStatement":if(null!==b.test&&(d=h(b.test,a),""!==d))break;if(null!==b.init&&(d=h(b.init,a),""!==d))break;if(null!==b.update&&(d=h(b.update,a),""!==d))break;if(null!==b.body&&(d=h(b.body,a),""!==d))break;return"";case "ContinueStatement":return"";case "EmptyStatement":return"";
case "BreakStatement":return"";case "IfStatement":d=h(b.test,a);if(""!==d)break;if(null!==b.consequent&&(d=h(b.consequent,!1),""!==d))break;if(null!==b.alternate&&(d=h(b.alternate,!1),""!==d))break;return"";case "BlockStatement":for(var f=[],c=0;c<b.body.length;c++)"EmptyStatement"!==b.body[c].type&&f.push(b.body[c]);b.body=f;for(c=0;c<b.body.length;c++)if(d=h(b.body[c],a),""!==d)return d;return"";case "FunctionDeclaration":return!1===a?n(b,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==b.id.type?
n(b,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):h(b.body,!1);case "ReturnStatement":return null!==b.argument?h(b.argument,a):"";case "UpdateExpression":return"Identifier"!==b.argument.type&&"MemberExpression"!==b.argument.type?n(b,"SYNTAX","ASSIGNMENTTOVARSONLY"):h(b.argument,a);case "AssignmentExpression":if("Identifier"!==b.left.type&&"MemberExpression"!==b.left.type)return n(b,"SYNTAX","ASSIGNMENTTOVARSONLY");d=h(b.left,a);if(""!==d)break;switch(b.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;
default:return n(b,"SYNTAX","OPERATORNOTRECOGNISED")}return h(b.right,!1);case "ExpressionStatement":return h(b.expression,!1);case "Identifier":d="";break;case "MemberExpression":d=h(b.object,a);if(""!==d)break;return!0===b.computed?h(b.property,a):"";case "Literal":return"";case "TemplateElement":return"";case "CallExpression":if("Identifier"!==b.callee.type)return n(b,"SYNTAX","ONLYNODESSUPPORTED");d="";for(c=0;c<b.arguments.length;c++)if(d=h(b.arguments[c],a),""!==d)return d;return"";case "UnaryExpression":d=
h(b.argument,a);break;case "BinaryExpression":d=h(b.left,a);if(""!==d)break;d=h(b.right,a);if(""!==d)break;switch(b.operator){case "|":case "\x26":case "\x3e\x3e":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:return n(b,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":d=h(b.left,a);if(""!==d)break;d=h(b.right);if(""!==d)break;
switch(b.operator){case "\x26\x26":case "||":break;default:return n(b,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "ConditionalExpression":return n(b,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":d="";for(c=0;c<b.elements.length&&(d=h(b.elements[c],a),""===d);c++);break;case "TemplateLiteral":d="";for(c=0;c<b.quasis.length;c++)if(d=h(b.quasis[c],a),""!==d)return d;for(c=0;c<b.expressions.length&&(d=h(b.expressions[c],a),""===d);c++);break;case "ObjectExpression":d="";for(c=0;c<b.properties.length;c++){d=
"";if(null!==b.properties[c].key&&("Literal"!==b.properties[c].key.type&&"Identifier"!==b.properties[c].key.type&&(d=n(b,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===b.properties[c].key.type)){var f=b.properties[c].key,g="value"in f?f.value:null;"string"===typeof g||g instanceof String||(d=n(b,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===d&&(d=h(b.properties[c],a));if(""!==d)break}break;case "Property":if("Literal"!==b.key.type&&"Identifier"!==b.key.type)return n(b,"SYNTAX","ONLYLITERAL");
if("Identifier"!==b.key.type&&(d=h(b.key,a),""!==d))break;d=h(b.value,a)}return d}catch(K){throw K;}}function e(b,a){var d=n(b,"SYNTAX","UNREOGNISED"),c=null,f="";try{switch(b.type){case "VariableDeclarator":if(null!==b.init&&"FunctionExpression"===b.init.type)return n(b,"SYNTAX","FUNCTIONVARIABLEDECLARATOR");var q=null===b.init?"":e(b.init,a);if(""!==q)return q;"Identifier"===b.id.type&&(null===a.localScope?a.globalScope[b.id.name.toLowerCase()]={type:"any"}:a.localScope[b.id.name.toLowerCase()]=
{type:"any"});return"";case "FunctionDeclaration":c=g(b.id.name.toLowerCase(),b);f=p(b,a);if(""!==f)return f;if(null!==a.localScope)return n(b,"SYNTAX","GLOBALFUNCTIONSONLY");c.isnative=!1;a.globalScope[b.id.name.toLowerCase()]={type:"FormulaFunction",signature:[c]};return"";case "VariableDeclaration":for(var d="",h=0;h<b.declarations.length&&(d=e(b.declarations[h],a),""===d);h++);break;case "IfStatement":d=e(b.test,a);if(""!==d)break;if("AssignmentExpression"===b.test.type||"UpdateExpression"===
b.test.type)return n(b.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");if(null!==b.consequent&&(d=e(b.consequent,a),""!==d))break;if(null!==b.alternate&&(d=e(b.alternate,a),""!==d))break;return"";case "EmptyStatement":return"";case "BlockStatement":for(h=0;h<b.body.length;h++)if(d=e(b.body[h],a),""!==d)return d;return"";case "ReturnStatement":return null!==b.argument?e(b.argument,a):"";case "ForInStatement":if("VariableDeclaration"===b.left.type){if(1<b.left.declarations.length)return n(b,"SYNTAX",
"ONLY1VAR");if(null!==b.left.declarations[0].init)return n(b,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==b.left.type)return n(b,"SYNTAX","LEFTNOTVAR");d=e(b.left,a);if(""!==d)break;d=e(b.right,a);if(""!==d)break;d=e(b.body,a);if(""!==d)break;return"";case "ForStatement":if(null!==b.init&&(d=e(b.init,a),""!==d))break;if(null!==b.test&&(d=e(b.test,a),""!==d))break;if(null!==b.body&&(d=e(b.body,a),""!==d))break;if(null!==b.update&&(d=e(b.update,a),""!==d))break;return"";case "BreakStatement":return"";
case "ContinueStatement":return"";case "UpdateExpression":if("Identifier"!==b.argument.type&&"MemberExpression"!==b.argument.type)return n(b,"SYNTAX","ASSIGNMENTTOVARSONLY");var k=!1;if("MemberExpression"===b.argument.type)return e(b.argument,a);null!==a.localScope&&void 0!==a.localScope[b.argument.name.toLowerCase()]&&(k=!0);void 0!==a.globalScope[b.argument.name.toLowerCase()]&&(k=!0);return!1===k?"Identifier "+b.argument.name+" has not been declared.":"";case "AssignmentExpression":if("Identifier"!==
b.left.type&&"MemberExpression"!==b.left.type)return n(b,"SYNTAX","ASSIGNMENTTOVARSONLY");var m=e(b.right,a);if(""!==m)return m;k=!1;if("MemberExpression"===b.left.type)return m=e(b.left,a),""!==m?m:"";null!==a.localScope&&void 0!==a.localScope[b.left.name.toLowerCase()]&&(k=!0);void 0!==a.globalScope[b.left.name.toLowerCase()]&&(k=!0);return!1===k?"Identifier "+b.left.name+" has not been declared.":"";case "ExpressionStatement":return e(b.expression,a);case "Identifier":var y=b.name.toLowerCase();
if(null!==a.localScope&&void 0!==a.localScope[y])return"";d=void 0!==a.globalScope[y]?"":n(b,"SYNTAX","VARIABLENOTFOUND");break;case "MemberExpression":d=e(b.object,a);if(""!==d)break;return!0===b.computed?e(b.property,a):"";case "Literal":return"";case "TemplateElement":return"";case "CallExpression":if("Identifier"!==b.callee.type)return n(b,"SYNTAX","ONLYNODESSUPPORTED");d="";for(h=0;h<b.arguments.length;h++)if(d=e(b.arguments[h],a),""!==d)return d;var l=u(b.callee.name,b.arguments,a);-1===l&&
(d=n(b,"SYNTAX","NOTFOUND"));-2===l&&(d=n(b,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":d=e(b.argument,a);break;case "BinaryExpression":d=e(b.left,a);if(""!==d)break;d=e(b.right,a);if(""!==d)break;return"";case "LogicalExpression":d=e(b.left,a);if(""!==d)break;if("AssignmentExpression"===b.left.type||"UpdateExpression"===b.left.type)return n(b.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");d=e(b.right,a);if(""!==d)break;return"AssignmentExpression"===b.right.type||"UpdateExpression"===
b.right.type?n(b.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case "ConditionalExpression":return n(b,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":d="";for(h=0;h<b.elements.length&&(d=e(b.elements[h],a),""===d);h++);break;case "TemplateLiteral":d="";for(h=0;h<b.quasis.length;h++)if(d=e(b.quasis[h],a),""!==d)return d;for(h=0;h<b.expressions.length&&(d=e(b.expressions[h],a),""===d);h++);break;case "ObjectExpression":d="";for(h=0;h<b.properties.length;h++){d="";if(null!==b.properties[h].key&&
("Literal"!==b.properties[h].key.type&&"Identifier"!==b.properties[h].key.type&&(d=n(b,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===b.properties[h].key.type)){var A=b.properties[h].key,C="value"in A?A.value:null;"string"===typeof C||C instanceof String||(d=n(b,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===d&&(d=e(b.properties[h],a));if(""!==d)break}break;case "Property":if("Literal"!==b.key.type&&"Identifier"!==b.key.type)return n(b,"SYNTAX","ONLYLITERAL");if("Identifier"!==b.key.type&&(d=e(b.key,
a),""!==d))break;d=e(b.value,a)}return d}catch(U){throw U;}}function f(b,a){var d=!1,c=a.toLowerCase();k(b,function(b){if(d)return!1;"Identifier"===b.type&&b.name&&b.name.toLowerCase()===c&&(d=!0);return!0});return d}function g(b,a){var d=[];if(void 0!==a.params&&null!==a.params)for(var c=0;c<a.params.length;c++)d.push("any");return{name:b,return:"any",params:d}}function p(b,a){a={globalScope:a.globalScope,localScope:{}};for(var d=0;d<b.params.length;d++)a.localScope[b.params[d].name.toLowerCase()]=
{type:"any"};return e(b.body,a)}function y(b,a,d,c){var f={};if(void 0===b||null===b)b={};if(void 0===d||null===d)d={};f.infinity={type:"any"};f.textformatting={type:"any"};f.pi={type:"any"};for(var g in a)"sync"===c&&void 0!==a[g].min?f[g]={type:"FormulaFunction",signature:{min:a[g].min,max:a[g].max}}:"sync"!==c&&void 0!==a[g].fmin&&(f[g]={type:"FormulaFunction",signature:{min:a[g].fmin,max:a[g].fmax}});for(a=0;a<d.length;a++)g=d[a],f[g.name]={type:"FormulaFunction",signature:g};for(g in b)f[g]=
b[g],f[g].type="any";return f}function n(b,a,d){var c="";switch(a){case "SYNTAX":c="Syntax Error: ";break;case "RUNTIME":c="Runtime Error: ";break;default:c="Syntax Error: "}try{switch(b.type){case "IfStatement":switch(d){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":c+=" Assignments not be made in logical tests";break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":c+=" Non Boolean used as Condition"}break;case "UpdateExpression":case "AssignmentExpression":switch(d){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":c+=
" Assignments not be made in logical tests";break;case "ASSIGNMENTTOVARSONLY":c+=" Assignments can only be made to identifiers"}break;case "ExpressionStatement":c+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(d){case "GLOBALFUNCTIONSONLY":c+=" Functions cannot be declared as variables";break;case "FUNCTIONMUSTHAVEIDENTIFIER":c+=" Function Definition must have an identifier"}break;case "VariableDeclaration":c+=" Only 1 variable can be declared at a time";break;
case "VariableDeclarator":switch(d){case "FUNCTIONVARIABLEDECLARATOR":c+=" Functions cannot be declared as variables";break;case "VARIABLEMUSTHAVEIDENTIFIER":c+=" Variable Definition must have an identifier"}break;case "Identifier":c+=" Identifier Not Found. ";c+=b.name;break;case "ObjectExpression":switch(d){case "OBJECTPROPERTYMUSTBESTRING":c+=" Property name must be a string"}break;case "ForStatement":switch(d){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":c+=" Non Boolean used as Condition"}break;
case "ForInStatement":switch(d){case "ONLY1VAR":c+=" Can only declare 1 var for use with IN";break;case "CANNOTDECLAREVAL":c+=" Can only declare value for use with IN";break;case "LEFTNOVAR":c+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":c+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":c+="This type cannot be used in an IN loop"}break;case "MemberExpression":switch(d){case "PROPERTYNOTFOUND":c+="Cannot find member property. ";c+=
!1===b.computed?"Identifier"===b.property.type?b.property.name:"":"";break;case "OUTOFBOUNDS":c+="Out of Bounds. ";c+=!1===b.computed?"Identifier"===b.property.type?b.property.name:"":"";break;case "NOTFOUND":c+="Cannot call member method on null. ";c+=!1===b.computed?"Identifier"===b.property.type?b.property.name:"":"";break;case "INVALIDTYPE":c+="Cannot call member property on object of this type. ",c+=!1===b.computed?"Identifier"===b.property.type?b.property.name:"":""}break;case "Property":switch(d){case "ONLYLITERAL":c+=
"Property names must be literals or identifiers"}break;case "Literal":break;case "CallExpression":switch(d){case "WRONGSIGNATURE":c+="Function signature does not match: ";c+="Identifier"===b.callee.type?b.callee.name:"";break;case "ONLYNODESUPPORTED":c+="Functions must be declared.";c+="Identifier"===b.callee.type?b.callee.name:"";break;case "NOTAFUNCTION":c+="Not a Function: ";c+="Identifier"===b.callee.type?b.callee.name:"";break;case "NOTFOUND":c+="Function Not Found: "+("Identifier"===b.callee.type?
b.callee.name:"")}break;case "UnaryExpression":switch(d){case "NOTSUPPORTEDUNARYOPERATOR":c+="Operator "+b.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";break;case "NOTSUPPORTEDTYPE":c+="Unary operator "+b.operator+" cannot be used with this argument."}case "BinaryExpression":switch(d){case "OPERATORNOTRECOGNISED":c+="Binary Operator not recognised "+b.operator}break;case "LogicalExpression":switch(d){case "ONLYBOOLEAN":c+="Operator "+b.operator+" cannot be used. Only || or \x26\x26 are allowed values";
break;case "ONLYORORAND":c+="Logical Expression "+b.operator+" being applied to parameters that are not boolean."}break;case "ConditionalExpression":c+="Conditional statements not supported.";break;case "ArrayExpression":switch(d){case "FUNCTIONCONTEXTILLEGAL":c+=" Cannot Put Function inside Array."}break;default:c+="Expression contains unrecognised code structures."}}catch(z){throw z;}return c}function c(b,a,d){return{line:b.loc.start.line,character:b.loc.start.column,reason:n(b,a,d)}}function C(b,
a,d,c){a={globalScope:a.globalScope,localScope:{}};for(var f=0;f<b.params.length;f++)a.localScope[b.params[f].name.toLowerCase()]={type:"any"};F(b.body,a,d,c,!1)}function F(b,a,d,f,e){void 0===e&&(e=!0);if(null===b)throw Error("Unnexpexted Expression Syntax");var p=null;try{switch(b.type){case "VariableDeclarator":if(null!==b.init&&"FunctionExpression"===b.init.type){f.push(c(b,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"));break}"Identifier"!==b.id.type?f.push(c(b,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):
(b.id.name.toLowerCase(),null===a.localScope?a.globalScope[b.id.name.toLowerCase()]={type:"any"}:a.localScope[b.id.name.toLowerCase()]={type:"any"});null!==b.init&&F(b.init,a,d,f,e);break;case "FunctionDeclaration":!1===e&&f.push(c(b,"SYNTAX","GLOBALFUNCTIONSONLY"));"Identifier"!==b.id.type&&f.push(c(b,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"));p=g("",b);C(b,a,d,f);null!==a.localScope&&f.push(c(b,"SYNTAX","GLOBALFUNCTIONSONLY"));p.isnative=!1;"Identifier"===b.id.type&&(a.globalScope[b.id.name.toLowerCase()]=
{type:"FormulaFunction",signature:[p]});break;case "VariableDeclaration":for(var q=0;q<b.declarations.length;q++)F(b.declarations[q],a,d,f,e);break;case "IfStatement":null!==b.test&&(F(b.test,a,d,f,e),"AssignmentExpression"!==b.test.type&&"UpdateExpression"!==b.test.type||f.push(c(b.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));null!==b.consequent&&F(b.consequent,a,d,f,e);null!==b.alternate&&F(b.alternate,a,d,f,e);break;case "EmptyStatement":break;case "BlockStatement":if(null!==b.body)for(q=
0;q<b.body.length;q++)F(b.body[q],a,d,f,e);break;case "ReturnStatement":null!==b.argument&&F(b.argument,a,d,f,e);break;case "ForInStatement":"VariableDeclaration"===b.left.type?(1<b.left.declarations.length&&f.push(c(b,"SYNTAX","ONLY1VAR")),null!==b.left.declarations[0].init&&f.push(c(b,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==b.left.type&&f.push(c(b,"SYNTAX","LEFTNOTVAR"));F(b.left,a,d,f,e);F(b.right,a,d,f,e);F(b.body,a,d,f,e);break;case "ForStatement":null!==b.init&&F(b.init,a,d,f,e);null!==
b.test&&F(b.test,a,d,f,e);null!==b.body&&F(b.body,a,d,f,e);null!==b.update&&F(b.update,a,d,f,e);break;case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":if("Identifier"!==b.argument.type&&"MemberExpression"!==b.argument.type)f.push(c(b,"SYNTAX","ASSIGNMENTTOVARSONLY"));else{if("Identifier"===b.argument.type){var n=!1;!1===d&&(null!==a.localScope&&void 0!==a.localScope[b.argument.name.toLowerCase()]&&(n=!0),void 0!==a.globalScope[b.argument.name.toLowerCase()]&&(n=!0),
!1===n&&f.push({line:null===b?0:b.loc.start.line,character:null===b?0:b.loc.start.column,reason:"Identifier "+b.argument.name+" has not been declared."}))}"MemberExpression"===b.argument.type&&F(b.argument,a,d,f,e)}break;case "AssignmentExpression":"Identifier"!==b.left.type&&"MemberExpression"!==b.left.type&&f.push(c(b,"SYNTAX","ASSIGNMENTTOVARSONLY"));switch(b.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:f.push(c(b,"SYNTAX","OPERATORNOTRECOGNISED"))}F(b.right,
a,d,f,e);n=!1;"Identifier"===b.left.type&&(null!==a.localScope&&void 0!==a.localScope[b.left.name.toLowerCase()]&&(n=!0),void 0!==a.globalScope[b.left.name.toLowerCase()]&&(n=!0),!1===d&&!1===n&&f.push({line:null===b?0:b.loc.start.line,character:null===b?0:b.loc.start.column,reason:"Identifier "+b.left.name+" has not been declared."}));"MemberExpression"===b.left.type&&F(b.left,a,d,f,e);break;case "ExpressionStatement":F(b.expression,a,d,f,e);break;case "Identifier":var h=b.name.toLowerCase();if(null!==
a.localScope&&void 0!==a.localScope[h]||void 0!==a.globalScope[h])break;!1===d&&f.push(c(b,"SYNTAX","VARIABLENOTFOUND"));break;case "MemberExpression":F(b.object,a,d,f,e);!0===b.computed&&F(b.property,a,d,f,e);break;case "Literal":break;case "TemplateElement":break;case "CallExpression":"Identifier"!==b.callee.type&&f.push(c(b,"SYNTAX","ONLYNODESSUPPORTED"));for(q=0;q<b.arguments.length;q++)F(b.arguments[q],a,d,f,e);if("Identifier"===b.callee.type){var k=u(b.callee.name,b.arguments,a);!1===d&&-1===
k&&f.push(c(b,"SYNTAX","NOTFOUND"));-2===k&&f.push(c(b,"SYNTAX","WRONGSIGNATURE"))}break;case "UnaryExpression":F(b.argument,a,d,f,e);break;case "BinaryExpression":F(b.left,a,d,f,e);F(b.right,a,d,f,e);switch(b.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":case "\x26":case "|":case "^":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":break;default:f.push(c(b,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(b.operator){case "\x26\x26":case "||":break;
default:f.push(c(b,"SYNTAX","OPERATORNOTRECOGNISED"))}F(b.left,a,d,f,e);"AssignmentExpression"!==b.left.type&&"UpdateExpression"!==b.left.type||f.push(c(b,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));F(b.right,a,d,f,e);"AssignmentExpression"!==b.right.type&&"UpdateExpression"!==b.right.type||f.push(c(b,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));break;case "ConditionalExpression":f.push(c(b,"SYNTAX","NOTSUPPORTED"));break;case "ArrayExpression":for(q=0;q<b.elements.length;q++)F(b.elements[q],
a,d,f,e);break;case "TemplateLiteral":for(q=0;q<b.quasis.length;q++)F(b.quasis[q],a,d,f,e);for(q=0;q<b.expressions.length;q++)F(b.expressions[q],a,d,f,e);break;case "ObjectExpression":for(q=0;q<b.properties.length;q++)F(b.properties[q],a,d,f,e);break;case "Property":"Literal"!==b.key.type&&"Identifier"!==b.key.type&&f.push(c(b,"SYNTAX","ONLYLITERAL"));"Literal"===b.key.type&&F(b.key,a,d,f,e);F(b.value,a,d,f,e);break;default:f.push(c(b,"SYNTAX","UNRECOGNISED"))}}catch(Y){f.push({line:null===b?0:b.loc.start.line,
character:null===b?0:b.loc.start.column,reason:"Unnexpected Syntax"})}}function L(b){var a=[];k(b,function(b){"CallExpression"===b.type&&"Identifier"===b.callee.type&&a.push(b.callee.name.toLowerCase());return!0});return a}Object.defineProperty(a,"__esModule",{value:!0});a.scriptUsesFeatureSet=a.findScriptDependencies=a.findFunctionCalls=a.checkScript=a.extractAllIssues=a.extractAllIssuesInFunction=a.makeError=a.nodeErrorMessage=a.validateLanguage=a.validateScript=a.constructGlobalScope=a.validateFunction=
a.extractFunctionDeclaration=a.findFieldLiterals=a.referencesFunction=a.referencesMember=a.testValidityOfExpression=a.validateLanguageNode=a.walk=a.findFunction=a.checkFunctionSignature=a.addFunctionDeclaration=a.functionDecls=void 0;a.functionDecls={concatenate:{min:"0",max:"*"},split:{min:"2",max:"4"},guid:{min:"0",max:"1"},today:{min:"0",max:"0"},angle:{min:"2",max:"3"},bearing:{min:"2",max:"3"},urlencode:{min:"1",max:"1"},now:{min:"0",max:"0"},timestamp:{min:"0",max:"0"},day:{min:"1",max:"1"},
month:{min:"1",max:"1"},year:{min:"1",max:"1"},hour:{min:"1",max:"1"},second:{min:"1",max:"1"},millisecond:{min:"1",max:"1"},minute:{min:"1",max:"1"},weekday:{min:"1",max:"1"},toutc:{min:"1",max:"1"},tolocal:{min:"1",max:"1"},date:{min:"0",max:"7"},datediff:{min:"2",max:"3"},dateadd:{min:"2",max:"3"},trim:{min:"1",max:"1"},text:{min:"1",max:"2"},left:{min:"2",max:"2"},right:{min:"2",max:"2"},mid:{min:"2",max:"3"},upper:{min:"1",max:"1"},proper:{min:"1",max:"2"},lower:{min:"1",max:"1"},find:{min:"2",
max:"3"},iif:{min:"3",max:"3"},decode:{min:"2",max:"*"},when:{min:"2",max:"*"},defaultvalue:{min:"2",max:"2"},isempty:{min:"1",max:"1"},domaincode:{min:"2",max:"4"},domainname:{min:"2",max:"4"},polygon:{min:"1",max:"1"},point:{min:"1",max:"1"},polyline:{min:"1",max:"1"},extent:{min:"1",max:"1"},multipoint:{min:"1",max:"1"},ringisclockwise:{min:"1",max:"1"},geometry:{min:"1",max:"1"},count:{min:"0",max:"*"},number:{min:"1",max:"2"},acos:{min:"1",max:"1"},asin:{min:"1",max:"1"},atan:{min:"1",max:"1"},
atan2:{min:"2",max:"2"},ceil:{min:"1",max:"2"},floor:{min:"1",max:"2"},round:{min:"1",max:"2"},cos:{min:"1",max:"1"},exp:{min:"1",max:"1"},log:{min:"1",max:"1"},min:{min:"0",max:"*"},constrain:{min:"3",max:"3"},console:{min:"0",max:"*"},max:{min:"0",max:"*"},pow:{min:"2",max:"2"},random:{min:"0",max:"0"},sqrt:{min:"1",max:"1"},sin:{min:"1",max:"1"},tan:{min:"1",max:"1"},abs:{min:"1",max:"1"},isnan:{min:"1",max:"1"},stdev:{min:"0",max:"*"},average:{min:"0",max:"*"},mean:{min:"0",max:"*"},sum:{min:"0",
max:"*"},variance:{min:"0",max:"*"},distinct:{min:"0",max:"*"},first:{min:"1",max:"1"},top:{min:"2",max:"2"},boolean:{min:"1",max:"1"},dictionary:{min:"0",max:"*"},typeof:{min:"1",max:"1"},reverse:{min:"1",max:"1"},replace:{min:"3",max:"4"},sort:{min:"1",max:"2"},feature:{min:"1",max:"*"},haskey:{min:"2",max:"2"},indexof:{min:"2",max:"2"},disjoint:{min:"2",max:"2"},intersects:{min:"2",max:"2"},touches:{min:"2",max:"2"},crosses:{min:"2",max:"2"},within:{min:"2",max:"2"},contains:{min:"2",max:"2"},
overlaps:{min:"2",max:"2"},equals:{min:"2",max:"2"},relate:{min:"3",max:"3"},intersection:{min:"2",max:"2"},union:{min:"1",max:"2"},difference:{min:"2",max:"2"},symmetricdifference:{min:"2",max:"2"},clip:{min:"2",max:"2"},cut:{min:"2",max:"2"},area:{min:"1",max:"2"},areageodetic:{min:"1",max:"2"},length:{min:"1",max:"2"},lengthgeodetic:{min:"1",max:"2"},distancegeodetic:{min:"2",max:"3"},distance:{min:"2",max:"3"},densify:{min:"2",max:"3"},densifygeodetic:{min:"2",max:"3"},generalize:{min:"2",max:"4"},
buffer:{min:"2",max:"3"},buffergeodetic:{min:"2",max:"3"},offset:{min:"2",max:"6"},rotate:{min:"2",max:"3"},issimple:{min:"1",max:"1"},simplify:{min:"1",max:"1"},centroid:{min:"1",max:"1"},isselfintersecting:{min:"1",max:"1"},multiparttosinglepart:{min:"1",max:"1"},setgeometry:{min:"2",max:"2"},portal:{min:"1",max:"1"},subtypes:{min:"1",max:"1"},subtypecode:{min:"1",max:"1"},subtypename:{min:"1",max:"1"},domain:{min:"2",max:"3"},schema:{min:"1",max:"1"}};for(var T in a.functionDecls)a.functionDecls[T].fmin=
a.functionDecls[T].min,a.functionDecls[T].fmax=a.functionDecls[T].max;var V="featureset featuresetbyid featuresetbyname featuresetbyassociation featuresetbyrelationshipname featuresetbyurl attachments featuresetbyportalitem".split(" "),A="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length lengthgeodetic distance distancegeodetic densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple simplify multiparttosinglepart".split(" ");
a.addFunctionDeclaration=function(b,c){var d=a.functionDecls[b.name.toLowerCase()];void 0===d?"sync"===c?a.functionDecls[b.name.toLowerCase()]={min:b.min,max:b.max}:a.functionDecls[b.name.toLowerCase()]={fmin:b.min,fmax:b.max}:"sync"===c?(d.min=b.min,d.max=b.max):(d.fmin=b.min,d.fmax=b.max)};a.checkFunctionSignature=l;a.findFunction=u;a.walk=k;a.validateLanguageNode=h;a.testValidityOfExpression=e;a.referencesMember=f;a.referencesFunction=function(b,a){var d=!1,c=a.toLowerCase();k(b,function(b){return d?
!1:"CallExpression"===b.type&&"Identifier"===b.callee.type&&b.callee.name&&b.callee.name.toLowerCase()===c?(d=!0,!1):!0});return d};a.findFieldLiterals=function(b){var a=[];k(b,function(b){if("MemberExpression"!==b.type||"Identifier"!==b.object.type)return!0;!1===b.computed&&b.object&&b.object.name&&b.property&&"Identifier"===b.property.type&&b.property.name?a.push(b.object.name.toLowerCase()+"."+b.property.name.toLowerCase()):b.object&&b.object.name&&b.property&&"Literal"===b.property.type&&"string"===
typeof b.property.value&&a.push(b.object.name.toLowerCase()+"."+b.property.value.toString().toLowerCase());return!1});return a};a.extractFunctionDeclaration=g;a.validateFunction=p;a.constructGlobalScope=y;a.validateScript=function(b,c,d,f){void 0===d&&(d="async");void 0===f&&(f=a.functionDecls);c={globalScope:y(c.vars,f,c.customFunctions,d),localScope:null};return e(b.body[0].body,c)};a.validateLanguage=function(b){return"BlockStatement"!==b.body[0].body.type?"Invalid formula content.":h(b.body[0].body)};
a.nodeErrorMessage=n;a.makeError=c;a.extractAllIssuesInFunction=C;a.extractAllIssues=F;a.checkScript=function(b,c,d,f,g){void 0===f&&(f="async");void 0===g&&(g=a.functionDecls);var e=[];if("BlockStatement"!==b.body[0].body.type)return[{line:0,character:0,reason:"Invalid Body"}];if(null===c||void 0===c)c={vars:{},customFunctions:[]};c={globalScope:y(c.vars,g,c.customFunctions,f),localScope:null};try{F(b.body[0].body,c,d,e)}catch(K){}return e};a.findFunctionCalls=L;a.findScriptDependencies=function(b,
a){void 0===a&&(a=[]);var d=null;if(void 0===b.usesFeatureSet){null===d&&(d=L(b));b.usesFeatureSet=!1;for(var c=0;c<d.length;c++)-1<V.indexOf(d[c])&&(b.usesFeatureSet=!0,b.isAsync=!0);if(!1===b.usesFeatureSet&&a&&0<a.length)for(c=0;c<a.length;c++)if(f(b,a[c])){b.usesFeatureSet=!0;b.isAsync=!0;break}}if(void 0===b.usesGeometry)for(b.usesGeometry=!1,null===d&&(d=L(b)),c=0;c<d.length;c++)-1<A.indexOf(d[c])&&(b.usesGeometry=!0)};a.scriptUsesFeatureSet=function(b){b=L(b);for(var a=0;a<b.length;a++)if(-1<
V.indexOf(b[a]))return!0;return!1}})},"esri/arcade/functions/date":function(){define(["require","exports","../languageUtils"],function(v,a,l){function u(a){return null===a?a:isNaN(a.getTime())?null:a}Object.defineProperty(a,"__esModule",{value:!0});a.registerFunctions=void 0;a.registerFunctions=function(a,k){a.today=function(a,e){return k(a,e,function(a,g,e){l.pcCheck(e,0,0);a=new Date;a.setHours(0,0,0,0);return a})};a.now=function(a,e){return k(a,e,function(a,g,e){l.pcCheck(e,0,0);return new Date})};
a.timestamp=function(a,e){return k(a,e,function(a,g,e){l.pcCheck(e,0,0);a=new Date;return a=new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())})};a.toutc=function(a,e){return k(a,e,function(a,g,e){l.pcCheck(e,1,1);a=l.toDate(e[0]);return null===a?null:new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())})};a.tolocal=function(a,e){return k(a,
e,function(a,g,e){l.pcCheck(e,1,1);a=l.toDate(e[0]);return null===a?null:l.MomentLibrary.Moment.utc([a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()]).toDate()})};a.day=function(a,e){return k(a,e,function(a,g,e){l.pcCheck(e,1,1);a=l.toDate(e[0]);return null===a?NaN:a.getDate()})};a.month=function(a,e){return k(a,e,function(a,g,e){l.pcCheck(e,1,1);a=l.toDate(e[0]);return null===a?NaN:a.getMonth()})};a.year=function(a,e){return k(a,e,function(a,
g,e){l.pcCheck(e,1,1);a=l.toDate(e[0]);return null===a?NaN:a.getFullYear()})};a.hour=function(a,e){return k(a,e,function(a,g,e){l.pcCheck(e,1,1);a=l.toDate(e[0]);return null===a?NaN:a.getHours()})};a.second=function(a,e){return k(a,e,function(a,g,e){l.pcCheck(e,1,1);a=l.toDate(e[0]);return null===a?NaN:a.getSeconds()})};a.millisecond=function(a,e){return k(a,e,function(a,g,e){l.pcCheck(e,1,1);a=l.toDate(e[0]);return null===a?NaN:a.getMilliseconds()})};a.minute=function(a,e){return k(a,e,function(a,
g,e){l.pcCheck(e,1,1);a=l.toDate(e[0]);return null===a?NaN:a.getMinutes()})};a.weekday=function(a,e){return k(a,e,function(a,g,e){l.pcCheck(e,1,1);a=l.toDate(e[0]);return null===a?NaN:a.getDay()})};a.date=function(a,e){return k(a,e,function(a,g,e){l.pcCheck(e,0,7);if(3===e.length)return u(new Date(l.toNumber(e[0]),l.toNumber(e[1]),l.toNumber(e[2]),0,0,0,0));if(4===e.length)return u(new Date(l.toNumber(e[0]),l.toNumber(e[1]),l.toNumber(e[2]),l.toNumber(e[3]),0,0,0));if(5===e.length)return u(new Date(l.toNumber(e[0]),
l.toNumber(e[1]),l.toNumber(e[2]),l.toNumber(e[3]),l.toNumber(e[4]),0,0));if(6===e.length)return u(new Date(l.toNumber(e[0]),l.toNumber(e[1]),l.toNumber(e[2]),l.toNumber(e[3]),l.toNumber(e[4]),l.toNumber(e[5]),0));if(7===e.length)return u(new Date(l.toNumber(e[0]),l.toNumber(e[1]),l.toNumber(e[2]),l.toNumber(e[3]),l.toNumber(e[4]),l.toNumber(e[5]),l.toNumber(e[6])));if(2===e.length){a=l.toString(e[1]);if(""===a)return null;a=l.standardiseDateFormat(a);e=l.MomentLibrary.Moment(l.toString(e[0]),a,!0);
return!0===e.isValid()?e.toDate():null}if(1===e.length){if(l.isString(e[0])&&""===e[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;a=l.toNumber(e[0]);return!1===isNaN(a)?u(new Date(a)):l.toDate(e[0])}if(0===e.length)return new Date})};a.datediff=function(a,e){return k(a,e,function(a,e,p){l.pcCheck(p,2,3);a=l.toDateM(p[0]);e=l.toDateM(p[1]);if(null===a||null===e)return NaN;switch(l.toString(p[2]).toLowerCase()){case "days":case "day":case "d":return a.diff(e,"days",!0);case "months":case "month":return a.diff(e,
"months",!0);case "minutes":case "minute":case "m":return"M"===p[2]?a.diff(e,"months",!0):a.diff(e,"minutes",!0);case "seconds":case "second":case "s":return a.diff(e,"seconds",!0);case "milliseconds":case "millisecond":case "ms":return a.diff(e);case "hours":case "hour":case "h":return a.diff(e,"hours",!0);case "years":case "year":case "y":return a.diff(e,"years",!0);default:return a.diff(e)}})};a.dateadd=function(a,e){return k(a,e,function(a,e,p){l.pcCheck(p,2,3);a=l.toDateM(p[0]);if(null===a)return null;
e="milliseconds";switch(l.toString(p[2]).toLowerCase()){case "days":case "day":case "d":e="days";break;case "months":case "month":e="months";break;case "minutes":case "minute":case "m":e="M"===p[2]?"months":"minutes";break;case "seconds":case "second":case "s":e="seconds";break;case "milliseconds":case "millisecond":case "ms":e="milliseconds";break;case "hours":case "hour":case "h":e="hours";break;case "years":case "year":case "y":e="years"}a.add(l.toNumber(p[1]),e);return a.toDate()})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../Dictionary ../Feature ../ImmutablePointArray ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ./centroid ../../geometry/support/jsonUtils ../../geometry/support/coordsUtils".split(" "),
function(v,a,l,u,m,k,h,e,f,g,p,y,n,c,C){Object.defineProperty(a,"__esModule",{value:!0});a.registerFunctions=void 0;a.registerFunctions=function(a,L){a.ringisclockwise=function(a,c){return L(a,c,function(a,b,c){k.pcCheck(c,1,1);a=[];var d=b=!1;if(null===c[0])return!1;if(k.isArray(c[0])){for(var f=0,e=c[0];f<e.length;f++){var n=e[f];if(n instanceof g)a.push(n.hasZ?n.hasM?[n.x,n.y,n.z,n.m]:[n.x,n.y,n.z]:[n.x,n.y]);else throw Error("Invalid Argument");}0<a.length&&(b=c[0][0].hasZ,d=c[0][0].hasM)}else if(c[0]instanceof
m)a=c[0]._elements,0<a.length&&(b=c[0]._hasZ,d=c[0]._hasM);else if(k.isImmutableArray(c[0])){f=0;for(e=c[0].toArray();f<e.length;f++)if(n=e[f],n instanceof g)a.push(n.hasZ?n.hasM?[n.x,n.y,n.z,n.m]:[n.x,n.y,n.z]:[n.x,n.y]);else throw Error("Invalid Argument");0<a.length&&(b=c[0].get(0).hasZ,d=c[0].get(0).hasM)}else throw Error("Invalid Argument");return 3>a.length?!1:C.isClockwise(a,d,b)})};a.polygon=function(a,f){return L(a,f,function(f,b,e){k.pcCheck(e,1,1);f=null;if(e[0]instanceof l){if(f=k.fixSpatialReference(u.parseGeometryFromDictionary(e[0]),
a.spatialReference),!1===f instanceof p)throw Error("Illegal Parameter");}else f=e[0]instanceof p?c.fromJSON(e[0].toJSON()):k.fixSpatialReference(new p(JSON.parse(e[0])),a.spatialReference);if(null!==f&&!1===f.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return k.fixNullGeometry(f)})};a.polyline=function(a,f){return L(a,f,function(f,b,e){k.pcCheck(e,1,1);f=null;if(e[0]instanceof l){if(f=k.fixSpatialReference(u.parseGeometryFromDictionary(e[0]),
a.spatialReference),!1===f instanceof y)throw Error("Illegal Parameter");}else f=e[0]instanceof y?c.fromJSON(e[0].toJSON()):k.fixSpatialReference(new y(JSON.parse(e[0])),a.spatialReference);if(null!==f&&!1===f.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return k.fixNullGeometry(f)})};a.point=function(a,f){return L(a,f,function(f,b,e){k.pcCheck(e,1,1);f=null;if(e[0]instanceof l){if(f=k.fixSpatialReference(u.parseGeometryFromDictionary(e[0]),
a.spatialReference),!1===f instanceof g)throw Error("Illegal Parameter");}else f=e[0]instanceof g?c.fromJSON(e[0].toJSON()):k.fixSpatialReference(new g(JSON.parse(e[0])),a.spatialReference);if(null!==f&&!1===f.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return k.fixNullGeometry(f)})};a.multipoint=function(a,e){return L(a,e,function(e,b,g){k.pcCheck(g,1,1);e=null;if(g[0]instanceof l){if(e=
k.fixSpatialReference(u.parseGeometryFromDictionary(g[0]),a.spatialReference),!1===e instanceof f)throw Error("Illegal Parameter");}else e=g[0]instanceof f?c.fromJSON(g[0].toJSON()):k.fixSpatialReference(new f(JSON.parse(g[0])),a.spatialReference);if(null!==e&&!1===e.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return k.fixNullGeometry(e)})};a.extent=function(a,e){return L(a,e,function(e,
b,n){n=k.autoCastFeatureToGeometry(n);k.pcCheck(n,1,1);e=null;n[0]instanceof l?e=k.fixSpatialReference(u.parseGeometryFromDictionary(n[0]),a.spatialReference):n[0]instanceof g?(e={xmin:n[0].x,ymin:n[0].y,xmax:n[0].x,ymax:n[0].y,spatialReference:n[0].spatialReference.toJSON()},n[0].hasZ?(e.zmin=n[0].z,e.zmax=n[0].z):n[0].hasM&&(e.mmin=n[0].m,e.mmax=n[0].m),e=c.fromJSON(e)):e=n[0]instanceof p?c.fromJSON(n[0].extent.toJSON()):n[0]instanceof y?c.fromJSON(n[0].extent.toJSON()):n[0]instanceof f?c.fromJSON(n[0].extent.toJSON()):
n[0]instanceof h?c.fromJSON(n[0].toJSON()):k.fixSpatialReference(new h(JSON.parse(n[0])),a.spatialReference);if(null!==e&&!1===e.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return k.fixNullGeometry(e)})};a.geometry=function(a,f){return L(a,f,function(f,b,e){k.pcCheck(e,1,1);f=null;f=e[0]instanceof u?k.fixSpatialReference(e[0].geometry(),a.spatialReference):e[0]instanceof l?k.fixSpatialReference(u.parseGeometryFromDictionary(e[0]),
a.spatialReference):k.fixSpatialReference(c.fromJSON(JSON.parse(e[0])),a.spatialReference);if(null!==f&&!1===f.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return k.fixNullGeometry(f)})};a.setgeometry=function(a,c){return L(a,c,function(a,b,c){k.pcCheck(c,2,2);if(c[0]instanceof u){if(!0===c[0].immutable)throw Error("Feature is Immutable");if(c[1]instanceof e||null===c[1])c[0]._geometry=c[1];
else throw Error("Illegal Argument");}else throw Error("Illegal Argument");return k.voidOperation})};a.feature=function(a,c){return L(a,c,function(c,b,f){if(0===f.length)throw Error("Missing Parameters");c=null;if(1===f.length)if(k.isString(f[0]))c=u.fromJson(JSON.parse(f[0]));else if(f[0]instanceof u)c=u.createFromArcadeFeature(f[0]);else if(f[0]instanceof e)c=u.createFromGraphicLikeObject(f[0],null,null);else if(f[0]instanceof l)c=f[0].hasField("geometry")?f[0].field("geometry"):null,b=f[0].hasField("attributes")?
f[0].field("attributes"):null,null!==c&&c instanceof l&&(c=u.parseGeometryFromDictionary(c)),null!==b&&(b=u.parseAttributesFromDictionary(b)),c=u.createFromGraphicLikeObject(c,b,null);else throw Error("Illegal Argument");else{if(2===f.length){b=c=null;if(null!==f[0])if(f[0]instanceof e)c=f[0];else if(c instanceof l)c=u.parseGeometryFromDictionary(f[0]);else throw Error("Illegal Argument");if(null!==f[1])if(f[1]instanceof l)b=u.parseAttributesFromDictionary(f[1]);else throw Error("Illegal Argument");
}else{c=null;b={};if(null!==f[0])if(f[0]instanceof e)c=f[0];else if(c instanceof l)c=u.parseGeometryFromDictionary(f[0]);else throw Error("Illegal Argument");for(var d=1;d<f.length;d+=2){var g=k.toString(f[d]),n=f[d+1];if(null===n||void 0===n||k.isString(n)||isNaN(n)||k.isDate(n)||k.isNumber(n)||k.isBoolean(n)){if(k.isFunctionParameter(n)||!1===k.isSimpleType(n))throw Error("Illegal Argument");b[g]=n===k.voidOperation?null:n}else throw Error("Illegal Argument");}}c=u.createFromGraphicLikeObject(c,
b,null)}c._geometry=k.fixSpatialReference(c.geometry(),a.spatialReference);c.immutable=!1;return c})};a.dictionary=function(a,c){return L(a,c,function(a,b,c){if(0===c.length)return c=new l,c.immutable=!1,c;if(1===c.length&&k.isString(c[0]))try{var d=JSON.parse(c[0]),f=l.convertObjectToArcadeDictionary(d);f.immutable=!1;return f}catch(z){throw Error("Missing Parameters or Illegal Json");}if(0!==c.length%2)throw Error("Missing Parameters");a={};for(b=0;b<c.length;b+=2)if(d=k.toString(c[b]),f=c[b+1],
null===f||void 0===f||k.isString(f)||isNaN(f)||k.isDate(f)||k.isNumber(f)||k.isBoolean(f)||k.isArray(f)||k.isImmutableArray(f)){if(k.isFunctionParameter(f))throw Error("Illegal Argument");a[d]=f===k.voidOperation?null:f}else throw Error("Illegal Argument");c=new l(a);c.immutable=!1;return c})};a.haskey=function(a,c){return L(a,c,function(a,b,c){k.pcCheck(c,2,2);a=k.toString(c[1]);if(c[0]instanceof u||c[0]instanceof l)return c[0].hasField(a);throw Error("Illegal Argument");})};a.indexof=function(a,
c){return L(a,c,function(a,b,c){k.pcCheck(c,2,2);a=c[1];if(k.isArray(c[0])){for(b=0;b<c[0].length;b++)if(k.equalityTest(a,c[0][b]))return b;return-1}if(k.isImmutableArray(c[0])){var d=c[0].length();for(b=0;b<d;b++)if(k.equalityTest(a,c[0].get(b)))return b;return-1}throw Error("Illegal Argument");})};a.angle=function(a,c){return L(a,c,function(a,b,c){c=k.autoCastFeatureToGeometry(c);k.pcCheck(c,2,3);if(!(c[0]instanceof g))throw Error("Illegal Argument");if(!(c[1]instanceof g))throw Error("Illegal Argument");
if(2<c.length&&!(c[2]instanceof g))throw Error("Illegal Argument");return 2===c.length?n.angle2D(c[0],c[1]):n.angleBetween2D(c[0],c[1],c[2])})};a.bearing=function(a,c){return L(a,c,function(a,b,c){c=k.autoCastFeatureToGeometry(c);k.pcCheck(c,2,3);if(!(c[0]instanceof g))throw Error("Illegal Argument");if(!(c[1]instanceof g))throw Error("Illegal Argument");if(2<c.length&&!(c[2]instanceof g))throw Error("Illegal Argument");return 2===c.length?n.bearing2D(c[0],c[1]):n.bearingBetween2D(c[0],c[1],c[2])})};
a.isselfintersecting=function(a,c){return L(a,c,function(c,b,e){e=k.autoCastFeatureToGeometry(e);k.pcCheck(e,1,1);c=e[0];if(c instanceof p)return c.isSelfIntersecting;if(c instanceof y)return c=c.paths,n.pathsSelfIntersecting(c);if(c instanceof f)for(b=c.points,e=0;e<b.length;e++)for(var d=0;d<b.length;d++)if(d!==e){for(var g=!0,h=0;h<b[e].length;h++)if(b[e][h]!==b[d][h]){g=!1;break}if(!0===g)return!0}return k.isArray(c)||k.isImmutableArray(c)?(c=k.autoCastArrayOfPointsToPolyline(c,a.spatialReference),
null!==c&&(c=c.paths),n.pathsSelfIntersecting(c)):!1})}}})},"esri/arcade/functions/centroid":function(){define(["require","exports","../../geometry/Point","../../geometry/support/intersects"],function(v,a,l,u){function m(a,f,e){var c={x:0,y:0};f&&(c.z=0);e&&(c.m=0);for(var g=0,n=a[0],h=0;h<a.length;h++){var p=a[h],m;a:if(p.length!==n.length)m=!1;else{for(m=0;m<p.length;m++)if(p[m]!==n[m]){m=!1;break a}m=!0}if(!1===m){m=k(n,p,f);var y=p,b=f,q=e,d={x:(n[0]+y[0])/2,y:(n[1]+y[1])/2};b&&(d.z=(n[2]+y[2])/
2);b&&q?d.m=(n[3]+y[3])/2:q&&(d.m=(n[2]+y[2])/2);n=d;n.x*=m;n.y*=m;c.x+=n.x;c.y+=n.y;f&&(n.z*=m,c.z+=n.z);e&&(n.m*=m,c.m+=n.m);g+=m;n=p}}0<g?(c.x/=g,c.y/=g,f&&(c.z/=g),e&&(c.m/=g)):(c.x=a[0][0],c.y=a[0][1],f&&(c.z=a[0][2]),e&&f?c.m=a[0][3]:e&&(c.m=a[0][2]));return c}function k(a,f,e){var c=f[0]-a[0];a=f[1]-a[1];return e?(f=f[2]-f[2],Math.sqrt(c*c+a*a+f*f)):Math.sqrt(c*c+a*a)}function h(a,f,e){for(void 0===e&&(e=0);a<e;)a+=f;for(e+=f;a>=e;)a-=f;return a}function e(a,f){return Math.atan2(f.y-a.y,f.x-
a.x)}function f(a,f,e){var c=a.x-f.x;a=a.y-f.y;var g=e.x-f.x;f=e.y-f.y;return Math.atan2(g*a-c*f,g*c+f*a)}Object.defineProperty(a,"__esModule",{value:!0});a.pathsSelfIntersecting=a.bearingBetween2D=a.angleBetween2D=a.angleBetweenRad=a.bearing2D=a.angle2D=a.angleRad=a.centroidMultiPoint=a.centroidPolyline=void 0;a.centroidPolyline=function(a){for(var f={x:0,y:0,spatialReference:a.spatialReference.toJSON()},e={x:0,y:0,spatialReference:a.spatialReference.toJSON()},c=0,g=0,h=0;h<a.paths.length;h++)if(0!==
a.paths[h].length){var p;p=a.paths[h];var u=!0===a.hasZ;if(1>=p.length)p=0;else{for(var V=0,A=1;A<p.length;A++)V+=k(p[A-1],p[A],u);p=V}0===p?(u=m(a.paths[h],!0===a.hasZ,!0===a.hasM),f.x+=u.x,f.y+=u.y,!0===a.hasZ&&(f.z+=u.z),!0===a.hasM&&(f.m+=u.m),++c):(u=m(a.paths[h],!0===a.hasZ,!0===a.hasM),e.x+=u.x*p,e.y+=u.y*p,!0===a.hasZ&&(e.z+=u.z*p),!0===a.hasM&&(e.m+=u.m*p),g+=p)}return 0<g?(e.x/=g,e.y/=g,!0===a.hasZ&&(e.z/=g),!0===a.hasM&&(e.m/=g),new l(e)):0<c?(f.x/=c,f.y/=c,!0===a.hasZ&&(e.z/=c),!0===a.hasM&&
(f.m/=c),new l(f)):null};a.centroidMultiPoint=function(a){if(0===a.points.length)return null;for(var f=0,e=0,c=0,g=0,h=0;h<a.points.length;h++){var k=a.getPoint(h);!0===k.hasZ&&(c+=k.z);!0===k.hasM&&(g+=k.m);f+=k.x;e+=k.y;g+=k.m}f={x:f/a.points.length,y:e/a.points.length,spatialReference:null};f.spatialReference=a.spatialReference.toJSON();!0===a.hasZ&&(f.z=c/a.points.length);!0===a.hasM&&(f.m=g/a.points.length);return new l(f)};a.angleRad=e;a.angle2D=function(a,f){return h(e(a,f),2*Math.PI)*(180/
Math.PI)};a.bearing2D=function(a,f){return h(Math.PI/2-e(a,f),2*Math.PI)*(180/Math.PI)};a.angleBetweenRad=f;a.angleBetween2D=function(a,e,g){return h(f(a,e,g),2*Math.PI)*(180/Math.PI)};a.bearingBetween2D=function(a,e,g){return h(-1*f(a,e,g),2*Math.PI)*(180/Math.PI)};var g=[0,0];a.pathsSelfIntersecting=function(a){for(var f=0;f<a.length;f++){for(var e=a[f],c=0;c<e.length-1;c++)for(var h=e[c],k=e[c+1],p=f+1;p<a.length;p++)for(var m=0;m<a[p].length-1;m++){var l=a[p][m],A=a[p][m+1],b=u.segmentIntersects(h,
k,l,A,g);if(b&&!(g[0]===h[0]&&g[1]===h[1]||g[0]===l[0]&&g[1]===l[1]||g[0]===k[0]&&g[1]===k[1]||g[0]===A[0]&&g[1]===A[1]))return!0}m=e.length;if(!(3>m))for(c=0;c<=m-2;c++)for(h=e[c],k=e[c+1],p=c+2;p<=m-2;p++)if(l=e[p],A=e[p+1],(b=u.segmentIntersects(h,k,l,A,g))&&!(g[0]===h[0]&&g[1]===h[1]||g[0]===l[0]&&g[1]===l[1]||g[0]===k[0]&&g[1]===k[1]||g[0]===A[0]&&g[1]===A[1]))return!0}return!1}})},"esri/arcade/functions/geomsync":function(){define("require exports ../../kernel ../kernel ../languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/jsonUtils".split(" "),
function(v,a,l,u,m,k,h,e,f,g,p,y,n){function c(a){return 0===l.version.indexOf("4.")?p.fromExtent(a):new p({spatialReference:a.spatialReference,rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]]})}Object.defineProperty(a,"__esModule",{value:!0});a.registerFunctions=a.setGeometryEngine=void 0;var C=null;a.setGeometryEngine=function(a){C=a};a.registerFunctions=function(a,l){function v(a){m.pcCheck(a,2,2);if(!(a[0]instanceof e&&a[1]instanceof e||a[0]instanceof e&&
null===a[1]||a[1]instanceof e&&null===a[0]||null===a[0]&&null===a[1]))throw Error("Illegal Argument");}a.disjoint=function(a,c){return l(a,c,function(a,c,d){d=m.autoCastFeatureToGeometry(d);v(d);return null===d[0]||null===d[1]?!0:C.disjoint(d[0],d[1])})};a.intersects=function(a,c){return l(a,c,function(a,c,d){d=m.autoCastFeatureToGeometry(d);v(d);return null===d[0]||null===d[1]?!1:C.intersects(d[0],d[1])})};a.touches=function(a,c){return l(a,c,function(a,c,d){d=m.autoCastFeatureToGeometry(d);v(d);
return null===d[0]||null===d[1]?!1:C.touches(d[0],d[1])})};a.crosses=function(a,c){return l(a,c,function(a,c,d){d=m.autoCastFeatureToGeometry(d);v(d);return null===d[0]||null===d[1]?!1:C.crosses(d[0],d[1])})};a.within=function(a,c){return l(a,c,function(a,c,d){d=m.autoCastFeatureToGeometry(d);v(d);return null===d[0]||null===d[1]?!1:C.within(d[0],d[1])})};a.contains=function(a,c){return l(a,c,function(a,c,d){d=m.autoCastFeatureToGeometry(d);v(d);return null===d[0]||null===d[1]?!1:C.contains(d[0],d[1])})};
a.overlaps=function(a,c){return l(a,c,function(a,c,d){d=m.autoCastFeatureToGeometry(d);v(d);return null===d[0]||null===d[1]?!1:C.overlaps(d[0],d[1])})};a.equals=function(a,c){return l(a,c,function(a,c,d){m.pcCheck(d,2,2);return d[0]===d[1]?!0:d[0]instanceof e&&d[1]instanceof e?C.equals(d[0],d[1]):m.isDate(d[0])&&m.isDate(d[1])?d[0].getTime()===d[1].getTime():!1})};a.relate=function(a,c){return l(a,c,function(a,c,d){d=m.autoCastFeatureToGeometry(d);m.pcCheck(d,3,3);if(d[0]instanceof e&&d[1]instanceof
e)return C.relate(d[0],d[1],m.toString(d[2]));if(d[0]instanceof e&&null===d[1]||d[1]instanceof e&&null===d[0]||null===d[0]&&null===d[1])return!1;throw Error("Illegal Argument");})};a.intersection=function(a,c){return l(a,c,function(a,c,d){d=m.autoCastFeatureToGeometry(d);v(d);return null===d[0]||null===d[1]?null:C.intersect(d[0],d[1])})};a.union=function(a,c){return l(a,c,function(b,c,d){d=m.autoCastFeatureToGeometry(d);b=[];if(0===d.length)throw Error("Function called with wrong number of Parameters");
if(1===d.length)if(m.isArray(d[0]))for(d=m.autoCastFeatureToGeometry(d[0]),c=0;c<d.length;c++){if(null!==d[c]){if(!(d[c]instanceof e))throw Error("Illegal Argument");b.push(d[c])}}else if(m.isImmutableArray(d[0]))for(d=m.autoCastFeatureToGeometry(d[0].toArray()),c=0;c<d.length;c++){if(null!==d[c]){if(!(d[c]instanceof e))throw Error("Illegal Argument");b.push(d[c])}}else{if(d[0]instanceof e)return m.fixSpatialReference(u.cloneGeometry(d[0]),a.spatialReference);if(null===d[0])return null;throw Error("Illegal Argument");
}else for(c=0;c<d.length;c++)if(null!==d[c]){if(!(d[c]instanceof e))throw Error("Illegal Argument");b.push(d[c])}return 0===b.length?null:C.union(b)})};a.difference=function(a,c){return l(a,c,function(a,c,d){d=m.autoCastFeatureToGeometry(d);v(d);return null!==d[0]&&null===d[1]?u.cloneGeometry(d[0]):null===d[0]?null:C.difference(d[0],d[1])})};a.symmetricdifference=function(a,c){return l(a,c,function(a,c,d){d=m.autoCastFeatureToGeometry(d);v(d);return null===d[0]&&null===d[1]?null:null===d[0]?u.cloneGeometry(d[1]):
null===d[1]?u.cloneGeometry(d[0]):C.symmetricDifference(d[0],d[1])})};a.clip=function(a,c){return l(a,c,function(a,c,d){d=m.autoCastFeatureToGeometry(d);m.pcCheck(d,2,2);if(!(d[1]instanceof h)&&null!==d[1])throw Error("Illegal Argument");if(null===d[0])return null;if(!(d[0]instanceof e))throw Error("Illegal Argument");return null===d[1]?null:C.clip(d[0],d[1])})};a.cut=function(a,c){return l(a,c,function(a,c,d){d=m.autoCastFeatureToGeometry(d);m.pcCheck(d,2,2);if(!(d[1]instanceof y)&&null!==d[1])throw Error("Illegal Argument");
if(null===d[0])return[];if(!(d[0]instanceof e))throw Error("Illegal Argument");return null===d[1]?[u.cloneGeometry(d[0])]:C.cut(d[0],d[1])})};a.area=function(a,c){return l(a,c,function(b,c,d){m.pcCheck(d,1,2);d=m.autoCastFeatureToGeometry(d);if(null===d[0])return 0;if(m.isArray(d[0])||m.isImmutableArray(d[0]))return b=m.autoCastArrayOfPointsToPolygon(d[0],a.spatialReference),null===b?0:C.planarArea(b,u.convertSquareUnitsToCode(m.defaultUndefined(d[1],-1)));if(!(d[0]instanceof e))throw Error("Illegal Argument");
return C.planarArea(d[0],u.convertSquareUnitsToCode(m.defaultUndefined(d[1],-1)))})};a.areageodetic=function(a,c){return l(a,c,function(b,c,d){m.pcCheck(d,1,2);d=m.autoCastFeatureToGeometry(d);if(null===d[0])return 0;if(m.isArray(d[0])||m.isImmutableArray(d[0]))return b=m.autoCastArrayOfPointsToPolygon(d[0],a.spatialReference),null===b?0:C.geodesicArea(b,u.convertSquareUnitsToCode(m.defaultUndefined(d[1],-1)));if(!(d[0]instanceof e))throw Error("Illegal Argument");return C.geodesicArea(d[0],u.convertSquareUnitsToCode(m.defaultUndefined(d[1],
-1)))})};a.length=function(a,c){return l(a,c,function(b,c,d){m.pcCheck(d,1,2);d=m.autoCastFeatureToGeometry(d);if(null===d[0])return 0;if(m.isArray(d[0])||m.isImmutableArray(d[0]))return b=m.autoCastArrayOfPointsToPolyline(d[0],a.spatialReference),null===b?0:C.planarLength(b,u.convertLinearUnitsToCode(m.defaultUndefined(d[1],-1)));if(!(d[0]instanceof e))throw Error("Illegal Argument");return C.planarLength(d[0],u.convertLinearUnitsToCode(m.defaultUndefined(d[1],-1)))})};a.lengthgeodetic=function(a,
c){return l(a,c,function(b,c,d){m.pcCheck(d,1,2);d=m.autoCastFeatureToGeometry(d);if(null===d[0])return 0;if(m.isArray(d[0])||m.isImmutableArray(d[0]))return b=m.autoCastArrayOfPointsToPolyline(d[0],a.spatialReference),null===b?0:C.geodesicLength(b,u.convertLinearUnitsToCode(m.defaultUndefined(d[1],-1)));if(!(d[0]instanceof e))throw Error("Illegal Argument");return C.geodesicLength(d[0],u.convertLinearUnitsToCode(m.defaultUndefined(d[1],-1)))})};a.distance=function(a,c){return l(a,c,function(b,c,
d){d=m.autoCastFeatureToGeometry(d);m.pcCheck(d,2,3);b=d[0];if(m.isArray(d[0])||m.isImmutableArray(d[0]))b=m.autoCastArrayOfPointsToMultiPoint(d[0],a.spatialReference);c=d[1];if(m.isArray(d[1])||m.isImmutableArray(d[1]))c=m.autoCastArrayOfPointsToMultiPoint(d[1],a.spatialReference);if(!(b instanceof e))throw Error("Illegal Argument");if(!(c instanceof e))throw Error("Illegal Argument");return C.distance(b,c,u.convertLinearUnitsToCode(m.defaultUndefined(d[2],-1)))})};a.distancegeodetic=function(a,
c){return l(a,c,function(a,c,d){d=m.autoCastFeatureToGeometry(d);m.pcCheck(d,2,3);a=d[0];c=d[1];if(!(a instanceof g))throw Error("Illegal Argument");if(!(c instanceof g))throw Error("Illegal Argument");var b=new y({paths:[],spatialReference:a.spatialReference});b.addPath([a,c]);return C.geodesicLength(b,u.convertLinearUnitsToCode(m.defaultUndefined(d[2],-1)))})};a.densify=function(a,f){return l(a,f,function(a,f,d){d=m.autoCastFeatureToGeometry(d);m.pcCheck(d,2,3);if(null===d[0])return null;if(!(d[0]instanceof
e))throw Error("Illegal Argument");a=m.toNumber(d[1]);if(isNaN(a))throw Error("Illegal Argument");if(0>=a)throw Error("Illegal Argument");return d[0]instanceof p||d[0]instanceof y?C.densify(d[0],a,u.convertLinearUnitsToCode(m.defaultUndefined(d[2],-1))):d[0]instanceof h?C.densify(c(d[0]),a,u.convertLinearUnitsToCode(m.defaultUndefined(d[2],-1))):d[0]})};a.densifygeodetic=function(a,f){return l(a,f,function(a,f,d){d=m.autoCastFeatureToGeometry(d);m.pcCheck(d,2,3);if(null===d[0])return null;if(!(d[0]instanceof
e))throw Error("Illegal Argument");a=m.toNumber(d[1]);if(isNaN(a))throw Error("Illegal Argument");if(0>=a)throw Error("Illegal Argument");return d[0]instanceof p||d[0]instanceof y?C.geodesicDensify(d[0],a,u.convertLinearUnitsToCode(m.defaultUndefined(d[2],-1))):d[0]instanceof h?C.geodesicDensify(c(d[0]),a,u.convertLinearUnitsToCode(m.defaultUndefined(d[2],-1))):d[0]})};a.generalize=function(a,c){return l(a,c,function(a,c,d){d=m.autoCastFeatureToGeometry(d);m.pcCheck(d,2,4);if(null===d[0])return null;
if(!(d[0]instanceof e))throw Error("Illegal Argument");a=m.toNumber(d[1]);if(isNaN(a))throw Error("Illegal Argument");return C.generalize(d[0],a,m.toBoolean(m.defaultUndefined(d[2],!0)),u.convertLinearUnitsToCode(m.defaultUndefined(d[3],-1)))})};a.buffer=function(a,c){return l(a,c,function(a,c,d){d=m.autoCastFeatureToGeometry(d);m.pcCheck(d,2,3);if(null===d[0])return null;if(!(d[0]instanceof e))throw Error("Illegal Argument");a=m.toNumber(d[1]);if(isNaN(a))throw Error("Illegal Argument");return 0===
a?u.cloneGeometry(d[0]):C.buffer(d[0],a,u.convertLinearUnitsToCode(m.defaultUndefined(d[2],-1)))})};a.buffergeodetic=function(a,c){return l(a,c,function(a,c,d){d=m.autoCastFeatureToGeometry(d);m.pcCheck(d,2,3);if(null===d[0])return null;if(!(d[0]instanceof e))throw Error("Illegal Argument");a=m.toNumber(d[1]);if(isNaN(a))throw Error("Illegal Argument");return 0===a?u.cloneGeometry(d[0]):C.geodesicBuffer(d[0],a,u.convertLinearUnitsToCode(m.defaultUndefined(d[2],-1)))})};a.offset=function(a,c){return l(a,
c,function(a,c,d){d=m.autoCastFeatureToGeometry(d);m.pcCheck(d,2,6);if(null===d[0])return null;if(!(d[0]instanceof p||d[0]instanceof y))throw Error("Illegal Argument");a=m.toNumber(d[1]);if(isNaN(a))throw Error("Illegal Argument");c=m.toNumber(m.defaultUndefined(d[4],10));if(isNaN(c))throw Error("Illegal Argument");var b=m.toNumber(m.defaultUndefined(d[5],0));if(isNaN(b))throw Error("Illegal Argument");return C.offset(d[0],a,u.convertLinearUnitsToCode(m.defaultUndefined(d[2],-1)),m.toString(m.defaultUndefined(d[3],
"round")).toLowerCase(),c,b)})};a.rotate=function(a,c){return l(a,c,function(a,c,d){d=m.autoCastFeatureToGeometry(d);m.pcCheck(d,2,3);a=d[0];if(null===a)return null;if(!(a instanceof e))throw Error("Illegal Argument");a instanceof h&&(a=p.fromExtent(a));c=m.toNumber(d[1]);if(isNaN(c))throw Error("Illegal Argument");d=m.defaultUndefined(d[2],null);if(null===d)return C.rotate(a,c);if(d instanceof g)return C.rotate(a,c,d);throw Error("Illegal Argument");})};a.centroid=function(a,c){return l(a,c,function(b,
c,d){d=m.autoCastFeatureToGeometry(d);m.pcCheck(d,1,1);if(null===d[0])return null;b=d[0];if(m.isArray(d[0])||m.isImmutableArray(d[0]))b=m.autoCastArrayOfPointsToMultiPoint(d[0],a.spatialReference);if(null===b)return null;if(!(b instanceof e))throw Error("Illegal Argument");return b instanceof g?m.fixSpatialReference(u.cloneGeometry(d[0]),a.spatialReference):b instanceof p?b.centroid:b instanceof y?k.centroidPolyline(b):b instanceof f?k.centroidMultiPoint(b):b instanceof h?b.center:null})};a.multiparttosinglepart=
function(a,c){return l(a,c,function(b,c,d){d=m.autoCastFeatureToGeometry(d);m.pcCheck(d,1,1);c=[];if(null===d[0])return null;if(!(d[0]instanceof e))throw Error("Illegal Argument");if(d[0]instanceof g||d[0]instanceof h)return[m.fixSpatialReference(u.cloneGeometry(d[0]),a.spatialReference)];b=C.simplify(d[0]);if(b instanceof p){c=[];var k=[];for(d=0;d<b.rings.length;d++)if(b.isClockwise(b.rings[d])){var l=n.fromJSON({rings:[b.rings[d]],hasZ:!0===b.hasZ,hasM:!0===b.hasM,spatialReference:b.spatialReference.toJSON()});
c.push(l)}else k.push({ring:b.rings[d],pt:b.getPoint(d,0)});for(b=0;b<k.length;b++)for(d=0;d<c.length;d++)if(c[d].contains(k[b].pt)){c[d].addRing(k[b].ring);break}return c}if(b instanceof y){c=[];for(d=0;d<b.paths.length;d++)k=n.fromJSON({paths:[b.paths[d]],hasZ:!0===b.hasZ,hasM:!0===b.hasM,spatialReference:b.spatialReference.toJSON()}),c.push(k);return c}if(d[0]instanceof f){b=m.fixSpatialReference(u.cloneGeometry(d[0]),a.spatialReference);for(d=0;d<b.points.length;d++)c.push(b.getPoint(d));return c}return null})};
a.issimple=function(a,c){return l(a,c,function(a,c,d){d=m.autoCastFeatureToGeometry(d);m.pcCheck(d,1,1);if(null===d[0])return!0;if(!(d[0]instanceof e))throw Error("Illegal Argument");return C.isSimple(d[0])})};a.simplify=function(a,c){return l(a,c,function(a,c,d){d=m.autoCastFeatureToGeometry(d);m.pcCheck(d,1,1);if(null===d[0])return null;if(!(d[0]instanceof e))throw Error("Illegal Argument");return C.simplify(d[0])})}}})},"esri/arcade/kernel":function(){define(["require","exports","../geometry/Extent"],
function(v,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.cloneGeometry=a.sameGeomType=a.convertLinearUnitsToCode=a.shapeExtent=a.convertSquareUnitsToCode=void 0;a.convertSquareUnitsToCode=function(a){if(void 0===a)return null;if("number"===typeof a)return a;switch(a.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square-meters":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 109413;
case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 109405}return null};
a.shapeExtent=function(a){if(null===a)return null;switch(a.type){case "polygon":case "multipoint":case "polyline":return a.extent;case "point":return new l({xmin:a.x,ymin:a.y,xmax:a.x,ymax:a.y,spatialReference:a.spatialReference});case "extent":return a}return null};a.convertLinearUnitsToCode=function(a){if(void 0===a)return null;if("number"===typeof a||"number"===typeof a)return a;switch(a.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square-meters":return 9001;
case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 9035;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 9036;case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 9002}return null};
a.sameGeomType=function(a,m){return a===m||"point"===a&&"esriGeometryPoint"===m||"polyline"===a&&"esriGeometryPolyline"===m||"polygon"===a&&"esriGeometryPolygon"===m||"extent"===a&&"esriGeometryEnvelope"===m||"multipoint"===a&&"esriGeometryMultipoint"===m||"point"===m&&"esriGeometryPoint"===a||"polyline"===m&&"esriGeometryPolyline"===a||"polygon"===m&&"esriGeometryPolygon"===a||"extent"===m&&"esriGeometryEnvelope"===a||"multipoint"===m&&"esriGeometryMultipoint"===a?!0:!1};a.cloneGeometry=function(a){if(null===
a)return null;var m=a.clone();void 0!==a.cache._geVersion&&(m.cache._geVersion=a.cache._geVersion);return m}})},"esri/arcade/functions/maths":function(){define(["require","exports","../languageUtils","../../core/number"],function(v,a,l,u){function m(a,h,e){if("undefined"===typeof e||0===+e)return Math[a](h);h=+h;e=+e;if(isNaN(h)||"number"!==typeof e||0!==e%1)return NaN;h=h.toString().split("e");h=Math[a](+(h[0]+"e"+(h[1]?+h[1]-e:-e)));h=h.toString().split("e");return+(h[0]+"e"+(h[1]?+h[1]+e:e))}Object.defineProperty(a,
"__esModule",{value:!0});a.registerFunctions=void 0;a.registerFunctions=function(a,h){function e(a,e,h){a=l.toNumber(a);return isNaN(a)?a:isNaN(e)||isNaN(h)||e>h?NaN:a<e?e:a>h?h:a}a.number=function(a,e){return h(a,e,function(a,f,e){l.pcCheck(e,1,2);a=e[0];return l.isNumber(a)?a:null===a?0:l.isDate(a)||l.isBoolean(a)?Number(a):l.isArray(a)?NaN:""===a||void 0===a?Number(a):l.isString(a)?void 0!==e[1]?(e=l.multiReplace(e[1],"\u2030",""),e=l.multiReplace(e,"\u00a4",""),u.parse(a,{pattern:e})):Number(a.trim()):
Number(a)})};a.abs=function(a,e){return h(a,e,function(a,f,e){l.pcCheck(e,1,1);return Math.abs(l.toNumber(e[0]))})};a.acos=function(a,e){return h(a,e,function(a,f,e){l.pcCheck(e,1,1);return Math.acos(l.toNumber(e[0]))})};a.asin=function(a,e){return h(a,e,function(a,f,e){l.pcCheck(e,1,1);return Math.asin(l.toNumber(e[0]))})};a.atan=function(a,e){return h(a,e,function(a,f,e){l.pcCheck(e,1,1);return Math.atan(l.toNumber(e[0]))})};a.atan2=function(a,e){return h(a,e,function(a,f,e){l.pcCheck(e,2,2);return Math.atan2(l.toNumber(e[0]),
l.toNumber(e[1]))})};a.ceil=function(a,e){return h(a,e,function(a,f,e){l.pcCheck(e,1,2);return 2===e.length?(a=l.toNumber(e[1]),isNaN(a)&&(a=0),m("ceil",l.toNumber(e[0]),-1*a)):Math.ceil(l.toNumber(e[0]))})};a.round=function(a,e){return h(a,e,function(a,f,e){l.pcCheck(e,1,2);return 2===e.length?(a=l.toNumber(e[1]),isNaN(a)&&(a=0),m("round",l.toNumber(e[0]),-1*a)):Math.round(l.toNumber(e[0]))})};a.floor=function(a,e){return h(a,e,function(a,f,e){l.pcCheck(e,1,2);return 2===e.length?(a=l.toNumber(e[1]),
isNaN(a)&&(a=0),m("floor",l.toNumber(e[0]),-1*a)):Math.floor(l.toNumber(e[0]))})};a.cos=function(a,e){return h(a,e,function(a,f,e){l.pcCheck(e,1,1);return Math.cos(l.toNumber(e[0]))})};a.isnan=function(a,e){return h(a,e,function(a,f,e){l.pcCheck(e,1,1);return"number"===typeof e[0]&&isNaN(e[0])})};a.exp=function(a,e){return h(a,e,function(a,f,e){l.pcCheck(e,1,1);return Math.exp(l.toNumber(e[0]))})};a.log=function(a,e){return h(a,e,function(a,e,f){l.pcCheck(f,1,1);return Math.log(l.toNumber(f[0]))})};
a.pow=function(a,e){return h(a,e,function(a,e,f){l.pcCheck(f,2,2);return Math.pow(l.toNumber(f[0]),l.toNumber(f[1]))})};a.random=function(a,e){return h(a,e,function(a,e,f){l.pcCheck(f,0,0);return Math.random()})};a.sin=function(a,e){return h(a,e,function(a,e,f){l.pcCheck(f,1,1);return Math.sin(l.toNumber(f[0]))})};a.sqrt=function(a,e){return h(a,e,function(a,e,f){l.pcCheck(f,1,1);return Math.sqrt(l.toNumber(f[0]))})};a.tan=function(a,e){return h(a,e,function(a,e,f){l.pcCheck(f,1,1);return Math.tan(l.toNumber(f[0]))})};
a.defaultvalue=function(a,e){return h(a,e,function(a,e,f){l.pcCheck(f,2,2);return null===f[0]||""===f[0]||void 0===f[0]?f[1]:f[0]})};a.isempty=function(a,e){return h(a,e,function(a,e,f){l.pcCheck(f,1,1);return null===f[0]||""===f[0]||void 0===f[0]?!0:!1})};a["boolean"]=function(a,e){return h(a,e,function(a,e,f){l.pcCheck(f,1,1);return l.toBoolean(f[0])})};a.constrain=function(a,g){return h(a,g,function(a,f,g){l.pcCheck(g,3,3);a=l.toNumber(g[1]);f=l.toNumber(g[2]);if(l.isArray(g[0])){var c=[],h=0;
for(g=g[0];h<g.length;h++)c.push(e(g[h],a,f));return c}if(l.isImmutableArray(g[0])){c=[];for(h=0;h<g[0].length();h++)c.push(e(g[0].get(h),a,f));return c}return e(g[0],a,f)})}}})},"esri/arcade/functions/stats":function(){define(["require","exports","../languageUtils","./fieldStats"],function(v,a,l,u){function m(a,h,e,f){if(1===f.length){if(l.isArray(f[0]))return u.calculateStat(a,f[0],-1);if(l.isImmutableArray(f[0]))return u.calculateStat(a,f[0].toArray(),-1)}return u.calculateStat(a,f,-1)}Object.defineProperty(a,
"__esModule",{value:!0});a.registerFunctions=void 0;a.registerFunctions=function(a,h){a.stdev=function(a,f){return h(a,f,function(a,e,f){return m("stdev",a,e,f)})};a.variance=function(a,f){return h(a,f,function(a,e,f){return m("variance",a,e,f)})};a.average=function(a,f){return h(a,f,function(a,e,f){return m("mean",a,e,f)})};a.mean=function(a,f){return h(a,f,function(a,f,e){return m("mean",a,f,e)})};a.sum=function(a,f){return h(a,f,function(a,f,e){return m("sum",a,f,e)})};a.min=function(a,f){return h(a,
f,function(a,f,e){return m("min",a,f,e)})};a.max=function(a,f){return h(a,f,function(a,f,e){return m("max",a,f,e)})};a.distinct=function(a,f){return h(a,f,function(a,f,e){return m("distinct",a,f,e)})};a.count=function(a,f){return h(a,f,function(a,f,e){l.pcCheck(e,1,1);if(l.isArray(e[0])||l.isString(e[0]))return e[0].length;if(l.isImmutableArray(e[0]))return e[0].length();throw Error("Invalid Parameters for Count");})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],
function(v,a,l){function u(a){for(var h=0,e=0;e<a.length;e++)h+=a[e];return h/a.length}function m(a){for(var h=u(a),e=0,f=0;f<a.length;f++)e+=Math.pow(h-a[f],2);return e/a.length}Object.defineProperty(a,"__esModule",{value:!0});a.calculateStat=a.decodeStatType=void 0;a.decodeStatType=function(a){switch(a.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";
case "count":return"count"}return""};a.calculateStat=function(a,h,e){void 0===e&&(e=1E3);switch(a.toLowerCase()){case "distinct":a:{a=e;e=[];for(var f={},g=[],k=0;k<h.length;k++){if(void 0!==h[k]&&null!==h[k]&&h[k]!==l.voidOperation){var y=h[k];if(l.isNumber(y)||l.isString(y))void 0===f[y]&&(e.push(y),f[y]=1);else{for(var n=!1,c=0;c<g.length;c++)!0===l.equalityTest(g[c],y)&&(n=!0);!1===n&&(g.push(y),e.push(y))}}if(e.length>=a&&-1!==a){h=e;break a}}h=e}return h;case "avg":case "mean":return u(l.toNumberArray(h));
case "min":return Math.min.apply(Math,l.toNumberArray(h));case "sum":h=l.toNumberArray(h);for(e=a=0;e<h.length;e++)a+=h[e];return a;case "max":return Math.max.apply(Math,l.toNumberArray(h));case "stdev":case "stddev":return Math.sqrt(m(l.toNumberArray(h)));case "var":case "variance":return m(l.toNumberArray(h));case "count":return h.length}return 0}})},"esri/arcade/functions/string":function(){define("require exports ../ArcadePortal ../Dictionary ../Feature ../languageUtils ../featureset/support/shared".split(" "),
function(v,a,l,u,m,k,h){Object.defineProperty(a,"__esModule",{value:!0});a.registerFunctions=void 0;a.registerFunctions=function(a,f){a.portal=function(a,e){return f(a,e,function(a,f,c){k.pcCheck(c,1,1);return new l(k.toString(c[0]))})};a.trim=function(a,e){return f(a,e,function(a,f,c){k.pcCheck(c,1,1);return k.toString(c[0]).trim()})};a.upper=function(a,e){return f(a,e,function(a,f,c){k.pcCheck(c,1,1);return k.toString(c[0]).toUpperCase()})};a.proper=function(a,e){return f(a,e,function(a,f,c){k.pcCheck(c,
1,2);a=1;2===c.length&&"firstword"===k.toString(c[1]).toLowerCase()&&(a=2);f=/\s/;c=k.toString(c[0]);for(var e="",g=!0,h=0;h<c.length;h++){var n=c[h];f.test(n)?1===a&&(g=!0):n.toUpperCase()!==n.toLowerCase()&&(g?(n=n.toUpperCase(),g=!1):n=n.toLowerCase());e+=n}return e})};a.lower=function(a,e){return f(a,e,function(a,f,c){k.pcCheck(c,1,1);return k.toString(c[0]).toLowerCase()})};a.guid=function(a,e){return f(a,e,function(a,f,c){k.pcCheck(c,0,1);if(0<c.length)switch(k.toString(c[0]).toLowerCase()){case "digits":return k.generateUUID().replace("-",
"").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return k.generateUUID();case "digits-hyphen-parentheses":return"("+k.generateUUID()+")"}return"{"+k.generateUUID()+"}"})};a.console=function(a,e){return f(a,e,function(f,e,c){0!==c.length&&(1===c.length?a.console(k.toString(c[0])):a.console(k.toString(c)));return k.voidOperation})};a.mid=function(a,e){return f(a,e,function(a,f,c){k.pcCheck(c,2,3);a=k.toNumber(c[1]);if(isNaN(a))return"";0>a&&(a=0);if(2===c.length)return k.toString(c[0]).substr(a);
f=k.toNumber(c[2]);if(isNaN(f))return"";0>f&&(f=0);return k.toString(c[0]).substr(a,f)})};a.find=function(a,e){return f(a,e,function(a,f,c){k.pcCheck(c,2,3);a=0;if(2<c.length){a=k.toNumber(k.defaultUndefined(c[2],0));if(isNaN(a))return-1;0>a&&(a=0)}return k.toString(c[1]).indexOf(k.toString(c[0]),a)})};a.left=function(a,e){return f(a,e,function(a,f,c){k.pcCheck(c,2,2);a=k.toNumber(c[1]);if(isNaN(a))return"";0>a&&(a=0);return k.toString(c[0]).substr(0,a)})};a.right=function(a,e){return f(a,e,function(a,
f,c){k.pcCheck(c,2,2);a=k.toNumber(c[1]);if(isNaN(a))return"";0>a&&(a=0);return k.toString(c[0]).substr(-1*a,a)})};a.split=function(a,e){return f(a,e,function(a,f,c){k.pcCheck(c,2,4);a=k.toNumber(k.defaultUndefined(c[2],-1));f=k.toBoolean(k.defaultUndefined(c[3],!1));-1===a||null===a||!0===f?c=k.toString(c[0]).split(k.toString(c[1])):(isNaN(a)&&(a=-1),-1>a&&(a=-1),c=k.toString(c[0]).split(k.toString(c[1]),a));if(!1===f)return c;f=[];for(var e=0;e<c.length&&!(-1!==a&&f.length>=a);e++)""!==c[e]&&void 0!==
c[e]&&f.push(c[e]);return f})};a.text=function(a,e){return f(a,e,function(a,f,c){k.pcCheck(c,1,2);return k.toStringExplicit(c[0],c[1])})};a.concatenate=function(a,e){return f(a,e,function(a,f,c){a=[];if(1>c.length)return"";if(k.isArray(c[0])){f=k.defaultUndefined(c[2],"");for(var e=0;e<c[0].length;e++)a[e]=k.toStringExplicit(c[0][e],f);return 1<c.length?a.join(c[1]):a.join("")}if(k.isImmutableArray(c[0])){f=k.defaultUndefined(c[2],"");for(e=0;e<c[0].length();e++)a[e]=k.toStringExplicit(c[0].get(e),
f);return 1<c.length?a.join(c[1]):a.join("")}for(e=0;e<c.length;e++)a[e]=k.toStringExplicit(c[e]);return a.join("")})};a.reverse=function(a,e){return f(a,e,function(a,f,c){k.pcCheck(c,1,1);if(k.isArray(c[0]))return a=c[0].slice(0),a.reverse(),a;if(k.isImmutableArray(c[0]))return a=c[0].toArray().slice(0),a.reverse(),a;throw Error("Invalid Parameter");})};a.replace=function(a,e){return f(a,e,function(a,f,c){k.pcCheck(c,3,4);a=k.toString(c[0]);f=k.toString(c[1]);var e=k.toString(c[2]);return(4===c.length?
k.toBoolean(c[3]):1)?k.multiReplace(a,f,e):a.replace(f,e)})};a.schema=function(a,e){return f(a,e,function(a,f,c){if(c[0]instanceof m)return(a=c[0].schema())?u.convertObjectToArcadeDictionary(a):null;throw Error("Invalid Parameter");})};a.subtypes=function(a,e){return f(a,e,function(a,f,c){k.pcCheck(c,1,1);if(c[0]instanceof m)return(a=c[0].subtypes())?u.convertObjectToArcadeDictionary(a):null;throw Error("Invalid Parameter");})};a.subtypecode=function(a,e){return f(a,e,function(a,f,c){k.pcCheck(c,
1,1);if(c[0]instanceof m){f=c[0].subtypes();if(!f)return null;if(f.subtypeField&&c[0].hasField(f.subtypeField))for(c=c[0].field(f.subtypeField),a=0,f=f.subtypes;a<f.length;a++){var e=f[a];if(e.code===c)return e.code}return null}throw Error("Invalid Parameter");})};a.subtypename=function(a,e){return f(a,e,function(a,f,c){k.pcCheck(c,1,1);if(c[0]instanceof m){f=c[0].subtypes();if(!f)return"";if(f.subtypeField&&c[0].hasField(f.subtypeField))for(c=c[0].field(f.subtypeField),a=0,f=f.subtypes;a<f.length;a++){var e=
f[a];if(e.code===c)return e.name}return""}throw Error("Invalid Parameter");})};a.domain=function(a,e){return f(a,e,function(a,f,c){k.pcCheck(c,2,3);if(c[0]instanceof m)return(a=c[0].fullDomain(k.toString(c[1]),void 0===c[2]?void 0:k.toNumber(c[2])))&&a.domain?"coded-value"===a.domain.type||"codedValue"===a.domain.type?u.convertObjectToArcadeDictionary({type:"codedValue",name:a.domain.name,dataType:h.layerFieldEsriConstants[a.field.type],codedValues:a.domain.codedValues.map(function(a){return{name:a.name,
code:a.code}})}):u.convertObjectToArcadeDictionary({type:"range",name:a.domain.name,dataType:h.layerFieldEsriConstants[a.field.type],min:a.domain.min,max:a.domain.max}):null;throw Error("Invalid Parameter");})};a.domainname=function(a,e){return f(a,e,function(a,f,c){k.pcCheck(c,2,4);if(c[0]instanceof m)return c[0].domainValueLookup(k.toString(c[1]),c[2],void 0===c[3]?void 0:k.toNumber(c[3]));throw Error("Invalid Parameter");})};a.domaincode=function(a,e){return f(a,e,function(a,f,c){k.pcCheck(c,2,
4);if(c[0]instanceof m)return c[0].domainCodeLookup(k.toString(c[1]),c[2],void 0===c[3]?void 0:k.toNumber(c[3]));throw Error("Invalid Parameter");})};a.urlencode=function(a,e){return f(a,e,function(a,f,c){k.pcCheck(c,1,1);if(null===c[0])return"";if(c[0]instanceof u){a="";f=0;for(var e=c[0].keys();f<e.length;f++){var g=e[f],h=c[0].field(g);""!==a&&(a+="\x26");a=null===h?a+(encodeURIComponent(g)+"\x3d"):a+(encodeURIComponent(g)+"\x3d"+encodeURIComponent(h))}return a}return encodeURIComponent(k.toString(c[0]))})}}})},
"esri/views/2d/layers/features/support/FeatureSetReader":function(){define("require exports ../../../../../geometry ../../../../../layers/graphics/centroid ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/graphics/OptimizedGeometry".split(" "),function(v,a,l,u,m,k){Object.defineProperty(a,"__esModule",{value:!0});a.FeatureSetReader=void 0;var h=0;v=function(){function a(a){this.type="FeatureSetReader";this._ty=this._tx=this.instance=0;this._xmin=-1;this._ymax=this._ymin=
this._xmax=0;this._joined=[];this.instance=a}a.createInstance=function(){h++;return h=65535<h?0:h};Object.defineProperty(a.prototype,"_hasFilter",{get:function(){return-1!==this._xmin},enumerable:!1,configurable:!0});a.prototype.getQuantizationTransform=function(){throw Error("Unable to find transform for featureSet");};a.prototype.getStorage=function(){return this._storage};a.prototype.getComputedNumeric=function(a){return this.getComputedNumericAtIndex(0)};a.prototype.setComputedNumeric=function(a,
e){return this.setComputedNumericAtIndex(e,0)};a.prototype.getComputedString=function(a){return this.getComputedStringAtIndex(0)};a.prototype.setComputedString=function(a,e){return this.setComputedStringAtIndex(0,e)};a.prototype.getComputedNumericAtIndex=function(a){return this._storage.getComputedNumericAtIndex(this.getDisplayId(),a)};a.prototype.setComputedNumericAtIndex=function(a,e){this._storage.setComputedNumericAtIndex(this.getDisplayId(),a,e)};a.prototype.getComputedStringAtIndex=function(a){return this._storage.getComputedStringAtIndex(this.getDisplayId(),
a)};a.prototype.setComputedStringAtIndex=function(a,e){return this._storage.setComputedStringAtIndex(this.getDisplayId(),a,e)};a.prototype.transform=function(a,e){var f=this.copy();f._tx=a;f._ty=e;return f};a.prototype.extent=function(a,e,h,k){var f=this.copy();f._xmin=a;f._xmax=h;f._ymin=e;f._ymax=k;return f};a.prototype.hasFilter=function(){return this._hasFilter};a.prototype.readAttribute=function(a,e){void 0===e&&(e=!1);var f=this._readAttribute(a,e);if(void 0!==f)return f;for(var f=0,g=this._joined;f<
g.length;f++){var h=g[f];h.setIndex(this.getIndex());h=h._readAttribute(a,e);if(void 0!==h)return h}};a.prototype.readAttributes=function(){return this._readAttributes()};a.prototype.joinAttributes=function(a){this._joined.push(a)};a.prototype.readArcadeFeature=function(){return this};a.prototype.geometry=function(){var a=this.readHydratedGeometry(),a=m.convertToGeometry(a,this.geometryType,this.hasZ,this.hasM),a=l.fromJSON(a);a.spatialReference=this._arcadeSpatialReference;return a};a.prototype.field=
function(a){return this.readAttribute(a,!0)};a.prototype.hasField=function(a){return!0};a.prototype.setField=function(a,e){};a.prototype.keys=function(){return[]};a.prototype.castToText=function(){return""};a.prototype._computeCentroid=function(){if("esriGeometryPolygon"!==this.geometryType)return null;var a=this.readUnquantizedGeometry();if(!a||a.hasIndeterminateRingOrder)return null;var e=this.getQuantizationTransform();return u.getCentroidOptimizedGeometry(new k.default,a,this.hasM,this.hasZ,e)};
a.prototype.copyInto=function(a){a._storage=this._storage;a._arcadeSpatialReference=this._arcadeSpatialReference;a._joined=this._joined;a._tx=this._tx;a._ty=this._ty;a._xmin=this._xmin;a._xmax=this._xmax;a._ymin=this._ymin;a._ymax=this._ymax};return a}();a.FeatureSetReader=v})},"esri/layers/graphics/centroid":function(){define(["require","exports"],function(v,a){function l(a,k,h,e,f,g,l){void 0===l&&(l=1);g=f?g?4:3:g?3:2;var m=h,n=h+g,c=0,p=0,u=h=0,v=0,T=0;for(--e;T<e;T++,m+=g,n+=g){var V=k[m],A=
k[m+1],b=k[m+2],q=k[n],d=k[n+1],I=k[n+2],z=V*d-q*A,u=u+z,c=c+(V+q)*z,p=p+(A+d)*z;f&&(z=V*I-q*b,h+=(b+I)*z,v+=z);V<a[0]&&(a[0]=V);V>a[1]&&(a[1]=V);A<a[2]&&(a[2]=A);A>a[3]&&(a[3]=A);f&&(b<a[4]&&(a[4]=b),b>a[5]&&(a[5]=b))}0<u*l&&(u*=-1);0<v*l&&(v*=-1);if(!u)return null;a=[c,p,.5*u];f&&(a[3]=h,a[4]=.5*v);return a}function u(a,k,h,e,f){f=e?f?4:3:f?3:2;for(var g=k,m=k+f,l=0,n=0,c=0,u=0,v=0,L=h-1;v<L;v++,g+=f,m+=f){var T=a[g],V=a[g+1],A=a[g+2],b=a[m],q=a[m+1],d=a[m+2],I;if(e){I=b-T;var z=q-V,P=d-A;I=Math.sqrt(I*
I+z*z+P*P)}else I=b-T,z=q-V,I=Math.sqrt(I*I+z*z);I&&(l+=I,e?(T=[T+.5*(b-T),V+.5*(q-V),A+.5*(d-A)],n+=I*T[0],c+=I*T[1],u+=I*T[2]):(T=[T+.5*(b-T),V+.5*(q-V)],n+=I*T[0],c+=I*T[1]))}return 0<l?e?[n/l,c/l,u/l]:[n/l,c/l]:0<h?e?[a[k],a[k+1],a[k+2]]:[a[k],a[k+1]]:null}Object.defineProperty(a,"__esModule",{value:!0});a.lineCentroid=a.getCentroidOptimizedGeometry=void 0;a.getCentroidOptimizedGeometry=function(a,k,h,e,f){if(!k||!k.lengths.length)return null;var g="upperLeft"===(null===f||void 0===f?void 0:f.originPosition)?
-1:1;a.lengths.length&&(a.lengths.length=0);a.coords.length&&(a.coords.length=0);f=a.coords;for(var m=[],v=h?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],n=k.lengths,c=k.coords,C=h?e?4:3:e?3:2,F=0,L=0;L<n.length;L++){var T=n[L],V=l(v,c,F,T,h,e,g);V&&m.push(V);F+=T*C}m.sort(function(a,b){var c=
g*a[2]-g*b[2];0===c&&h&&(c=a[4]-b[4]);return c});m.length&&(C=6*m[0][2],f[0]=m[0][0]/C,f[1]=m[0][1]/C,h&&(C=6*m[0][4],f[2]=0!==C?m[0][3]/C:0),f[0]<v[0]||f[0]>v[1]||f[1]<v[2]||f[1]>v[3]||h&&(f[2]<v[4]||f[2]>v[5]))&&(f.length=0);if(!f.length)if(k=k.lengths[0]?u(c,0,n[0],h,e):null)f[0]=k[0],f[1]=k[1],h&&2<k.length&&(f[2]=k[2]);else return null;return a};a.lineCentroid=u})},"esri/arcade/arcadeRuntime":function(){define("require exports ./ArcadePortal ./Attachment ./Dictionary ./Feature ./FunctionWrapper ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/SpatialReference".split(" "),
function(v,a,l,u,m,k,h,e,f,g,p,y,n,c,C,F,L,T,V,A,b,q,d,I){function z(a,b){for(var c=[],d=0;d<b.arguments.length;d++)c.push(K(a,b.arguments[d]));return c}function P(a,b,c){try{return c(a,b,z(a,b))}catch(ga){throw ga;}}function K(a,b){try{switch(b.type){case "EmptyStatement":return g.voidOperation;case "VariableDeclarator":var c=null===b.init?null:K(a,b.init);c===g.voidOperation&&(c=null);if("Identifier"!==b.id.type)throw Error("Can only assign a regular variable");var d=b.id.name.toLowerCase();null!==
a.localScope?a.localScope[d]={value:c,valueset:!0,node:b.init}:a.globalScope[d]={value:c,valueset:!0,node:b.init};return g.voidOperation;case "VariableDeclaration":for(var e=0;e<b.declarations.length;e++)K(a,b.declarations[e]);return g.voidOperation;case "BlockStatement":var f;a:{for(var n=g.voidOperation,e=0;e<b.body.length;e++)if(n=K(a,b.body[e]),n instanceof g.ReturnResult||n===g.breakResult||n===g.continueResult){f=n;break a}f=n}return f;case "FunctionDeclaration":var l=b.id.name.toLowerCase();
a.globalScope[l]={valueset:!0,node:null,value:new h(b,a)};return g.voidOperation;case "ReturnStatement":var q;if(null===b.argument)q=new g.ReturnResult(g.voidOperation);else{var J=K(a,b.argument);q=new g.ReturnResult(J)}return q;case "IfStatement":var E;if("AssignmentExpression"===b.test.type||"UpdateExpression"===b.test.type)throw Error(p.nodeErrorMessage(b.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var u=K(a,b.test);if(!0===u)E=K(a,b.consequent);else if(!1===u)E=null!==b.alternate?K(a,
b.alternate):g.voidOperation;else throw Error(p.nodeErrorMessage(b,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));return E;case "ExpressionStatement":var v;if("AssignmentExpression"===b.expression.type||"UpdateExpression"===b.expression.type)v=K(a,b.expression);else{var C=K(a,b.expression);v=C===g.voidOperation?g.voidOperation:new g.ImplicitResult(C)}return v;case "AssignmentExpression":var y;var z=K(a,b.right),e=null,w="";if("MemberExpression"===b.left.type){e=K(a,b.left.object);!0===b.left.computed?
w=K(a,b.left.property):"Identifier"===b.left.property.type&&(w=b.left.property.name);if(g.isArray(e))if(g.isNumber(w)){0>w&&(w=e.length+w);if(0>w||w>e.length)throw Error("Assignment outside of array bounds");if(w===e.length&&"\x3d"!==b.operator)throw Error("Invalid Parameter");e[w]=S(z,b.operator,e[w],b)}else throw Error("Invalid Parameter");else if(e instanceof m){if(!1===g.isString(w))throw Error("Dictionary accessor must be a string");if(!0===e.hasField(w))e.setField(w,S(z,b.operator,e.field(w),
b));else{if("\x3d"!==b.operator)throw Error("Invalid Parameter");e.setField(w,S(z,b.operator,null,b))}}else if(e instanceof k){if(!1===g.isString(w))throw Error("Feature accessor must be a string");if(!0===e.hasField(w))e.setField(w,S(z,b.operator,e.field(w),b));else{if("\x3d"!==b.operator)throw Error("Invalid Parameter");e.setField(w,S(z,b.operator,null,b))}}else{if(g.isImmutableArray(e))throw Error("Array is Immutable");throw Error("Invalid Parameter");}y=g.voidOperation}else if(e=b.left.name.toLowerCase(),
null!==a.localScope&&void 0!==a.localScope[e])a.localScope[e]={value:S(z,b.operator,a.localScope[e].value,b),valueset:!0,node:b.right},y=g.voidOperation;else if(void 0!==a.globalScope[e])a.globalScope[e]={value:S(z,b.operator,a.globalScope[e].value,b),valueset:!0,node:b.right},y=g.voidOperation;else throw Error("Variable not recognised");return y;case "UpdateExpression":var F;var A,e=null,w="";if("MemberExpression"===b.argument.type){e=K(a,b.argument.object);!0===b.argument.computed?w=K(a,b.argument.property):
"Identifier"===b.argument.property.type&&(w=b.argument.property.name);if(g.isArray(e))if(g.isNumber(w)){0>w&&(w=e.length+w);if(0>w||w>=e.length)throw Error("Assignment outside of array bounds");A=g.toNumber(e[w]);e[w]="++"===b.operator?A+1:A-1}else throw Error("Invalid Parameter");else if(e instanceof m){if(!1===g.isString(w))throw Error("Dictionary accessor must be a string");if(!0===e.hasField(w))A=g.toNumber(e.field(w)),e.setField(w,"++"===b.operator?A+1:A-1);else throw Error("Invalid Parameter");
}else if(e instanceof k){if(!1===g.isString(w))throw Error("Feature accessor must be a string");if(!0===e.hasField(w))A=g.toNumber(e.field(w)),e.setField(w,"++"===b.operator?A+1:A-1);else throw Error("Invalid Parameter");}else{if(g.isImmutableArray(e))throw Error("Array is Immutable");throw Error("Invalid Parameter");}F=!1===b.prefix?A:"++"===b.operator?A+1:A-1}else{e="Identifier"===b.argument.type?b.argument.name.toLowerCase():"";if(!e)throw Error("Invalid identifier");if(null!==a.localScope&&void 0!==
a.localScope[e])A=g.toNumber(a.localScope[e].value),a.localScope[e]={value:"++"===b.operator?A+1:A-1,valueset:!0,node:b},F=!1===b.prefix?A:"++"===b.operator?A+1:A-1;else if(void 0!==a.globalScope[e])A=g.toNumber(a.globalScope[e].value),a.globalScope[e]={value:"++"===b.operator?A+1:A-1,valueset:!0,node:b},F=!1===b.prefix?A:"++"===b.operator?A+1:A-1;else throw Error("Variable not recognised");}return F;case "BreakStatement":return g.breakResult;case "ContinueStatement":return g.continueResult;case "TemplateElement":return b.value?
b.value.cooked:"";case "TemplateLiteral":var I="",L=0;y=0;for(e=b.quasis;y<e.length;y++)if(w=e[y],I+=w.value?w.value.cooked:"",!1===w.tail){var M=b.expressions[L]?g.toString(K(a,b.expressions[L])):"",I=I+M;L++}return I;case "ForStatement":null!==b.init&&K(a,b.init);L={testResult:!0,lastAction:g.voidOperation};do b:{e=a;w=b;M=L;if(null!==w.test){M.testResult=K(e,w.test);if(!1===M.testResult)break b;if(!0!==M.testResult)throw Error(p.nodeErrorMessage(w,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));
}M.lastAction=K(e,w.body);M.lastAction===g.breakResult?M.testResult=!1:M.lastAction instanceof g.ReturnResult?M.testResult=!1:null!==w.update&&K(e,w.update)}while(!0===L.testResult);I=L.lastAction instanceof g.ReturnResult?L.lastAction:g.voidOperation;return I;case "ForInStatement":return O(a,b);case "Identifier":return pa(a,b);case "MemberExpression":return Y(a,b);case "Literal":return b.value;case "CallExpression":return sa(a,b);case "UnaryExpression":return na(a,b);case "BinaryExpression":return ra(a,
b);case "LogicalExpression":return U(a,b);case "ConditionalExpression":throw Error(p.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{for(e=[],w=0;w<b.elements.length;w++){var P=K(a,b.elements[w]);if(g.isFunctionParameter(P))throw Error(p.nodeErrorMessage(b,"RUNTIME","FUNCTIONCONTEXTILLEGAL"));P===g.voidOperation?e.push(null):e.push(P)}}catch(Ca){throw Ca;}return e;case "ObjectExpression":e={};for(w=0;w<b.properties.length;w++){var Q=K(a,b.properties[w]);if(g.isFunctionParameter(Q.value))throw Error("Illegal Argument");
if(!1===g.isString(Q.key))throw Error("Illegal Argument");e[Q.key.toString()]=Q.value===g.voidOperation?null:Q.value}var T=new m(e);T.immutable=!1;return T;case "Property":return{key:"Identifier"===b.key.type?b.key.name:K(a,b.key),value:K(a,b.value)};default:throw Error(p.nodeErrorMessage(b,"RUNTIME","UNREOGNISED"));}}catch(Ca){throw Ca;}}function O(a,b){var c=K(a,b.right);"VariableDeclaration"===b.left.type&&K(a,b.left);var d=null,e="";if("VariableDeclaration"===b.left.type){var f=b.left.declarations[0].id;
"Identifier"===f.type&&(e=f.name)}else"Identifier"===b.left.type&&(e=b.left.name);if(!e)throw Error(p.nodeErrorMessage(b,"RUNTIME","INVALIDVARIABLE"));e=e.toLowerCase();null!==a.localScope&&void 0!==a.localScope[e]&&(d=a.localScope[e]);null===d&&void 0!==a.globalScope[e]&&(d=a.globalScope[e]);if(null===d)throw Error(p.nodeErrorMessage(b,"RUNTIME","VARIABLENOTDECLARED"));if(g.isArray(c)||g.isString(c)){c=c.length;for(f=0;f<c;f++){d.value=f;e=K(a,b.body);if(e===g.breakResult)break;if(e instanceof g.ReturnResult)return e}return g.voidOperation}if(g.isImmutableArray(c)){for(f=
0;f<c.length();f++){d.value=f;e=K(a,b.body);if(e===g.breakResult)break;if(e instanceof g.ReturnResult)return e}return g.voidOperation}if(c instanceof m||c instanceof k)for(c=c.keys(),f=0;f<c.length;f++){d.value=c[f];e=K(a,b.body);if(e===g.breakResult)break;if(e instanceof g.ReturnResult)return e}else return g.voidOperation}function S(a,b,c,d){switch(b){case "\x3d":return a===g.voidOperation?null:a;case "/\x3d":return g.toNumber(c)/g.toNumber(a);case "*\x3d":return g.toNumber(c)*g.toNumber(a);case "-\x3d":return g.toNumber(c)-
g.toNumber(a);case "+\x3d":return g.isString(c)||g.isString(a)?g.toString(c)+g.toString(a):g.toNumber(c)+g.toNumber(a);case "%\x3d":return g.toNumber(c)%g.toNumber(a);default:throw Error(p.nodeErrorMessage(d,"RUNTIME","OPERATORNOTRECOGNISED"));}}function W(a,b,c){b=b.toLowerCase();switch(b){case "hasz":return a=a.hasZ,void 0===a?!1:a;case "hasm":return a=a.hasM,void 0===a?!1:a;case "spatialreference":return b=a.spatialReference._arcadeCacheId,void 0===b&&(c=!0,Object.freeze&&Object.isFrozen(a.spatialReference)&&
(c=!1),c&&(da++,b=a.spatialReference._arcadeCacheId=da)),a=new m({wkt:a.spatialReference.wkt,wkid:a.spatialReference.wkid}),void 0!==b&&(a._arcadeCacheId="SPREF"+b.toString()),a}switch(a.type){case "extent":switch(b){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return a=a[b],void 0!==a?a:null;case "type":return"Extent"}break;case "polygon":switch(b){case "rings":return b=a.cache._arcadeCacheId,void 0===b&&(da++,b=da,a.cache._arcadeCacheId=b),a=new e(a.rings,
a.spatialReference,!0===a.hasZ,!0===a.hasM,b);case "type":return"Polygon"}break;case "point":switch(b){case "x":case "y":case "z":case "m":return void 0!==a[b]?a[b]:null;case "type":return"Point"}break;case "polyline":switch(b){case "paths":return b=a.cache._arcadeCacheId,void 0===b&&(da++,b=da,a.cache._arcadeCacheId=b),a=new e(a.paths,a.spatialReference,!0===a.hasZ,!0===a.hasM,b);case "type":return"Polyline"}break;case "multipoint":switch(b){case "points":return b=a.cache._arcadeCacheId,void 0===
b&&(da++,b=da,a.cache._arcadeCacheId=b),a=new f(a.points,a.spatialReference,!0===a.hasZ,!0===a.hasM,b,1);case "type":return"Multipoint"}}throw Error(p.nodeErrorMessage(c,"RUNTIME","PROPERTYNOTFOUND"));}function Y(a,b){try{var c=K(a,b.object);if(null===c)throw Error(p.nodeErrorMessage(b,"RUNTIME","NOTFOUND"));if(!1===b.computed){if("Identifier"===b.property.type){if(c instanceof m||c instanceof k)return c.field(b.property.name);if(c instanceof V)return W(c,b.property.name,b)}throw Error(p.nodeErrorMessage(b,
"RUNTIME","INVALIDTYPE"));}var d=K(a,b.property);if(c instanceof m||c instanceof k){if(g.isString(d))return c.field(d);throw Error(p.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}if(c instanceof V){if(g.isString(d))return W(c,d,b);throw Error(p.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}if(g.isArray(c)){if(g.isNumber(d)&&isFinite(d)&&Math.floor(d)===d){0>d&&(d=c.length+d);if(d>=c.length||0>d)throw Error(p.nodeErrorMessage(b,"RUNTIME","OUTOFBOUNDS"));return c[d]}throw Error(p.nodeErrorMessage(b,
"RUNTIME","INVALIDTYPE"));}if(g.isString(c)){if(g.isNumber(d)&&isFinite(d)&&Math.floor(d)===d){0>d&&(d=c.length+d);if(d>=c.length||0>d)throw Error(p.nodeErrorMessage(b,"RUNTIME","OUTOFBOUNDS"));return c[d]}throw Error(p.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}if(g.isImmutableArray(c)&&g.isNumber(d)&&isFinite(d)&&Math.floor(d)===d){0>d&&(d=c.length()+d);if(d>=c.length()||0>d)throw Error(p.nodeErrorMessage(b,"RUNTIME","OUTOFBOUNDS"));return c.get(d)}throw Error(p.nodeErrorMessage(b,"RUNTIME",
"INVALIDTYPE"));}catch(R){throw R;}}function na(a,b){try{var c=K(a,b.argument);if(g.isBoolean(c)){if("!"===b.operator)return!c;if("-"===b.operator)return-1*g.toNumber(c);if("+"===b.operator)return 1*g.toNumber(c);if("~"===b.operator)return~g.toNumber(c);throw Error(p.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("~"===b.operator)return~g.toNumber(c);if("-"===b.operator)return-1*g.toNumber(c);if("+"===b.operator)return 1*g.toNumber(c);throw Error(p.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));
}catch(ga){throw ga;}}function ra(a,b){try{var c=[K(a,b.left),K(a,b.right)],d=c[0],e=c[1];switch(b.operator){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return g.binaryOperator(g.toNumber(d),g.toNumber(e),b.operator);case "\x3d\x3d":return g.equalityTest(d,e);case "!\x3d":return!g.equalityTest(d,e);case "\x3c":return g.greaterThanLessThan(d,e,b.operator);case "\x3e":return g.greaterThanLessThan(d,e,b.operator);case "\x3c\x3d":return g.greaterThanLessThan(d,e,
b.operator);case "\x3e\x3d":return g.greaterThanLessThan(d,e,b.operator);case "+":return g.isString(d)||g.isString(e)?g.toString(d)+g.toString(e):g.toNumber(d)+g.toNumber(e);case "-":return g.toNumber(d)-g.toNumber(e);case "*":return g.toNumber(d)*g.toNumber(e);case "/":return g.toNumber(d)/g.toNumber(e);case "%":return g.toNumber(d)%g.toNumber(e);default:throw Error(p.nodeErrorMessage(b,"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(ua){throw ua;}}function U(a,b){try{if("AssignmentExpression"===b.left.type||
"UpdateExpression"===b.left.type)throw Error(p.nodeErrorMessage(b.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===b.right.type||"UpdateExpression"===b.right.type)throw Error(p.nodeErrorMessage(b.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var c=K(a,b.left);if(g.isBoolean(c))switch(b.operator){case "||":if(!0===c)return c;var d=K(a,b.right);if(g.isBoolean(d))return d;throw Error(p.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));case "\x26\x26":if(!1===c)return c;
d=K(a,b.right);if(g.isBoolean(d))return d;throw Error(p.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));default:throw Error(p.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));}throw Error(p.nodeErrorMessage(b,"RUNTIME","ONLYBOOLEAN"));}catch(R){throw R;}}function pa(a,b){var c;try{var d=b.name.toLowerCase();if(null!==a.localScope&&void 0!==a.localScope[d]){c=a.localScope[d];if(!0===c.valueset)return c.value;c.value=K(a,c.node);c.valueset=!0;return c.value}if(void 0!==a.globalScope[d]){c=a.globalScope[d];
if(!0===c.valueset)return c.value;c.value=K(a,c.node);c.valueset=!0;return c.value}throw Error(p.nodeErrorMessage(b,"RUNTIME","VARIABLENOTFOUND"));}catch(R){throw R;}}function sa(a,b){try{if("Identifier"!==b.callee.type)throw Error(p.nodeErrorMessage(b,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==a.localScope&&void 0!==a.localScope[b.callee.name.toLowerCase()]){var c=a.localScope[b.callee.name.toLowerCase()];if(c.value instanceof g.NativeFunction)return c.value.fn(a,b);if(c.value instanceof h)return w(a,
b,c.value.definition);throw Error(p.nodeErrorMessage(b,"RUNTIME","NOTAFUNCTION"));}if(void 0!==a.globalScope[b.callee.name.toLowerCase()]){c=a.globalScope[b.callee.name.toLowerCase()];if(c.value instanceof g.NativeFunction)return c.value.fn(a,b);if(c.value instanceof h)return w(a,b,c.value.definition);throw Error(p.nodeErrorMessage(b,"RUNTIME","NOTAFUNCTION"));}throw Error(p.nodeErrorMessage(b,"RUNTIME","NOTFOUND"));}catch(ga){throw ga;}}function Q(a){return null==a?"":g.isArray(a)||g.isImmutableArray(a)?
"Array":g.isDate(a)?"Date":g.isString(a)?"String":g.isBoolean(a)?"Boolean":g.isNumber(a)?"Number":a instanceof u?"Attachment":a instanceof l?"Portal":a instanceof m?"Dictionary":a instanceof k?"Feature":a instanceof b?"Point":a instanceof q?"Polygon":a instanceof d?"Polyline":a instanceof A?"Multipoint":a instanceof T?"Extent":g.isFunctionParameter(a)?"Function":g.isFeatureSet(a)?"FeatureSet":g.isFeatureSetCollection(a)?"FeatureSetCollection":a===g.voidOperation?"":"number"===typeof a&&isNaN(a)?"Number":
"Unrecognised Type"}function ia(a,b,c,d){try{var e=K(a,b.arguments[c]);if(g.equalityTest(e,d))return K(a,b.arguments[c+1]);var f=b.arguments.length-c;return 1===f?K(a,b.arguments[c]):2===f?null:3===f?K(a,b.arguments[c+2]):ia(a,b,c+2,d)}catch(Ba){throw Ba;}}function M(a,b,c,d){try{if(!0===d)return K(a,b.arguments[c+1]);if(3===b.arguments.length-c)return K(a,b.arguments[c+2]);var e=K(a,b.arguments[c+2]);if(!1===g.isBoolean(e))throw Error("WHEN needs boolean test conditions");return M(a,b,c+2,e)}catch(ua){throw ua;
}}function ma(a,b){var c=a.length,d=Math.floor(c/2);if(0===c)return[];if(1===c)return[a[0]];var e=ma(a.slice(0,d),b);a=ma(a.slice(d,c),b);for(c=[];0<e.length||0<a.length;)0<e.length&&0<a.length?(d=b(e[0],a[0]),isNaN(d)&&(d=0),0>=d?(c.push(e[0]),e=e.slice(1)):(c.push(a[0]),a=a.slice(1))):0<e.length?(c.push(e[0]),e=e.slice(1)):0<a.length&&(c.push(a[0]),a=a.slice(1));return c}function la(a,b,c){try{var d=a.body;if(c.length!==a.params.length)throw Error("Invalid Parameter calls to function.");for(var e=
0;e<c.length;e++)b.localScope[a.params[e].name.toLowerCase()]={value:c[e],valueset:!0,node:null};var f=K(b,d);if(f instanceof g.ReturnResult)return f.value;if(f===g.breakResult)throw Error("Cannot Break from a Function");if(f===g.continueResult)throw Error("Cannot Continue from a Function");return f instanceof g.ImplicitResult?f.value:f}catch(Ba){throw Ba;}}function w(a,b,c){return P(a,b,function(b,d,e){b={spatialReference:a.spatialReference,globalScope:a.globalScope,depthCounter:a.depthCounter+1,
console:a.console,lrucache:a.lrucache,localScope:{}};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");return la(c,b,e)})}function ja(a){return function(){var b={spatialReference:a.context.spatialReference,console:a.context.console,lrucache:a.context.lrucache,localScope:{},depthCounter:a.context.depthCounter+1,globalScope:a.context.globalScope};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");return la(a.definition,b,arguments)}}function ta(a){console.log(a)}Object.defineProperty(a,
"__esModule",{value:!0});a.findFunctionCalls=a.referencesFunction=a.referencesMember=a.validateScript=a.extractFieldLiterals=a.executeScript=a.extend=a.functionHelper=void 0;var da=0,X={};y.registerFunctions(X,P);L.registerFunctions(X,P);C.registerFunctions(X,P);n.registerFunctions(X,P);F.registerFunctions(X,P);c.registerFunctions(X,P);X["typeof"]=function(a,b){return P(a,b,function(a,b,c){g.pcCheck(c,1,1);a=Q(c[0]);if("Unrecognised Type"===a)throw Error("Unrecognised Type");return a})};X.iif=function(a,
b){try{g.pcCheck(null===b.arguments?[]:b.arguments,3,3);var c=K(a,b.arguments[0]);if(!1===g.isBoolean(c))throw Error("IF Function must have a boolean test condition");var d=K(a,b.arguments[1]),e=K(a,b.arguments[2]);return!0===c?d:e}catch(ua){throw ua;}};X.decode=function(a,b){try{if(2>b.arguments.length)throw Error("Missing Parameters");if(2===b.arguments.length)return K(a,b.arguments[1]);if(0===(b.arguments.length-1)%2)throw Error("Must have a default value result.");var c=K(a,b.arguments[0]);return ia(a,
b,1,c)}catch(ga){throw ga;}};X.when=function(a,b){try{if(3>b.arguments.length)throw Error("Missing Parameters");if(0===b.arguments.length%2)throw Error("Must have a default value result.");var c=K(a,b.arguments[0]);if(!1===g.isBoolean(c))throw Error("WHEN needs boolean test conditions");return M(a,b,0,c)}catch(ga){throw ga;}};X.top=function(a,b){return P(a,b,function(a,b,c){g.pcCheck(c,2,2);if(g.isArray(c[0]))return g.toNumber(c[1])>=c[0].length?c[0].slice(0):c[0].slice(0,g.toNumber(c[1]));if(g.isImmutableArray(c[0]))return g.toNumber(c[1])>=
c[0].length()?c[0].slice(0):c[0].slice(0,g.toNumber(c[1]));throw Error("Top cannot accept this parameter type");})};X.first=function(a,b){return P(a,b,function(a,b,c){g.pcCheck(c,1,1);return g.isArray(c[0])?0===c[0].length?null:c[0][0]:g.isImmutableArray(c[0])?0===c[0].length()?null:c[0].get(0):null})};X.sort=function(a,b){return P(a,b,function(a,b,c){g.pcCheck(c,1,2);a=c[0];g.isImmutableArray(a)&&(a=a.toArray());if(!1===g.isArray(a))throw Error("Illegal Argument");if(1<c.length){if(!1===g.isFunctionParameter(c[1]))throw Error("Illegal Argument");
var d=ja(c[1]);return a=ma(a,function(a,b){return d(a,b)})}if(0===a.length)return[];c={};for(b=0;b<a.length;b++){var e=Q(a[b]);""!==e&&(c[e]=!0)}if(!0===c.Array||!0===c.Dictionary||!0===c.Feature||!0===c.Point||!0===c.Polygon||!0===c.Polyline||!0===c.Multipoint||!0===c.Extent||!0===c.Function)return a.slice(0);b=0;var e="",f;for(f in c)b++,e=f;return a=1<b||"String"===e?ma(a,function(a,b){if(null===a||void 0===a||a===g.voidOperation)return null===b||void 0===b||b===g.voidOperation?0:1;if(null===b||
void 0===b||b===g.voidOperation)return-1;a=g.toString(a);b=g.toString(b);return a<b?-1:a===b?0:1}):"Number"===e?ma(a,function(a,b){return a-b}):"Boolean"===e?ma(a,function(a,b){return a===b?0:b?-1:1}):"Date"===e?ma(a,function(a,b){return b-a}):a.slice(0)})};for(var Da in X)X[Da]={value:new g.NativeFunction(X[Da]),valueset:!0,node:null};var ka=function(){};ka.prototype=X;ka.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};ka.prototype.pi={value:Math.PI,valueset:!0,node:null};
a.functionHelper={fixSpatialReference:g.fixSpatialReference,parseArguments:z,standardFunction:P};a.extend=function(a){for(var b={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:P,evaluateIdentifier:pa,arcadeCustomFunctionHandler:ja},c=0;c<a.length;c++)a[c].registerFunctions(b);for(var d in b.functions)X[d]={value:new g.NativeFunction(b.functions[d]),valueset:!0,node:null},ka.prototype[d]=X[d];for(c=0;c<b.signatures.length;c++)p.addFunctionDeclaration(b.signatures[c],"async")};
a.executeScript=function(a,b){var c=b.spatialReference;if(null===c||void 0===c)c=new I({wkid:102100});var d=b.vars,e=b.customfunctions,f=new ka;d||(d={});e||(e={});var n=new m({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});n.immutable=!1;f.textformatting={value:n,valueset:!0,node:null};for(var l in e)f[l]={value:new g.NativeFunction(e[l]),native:!0,valueset:!0,node:null};for(l in d)f[l]=d[l]&&"esri.Graphic"===d[l].declaredClass?{value:k.createFromGraphic(d[l]),
valueset:!0,node:null}:{value:d[l],valueset:!0,node:null};a=K({spatialReference:c,globalScope:f,localScope:null,console:b.console?b.console:ta,lrucache:b.lrucache,depthCounter:1},a.body[0].body);a instanceof g.ReturnResult&&(a=a.value);a instanceof g.ImplicitResult&&(a=a.value);a===g.voidOperation&&(a=null);if(a===g.breakResult)throw Error("Cannot return BREAK");if(a===g.continueResult)throw Error("Cannot return CONTINUE");if(a instanceof h)throw Error("Cannot return FUNCTION");if(a instanceof g.NativeFunction)throw Error("Cannot return FUNCTION");
return a};a.extractFieldLiterals=function(a,b){void 0===b&&(b=!1);return p.findFieldLiterals(a)};a.validateScript=function(a,b){return p.validateScript(a,b,"simple")};a.referencesMember=function(a,b){return p.referencesMember(a,b)};a.referencesFunction=function(a,b){return p.referencesFunction(a,b)};a.findFunctionCalls=function(a){return p.findFunctionCalls(a)}})},"esri/arcade/parser":function(){define(["require","exports","./treeAnalysis","./lib/esprima"],function(v,a,l,u){Object.defineProperty(a,
"__esModule",{value:!0});a.referencesFunction=a.referencesMember=a.validateScript=a.extractFieldLiterals=a.scriptCheck=a.parseScript=void 0;a.parseScript=function(a,k){void 0===k&&(k=[]);a=u.parse("function _() { "+a+"\n}");if(null===a.body||void 0===a.body)throw Error("No formula provided.");if(0===a.body.length)throw Error("No formula provided.");if(0===a.body.length)throw Error("No formula provided.");if("BlockStatement"!==a.body[0].body.type)throw Error("Invalid formula content.");var h=l.validateLanguage(a);
if(""!==h)throw Error(h);l.findScriptDependencies(a,k);return a};a.scriptCheck=function(a,k,h,e,f){var g=[];try{var m=u.parse("function _() { "+a+"\n}",{tolerant:!0,loc:!0}),v=m.errors;if(0<v.length)for(var n=0;n<v.length;n++)g.push({line:v[n].lineNumber,character:v[n].column,reason:v[n].description});var c=l.checkScript(m,k,h,e,f);for(k=0;k<c.length;k++)g.push(c[k])}catch(C){try{"Unexpected token }"===C.description?(C.index=("function _() { "+a+"\n}").length-1,g.push({line:C.lineNumber,character:C.column,
reason:"Unexpected end of script"})):g.push({line:C.lineNumber,character:C.column,reason:C.description})}catch(F){}}return g};a.extractFieldLiterals=function(a,k){void 0===k&&(k=!1);return l.findFieldLiterals(a)};a.validateScript=function(a,k,h){return l.validateScript(a,k,h)};a.referencesMember=function(a,k){return l.referencesMember(a,k)};a.referencesFunction=function(a,k){return l.referencesFunction(a,k)}})},"esri/arcade/lib/esprima":function(){(function(v,a){"function"===typeof define&&define.amd?
define(["exports"],a):"undefined"!==typeof exports?a(exports):a(v.esprima={})})(this,function(v){function a(a,b){if(!a)throw Error("ASSERT: "+b);}function l(a){return 48<=a&&57>=a}function u(a){return 0<="0123456789abcdefABCDEF".indexOf(a)}function m(a){return 0<="01234567".indexOf(a)}function k(a){return 10===a||13===a||8232===a||8233===a}function h(a){return 65536>a?String.fromCharCode(a):String.fromCharCode(55296+(a-65536>>10))+String.fromCharCode(56320+(a-65536&1023))}function e(a){return 36===
a||95===a||65<=a&&90>=a||97<=a&&122>=a||92===a||128<=a&&Wa.NonAsciiIdentifierStart.test(h(a))}function f(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||48<=a&&57>=a||92===a||128<=a&&Wa.NonAsciiIdentifierPart.test(h(a))}function g(a){a=a.toLowerCase();switch(a.length){case 2:return"if"===a||"in"===a;case 3:return"var"===a||"for"===a;case 4:return"else"===a;case 5:return"break"===a;case 6:return"return"===a;case 8:return"function"===a||"continue"===a;default:return!1}}function p(b,c,d,e,f){a("number"===
typeof d,"Comment must have valid position");G.lastCommentStart=d;b={type:b,value:c};x.range&&(b.range=[d,e]);x.loc&&(b.loc=f);x.comments.push(b);x.attachComment&&(x.leadingComments.push(b),x.trailingComments.push(b));x.tokenize&&(b.type+="Comment",x.delegate&&(b=x.delegate(b)),x.tokens.push(b))}function y(a){var b,c,d;b=r-a;for(c={start:{line:ba,column:r-ca-a}};r<ha;)if(d=B.charCodeAt(r),++r,k(d)){Ea=!0;x.comments&&(a=B.slice(b+a,r-1),c.end={line:ba,column:r-ca-1},p("Line",a,b,r-1,c));13===d&&10===
B.charCodeAt(r)&&++r;++ba;ca=r;return}x.comments&&(a=B.slice(b+a,r),c.end={line:ba,column:r-ca},p("Line",a,b,r,c))}function n(){var a,b;Ea=!1;for(b=0===r;r<ha;)if(a=B.charCodeAt(r),32===a||9===a||11===a||12===a||160===a||5760<=a&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(a))++r;else if(k(a))Ea=!0,++r,13===a&&10===B.charCodeAt(r)&&++r,++ba,ca=r,b=!0;else if(47===a)if(a=B.charCodeAt(r+1),47===a)++r,++r,y(2),b=!0;else if(42===a){++r;++r;a:{var c=
a=void 0,d=void 0,d=void 0;x.comments&&(a=r-2,c={start:{line:ba,column:r-ca-2}});for(;r<ha;)if(d=B.charCodeAt(r),k(d))13===d&&10===B.charCodeAt(r+1)&&++r,Ea=!0,++ba,++r,ca=r;else{if(42===d&&47===B.charCodeAt(r+1)){++r;++r;x.comments&&(d=B.slice(a+2,r-2),c.end={line:ba,column:r-ca},p("Block",d,a,r,c));break a}++r}x.comments&&(c.end={line:ba,column:r-ca},d=B.slice(a+2,r),p("Block",d,a,r,c));ia()}}else break;else if(b&&45===a)if(45===B.charCodeAt(r+1)&&62===B.charCodeAt(r+2))r+=3,y(3);else break;else if(60===
a)if("!--"===B.slice(r+1,r+4))++r,++r,++r,++r,y(4);else break;else break}function c(a){var b,c,d=0;b="u"===a?4:2;for(a=0;a<b;++a)if(r<ha&&u(B[r]))c=B[r++],d=16*d+"0123456789abcdef".indexOf(c.toLowerCase());else return"";return String.fromCharCode(d)}function C(){var a,b;a=B[r];b=0;for("}"===a&&Q();r<ha;){a=B[r++];if(!u(a))break;b=16*b+"0123456789abcdef".indexOf(a.toLowerCase())}(1114111<b||"}"!==a)&&Q();return h(b)}function F(a){var b;b=B.charCodeAt(a);55296<=b&&56319>=b&&(a=B.charCodeAt(a+1),56320<=
a&&57343>=a&&(b=1024*(b-55296)+a-56320+65536));return b}function L(){var a,b,d;a=F(r);d=h(a);r+=d.length;92===a&&(117!==B.charCodeAt(r)&&Q(),++r,"{"===B[r]?(++r,b=C()):(b=c("u"),a=b.charCodeAt(0),b&&"\\"!==b&&e(a)||Q()),d=b);for(;r<ha;){a=F(r);if(!f(a))break;b=h(a);d+=b;r+=b.length;92===a&&(d=d.substr(0,d.length-1),117!==B.charCodeAt(r)&&Q(),++r,"{"===B[r]?(++r,b=C()):(b=c("u"),a=b.charCodeAt(0),b&&"\\"!==b&&f(a)||Q()),d+=b)}return d}function T(){var a,b;for(a=r++;r<ha;){b=B.charCodeAt(r);if(92===
b||55296<=b&&57343>b)return r=a,L();if(f(b))++r;else break}return B.slice(a,r)}function V(){var a,b;a=r;b=92===B.charCodeAt(r)?L():T();return{type:1===b.length?D.Identifier:g(b)?D.Keyword:"null"===b.toLowerCase()?D.NullLiteral:"true"===b.toLowerCase()||"false"===b.toLowerCase()?D.BooleanLiteral:D.Identifier,value:b,lineNumber:ba,lineStart:ca,start:a,end:r}}function A(){var a,b;a={type:D.Punctuator,value:"",lineNumber:ba,lineStart:ca,start:r,end:r};b=B[r];switch(b){case "(":x.tokenize&&(x.openParenToken=
x.tokenValues.length);++r;break;case "{":x.tokenize&&(x.openCurlyToken=x.tokenValues.length);G.curlyStack.push("{");++r;break;case ".":++r;"."===B[r]&&"."===B[r+1]&&(r+=2,b="...");break;case "}":++r;G.curlyStack.pop();break;case ")":case ";":case ",":case "[":case "]":case ":":case "?":case "~":++r;break;default:b=B.substr(r,4),"\x3e\x3e\x3e\x3d"===b?r+=4:(b=b.substr(0,3),"\x3d\x3d\x3d"===b||"!\x3d\x3d"===b||"\x3e\x3e\x3e"===b||"\x3c\x3c\x3d"===b||"\x3e\x3e\x3d"===b?r+=3:(b=b.substr(0,2),"\x26\x26"===
b||"||"===b||"\x3d\x3d"===b||"!\x3d"===b||"+\x3d"===b||"-\x3d"===b||"*\x3d"===b||"/\x3d"===b||"++"===b||"--"===b||"\x3c\x3c"===b||"\x3e\x3e"===b||"\x26\x3d"===b||"|\x3d"===b||"^\x3d"===b||"%\x3d"===b||"\x3c\x3d"===b||"\x3e\x3d"===b||"\x3d\x3e"===b?r+=2:(b=B[r],0<="\x3c\x3e\x3d!+-*%\x26|^/".indexOf(b)&&++r)))}r===a.start&&Q();a.end=r;a.value=b;return a}function b(){var b,c,d;d=B[r];a(l(d.charCodeAt(0))||"."===d,"Numeric literal must start with a decimal digit or a decimal point");c=r;b="";if("."!==
d){b=B[r++];d=B[r];if("0"===b){if("x"===d||"X"===d){++r;for(b="";r<ha&&u(B[r]);)b+=B[r++];0===b.length&&Q();e(B.charCodeAt(r))&&Q();return{type:D.NumericLiteral,value:parseInt("0x"+b,16),lineNumber:ba,lineStart:ca,start:c,end:r}}if("b"===d||"B"===d){++r;for(d="";r<ha;){b=B[r];if("0"!==b&&"1"!==b)break;d+=B[r++]}0===d.length&&Q();r<ha&&(b=B.charCodeAt(r),(e(b)||l(b))&&Q());return{type:D.NumericLiteral,value:parseInt(d,2),lineNumber:ba,lineStart:ca,start:c,end:r}}if("o"===d||"O"===d){m(d)?(d=!0,b="0"+
B[r++]):(d=!1,++r,b="");for(;r<ha&&m(B[r]);)b+=B[r++];d||0!==b.length||Q();(e(B.charCodeAt(r))||l(B.charCodeAt(r)))&&Q();return{type:D.NumericLiteral,value:parseInt(b,8),octal:d,lineNumber:ba,lineStart:ca,start:c,end:r}}}for(;l(B.charCodeAt(r));)b+=B[r++];d=B[r]}if("."===d){for(b+=B[r++];l(B.charCodeAt(r));)b+=B[r++];d=B[r]}if("e"===d||"E"===d){b+=B[r++];d=B[r];if("+"===d||"-"===d)b+=B[r++];if(l(B.charCodeAt(r)))for(;l(B.charCodeAt(r));)b+=B[r++];else Q()}e(B.charCodeAt(r))&&Q();return{type:D.NumericLiteral,
value:parseFloat(b),lineNumber:ba,lineStart:ca,start:c,end:r}}function q(){function a(a){return a&&1<a.length&&"a"<=a[0]&&"z">=a[0]}var b,c;c=x.tokenValues[x.tokenValues.length-1];b=null!==c;switch(c){case "this":case "]":b=!1;break;case ")":(b=x.tokenValues[x.openParenToken-1])&&(b=b.toLowerCase());b="if"===b||"while"===b||"for"===b||"with"===b;break;case "}":b=!1,a(x.tokenValues[x.openCurlyToken-3])?((b=x.tokenValues[x.openCurlyToken-4])&&(b=b.toLowerCase()),b=b?0>Va.indexOf(b):!1):a(x.tokenValues[x.openCurlyToken-
4])&&(b=(b=x.tokenValues[x.openCurlyToken-5])?0>Va.indexOf(b):!0)}return b?collectRegex():A()}function d(){var d,f,g;if(r>=ha)return{type:D.EOF,lineNumber:ba,lineStart:ca,start:r,end:r};g=B.charCodeAt(r);if(e(g))return g=V();if(40===g||41===g||59===g)return A();if(39===g||34===g){g="";var h,n,p=!1;h=B[r];a("'"===h||'"'===h,"String literal must starts with a quote");n=r;for(++r;r<ha;)if(f=B[r++],f===h){h="";break}else if("\\"===f)if((f=B[r++])&&k(f.charCodeAt(0)))++ba,"\r"===f&&"\n"===B[r]&&++r,ca=
r;else switch(f){case "u":case "x":if("{"===B[r])++r,g+=C();else{f=c(f);if(!f)throw Q();g+=f}break;case "n":g+="\n";break;case "r":g+="\r";break;case "t":g+="\t";break;case "b":g+="\b";break;case "f":g+="\f";break;case "v":g+="\x0B";break;case "8":case "9":g+=f;ia();break;default:if(m(f)){d=f;f="0"!==d;var t="01234567".indexOf(d);r<ha&&m(B[r])&&(f=!0,t=8*t+"01234567".indexOf(B[r++]),0<="0123".indexOf(d)&&r<ha&&m(B[r])&&(t=8*t+"01234567".indexOf(B[r++])));d=t;p=f||p;g+=String.fromCharCode(d)}else g+=
f}else if(k(f.charCodeAt(0)))break;else g+=f;""!==h&&(r=n,Q());return{type:D.StringLiteral,value:g,octal:p,lineNumber:Ja,lineStart:Ka,start:n,end:r}}if(46===g)return l(B.charCodeAt(r+1))?b():A();if(l(g))return b();if(x.tokenize&&47===g)return q();if(96===g||125===g&&"${"===G.curlyStack[G.curlyStack.length-1]){g="";var u,v,t=f=!1;n=r;d="`"===B[r];p=2;for(++r;r<ha;)if(h=B[r++],"`"===h){p=1;f=t=!0;break}else if("$"===h){if("{"===B[r]){G.curlyStack.push("${");++r;f=!0;break}g+=h}else if("\\"===h)if(h=
B[r++],k(h.charCodeAt(0)))++ba,"\r"===h&&"\n"===B[r]&&++r,ca=r;else switch(h){case "n":g+="\n";break;case "r":g+="\r";break;case "t":g+="\t";break;case "u":case "x":"{"===B[r]?(++r,g+=C()):(u=r,(v=c(h))?g+=v:(r=u,g+=h));break;case "b":g+="\b";break;case "f":g+="\f";break;case "v":g+="\v";break;default:"0"===h?(l(B.charCodeAt(r))&&U(Z.TemplateOctalLiteral),g+="\x00"):m(h)?U(Z.TemplateOctalLiteral):g+=h}else k(h.charCodeAt(0))?(++ba,"\r"===h&&"\n"===B[r]&&++r,ca=r,g+="\n"):g+=h;f||Q();d||G.curlyStack.pop();
return{type:D.Template,value:{cooked:g,raw:B.slice(n+1,r-p)},head:d,tail:t,lineNumber:ba,lineStart:ca,start:n,end:r}}return 55296<=g&&57343>g&&(g=F(r),e(g))?V():A()}function I(){var a,b,c;a={start:{line:ba,column:r-ca}};b=d();a.end={line:ba,column:r-ca};b.type!==D.EOF&&(c=B.slice(b.start,b.end),a={type:va[b.type],value:c,range:[b.start,b.end],loc:a},b.regex&&(a.regex={pattern:b.regex.pattern,flags:b.regex.flags}),x.tokenValues&&x.tokenValues.push("Punctuator"===a.type||"Keyword"===a.type?a.value:
null),x.tokenize&&(x.range||delete a.range,x.loc||delete a.loc,x.delegate&&(a=x.delegate(a))),x.tokens.push(a));return b}function z(){var a;La=!0;ya=r;Pa=ba;Sa=ca;n();a=H;qa=r;Ja=ba;Ka=ca;H="undefined"!==typeof x.tokens?I():d();La=!1;return a}function P(){La=!0;n();ya=r;Pa=ba;Sa=ca;qa=r;Ja=ba;Ka=ca;H="undefined"!==typeof x.tokens?I():d();La=!1}function K(){this.line=Ja;this.column=qa-Ka}function O(){this.start=new K;this.end=null}function S(a){this.start={line:a.lineNumber,column:a.start-a.lineStart};
this.end=null}function W(){x.range&&(this.range=[qa,0]);x.loc&&(this.loc=new O)}function Y(a){x.range&&(this.range=[a.start,0]);x.loc&&(this.loc=new S(a))}function na(a){var b,c;for(b=0;b<x.errors.length;b++)if(c=x.errors[b],c.index===a.index&&c.message===a.message)return;x.errors.push(a)}function ra(a,b,c){var d;a:{d=b-(La?ca:Sa)+1;var e=Error("Line "+a+": "+c);try{throw e;}catch(Oa){Object.create&&Object.defineProperty&&(e=Object.create(Oa),Object.defineProperty(e,"column",{value:d}))}finally{d=
e;break a}}d.lineNumber=a;d.description=c;d.index=b;return d}function U(b){var c,d;c=Array.prototype.slice.call(arguments,1);d=b.replace(/%(\d)/g,function(b,d){a(d<c.length,"Message reference must be in range");return c[d]});throw ra(Pa,ya,d);}function pa(b){var c,d;c=Array.prototype.slice.call(arguments,1);d=b.replace(/%(\d)/g,function(b,d){a(d<c.length,"Message reference must be in range");return c[d]});d=ra(ba,ya,d);if(x.errors)na(d);else throw d;}function sa(a,b){var c=b||Z.UnexpectedToken;a?
(b||(c=a.type===D.EOF?Z.UnexpectedEOS:a.type===D.Identifier?Z.UnexpectedIdentifier:a.type===D.NumericLiteral?Z.UnexpectedNumber:a.type===D.StringLiteral?Z.UnexpectedString:a.type===D.Template?Z.UnexpectedTemplate:Z.UnexpectedToken),b=a.type===D.Template?a.value.raw:a.value):b="ILLEGAL";c=c.replace("%0",b);return a&&"number"===typeof a.lineNumber?ra(a.lineNumber,a.start,c):ra(La?ba:Pa,La?r:ya,c)}function Q(a,b){throw sa(a,b);}function ia(a,b){a=sa(a,b);if(x.errors)na(a);else throw a;}function M(a){var b=
z();b.type===D.Punctuator&&b.value===a||Q(b)}function ma(){var a;x.errors?(a=H,a.type===D.Punctuator&&","===a.value?z():a.type===D.Punctuator&&";"===a.value?(z(),ia(a)):ia(a,Z.UnexpectedToken)):M(",")}function la(a){var b=z();b.type===D.Keyword&&b.value.toLowerCase()===a.toLowerCase()||Q(b)}function w(a){return H.type===D.Punctuator&&H.value===a}function ja(a){return H.type===D.Keyword&&H.value.toLowerCase()===a.toLowerCase()}function ta(){59===B.charCodeAt(qa)||w(";")?z():Ea||(ya=qa,Pa=Ja,Sa=Ka,
H.type===D.EOF||w("}")||Q(H))}function da(a){var b=fa,c=ea,d=wa;ea=fa=!0;wa=null;a=a();null!==wa&&Q(wa);fa=b;ea=c;wa=d;return a}function X(a){var b=fa,c=ea,d=wa;ea=fa=!0;wa=null;a=a();fa=fa&&b;ea=ea&&c;wa=d||wa;return a}function Da(a,b){var c=new W,d,e,f=w("[");if(H.type===D.Identifier){e=H;d=Ia();if(w("\x3d"))return a.push(e),z(),a=oa(),c.finishProperty("init",d,!1,(new Y(e)).finishAssignmentPattern(d,a),!1,!0);if(!w(":"))return a.push(e),c.finishProperty("init",d,!1,d,!1,!0)}else d=ga();M(":");
a=J(a,b);return c.finishProperty("init",d,f,a,!1,!1)}function ka(a,b){if(w("[")){var c=new W,d=[],e;for(M("[");!w("]");)if(w(","))z(),d.push(null);else{if(w("...")){e=new W;z();a.push(H);a=Ia(b);d.push(e.finishRestElement(a));break}else d.push(J(a,b));w("]")||M(",")}M("]");return c.finishArrayPattern(d)}if(w("{")){c=new W;d=[];for(M("{");!w("}");)d.push(Da(a,b)),w("}")||M(",");z();return c.finishObjectPattern(d)}ja("let")&&("const"!==b&&"let"!==b||ia(H,Z.UnexpectedToken));a.push(H);return Ia(b)}function J(a,
b){var c=H,d;a=ka(a,b);w("\x3d")&&(z(),b=G.allowYield,G.allowYield=!0,d=da(oa),G.allowYield=b,a=(new Y(c)).finishAssignmentPattern(a,d));return a}function E(){var a=[],b=new W,c;for(M("[");!w("]");)w(",")?(z(),a.push(null)):w("...")?(c=new W,z(),c.finishSpreadElement(X(oa)),w("]")||(ea=fa=!1,M(",")),a.push(c)):(a.push(X(oa)),w("]")||M(","));z();return b.finishArrayExpression(a)}function t(a,b,c){var d,e;ea=fa=!1;d=aa;e=da(ab);aa&&b.firstRestricted&&ia(b.firstRestricted,b.message);aa&&b.stricted&&
ia(b.stricted,b.message);aa=d;return a.finishFunctionExpression(null,b.params,b.defaults,e,c)}function ga(){var a,b=new W;a=z();switch(a.type){case D.StringLiteral:case D.NumericLiteral:return aa&&a.octal&&ia(a,Z.StrictOctalLiteral),b.finishLiteral(a);case D.Identifier:case D.BooleanLiteral:case D.NullLiteral:case D.Keyword:return b.finishIdentifier(a.value);case D.Punctuator:if("["===a.value)return a=da(oa),M("]"),a}Q(a)}function R(){switch(H.type){case D.Identifier:case D.StringLiteral:case D.BooleanLiteral:case D.NullLiteral:case D.NumericLiteral:case D.Keyword:return!0;
case D.Punctuator:return"["===H.value}return!1}function ua(a,b,c,d){var e,f=G.allowYield;if(a.type===D.Identifier){if("get"===a.value&&R())return c=w("["),b=ga(),a=new W,M("("),M(")"),G.allowYield=!1,a=t(a,{params:[],defaults:[],stricted:null,firstRestricted:null,message:null},!1),G.allowYield=f,d.finishProperty("get",b,c,a,!1,!1);if("set"===a.value&&R())return c=w("["),b=ga(),a=new W,M("("),e={params:[],defaultCount:0,defaults:[],firstRestricted:null,paramSet:{}},w(")")?ia(H):(G.allowYield=!1,bb(e),
G.allowYield=f,0===e.defaultCount&&(e.defaults=[])),M(")"),G.allowYield=!1,a=t(a,e,!1),G.allowYield=f,d.finishProperty("set",b,c,a,!1,!1)}else if(a.type===D.Punctuator&&"*"===a.value&&R())return c=w("["),b=ga(),a=new W,G.allowYield=!0,e=Ua(),G.allowYield=f,G.allowYield=!1,a=t(a,e,!0),G.allowYield=f,d.finishProperty("init",b,c,a,!0,!1);return b&&w("(")?(e=new W,f=G.allowYield,G.allowYield=!1,a=Ua(),G.allowYield=f,G.allowYield=!1,a=t(e,a,!1),G.allowYield=f,d.finishProperty("init",b,c,a,!0,!1)):null}
function Ba(a){var b=H,c=new W,d,e,f;d=w("[");w("*")?z():e=ga();if(f=ua(b,e,d,c))return f;e||Q(H);d||(f=e.type===N.Identifier&&"__proto__"===e.name||e.type===N.Literal&&"__proto__"===e.value,a.value&&f&&pa(Z.DuplicateProtoProperty),a.value|=f);if(w(":"))return z(),a=X(oa),c.finishProperty("init",e,d,a,!1,!1);if(b.type===D.Identifier)return w("\x3d")?(wa=H,z(),a=da(oa),c.finishProperty("init",e,d,(new Y(b)).finishAssignmentPattern(e,a),!1,!0)):c.finishProperty("init",e,d,e,!1,!0);Q(H)}function Ma(a){var b=
[],c={value:!1},d=new W;for(a||M("{");!w("}");)b.push(Ba(c)),w("}")||ma();M("}");return d.finishObjectExpression(b)}function za(a){var b;switch(a.type){case N.ArrayExpression:a.type=N.ArrayPattern;for(b=0;b<a.elements.length;b++)null!==a.elements[b]&&za(a.elements[b]);break;case N.ObjectExpression:a.type=N.ObjectPattern;for(b=0;b<a.properties.length;b++)za(a.properties[b].value);break;case N.AssignmentExpression:a.type=N.AssignmentPattern,za(a.left)}}function Fa(a){var b;(H.type!==D.Template||a.head&&
!H.head)&&Q();a=new W;b=z();return a.finishTemplateElement({raw:b.value.raw,cooked:b.value.cooked},b.tail)}function Qa(){var a,b;M("(");if(w(")"))return z(),w("\x3d\x3e")||M("\x3d\x3e"),{type:Na.ArrowParameterPlaceHolder,params:[],rawParams:[]};b=H;fa=!0;a=X(oa);if(w(",")){ea=!1;for(a=[a];qa<ha&&w(",");)z(),a.push(X(oa));a=(new Y(b)).finishSequenceExpression(a)}M(")");if(w("\x3d\x3e")){if(a.type===N.Identifier&&"yield"===a.name)return{type:Na.ArrowParameterPlaceHolder,params:[a]};fa||Q(H);if(a.type===
N.SequenceExpression)for(b=0;b<a.expressions.length;b++)za(a.expressions[b]);else za(a);a={type:Na.ArrowParameterPlaceHolder,params:a.type===N.SequenceExpression?a.expressions:[a]}}fa=!1;return a}function db(){var a,b,c;if(w("("))return fa=!1,X(Qa);if(w("["))return X(E);if(w("{"))return X(Ma);a=H.type;c=new W;if(a===D.Identifier)b=c.finishIdentifier(z().value);else if(a===D.StringLiteral||a===D.NumericLiteral)ea=fa=!1,aa&&H.octal&&ia(H,Z.StrictOctalLiteral),b=c.finishLiteral(z());else if(a===D.Keyword){ea=
fa=!1;if(ja("function"))return parseFunctionExpression();Q(z())}else if(a===D.BooleanLiteral)ea=fa=!1,a=z(),a.value="true"===a.value.toLowerCase(),b=c.finishLiteral(a);else if(a===D.NullLiteral)ea=fa=!1,a=z(),a.value=null,b=c.finishLiteral(a);else if(a===D.Template){var d=new W;c=Fa({head:!0});a=[c];for(b=[];!c.tail;)b.push(xa()),c=Fa({head:!1}),a.push(c);b=d.finishTemplateLiteral(a,b)}else Q(z());return b}function Ha(){var a,b,c,d=G.allowIn;c=H;G.allowIn=!0;for(a=X(db);;)if(w(".")){fa=!1;ea=!0;M(".");
b=void 0;var e=new W;b=z();b.type===D.Identifier||b.type===D.Keyword||b.type===D.BooleanLiteral||b.type===D.NullLiteral||Q(b);b=e.finishIdentifier(b.value);a=(new Y(c)).finishMemberExpression(".",a,b)}else if(w("(")){ea=fa=!1;b=[];e=void 0;M("(");if(!w(")"))for(;qa<ha;){e=da(oa);b.push(e);if(w(")"))break;ma()}M(")");a=(new Y(c)).finishCallExpression(a,b)}else if(w("["))fa=!1,ea=!0,b=void 0,M("["),b=da(xa),M("]"),a=(new Y(c)).finishMemberExpression("[",a,b);else break;G.allowIn=d;return a}function Xa(){var a,
b,c=H;a=X(Ha);Ea||H.type!==D.Punctuator||!w("++")&&!w("--")||(ea||pa(Z.InvalidLHSInAssignment),ea=fa=!1,b=z(),a=(new Y(c)).finishPostfixExpression(b.value,a));return a}function Ga(){var a,b,c;H.type!==D.Punctuator&&H.type!==D.Keyword?b=Xa():w("++")||w("--")?(c=H,a=z(),b=X(Ga),ea||pa(Z.InvalidLHSInAssignment),b=(new Y(c)).finishUnaryExpression(a.value,b),ea=fa=!1):w("+")||w("-")||w("~")||w("!")?(c=H,a=z(),b=X(Ga),b=(new Y(c)).finishUnaryExpression(a.value,b),ea=fa=!1):ja("delete")||ja("void")||ja("typeof")?
(c=H,a=z(),b=X(Ga),b=(new Y(c)).finishUnaryExpression(a.value,b),aa&&"delete"===b.operator&&b.argument.type===N.Identifier&&pa(Z.StrictDelete),ea=fa=!1):b=Xa();return b}function Ya(a,b){var c=0;if(a.type!==D.Punctuator&&a.type!==D.Keyword)return 0;switch(a.value){case "||":c=1;break;case "\x26\x26":c=2;break;case "|":c=3;break;case "^":c=4;break;case "\x26":c=5;break;case "\x3d\x3d":case "!\x3d":case "\x3d\x3d\x3d":case "!\x3d\x3d":c=6;break;case "\x3c":case "\x3e":case "\x3c\x3d":case "\x3e\x3d":case "instanceof":c=
7;break;case "in":c=b?7:0;break;case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":c=8;break;case "+":case "-":c=9;break;case "*":case "/":case "%":c=11}return c}function eb(){var a,b,c,d,e,f;a=H;b=X(Ga);c=H;d=Ya(c,G.allowIn);if(0===d)return b;ea=fa=!1;c.prec=d;z();a=[a,H];f=da(Ga);for(e=[b,c,f];0<(d=Ya(H,G.allowIn));){for(;2<e.length&&d<=e[e.length-2].prec;)f=e.pop(),c=e.pop().value,b=e.pop(),a.pop(),b=(new Y(a[a.length-1])).finishBinaryExpression(c,b,f),e.push(b);c=z();c.prec=d;e.push(c);a.push(H);
b=da(Ga);e.push(b)}d=e.length-1;b=e[d];for(a.pop();1<d;)b=(new Y(a.pop())).finishBinaryExpression(e[d-1].value,e[d-2],b),d-=2;return b}function Aa(b,c){var d;switch(c.type){case N.Identifier:Ta(b,c,c.name);break;case N.RestElement:Aa(b,c.argument);break;case N.AssignmentPattern:Aa(b,c.left);break;case N.ArrayPattern:for(d=0;d<c.elements.length;d++)null!==c.elements[d]&&Aa(b,c.elements[d]);break;case N.YieldExpression:break;default:for(a(c.type===N.ObjectPattern,"Invalid type"),d=0;d<c.properties.length;d++)Aa(b,
c.properties[d].value)}}function oa(){var a,b,c,d;a=d=H;var e;c=H;b=X(eb);w("?")&&(z(),e=G.allowIn,G.allowIn=!0,a=da(oa),G.allowIn=e,M(":"),e=da(oa),b=(new Y(c)).finishConditionalExpression(b,a,e),ea=fa=!1);if(b.type===Na.ArrowParameterPlaceHolder||w("\x3d\x3e")){ea=fa=!1;a:{var f,g,h,k;c=[];e=0;a=[b];switch(b.type){case N.Identifier:break;case Na.ArrowParameterPlaceHolder:a=b.params;break;default:a=null;break a}k={paramSet:{}};f=0;for(g=a.length;f<g;f+=1)switch(h=a[f],h.type){case N.AssignmentPattern:a[f]=
h.left;h.right.type===N.YieldExpression&&(h.right.argument&&Q(H),h.right.type=N.Identifier,h.right.name="yield",delete h.right.argument,delete h.right.delegate);c.push(h.right);++e;Aa(k,h.left);break;default:Aa(k,h),a[f]=h,c.push(null)}if(aa||!G.allowYield)for(f=0,g=a.length;f<g;f+=1)h=a[f],h.type===N.YieldExpression&&Q(H);k.message===Z.StrictParamDupe&&(f=aa?k.stricted:k.firstRestricted,Q(f,k.message));0===e&&(c=[]);a={params:a,defaults:c,stricted:k.stricted,firstRestricted:k.firstRestricted,message:k.message}}return a?
(wa=null,parseArrowFunctionExpression(a,new Y(d))):b}H.type!==D.Punctuator?a=!1:(a=H.value,a="\x3d"===a||"*\x3d"===a||"/\x3d"===a||"%\x3d"===a||"+\x3d"===a||"-\x3d"===a||"\x3c\x3c\x3d"===a||"\x3e\x3e\x3d"===a||"\x3e\x3e\x3e\x3d"===a||"\x26\x3d"===a||"^\x3d"===a||"|\x3d"===a);a&&(ea||pa(Z.InvalidLHSInAssignment),w("\x3d")?za(b):ea=fa=!1,a=z(),c=da(oa),b=(new Y(d)).finishAssignmentExpression(a.value,b,c),wa=null);return b}function xa(){var a,b=H;a=da(oa);if(w(",")){for(a=[a];qa<ha&&w(",");)z(),a.push(da(oa));
a=(new Y(b)).finishSequenceExpression(a)}return a}function Ra(){if(H.type===D.Keyword)switch(H.value.toLowerCase()){case "function":return cb(new W)}return Ca()}function Ia(a){var b,c=new W;b=z();b.type!==D.Identifier&&(aa||"let"!==b.value||"var"!==a)&&Q(b);return c.finishIdentifier(b.value)}function Za(a){var b=null,c,d=new W;c=ka([],"var");w("\x3d")?(z(),b=da(oa)):c.type===N.Identifier||a.inFor||M("\x3d");return d.finishVariableDeclarator(c,b)}function $a(a){var b;a={inFor:a.inFor};for(b=[Za(a)];w(",");)z(),
b.push(Za(a));return b}function fb(){return Ca(!0)}function Ca(a){var b=H.type,c,d;b===D.EOF&&Q(H);if(b===D.Punctuator&&"{"===H.value){if(a){M("{");var f=H;a=r;c=ba;d=ca;z();b=w(":");H=f;r=a;ba=c;ca=d;if((H.type===D.Identifier||H.type===D.StringLiteral)&&b)return Ma(!0);a=new W;for(c=[];qa<ha&&!w("}");)c.push(Ra());M("}");return a.finishBlockStatement(c)}return Ma()}ea=fa=!0;a=new W;if(b===D.Punctuator)switch(H.value){case ";":return M(";"),a.finishEmptyStatement();case "(":return c=xa(),ta(),a.finishExpressionStatement(c)}else if(b===
D.Keyword)switch(H.value.toLowerCase()){case "break":return c=null,la("break"),59===B.charCodeAt(ya)?(z(),G.inIteration||G.inSwitch||U(Z.IllegalBreak),a=a.finishBreakStatement(null)):(Ea?G.inIteration||G.inSwitch||U(Z.IllegalBreak):H.type===D.Identifier&&(c=Ia(),d="$"+c.name,Object.prototype.hasOwnProperty.call(G.labelSet,d)||U(Z.UnknownLabel,c.name)),ta(),null!==c||G.inIteration||G.inSwitch||U(Z.IllegalBreak),a=a.finishBreakStatement(c)),a;case "continue":return c=null,la("continue"),59===B.charCodeAt(qa)?
(z(),G.inIteration||U(Z.IllegalContinue),a=a.finishContinueStatement(null)):Ea?(G.inIteration||U(Z.IllegalContinue),a=a.finishContinueStatement(null)):(H.type===D.Identifier&&(c=Ia(),d="$"+c.name,Object.prototype.hasOwnProperty.call(G.labelSet,d)||U(Z.UnknownLabel,c.name)),ta(),null!==c||G.inIteration||U(Z.IllegalContinue),a=a.finishContinueStatement(c)),a;case "for":var g,h,k,n;n=G.allowIn;g=f=k=null;b=!0;la("for");M("(");if(w(";"))z();else if(ja("var"))g=new W,z(),G.allowIn=!1,h=$a({inFor:!0}),
G.allowIn=n,1===h.length&&ja("in")?(g=g.finishVariableDeclaration(h),z(),c=g,d=xa(),g=null):1===h.length&&null===h[0].init&&H.type===D.Identifier&&"of"===H.value?(g=g.finishVariableDeclaration(h),z(),c=g,d=oa(),g=null,b=!1):(g=g.finishVariableDeclaration(h),M(";"));else if(h=H,G.allowIn=!1,g=X(oa),G.allowIn=n,ja("in"))ea||pa(Z.InvalidLHSInForIn),z(),za(g),c=g,d=xa(),g=null;else{if(w(",")){for(g=[g];w(",");)z(),g.push(da(oa));g=(new Y(h)).finishSequenceExpression(g)}M(";")}"undefined"===typeof c&&
(w(";")||(f=xa()),M(";"),w(")")||(k=xa()));M(")");n=G.inIteration;G.inIteration=!0;h=da(fb);G.inIteration=n;return"undefined"===typeof c?a.finishForStatement(g,f,k,h):b?a.finishForInStatement(c,d,h):a.finishForOfStatement(c,d,h);case "function":return cb(a);case "if":return la("if"),M("("),c=xa(),M(")"),d=Ca(!0),ja("else")?(z(),b=Ca(!0)):b=null,a.finishIfStatement(c,d,b);case "return":return c=null,la("return"),G.inFunctionBody||pa(Z.IllegalReturn),32===B.charCodeAt(ya)&&e(B.charCodeAt(ya+1))?(c=
xa(),ta(),a=a.finishReturnStatement(c)):Ea?a=a.finishReturnStatement(null):(w(";")||w("}")||H.type===D.EOF||(c=xa()),ta(),a=a.finishReturnStatement(c)),a;case "switch":return parseSwitchStatement(a);case "var":return la("var"),c=$a({inFor:!1}),ta(),a.finishVariableDeclaration(c)}c=xa();if(c.type===N.Identifier&&w(":"))return z(),b="$"+c.name,Object.prototype.hasOwnProperty.call(G.labelSet,b)&&U(Z.Redeclaration,"Label",c.name),G.labelSet[b]=!0,d=Ca(),delete G.labelSet[b],a.finishLabeledStatement(c,
d);ta();return a.finishExpressionStatement(c)}function ab(){var a,b=[],c,d,e,f=new W;for(M("{");qa<ha&&H.type===D.StringLiteral;){c=H;a=Ra();b.push(a);if(a.expression.type!==N.Literal)break;a=B.slice(c.start+1,c.end-1);"use strict"===a?(aa=!0,d&&ia(d,Z.StrictOctalLiteral)):!d&&c.octal&&(d=c)}c=G.labelSet;d=G.inIteration;a=G.inSwitch;e=G.inFunctionBody;G.labelSet={};G.inIteration=!1;G.inSwitch=!1;for(G.inFunctionBody=!0;qa<ha&&!w("}");)b.push(Ra());M("}");G.labelSet=c;G.inIteration=d;G.inSwitch=a;
G.inFunctionBody=e;return f.finishBlockStatement(b)}function Ta(a,b,c){c="$"+c;aa?Object.prototype.hasOwnProperty.call(a.paramSet,c)&&(a.stricted=b,a.message=Z.StrictParamDupe):!a.firstRestricted&&Object.prototype.hasOwnProperty.call(a.paramSet,c)&&(a.stricted=b,a.message=Z.StrictParamDupe);a.paramSet[c]=!0}function bb(a){var b,c=[],d,e;if("..."===H.value)return b=new W,z(),w("{")&&U(Z.ObjectPatternAsRestParameter),c.push(H),c=Ia(),w("\x3d")&&U(Z.DefaultRestParameter),w(")")||U(Z.ParameterAfterRestParameter),
b=b.finishRestElement(c),Ta(a,b.argument,b.argument.name),a.params.push(b),a.defaults.push(null),!1;b=J(c);for(d=0;d<c.length;d++)Ta(a,c[d],c[d].value);b.type===N.AssignmentPattern&&(e=b.right,b=b.left,++a.defaultCount);a.params.push(b);a.defaults.push(e);return!w(")")}function Ua(a){a={params:[],defaultCount:0,defaults:[],firstRestricted:a};M("(");if(!w(")"))for(a.paramSet={};qa<ha&&bb(a);)M(",");M(")");0===a.defaultCount&&(a.defaults=[]);return{params:a.params,defaults:a.defaults,stricted:a.stricted,
firstRestricted:a.firstRestricted,message:a.message}}function cb(a,b){var c=null,d=[],e=[],f,g,h,k,n;n=G.allowYield;la("function");b&&w("(")||(c=Ia());G.allowYield=!0;f=Ua(g);d=f.params;e=f.defaults;b=f.stricted;g=f.firstRestricted;f.message&&(h=f.message);k=aa;f=ab();aa&&g&&Q(g,h);aa&&b&&ia(b,h);aa=k;G.allowYield=n;return a.finishFunctionDeclaration(c,d,e,f,void 0)}var D,va,Va,N,Na,Z,Wa,B,aa,r,ba,ca,Ea,ya,Pa,Sa,qa,Ja,Ka,La,ha,H,G,x,fa,ea,wa;D={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,
NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9,Template:10};va={};va[D.BooleanLiteral]="Boolean";va[D.EOF]="\x3cend\x3e";va[D.Identifier]="Identifier";va[D.Keyword]="Keyword";va[D.NullLiteral]="Null";va[D.NumericLiteral]="Numeric";va[D.Punctuator]="Punctuator";va[D.StringLiteral]="String";va[D.RegularExpression]="RegularExpression";va[D.Template]="Template";Va="( { [ in typeof instanceof new return case delete throw void \x3d +\x3d -\x3d *\x3d /\x3d %\x3d \x3c\x3c\x3d \x3e\x3e\x3d \x3e\x3e\x3e\x3d \x26\x3d |\x3d ^\x3d , + - * / % ++ -- \x3c\x3c \x3e\x3e \x3e\x3e\x3e \x26 | ^ ! ~ \x26\x26 || ? : \x3d\x3d\x3d \x3d\x3d \x3e\x3d \x3c\x3d \x3c \x3e !\x3d !\x3d\x3d".split(" ");
N={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",
FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator"};
Na={ArrowParameterPlaceHolder:"ArrowParameterPlaceHolder"};Z={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",
InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",
StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",
StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",DefaultRestParameter:"Unexpected token \x3d",
ObjectPatternAsRestParameter:"Unexpected token {",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ConstructorSpecialMethod:"Class constructor may not be an accessor",DuplicateConstructor:"A class may only have one constructor",StaticPrototype:"Classes may not have static property named prototype",MissingFromClause:"Unexpected token",NoAsAfterImportNamespace:"Unexpected token",InvalidModuleSpecifier:"Unexpected token",IllegalImportDeclaration:"Unexpected token",
IllegalExportDeclaration:"Unexpected token",DuplicateBinding:"Duplicate binding %0"};Wa={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B2\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDE00-\uDE11\uDE13-\uDE2B\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDE00-\uDE2F\uDE44\uDE80-\uDEAA]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF98]|\uD809[\uDC00-\uDC6E]|[\uD80C\uD840-\uD868\uD86A-\uD86C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D]|\uD87E[\uDC00-\uDE1D]/,
NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B2\u08E4-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA69D\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2D\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDD0-\uDDDA\uDE00-\uDE11\uDE13-\uDE37\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF01-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF98]|\uD809[\uDC00-\uDC6E]|[\uD80C\uD840-\uD868\uD86A-\uD86C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};
Y.prototype=W.prototype={processComment:function(){var a,b,c,d,e=x.bottomRightStack,f,g,h=e[e.length-1];if(!(this.type===N.Program&&0<this.body.length)){if(this.type===N.BlockStatement&&0===this.body.length){b=[];for(f=x.leadingComments.length-1;0<=f;--f)g=x.leadingComments[f],this.range[1]>=g.range[1]&&(b.unshift(g),x.leadingComments.splice(f,1),x.trailingComments.splice(f,1));if(b.length){this.innerComments=b;return}}if(0<x.trailingComments.length){d=[];for(f=x.trailingComments.length-1;0<=f;--f)g=
x.trailingComments[f],g.range[0]>=this.range[1]&&(d.unshift(g),x.trailingComments.splice(f,1));x.trailingComments=[]}else h&&h.trailingComments&&h.trailingComments[0].range[0]>=this.range[1]&&(d=h.trailingComments,delete h.trailingComments);for(;h&&h.range[0]>=this.range[0];)a=e.pop(),h=e[e.length-1];if(a){if(a.leadingComments){c=[];for(f=a.leadingComments.length-1;0<=f;--f)g=a.leadingComments[f],g.range[1]<=this.range[0]&&(c.unshift(g),a.leadingComments.splice(f,1));a.leadingComments.length||(a.leadingComments=
void 0)}}else if(0<x.leadingComments.length)for(c=[],f=x.leadingComments.length-1;0<=f;--f)g=x.leadingComments[f],g.range[1]<=this.range[0]&&(c.unshift(g),x.leadingComments.splice(f,1));c&&0<c.length&&(this.leadingComments=c);d&&0<d.length&&(this.trailingComments=d);e.push(this)}},finish:function(){x.range&&(this.range[1]=ya);x.loc&&(this.loc.end={line:Pa,column:ya-Sa},x.source&&(this.loc.source=x.source));x.attachComment&&this.processComment()},finishArrayExpression:function(a){this.type=N.ArrayExpression;
this.elements=a;this.finish();return this},finishArrayPattern:function(a){this.type=N.ArrayPattern;this.elements=a;this.finish();return this},finishAssignmentExpression:function(a,b,c){this.type=N.AssignmentExpression;this.operator=a;this.left=b;this.right=c;this.finish();return this},finishAssignmentPattern:function(a,b){this.type=N.AssignmentPattern;this.left=a;this.right=b;this.finish();return this},finishBinaryExpression:function(a,b,c){this.type="||"===a||"\x26\x26"===a?N.LogicalExpression:N.BinaryExpression;
this.operator=a;this.left=b;this.right=c;this.finish();return this},finishBlockStatement:function(a){this.type=N.BlockStatement;this.body=a;this.finish();return this},finishBreakStatement:function(a){this.type=N.BreakStatement;this.label=a;this.finish();return this},finishCallExpression:function(a,b){this.type=N.CallExpression;this.callee=a;this.arguments=b;this.finish();return this},finishConditionalExpression:function(a,b,c){this.type=N.ConditionalExpression;this.test=a;this.consequent=b;this.alternate=
c;this.finish();return this},finishContinueStatement:function(a){this.type=N.ContinueStatement;this.label=a;this.finish();return this},finishEmptyStatement:function(){this.type=N.EmptyStatement;this.finish();return this},finishExpressionStatement:function(a){this.type=N.ExpressionStatement;this.expression=a;this.finish();return this},finishForStatement:function(a,b,c,d){this.type=N.ForStatement;this.init=a;this.test=b;this.update=c;this.body=d;this.finish();return this},finishForInStatement:function(a,
b,c){this.type=N.ForInStatement;this.left=a;this.right=b;this.body=c;this.each=!1;this.finish();return this},finishFunctionDeclaration:function(a,b,c,d,e){this.type=N.FunctionDeclaration;this.id=a;this.params=b;this.defaults=c;this.body=d;this.generator=e;this.expression=!1;this.finish();return this},finishFunctionExpression:function(a,b,c,d,e){this.type=N.FunctionExpression;this.id=a;this.params=b;this.defaults=c;this.body=d;this.generator=e;this.expression=!1;this.finish();return this},finishIdentifier:function(a){this.type=
N.Identifier;this.name=a;this.finish();return this},finishIfStatement:function(a,b,c){this.type=N.IfStatement;this.test=a;this.consequent=b;this.alternate=c;this.finish();return this},finishLiteral:function(a){this.type=N.Literal;this.value=a.value;this.raw=B.slice(a.start,a.end);a.regex&&(this.regex=a.regex);this.finish();return this},finishMemberExpression:function(a,b,c){this.type=N.MemberExpression;this.computed="["===a;this.object=b;this.property=c;this.finish();return this},finishObjectExpression:function(a){this.type=
N.ObjectExpression;this.properties=a;this.finish();return this},finishObjectPattern:function(a){this.type=N.ObjectPattern;this.properties=a;this.finish();return this},finishPostfixExpression:function(a,b){this.type=N.UpdateExpression;this.operator=a;this.argument=b;this.prefix=!1;this.finish();return this},finishProgram:function(a,b){this.type=N.Program;this.body=a;this.sourceType=b;this.finish();return this},finishProperty:function(a,b,c,d,e,f){this.type=N.Property;this.key=b;this.computed=c;this.value=
d;this.kind=a;this.method=e;this.shorthand=f;this.finish();return this},finishRestElement:function(a){this.type=N.RestElement;this.argument=a;this.finish();return this},finishReturnStatement:function(a){this.type=N.ReturnStatement;this.argument=a;this.finish();return this},finishTemplateElement:function(a,b){this.type=N.TemplateElement;this.value=a;this.tail=b;this.finish();return this},finishTemplateLiteral:function(a,b){this.type=N.TemplateLiteral;this.quasis=a;this.expressions=b;this.finish();
return this},finishUnaryExpression:function(a,b){this.type="++"===a||"--"===a?N.UpdateExpression:N.UnaryExpression;this.operator=a;this.argument=b;this.prefix=!0;this.finish();return this},finishVariableDeclaration:function(a){this.type=N.VariableDeclaration;this.declarations=a;this.kind="var";this.finish();return this},finishLexicalDeclaration:function(a,b){this.type=N.VariableDeclaration;this.declarations=a;this.kind=b;this.finish();return this},finishVariableDeclarator:function(a,b){this.type=
N.VariableDeclarator;this.id=a;this.init=b;this.finish();return this}};v.version="2.7.3";v.tokenize=function(a,b,c){var d,e;d=String;"string"===typeof a||a instanceof String||(a=d(a));B=a;r=0;ba=0<B.length?1:0;ca=0;qa=r;Ja=ba;Ka=ca;ha=B.length;H=null;G={allowIn:!0,allowYield:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1,curlyStack:[]};x={};b=b||{};b.tokens=!0;x.tokens=[];x.tokenValues=[];x.tokenize=!0;x.delegate=c;x.openParenToken=-1;x.openCurlyToken=-1;x.range="boolean"===
typeof b.range&&b.range;x.loc="boolean"===typeof b.loc&&b.loc;"boolean"===typeof b.comment&&b.comment&&(x.comments=[]);"boolean"===typeof b.tolerant&&b.tolerant&&(x.errors=[]);try{P();if(H.type===D.EOF)return x.tokens;for(z();H.type!==D.EOF;)try{z()}catch(Oa){if(x.errors){na(Oa);break}else throw Oa;}e=x.tokens;"undefined"!==typeof x.errors&&(e.errors=x.errors)}catch(Oa){throw Oa;}finally{x={}}return e};v.parse=function(a,b){var c,d;d=String;"string"===typeof a||a instanceof String||(a=d(a));B=a;r=
0;ba=0<B.length?1:0;ca=0;qa=r;Ja=ba;Ka=ca;ha=B.length;H=null;G={allowIn:!0,allowYield:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1,curlyStack:[],sourceType:"script"};aa=!1;x={};"undefined"!==typeof b&&(x.range="boolean"===typeof b.range&&b.range,x.loc="boolean"===typeof b.loc&&b.loc,x.attachComment="boolean"===typeof b.attachComment&&b.attachComment,x.loc&&null!==b.source&&void 0!==b.source&&(x.source=d(b.source)),"boolean"===typeof b.tokens&&b.tokens&&(x.tokens=
[]),"boolean"===typeof b.comment&&b.comment&&(x.comments=[]),"boolean"===typeof b.tolerant&&b.tolerant&&(x.errors=[]),x.attachComment&&(x.range=!0,x.comments=[],x.bottomRightStack=[],x.trailingComments=[],x.leadingComments=[]),"module"===b.sourceType&&(G.sourceType=b.sourceType,aa=!0));try{var e;P();e=new W;var f;a=[];for(var g,h,k;qa<ha;){g=H;if(g.type!==D.StringLiteral)break;f=Ra();a.push(f);if(f.expression.type!==N.Literal)break;h=B.slice(g.start+1,g.end-1);"use strict"===h?(aa=!0,k&&ia(k,Z.StrictOctalLiteral)):
!k&&g.octal&&(k=g)}for(;qa<ha;){f=Ra();if("undefined"===typeof f)break;a.push(f)}c=e.finishProgram(a,G.sourceType);"undefined"!==typeof x.comments&&(c.comments=x.comments);if("undefined"!==typeof x.tokens){var n,l,m;e=[];for(n=0;n<x.tokens.length;++n)l=x.tokens[n],m={type:l.type,value:l.value},l.regex&&(m.regex={pattern:l.regex.pattern,flags:l.regex.flags}),x.range&&(m.range=l.range),x.loc&&(m.loc=l.loc),e.push(m);x.tokens=e;c.tokens=x.tokens}"undefined"!==typeof x.errors&&(c.errors=x.errors)}catch(gb){throw gb;
}finally{x={}}return c};v.Syntax=function(){var a,b={};"function"===typeof Object.create&&(b=Object.create(null));for(a in N)N.hasOwnProperty(a)&&(b[a]=N[a]);"function"===typeof Object.freeze&&Object.freeze(b);return b}()})},"esri/intl/moment":function(){define("require exports tslib ../core/MapUtils ./locale @dojo/framework/shim/Promise".split(" "),function(v,a,l,u,m){Object.defineProperty(a,"__esModule",{value:!0});a.loadMoment=void 0;var k=u.MapFromValues([["ar",function(){return new Promise(function(a,
e){v(["moment/locale/ar"],a,e)})}],["ar-dz",function(){return new Promise(function(a,e){v(["moment/locale/ar-dz"],a,e)})}],["ar-kw",function(){return new Promise(function(a,e){v(["moment/locale/ar-kw"],a,e)})}],["ar-ly",function(){return new Promise(function(a,e){v(["moment/locale/ar-ly"],a,e)})}],["ar-ma",function(){return new Promise(function(a,e){v(["moment/locale/ar-ma"],a,e)})}],["ar-sa",function(){return new Promise(function(a,e){v(["moment/locale/ar-sa"],a,e)})}],["ar-tn",function(){return new Promise(function(a,
e){v(["moment/locale/ar-tn"],a,e)})}],["bs",function(){return new Promise(function(a,e){v(["moment/locale/bs"],a,e)})}],["ca",function(){return new Promise(function(a,e){v(["moment/locale/ca"],a,e)})}],["cs",function(){return new Promise(function(a,e){v(["moment/locale/cs"],a,e)})}],["da",function(){return new Promise(function(a,e){v(["moment/locale/da"],a,e)})}],["de",function(){return new Promise(function(a,e){v(["moment/locale/de"],a,e)})}],["de-at",function(){return new Promise(function(a,e){v(["moment/locale/de-at"],
a,e)})}],["de-ch",function(){return new Promise(function(a,e){v(["moment/locale/de-ch"],a,e)})}],["el",function(){return new Promise(function(a,e){v(["moment/locale/el"],a,e)})}],["en-au",function(){return new Promise(function(a,e){v(["moment/locale/en-au"],a,e)})}],["en-ca",function(){return new Promise(function(a,e){v(["moment/locale/en-ca"],a,e)})}],["en-gb",function(){return new Promise(function(a,e){v(["moment/locale/en-gb"],a,e)})}],["en-ie",function(){return new Promise(function(a,e){v(["moment/locale/en-ie"],
a,e)})}],["en-il",function(){return new Promise(function(a,e){v(["moment/locale/en-il"],a,e)})}],["en-nz",function(){return new Promise(function(a,e){v(["moment/locale/en-nz"],a,e)})}],["es",function(){return new Promise(function(a,e){v(["moment/locale/es"],a,e)})}],["es-do",function(){return new Promise(function(a,e){v(["moment/locale/es-do"],a,e)})}],["es-us",function(){return new Promise(function(a,e){v(["moment/locale/es-us"],a,e)})}],["et",function(){return new Promise(function(a,e){v(["moment/locale/et"],
a,e)})}],["fi",function(){return new Promise(function(a,e){v(["moment/locale/fi"],a,e)})}],["fr",function(){return new Promise(function(a,e){v(["moment/locale/fr"],a,e)})}],["fr-ca",function(){return new Promise(function(a,e){v(["moment/locale/fr-ca"],a,e)})}],["fr-ch",function(){return new Promise(function(a,e){v(["moment/locale/fr-ch"],a,e)})}],["he",function(){return new Promise(function(a,e){v(["moment/locale/he"],a,e)})}],["hr",function(){return new Promise(function(a,e){v(["moment/locale/hr"],
a,e)})}],["hu",function(){return new Promise(function(a,e){v(["moment/locale/hu"],a,e)})}],["id",function(){return new Promise(function(a,e){v(["moment/locale/id"],a,e)})}],["it",function(){return new Promise(function(a,e){v(["moment/locale/it"],a,e)})}],["it-ch",function(){return new Promise(function(a,e){v(["moment/locale/it-ch"],a,e)})}],["ja",function(){return new Promise(function(a,e){v(["moment/locale/ja"],a,e)})}],["ko",function(){return new Promise(function(a,e){v(["moment/locale/ko"],a,e)})}],
["lt",function(){return new Promise(function(a,e){v(["moment/locale/lt"],a,e)})}],["lv",function(){return new Promise(function(a,e){v(["moment/locale/lv"],a,e)})}],["nb",function(){return new Promise(function(a,e){v(["moment/locale/nb"],a,e)})}],["nl",function(){return new Promise(function(a,e){v(["moment/locale/nl"],a,e)})}],["nl-be",function(){return new Promise(function(a,e){v(["moment/locale/nl-be"],a,e)})}],["pl",function(){return new Promise(function(a,e){v(["moment/locale/pl"],a,e)})}],["pt",
function(){return new Promise(function(a,e){v(["moment/locale/pt"],a,e)})}],["pt-br",function(){return new Promise(function(a,e){v(["moment/locale/pt-br"],a,e)})}],["ro",function(){return new Promise(function(a,e){v(["moment/locale/ro"],a,e)})}],["ru",function(){return new Promise(function(a,e){v(["moment/locale/ru"],a,e)})}],["sl",function(){return new Promise(function(a,e){v(["moment/locale/sl"],a,e)})}],["sr",function(){return new Promise(function(a,e){v(["moment/locale/sr"],a,e)})}],["sr-cyrl",
function(){return new Promise(function(a,e){v(["moment/locale/sr-cyrl"],a,e)})}],["sv",function(){return new Promise(function(a,e){v(["moment/locale/sv"],a,e)})}],["th",function(){return new Promise(function(a,e){v(["moment/locale/th"],a,e)})}],["tr",function(){return new Promise(function(a,e){v(["moment/locale/tr"],a,e)})}],["uk",function(){return new Promise(function(a,e){v(["moment/locale/uk"],a,e)})}],["vi",function(){return new Promise(function(a,e){v(["moment/locale/vi"],a,e)})}],["zh-cn",function(){return new Promise(function(a,
e){v(["moment/locale/zh-cn"],a,e)})}],["zh-hk",function(){return new Promise(function(a,e){v(["moment/locale/zh-hk"],a,e)})}],["zh-tw",function(){return new Promise(function(a,e){v(["moment/locale/zh-tw"],a,e)})}]]);a.loadMoment=function(a){void 0===a&&(a=m.getLocale());return l.__awaiter(this,void 0,void 0,function(){var e,f,g;return l.__generator(this,function(h){switch(h.label){case 0:return[4,new Promise(function(a,e){v(["moment/moment"],a,e)})];case 1:return e=h.sent(),f=k.has(a),f||(g=a.split("-"),
1<g.length&&k.has(g[0])&&(a=g[0],f=!0)),f?[4,k.get(a)()]:[3,3];case 2:return h.sent(),[3,4];case 3:a="en",h.label=4;case 4:return a!==e.locale()&&e.locale(a),[2,e]}})})}})},"*noref":1}});
define("require exports ../arcade/arcade ../arcade/Dictionary ../arcade/Feature ../core/lang ../core/promiseUtils ../renderers/visualVariables/support/sizeVariableUtils".split(" "),function(v,a,l,u,m,k,h,e){function f(a){if(!a)return null;try{return l.parseScript(a)}catch(c){}return null}function g(a){a=f(a);return!!a&&l.scriptUsesGeometryEngine(a)}Object.defineProperty(a,"__esModule",{value:!0});a.Dictionary=a.arcadeFeature=a.arcade=a.hasGeometryOperations=a.enableFeatureSetOperations=a.enableGeometryOperations=
a.loadScriptDependencies=a.convertMapToFeatureSetCollection=a.convertFeatureLayerToFeatureSet=a.convertServiceUrlToWorkspace=a.getViewInfo=a.hasVariable=a.dependsOnView=a.extractFieldNames=a.executeAsyncFunction=a.executeFunction=a.evalSyntaxTree=a.updateExecContext=a.createFeature=a.createExecContext=a.createFunction=a.createSyntaxTree=void 0;a.arcade=l;a.Dictionary=u;a.arcadeFeature=m;var p=/^\$feature\./i,y={vars:{$feature:"any",$view:"any"},spatialReference:null};a.createSyntaxTree=f;a.createFunction=
function(a,c){a="string"===typeof a?f(a):a;if(!a)return null;try{return c=c||k.clone(y),l.compileScript(a,c)}catch(C){}return null};a.createExecContext=function(a,c){return{vars:{$feature:null==a?new m:m.createFromGraphic(a),$view:c&&c.view},spatialReference:c&&c.sr}};a.createFeature=function(a,c,e){return m.createFromGraphicLikeObject(c,a,e)};a.updateExecContext=function(a,c){a.vars.$feature=c};a.evalSyntaxTree=function(a,c){var e;try{e=l.executeScript(a,c)}catch(F){e=null}return e};a.executeFunction=
function(a,c){var e;try{e=a?a(c):null}catch(F){e=null}return e};a.executeAsyncFunction=function(a,c){try{return a?a(c):h.resolve(null)}catch(C){return h.resolve(null)}};a.extractFieldNames=function(a){if(!a)return[];a="string"===typeof a?f(a):a;if(!a)return[];var c=[];l.extractFieldLiterals(a).forEach(function(a){p.test(a)&&(a=a.replace(p,""),c.push(a))});c.sort();return c.filter(function(a,e){return 0===e||c[e-1]!==a})};a.dependsOnView=function(a){return l.referencesMember(a,"$view")};a.hasVariable=
function(a,c){return a?l.referencesMember(a,c):!1};a.getViewInfo=function(a){if(a&&(null!=a.spatialReference||null!=a.scale&&null!=a.viewingMode))return{view:a.viewingMode&&null!=a.scale?new u({viewingMode:a.viewingMode,scale:a.scale}):null,sr:a.spatialReference}};a.convertServiceUrlToWorkspace=function(a,c){var e=l.featureSetUtils();return e?e.createFeatureSetCollectionFromService(a,c):null};a.convertFeatureLayerToFeatureSet=function(a,c){if(null===a)return null;var e=l.featureSetUtils();return e?
e.constructFeatureSet(a,c):null};a.convertMapToFeatureSetCollection=function(a){if(null===a||null===a.map)return null;var c=l.featureSetUtils();return c?c.createFeatureSetCollectionFromMap(a.map,a.spatialReference):null};a.loadScriptDependencies=function(a,c,e){void 0===e&&(e=[]);return l.loadScriptDependencies(a,c,e)};a.enableGeometryOperations=function(){return l.enableGeometrySupport()};a.enableFeatureSetOperations=function(){return l.enableFeatureSetSupport()};a.hasGeometryOperations=function(a){if(!a)return!1;
if("string"===typeof a)return g(a);if("simple"===a.type||"class-breaks"===a.type||"unique-value"===a.type||"dot-density"===a.type||"dictionary"===a.type){if("dot-density"===a.type){var c=a.attributes.some(function(a){return g(a.valueExpression)});if(c)return c}c=a.visualVariables;c=!!c&&c.some(function(a){var c=g(a.valueExpression);"size"===a.type&&(e.isSizeVariable(a.minSize)&&(c=c||g(a.minSize.valueExpression)),e.isSizeVariable(a.maxSize)&&(c=c||g(a.maxSize.valueExpression)));return c});return"valueExpression"in
a&&g(a.valueExpression)?!0:c}return"esri.layers.support.LabelClass"===a.declaredClass?(a=a.labelExpressionInfo&&a.labelExpressionInfo.expression,!(!a||!g(a))||!1):"esri.PopupTemplate"===a.declaredClass?!!a.expressionInfos&&a.expressionInfos.some(function(a){return g(a.expression)}):!1}});