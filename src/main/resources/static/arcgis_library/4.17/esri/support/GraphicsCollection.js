// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../Graphic ../core/Collection ../core/collectionUtils ../core/accessorSupport/decorators ../core/accessorSupport/ensureType".split(" "),function(p,d,f,l,m,g,h,n){Object.defineProperty(d,"__esModule",{value:!0});d.graphicsCollectionProperty=d.castGraphicsCollection=d.GraphicsCollection=void 0;var k=m.ofType(l),e=function(c){function b(a){var b=c.call(this,a)||this;b.on("before-add",function(a){a.item||a.preventDefault()});b.on("after-add",function(a){return b._own(a.item)});
b.on("after-remove",function(a){a.item.layer=null});return b}f.__extends(b,c);b.prototype.destroy=function(){this._unownAll()};Object.defineProperty(b.prototype,"owner",{get:function(){return this._get("owner")},set:function(a){a!==this._get("owner")&&(this._unownAll(),this._set("owner",a),this._ownAll())},enumerable:!1,configurable:!0});b.prototype._createNewInstance=function(a){return new k(a)};b.prototype._ownAll=function(){var a=this;this.items.forEach(function(b){return a._own(b)})};b.prototype._own=
function(a){a.layer&&"remove"in a.layer&&a.layer!==this.owner&&a.layer.remove(a);a.layer=this.owner};b.prototype._unownAll=function(){var a=this;this.items.forEach(function(b){return a._unown(b)})};b.prototype._unown=function(a){a.layer===this.owner&&(a.layer=null)};f.__decorate([h.property()],b.prototype,"owner",null);return b=f.__decorate([h.subclass("esri.support.GraphicsCollection")],b)}(k);d.GraphicsCollection=e;d.castGraphicsCollection=function(c){if(c=n.default(e,c))c.owner=this;return c};
d.graphicsCollectionProperty={type:e,cast:g.castForReferenceSetter,set:function(c){c=g.referenceSetter(c,this._get("graphics"),e);c.owner=this;this._set("graphics",c)}};d.default=e});