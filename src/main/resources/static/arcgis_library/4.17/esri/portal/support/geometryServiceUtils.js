// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../config ../../core/Error ../Portal ../../tasks/support/ProjectParameters @dojo/framework/shim/Promise".split(" "),function(l,c,d,m,k,p,q){function n(b,c){void 0===b&&(b=null);return d.__awaiter(this,void 0,void 0,function(){var e,a;return d.__generator(this,function(f){switch(f.label){case 0:return m.geometryServiceUrl?[4,new Promise(function(a,b){l(["../../tasks/GeometryService"],a,b)})]:[3,2];case 1:return e=f.sent(),[2,new e({url:m.geometryServiceUrl})];case 2:if(!b)throw new k("internal:geometry-service-url-not-configured");
a="portal"in b?b.portal||p.getDefault():b;return[4,a.load({signal:c})];case 3:return f.sent(),a.helperServices&&a.helperServices.geometry&&a.helperServices.geometry.url?[4,new Promise(function(a,b){l(["../../tasks/GeometryService"],a,b)})]:[3,5];case 4:return e=f.sent(),[2,new e({url:a.helperServices.geometry.url})];case 5:throw new k("internal:geometry-service-url-not-configured");}})})}Object.defineProperty(c,"__esModule",{value:!0});c.projectGeometry=c.create=void 0;c.create=n;c.projectGeometry=
function(b,c,e,a){void 0===e&&(e=null);return d.__awaiter(this,void 0,void 0,function(){var f,g,h;return d.__generator(this,function(d){switch(d.label){case 0:return[4,n(e,a)];case 1:return f=d.sent(),g=new q,g.geometries=[b],g.outSpatialReference=c,[4,f.project(g,{signal:a})];case 2:if((h=d.sent())&&Array.isArray(h)&&1===h.length)return[2,h[0]];throw new k("internal:geometry-service-projection-failed");}})})}});