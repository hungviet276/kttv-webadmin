// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ./Basemap ./Ground ./core/Accessor ./core/CollectionFlattener ./core/Evented ./core/Logger ./core/accessorSupport/decorators ./support/basemapUtils ./support/groundUtils ./support/LayersMixin ./support/TablesMixin".split(" "),function(u,v,c,k,f,l,g,m,n,d,e,p,q,r){var t=n.getLogger("esri.Map");return function(h){function b(a){a=h.call(this,a)||this;a.basemap=null;a.ground=new f;a._basemapCache=e.createCache();return a}c.__extends(b,h);b.prototype.destroy=function(){var a,
b;this.allLayers.destroy();this.allTables.destroy();null===(a=this.ground)||void 0===a?void 0:a.destroy();null===(b=this.basemap)||void 0===b?void 0:b.destroy();e.destroyCache(this._basemapCache);this._basemapCache=null};Object.defineProperty(b.prototype,"allLayers",{get:function(){return new g({root:this,rootCollectionNames:["basemap.baseLayers","ground.layers","layers","basemap.referenceLayers"],getChildrenFunction:function(a){return a.layers}})},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,
"allTables",{get:function(){return this._createTablesFlattener(this)},enumerable:!1,configurable:!0});b.prototype.castBasemap=function(a){return e.ensureType(a,this._basemapCache)};b.prototype.castGround=function(a){a=p.ensureType(a);return a?a:(t.error("Map.ground may not be set to null or undefined"),this._get("ground"))};b.prototype.findLayerById=function(a){return this.allLayers.find(function(b){return b.id===a})};b.prototype._createTablesFlattener=function(a){var b=this;return new g({root:a,
rootCollectionNames:["tables","layers"],getChildrenFunction:function(a){return a&&"group"===a.type?b._createTablesFlattener(a):null},itemFilterFunction:function(a){return b._isMapOrGroupLayer(a.parent)&&a.parent.tables.includes(a)}})};b.prototype._isMapOrGroupLayer=function(a){return a&&(a===this||this._isGroupLayer(a))};b.prototype._isGroupLayer=function(a){return a&&"group"===a.type};c.__decorate([d.property({readOnly:!0})],b.prototype,"allLayers",null);c.__decorate([d.property({readOnly:!0})],
b.prototype,"allTables",null);c.__decorate([d.property({type:k})],b.prototype,"basemap",void 0);c.__decorate([d.cast("basemap")],b.prototype,"castBasemap",null);c.__decorate([d.property({type:f,nonNullable:!0})],b.prototype,"ground",void 0);c.__decorate([d.cast("ground")],b.prototype,"castGround",null);return b=c.__decorate([d.subclass("esri.Map")],b)}(r.TablesMixin(q.LayersMixin(m.EventedMixin(l))))});