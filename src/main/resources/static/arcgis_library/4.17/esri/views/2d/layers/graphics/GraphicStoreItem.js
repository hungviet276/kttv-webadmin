// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/maybe ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/centroid ../../../../geometry/support/jsonUtils ../../../../geometry/support/quantizationUtils ../../../../layers/graphics/featureConversionUtils ../../../../layers/graphics/OptimizedGeometry ./graphicsUtils".split(" "),function(n,p,t,u,v,l,m,d,q,r){Object.defineProperty(p,"__esModule",{value:!0});var c=new q.default,h=new q.default;n=function(){function b(){this.bounds=u.create();
this.graphic=null;this.size=[0,0,0,0]}b.acquire=function(a,k,w,c,e,f){void 0===a&&(a=null);var g;0===b._pool.length?g=new b:(g=b._pool.pop(),this._set.delete(g));g.acquire(a,k,w,c,e,f);return g};b.release=function(a){a&&!this._set.has(a)&&(a.release(),this._pool.push(a),this._set.add(a))};b.getCentroidQuantized=function(a,b){if(l.isPolygon(a.geometry)){var k=a.symbol;if(t.isNone(k))return null;if(r.isMarkerSymbol(k.type))return a=v.polygonCentroid(a.geometry),m.quantizePoint(b,{},{x:a[0],y:a[1]},
!1,!1)}return null};b.prototype.acquire=function(a,b,c,d,e,f){void 0===a&&(a=null);a&&this.set(a,b,c,d,e,f)};b.prototype.release=function(){this.geometry=this.symbolResource=this.graphic=null};Object.defineProperty(b.prototype,"symbol",{get:function(){return this.symbolResource.symbol},enumerable:!1,configurable:!0});b.prototype.set=function(a,b,c,d,e,f){this.graphic=a;this.geometry=c;this.symbolResource=b;this.updateBounds(d,e,f)};b.prototype.updateBounds=function(a,b,c){r.getBounds(this.bounds,
this.size,this.symbolResource,this.geometry,a,b,c)};b.prototype.getGeometryQuantized=function(a){if(l.isPolygon(this.geometry)){var b=this.geometry.rings;if(1===b.length&&2===b[0].length)return m.quantizeGeometry(a,{paths:[[b[0][0],b[0][1]]]})}else if(l.isPolyline(this.geometry))return c.coords.length=0,c.lengths.length=0,h.coords.length=0,h.lengths.length=0,d.convertFromPolyline(c,this.geometry),d.generalizeOptimizedGeometry(h,c,this.geometry.hasZ,this.geometry.hasM,"esriGeometryPolyline",a.scale[0]),
d.quantizeOptimizedGeometry(c,h,this.geometry.hasZ,this.geometry.hasM,"esriGeometryPolyline",a),d.convertToPolyline(c,this.geometry.hasZ,this.geometry.hasM);return m.quantizeGeometry(a,this.geometry)};b._pool=[];b._set=new Set;return b}();p.default=n});