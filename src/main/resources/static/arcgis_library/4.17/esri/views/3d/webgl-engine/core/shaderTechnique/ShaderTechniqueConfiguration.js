// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define(["require","exports","../../../../../core/mathUtils"],function(h,d,m){Object.defineProperty(d,"__esModule",{value:!0});d.parameter=d.ShaderTechniqueConfiguration=void 0;h=function(){function a(){this._key="";this._keyDirty=!1;this._parameterBits=this._parameterBits.map(function(){return 0})}Object.defineProperty(a.prototype,"key",{get:function(){this._keyDirty&&(this._keyDirty=!1,this._key=String.fromCharCode.apply(String,this._parameterBits));return this._key},enumerable:!1,configurable:!0});
a.prototype.snapshot=function(){for(var b={key:this.key},a=0,c=this._parameterNames;a<c.length;a++){var g=c[a];b[g]=this[g]}return b};return a}();d.ShaderTechniqueConfiguration=h;d.parameter=function(a){void 0===a&&(a={});return function(b,d){var c,g;b._parameterNames=null!==(c=b._parameterNames)&&void 0!==c?c:[];b._parameterNames.push(d);var k=b._parameterNames.length-1;c=Math.ceil(m.log2(a.count||2));for(var f=null!==(g=b._parameterBits)&&void 0!==g?g:[0],e=0;16<f[e]+c;)e++,e>=f.length&&f.push(0);
b._parameterBits=f;var h=f[e],l=(1<<c)-1<<h;f[e]+=c;Object.defineProperty(b,d,{get:function(){return this[k]},set:function(a){if(this[k]!==a&&(this[k]=a,this._keyDirty=!0,this._parameterBits[e]=this._parameterBits[e]&~l|+a<<h&l,"number"!==typeof a&&"boolean"!==typeof a))throw"Configuration values must be booleans or numbers!";}})}}});