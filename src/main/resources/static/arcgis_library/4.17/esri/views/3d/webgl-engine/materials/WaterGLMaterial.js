// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../lib/GLMaterial ./WaterTechnique ./internal/MaterialUtil".split(" "),function(d,c,e,f,g,h){Object.defineProperty(c,"__esModule",{value:!0});c.WaterGLMaterial=void 0;d=function(c){function b(a){a=c.call(this,a)||this;a.updateParameters();return a}e.__extends(b,c);b.prototype.updateParameters=function(){this.params=h.copyParameters(this.material.getParameters());this.technique=this.techniqueRep.acquireAndReleaseExisting(g.WaterTechnique,this.material.getTechniqueConfig(this.output),
this.technique)};b.prototype.beginSlot=function(a){if(2===this.output)return 22===a;if(5===this.output)return null==a;if(4===this.output)return 3===a;var b=3;this.params.transparent&&(b=this.params.writeDepth?5:8);return a===b};b.prototype.setElapsedTimeUniform=function(a){a.setUniform1f("timeElapsed",.001*this.material.animation.time*this.params.animationSpeed)};b.prototype._updateShadowState=function(a){a.shadowMappingEnabled!==this.params.receiveShadows&&(this.material.setParameterValues({receiveShadows:a.shadowMappingEnabled}),
this.updateParameters())};b.prototype._updateSSRState=function(a){a.ssrEnabled!==this.params.ssrEnabled&&(this.material.setParameterValues({ssrEnabled:a.ssrEnabled}),this.updateParameters())};b.prototype.ensureResources=function(a){return this.technique.ensureResource(a)};b.prototype.ensureParameters=function(a){0===this.output&&(this._updateShadowState(a),this._updateSSRState(a))};b.prototype.bind=function(a,b){a.bindProgram(this.technique.program);this.technique.bindPass(a,this.params,b);2!==this.output&&
0!==this.output||this.setElapsedTimeUniform(this.technique.program)};return b}(f.GLMaterial);c.WaterGLMaterial=d});