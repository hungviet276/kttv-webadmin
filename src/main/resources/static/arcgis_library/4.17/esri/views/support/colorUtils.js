// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define(["require","exports","tslib","../../Color","../../core/maybe"],function(D,b,c,u,C){function k(f){return c.__awaiter(this,void 0,void 0,function(){var d,a,r,A,e,h,b,l,m,n,v,p,w,g,x,y,z,t,q,k,B;return c.__generator(this,function(c){switch(c.label){case 0:return[4,f.whenReady()];case 1:return c.sent(),d=f.basemapView.baseLayerViews.map(function(a){return a.layer}),d.length?[4,f.takeScreenshot({format:"png",layers:d.toArray()})]:(r=(a=getComputedStyle(f.container).backgroundColor)&&new u(a),A=
f.get("background.color")||(r&&0!==r.a?r:null),[2,A||null]);case 2:e=c.sent();h=e.data.data;b=h.length;for(g=w=p=v=n=m=l=0;g<b;g+=4)x=h[g],y=h[g+1],z=h[g+2],t=h[g+3],q=t/255,l+=x*x*q,m+=y*y*q,n+=z*z*q,p+=q,t&&(v+=t,w++);l=Math.round(Math.sqrt(l/p));m=Math.round(Math.sqrt(m/p));n=Math.round(Math.sqrt(n/p));k=v/w/255;B=new u([l,m,n,k]);return[2,B]}})})}Object.defineProperty(b,"__esModule",{value:!0});b.getBackgroundColorTheme=b.getBackgroundColor=void 0;b.getBackgroundColor=k;b.getBackgroundColorTheme=
function(f){return c.__awaiter(this,void 0,void 0,function(){var d;return c.__generator(this,function(a){switch(a.label){case 0:return f&&"3d"!==f.type?[4,k(f)]:[2,null];case 1:d=a.sent();if(C.isSome(d)){a=d.r;var b=d.g,c=d.b,e=d.a;1>e&&(a=Math.round(e*a+255*(1-e)),b=Math.round(e*b+255*(1-e)),c=Math.round(e*c+255*(1-e)));a=(new u({r:a,g:b,b:c})).isBright?"light":"dark"}else a=null;return[2,a]}})})}});