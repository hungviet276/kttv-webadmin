// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../../../../../core/mathUtils ../../../../../../core/screenUtils ../../color ../../definitions ../../GeometryUtils ../../number ../../materialKey/MaterialKey ./WGLBaseFillTemplate ./WGLMeshTemplate".split(" "),function(h,v,y,p,q,w,r,z,k,A,B,C){Object.defineProperty(v,"__esModule",{value:!0});h=function(h){function n(a,d,e,k,c,g,b,l,m){var f=h.call(this)||this;f.effects=m;a=A.FillMaterialKey.load(a);d&&(a.sdf=d.sdf,a.pattern=!0,a.textureBinding=d.textureBinding);f.fillColor=
e;f.tl=k;f.br=c;f.aux1=g;f.aux2=b;f.aux3=l;f._materialKey=a.data;return f}y.__extends(n,h);n.fromCIMFill=function(a,d){var e=a.color,e=e&&w.premultiplyAlphaRGBA(e)||0,x=a.materialKey;if(!d)return d=k.i8888to32(0,0,0,a.colorLocked?1:0),new n(x,null,e,0,0,0,0,d,a.effects);var c=d.rect,g=d.width,b=d.height,l=c.x+r.SPRITE_PADDING,m=c.y+r.SPRITE_PADDING,f=l+g,h=m+b,c=p.nextHighestPowerOfTwo(q.pt2px(a.height||0));255<c?c=255:0>=c&&(c=p.nextHighestPowerOfTwo(h-m));b=p.nextHighestPowerOfTwo(q.pt2px(a.height/
b*g||0));255<b?b=255:0>=b&&(b=p.nextHighestPowerOfTwo(f-l));var t=q.pt2px(a.offsetX||0)+128;255<t&&(t=255);var u=q.pt2px(-a.offsetY||0)+128;255<u&&(u=255);g=a.scaleX||1;l=k.i1616to32(l,m);f=k.i1616to32(f,h);c=k.i8888to32(b,c,t,u);h=k.i1616to32(128*g,128);g=k.i8888to32(0,0,z.degToByte(a.angle),a.colorLocked?1:0);return new n(x,d,e,l,f,c,h,g,a.effects)};n.fromSimpleFill=function(a,d,e){void 0===e&&(e=!1);var h=a.color,h=h&&"esriSFSNull"!==a.style&&w.premultiplyAlphaRGBAArray(h)||0;e=k.i8888to32(0,0,
0,e?255:0);a=a.materialKey;if(!d)return new n(a,null,h,0,0,0,0,e,null);var c=d.rect,g=c.x+r.SPRITE_PADDING,b=c.y+r.SPRITE_PADDING,l=g+d.width,m=b+d.height,c=k.i1616to32(g,b),f=k.i1616to32(l,m),g=k.i8888to32(p.nextHighestPowerOfTwo(l-g),p.nextHighestPowerOfTwo(m-b),0,0),b=k.i1616to32(128,128);return new n(a,d,h,c,f,g,b,e,null)};n.fromPictureFill=function(a,d,e){void 0===e&&(e=!1);var h=r.PICTURE_FILL_COLOR,c=d.rect,g=c.x+r.SPRITE_PADDING,b=c.y+r.SPRITE_PADDING,c=g+d.width,l=b+d.height,g=k.i1616to32(g,
b),c=k.i1616to32(c,l),l=p.nextHighestPowerOfTwo(q.pt2px(a.width));255<l&&(l=255);b=p.nextHighestPowerOfTwo(q.pt2px(a.height));255<b&&(b=255);var m=q.pt2px(a.xoffset)+128;255<m&&(m=255);var f=q.pt2px(-a.yoffset)+128;255<f&&(f=255);l=k.i8888to32(l,b,m,f);b=k.i1616to32(128*a.xscale,128*a.yscale);e=k.i8888to32(0,0,0,e?255:0);return new n(a.materialKey,d,h,g,c,l,b,e,null)};return n}(B.default(C.default));v.default=h});