// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports ../../../core/compilerUtils ../../../core/maybe ../../../core/unitUtils ../../../core/libs/gl-matrix-2/mat4 ../../../core/libs/gl-matrix-2/vec3 ../../../geometry/SpatialReference ../../../geometry/support/geodesicConstants ../../../layers/graphics/dehydratedFeatures ./geometryUtils ./pointUtils ./projectionUtils ./stack ./geometryUtils/coordinateSystem".split(" "),function(l,h,r,t,u,v,m,w,x,n,f,k,p,g,d){Object.defineProperty(h,"__esModule",{value:!0});h.RenderCoordsHelper=
void 0;l=function(){function b(a,c,e,b){this.viewingMode=a;this.spatialReference=c;this.unitInMeters=e;this.coordinateSystem=b;this._coordinateSystem=d.create(b)}Object.defineProperty(b.prototype,"extent",{set:function(a){a&&d.setExtent(this.coordinateSystem,a,this.coordinateSystem)},enumerable:!1,configurable:!0});b.prototype.getAltitude=function(a){return d.altitudeAt(this.coordinateSystem,a)};b.prototype.setAltitude=function(a,c){d.setAltitudeAt(this.coordinateSystem,c,a,c)};b.prototype.setAltitudeOfTransformation=
function(a,c){d.setAltitudeOfTransformation(this.coordinateSystem,c,a,c)};b.prototype.worldUpAtPosition=function(a,c){return d.normalAt(this.coordinateSystem,a,c)};b.prototype.worldBasisAtPosition=function(a,c,b){return d.axisAt(this.coordinateSystem,a,c,b)};b.prototype.basisMatrixAtPosition=function(a,c){var b=this.worldBasisAtPosition(a,0,g.sv3d.get()),d=this.worldBasisAtPosition(a,1,g.sv3d.get());a=this.worldBasisAtPosition(a,2,g.sv3d.get());v.mat4.set(c,b[0],b[1],b[2],0,d[0],d[1],d[2],0,a[0],
a[1],a[2],0,0,0,0,1);return c};b.prototype.intersectManifoldClosestSilhouette=function(a,c,b){d.elevate(this.coordinateSystem,c,this._coordinateSystem);d.intersectRayClosestSilhouette(this._coordinateSystem,a,b);return b};b.prototype.intersectManifold=function(a,c,b){d.elevate(this.coordinateSystem,c,this._coordinateSystem);c=g.sv3d.get();return d.intersectRay(this._coordinateSystem,a,c)?(m.vec3.copy(b,c),!0):!1};b.prototype.intersectInfiniteManifold=function(a,c,b){if(1===this.viewingMode)return this.intersectManifold(a,
c,b);d.elevate(this.coordinateSystem,c,this._coordinateSystem);c=this._coordinateSystem.value;var e=g.sv3d.get();return f.plane.intersectRay(c.plane,a,e)?(m.vec3.copy(b,e),!0):!1};b.prototype.toRenderCoords=function(a,c,b){return n.isDehydratedPoint(a)?k.pointToVector(a,c,this.spatialReference):p.vectorToVector(a,c,b,this.spatialReference)};b.prototype.fromRenderCoords=function(a,c,b){return n.isDehydratedPoint(c)?k.vectorToDehydratedPoint(a,this.spatialReference,c,b):c instanceof w?k.vectorToPoint(a,
this.spatialReference,c):p.vectorToVector(a,this.spatialReference,c,t.unwrap(b))};b.createGlobal=function(a){var c=d.fromValues(f.sphere,f.sphere.fromValues(x.earthRadius,[0,0,0]));return new b(1,a,1,c)};b.createLocal=function(a){var c=d.fromValues(f.boundedPlane,f.boundedPlane.fromValues([0,0,0],[q,0,0],[0,q,0])),e=u.getMetersPerUnitForSR(a);return new b(2,a,e,c)};b.createMode=function(a,c){switch(a){case 2:return b.createLocal(c);case 1:return b.createGlobal(c);default:r.neverReached(a)}};return b}();
h.RenderCoordsHelper=l;var q=Math.pow(2,50)});