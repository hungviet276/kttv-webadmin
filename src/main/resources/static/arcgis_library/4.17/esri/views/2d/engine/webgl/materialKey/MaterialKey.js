// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../../../../core/Error ../enums ../mesh/templates/meshUtils".split(" "),function(l,e,f,x,c,y){function h(a,b){void 0===b&&(b=!1);var d=c.WGLVVFlag.SIZE_FIELD_STOPS|c.WGLVVFlag.SIZE_MINMAX_VALUE|c.WGLVVFlag.SIZE_SCALE_STOPS|c.WGLVVFlag.SIZE_UNIT_VALUE;a=(a&(c.WGLVVTarget.FIELD_TARGETS_OUTLINE|c.WGLVVTarget.MINMAX_TARGETS_OUTLINE|c.WGLVVTarget.SCALE_TARGETS_OUTLINE|c.WGLVVTarget.UNIT_TARGETS_OUTLINE))>>>4;return b?d&a:d&~a}function v(a){var b=h(a,!1);return a&(c.WGLVVFlag.COLOR|
c.WGLVVFlag.OPACITY|c.WGLVVFlag.ROTATION|b)}Object.defineProperty(e,"__esModule",{value:!0});e.LabelMaterialKey=e.TextMaterialKey=e.LineMaterialKey=e.MarkerMaterialKey=e.FillMaterialKey=e.MaterialKeyBase=e.hydrateMaterialKey=e.createMaterialKey=e.getLabelVVFlags=e.getTextVVFlags=e.getLineVVFlags=e.getFillVVFlags=e.getMarkerVVFlags=e.getSizeFlagsMask=void 0;e.getSizeFlagsMask=h;e.getMarkerVVFlags=v;e.getFillVVFlags=function(a){return a&(c.WGLVVFlag.COLOR|c.WGLVVFlag.OPACITY)};e.getLineVVFlags=function(a,
b){if(b)return b=h(a,!0),a&b;b=h(a,!1);return a&(c.WGLVVFlag.COLOR|c.WGLVVFlag.OPACITY|b)};e.getTextVVFlags=function(a){return v(a)};e.getLabelVVFlags=function(a){var b=h(a,!1);return a&b};e.createMaterialKey=function(a,b,d,k,z){switch(a){case c.WGLGeometryType.FILL:return p.from(b,k);case c.WGLGeometryType.LINE:return q.from(b,d);case c.WGLGeometryType.MARKER:return r.from(b);case c.WGLGeometryType.TEXT:return t.from(b);case c.WGLGeometryType.LABEL:return u.from(b,z);default:throw Error("Unable to createMaterialKey for unknown geometryType "+
a);}};e.hydrateMaterialKey=function(a){switch(g.load(a).geometryType){case c.WGLGeometryType.MARKER:return new r(a);case c.WGLGeometryType.FILL:return new p(a);case c.WGLGeometryType.LINE:return new q(a);case c.WGLGeometryType.TEXT:return new t(a);case c.WGLGeometryType.LABEL:return new u(a)}};var g=function(){function a(b){this._data=0;this._data=b}a.load=function(b){var a=this.shared;a.data=b;return a};Object.defineProperty(a.prototype,"data",{get:function(){return this._data},set:function(b){this._data=
b},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"geometryType",{get:function(){return this.bits(8,11)},set:function(b){this.setBits(b,8,11)},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"mapAligned",{get:function(){return!!this.bit(20)},set:function(b){this.setBit(20,b)},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"sdf",{get:function(){return!!this.bit(11)},set:function(b){this.setBit(11,b)},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,
"pattern",{get:function(){return!!this.bit(12)},set:function(b){this.setBit(12,b)},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"textureBinding",{get:function(){return this.bits(0,8)},set:function(b){this.setBits(b,0,8)},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"geometryTypeString",{get:function(){switch(this.geometryType){case c.WGLGeometryType.FILL:return"fill";case c.WGLGeometryType.MARKER:return"marker";case c.WGLGeometryType.LINE:return"line";case c.WGLGeometryType.TEXT:return"text";
case c.WGLGeometryType.LABEL:return"label";default:throw new x("Unable to handle unknown geometryType: "+this.geometryType);}},enumerable:!1,configurable:!0});a.prototype.setBit=function(b,a){b=1<<b;this._data=a?this._data|b:this._data&~b};a.prototype.bit=function(b){return(this._data&1<<b)>>b};a.prototype.setBits=function(b,a,k){for(var d=0;a<k;a++,d++)this.setBit(a,0!==(b&1<<d))};a.prototype.bits=function(b,a){for(var k=0,d=0;b<a;b++,d++)k|=this.bit(b)<<d;return k};a.prototype.hasVV=function(){return!1};
a.prototype.setVV=function(b,a){};a.prototype.getVariation=function(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf}};a.prototype.getVariationHash=function(){return this._data&~(7&this.textureBinding)};a.shared=new a(0);return a}();e.MaterialKeyBase=g;l=function(a){return function(b){function a(){return null!==b&&b.apply(this,arguments)||this}f.__extends(a,b);Object.defineProperty(a.prototype,"vvSizeMinMaxValue",{get:function(){return 0!==this.bit(16)},set:function(b){this.setBit(16,
b)},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"vvSizeScaleStops",{get:function(){return 0!==this.bit(17)},set:function(b){this.setBit(17,b)},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"vvSizeFieldStops",{get:function(){return 0!==this.bit(18)},set:function(b){this.setBit(18,b)},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"vvSizeUnitValue",{get:function(){return 0!==this.bit(19)},set:function(b){this.setBit(19,b)},enumerable:!1,configurable:!0});
a.prototype.hasVV=function(){return b.prototype.hasVV.call(this)||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue};a.prototype.setVV=function(a,d){b.prototype.setVV.call(this,a,d);a&=h(a,d);this.vvSizeMinMaxValue=!!(a&c.WGLVVFlag.SIZE_MINMAX_VALUE);this.vvSizeFieldStops=!!(a&c.WGLVVFlag.SIZE_FIELD_STOPS);this.vvSizeUnitValue=!!(a&c.WGLVVFlag.SIZE_UNIT_VALUE);this.vvSizeScaleStops=!!(a&c.WGLVVFlag.SIZE_SCALE_STOPS)};return a}(a)};var w=function(a){return function(b){function a(){return null!==
b&&b.apply(this,arguments)||this}f.__extends(a,b);Object.defineProperty(a.prototype,"vvRotation",{get:function(){return 0!==this.bit(15)},set:function(b){this.setBit(15,b)},enumerable:!1,configurable:!0});a.prototype.hasVV=function(){return b.prototype.hasVV.call(this)||this.vvRotation};a.prototype.setVV=function(a,d){b.prototype.setVV.call(this,a,d);this.vvRotation=!d&&!!(a&c.WGLVVFlag.ROTATION)};return a}(a)},m=function(a){return function(b){function a(){return null!==b&&b.apply(this,arguments)||
this}f.__extends(a,b);Object.defineProperty(a.prototype,"vvColor",{get:function(){return 0!==this.bit(13)},set:function(a){this.setBit(13,a)},enumerable:!1,configurable:!0});a.prototype.hasVV=function(){return b.prototype.hasVV.call(this)||this.vvColor};a.prototype.setVV=function(a,d){b.prototype.setVV.call(this,a,d);this.vvColor=!d&&!!(a&c.WGLVVFlag.COLOR)};return a}(a)},n=function(a){return function(a){function b(){return null!==a&&a.apply(this,arguments)||this}f.__extends(b,a);Object.defineProperty(b.prototype,
"vvOpacity",{get:function(){return 0!==this.bit(14)},set:function(a){this.setBit(14,a)},enumerable:!1,configurable:!0});b.prototype.hasVV=function(){return a.prototype.hasVV.call(this)||this.vvOpacity};b.prototype.setVV=function(b,d){a.prototype.setVV.call(this,b,d);this.vvOpacity=!d&&!!(b&c.WGLVVFlag.OPACITY)};return b}(a)},p=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}f.__extends(b,a);b.load=function(a){var b=this.shared;b.data=a;return b};b.from=function(a,b){var d=
this.load(0);d.geometryType=c.WGLGeometryType.FILL;b?d.dotDensity=!0:d.setVV(a,!1);return d.data};b.prototype.getVariation=function(){return f.__assign(f.__assign({},a.prototype.getVariation.call(this)),{dotDensity:this.dotDensity,vvColor:this.vvColor,vvOpacity:this.vvOpacity})};Object.defineProperty(b.prototype,"dotDensity",{get:function(){return!!this.bit(15)},set:function(a){this.setBit(15,a)},enumerable:!1,configurable:!0});b.shared=new b(0);return b}(m(n(g)));e.FillMaterialKey=p;var r=function(a){function b(){return null!==
a&&a.apply(this,arguments)||this}f.__extends(b,a);b.load=function(a){var b=this.shared;b.data=a;return b};b.from=function(a){var b=this.load(0);b.geometryType=c.WGLGeometryType.MARKER;b.setVV(a,!1);return b.data};b.prototype.getVariation=function(){return f.__assign(f.__assign({},a.prototype.getVariation.call(this)),{vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,
vvSizeUnitValue:this.vvSizeUnitValue})};b.shared=new b(0);return b}(m(n(w(l(g)))));e.MarkerMaterialKey=r;var q=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}f.__extends(b,a);b.load=function(a){var b=this.shared;b.data=a;return b};b.from=function(a,b){var d=this.load(0);d.geometryType=c.WGLGeometryType.LINE;d.setVV(a,b);return d.data};b.prototype.getVariation=function(){return f.__assign(f.__assign({},a.prototype.getVariation.call(this)),{vvColor:this.vvColor,vvOpacity:this.vvOpacity,
vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue})};b.shared=new b(0);return b}(m(n(l(g))));e.LineMaterialKey=q;var t=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}f.__extends(b,a);b.load=function(a){var b=this.shared;b.data=a;return b};b.from=function(a){var b=this.load(a);b.geometryType=c.WGLGeometryType.TEXT;b.setVV(a,!1);return b.data};b.prototype.getVariation=function(){return f.__assign(f.__assign({},
a.prototype.getVariation.call(this)),{vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue})};b.shared=new b(0);return b}(m(n(w(l(g)))));e.TextMaterialKey=t;var u=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}f.__extends(b,a);b.load=function(a){var b=this.shared;b.data=a;return b};b.from=function(a,
b){var d=this.load(0);d.geometryType=c.WGLGeometryType.LABEL;d.setVV(a,!1);d.mapAligned=!!y.isMapAligned(b);return d.data};b.prototype.getVariation=function(){return f.__assign(f.__assign({},a.prototype.getVariation.call(this)),{vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue})};b.shared=new b(0);return b}(l(g));e.LabelMaterialKey=u});