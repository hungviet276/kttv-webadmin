// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/BreakpointsOwner":function(){define("require exports tslib ../core/ArrayPool ../core/Handles ../core/watchUtils ../core/accessorSupport/decorators".split(" "),function(p,a,e,m,k,b,c){function d(a,b){return b?n[a].valueToClassName[b].split(" "):[]}Object.defineProperty(a,"__esModule",{value:!0});a.BreakpointsOwner=void 0;var n={widthBreakpoint:{getValue:function(a){var b=a.viewSize[0];a=a.breakpoints;var h=this.values;return b<=a.xsmall?h.xsmall:b<=a.small?h.small:b<=a.medium?
h.medium:b<=a.large?h.large:h.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",
large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue:function(a){var b=a.viewSize[1];a=a.breakpoints;var h=this.values;return b<=a.xsmall?h.xsmall:b<=a.small?h.small:b<=a.medium?h.medium:
b<=a.large?h.large:h.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",
large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue:function(a){a=a.viewSize;var b=this.values;return a[1]>=a[0]?b.portrait:b.landscape},values:{portrait:"portrait",landscape:"landscape"},
valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},l={xsmall:544,small:768,medium:992,large:1200};a.BreakpointsOwner=function(a){return function(a){function f(){for(var b=[],f=0;f<arguments.length;f++)b[f]=arguments[f];b=a.apply(this,b)||this;b._breakpointsHandles=new k;b.orientation=null;b.widthBreakpoint=null;b.heightBreakpoint=null;b.breakpoints=l;return b}e.__extends(f,a);f.prototype.initialize=function(){this._breakpointsHandles.add(b.init(this,
["breakpoints","size"],this._updateClassNames))};f.prototype.destroy=function(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles.destroy(),this._breakpointsHandles=null)};Object.defineProperty(f.prototype,"breakpoints",{set:function(a){var b=this._get("breakpoints");if(a!==b){b=(b=a)&&b.xsmall<b.small&&b.small<b.medium&&b.medium<b.large;if(!b){var f=JSON.stringify(l,null,2);console.warn("provided breakpoints are not valid, using defaults:"+f)}a=b?a:l;this._set("breakpoints",
e.__assign({},a))}},enumerable:!1,configurable:!0});f.prototype._updateClassNames=function(){if(this.container){var a=m.acquire(),b=m.acquire(),f=!1,h;for(h in n){var g=this[h],c=n[h].getValue({viewSize:this.size,breakpoints:this.breakpoints});g!==c&&(f=!0,this[h]=c,d(h,g).forEach(function(a){return b.push(a)}),d(h,c).forEach(function(b){return a.push(b)}))}f&&(this._applyClassNameChanges(a,b),m.release(a),m.release(b))}};f.prototype._applyClassNameChanges=function(a,b){var f=this.container;f&&(b.forEach(function(a){return f.classList.remove(a)}),
a.forEach(function(a){return f.classList.add(a)}))};f.prototype._removeActiveClassNames=function(){var a=this.container;if(a)for(var b in n)d(b,this[b]).forEach(function(b){return a.classList.remove(b)})};e.__decorate([c.property()],f.prototype,"breakpoints",null);e.__decorate([c.property()],f.prototype,"orientation",void 0);e.__decorate([c.property()],f.prototype,"widthBreakpoint",void 0);e.__decorate([c.property()],f.prototype,"heightBreakpoint",void 0);return f=e.__decorate([c.subclass("esri.views.BreakpointsOwner")],
f)}(a)}})},"esri/views/Magnifier":function(){define(["require","exports","tslib","../core/Accessor","../core/accessorSupport/decorators"],function(p,a,e,m,k){return function(a){function b(b){b=a.call(this,b)||this;b.factor=1.5;b.offsetX=0;b.offsetY=0;b.position=null;b.visible=!1;return b}e.__extends(b,a);Object.defineProperty(b.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!1,configurable:!0});e.__decorate([k.property({type:Number})],b.prototype,"factor",void 0);
e.__decorate([k.property({type:Number})],b.prototype,"offsetX",void 0);e.__decorate([k.property({type:Number})],b.prototype,"offsetY",void 0);e.__decorate([k.property()],b.prototype,"position",void 0);e.__decorate([k.property({readOnly:!0,dependsOn:["factor","offsetX","offsetY","position","visible"]})],b.prototype,"version",null);e.__decorate([k.property({type:Boolean})],b.prototype,"visible",void 0);return b=e.__decorate([k.subclass("esri.views.Magnifier")],b)}(m)})},"esri/views/MapViewBase":function(){define("require exports tslib ../geometry ../Viewpoint ../core/Error ../core/Logger ../core/promiseUtils ../core/screenUtils ../core/watchUtils ../core/accessorSupport/decorators ../geometry/support/webMercatorUtils ../layers/support/TileInfo ./PopupView ./View ./ViewAnimation ./2d/AnimationManager ./2d/FrameTask ./2d/layerViewModuleImportUtils ./2d/MapViewConstraints ./2d/PaddedViewState ./2d/tiling ./2d/viewpointUtils ./2d/support/Timeline".split(" "),
function(p,a,e,m,k,b,c,d,n,l,g,f,h,v,q,C,r,t,u,y,D,x,w,A){var B=c.getLogger("esri.views.MapView");return function(a){function c(b){var f=a.call(this,b)||this;f._stationaryTimer=null;f.frameTask=new t.default(f);f.featuresTilingScheme=null;f.fullOpacity=1;f.graphicsView=null;f.initialExtent=null;f.labelManager=null;f.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0};f.resizeAlign="center";f.timeline=new A.Timeline;f.type="2d";f.constraints=
new y;f.padding={top:0,right:0,bottom:0,left:0};var c=f.handles,h=function(){return f.notifyChange("updating")};c.add([f.watch("viewpoint",function(){f._lastStationaryEventTimestamp=performance.now();f._flipStationary(160)},!0),f.on("resize",function(a){return f._resizeHandler(a)}),f.watch("animationManager.animation",function(a){f.animation=a}),f.allLayerViews.on("change",function(){h();c.remove("map-view-base-layerViewsUpdating");c.add(f.allLayerViews.map(function(a){return a.watch("updating",h)}),
"map-view-base-layerViewsUpdating")})],"map-view-base");return f}e.__extends(c,a);c.prototype.destroy=function(){this.destroyed||(this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null)};Object.defineProperty(c.prototype,"animation",{set:function(a){var b=this,f=this._get("animation");a!==f&&(f&&f.stop(),!a||a.isFulfilled()?this._set("animation",null):(this._set("animation",a),this.frameTask.animationInProgress=!0,f=function(){a===b._get("animation")&&(b._set("animation",null),b.frameTask.requestFrame());
b.frameTask.animationInProgress=!1},a.when(f,f)))},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"center",{get:function(){if(!this.ready)return this._get("center");var a=this.state.paddedViewState,b=a.center;return new m.Point({x:b[0],y:b[1],spatialReference:a.spatialReference})},set:function(a){if(null!=a)if(this._normalizeInput(a))if(this.ready){var b=this.viewpoint;w.centerAt(b,b,a);this.viewpoint=b}else this._set("center",a),this.notifyChange("initialExtentRequired");else B.error("#center",
"incompatible spatialReference "+JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"constraints",{set:function(a){var b=this,f=this._get("constraints");f&&(this.handles.remove("map-view-base-constraints"),f.destroy());this._set("constraints",a);a&&(a.view=this,this.ready&&(this.state.viewpoint=a.fit(this.state.paddedViewState.viewpoint)),this.handles.add(a.on("update",function(){b.ready&&
b.state&&(b.state.viewpoint=a.fit(b.state.paddedViewState.viewpoint))}),"map-view-base-constraints"))},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"extent",{get:function(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")},set:function(a){if(null!=a){var b=this._normalizeInput(a);b?b.width&&b.height?this.ready?(a=this.viewpoint,w.setExtent(a,a,b,this.size,{constraints:this.constraints}),this.viewpoint=a):(this._set("extent",b),this._set("center",
null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),this.notifyChange("initialExtentRequired")):B.error("#extent","invalid extent size"):B.error("#center","incompatible spatialReference "+JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))}},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"initialExtentRequired",{get:function(){var a=this.extent,b=this.center,f=this.scale,c=this.viewpoint,h=this.zoom;
return this.get("map.initialViewProperties.viewpoint")||a||b&&(0!==f||-1!==h)||c?!1:!0},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"padding",{get:function(){return this.ready?this.state.padding:this._get("padding")},set:function(a){this.ready?(this.state.padding=a,this._set("padding",this.state.padding)):this._set("padding",a)},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"resolution",{get:function(){return this.state?this.state.resolution:0},enumerable:!1,
configurable:!0});Object.defineProperty(c.prototype,"rotation",{get:function(){return this.ready?this.state.rotation:this._get("rotation")},set:function(a){if(!isNaN(a))if(this.ready){var b=this.viewpoint;w.rotateTo(b,b,a);this.viewpoint=b}else this._set("rotation",a)},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"scale",{get:function(){return this.ready?this.state.scale:this._get("scale")},set:function(a){if(a&&!isNaN(a))if(this.ready){var b=this.viewpoint;w.scaleTo(b,b,a);this.viewpoint=
b}else{this._set("scale",a);this._set("zoom",-1);if(a=this._get("extent"))this._set("extent",null),this._set("center",a.center);this.notifyChange("initialExtentRequired")}},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"stationary",{get:function(){return!this.animation&&!this.navigating&&!this._get("resizing")&&!this._stationaryTimer},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"updating",{get:function(){return!this.destroyed&&(!0===this.get("layerViewManager.updating")||
!0===this.get("labelManager.updating")||!0===this.get("graphicsView.updating")||this.allLayerViews.some(function(a){return!a.destroyed&&!("layerViews"in a)&&!0===a.updating}))},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"viewpoint",{get:function(){if(!this.ready)return this._get("viewpoint");var a=this.state.paddedViewState;return a&&a.viewpoint.clone()},set:function(a){if(null!=a){var b=this._normalizeInput(a);b?this.ready?(a=new k({targetGeometry:new m.Point,scale:0,rotation:0}),
w.copy(a,b),this.constraints.constrain(a,this.state.paddedViewState.viewpoint),this.state.viewpoint=a,this.frameTask.requestFrame(),this._set("viewpoint",a)):(this._set("viewpoint",b),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),this.notifyChange("initialExtentRequired")):!a.scale||isNaN(a.scale)?B.error("#viewpoint","invalid scale value of "+a.scale):a.targetGeometry?B.error("#viewpoint","incompatible spatialReference "+JSON.stringify(a.targetGeometry.spatialReference)+
" with view's spatialReference "+JSON.stringify(this.spatialReference)):B.error("#viewpoint","geometry not defined")}},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"zoom",{get:function(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")},set:function(a){if(null!=a){if(!this.ready){this.notifyChange("initialExtentRequired");this._set("zoom",a);this._set("scale",0);var b=this._get("extent");b&&(this._set("extent",null),this._set("center",b.center))}this.constraints.effectiveLODs&&
(b=this.viewpoint,w.scaleTo(b,b,this.constraints.zoomToScale(a)),this.viewpoint=b,this._set("zoom",this.constraints.scaleToZoom(this.scale)))}},enumerable:!1,configurable:!0});c.prototype.goTo=function(a,b){var f=this;if(a)return this.animation&&(this.animation=null),this._createAnimation(),l.whenTrueOnce(this,"ready",b&&b.signal).then(function(){var c=e.__assign({animate:!0},b),h=w.createAsync(a,f);f.animation.update(h);f._gotoTask={};return c.animate?f._gotoAnimated(h,c):f._gotoImmediate(h,c)});
B.error("#goTo()","target cannot be null or undefined")};c.prototype.hitTest=function(a){return d.reject("Should be implemented by subclasses")};c.prototype.popupHitTest=function(a){var b=this;return this.hitTest(a).then(function(f){return e.__assign(e.__assign({},f),{mapPoint:b.toMap(a)})})};c.prototype.toMap=function(a){if(!this.ready)return null;a=this.state.toMap([0,0],[a.x,a.y]);return new m.Point({x:a[0],y:a[1],spatialReference:this.spatialReference})};c.prototype.isTileInfoRequired=function(){return!0};
c.prototype.toScreen=function(a){if(!this.ready)return null;a=this._normalizeInput(a);a=[a.x,a.y];a=this.state.toScreen(a,a);return n.createScreenPoint(a[0],a[1])};c.prototype.pixelSizeAt=function(){return this.ready?this.state.resolution:(B.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)};c.prototype.requestUpdate=function(){this.ready&&this.frameTask.requestUpdate()};c.prototype.getDefaultSpatialReference=function(){return this.get("map.initialViewProperties.spatialReference")||
this.get("defaultsFromMap.spatialReference")||null};c.prototype.isSpatialReferenceSupported=function(a,b){return b||this._get("ready")?!0:null!==this._getDefaultViewpoint()};c.prototype.importLayerView=function(a){return u.layerView2DImporter.importLayerView(a)};c.prototype.hasLayerViewModule=function(a){return u.layerView2DImporter.hasLayerViewModule(a)};c.prototype._createAnimation=function(){if(!this.animation||this.animation.done)this.animation=new C;return this.animation};c.prototype._cancellableGoTo=
function(a,b,f){var c=this,h=f.then(function(){a===c._gotoTask&&(c.animation=null)}).catch(function(f){a===c._gotoTask&&(c.animation=null,b.done||(b.stop(),c.frameTask.animationInProgress=!1));throw f;}),g=d.create(function(a){return a(h)});b.when().catch(function(){a===c._gotoTask&&g.cancel&&g.cancel()});return g};c.prototype._gotoImmediate=function(a,f){var c=this,h=this._gotoTask,g=this.animation;a=a.then(function(a){d.throwIfAborted(f);if(h!==c._gotoTask)throw new b("view:goto-interrupted","Goto was interrupted");
c.viewpoint=g.target=a;g.finish()});return this._cancellableGoTo(h,g,a)};c.prototype._gotoAnimated=function(a,f){var c=this,h=this._gotoTask,g=this.animation;a=a.then(function(a){d.throwIfAborted(f);if(h!==c._gotoTask)throw new b("view:goto-interrupted","Goto was interrupted");g.update(a);c.animationManager.animate(g,c.viewpoint,f);return g.when().then(function(){},function(){})});return this._cancellableGoTo(h,g,a)};c.prototype._resizeHandler=function(a){var b=this.state;if(b){var f=this.state.paddedViewState.viewpoint,
c=this.state.paddedViewState.size.concat();b.size=[a.width,a.height];w.resize(f,f,c,this.state.paddedViewState.size,this.resizeAlign);f=this.constraints.constrain(f,null);this.state.viewpoint=f}};c.prototype._startup=function(){var a=this._getDefaultViewpoint();this.constraints.view=this;this.constraints.fit(a);this._set("animationManager",new r.default({view:this}));this._set("state",new D({padding:this._get("padding"),size:this.size,viewpoint:a}));this._set("featuresTilingScheme",new x.TileInfoView(h.create({spatialReference:this.spatialReference,
size:512})));this._set("ready",!0);this.frameTask&&this.frameTask.start()};c.prototype._teardown=function(){this.frameTask&&this.frameTask.stop();this._set("ready",!1);this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null);var a=this.state.paddedViewState,b=a.center,f=a.spatialReference,c=a.rotation,a=a.scale,b=new m.Point({x:b[0],y:b[1],spatialReference:f});this._set("viewpoint",null);this._set("extent",null);this._set("center",b);this._set("zoom",-1);this._set("rotation",
c);this._set("scale",a);this._set("spatialReference",f);this.constraints.view=null;this.animationManager.destroy();this._set("animationManager",null);this._set("state",null);this.animation=null};c.prototype._flipStationary=function(a){var b=this;return null!==this._stationaryTimer?this._stationaryTimer:this._stationaryTimer=setTimeout(function(){b._stationaryTimer=null;var a=performance.now()-b._lastStationaryEventTimestamp;160>a&&(b._stationaryTimer=b._flipStationary(a))},a)};c.prototype._normalizeInput=
function(a,b){void 0===b&&(b=this.spatialReference);var c=a&&a.targetGeometry||a;return b?c?b.equals(c.spatialReference)?a:f.canProject(c,b)?a&&"esri.Viewpoint"===a.declaredClass?(a.targetGeometry=f.project(c,b),a):f.project(c,b):null:null:a};c.prototype._getDefaultViewpoint=function(){var a=this.constraints,b=this._get("zoom"),f=this._get("scale"),c=this._normalizeInput(this._get("center")),h=this._normalizeInput(this._get("extent")),g=this._get("rotation"),d=this._normalizeInput(this._get("viewpoint"));
a.effectiveLODs?-1!==b&&(f=a.zoomToScale(b)):b=-1;var l=null,v=null,b=0,a=d&&d.rotation,t=d&&d.targetGeometry;t&&("extent"===t.type?l=t:"point"===t.type&&(v=t,b=d.scale));d=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent"));t=this._normalizeInput(this.initialExtent);h=h||l||d||t;c=c||v||h&&h.center;v=this.get("map.initialViewProperties.viewpoint.scale");f=f||b||v||h&&w.extentToScale(h,this.size);b=this.get("map.initialViewProperties.viewpoint.rotation");return c&&
f?new k({targetGeometry:c,scale:f,rotation:g||a||b||0}):null};e.__decorate([g.property()],c.prototype,"_stationaryTimer",void 0);e.__decorate([g.property()],c.prototype,"animation",null);e.__decorate([g.property({readOnly:!0})],c.prototype,"animationManager",void 0);e.__decorate([g.property({value:null,type:m.Point,dependsOn:["state.id","ready"]})],c.prototype,"center",null);e.__decorate([g.property({type:y})],c.prototype,"constraints",null);e.__decorate([g.property({value:null,type:m.Extent,dependsOn:["state.id",
"ready"]})],c.prototype,"extent",null);e.__decorate([g.property({readOnly:!0})],c.prototype,"featuresTilingScheme",void 0);e.__decorate([g.property()],c.prototype,"fullOpacity",void 0);e.__decorate([g.property()],c.prototype,"graphicsView",void 0);e.__decorate([g.property({type:m.Extent})],c.prototype,"initialExtent",void 0);e.__decorate([g.property({dependsOn:["map.initialViewProperties?.viewpoint"]})],c.prototype,"initialExtentRequired",null);e.__decorate([g.property()],c.prototype,"labelManager",
void 0);e.__decorate([g.property({value:{top:0,right:0,bottom:0,left:0},cast:function(a){return e.__assign({top:0,right:0,bottom:0,left:0},a)}})],c.prototype,"padding",null);e.__decorate([g.property({type:Object})],c.prototype,"renderingOptions",void 0);e.__decorate([g.property()],c.prototype,"resizeAlign",void 0);e.__decorate([g.property({readOnly:!0,dependsOn:["state.id"]})],c.prototype,"resolution",null);e.__decorate([g.property({value:0,type:Number,dependsOn:["state.id","ready"]})],c.prototype,
"rotation",null);e.__decorate([g.property({value:0,type:Number,dependsOn:["state.id","ready"]})],c.prototype,"scale",null);e.__decorate([g.property({type:m.SpatialReference,dependsOn:["map.initialViewProperties?.spatialReference","defaultsFromMap.isSpatialReferenceDone"]})],c.prototype,"spatialReference",void 0);e.__decorate([g.property({readOnly:!0})],c.prototype,"state",void 0);e.__decorate([g.property({dependsOn:["animation","navigating","resizing","_stationaryTimer"]})],c.prototype,"stationary",
null);e.__decorate([g.property({type:A.Timeline,readOnly:!0})],c.prototype,"timeline",void 0);e.__decorate([g.property({readOnly:!0})],c.prototype,"type",void 0);e.__decorate([g.property({readOnly:!0,dependsOn:["layerViewManager.updating","labelManager.updating","graphicsView?.updating"]})],c.prototype,"updating",null);e.__decorate([g.property({value:null,type:k,dependsOn:["state.id","ready"]})],c.prototype,"viewpoint",null);e.__decorate([g.property({value:-1,dependsOn:["state.id"]})],c.prototype,
"zoom",null);return c=e.__decorate([g.subclass("esri.views.MapViewBase")],c)}(v.PopupView(q))})},"esri/layers/support/TileInfo":function(){define("require exports tslib ../../geometry ../../core/jsonMap ../../core/JSONSupport ../../core/unitUtils ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),function(p,a,e,m,k,b,c,d,n,l,g,f,h){var v=
new k.default({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});return function(a){function b(b){b=a.call(this,b)||this;b.dpi=96;b.format=null;b.origin=null;b.minScale=0;b.maxScale=0;b.size=null;b.spatialReference=null;return b}e.__extends(b,a);q=b;b.create=function(a){void 0===a&&(a={size:256,spatialReference:m.SpatialReference.WebMercator});
var b=a.resolutionFactor||1,f=a.scales,h=a.size||256,d=a.spatialReference||m.SpatialReference.WebMercator;if(!g.isValid(d)){b=[];if(f)for(a=0;a<f.length;a++){var l=f[a];b.push({level:a,scale:l,resolution:l})}else{var v=5E-4;for(a=23;0<=a;a--)b.unshift({level:a,scale:v,resolution:v}),v*=2}return new q({dpi:96,lods:b,origin:new m.Point(0,0,d),size:[h,h],spatialReference:d})}var l=g.getInfo(d),n=a.origin?new m.Point({x:a.origin.x,y:a.origin.y,spatialReference:d}):l?new m.Point({x:l.origin[0],y:l.origin[1],
spatialReference:d}):new m.Point({x:0,y:0,spatialReference:d}),t=1/(39.37*c.getMetersPerUnitForSR(d)*96),e=[];if(f)for(a=0;a<f.length;a++)l=f[a],v=l*t,e.push({level:a,scale:l,resolution:v});else for(l=g.isGeographic(d)?512/h*5.916575275917094E8:256/h*5.91657527591555E8,f=Math.ceil(24/b),e.push({level:0,scale:l,resolution:l*t}),a=1;a<f;a++)l/=Math.pow(2,b),v=l*t,e.push({level:a,scale:l,resolution:v});return new q({dpi:96,lods:e,origin:n,size:[h,h],spatialReference:d})};Object.defineProperty(b.prototype,
"isWrappable",{get:function(){var a=this.spatialReference,b=this.origin;if(a&&b){var f=g.getInfo(a);return a.isWrappable&&Math.abs(f.origin[0]-b.x)<=f.dx}return!1},enumerable:!1,configurable:!0});b.prototype.readOrigin=function(a,b){return m.Point.fromJSON(e.__assign({spatialReference:b.spatialReference},a))};Object.defineProperty(b.prototype,"lods",{set:function(a){var b=this,f=0,c=0,h=[];this._levelToLOD={};a&&(f=-Infinity,c=Infinity,a.forEach(function(a){h.push(a.scale);f=a.scale>f?a.scale:f;c=
a.scale<c?a.scale:c;b._levelToLOD[a.level]=a}));this._set("scales",h);this._set("minScale",f);this._set("maxScale",c);this._set("lods",a);this._initializeUpsampleLevels()},enumerable:!1,configurable:!0});b.prototype.readSize=function(a,b){return[b.cols,b.rows]};b.prototype.writeSize=function(a,b){b.cols=a[0];b.rows=a[0]};b.prototype.zoomToScale=function(a){var b=this.scales;if(0>=a)return b[0];if(a>=b.length)return b[b.length-1];var f=Math.round(a);return b[f]+(f-a)*(b[Math.round(a-.5)]-b[f])};b.prototype.scaleToZoom=
function(a){for(var b=this.scales,f=b.length-1,c=0;c<f;c++){var h=b[c],g=b[c+1];if(h<=a)break;if(g===a)return c+1;if(h>a&&g<a)return c+1-(a-g)/(h-g)}return c};b.prototype.snapScale=function(a,b){void 0===b&&(b=.95);a=this.scaleToZoom(a);return a%Math.floor(a)>=b?this.zoomToScale(Math.ceil(a)):this.zoomToScale(Math.floor(a))};b.prototype.tileAt=function(a,b,c,h){var d=this.lodAt(a);if(!d)return null;var v;if("number"===typeof b)v=b,b=c;else{if(g.equals(b.spatialReference,this.spatialReference))v=b.x,
b=b.y;else{h=f.project(b,this.spatialReference);if(!h)return null;v=h.x;b=h.y}h=c}c=d.resolution*this.size[0];d=d.resolution*this.size[1];h||(h={id:null,level:0,row:0,col:0,extent:l.create()});h.level=a;h.row=Math.floor((this.origin.y-b)/d+.001);h.col=Math.floor((v-this.origin.x)/c+.001);this.updateTileInfo(h);return h};b.prototype.updateTileInfo=function(a){var b=this.lodAt(a.level);if(b){var f=b.resolution*this.size[0],b=b.resolution*this.size[1];a.id=a.level+"/"+a.row+"/"+a.col;a.extent||(a.extent=
l.create());a.extent[0]=this.origin.x+a.col*f;a.extent[1]=this.origin.y-(a.row+1)*b;a.extent[2]=a.extent[0]+f;a.extent[3]=a.extent[1]+b}};b.prototype.upsampleTile=function(a){var b=this._upsampleLevels[a.level];if(!b||-1===b.parentLevel)return!1;a.level=b.parentLevel;a.row=Math.floor(a.row/b.factor+.001);a.col=Math.floor(a.col/b.factor+.001);this.updateTileInfo(a);return!0};b.prototype.getTileBounds=function(a,b){var f=this.lodAt(b.level).resolution,c=f*this.size[0],f=f*this.size[1];a[0]=this.origin.x+
b.col*c;a[1]=this.origin.y-(b.row+1)*f;a[2]=a[0]+c;a[3]=a[1]+f;return a};b.prototype.lodAt=function(a){return this._levelToLOD&&this._levelToLOD[a]||null};b.prototype.clone=function(){return q.fromJSON(this.write({}))};b.prototype._initializeUpsampleLevels=function(){var a=this.lods;this._upsampleLevels=[];for(var b=null,f=0;f<a.length;f++){var c=a[f];this._upsampleLevels[c.level]={parentLevel:b?b.level:-1,factor:b?b.resolution/c.resolution:0};b=c}};var q;e.__decorate([d.property({type:Number,json:{write:!0}})],
b.prototype,"compressionQuality",void 0);e.__decorate([d.property({type:Number,json:{write:!0}})],b.prototype,"dpi",void 0);e.__decorate([d.property({type:String,json:{read:v.read,write:v.write,origins:{"web-scene":{read:!1,write:!1}}}})],b.prototype,"format",void 0);e.__decorate([d.property({readOnly:!0,dependsOn:["spatialReference","origin"]})],b.prototype,"isWrappable",null);e.__decorate([d.property({type:m.Point,json:{write:!0}})],b.prototype,"origin",void 0);e.__decorate([d.reader("origin")],
b.prototype,"readOrigin",null);e.__decorate([d.property({type:[h],value:null,json:{write:!0}})],b.prototype,"lods",null);e.__decorate([d.property({readOnly:!0})],b.prototype,"minScale",void 0);e.__decorate([d.property({readOnly:!0})],b.prototype,"maxScale",void 0);e.__decorate([d.property({readOnly:!0})],b.prototype,"scales",void 0);e.__decorate([d.property({cast:function(a){return Array.isArray(a)?a:"number"===typeof a?[a,a]:[256,256]}})],b.prototype,"size",void 0);e.__decorate([d.reader("size",
["rows","cols"])],b.prototype,"readSize",null);e.__decorate([d.writer("size",{cols:{type:n.Integer},rows:{type:n.Integer}})],b.prototype,"writeSize",null);e.__decorate([d.property({type:m.SpatialReference,json:{write:!0}})],b.prototype,"spatialReference",void 0);return b=q=e.__decorate([d.subclass("esri.layers.support.TileInfo")],b)}(b.JSONSupport)})},"esri/geometry/support/aaBoundingRect":function(){define(["require","exports","../../core/compilerUtils","../Extent"],function(p,a,e,m){function k(b){void 0===
b&&(b=a.ZERO);return[b[0],b[1],b[2],b[3]]}function b(a){return a[0]>=a[2]?0:a[2]-a[0]}function c(a){return a[1]>=a[3]?0:a[3]-a[1]}function d(a,b,c){return b>=a[0]&&c>=a[1]&&b<=a[2]&&c<=a[3]}function n(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a}function l(a){return 4===a.length}function g(a,b,c){return a<b?b:a>c?c:a}Object.defineProperty(a,"__esModule",{value:!0});a.UNIT=a.ZERO=a.NEGATIVE_INFINITY=a.POSITIVE_INFINITY=a.equals=a.isPoint=a.is=a.empty=a.set=a.setMax=a.setMin=a.pad=a.offset=
a.size=a.distance=a.intersection=a.contains=a.intersects=a.containsPointWithMargin=a.containsXY=a.containsPointObject=a.containsPoint=a.center=a.area=a.diameter=a.height=a.width=a.allFinite=a.expandWithNestedArray=a.expand=a.expandPointInPlace=a.toExtent=a.fromExtent=a.fromValues=a.clone=a.create=void 0;a.create=k;a.clone=function(a){return[a[0],a[1],a[2],a[3]]};a.fromValues=function(a,b,c,g,d){void 0===d&&(d=k());d[0]=a;d[1]=b;d[2]=c;d[3]=g;return d};a.fromExtent=function(a,b){void 0===b&&(b=k());
b[0]=a.xmin;b[1]=a.ymin;b[2]=a.xmax;b[3]=a.ymax;return b};a.toExtent=function(a,b){return new m({xmin:a[0],ymin:a[1],xmax:a[2],ymax:a[3],spatialReference:b})};a.expandPointInPlace=function(a,b){b[0]<a[0]&&(a[0]=b[0]);b[0]>a[2]&&(a[2]=b[0]);b[1]<a[1]&&(a[1]=b[1]);b[1]>a[3]&&(a[3]=b[1])};a.expand=function(a,b,c){void 0===c&&(c=a);if("length"in b)if(l(b))c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],b[1]),c[2]=Math.max(a[2],b[2]),c[3]=Math.max(a[3],b[3]);else{if(2===b.length||3===b.length)c[0]=Math.min(a[0],
b[0]),c[1]=Math.min(a[1],b[1]),c[2]=Math.max(a[2],b[0]),c[3]=Math.max(a[3],b[1])}else switch(b.type){case "extent":c[0]=Math.min(a[0],b.xmin);c[1]=Math.min(a[1],b.ymin);c[2]=Math.max(a[2],b.xmax);c[3]=Math.max(a[3],b.ymax);break;case "point":c[0]=Math.min(a[0],b.x);c[1]=Math.min(a[1],b.y);c[2]=Math.max(a[2],b.x);c[3]=Math.max(a[3],b.y);break;default:e.neverReached(b)}return c};a.expandWithNestedArray=function(a,b,c){void 0===c&&(c=a);var f=b.length,g=a[0],h=a[1],d=a[2];a=a[3];for(var l=0;l<f;l++){var n=
b[l],g=Math.min(g,n[0]),h=Math.min(h,n[1]),d=Math.max(d,n[0]);a=Math.max(a,n[1])}c[0]=g;c[1]=h;c[2]=d;c[3]=a;return c};a.allFinite=function(a){for(var b=0;4>b;b++)if(!isFinite(a[b]))return!1;return!0};a.width=b;a.height=c;a.diameter=function(a){var f=b(a);a=c(a);return Math.sqrt(f*f+a*a)};a.area=function(a){return b(a)*c(a)};a.center=function(a,b){void 0===b&&(b=[0,0]);b[0]=(a[0]+a[2])/2;b[1]=(a[1]+a[3])/2;return b};a.containsPoint=function(a,b){return d(a,b[0],b[1])};a.containsPointObject=function(a,
b){return d(a,b.x,b.y)};a.containsXY=d;a.containsPointWithMargin=function(a,b,c){return b[0]>=a[0]-c&&b[1]>=a[1]-c&&b[0]<=a[2]+c&&b[1]<=a[3]+c};a.intersects=function(a,b){return Math.max(b[0],a[0])<=Math.min(b[2],a[2])&&Math.max(b[1],a[1])<=Math.min(b[3],a[3])};a.contains=function(a,b){return b[0]>=a[0]&&b[2]<=a[2]&&b[1]>=a[1]&&b[3]<=a[3]};a.intersection=function(a,b,c){void 0===c&&(c=a);var f=b[0],h=b[1],d=b[2];b=b[3];c[0]=g(a[0],f,d);c[1]=g(a[1],h,b);c[2]=g(a[2],f,d);c[3]=g(a[3],h,b);return c};
a.distance=function(a,g){var f=(a[1]+a[3])/2,h=Math.max(Math.abs(g[0]-(a[0]+a[2])/2)-b(a)/2,0);a=Math.max(Math.abs(g[1]-f)-c(a)/2,0);return Math.sqrt(h*h+a*a)};a.size=function(a,b){b[0]=a[2]-a[0];b[1]=a[3]-a[1]};a.offset=function(a,b,c,g){void 0===g&&(g=a);g[0]=a[0]+b;g[1]=a[1]+c;g[2]=a[2]+b;g[3]=a[3]+c;return g};a.pad=function(a,b,c){void 0===c&&(c=a);c[0]=a[0]-b;c[1]=a[1]-b;c[2]=a[2]+b;c[3]=a[3]+b;return c};a.setMin=function(a,b,c){void 0===c&&(c=a);c[0]=b[0];c[1]=b[1];c!==a&&(c[2]=a[2],c[3]=a[3]);
return c};a.setMax=function(a,b,c){void 0===c&&(c=a);c[2]=b[0];c[3]=b[1];c!==a&&(c[0]=a[0],c[1]=a[1]);return a};a.set=n;a.empty=function(b){return b?n(b,a.NEGATIVE_INFINITY):k(a.NEGATIVE_INFINITY)};a.is=l;a.isPoint=function(a){return(0===b(a)||!isFinite(a[0]))&&(0===c(a)||!isFinite(a[1]))};a.equals=function(a,b,c){if(null==a||null==b)return a===b;if(!l(a)||!l(b))return!1;if(c)for(var f=0;f<a.length;f++){if(!c(a[f],b[f]))return!1}else for(f=0;f<a.length;f++)if(a[f]!==b[f])return!1;return!0};a.POSITIVE_INFINITY=
[-Infinity,-Infinity,Infinity,Infinity];a.NEGATIVE_INFINITY=[Infinity,Infinity,-Infinity,-Infinity];a.ZERO=[0,0,0,0];a.UNIT=[0,0,1,1]})},"esri/layers/support/LOD":function(){define("require exports tslib ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),function(p,a,e,m,k,b){return function(a){function c(b){b=a.call(this,b)||this;b.level=0;b.levelValue=null;b.resolution=0;b.scale=0;return b}e.__extends(c,a);n=c;c.prototype.clone=function(){return new n({level:this.level,
levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};var n;e.__decorate([k.property({type:b.Integer,json:{write:!0}})],c.prototype,"level",void 0);e.__decorate([k.property({type:String,json:{write:!0}})],c.prototype,"levelValue",void 0);e.__decorate([k.property({type:Number,json:{write:!0}})],c.prototype,"resolution",void 0);e.__decorate([k.property({type:Number,json:{write:!0}})],c.prototype,"scale",void 0);return c=n=e.__decorate([k.subclass("esri.layers.support.LOD")],c)}(m.JSONSupport)})},
"esri/views/PopupView":function(){define("require exports tslib ../core/arrayUtils ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators".split(" "),function(p,a,e,m,k,b,c){Object.defineProperty(a,"__esModule",{value:!0});a.PopupView=void 0;a.PopupView=function(a){return function(a){function d(){return null!==a&&a.apply(this,arguments)||this}e.__extends(d,a);d.prototype.fetchPopupFeatures=function(a,c){return e.__awaiter(this,void 0,void 0,function(){var f,g,d,l,n,t,k,y,D;return e.__generator(this,
function(h){switch(h.label){case 0:return[4,this.when()];case 1:return h.sent(),[4,this._prepareFetchPopupFeatures(a,c)];case 2:return f=h.sent(),g=f.location,d=f.queryArea,l=f.layerViewsAndGraphics,n=f.clientOnlyGraphics,t=b.resolve(n),k=this._queryLayerPopupFeatures({queryArea:d,layerViewsAndGraphics:l,options:c}),y=k.map(function(a){return a.promise}),D=b.eachAlwaysValues(e.__spreadArrays([t],y)).then(m.flatten),[2,{location:g,clientOnlyGraphics:n,allGraphicsPromise:D,promisesPerLayerView:k}]}})})};
d.prototype._queryLayerPopupFeatures=function(a){var b=a.queryArea,c=a.options;return a.layerViewsAndGraphics.map(function(a){var f=a.layerView;a={clientGraphics:a.graphics,event:k.isSome(c)?c.event:null,signal:k.isSome(c)?c.signal:null,defaultPopupTemplateEnabled:k.isSome(c)?!!c.defaultPopupTemplateEnabled:!1};a=f.fetchPopupFeatures(b,a);return{layerView:f,promise:a}})};d.prototype._isValidPopupGraphic=function(a,b){return a&&!!a.getEffectivePopupTemplate(k.isSome(b)&&b.defaultPopupTemplateEnabled)};
d.prototype._prepareFetchPopupFeatures=function(a,b){return e.__awaiter(this,void 0,void 0,function(){var c,f,g,d,l,n,k,m;return e.__generator(this,function(h){switch(h.label){case 0:return[4,this._popupHitTestGraphics(a,b)];case 1:return c=h.sent(),f=c.clientGraphics,g=c.queryArea,d=c.location,l=this._getFetchPopupLayerViews(),n=this._graphicsPerFetchPopupLayerView(f,l),k=n.layerViewsAndGraphics,m=n.clientOnlyGraphics,[2,{clientOnlyGraphics:m,layerViewsAndGraphics:k,queryArea:g,location:d}]}})})};
d.prototype._popupHitTestGraphics=function(a,b){return e.__awaiter(this,void 0,void 0,function(){var c,f,g,d,l,n,k=this;return e.__generator(this,function(h){switch(h.label){case 0:return[4,this.popupHitTest(a)];case 1:return c=h.sent(),f=c.results,g=c.mapPoint,d=f.filter(function(a){return k._isValidPopupGraphic(a.graphic,b)}),l=d.length?d[0].mapPoint:null,n=d.map(function(a){return a.graphic}),[2,{clientGraphics:n,queryArea:g,location:g||l}]}})})};d.prototype._getFetchPopupLayerViews=function(){var a=
this,b=[];this.allLayerViews.forEach(function(c){a._isValidPopupLayerView(c)&&b.push(c)});k.isSome(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&b.push(this.graphicsView);return b.reverse()};d.prototype._isValidPopupLayerView=function(a){return k.isSome(a)&&(!("layer"in a)||!a.suspended)&&"fetchPopupFeatures"in a};d.prototype._graphicsPerFetchPopupLayerView=function(a,b){var c=[],f=new Map;b=b.map(function(a){var b=[];"layer"in a?f.set(a.layer,b):f.set(a.graphics,b);return{layerView:a,
graphics:b}});for(var g=0;g<a.length;g++){var d=a[g],l=f.get(d.layer)||null;l?l.push(d):c.push(d)}return{layerViewsAndGraphics:b,clientOnlyGraphics:c}};return d=e.__decorate([c.subclass("esri.views.PopupView")],d)}(a)}})},"esri/views/2d/AnimationManager":function(){define("require exports tslib ../../geometry ../../Viewpoint ../../core/Accessor ../../core/scheduling ../../core/accessorSupport/decorators ../ViewAnimation ./unitBezier ./viewpointUtils".split(" "),function(p,a,e,m,k,b,c,d,n,l,g){Object.defineProperty(a,
"__esModule",{value:!0});var f=function(){function a(a,b,c,f){var g=a.targetGeometry,d=b.targetGeometry;f?"string"===typeof f&&(f=l.parse(f)||l.easingFunctions.ease):f=l.easingFunctions.ease;this.easing=f;this.duration=c;this.sCenterX=g.x;this.sCenterY=g.y;this.sScale=a.scale;this.sRotation=a.rotation;this.tCenterX=d.x;this.tCenterY=d.y;this.tScale=b.scale;this.tRotation=b.rotation;this.dCenterX=this.tCenterX-this.sCenterX;this.dCenterY=this.tCenterY-this.sCenterY;this.dScale=this.tScale-this.sScale;
this.dRotation=this.tRotation-this.sRotation;180<this.dRotation?this.dRotation-=360:-180>this.dRotation&&(this.dRotation+=360)}a.prototype.applyRatio=function(a,b){var c=this.easing(b),f,g;1<=b?(b=this.tCenterX,f=this.tCenterY,g=this.tRotation,c=this.tScale):(b=this.sCenterX+c*this.dCenterX,f=this.sCenterY+c*this.dCenterY,g=this.sRotation+c*this.dRotation,c=this.sScale+c*this.dScale);a.targetGeometry.x=b;a.targetGeometry.y=f;a.scale=c;a.rotation=g};return a}();p=function(a){function b(b){b=a.call(this,
b)||this;b.duration=200;b.transition=null;b.easing=l.easingFunctions.ease;b.view=null;b.viewpoint=null;b.viewpoint=new k({targetGeometry:new m.Point,scale:0,rotation:0});b._updateTask=c.addFrameTask({postRender:b._postRender.bind(b)});b._updateTask.pause();return b}e.__extends(b,a);b.prototype.destroy=function(){this._updateTask.remove();this._updateTask=null};b.prototype.animate=function(a,b,c){var d=this;this.stop();g.copy(this.viewpoint,b);this.transition=new f(this.viewpoint,a.target,c&&c.duration||
this.duration,c&&c.easing||this.easing);b=function(){d.animation===a&&d._updateTask&&("finished"===a.state&&(d.transition.applyRatio(d.viewpoint,1),d.view.state&&(d.view.state.viewpoint=d.viewpoint.clone())),d.animation=null,d.updateFunction=null)};a.when(b,b);this._startTime=performance.now();this._updateTask.resume();return this.animation=a};b.prototype.animateContinous=function(a,b){var c=this;this.stop();this.updateFunction=b;this.viewpoint=a;var f=new n({target:a.clone()});a=function(){c.animation===
f&&c._updateTask&&(c.animation=null,c.updateFunction=null)};f.when(a,a);this._startTime=performance.now();this._updateTask.resume();return this.animation=f};b.prototype.stop=function(){this.animation&&(this.animation.stop(),this.updateFunction=this.animation=null)};b.prototype._postRender=function(a){var b=this.animation;b&&b.state!==n.State.STOPPED?(this.updateFunction?this.updateFunction(this.viewpoint,a.deltaTime):(a=(performance.now()-this._startTime)/this.transition.duration,b=1<=a,this.transition.applyRatio(this.viewpoint,
a),b&&this.animation.finish()),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())):this._updateTask.pause()};e.__decorate([d.property()],b.prototype,"animation",void 0);e.__decorate([d.property()],b.prototype,"duration",void 0);e.__decorate([d.property()],b.prototype,"transition",void 0);e.__decorate([d.property()],b.prototype,"easing",void 0);e.__decorate([d.property()],b.prototype,"view",void 0);e.__decorate([d.property()],b.prototype,"viewpoint",void 0);return b=e.__decorate([d.subclass("esri.views.2d.AnimationManager")],
b)}(b);a.default=p})},"esri/views/2d/unitBezier":function(){define(["require","exports"],function(p,a){function e(a,b,c,d){function n(a,b){var c,d,h,n;h=a;for(d=0;8>d;d++){n=((f*h+g)*h+l)*h-a;if(Math.abs(n)<b)return h;c=(3*f*h+2*g)*h+l;if(1E-6>Math.abs(c))break;h-=n/c}c=0;d=1;h=a;if(h<c)return c;if(h>d)return d;for(;c<d;){n=((f*h+g)*h+l)*h;if(Math.abs(n-a)<b)break;a>n?c=h:d=h;h=.5*(d-c)+c}return h}var l=3*a,g=3*(c-a)-l,f=1-l-g,h=3*b,v=3*(d-b)-h,q=1-h-v;return function(a,b){void 0===b&&(b=1E-6);a=
n(a,b);return((q*a+v)*a+h)*a}}Object.defineProperty(a,"__esModule",{value:!0});a.parse=a.easingFunctions=a.unitBezier=void 0;a.unitBezier=e;var m=/^cubic-bezier\((.*)\)/;a.easingFunctions={};a.parse=function(k){var b=a.easingFunctions[k]||null;!b&&(k=m.exec(k))&&(k=k[1].split(",").map(function(a){return parseFloat(a.trim())}),4!==k.length||k.some(function(a){return isNaN(a)})||(b=e.apply(e,k)));return b};a.easingFunctions.ease=e(.25,.1,.25,1);a.easingFunctions.linear=e(0,0,1,1);a.easingFunctions.easeIn=
a.easingFunctions["ease-in"]=e(.42,0,1,1);a.easingFunctions.easeOut=a.easingFunctions["ease-out"]=e(0,0,.58,1);a.easingFunctions.easeInOut=a.easingFunctions["ease-in-out"]=e(.42,0,.58,1)})},"esri/views/2d/viewpointUtils":function(){define("require exports tslib ../../Viewpoint ../../core/Collection ../../core/maybe ../../core/promiseUtils ../../core/unitUtils ../../core/libs/gl-matrix-2/common ../../core/libs/gl-matrix-2/mat2d ../../core/libs/gl-matrix-2/mat2df64 ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f64 ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/geodesicConstants ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ../../geometry/support/webMercatorUtils".split(" "),
function(p,a,e,m,k,b,c,d,n,l,g,f,h,v,q,C,r,t,u,y,D){function x(a,b,c,g){return g&&c&&!g.equals(c)&&y.canProject(g,c)&&g.isWebMercator?(g.isWebMercator?(c=b[1],89.99999<c?c=89.99999:-89.99999>c&&(c=-89.99999),c=Math.sin(n.common.toRadian(c)),a=f.vec2.set(a,n.common.toRadian(b[0])*t.earthRadius,.5*t.earthRadius*Math.log((1+c)/(1-c)))):(c=n.common.toDegree(b[0]/t.earthRadius),a=f.vec2.set(a,c-360*Math.floor((c+180)/360),n.common.toDegree(.5*Math.PI-2*Math.atan(Math.exp(-1*b[1]/t.earthRadius))))),a):
f.vec2.copy(a,b)}function w(a){return a.wkid?a:a.spatialReference||r.WGS84}function A(a,b){return b.type?f.vec2.set(a,b.x,b.y):f.vec2.copy(a,b)}function B(a,b){return Math.max(a.width/b[0],a.height/b[1])*M(a.spatialReference)}function I(a,f,g,d){return e.__awaiter(this,void 0,void 0,function(){var h,l,n,t,F,r,u,m,w,D,A,x,P,B,p,Q,T,U,J,G,H,M,z,O,K,N,E,L;return e.__generator(this,function(e){switch(e.label){case 0:if(!a||Array.isArray(a)&&!a.length)return[2,null];k.isCollection(a)&&(a=a.toArray());
if(!Array.isArray(a)||!a.length||"object"!==typeof a[0])return[3,7];l=a.every(function(a){return"attributes"in a});n=a.some(function(a){return!a.geometry});t=a;if(!(l&&n&&f&&f.allLayerViews))return[3,2];F=new Map;r=0;for(u=a;r<u.length;r++)m=u[r],w=m.layer,D=F.get(w)||[],A=m.attributes[w.objectIdField],null!=A&&D.push(A),F.set(w,D);x=[];F.forEach(function(a,b){var c=f.allLayerViews.find(function(a){return a.layer.id===b.id});if("queryFeatures"in c){var g=b.createQuery();g.objectIds=a;g.returnGeometry=
!0;x.push(c.queryFeatures(g))}});return[4,c.all(x)];case 1:P=e.sent();B=[];p=0;for(Q=P;p<Q.length;p++)if((T=Q[p])&&T.features&&T.features.length)for(U=0,J=T.features;U<J.length;U++)m=J[U],b.isSome(m.geometry)&&B.push(m.geometry);t=B;e.label=2;case 2:G=0,H=t,e.label=3;case 3:if(!(G<H.length))return[3,6];M=H[G];return[4,I(M,f,g,d)];case 4:d=e.sent(),e.label=5;case 5:return G++,[3,3];case 6:return[2,d];case 7:if(!Array.isArray(a)||2!==a.length||"number"!==typeof a[0]||"number"!==typeof a[1])return[3,
8];h=new C(a);return[3,12];case 8:if(!(a instanceof q))return[3,9];h=a;return[3,12];case 9:if(!("geometry"in a))return[3,12];if(!a.geometry)return[3,10];h=a.geometry;return[3,12];case 10:if(!a.layer)return[3,12];z=a.layer;O=f.allLayerViews.find(function(a){return a.layer.id===z.id});if(!("queryFeatures"in O))return[3,12];K=z.createQuery();K.objectIds=[a.attributes[z.objectIdField]];K.returnGeometry=!0;return[4,O.queryFeatures(K)];case 11:N=e.sent(),h=b.get(N,"features",0,"geometry"),e.label=12;case 12:if(b.isNone(h))return[2,
null];E="point"===h.type?new v({xmin:h.x,ymin:h.y,xmax:h.x,ymax:h.y,spatialReference:h.spatialReference}):h.extent;if(!E)return[2,null];L=y.canProject(E,g);if(!E.spatialReference.equals(g)&&L)E=y.project(E,g);else if(!L)return[2,null];d=d?d.union(E):E.clone();return[2,d]}})})}function G(a){if(a&&(!Array.isArray(a)||"number"!==typeof a[0])&&("object"===typeof a||Array.isArray(a)&&"object"===typeof a[0])){if("layer"in a&&a.layer&&a.layer.minScale&&a.layer.maxScale){var b=a.layer;return{min:b.minScale,
max:b.maxScale}}if(Array.isArray(a)&&a.length&&a.every(function(a){return"layer"in a})){for(var c=0,f=0,g=0;g<a.length;g++)(b=a[g].layer)&&b.minScale&&b.maxScale&&(c=b.minScale<c?b.minScale:c,f=b.maxScale>f?b.maxScale:f);return c&&f?{min:c,max:f}:null}}}function H(a,b){return e.__awaiter(this,void 0,void 0,function(){var c,f,g,d,l,n,q,k,t,r,u,P,p,Q,J,H,z,M,O,K;return e.__generator(this,function(e){switch(e.label){case 0:if(!a||!b)return[2,new m({targetGeometry:new C,scale:0,rotation:0})];c=b.spatialReference;
f=b.constraints;g=b.padding;d=b.viewpoint;l=b.size;n=g?l[0]-g.left-g.right:l[0];q=g?l[1]-g.top-g.bottom:l[1];k=[n,q];t=null;a instanceof m?t=a:a.viewpoint?t=a.viewpoint:a.target&&"esri.Viewpoint"===a.target.declaredClass&&(t=a.target);r=null;if(!t||!t.targetGeometry)return[3,1];r=t.targetGeometry;return[3,10];case 1:if(!(a instanceof v))return[3,2];r=a;return[3,10];case 2:return a||a&&("center"in a||"extent"in a||"target"in a)?[4,I(a.center,b,c)]:[3,10];case 3:return(p=e.sent())?[3,5]:[4,I(a.extent,
b,c)];case 4:p=e.sent(),e.label=5;case 5:return(P=p)?[3,7]:[4,I(a.target,b,c)];case 6:P=e.sent(),e.label=7;case 7:return(u=P)?[3,9]:[4,I(a,b,c)];case 8:u=e.sent(),e.label=9;case 9:r=u,e.label=10;case 10:!r&&d&&d.targetGeometry?r=d.targetGeometry:!r&&b.extent&&(r=b.extent);Q=w(r);c||(c=w(b.spatialReference||b.extent||r));if(!D.canProject(r,c)&&Q&&!Q.equals(c))return[2,null];J=A(h.vec2f64.create(),r.center?r.center:r);H=new C(x(J,J,Q,c),c);z=null;z=t&&t.targetGeometry&&"point"===t.targetGeometry.type?
t.scale:a.hasOwnProperty("scale")&&a.scale?a.scale:a.hasOwnProperty("zoom")&&-1!==a.zoom&&f&&f.effectiveLODs?f.zoomToScale(a.zoom):Array.isArray(r)||"point"===r.type||"extent"===r.type&&0===r.width&&0===r.height?b.extent&&y.canProject(b.extent,c)?B(y.project(b.extent,c),k):b.extent?B(b.extent,k):d.scale:y.canProject(r.extent,c)?B(y.project(r.extent,c),k):B(r.extent,k);if(M=G(a))M.min&&M.min>z?z=M.min:M.max&&M.max<z&&(z=M.max);O=0;t?O=t.rotation:a.hasOwnProperty("rotation")?O=a.rotation:d&&(O=d.rotation);
K=new m({targetGeometry:H,scale:z,rotation:O});f&&(K=f.fit(K),f.constrainByGeometry(K),f.rotationEnabled||(K.rotation=O));return[2,K]}})})}function z(a,b){var c=a.targetGeometry,f=b.targetGeometry;c.x=f.x;c.y=f.y;c.spatialReference=f.spatialReference;a.scale=b.scale;a.rotation=b.rotation;return a}function N(a,b,c){return c?f.vec2.set(a,.5*(b[0]-c.right+c.left),.5*(b[1]-c.bottom+c.top)):f.vec2.scale(a,b,.5)}function E(b,c,f,g){a.getTransform(b,c,f,g);return l.mat2d.invert(b,b)}function R(a,b,c){var g=
K(b);b=Math.abs(Math.cos(g));g=Math.abs(Math.sin(g));return f.vec2.set(a,Math.round(c[1]*g+c[0]*b),Math.round(c[1]*b+c[0]*g))}function L(a){var b=a.scale;a=a.targetGeometry.spatialReference;a=u.isValid(a)?1/(39.37*d.getMetersPerUnitForSR(a)*96):1;return b*a}function K(a){return n.common.toRadian(a.rotation)||0}function M(a){return u.isValid(a)?39.37*d.getMetersPerUnitForSR(a)*96:1}function J(a){return a.isWrappable?(a=u.getInfo(a),a.valid[1]-a.valid[0]):0}Object.defineProperty(a,"__esModule",{value:!0});
a.translateBy=a.toScreen=a.toMap=a.padAndScaleAndRotateBy=a.scaleAndRotateBy=a.scaleTo=a.scaleBy=a.rotateTo=a.rotateBy=a.resize=a.pixelSize=a.centerAt=a.removePadding=a.addPadding=a.angleBetween=a.createAsync=a.getWorldScreenWidth=a.getWorldWidth=a.getTransformNoRotation=a.getTransform=a.getMatrix=a.getResolutionToScaleFactor=a.getResolution=a.getPaddingMapTranslation=a.getPaddingScreenTranslation=a.getOuterSize=a.getOuterExtent=a.setExtent=a.getExtent=a.getAnchor=a.copy=a.create=a.extentToScale=
void 0;var O=180/Math.PI;a.extentToScale=B;a.create=H;a.copy=z;a.getAnchor=N;a.getExtent=function(){var a=h.vec2f64.create();return function(b,c,f){var g=c.targetGeometry;A(a,g);c=.5*L(c);b.xmin=a[0]-c*f[0];b.ymin=a[1]-c*f[1];b.xmax=a[0]+c*f[0];b.ymax=a[1]+c*f[1];b.spatialReference=g.spatialReference;return b}}();a.setExtent=function(b,c,f,g,d){a.centerAt(b,c,f.center);b.scale=B(f,g);d&&d.constraints&&d.constraints.constrain(b);return b};a.getOuterExtent=function(){var a=h.vec2f64.create(),b=h.vec2f64.create();
return function(c,f,g){A(a,f.targetGeometry);R(b,f,g);g=.5*L(f);c.set({xmin:a[0]-g*b[0],ymin:a[1]-g*b[1],xmax:a[0]+g*b[0],ymax:a[1]+g*b[1],spatialReference:f.targetGeometry.spatialReference});return c}}();a.getOuterSize=R;a.getPaddingScreenTranslation=function(){var a=h.vec2f64.create();return function(b,c,g){return f.vec2.sub(b,f.vec2.scale(b,c,.5),N(a,c,g))}}();a.getPaddingMapTranslation=function(){var b=g.mat2df64.create(),c=h.vec2f64.create();return function(g,d,h,n){var e=L(d);d=K(d);f.vec2.set(c,
e,e);l.mat2d.fromScaling(b,c);l.mat2d.rotate(b,b,d);l.mat2d.translate(b,b,a.getPaddingScreenTranslation(c,h,n));l.mat2d.translate(b,b,[0,n.top-n.bottom]);return f.vec2.set(g,b[4],b[5])}}();a.getResolution=L;a.getResolutionToScaleFactor=M;a.getMatrix=function(){var a=h.vec2f64.create(),b=h.vec2f64.create(),c=h.vec2f64.create();return function(g,d,h,n,e,q){f.vec2.negate(a,d);f.vec2.scale(b,h,.5*q);f.vec2.set(c,1/n*q,-1/n*q);l.mat2d.identity(g);l.mat2d.translate(g,g,b);e&&l.mat2d.rotate(g,g,e);l.mat2d.scale(g,
g,c);l.mat2d.translate(g,g,a);return g}}();a.getTransform=function(){var b=h.vec2f64.create();return function(c,f,g,d){var h=L(f),l=K(f);A(b,f.targetGeometry);return a.getMatrix(c,b,g,h,l,d)}}();a.getTransformNoRotation=function(){var b=h.vec2f64.create();return function(c,f,g,d){var h=L(f);A(b,f.targetGeometry);return a.getMatrix(c,b,g,h,0,d)}}();a.getWorldWidth=J;a.getWorldScreenWidth=function(a,b){return Math.round(J(a)/b)};a.createAsync=function(a,b){return H(a,b)};a.angleBetween=function(){var a=
h.vec2f64.create(),b=h.vec2f64.create(),c=[0,0,0];return function(g,d,h){f.vec2.subtract(a,g,d);f.vec2.normalize(a,a);f.vec2.subtract(b,g,h);f.vec2.normalize(b,b);f.vec2.cross(c,a,b);g=Math.acos(f.vec2.dot(a,b)/(f.vec2.length(a)*f.vec2.length(b)))*O;0>c[2]&&(g=-g);isNaN(g)&&(g=0);return g}}();a.addPadding=function(){var b=h.vec2f64.create();return function(c,g,f,d){var h=c.targetGeometry;z(c,g);a.getPaddingMapTranslation(b,g,f,d);h.x+=b[0];h.y+=b[1];return c}}();a.removePadding=function(){var b=h.vec2f64.create();
return function(c,g,f,d){var h=c.targetGeometry;z(c,g);a.getPaddingMapTranslation(b,g,f,d);h.x-=b[0];h.y-=b[1];return c}}();a.centerAt=function(){var a=h.vec2f64.create();return function(b,c,g){z(b,c);c=b.targetGeometry;var f=w(g),d=w(c);A(a,g);x(a,a,f,d);c.x=a[0];c.y=a[1];return b}}();a.pixelSize=function(a){return L(a)};a.resize=function(){var b=h.vec2f64.create();return function(c,g,d,h,l){l||(l="center");f.vec2.sub(b,d,h);f.vec2.scale(b,b,.5);d=b[0];h=b[1];switch(l){case "center":f.vec2.set(b,
0,0);break;case "left":f.vec2.set(b,-d,0);break;case "top":f.vec2.set(b,0,h);break;case "right":f.vec2.set(b,d,0);break;case "bottom":f.vec2.set(b,0,-h);break;case "top-left":f.vec2.set(b,-d,h);break;case "bottom-left":f.vec2.set(b,-d,-h);break;case "top-right":f.vec2.set(b,d,h);break;case "bottom-right":f.vec2.set(b,d,-h)}a.translateBy(c,g,b);return c}}();a.rotateBy=function(a,b,c){z(a,b);a.rotation+=c;return a};a.rotateTo=function(a,b,c){z(a,b);a.rotation=c;return a};a.scaleBy=function(){var b=
h.vec2f64.create();return function(c,g,d,h,l){z(c,g);isNaN(d)||0===d||(a.toMap(b,h,g,l),c.scale=g.scale*d,a.toScreen(b,b,c,l),a.translateBy(c,c,f.vec2.set(b,b[0]-h[0],h[1]-b[1])));return c}}();a.scaleTo=function(a,b,c){z(a,b);a.scale=c;return a};a.scaleAndRotateBy=function(){var b=h.vec2f64.create();return function(c,g,d,h,l,n){z(c,g);isNaN(d)||0===d||(a.toMap(b,l,g,n),c.scale=g.scale*d,c.rotation+=h,a.toScreen(b,b,c,n),a.translateBy(c,c,f.vec2.set(b,b[0]-l[0],l[1]-b[1])));return c}}();a.padAndScaleAndRotateBy=
function(){var b=h.vec2f64.create(),c=h.vec2f64.create();return function(g,d,h,l,n,e,q){a.getPaddingScreenTranslation(c,e,q);f.vec2.add(b,n,c);return l?a.scaleAndRotateBy(g,d,h,l,b,e):a.scaleBy(g,d,h,b,e)}}();a.toMap=function(){var a=g.mat2df64.create();return function(b,c,g,d){return f.vec2.transformMat2d(b,c,E(a,g,d,1))}}();a.toScreen=function(){var b=g.mat2df64.create();return function(c,g,d,h){return f.vec2.transformMat2d(c,g,a.getTransform(b,d,h,1))}}();a.translateBy=function(){var a=h.vec2f64.create(),
b=g.mat2df64.create();return function(c,g,d){z(c,g);var n=L(g),e=c.targetGeometry;l.mat2d.fromRotation(b,K(g));l.mat2d.scale(b,b,h.vec2f64.fromValues(n,n));f.vec2.transformMat2d(a,d,b);e.x+=a[0];e.y+=a[1];return c}}()})},"esri/core/libs/gl-matrix-2/common":function(){define(["require","exports","./math/common"],function(p,a,e){Object.defineProperty(a,"__esModule",{value:!0});a.common=void 0;a.common=e})},"esri/core/libs/gl-matrix-2/mat2d":function(){define(["require","exports","./math/mat2d"],function(p,
a,e){Object.defineProperty(a,"__esModule",{value:!0});a.mat2d=void 0;a.mat2d=e})},"esri/core/libs/gl-matrix-2/math/mat2d":function(){define(["require","exports","./common"],function(p,a,e){function m(a,c,d){var b=c[0],l=c[1],g=c[2],f=c[3],h=c[4];c=c[5];var e=d[0],q=d[1],k=d[2],r=d[3],t=d[4];d=d[5];a[0]=b*e+g*q;a[1]=l*e+f*q;a[2]=b*k+g*r;a[3]=l*k+f*r;a[4]=b*t+g*d+h;a[5]=l*t+f*d+c;return a}function k(a,c,d){a[0]=c[0]-d[0];a[1]=c[1]-d[1];a[2]=c[2]-d[2];a[3]=c[3]-d[3];a[4]=c[4]-d[4];a[5]=c[5]-d[5];return a}
Object.defineProperty(a,"__esModule",{value:!0});a.sub=a.mul=a.equals=a.exactEquals=a.multiplyScalarAndAdd=a.multiplyScalar=a.subtract=a.add=a.frob=a.str=a.fromTranslation=a.fromScaling=a.fromRotation=a.translate=a.scale=a.rotate=a.multiply=a.determinant=a.invert=a.set=a.identity=a.copy=void 0;a.copy=function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];return a};a.identity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a};a.set=function(a,c,d,n,l,g,f){a[0]=c;a[1]=
d;a[2]=n;a[3]=l;a[4]=g;a[5]=f;return a};a.invert=function(a,c){var b=c[0],n=c[1],l=c[2],g=c[3],f=c[4];c=c[5];var h=b*g-n*l;if(!h)return null;h=1/h;a[0]=g*h;a[1]=-n*h;a[2]=-l*h;a[3]=b*h;a[4]=(l*c-g*f)*h;a[5]=(n*f-b*c)*h;return a};a.determinant=function(a){return a[0]*a[3]-a[1]*a[2]};a.multiply=m;a.rotate=function(a,c,d){var b=c[0],l=c[1],g=c[2],f=c[3],h=c[4];c=c[5];var e=Math.sin(d);d=Math.cos(d);a[0]=b*d+g*e;a[1]=l*d+f*e;a[2]=b*-e+g*d;a[3]=l*-e+f*d;a[4]=h;a[5]=c;return a};a.scale=function(a,c,d){var b=
c[1],l=c[2],g=c[3],f=c[4],h=c[5],e=d[0];d=d[1];a[0]=c[0]*e;a[1]=b*e;a[2]=l*d;a[3]=g*d;a[4]=f;a[5]=h;return a};a.translate=function(a,c,d){var b=c[0],l=c[1],g=c[2],f=c[3],h=c[4];c=c[5];var e=d[0];d=d[1];a[0]=b;a[1]=l;a[2]=g;a[3]=f;a[4]=b*e+g*d+h;a[5]=l*e+f*d+c;return a};a.fromRotation=function(a,c){var b=Math.sin(c);c=Math.cos(c);a[0]=c;a[1]=b;a[2]=-b;a[3]=c;a[4]=0;a[5]=0;return a};a.fromScaling=function(a,c){a[0]=c[0];a[1]=0;a[2]=0;a[3]=c[1];a[4]=0;a[5]=0;return a};a.fromTranslation=function(a,c){a[0]=
1;a[1]=0;a[2]=0;a[3]=1;a[4]=c[0];a[5]=c[1];return a};a.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};a.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};a.add=function(a,c,d){a[0]=c[0]+d[0];a[1]=c[1]+d[1];a[2]=c[2]+d[2];a[3]=c[3]+d[3];a[4]=c[4]+d[4];a[5]=c[5]+d[5];return a};a.subtract=k;a.multiplyScalar=function(a,c,d){a[0]=c[0]*d;a[1]=c[1]*d;a[2]=c[2]*d;a[3]=c[3]*
d;a[4]=c[4]*d;a[5]=c[5]*d;return a};a.multiplyScalarAndAdd=function(a,c,d,n){a[0]=c[0]+d[0]*n;a[1]=c[1]+d[1]*n;a[2]=c[2]+d[2]*n;a[3]=c[3]+d[3]*n;a[4]=c[4]+d[4]*n;a[5]=c[5]+d[5]*n;return a};a.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]&&a[4]===c[4]&&a[5]===c[5]};a.equals=function(a,c){var b=a[0],n=a[1],l=a[2],g=a[3],f=a[4];a=a[5];var h=c[0],v=c[1],q=c[2],k=c[3],r=c[4];c=c[5];return Math.abs(b-h)<=e.EPSILON*Math.max(1,Math.abs(b),Math.abs(h))&&Math.abs(n-v)<=
e.EPSILON*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(l-q)<=e.EPSILON*Math.max(1,Math.abs(l),Math.abs(q))&&Math.abs(g-k)<=e.EPSILON*Math.max(1,Math.abs(g),Math.abs(k))&&Math.abs(f-r)<=e.EPSILON*Math.max(1,Math.abs(f),Math.abs(r))&&Math.abs(a-c)<=e.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))};a.mul=m;a.sub=k})},"esri/core/libs/gl-matrix-2/mat2df64":function(){define(["require","exports","./factories/mat2df64"],function(p,a,e){Object.defineProperty(a,"__esModule",{value:!0});a.mat2df64=void 0;a.mat2df64=
e})},"esri/core/libs/gl-matrix-2/factories/mat2df64":function(){define(["require","exports"],function(p,a){Object.defineProperty(a,"__esModule",{value:!0});a.createView=a.fromValues=a.clone=a.create=void 0;a.create=function(){return[1,0,0,1,0,0]};a.clone=function(a){return[a[0],a[1],a[2],a[3],a[4],a[5]]};a.fromValues=function(a,m,k,b,c,d){return[a,m,k,b,c,d]};a.createView=function(a,m){return new Float64Array(a,m,6)}})},"esri/core/libs/gl-matrix-2/vec2":function(){define(["require","exports","./math/vec2"],
function(p,a,e){Object.defineProperty(a,"__esModule",{value:!0});a.vec2=void 0;a.vec2=e})},"esri/core/libs/gl-matrix-2/math/vec2":function(){define(["require","exports","./common"],function(p,a,e){function m(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];return a}function k(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];return a}function b(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];return a}function c(a,b){var c=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(c*c+a*a)}function d(a,b){var c=b[0]-a[0];a=b[1]-a[1];return c*c+a*a}function n(a){var b=
a[0];a=a[1];return Math.sqrt(b*b+a*a)}function l(a){var b=a[0];a=a[1];return b*b+a*a}Object.defineProperty(a,"__esModule",{value:!0});a.sqrLen=a.sqrDist=a.dist=a.div=a.mul=a.sub=a.len=a.equals=a.exactEquals=a.str=a.angle=a.rotate=a.transformMat4=a.transformMat3=a.transformMat2d=a.transformMat2=a.random=a.lerp=a.cross=a.dot=a.normalize=a.inverse=a.negate=a.squaredLength=a.length=a.squaredDistance=a.distance=a.scaleAndAdd=a.scale=a.round=a.max=a.min=a.floor=a.ceil=a.divide=a.multiply=a.subtract=a.add=
a.set=a.copy=void 0;a.copy=function(a,b){a[0]=b[0];a[1]=b[1];return a};a.set=function(a,b,c){a[0]=b;a[1]=c;return a};a.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];return a};a.subtract=m;a.multiply=k;a.divide=b;a.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);return a};a.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);return a};a.min=function(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);return a};a.max=function(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],
c[1]);return a};a.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);return a};a.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;return a};a.scaleAndAdd=function(a,b,c,d){a[0]=b[0]+c[0]*d;a[1]=b[1]+c[1]*d;return a};a.distance=c;a.squaredDistance=d;a.length=n;a.squaredLength=l;a.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];return a};a.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];return a};a.normalize=function(a,b){var c=b[0],f=b[1],c=c*c+f*f;0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c);
return a};a.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};a.cross=function(a,b,c){b=b[0]*c[1]-b[1]*c[0];a[0]=a[1]=0;a[2]=b;return a};a.lerp=function(a,b,c,d){var f=b[0];b=b[1];a[0]=f+d*(c[0]-f);a[1]=b+d*(c[1]-b);return a};a.random=function(a,b){b=b||1;var c=2*e.RANDOM()*Math.PI;a[0]=Math.cos(c)*b;a[1]=Math.sin(c)*b;return a};a.transformMat2=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[2]*b;a[1]=c[1]*d+c[3]*b;return a};a.transformMat2d=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[2]*b+c[4];a[1]=
c[1]*d+c[3]*b+c[5];return a};a.transformMat3=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[3]*b+c[6];a[1]=c[1]*d+c[4]*b+c[7];return a};a.transformMat4=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[4]*b+c[12];a[1]=c[1]*d+c[5]*b+c[13];return a};a.rotate=function(a,b,c,d){var g=b[0]-c[0];b=b[1]-c[1];var f=Math.sin(d);d=Math.cos(d);a[0]=g*d-b*f+c[0];a[1]=g*f+b*d+c[1];return a};a.angle=function(a,b){var c=a[0];a=a[1];var d=b[0];b=b[1];var g=c*c+a*a;0<g&&(g=1/Math.sqrt(g));var f=d*d+b*b;0<f&&(f=1/Math.sqrt(f));
c=(c*d+a*b)*g*f;return 1<c?0:-1>c?Math.PI:Math.acos(c)};a.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};a.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]};a.equals=function(a,b){var c=a[0];a=a[1];var d=b[0];b=b[1];return Math.abs(c-d)<=e.EPSILON*Math.max(1,Math.abs(c),Math.abs(d))&&Math.abs(a-b)<=e.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};a.len=n;a.sub=m;a.mul=k;a.div=b;a.dist=c;a.sqrDist=d;a.sqrLen=l})},"esri/core/libs/gl-matrix-2/vec2f64":function(){define(["require","exports",
"./factories/vec2f64"],function(p,a,e){Object.defineProperty(a,"__esModule",{value:!0});a.vec2f64=void 0;a.vec2f64=e})},"esri/core/libs/gl-matrix-2/factories/vec2f64":function(){define(["require","exports"],function(p,a){Object.defineProperty(a,"__esModule",{value:!0});a.UNIT_Y=a.UNIT_X=a.ONES=a.ZEROS=a.unitY=a.unitX=a.ones=a.zeros=a.createView=a.fromArray=a.fromValues=a.clone=a.create=void 0;a.create=function(){return[0,0]};a.clone=function(a){return[a[0],a[1]]};a.fromValues=function(a,m){return[a,
m]};a.fromArray=function(a){for(var e=[0,0],k=Math.min(2,a.length),b=0;b<k;++b)e[b]=a[b];return e};a.createView=function(a,m){return new Float64Array(a,m,2)};a.zeros=function(){return[0,0]};a.ones=function(){return[1,1]};a.unitX=function(){return[1,0]};a.unitY=function(){return[0,1]};a.ZEROS=[0,0];a.ONES=[1,1];a.UNIT_X=[1,0];a.UNIT_Y=[0,1]})},"esri/views/2d/FrameTask":function(){define(["require","exports","../../core/maybe","../../core/scheduling"],function(p,a,e,m){Object.defineProperty(a,"__esModule",
{value:!0});p=function(){function a(a){var b=this;this.view=a;this._frameTaskHandle=null;this._updateRequested=!1;this.updateEnabled=this.stationary=!0;this.animationInProgress=!1;this.prepare=function(){b._updateParameters.state=b.view.state;b._updateParameters.stationary=b.view.stationary;b._updateParameters.pixelRatio=window.devicePixelRatio;b._updateParameters.renderingOptions=b.view.renderingOptions};this.update=function(){b._updateRequested=!1;if(b.updateEnabled){var a=b.view,c=a.basemapView,
l=a.graphicsView,g=a.labelManager,f=a.layerViews,a=a.state.id;c.baseLayerViews.forEach(b._updateLayerView,b);f.forEach(b._updateLayerView,b);c.referenceLayerViews.forEach(b._updateLayerView,b);e.isSome(g)&&(g.lastUpdateId!==a&&(g.viewChange(),g.lastUpdateId=a),g.updateRequested&&g.processUpdate(b._updateParameters));e.isSome(l)&&(l.lastUpdateId!==a&&(l.viewChange(),l.lastUpdateId=a),l.updateRequested&&l.processUpdate(b._updateParameters));b.animationInProgress||b._updateRequested||b._frameTaskHandle.pause()}}}
a.prototype.destroy=function(){this.stop()};a.prototype.start=function(){var a=this;this.stationary=this.view.stationary;this._updateParameters={state:this.view.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:this.view.renderingOptions};this._stationaryHandle=this.view.watch("stationary",function(b){a.stationary=b;a.requestFrame()});this._frameTaskHandle=m.addFrameTask(this)};a.prototype.stop=function(){this._frameTaskHandle&&(this._stationaryHandle.remove(),this._frameTaskHandle.remove(),
this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)};a.prototype.requestUpdate=function(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())};a.prototype.requestFrame=function(){this._frameTaskHandle&&this._frameTaskHandle.resume()};a.prototype._updateLayerView=function(a){var b=this.view.state,d=a.lastUpdateId;if(null==d||!this.stationary&&!a.moving)a.moving=!0,a.moveStart();d!==b.id&&a.viewChange();this.stationary&&
a.moving&&(a.moving=!1,a.moveEnd());a.lastUpdateId=b.id;a.updateRequested&&a.processUpdate(this._updateParameters);"layerViews"in a&&a.layerViews.forEach(this._updateLayerView,this)};return a}();a.default=p})},"esri/views/2d/layerViewModuleImportUtils":function(){define(["require","exports","../../core/Error","../../core/maybe","@dojo/framework/shim/Promise"],function(p,a,e,m){function k(){return Promise.all([new Promise(function(a,b){p(["../webgl"],a,b)}),new Promise(function(a,b){p(["./mapViewDeps"],
a,b)})])}Object.defineProperty(a,"__esModule",{value:!0});a.layerView2DImporter=void 0;var b=function(){return k().then(function(){return new Promise(function(a,b){p(["./layers/TileLayerView2D"],a,b)})})},c=function(){return k().then(function(){return new Promise(function(a,b){p(["./layers/FeatureLayerView2D"],a,b)})})},d={"base-dynamic":function(){return k().then(function(){return new Promise(function(a,b){p(["./layers/BaseDynamicLayerView2D"],a,b)})})},"base-tile":b,"bing-maps":b,csv:c,"geo-rss":function(){return k().then(function(){return new Promise(function(a,
b){p(["./layers/GeoRSSLayerView2D"],a,b)})})},feature:c,geojson:c,graphics:function(){return k().then(function(){return new Promise(function(a,b){p(["./layers/GraphicsLayerView2D"],a,b)})})},group:function(){return k().then(function(){return new Promise(function(a,b){p(["./layers/GroupLayerView2D"],a,b)})})},imagery:function(){return k().then(function(){return new Promise(function(a,b){p(["./layers/ImageryLayerView2D"],a,b)})})},"imagery-tile":function(){return k().then(function(){return new Promise(function(a,
b){p(["./layers/ImageryTileLayerView2D"],a,b)})})},kml:function(){return k().then(function(){return new Promise(function(a,b){p(["./layers/KMLLayerView2D"],a,b)})})},"map-image":function(){return k().then(function(){return new Promise(function(a,b){p(["./layers/MapImageLayerView2D"],a,b)})})},"map-notes":function(){return k().then(function(){return new Promise(function(a,b){p(["./layers/MapNotesLayerView2D"],a,b)})})},"ogc-feature":c,"open-street-map":b,route:function(){return k().then(function(){return new Promise(function(a,
b){p(["./layers/RouteLayerView2D"],a,b)})})},stream:function(){return k().then(function(){return new Promise(function(a,b){p(["./layers/StreamLayerView2D"],a,b)})})},tile:b,"vector-tile":function(){return k().then(function(){return new Promise(function(a,b){p(["./layers/VectorTileLayerView2D"],a,b)})})},wcs:function(){return k().then(function(){return new Promise(function(a,b){p(["./layers/ImageryTileLayerView2D"],a,b)})})},"web-tile":b,wms:function(){return k().then(function(){return new Promise(function(a,
b){p(["./layers/WMSLayerView2D"],a,b)})})},wmts:function(){return k().then(function(){return new Promise(function(a,b){p(["./layers/WMTSLayerView2D"],a,b)})})},"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,scene:null,unknown:null,unsupported:null};a.layerView2DImporter={hasLayerViewModule:function(a){return m.isSome(d[a.type])},importLayerView:function(a){var b=d[a.type];if(!m.isSome(b))throw a=a.declaredClass?a.declaredClass.slice(a.declaredClass.lastIndexOf(".")+
1):"Unknown",b=a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),new e(b+":view-not-supported",a+" is not supported in 2D");return b(a)}}})},"esri/views/2d/MapViewConstraints":function(){define("require exports tslib ../../geometry ../../core/Evented ../../core/accessorSupport/decorators ../../layers/support/LOD ./constraints/GeometryConstraint ./constraints/RotationConstraint ./constraints/ZoomConstraint".split(" "),function(p,a,e,m,k,b,c,d,n,l){var g={base:null,key:"type",typeMap:{extent:m.Extent,
polygon:m.Polygon}};return function(a){function f(){var b=null!==a&&a.apply(this,arguments)||this;b.lods=null;b.minScale=0;b.maxScale=0;b.minZoom=-1;b.maxZoom=-1;b.rotationEnabled=!0;b.snapToZoom=!0;return b}e.__extends(f,a);f.prototype.initialize=function(){this.watch("_zoom, _rotation",this.emit.bind(this,"update"),!0)};f.prototype.destroy=function(){this.view=null;this._set("_zoom",null);this._set("_rotation",null)};Object.defineProperty(f.prototype,"geometry",{set:function(a){a?this._set("geometry",
a):this._set("geometry",null)},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"_defaultLODs",{get:function(){var a=this.get("view.defaultsFromMap.tileInfo"),b=this.get("view.spatialReference");return a&&b&&a.spatialReference.equals(b)?a.lods:null},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"_geometry",{get:function(){return new d.GeometryConstraint({geometry:this.geometry,spatialReference:this.view.spatialReference})},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,
"_rotation",{get:function(){return new n({rotationEnabled:this.rotationEnabled})},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"_zoom",{get:function(){return new l({lods:this.lods||this._defaultLODs,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale,snapToZoom:this.snapToZoom})},enumerable:!1,configurable:!0});f.prototype.canZoomInTo=function(a){var b=this.effectiveMaxScale;return 0===b||a>=b};f.prototype.canZoomOutTo=function(a){var b=this.effectiveMinScale;
return 0===b||a<=b};f.prototype.constrain=function(a,b){this._zoom.constrain(a,b);this._rotation.constrain(a,b);this._geometry.constrain(a,b);return a};f.prototype.constrainByGeometry=function(a){return this._geometry.constrain(a)};f.prototype.fit=function(a){return this._zoom.fit(a)};f.prototype.zoomToScale=function(a){return this._zoom.zoomToScale(a)};f.prototype.scaleToZoom=function(a){return this._zoom.scaleToZoom(a)};f.prototype.snapScale=function(a){return this._zoom.snapToClosestScale(a)};
f.prototype.snapToNextScale=function(a){return this._zoom.snapToNextScale(a)};f.prototype.snapToPreviousScale=function(a){return this._zoom.snapToPreviousScale(a)};e.__decorate([b.property({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],f.prototype,"effectiveLODs",void 0);e.__decorate([b.property({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],f.prototype,"effectiveMinScale",void 0);e.__decorate([b.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],f.prototype,"effectiveMaxScale",void 0);
e.__decorate([b.property({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],f.prototype,"effectiveMinZoom",void 0);e.__decorate([b.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],f.prototype,"effectiveMaxZoom",void 0);e.__decorate([b.property({types:g,value:null})],f.prototype,"geometry",null);e.__decorate([b.property({type:[c]})],f.prototype,"lods",void 0);e.__decorate([b.property()],f.prototype,"minScale",void 0);e.__decorate([b.property()],f.prototype,"maxScale",void 0);e.__decorate([b.property()],
f.prototype,"minZoom",void 0);e.__decorate([b.property()],f.prototype,"maxZoom",void 0);e.__decorate([b.property()],f.prototype,"rotationEnabled",void 0);e.__decorate([b.property()],f.prototype,"snapToZoom",void 0);e.__decorate([b.property()],f.prototype,"view",void 0);e.__decorate([b.property({dependsOn:["view.spatialReference","view.defaultsFromMap.tileInfo"]})],f.prototype,"_defaultLODs",null);e.__decorate([b.property({type:d.GeometryConstraint,dependsOn:["geometry","view.spatialReference"]})],
f.prototype,"_geometry",null);e.__decorate([b.property({type:n,dependsOn:["rotationEnabled"]})],f.prototype,"_rotation",null);e.__decorate([b.property({readOnly:!0,type:l,dependsOn:"lods minZoom maxZoom minScale maxScale snapToZoom _defaultLODs".split(" ")})],f.prototype,"_zoom",null);return f=e.__decorate([b.subclass("esri.views.2d.MapViewConstraints")],f)}(k.EventedAccessor)})},"esri/views/2d/constraints/GeometryConstraint":function(){define("require exports tslib ../../../core/Accessor ../../../core/Logger ../../../core/accessorSupport/decorators ../../../geometry/projection ../../../geometry/support/contains ../../../geometry/support/near ../../../geometry/support/webMercatorUtils".split(" "),
function(p,a,e,m,k,b,c,d,n,l){Object.defineProperty(a,"__esModule",{value:!0});a.GeometryConstraint=void 0;var g=k.getLogger("esri.views.MapView");p=function(a){function f(b){b=a.call(this,b)||this;b.geometry=null;b.spatialReference=null;return b}e.__extends(f,a);k=f;Object.defineProperty(f.prototype,"normalizedGeometry",{get:function(){if(!this.geometry||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference)){if(l.canProject(this.geometry,this.spatialReference))return l.project(this.geometry,
this.spatialReference);if(c.isLoaded())return c.project(this.geometry,this.spatialReference);g.error("#constraints.geometry","unsupported coordinate system. The source geometry cannot be projected to the view's coordinate system. The projection engine cannot be loaded.",{geometry:this.geometry});return null}return this.geometry},enumerable:!1,configurable:!0});f.prototype.constrain=function(a,b){if(!this.normalizedGeometry)return a;b=a.targetGeometry;if("extent"===this.normalizedGeometry.type?d.extentContainsPoint(this.normalizedGeometry,
b):d.polygonContainsPoint(this.normalizedGeometry,b))return a;b=n.nearestCoordinate(this.normalizedGeometry,b).coordinate;if(!b)return a;a.targetGeometry=b;return a};f.prototype.clone=function(){var a,b;return new k({geometry:null===(a=this.geometry)||void 0===a?void 0:a.clone(),spatialReference:null===(b=this.spatialReference)||void 0===b?void 0:b.clone()})};var k;e.__decorate([b.property({constructOnly:!0})],f.prototype,"geometry",void 0);e.__decorate([b.property({readOnly:!0,dependsOn:["geometry",
"spatialReference"]})],f.prototype,"normalizedGeometry",null);e.__decorate([b.property({constructOnly:!0})],f.prototype,"spatialReference",void 0);return f=k=e.__decorate([b.subclass("esri.views.2d.constraints.GeometryConstraint")],f)}(m);a.GeometryConstraint=p})},"esri/geometry/projection":function(){define("require exports ../core/promiseUtils ./pe ./support/GeographicTransformation @dojo/framework/shim/Promise".split(" "),function(p,a,e,m,k){function b(a,b,l,n,e){void 0===e&&(e=null);if(null===
e){var f=k.cacheKey(l,n);void 0!==g[f]?e=g[f]:(e=c(l,n,null),null===e&&(e=new k),g[f]=e)}return d._project(a,b,l,n,e)}function c(a,b,c){void 0===c&&(c=null);a=d._getTransformation(n,a,b,c,null===c||void 0===c?void 0:c.spatialReference);return null!==a?k.fromGE(a):null}Object.defineProperty(a,"__esModule",{value:!0});a.getTransformations=a.getTransformation=a.projectMany=a.project=a.load=a.isSupported=a.isLoaded=void 0;var d=null,n=null;a.isLoaded=function(){return!!d&&m.isLoaded()};a.isSupported=
function(){return m.isSupported()};var l=null;a.load=function(){return l?l:l=e.all([m.load(),new Promise(function(a,b){p(["./geometryEngineBase"],a,b)}),new Promise(function(a,b){p(["./geometryAdapters/hydrated"],a,b)})]).then(function(a){var b=a[1];n=a[2].hydratedAdapter;d=b;d._enableProjection(m)})};a.project=function(a,c,d){void 0===d&&(d=null);return a instanceof Array?0===a.length?[]:b(n,a,a[0].spatialReference,c,d):b(n,[a],a.spatialReference,c,d)[0]};var g={};a.projectMany=b;a.getTransformation=
c;a.getTransformations=function(a,b,c){void 0===c&&(c=null);a=d._getTransformationBySuitability(n,a,b,c,null===c||void 0===c?void 0:c.spatialReference);if(null!==a){b=[];for(c=0;c<a.length;c++)b.push(k.fromGE(a[c]));return b}return[]}})},"esri/geometry/pe":function(){define("require exports tslib ../assets ../core/has ../core/promiseUtils @dojo/framework/shim/Promise".split(" "),function(p,a,e,m,k,b){function c(b){function c(a,b,c){a[b]=c(a[b])}a._pe=b;h.init();v.init();q.init();C.init();r.init();
a.PeGCSExtent=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}e.__extends(c,b);c.prototype.destroy=function(){a._pe.destroy(this)};return c}(a._pe.PeGCSExtent);for(var d=0,f=[a._pe.PeDatum,a._pe.PeGeogcs,a._pe.PeGeogtran,a._pe.PeObject,a._pe.PeParameter,a._pe.PePrimem,a._pe.PeProjcs,a._pe.PeSpheroid,a._pe.PeUnit];d<f.length;d++)b=f[d],c(b.prototype,"getName",function(a){return function(){return a.call(this,Array(h.PE_NAME_MAX))}});d=0;for(f=[a._pe.PeGeogtran,a._pe.PeProjcs];d<
f.length;d++)b=f[d],c(b.prototype,"getParameters",function(b){return function(){for(var c=Array(h.PE_PARM_MAX),d=b.call(this),f=0;f<c.length;f++){var g=a._pe.getValue(d,"*");c[f]=g?a._pe.wrapPointer(g,a._pe.PeParameter):null;d+=Int32Array.BYTES_PER_ELEMENT}return c}});c(a._pe.PeHorizon.prototype,"getCoord",function(a){return function(){var b=this.getSize();if(!b)return null;var c=[],d=a.call(this);g(c,b,d);return c}});c(a._pe.PeGTlistExtendedEntry.prototype,"getEntries",function(b){var c=a._pe._pe_getPeGTlistExtendedGTsSize();
return function(){var d=null,f=b.call(this);if(!a._pe.compare(f,a._pe.NULL)){var d=[f],g=this.getSteps();if(1<g)for(var f=a._pe.getPointer(f),l=1;l<g;l++)d.push(a._pe.wrapPointer(f+c*l,a._pe.PeGTlistExtendedGTs))}return d}});var l=a._pe._pe_getPeHorizonSize();b=function(b){return function(){var c=this._cache;c||(this._cache=c=new Map);if(c.has(b))return c.get(b);var d=null,f=b.call(this);if(!a._pe.compare(f,a._pe.NULL)){var d=[f],g=f.getNump();if(1<g)for(var f=a._pe.getPointer(f),h=1;h<g;h++)d.push(a._pe.wrapPointer(f+
l*h,a._pe.PeHorizon))}c.set(b,d);return d}};c(a._pe.PeProjcs.prototype,"horizonGcsGenerate",b);c(a._pe.PeProjcs.prototype,"horizonPcsGenerate",b);a._pe.PeObject.prototype.toString=function(b){void 0===b&&(b=h.PE_STR_OPTS_NONE);a._pe.ensureCache.prepare();var c=a._pe.getPointer(this),d=a._pe.ensureInt8(Array(h.PE_BUFFER_MAX));return a._pe.UTF8ToString(a._pe._pe_object_to_string_ext(c,b,d))}}function d(b){if(b){var c=a._pe.getClass(b);c&&(c=a._pe.getCache(c))&&(b=a._pe.getPointer(b))&&delete c[b]}}
function n(b,c){var d=[];c=Array(c);for(var f=0;f<b;f++)d.push(a._pe.ensureInt8(c));return d}function l(a){var b;Array.isArray(a[0])?(b=[],a.forEach(function(a){b.push(a[0],a[1])})):b=a;return b}function g(b,c,d,f){void 0===f&&(f=!1);if(f)for(f=0;f<2*c;f++)b[f]=a._pe.getValue(d+f*Float64Array.BYTES_PER_ELEMENT,"double");else{var g=0===b.length;for(f=0;f<c;f++)g&&(b[f]=Array(2)),b[f][0]=a._pe.getValue(d,"double"),b[f][1]=a._pe.getValue(d+Float64Array.BYTES_PER_ELEMENT,"double"),d+=2*Float64Array.BYTES_PER_ELEMENT}}
Object.defineProperty(a,"__esModule",{value:!0});a._init=a.PeVersion=a.PePCSInfo=a.PeNotationUtm=a.PeNotationUsng=a.PeNotationMgrs=a.PeNotationDms=a.PeGTTransformations=a.PeGTlistExtendedEntry=a.PeGTlistExtended=a.PeGCSExtent=a.PeFactory=a.PeDefs=a.PeCSTransformations=a.load=a.isSupported=a.isLoaded=a._pe=void 0;var f;a._pe=null;a.isLoaded=function(){return!!a._pe};a.isSupported=function(){return!!k("esri-wasm")};a.load=function(){return f?f:f=b.create(function(a,b){(new Promise(function(a,b){p(["./support/pe-wasm"],
a,b)})).then(function(d){d({locateFile:function(a){return m.getAssetUrl("esri/geometry/support/"+a)},onAbort:function(a){b(Error(a))}}).then(function(b){c(b);a()})})})};(function(b){function c(b,c,d){a._pe.ensureCache.prepare();var f=l(d),h=d===f,f=a._pe.ensureFloat64(f);(b=a._pe._pe_geog_to_proj(a._pe.getPointer(b),c,f))&&g(d,c,f,h);return b}function d(a,b,c){return f(a,b,c,0)}function f(b,c,d,f){a._pe.ensureCache.prepare();var h=l(d),n=d===h,h=a._pe.ensureFloat64(h);(b=a._pe._pe_proj_to_geog_center(a._pe.getPointer(b),
c,h,f))&&g(d,c,h,n);return b}b.geogToProj=c;b.projGeog=function(a,b,f,g){switch(g){case h.PE_TRANSFORM_P_TO_G:return d(a,b,f);case h.PE_TRANSFORM_G_TO_P:return c(a,b,f)}return 0};b.projToGeog=d;b.projToGeogCenter=f})(a.PeCSTransformations||(a.PeCSTransformations={}));var h;(function(b){b.init=function(){b.PE_BUFFER_MAX=a._pe.PeDefs.prototype.PE_BUFFER_MAX;b.PE_NAME_MAX=a._pe.PeDefs.prototype.PE_NAME_MAX;b.PE_MGRS_MAX=a._pe.PeDefs.prototype.PE_MGRS_MAX;b.PE_USNG_MAX=a._pe.PeDefs.prototype.PE_USNG_MAX;
b.PE_DD_MAX=a._pe.PeDefs.prototype.PE_DD_MAX;b.PE_DDM_MAX=a._pe.PeDefs.prototype.PE_DDM_MAX;b.PE_DMS_MAX=a._pe.PeDefs.prototype.PE_DMS_MAX;b.PE_UTM_MAX=a._pe.PeDefs.prototype.PE_UTM_MAX;b.PE_PARM_MAX=a._pe.PeDefs.prototype.PE_PARM_MAX;b.PE_TYPE_NONE=a._pe.PeDefs.prototype.PE_TYPE_NONE;b.PE_TYPE_GEOGCS=a._pe.PeDefs.prototype.PE_TYPE_GEOGCS;b.PE_TYPE_PROJCS=a._pe.PeDefs.prototype.PE_TYPE_PROJCS;b.PE_TYPE_GEOGTRAN=a._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;b.PE_TYPE_COORDSYS=a._pe.PeDefs.prototype.PE_TYPE_COORDSYS;
b.PE_TYPE_UNIT=a._pe.PeDefs.prototype.PE_TYPE_UNIT;b.PE_STR_OPTS_NONE=a._pe.PeDefs.prototype.PE_STR_OPTS_NONE;b.PE_STR_AUTH_NONE=a._pe.PeDefs.prototype.PE_STR_AUTH_NONE;b.PE_STR_AUTH_TOP=a._pe.PeDefs.prototype.PE_STR_AUTH_TOP;b.PE_STR_NAME_CANON=a._pe.PeDefs.prototype.PE_STR_NAME_CANON;b.PE_PARM_X0=a._pe.PeDefs.prototype.PE_PARM_X0;b.PE_PARM_ND=a._pe.PeDefs.prototype.PE_PARM_ND;b.PE_TRANSFORM_1_TO_2=a._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;b.PE_TRANSFORM_2_TO_1=a._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;
b.PE_TRANSFORM_P_TO_G=a._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;b.PE_TRANSFORM_G_TO_P=a._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;b.PE_HORIZON_RECT=a._pe.PeDefs.prototype.PE_HORIZON_RECT;b.PE_HORIZON_POLY=a._pe.PeDefs.prototype.PE_HORIZON_POLY;b.PE_HORIZON_LINE=a._pe.PeDefs.prototype.PE_HORIZON_LINE;b.PE_HORIZON_DELTA=a._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(h=a.PeDefs||(a.PeDefs={}));(function(b){function c(b,c){var g=null,l=f[b];l||(l={},f[b]=l);l.hasOwnProperty(String(c))?g=l[c]:(b=a._pe.PeFactory.prototype.factoryByType(b,
c),a._pe.compare(b,a._pe.NULL)||(g=b,l[c]=g));return g=d(g)}function d(b){if(b){var c=b.getType();switch(c){case h.PE_TYPE_GEOGCS:b=a._pe.castObject(b,a._pe.PeGeogcs);break;case h.PE_TYPE_PROJCS:b=a._pe.castObject(b,a._pe.PeProjcs);break;case h.PE_TYPE_GEOGTRAN:b=a._pe.castObject(b,a._pe.PeGeogtran);break;default:c&h.PE_TYPE_UNIT&&(b=a._pe.castObject(b,a._pe.PeUnit))}}return b}var f={},g={};b.initialize=function(){a._pe.PeFactory.prototype.initialize(null)};b.coordsys=function(a){return c(h.PE_TYPE_COORDSYS,
a)};b.factoryByType=c;b.fromString=function(b,c){var f=null,l=g[b];l||(l={},g[b]=l);l.hasOwnProperty(c)?f=l[c]:(b=a._pe.PeFactory.prototype.fromString(b,c),a._pe.compare(b,a._pe.NULL)||(f=b,l[c]=f));return f=d(f)};b.geogcs=function(a){return c(h.PE_TYPE_GEOGCS,a)};b.geogtran=function(a){return c(h.PE_TYPE_GEOGTRAN,a)};b.getCode=function(b){return a._pe.PeFactory.prototype.getCode(b)};b.projcs=function(a){return c(h.PE_TYPE_PROJCS,a)};b.unit=function(a){return c(h.PE_TYPE_UNIT,a)}})(a.PeFactory||(a.PeFactory=
{}));a.PeGCSExtent=null;var v;(function(b){var c;b.init=function(){b.PE_GTLIST_OPTS_COMMON=a._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;c=a._pe._pe_getPeGTlistExtendedEntrySize()};b.getGTlist=function(b,d,f,g,l,h){var n=null,e=new a._pe.PeInteger(h);try{var q=a._pe.PeGTlistExtended.prototype.getGTlist(b,d,f,g,l,e);if(h=e.val)if(n=[q],1<h){var k=a._pe.getPointer(q);for(b=1;b<h;b++)n.push(a._pe.wrapPointer(k+c*b,a._pe.PeGTlistExtendedEntry))}}finally{a._pe.destroy(e)}return n}})(v=a.PeGTlistExtended||
(a.PeGTlistExtended={}));(function(b){b.destroy=function(b){if(b&&b.length){for(var c=0;c<b.length;c++){var f=b[c];d(f);f.getEntries().forEach(function(a){d(a);a=a.getGeogtran();d(a);a.getParameters().forEach(d);[a.getGeogcs1(),a.getGeogcs2()].forEach(function(a){d(a);var b=a.getDatum();d(b);d(b.getSpheroid());d(a.getPrimem());d(a.getUnit())})})}a._pe.PeGTlistExtendedEntry.prototype.Delete(b[0])}}})(a.PeGTlistExtendedEntry||(a.PeGTlistExtendedEntry={}));(function(b){b.geogToGeog=function(b,c,d,f,
h){a._pe.ensureCache.prepare();var n=l(d),e=d===n,n=a._pe.ensureFloat64(n),q=0;f&&(q=a._pe.ensureFloat64(f));(b=a._pe._pe_geog_to_geog(a._pe.getPointer(b),c,n,q,h))&&g(d,c,n,e);return b}})(a.PeGTTransformations||(a.PeGTTransformations={}));(function(b){function c(b,c,d,f,g,e){a._pe.ensureCache.prepare();var q,k;switch(b){case "dd":q=a._pe._pe_geog_to_dd;k=h.PE_DD_MAX;break;case "ddm":q=a._pe._pe_geog_to_ddm;k=h.PE_DDM_MAX;break;case "dms":q=a._pe._pe_geog_to_dms,k=h.PE_DMS_MAX}b=0;c&&(b=a._pe.getPointer(c));
c=l(f);c=a._pe.ensureFloat64(c);k=n(d,k);f=a._pe.ensureInt32(k);if(g=q(b,d,c,g,f))for(q=0;q<d;q++)e[q]=a._pe.UTF8ToString(k[q]);return g}function d(b,c,d,f,l){a._pe.ensureCache.prepare();var h;switch(b){case "dd":h=a._pe._pe_dd_to_geog;break;case "ddm":h=a._pe._pe_ddm_to_geog;break;case "dms":h=a._pe._pe_dms_to_geog}b=0;c&&(b=a._pe.getPointer(c));c=f.map(function(b){return a._pe.ensureString(b)});f=a._pe.ensureInt32(c);c=a._pe.ensureFloat64(Array(2*d));(h=h(b,d,f,c))&&g(l,d,c);return h}b.geog_to_dms=
function(a,b,d,f,g){return c("dms",a,b,d,f,g)};b.dms_to_geog=function(a,b,c,f){return d("dms",a,b,c,f)};b.geog_to_ddm=function(a,b,d,f,g){return c("ddm",a,b,d,f,g)};b.ddm_to_geog=function(a,b,c,f){return d("ddm",a,b,c,f)};b.geog_to_dd=function(a,b,d,f,g){return c("dd",a,b,d,f,g)};b.dd_to_geog=function(a,b,c,f){return d("dd",a,b,c,f)}})(a.PeNotationDms||(a.PeNotationDms={}));var q;(function(b){b.init=function(){b.PE_MGRS_STYLE_NEW=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;b.PE_MGRS_STYLE_OLD=
a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;b.PE_MGRS_STYLE_AUTO=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;b.PE_MGRS_180_ZONE_1_PLUS=a._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;b.PE_MGRS_ADD_SPACES=a._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};b.geog_to_mgrs_extended=function(b,c,d,f,g,e,q){a._pe.ensureCache.prepare();var k=0;b&&(k=a._pe.getPointer(b));b=l(d);d=a._pe.ensureFloat64(b);b=n(c,h.PE_MGRS_MAX);var r=a._pe.ensureInt32(b);if(f=a._pe._pe_geog_to_mgrs_extended(k,
c,d,f,g,e,r))for(g=0;g<c;g++)q[g]=a._pe.UTF8ToString(b[g]);return f};b.mgrs_to_geog_extended=function(b,c,d,f,l){a._pe.ensureCache.prepare();var h=0;b&&(h=a._pe.getPointer(b));b=d.map(function(b){return a._pe.ensureString(b)});d=a._pe.ensureInt32(b);b=a._pe.ensureFloat64(Array(2*c));(f=a._pe._pe_mgrs_to_geog_extended(h,c,d,f,b))&&g(l,c,b);return f}})(q=a.PeNotationMgrs||(a.PeNotationMgrs={}));(function(b){b.geog_to_usng=function(b,c,d,f,g,e,q){a._pe.ensureCache.prepare();var k=0;b&&(k=a._pe.getPointer(b));
b=l(d);d=a._pe.ensureFloat64(b);b=n(c,h.PE_MGRS_MAX);var r=a._pe.ensureInt32(b);if(f=a._pe._pe_geog_to_usng(k,c,d,f,g,e,r))for(g=0;g<c;g++)q[g]=a._pe.UTF8ToString(b[g]);return f};b.usng_to_geog=function(b,c,d,f){a._pe.ensureCache.prepare();var l=0;b&&(l=a._pe.getPointer(b));b=d.map(function(b){return a._pe.ensureString(b)});d=a._pe.ensureInt32(b);b=a._pe.ensureFloat64(Array(2*c));(l=a._pe._pe_usng_to_geog(l,c,d,b))&&g(f,c,b);return l}})(a.PeNotationUsng||(a.PeNotationUsng={}));var C;(function(b){b.init=
function(){b.PE_UTM_OPTS_NONE=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;b.PE_UTM_OPTS_ADD_SPACES=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;b.PE_UTM_OPTS_NS=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};b.geog_to_utm=function(b,c,d,f,g){a._pe.ensureCache.prepare();var e=0;b&&(e=a._pe.getPointer(b));b=l(d);d=a._pe.ensureFloat64(b);b=n(c,h.PE_UTM_MAX);var q=a._pe.ensureInt32(b);if(f=a._pe._pe_geog_to_utm(e,c,d,f,q))for(e=0;e<c;e++)g[e]=a._pe.UTF8ToString(b[e]);return f};b.utm_to_geog=
function(b,c,d,f,l){a._pe.ensureCache.prepare();var h=0;b&&(h=a._pe.getPointer(b));b=d.map(function(b){return a._pe.ensureString(b)});d=a._pe.ensureInt32(b);b=a._pe.ensureFloat64(Array(2*c));(f=a._pe._pe_utm_to_geog(h,c,d,f,b))&&g(l,c,b);return f}})(C=a.PeNotationUtm||(a.PeNotationUtm={}));var r;(function(b){var c=new Map;b.init=function(){b.PE_PCSINFO_OPTION_NONE=a._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;b.PE_PCSINFO_OPTION_DOMAIN=a._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;b.PE_POLE_OUTSIDE_BOUNDARY=
a._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;b.PE_POLE_POINT=a._pe.PePCSInfo.prototype.PE_POLE_POINT};b.generate=function(d,f){void 0===f&&(f=b.PE_PCSINFO_OPTION_DOMAIN);var g,l;c.has(d)&&(l=c.get(d),l[f]&&(g=l[f]));g||(g=a._pe.PePCSInfo.prototype.generate(d,f),l||(l=[],c.set(d,l)),l[f]=g);return g}})(r=a.PePCSInfo||(a.PePCSInfo={}));(function(b){b.version_string=function(){return a._pe.PeVersion.prototype.version_string()}})(a.PeVersion||(a.PeVersion={}));a._init=c})},"esri/geometry/support/GeographicTransformation":function(){define(["require",
"exports","./GeographicTransformationStep"],function(p,a,e){return function(){function a(a){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(a&&a.steps){var b=0;for(a=a.steps;b<a.length;b++){var c=a[b];c instanceof e?this.steps.push(c):this.steps.push(new e({wkid:c.wkid,wkt:c.wkt,isInverse:c.isInverse}))}}}a.cacheKey=function(a,b){return[void 0!==a.wkid&&null!==a.wkid?a.wkid.toString():"-1",void 0!==a.wkt&&null!==a.wkt?a.wkt.toString():"",void 0!==b.wkid&&null!==b.wkid?
b.wkid.toString():"-1",void 0!==b.wkt&&null!==b.wkt?b.wkt.toString():""].join()};a.fromGE=function(k){var b=new a,c="",d=0;for(k=k.steps;d<k.length;d++){var n=e.fromGE(k[d]);b.steps.push(n);c+=n.uid.toString()+","}b._cached_projection={};b._gtlistentry=null;b._chain=c;return b};a.prototype.getInverse=function(){var e=new a;e.steps=[];for(var b=this.steps.length-1;0<=b;b--)e.steps.push(this.steps[b].getInverse());return e};a.prototype.getGTListEntry=function(){for(var a="",b=0,c=this.steps;b<c.length;b++)a+=
c[b].uid.toString()+",";a!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=a);return this._gtlistentry};a.prototype.assignCachedGe=function(e,b,c){this._cached_projection[a.cacheKey(e,b)]=c};a.prototype.getCachedGeTransformation=function(e,b){for(var c="",d=0,n=this.steps;d<n.length;d++)c+=n[d].uid.toString()+",";c!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=c);e=this._cached_projection[a.cacheKey(e,b)];return void 0===e?null:e};return a}()})},
"esri/geometry/support/GeographicTransformationStep":function(){define(["require","exports"],function(p,a){var e=0;return function(){function a(a){void 0===a&&(a=null);this.uid=e++;a?(this._wkt=void 0!==a.wkt?a.wkt:null,this._wkid=void 0!==a.wkid?a.wkid:-1,this._isInverse=void 0!==a.isInverse?!0===a.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}a.fromGE=function(e){var b=new a;b._wkt=e.wkt;b._wkid=e.wkid;b._isInverse=e.isInverse;return b};Object.defineProperty(a.prototype,"wkt",
{get:function(){return this._wkt},set:function(a){this._wkt=a;this.uid=e++},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"wkid",{get:function(){return this._wkid},set:function(a){this._wkid=a;this.uid=e++},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"isInverse",{get:function(){return this._isInverse},set:function(a){this._isInverse=a;this.uid=e++},enumerable:!1,configurable:!0});a.prototype.getInverse=function(){var e=new a;e._wkt=this.wkt;e._wkid=this._wkid;
e._isInverse=!this.isInverse;return e};return a}()})},"esri/geometry/support/near":function(){define(["require","exports","../../geometry","../../core/libs/gl-matrix-2/vec2","./coordsUtils"],function(p,a,e,m,k){Object.defineProperty(a,"__esModule",{value:!0});a.nearestCoordinate=void 0;a.nearestCoordinate=function(a,c){var b=c.spatialReference;c=[c.x,c.y];var n=Number.POSITIVE_INFINITY,l=0,g=0,f=[0,0],h=0;for(a="extent"===a.type?[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,
a.ymin]]]:a.rings;h<a.length;h++)for(var v=a[h],q=0;q<v.length-1;q++){k.projectPointOnLine(f,c,v,q);var C=m.vec2.distance(c,f);C<n&&(n=C,l=f[0],g=f[1])}return{coordinate:new e.Point({x:l,y:g,spatialReference:b}),distance:n}}})},"esri/views/2d/constraints/RotationConstraint":function(){define(["require","exports","tslib","../../../core/Accessor","../../../core/accessorSupport/decorators"],function(p,a,e,m,k){return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.enabled=!0;
b.rotationEnabled=!0;return b}e.__extends(b,a);d=b;b.prototype.constrain=function(a,b){if(!this.enabled||!b)return a;this.rotationEnabled||(a.rotation=b.rotation);return a};b.prototype.clone=function(){return new d({enabled:this.enabled,rotationEnabled:this.rotationEnabled})};var d;e.__decorate([k.property()],b.prototype,"enabled",void 0);e.__decorate([k.property()],b.prototype,"rotationEnabled",void 0);return b=d=e.__decorate([k.subclass("esri.views.2d.constraints.RotationConstraint")],b)}(m)})},
"esri/views/2d/constraints/ZoomConstraint":function(){define("require exports tslib ../../../core/Accessor ../../../core/accessorSupport/decorators ../../../layers/support/LOD".split(" "),function(p,a,e,m,k,b){return function(a){function c(b){b=a.call(this,b)||this;b._lodByScale={};b._scales=[];b.effectiveLODs=null;b.effectiveMinZoom=-1;b.effectiveMaxZoom=-1;b.effectiveMinScale=0;b.effectiveMaxScale=0;b.lods=null;b.minZoom=-1;b.maxZoom=-1;b.minScale=0;b.maxScale=0;b.snapToZoom=!0;return b}e.__extends(c,
a);n=c;c.prototype.initialize=function(){var a,b,c=this,d=this.lods;b=this.minScale;a=this.maxScale;var n=this.minZoom,e=this.maxZoom,k=-1,r=-1,m=!1,u=!1;0!==b&&0!==a&&b<a&&(a=[a,b],b=a[0],a=a[1]);if(d&&d.length){d=d.map(function(a){return a.clone()});d.sort(function(a,b){return b.scale-a.scale});d.forEach(function(a,b){return a.level=b});for(var y,p=0,x=d;p<x.length;p++){var w=x[p];!m&&0<b&&b>=w.scale&&(k=w.level,m=!0);!u&&0<a&&a>=w.scale&&(r=y?y.level:-1,u=!0);y=w}-1===n&&(n=0===b?0:k);-1===e&&
(e=0===a?d.length-1:r);n=Math.max(n,0);n=Math.min(n,d.length-1);e=Math.max(e,0);e=Math.min(e,d.length-1);n>e&&(b=[e,n],n=b[0],e=b[1]);b=d[n].scale;a=d[e].scale;d.splice(0,n);d.splice(e-n+1,d.length);d.forEach(function(a,b){c._lodByScale[a.scale]=a;c._scales[b]=a.scale});this._set("effectiveLODs",d);this._set("effectiveMinZoom",n);this._set("effectiveMaxZoom",e)}this._set("effectiveMinScale",b);this._set("effectiveMaxScale",a)};c.prototype.constrain=function(a,b){if(b&&a.scale===b.scale)return a;var c=
this.effectiveMinScale,d=this.effectiveMaxScale,g=a.targetGeometry,l=b&&b.targetGeometry,n=0!==c&&a.scale>c;if(0!==d&&a.scale<d||n)c=n?c:d,l&&(b=(c-b.scale)/(a.scale-b.scale),g.x=l.x+(g.x-l.x)*b,g.y=l.y+(g.y-l.y)*b),a.scale=c;this.snapToZoom&&this.effectiveLODs&&(a.scale=this._getClosestScale(a.scale));return a};c.prototype.fit=function(a){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(a,null);var b=this.scaleToZoom(a.scale);a.scale=this.zoomToScale(.99<Math.abs(b-Math.floor(b))?Math.round(b):
Math.floor(b));return a};c.prototype.zoomToScale=function(a){if(!this.effectiveLODs)return 0;a-=this.effectiveMinZoom;a=Math.max(0,a);var b=this._scales;if(0>=a)return b[0];if(a>=b.length)return b[b.length-1];var c=Math.round(a);return b[c]+(c-a)*(b[Math.round(a-.5)]-b[c])};c.prototype.scaleToZoom=function(a){if(!this.effectiveLODs)return-1;var b=this._scales,c,d;if(a>=b[0])return this.effectiveMinZoom;if(a<=b[b.length-1])return this.effectiveMaxZoom;for(var l=0;l<b.length-1;l++){c=b[l];d=b[l+1];
if(d===a)return b=l+this.effectiveMinZoom,b+1;if(c>a&&d<a)return b=l+this.effectiveMinZoom,b+1-(a-d)/(c-d)}};c.prototype.snapToClosestScale=function(a){if(!this.effectiveLODs)return a;a=this.scaleToZoom(a);return this.zoomToScale(Math.round(a))};c.prototype.snapToNextScale=function(a,b){void 0===b&&(b=.5);if(!this.effectiveLODs)return a*b;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a+1)};c.prototype.snapToPreviousScale=function(a,b){void 0===b&&(b=2);if(!this.effectiveLODs)return a*
b;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a-1)};c.prototype.clone=function(){return new n({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})};c.prototype._getClosestScale=function(a){if(this._lodByScale[a])return this._lodByScale[a].scale;a=this._scales.reduce(function(b,c){return Math.abs(c-a)<=Math.abs(b-a)?c:b},this._scales[0]);return this._lodByScale[a].scale};var n;e.__decorate([k.property({readOnly:!0})],c.prototype,"effectiveLODs",
void 0);e.__decorate([k.property({readOnly:!0})],c.prototype,"effectiveMinZoom",void 0);e.__decorate([k.property({readOnly:!0})],c.prototype,"effectiveMaxZoom",void 0);e.__decorate([k.property({readOnly:!0})],c.prototype,"effectiveMinScale",void 0);e.__decorate([k.property({readOnly:!0})],c.prototype,"effectiveMaxScale",void 0);e.__decorate([k.property({type:[b]})],c.prototype,"lods",void 0);e.__decorate([k.property()],c.prototype,"minZoom",void 0);e.__decorate([k.property()],c.prototype,"maxZoom",
void 0);e.__decorate([k.property()],c.prototype,"minScale",void 0);e.__decorate([k.property()],c.prototype,"maxScale",void 0);e.__decorate([k.property()],c.prototype,"snapToZoom",void 0);return c=n=e.__decorate([k.subclass("esri.views.2d.constraints.ZoomConstraint")],c)}(m)})},"esri/views/2d/PaddedViewState":function(){define("require exports tslib ../../core/Accessor ../../core/accessorSupport/decorators ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f64 ./viewpointUtils ./ViewState".split(" "),
function(p,a,e,m,k,b,c,d,n){var l=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.left=0;b.top=0;b.right=0;b.bottom=0;return b}e.__extends(b,a);e.__decorate([k.property()],b.prototype,"left",void 0);e.__decorate([k.property()],b.prototype,"top",void 0);e.__decorate([k.property()],b.prototype,"right",void 0);e.__decorate([k.property()],b.prototype,"bottom",void 0);return b=e.__decorate([k.subclass("esri.views.2d.PaddedViewState.Padding")],b)}(m);return function(a){function f(){for(var d=
[],f=0;f<arguments.length;f++)d[f]=arguments[f];var g=a.apply(this,d)||this;g.paddedViewState=new n;g._updateContent=function(){var a=c.vec2f64.create();return function(){var c=g._get("size"),d=g._get("padding");if(c&&d){var f=g.paddedViewState;b.vec2.set(a,d.left+d.right,d.top+d.bottom);b.vec2.subtract(a,c,a);b.vec2.copy(f.size,a);if(c=f.viewpoint)g.viewpoint=c}}}();g.watch(["size","padding"],g._updateContent,!0);g.padding=new l;g.size=[0,0];return g}e.__extends(f,a);Object.defineProperty(f.prototype,
"padding",{set:function(a){this._set("padding",a||new l)},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"viewpoint",{set:function(a){if(a){var b=a.clone();this.paddedViewState.viewpoint=a;d.addPadding(b,a,this._get("size"),this._get("padding"));a=this._viewpoint2D;var c=b.targetGeometry;a.center[0]=c.x;a.center[1]=c.y;a.rotation=b.rotation;a.scale=b.scale;a.spatialReference=c.spatialReference;this._update()}},enumerable:!1,configurable:!0});e.__decorate([k.property()],f.prototype,
"paddedViewState",void 0);e.__decorate([k.property({type:l})],f.prototype,"padding",null);e.__decorate([k.property()],f.prototype,"viewpoint",null);return f=e.__decorate([k.subclass("esri.views.2d.PaddedViewState")],f)}(n)})},"esri/views/2d/ViewState":function(){define("require exports tslib ../../geometry ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/libs/gl-matrix-2/common ../../core/libs/gl-matrix-2/mat2d ../../core/libs/gl-matrix-2/mat2df32 ../../core/libs/gl-matrix-2/mat2df64 ../../core/libs/gl-matrix-2/mat3 ../../core/libs/gl-matrix-2/mat3f32 ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f32 ../../core/libs/gl-matrix-2/vec2f64 ../../core/libs/gl-matrix-2/types/vec2 ./viewpointUtils".split(" "),
function(p,a,e,m,k,b,c,d,n,l,g,f,h,v,q,C,r,t){var u=[0,0];return function(a){function b(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];b=a.apply(this,b)||this;b._viewpoint2D={center:C.vec2f64.create(),rotation:0,scale:0,spatialReference:null};b.center=[0,0];b.extent=new m.Extent;b.id=0;b.inverseTransform=g.mat2df64.create();b.resolution=0;b.rotation=0;b.scale=0;b.transform=g.mat2df64.create();b.transformNoRotation=g.mat2df64.create();b.displayMat3=h.mat3f32.create();b.displayViewMat3=
h.mat3f32.create();b.viewMat3=h.mat3f32.create();b.viewMat2d=l.mat2df32.create();b.worldScreenWidth=0;b.size=[0,0];return b}e.__extends(b,a);y=b;Object.defineProperty(b.prototype,"pixelRatio",{set:function(a){this._set("pixelRatio",a);this._update()},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"size",{set:function(a){this._set("size",a);this._update()},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"viewpoint",{set:function(a){if(a){var b=this._viewpoint2D,
c=a.targetGeometry;b.center[0]=c.x;b.center[1]=c.y;b.rotation=a.rotation;b.scale=a.scale;b.spatialReference=c.spatialReference}this._update()},enumerable:!1,configurable:!0});b.prototype.copy=function(a){var b=this.size,c=this.viewpoint;c&&b?(this.viewpoint=t.copy(c,a.viewpoint),this._set("size",v.vec2.copy(b,a.size))):(this.viewpoint=a.viewpoint.clone(),this._set("size",[a.size[0],a.size[1]]));this._set("pixelRatio",a.pixelRatio);return this};b.prototype.clone=function(){return new y({size:this.size,
viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})};b.prototype.toMap=function(a,b,c){if(r.isVec2(b))return v.vec2.transformMat2d(a,b,this.inverseTransform);u[0]=b;u[1]=c;return v.vec2.transformMat2d(a,u,this.inverseTransform)};b.prototype.toScreen=function(a,b,c){if(r.isVec2(b))return v.vec2.transformMat2d(a,b,this.transform);u[0]=b;u[1]=c;return v.vec2.transformMat2d(a,u,this.transform)};b.prototype.toScreenNoRotation=function(a,b,c){if(r.isVec2(b))return v.vec2.transformMat2d(a,b,this.transformNoRotation);
u[0]=b;u[1]=c;return v.vec2.transformMat2d(a,u,this.transformNoRotation)};b.prototype.getScreenTransform=function(a,b){var c=this._viewpoint2D.center,d=this._get("pixelRatio")||1,f=this._get("size");t.getMatrix(a,c,f,b,0,d);return a};b.prototype._update=function(){var a=this._viewpoint2D,b=a.center,c=a.spatialReference,g=a.scale,l=a.rotation,a=this._get("pixelRatio")||1,h=this._get("size"),e=new k({targetGeometry:new m.Point(b[0],b[1],c),scale:g,rotation:l});this._set("viewpoint",e);if(h&&c&&g)return this.resolution=
t.getResolution(e),this.rotation=l,this.scale=g,this.spatialReference=c,v.vec2.copy(this.center,b),f.mat3.set(this.displayMat3,0!==h[0]?2/h[0]:0,0,0,0,0!==h[1]?-2/h[1]:0,0,-1,1,1),g=f.mat3.identity(this.viewMat3),b=q.vec2f32.fromValues(h[0]/2,h[1]/2),c=q.vec2f32.fromValues(-h[0]/2,-h[1]/2),l=d.common.toRadian(l),f.mat3.translate(g,g,b),f.mat3.rotate(g,g,l),f.mat3.translate(g,g,c),f.mat3.multiply(this.displayViewMat3,this.displayMat3,g),g=n.mat2d.identity(this.viewMat2d),n.mat2d.translate(g,g,b),n.mat2d.rotate(g,
g,l),n.mat2d.translate(g,g,c),t.getExtent(this.extent,e,h),t.getTransform(this.transform,e,h,a),n.mat2d.invert(this.inverseTransform,this.transform),t.getTransformNoRotation(this.transformNoRotation,e,h,a),this.worldScreenWidth=t.getWorldScreenWidth(this.spatialReference,this.resolution),this._set("id",this.id+1),this};var y;e.__decorate([c.property({readOnly:!0})],b.prototype,"id",void 0);e.__decorate([c.property({value:1,json:{write:!0}})],b.prototype,"pixelRatio",null);e.__decorate([c.property({json:{write:!0}})],
b.prototype,"size",null);e.__decorate([c.property({type:k,json:{write:!0}})],b.prototype,"viewpoint",null);return b=y=e.__decorate([c.subclass("esri.views.2d.ViewState")],b)}(b.JSONSupport)})},"esri/core/libs/gl-matrix-2/mat2df32":function(){define(["require","exports","./factories/mat2df32"],function(p,a,e){Object.defineProperty(a,"__esModule",{value:!0});a.mat2df32=void 0;a.mat2df32=e})},"esri/core/libs/gl-matrix-2/factories/mat2df32":function(){define(["require","exports"],function(p,a){function e(a,
e,b,c){var d=e[c];e=e[c+1];a[c]=b[0]*d+b[2]*e+b[4];a[c+1]=b[1]*d+b[3]*e+b[5]}Object.defineProperty(a,"__esModule",{value:!0});a.transformMany=a.transform=a.createView=a.fromValues=a.clone=a.create=void 0;a.create=function(){var a=new Float32Array(6);a[0]=1;a[3]=1;return a};a.clone=function(a){var e=new Float32Array(6);e[0]=a[0];e[1]=a[1];e[2]=a[2];e[3]=a[3];e[4]=a[4];e[5]=a[5];return e};a.fromValues=function(a,e,b,c,d,n){var l=new Float32Array(6);l[0]=a;l[1]=e;l[2]=b;l[3]=c;l[4]=d;l[5]=n;return l};
a.createView=function(a,e){return new Float32Array(a,e,6)};a.transform=e;a.transformMany=function(a,k,b,c,d,n){void 0===c&&(c=0);void 0===d&&(d=0);void 0===n&&(n=2);for(d=d||k.length/n;c<d;c++)e(a,k,b,c*n)}})},"esri/core/libs/gl-matrix-2/mat3":function(){define(["require","exports","./math/mat3"],function(p,a,e){Object.defineProperty(a,"__esModule",{value:!0});a.mat3=void 0;a.mat3=e})},"esri/core/libs/gl-matrix-2/math/mat3":function(){define(["require","exports","./common"],function(p,a,e){function m(a,
c,d){var b=c[0],l=c[1],g=c[2],f=c[3],h=c[4],e=c[5],q=c[6],k=c[7];c=c[8];var r=d[0],t=d[1],m=d[2],y=d[3],p=d[4],x=d[5],w=d[6],A=d[7];d=d[8];a[0]=r*b+t*f+m*q;a[1]=r*l+t*h+m*k;a[2]=r*g+t*e+m*c;a[3]=y*b+p*f+x*q;a[4]=y*l+p*h+x*k;a[5]=y*g+p*e+x*c;a[6]=w*b+A*f+d*q;a[7]=w*l+A*h+d*k;a[8]=w*g+A*e+d*c;return a}function k(a,c,d){a[0]=c[0]-d[0];a[1]=c[1]-d[1];a[2]=c[2]-d[2];a[3]=c[3]-d[3];a[4]=c[4]-d[4];a[5]=c[5]-d[5];a[6]=c[6]-d[6];a[7]=c[7]-d[7];a[8]=c[8]-d[8];return a}Object.defineProperty(a,"__esModule",{value:!0});
a.sub=a.mul=a.equals=a.exactEquals=a.multiplyScalarAndAdd=a.multiplyScalar=a.subtract=a.add=a.frob=a.str=a.projection=a.normalFromMat4=a.normalFromMat4Legacy=a.fromQuat=a.fromMat2d=a.fromScaling=a.fromRotation=a.fromTranslation=a.scaleByVec2=a.scale=a.rotate=a.translate=a.multiply=a.determinant=a.adjoint=a.invert=a.transpose=a.identity=a.set=a.copy=a.fromMat4=void 0;a.fromMat4=function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[4];a[4]=c[5];a[5]=c[6];a[6]=c[8];a[7]=c[9];a[8]=c[10];return a};a.copy=
function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];a[6]=c[6];a[7]=c[7];a[8]=c[8];return a};a.set=function(a,c,d,e,l,g,f,h,k,q){a[0]=c;a[1]=d;a[2]=e;a[3]=l;a[4]=g;a[5]=f;a[6]=h;a[7]=k;a[8]=q;return a};a.identity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};a.transpose=function(a,c){if(a===c){var b=c[1],e=c[2],l=c[5];a[1]=c[3];a[2]=c[6];a[3]=b;a[5]=c[7];a[6]=e;a[7]=l}else a[0]=c[0],a[1]=c[3],a[2]=c[6],a[3]=c[1],a[4]=c[4],a[5]=c[7],a[6]=
c[2],a[7]=c[5],a[8]=c[8];return a};a.invert=function(a,c){var b=c[0],e=c[1],l=c[2],g=c[3],f=c[4],h=c[5],k=c[6],q=c[7];c=c[8];var C=c*f-h*q,r=-c*g+h*k,t=q*g-f*k,m=b*C+e*r+l*t;if(!m)return null;m=1/m;a[0]=C*m;a[1]=(-c*e+l*q)*m;a[2]=(h*e-l*f)*m;a[3]=r*m;a[4]=(c*b-l*k)*m;a[5]=(-h*b+l*g)*m;a[6]=t*m;a[7]=(-q*b+e*k)*m;a[8]=(f*b-e*g)*m;return a};a.adjoint=function(a,c){var b=c[0],e=c[1],l=c[2],g=c[3],f=c[4],h=c[5],k=c[6],q=c[7];c=c[8];a[0]=f*c-h*q;a[1]=l*q-e*c;a[2]=e*h-l*f;a[3]=h*k-g*c;a[4]=b*c-l*k;a[5]=
l*g-b*h;a[6]=g*q-f*k;a[7]=e*k-b*q;a[8]=b*f-e*g;return a};a.determinant=function(a){var b=a[3],d=a[4],e=a[5],l=a[6],g=a[7],f=a[8];return a[0]*(f*d-e*g)+a[1]*(-f*b+e*l)+a[2]*(g*b-d*l)};a.multiply=m;a.translate=function(a,c,d){var b=c[0],l=c[1],g=c[2],f=c[3],e=c[4],k=c[5],q=c[6],m=c[7];c=c[8];var r=d[0];d=d[1];a[0]=b;a[1]=l;a[2]=g;a[3]=f;a[4]=e;a[5]=k;a[6]=r*b+d*f+q;a[7]=r*l+d*e+m;a[8]=r*g+d*k+c;return a};a.rotate=function(a,c,d){var b=c[0],l=c[1],g=c[2],f=c[3],e=c[4],k=c[5],q=c[6],m=c[7];c=c[8];var r=
Math.sin(d);d=Math.cos(d);a[0]=d*b+r*f;a[1]=d*l+r*e;a[2]=d*g+r*k;a[3]=d*f-r*b;a[4]=d*e-r*l;a[5]=d*k-r*g;a[6]=q;a[7]=m;a[8]=c;return a};a.scale=function(a,c,d){var b=d[0],l=d[1];d=d[2];a[0]=b*c[0];a[1]=b*c[1];a[2]=b*c[2];a[3]=l*c[3];a[4]=l*c[4];a[5]=l*c[5];a[6]=d*c[6];a[7]=d*c[7];a[8]=d*c[8];return a};a.scaleByVec2=function(a,c,d){var b=d[0];d=d[1];a[0]=b*c[0];a[1]=b*c[1];a[2]=b*c[2];a[3]=d*c[3];a[4]=d*c[4];a[5]=d*c[5];return a};a.fromTranslation=function(a,c){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=
0;a[6]=c[0];a[7]=c[1];a[8]=1;return a};a.fromRotation=function(a,c){var b=Math.sin(c);c=Math.cos(c);a[0]=c;a[1]=b;a[2]=0;a[3]=-b;a[4]=c;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};a.fromScaling=function(a,c){a[0]=c[0];a[1]=0;a[2]=0;a[3]=0;a[4]=c[1];a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};a.fromMat2d=function(a,c){a[0]=c[0];a[1]=c[1];a[2]=0;a[3]=c[2];a[4]=c[3];a[5]=0;a[6]=c[4];a[7]=c[5];a[8]=1;return a};a.fromQuat=function(a,c){var b=c[0],e=c[1],l=c[2];c=c[3];var g=b+b,f=e+e,h=l+l,b=b*g,k=e*g,e=e*f,q=l*g,
m=l*f,l=l*h,g=c*g,f=c*f;c*=h;a[0]=1-e-l;a[3]=k-c;a[6]=q+f;a[1]=k+c;a[4]=1-b-l;a[7]=m-g;a[2]=q-f;a[5]=m+g;a[8]=1-b-e;return a};a.normalFromMat4Legacy=function(a,c){var b=c[0],e=c[1],l=c[2],g=c[4],f=c[5],h=c[6],k=c[8],q=c[9];c=c[10];var m=c*f-h*q,r=-c*g+h*k,t=q*g-f*k,u=b*m+e*r+l*t;if(!u)return null;u=1/u;a[0]=m*u;a[1]=(-c*e+l*q)*u;a[2]=(h*e-l*f)*u;a[3]=r*u;a[4]=(c*b-l*k)*u;a[5]=(-h*b+l*g)*u;a[6]=t*u;a[7]=(-q*b+e*k)*u;a[8]=(f*b-e*g)*u;return a};a.normalFromMat4=function(a,c){var b=c[0],e=c[1],l=c[2],
g=c[3],f=c[4],h=c[5],k=c[6],q=c[7],m=c[8],r=c[9],t=c[10],u=c[11],y=c[12],p=c[13],x=c[14];c=c[15];var w=b*h-e*f,A=b*k-l*f,B=b*q-g*f,I=e*k-l*h,G=e*q-g*h,H=l*q-g*k,z=m*p-r*y,N=m*x-t*y,m=m*c-u*y,E=r*x-t*p,r=r*c-u*p,t=t*c-u*x,u=w*t-A*r+B*E+I*m-G*N+H*z;if(!u)return null;u=1/u;a[0]=(h*t-k*r+q*E)*u;a[1]=(k*m-f*t-q*N)*u;a[2]=(f*r-h*m+q*z)*u;a[3]=(l*r-e*t-g*E)*u;a[4]=(b*t-l*m+g*N)*u;a[5]=(e*m-b*r-g*z)*u;a[6]=(p*H-x*G+c*I)*u;a[7]=(x*B-y*H-c*A)*u;a[8]=(y*G-p*B+c*w)*u;return a};a.projection=function(a,c,d){a[0]=
2/c;a[1]=0;a[2]=0;a[3]=0;a[4]=-2/d;a[5]=0;a[6]=-1;a[7]=1;a[8]=1;return a};a.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};a.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))};a.add=function(a,c,d){a[0]=c[0]+d[0];a[1]=c[1]+d[1];a[2]=c[2]+d[2];a[3]=c[3]+d[3];a[4]=c[4]+d[4];a[5]=c[5]+d[5];a[6]=
c[6]+d[6];a[7]=c[7]+d[7];a[8]=c[8]+d[8];return a};a.subtract=k;a.multiplyScalar=function(a,c,d){a[0]=c[0]*d;a[1]=c[1]*d;a[2]=c[2]*d;a[3]=c[3]*d;a[4]=c[4]*d;a[5]=c[5]*d;a[6]=c[6]*d;a[7]=c[7]*d;a[8]=c[8]*d;return a};a.multiplyScalarAndAdd=function(a,c,d,e){a[0]=c[0]+d[0]*e;a[1]=c[1]+d[1]*e;a[2]=c[2]+d[2]*e;a[3]=c[3]+d[3]*e;a[4]=c[4]+d[4]*e;a[5]=c[5]+d[5]*e;a[6]=c[6]+d[6]*e;a[7]=c[7]+d[7]*e;a[8]=c[8]+d[8]*e;return a};a.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]&&
a[4]===c[4]&&a[5]===c[5]&&a[6]===c[6]&&a[7]===c[7]&&a[8]===c[8]};a.equals=function(a,c){var b=a[0],n=a[1],l=a[2],g=a[3],f=a[4],h=a[5],k=a[6],q=a[7];a=a[8];var m=c[0],r=c[1],t=c[2],u=c[3],y=c[4],p=c[5],x=c[6],w=c[7];c=c[8];return Math.abs(b-m)<=e.EPSILON*Math.max(1,Math.abs(b),Math.abs(m))&&Math.abs(n-r)<=e.EPSILON*Math.max(1,Math.abs(n),Math.abs(r))&&Math.abs(l-t)<=e.EPSILON*Math.max(1,Math.abs(l),Math.abs(t))&&Math.abs(g-u)<=e.EPSILON*Math.max(1,Math.abs(g),Math.abs(u))&&Math.abs(f-y)<=e.EPSILON*
Math.max(1,Math.abs(f),Math.abs(y))&&Math.abs(h-p)<=e.EPSILON*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(k-x)<=e.EPSILON*Math.max(1,Math.abs(k),Math.abs(x))&&Math.abs(q-w)<=e.EPSILON*Math.max(1,Math.abs(q),Math.abs(w))&&Math.abs(a-c)<=e.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))};a.mul=m;a.sub=k})},"esri/core/libs/gl-matrix-2/mat3f32":function(){define(["require","exports","./factories/mat3f32"],function(p,a,e){Object.defineProperty(a,"__esModule",{value:!0});a.mat3f32=void 0;a.mat3f32=e})},"esri/core/libs/gl-matrix-2/factories/mat3f32":function(){define(["require",
"exports"],function(p,a){Object.defineProperty(a,"__esModule",{value:!0});a.createView=a.fromValues=a.clone=a.create=void 0;a.create=function(){var a=new Float32Array(9);a[0]=1;a[4]=1;a[8]=1;return a};a.clone=function(a){var e=new Float32Array(9);e[0]=a[0];e[1]=a[1];e[2]=a[2];e[3]=a[3];e[4]=a[4];e[5]=a[5];e[6]=a[6];e[7]=a[7];e[8]=a[8];return e};a.fromValues=function(a,m,k,b,c,d,n,l,g){var f=new Float32Array(9);f[0]=a;f[1]=m;f[2]=k;f[3]=b;f[4]=c;f[5]=d;f[6]=n;f[7]=l;f[8]=g;return f};a.createView=function(a,
m){return new Float32Array(a,m,9)}})},"esri/core/libs/gl-matrix-2/vec2f32":function(){define(["require","exports","./factories/vec2f32"],function(p,a,e){Object.defineProperty(a,"__esModule",{value:!0});a.vec2f32=void 0;a.vec2f32=e})},"esri/core/libs/gl-matrix-2/factories/vec2f32":function(){define(["require","exports"],function(p,a){function e(){return new Float32Array(2)}function m(a,b){var c=new Float32Array(2);c[0]=a;c[1]=b;return c}function k(){return m(1,1)}function b(){return m(1,0)}function c(){return m(0,
1)}Object.defineProperty(a,"__esModule",{value:!0});a.UNIT_Y=a.UNIT_X=a.ONES=a.ZEROS=a.unitY=a.unitX=a.ones=a.zeros=a.createView=a.fromValues=a.clone=a.create=void 0;a.create=e;a.clone=function(a){var b=new Float32Array(2);b[0]=a[0];b[1]=a[1];return b};a.fromValues=m;a.createView=function(a,b){return new Float32Array(a,b,2)};a.zeros=function(){return e()};a.ones=k;a.unitX=b;a.unitY=c;a.ZEROS=e();a.ONES=k();a.UNIT_X=b();a.UNIT_Y=c()})},"esri/core/libs/gl-matrix-2/types/vec2":function(){define(["require",
"exports"],function(p,a){function e(a){return a instanceof Float32Array&&2<=a.length}function m(a){return Array.isArray(a)&&2<=a.length}Object.defineProperty(a,"__esModule",{value:!0});a.isVec2=a.isVec2f64=a.isVec2f32=void 0;a.isVec2f32=e;a.isVec2f64=m;a.isVec2=function(a){return e(a)||m(a)}})},"esri/views/2d/tiling":function(){define("require exports ./tiling/PagedTileQueue ./tiling/TileInfoView ./tiling/TileKey ./tiling/TileQueue ./tiling/TileStrategy".split(" "),function(p,a,e,m,k,b,c){Object.defineProperty(a,
"__esModule",{value:!0});a.PagedTileQueue=a.TileStrategy=a.TileQueue=a.TileKey=a.TileInfoView=void 0;a.PagedTileQueue=e;a.TileInfoView=m;a.TileKey=k;a.TileQueue=b;a.TileStrategy=c})},"esri/views/2d/tiling/PagedTileQueue":function(){define("require exports tslib ../../../core/Accessor ../../../core/SetUtils ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/vec2 ../../support/QueueProcessor".split(" "),function(p,a,e,m,k,b,c,d){function n(a,b){a.length=0;b.forEach(function(b){return a.push(b)});
return a}var l=new Set,g=[],f=new Map,h=[0,0];return function(a){function q(b){b=a.call(this,b)||this;b._keyToItem=new Map;b.concurrency=6;b.strategy="scale-first";b.tileInfoView=null;return b}e.__extends(q,a);q.prototype.initialize=function(){var a=this,b=this.concurrency,c=this.process;this._peekByScaleFirst;this._peekByCenterFirst;this._queue=new d.QueueProcessor({concurrency:b,process:function(b,d){b=a._keyToItem.get(b);return c(b,{signal:d})},peeker:function(a){return k.firstOfSet(a)}})};q.prototype.destroy=
function(){this.clear();this._queue.destroy();this._queue=null};Object.defineProperty(q.prototype,"length",{get:function(){return this._queue?this._queue.length:0},enumerable:!1,configurable:!0});Object.defineProperty(q.prototype,"onGoingCount",{get:function(){return this._keyToItem.size},enumerable:!1,configurable:!0});Object.defineProperty(q.prototype,"updating",{get:function(){return 0<this.length||0<this.onGoingCount},enumerable:!1,configurable:!0});q.prototype.abort=function(a){this._queue.abort("string"===
typeof a?a:a.id)};q.prototype.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};q.prototype.has=function(a){return"string"===typeof a?this._keyToItem.has(a):this._keyToItem.has(a.id)};q.prototype.isOngoing=function(a){a="string"===typeof a?a:a.id;return this.has(a)&&this._queue.isOngoing(a)};q.prototype.pause=function(){this._queue.pause()};q.prototype.push=function(a,b){var c=this,d=a.key.id+"-"+b;if(this.has(d))return this.get(d);b=this._queue.push(d);var f=
function(){c._keyToItem.delete(d);c.notifyChange("updating")};this._keyToItem.set(d,a);b.then(f,f);this.notifyChange("updating");return b};q.prototype.reset=function(){this._queue.reset();this.notifyChange("updating")};q.prototype.resume=function(){this._queue.resume()};q.prototype._peekByScaleFirst=function(a){var b=this;if(!this.state)return k.firstOfSet(a);var c=this.tileInfoView,d=Number.NEGATIVE_INFINITY,e=Number.POSITIVE_INFINITY;a.forEach(function(a){a=b._keyToItem.get(a);var c=b.tileInfoView.getTileScale(a.key);
f.has(c)||(f.set(c,[]),d=Math.max(c,d),e=Math.min(c,e));f.get(c).push(a.key);l.add(c)});var h=this.state.scale;f.has(h)||(n(g,l),g.sort(),h=g.reduce(function(a,b){return Math.abs(b-h)<Math.abs(a-h)?b:a},g[0]));h=Math.min(h,d);h=Math.max(h,e);a=f.get(h);var q=c.getClosestInfoForScale(h),m=q.getColumnForX(this.state.center[0]),v=q.getRowForY(this.state.center[1]);a.sort(function(a,b){var c=q.denormalizeCol(a.col,a.world),d=q.denormalizeCol(b.col,b.world);return Math.sqrt((m-c)*(m-c)+(v-a.row)*(v-a.row))-
Math.sqrt((m-d)*(m-d)+(v-b.row)*(v-b.row))});l.clear();f.clear();return a[0].id};q.prototype._peekByCenterFirst=function(a){var b=this;if(!this.state)return k.firstOfSet(a);var d=this.tileInfoView,f=this.state.center,g=Number.POSITIVE_INFINITY,e=null;a.forEach(function(a){a=b._keyToItem.get(a);d.getTileCoords(h,a.key);var l=c.vec2.distance(h,f);l<g&&(g=l,e=a.key)});return e.id};e.__decorate([b.property({constructOnly:!0})],q.prototype,"concurrency",void 0);e.__decorate([b.property({constructOnly:!0})],
q.prototype,"process",void 0);e.__decorate([b.property()],q.prototype,"state",void 0);e.__decorate([b.property({constructOnly:!0})],q.prototype,"strategy",void 0);e.__decorate([b.property({constructOnly:!0})],q.prototype,"tileInfoView",void 0);e.__decorate([b.property({readOnly:!0})],q.prototype,"updating",null);return q=e.__decorate([b.subclass("esri.views.2d.tiling.PagedTileQueue")],q)}(m)})},"esri/views/support/QueueProcessor":function(){define("require exports ../../core/maybe ../../core/promiseUtils ../../core/Queue ../../core/scheduling".split(" "),
function(p,a,e,m,k,b){Object.defineProperty(a,"__esModule",{value:!0});a.QueueProcessor=void 0;var c=function(){return function(a,b){this.item=a;this.controller=b;this.promise=null}}();p=function(){function a(a){var b=this;this._deferreds=new Map;this._controllers=new Map;this._processingItems=new Map;this._isPaused=!1;this._task=this._schedule=null;this.concurrency=1;a.concurrency&&(this.concurrency=a.concurrency);this._queue=new k.default(a.peeker);this.process=a.process;var c=a.scheduler;a.task&&
e.isSome(c)&&(this._task=c.registerTask(a.task,function(a){return b.update(a)},function(){return b.needsUpdate()}))}a.prototype.destroy=function(){this.clear();this._schedule&&(this._schedule.remove(),this._schedule=null);this._task&&(this._task.remove(),this._task=null)};Object.defineProperty(a.prototype,"length",{get:function(){return this._processingItems.size+this._queue.length},enumerable:!1,configurable:!0});a.prototype.abort=function(a){(a=this._controllers.get(a))&&a.abort()};a.prototype.clear=
function(){this._queue.clear();var a=[];this._controllers.forEach(function(b){return a.push(b)});this._controllers.clear();a.forEach(function(a){return a.abort()});this._processingItems.clear();this._cancelNext()};a.prototype.forEach=function(a){this._deferreds.forEach(function(b,c){return a(c)})};a.prototype.get=function(a){return(a=this._deferreds.get(a))?a.promise:void 0};a.prototype.isOngoing=function(a){return this._processingItems.has(a)};a.prototype.has=function(a){return this._deferreds.has(a)};
a.prototype.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};a.prototype.push=function(a,b){var c=this,f=this.get(a);if(f)return f;var d,l=m.createAbortController(),n=null;b&&(n=m.onAbort(b,function(){return l.abort()}));var k=function(){r.remove();e.isSome(n)&&n.remove();c._deferreds.delete(a);c._controllers.delete(a);c._queue.remove(a);c._processingItems.delete(a);c._scheduleNext()},r=m.onAbortOrThrow(l.signal,function(){var b=c._processingItems.get(a);b&&b.controller.abort();
k();d.reject(m.createAbortError())});d=m.createDeferred();this._deferreds.set(a,d);this._controllers.set(a,l);d.promise.then(k,k);this._queue.push(a);this._scheduleNext();return d.promise};a.prototype.reset=function(){var a=[];this._processingItems.forEach(function(b){return a.push(b)});this._processingItems.clear();for(var b=0;b<a.length;b++){var c=a[b];this._queue.push(c.item);c.controller.abort()}this._scheduleNext()};a.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};
a.prototype.takeAll=function(){for(var a=[];this._queue.length;)a.push(this._queue.pop());this.clear();return a};a.prototype.needsUpdate=function(){return!this._isPaused&&0<this._queue.length&&this._processingItems.size<this.concurrency};a.prototype.update=function(a){for(;!a.done&&0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),a.madeProgress()};a.prototype._scheduleNext=function(){var a=this;this._task||this._isPaused||this._schedule||(this._schedule=
b.schedule(function(){a._schedule=null;a._next()}))};a.prototype._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};a.prototype._cancelNext=function(){this._schedule&&(this._schedule.remove(),this._schedule=null)};a.prototype._processResult=function(a,b){this._canProcessFulfillment(a)&&(this._scheduleNext(),this._deferreds.get(a.item).resolve(b))};a.prototype._processError=function(a,b){this._canProcessFulfillment(a)&&(this._scheduleNext(),
this._deferreds.get(a.item).reject(b))};a.prototype._canProcessFulfillment=function(a){return this._deferreds.get(a.item)&&this._processingItems.get(a.item)===a?!0:!1};a.prototype._process=function(a){var b=this;if(!e.isNone(a)){var d,f=m.createAbortController(),h=new c(a,f);this._processingItems.set(a,h);try{d=this.process(a,f.signal)}catch(v){this._processError(h,v)}d&&"function"===typeof d.then?(h.promise=d,d.then(function(a){return b._processResult(h,a)},function(a){return b._processError(h,a)})):
this._processResult(h,d)}};Object.defineProperty(a.prototype,"test",{get:function(){var a=this;return{update:function(b){return a.update(b)}}},enumerable:!1,configurable:!0});return a}();a.QueueProcessor=p})},"esri/views/2d/tiling/TileInfoView":function(){define("require exports ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(p,a,e,m,k,b,c){var d=new b("0/0/0/0"),n=function(){function a(a,b,c,d,g,e,l,n){this.x=a;this.ymin=b;this.ymax=
c;this.invM=d;this.leftAdjust=g;this.rightAdjust=e;this.leftBound=l;this.rightBound=n}a.create=function(b,c){var d;b[1]>c[1]&&(d=[c,b],b=d[0],c=d[1]);d=b[0];b=b[1];var f=c[0];c=c[1];var g=f-d,e=c-b,e=0!==e?g/e:0,l=(Math.ceil(b)-b)*e,h=(Math.floor(b)-b)*e;return new a(d,Math.floor(b),Math.ceil(c),e,0>g?l:h,0>g?h:l,0>g?f:d,0>g?d:f)};a.prototype.incrRow=function(){this.x+=this.invM};a.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};a.prototype.getRightCol=function(){return Math.min(this.x+
this.rightAdjust,this.rightBound)};return a}(),l=[[0,0],[0,0],[0,0],[0,0]];return function(){function a(a,b){var c=this;this.tileInfo=a;this.fullExtent=b;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};var d=a.lods.slice();d.sort(function(a,b){return b.scale-a.scale});var f=this._lodInfos=d.map(function(c){return m.create(a,c,b)});d.forEach(function(a,b){c._infoByLevel[a.level]=f[b];c._infoByScale[a.scale]=f[b];c.scales[b]=a.scale},this);this._wrap=a.isWrappable}Object.defineProperty(a.prototype,
"spatialReference",{get:function(){return this.tileInfo.spatialReference},enumerable:!1,configurable:!0});a.prototype.getLODInfoAt=function(a){return this._infoByLevel["number"===typeof a?a:a.level]};a.prototype.getTileBounds=function(a,b,c){void 0===c&&(c=!1);d.set(b);return(b=this._infoByLevel[d.level])?b.getTileBounds(a,d,c):a};a.prototype.getTileCoords=function(a,b,c){void 0===c&&(c=!1);d.set(b);return(b=this._infoByLevel[d.level])?b.getTileCoords(a,d,c):a};a.prototype.getTileCoverage=function(a,
b,d){void 0===b&&(b=192);void 0===d&&(d="closest");d="closest"===d?this.getClosestInfoForScale(a.scale):this.getSmallestInfoForScale(a.scale);var f=k.pool.acquire(d),g=this._wrap,e;e=Infinity;var h=-Infinity,m,v,p=f.spans;l[0][0]=l[0][1]=l[1][1]=l[3][0]=-b;l[1][0]=l[2][0]=a.size[0]+b;l[2][1]=l[3][1]=a.size[1]+b;for(b=0;b<l.length;b++){var x=l[b];a.toMap(x,x);x[0]=d.getColumnForX(x[0]);x[1]=d.getRowForY(x[1])}a=[];x=3;for(b=0;4>b;b++){if(l[b][1]!==l[x][1]){var w=n.create(l[b],l[x]);e=Math.min(w.ymin,
e);h=Math.max(w.ymax,h);void 0===a[w.ymin]&&(a[w.ymin]=[]);a[w.ymin].push(w)}x=b}if(null==e||null==h||100<h-e)return null;for(x=[];e<h;){null!=a[e]&&(x=x.concat(a[e]));m=Infinity;v=-Infinity;for(b=x.length-1;0<=b;b--)w=x[b],m=Math.min(m,w.getLeftCol()),v=Math.max(v,w.getRightCol());m=Math.floor(m);v=Math.floor(v);if(e>=d.first[1]&&e<=d.last[1])if(g)if(d.size[0]<d.worldSize[0])for(w=Math.floor(v/d.worldSize[0]),b=Math.floor(m/d.worldSize[0]);b<=w;b++)p.push(new c(e,Math.max(d.getFirstColumnForWorld(b),
m),Math.min(d.getLastColumnForWorld(b),v)));else p.push(new c(e,m,v));else m>d.last[0]||v<d.first[0]||(m=Math.max(m,d.first[0]),v=Math.min(v,d.last[0]),p.push(new c(e,m,v)));e+=1;for(b=x.length-1;0<=b;b--)w=x[b],w.ymax>=e?w.incrRow():x.splice(b,1)}return f};a.prototype.getTileParentId=function(a){d.set(a);a=this._lodInfos.indexOf(this._infoByLevel[d.level])-1;if(0>a)return null;this._getTileIdAtLOD(d,this._lodInfos[a],d);return d.id};a.prototype.getTileResolution=function(a){return(a=this._infoByLevel["object"===
typeof a?a.level:a])?a.resolution:-1};a.prototype.getTileScale=function(a){return(a=this._infoByLevel[a.level])?a.scale:-1};a.prototype.intersects=function(a,b){d.set(b);b=this._infoByLevel[d.level];var c=a.lodInfo;if(c.resolution>b.resolution){this._getTileIdAtLOD(d,c,d);for(var f=c.denormalizeCol(d.col,d.world),g=0,e=a.spans;g<e.length;g++){var l=e[g];if(l.row===d.row&&l.colFrom<=f&&l.colTo>=f)return!0}}if(c.resolution<b.resolution){e=a.spans.reduce(function(a,b){a[0]=Math.min(a[0],b.row);a[1]=
Math.max(a[1],b.row);a[2]=Math.min(a[2],b.colFrom);a[3]=Math.max(a[3],b.colTo);return a},[Infinity,-Infinity,Infinity,-Infinity]);a=e[0];var f=e[1],g=e[2],e=e[3],h=b.denormalizeCol(d.col,d.world),l=c.getColumnForX(b.getXForColumn(h)),n=c.getRowForY(b.getYForRow(d.row)),h=c.getColumnForX(b.getXForColumn(h+1))-1;b=c.getRowForY(b.getYForRow(d.row+1))-1;return!(l>e||h<g||n>f||b<a)}var k=c.denormalizeCol(d.col,d.world);return a.spans.some(function(a){return a.row===d.row&&a.colFrom<=k&&a.colTo>=k})};a.prototype.normalizeBounds=
function(a,b,c){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];this._wrap&&(b=e.getInfo(this.tileInfo.spatialReference),c=-c*(b.valid[1]-b.valid[0]),a[0]+=c,a[2]+=c);return a};a.prototype.getSmallestInfoForScale=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a];if(a>b[0])return this._infoByScale[b[0]];for(var c=1;c<b.length-1;c++)if(a>b[c]+1E-6)return this._infoByScale[b[c-1]];return this._infoByScale[b[b.length-1]]};a.prototype.getClosestInfoForScale=function(a){var b=this.scales;
if(this._infoByScale[a])return this._infoByScale[a];a=b.reduce(function(b,c){return Math.abs(c-a)<Math.abs(b-a)?c:b},b[0]);return this._infoByScale[a]};a.prototype.scaleToLevel=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a].level;for(var c=b.length-1;0<=c;c--)if(a<b[c])return c===b.length-1?this._infoByScale[b[b.length-1]].level:this._infoByScale[b[c]].level+(b[c]-a)/(b[c]-b[c+1]);return this._infoByScale[b[0]].level};a.prototype.scaleToZoom=function(a){return this.tileInfo.scaleToZoom(a)};
a.prototype._getTileIdAtLOD=function(a,b,c){var d=this._infoByLevel[c.level];a.set(c);if(b.resolution<d.resolution)return null;if(b.resolution===d.resolution)return a;a.level=b.level;a.col=Math.floor(c.col*d.resolution/b.resolution+.01);a.row=Math.floor(c.row*d.resolution/b.resolution+.01);return a};return a}()})},"esri/views/2d/tiling/LODInfo":function(){define(["require","exports","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(p,a,e,m){function k(a,b,e){a[0]=b;a[1]=e;return a}
var b=new m("0/0/0/0");return function(){function a(a,b,c,g,f,e,k,q,m,r,t,u){this.level=a;this.resolution=b;this.scale=c;this.origin=g;this.first=f;this.last=e;this.size=k;this.norm=q;this.worldStart=m;this.worldEnd=r;this.worldSize=t;this.wrap=u}a.create=function(b,c,l){var d=e.getInfo(b.spatialReference),f=[b.origin.x,b.origin.y],h=[b.size[0]*c.resolution,b.size[1]*c.resolution],n=[-Infinity,-Infinity],q=[Infinity,Infinity],m=[Infinity,Infinity];l&&(k(n,Math.max(0,Math.floor((l.xmin-f[0])/h[0])),
Math.max(0,Math.floor((f[1]-l.ymax)/h[1]))),k(q,Math.max(0,Math.floor((l.xmax-f[0])/h[0])),Math.max(0,Math.floor((f[1]-l.ymin)/h[1]))),k(m,q[0]-n[0]+1,q[1]-n[1]+1));var r;b.isWrappable?(b=[Math.ceil(Math.round((d.valid[1]-d.valid[0])/c.resolution)/b.size[0]),m[1]],d=[Math.floor((d.origin[0]-f[0])/h[0]),n[1]],l=[b[0]+d[0]-1,q[1]],r=!0):(d=n,l=q,b=m,r=!1);return new a(c.level,c.resolution,c.scale,f,n,q,m,h,d,l,b,r)};a.prototype.normalizeCol=function(a){if(!this.wrap)return a;var b=this.worldSize[0];
return 0>a?b-1-Math.abs((a+1)%b):a%b};a.prototype.denormalizeCol=function(a,b){return this.wrap?this.worldSize[0]*b+a:a};a.prototype.getWorldForColumn=function(a){return this.wrap?Math.floor(a/this.worldSize[0]):0};a.prototype.getFirstColumnForWorld=function(a){return a*this.worldSize[0]+this.first[0]};a.prototype.getLastColumnForWorld=function(a){return a*this.worldSize[0]+this.first[0]+this.size[0]-1};a.prototype.getColumnForX=function(a){return(a-this.origin[0])/this.norm[0]};a.prototype.getXForColumn=
function(a){return this.origin[0]+a*this.norm[0]};a.prototype.getRowForY=function(a){return(this.origin[1]-a)/this.norm[1]};a.prototype.getYForRow=function(a){return this.origin[1]-a*this.norm[1]};a.prototype.getTileBounds=function(a,c,e){void 0===e&&(e=!1);b.set(c);var d=e?b.col:this.denormalizeCol(b.col,b.world),f=b.row;c=this.getXForColumn(d);e=this.getYForRow(f+1);d=this.getXForColumn(d+1);f=this.getYForRow(f);a[0]=c;a[1]=e;a[2]=d;a[3]=f;return a};a.prototype.getTileCoords=function(a,c,e){void 0===
e&&(e=!1);b.set(c);c=e?b.col:this.denormalizeCol(b.col,b.world);Array.isArray(a)?k(a,this.getXForColumn(c),this.getYForRow(b.row)):(a.x=this.getXForColumn(c),a.y=this.getYForRow(b.row));return a};return a}()})},"esri/views/2d/tiling/TileKey":function(){define(["require","exports","../../../core/ObjectPool"],function(p,a,e){return function(){function a(a,b,c,d){this.set(a,b,c,d)}a.getId=function(a,b,c,d){return"object"===typeof a?a.level+"/"+a.row+"/"+a.col+"/"+a.world:a+"/"+b+"/"+c+"/"+d};Object.defineProperty(a.prototype,
"key",{get:function(){return this},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"id",{get:function(){return this.toString()},set:function(a){this.set(a)},enumerable:!1,configurable:!0});a.prototype.acquire=function(a,b,c,d){this.set(a,b,c,d)};a.prototype.contains=function(a){var b=a.level-this.level;return this.row===a.row>>b&&this.col===a.col>>b&&this.world===a.world};a.prototype.equals=function(a){return this.level===a.level&&this.row===a.row&&this.col===a.col&&this.world===
a.world};a.prototype.clone=function(){return new a(this)};a.prototype.release=function(){this.world=this.col=this.row=this.level=0};a.prototype.set=function(a,b,c,d){null==a?this.world=this.col=this.row=this.level=0:"object"===typeof a?(this.level=a.level||0,this.row=a.row||0,this.col=a.col||0,this.world=a.world||0):"string"===typeof a?(a=a.split("/"),b=a[1],c=a[2],d=a[3],this.level=parseFloat(a[0]),this.row=parseFloat(b),this.col=parseFloat(c),this.world=parseFloat(d)):(this.level=+a,this.row=+b,
this.col=+c,this.world=+d||0);return this};a.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world};a.prototype.getParentKey=function(){return 0>=this.level?null:new a(this.level-1,this.row>>1,this.col>>1,this.world)};a.prototype.getChildKeys=function(){var e=this.level+1,b=this.row<<1,c=this.col<<1,d=this.world;return[new a(e,b,c,d),new a(e,b,c+1,d),new a(e,b+1,c,d),new a(e,b+1,c+1,d)]};a.prototype.compareRowMajor=function(a){return this.row<a.row?-1:this.row>a.row?
1:this.col<a.col?-1:this.col>a.col?1:0};a.pool=new e(a,null,null,25,50);return a}()})},"esri/views/2d/tiling/TileCoverage":function(){define(["require","exports","../../../core/ObjectPool"],function(p,a,e){return function(){function a(){this.spans=[]}a.prototype.acquire=function(a){this.lodInfo=a};a.prototype.release=function(){this.lodInfo=null;this.spans.length=0};a.prototype.forEach=function(a,b){var c=this.spans,d=this.lodInfo,e=d.level;if(0!==c.length)for(var l=0;l<c.length;l++)for(var g=c[l],
f=g.row,h=g.colTo,g=g.colFrom;g<=h;g++)a.call(b,e,f,d.normalizeCol(g),d.getWorldForColumn(g))};a.pool=new e(a);return a}()})},"esri/views/2d/tiling/TileSpan":function(){define(["require","exports"],function(p,a){return function(){return function(a,m,k){this.row=a;this.colFrom=m;this.colTo=k}}()})},"esri/views/2d/tiling/TileQueue":function(){define("require exports tslib ../../../core/Accessor ../../../core/SetUtils ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/vec2 ../../support/QueueProcessor".split(" "),
function(p,a,e,m,k,b,c,d){function n(a,b){a.length=0;b.forEach(function(b){return a.push(b)});return a}var l=new Set,g=[],f=new Map,h=[0,0];return function(a){function q(b){b=a.call(this,b)||this;b._keyToItem=new Map;b.concurrency=6;b.strategy="scale-first";b.tileInfoView=null;return b}e.__extends(q,a);q.prototype.initialize=function(){var a=this,b=this.process;this._queue=new d.QueueProcessor({concurrency:this.concurrency,process:function(c,d){c=a._keyToItem.get(c);return b(c,{signal:d})},peeker:"scale-first"===
this.strategy?function(b){return a._peekByScaleFirst(b)}:function(b){return a._peekByCenterFirst(b)}})};q.prototype.destroy=function(){this.clear();this._queue.destroy();this._queue=null};Object.defineProperty(q.prototype,"length",{get:function(){return this._queue?this._queue.length:0},enumerable:!1,configurable:!0});Object.defineProperty(q.prototype,"onGoingCount",{get:function(){return this._keyToItem.size},enumerable:!1,configurable:!0});Object.defineProperty(q.prototype,"updating",{get:function(){return 0<
this.length||0<this.onGoingCount},enumerable:!1,configurable:!0});q.prototype.abort=function(a){this._queue.abort("string"===typeof a?a:a.id)};q.prototype.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};q.prototype.has=function(a){return"string"===typeof a?this._keyToItem.has(a):this._keyToItem.has(a.id)};q.prototype.isOngoing=function(a){a="string"===typeof a?a:a.id;return this.has(a)&&this._queue.isOngoing(a)};q.prototype.pause=function(){this._queue.pause()};
q.prototype.push=function(a){var b=this,c=a.key.id;if(this.has(c))return this.get(c);var d=this._queue.push(c),f=function(){b._keyToItem.delete(c);b.notifyChange("updating")};this._keyToItem.set(c,a);d.then(f,f);this.notifyChange("updating");return d};q.prototype.reset=function(){this._queue.reset();this.notifyChange("updating")};q.prototype.resume=function(){this._queue.resume()};q.prototype._peekByScaleFirst=function(a){var b=this;if(!this.state)return k.firstOfSet(a);var c=this.tileInfoView,d=
Number.NEGATIVE_INFINITY,e=Number.POSITIVE_INFINITY;a.forEach(function(a){a=b._keyToItem.get(a);var c=b.tileInfoView.getTileScale(a.key);f.has(c)||(f.set(c,[]),d=Math.max(c,d),e=Math.min(c,e));f.get(c).push(a.key);l.add(c)});var h=this.state.scale;f.has(h)||(n(g,l),g.sort(),h=g.reduce(function(a,b){return Math.abs(b-h)<Math.abs(a-h)?b:a},g[0]));h=Math.min(h,d);h=Math.max(h,e);a=f.get(h);var q=c.getClosestInfoForScale(h),m=q.getColumnForX(this.state.center[0]),v=q.getRowForY(this.state.center[1]);
a.sort(function(a,b){var c=q.denormalizeCol(a.col,a.world),d=q.denormalizeCol(b.col,b.world);return Math.sqrt((m-c)*(m-c)+(v-a.row)*(v-a.row))-Math.sqrt((m-d)*(m-d)+(v-b.row)*(v-b.row))});l.clear();f.clear();return a[0].id};q.prototype._peekByCenterFirst=function(a){var b=this;if(!this.state)return k.firstOfSet(a);var d=this.tileInfoView,f=this.state.center,g=Number.POSITIVE_INFINITY,e=null;a.forEach(function(a){a=b._keyToItem.get(a);d.getTileCoords(h,a.key);var l=c.vec2.distance(h,f);l<g&&(g=l,e=
a.key)});return e.id};e.__decorate([b.property({constructOnly:!0})],q.prototype,"concurrency",void 0);e.__decorate([b.property({constructOnly:!0})],q.prototype,"process",void 0);e.__decorate([b.property()],q.prototype,"state",void 0);e.__decorate([b.property({constructOnly:!0})],q.prototype,"strategy",void 0);e.__decorate([b.property({constructOnly:!0})],q.prototype,"tileInfoView",void 0);e.__decorate([b.property({readOnly:!0})],q.prototype,"updating",null);return q=e.__decorate([b.subclass("esri.views.2d.tiling.TileQueue")],
q)}(m)})},"esri/views/2d/tiling/TileStrategy":function(){define(["require","exports","./TileCache","./TileCoverage","./TileKey"],function(p,a,e,m,k){var b=new k(0,0,0,0),c=new Map,d=[],n=[];return function(){function a(a){var b=this;this._previousScale=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";this.resampling=!0;this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=a.acquireTile;this.releaseTile=a.releaseTile;this.tileInfoView=a.tileInfoView;this.resampling=
null==a.resampling||!!a.resampling;a.cachePolicy&&(this.cachePolicy=a.cachePolicy);a.coveragePolicy&&(this.coveragePolicy=a.coveragePolicy);null!=a.buffer&&(this.buffer=a.buffer);a.cacheSize&&(this._tileCache=new e.default(a.cacheSize,this.tileInfoView,function(a){b.releaseTile(a)}))}a.prototype.destroy=function(){this.tileIndex.clear()};a.prototype.update=function(a){var f=this,g=this.resampling,e=this.tileIndex,l=this.tileInfoView.getTileCoverage(a.state,this.buffer,this.coveragePolicy);n.length=
0;d.length=0;c.clear();if(l){var k=this.tileInfoView.tileInfo,r=k.minScale,t=k.maxScale,u=l.spans,p=l.lodInfo,D=p.level,x=a.state,w=x.scale,k=x.center,x=x.resolution,A=!a.stationary&&w>this._previousScale;this._previousScale=w;this.tiles.length=0;if(!g&&(w>r||w<t))return this.tiles.length=0,c.clear(),e.forEach(function(a){f.releaseTile(a)}),e.clear(),n.length=0,d.length=0,c.clear(),m.pool.release(l),!0;e.forEach(function(a){return a.visible=!0});t=r=0;if(0<u.length)for(w=0;w<u.length;w++){a=u[w];
for(var B=a.row,I=a.colTo,G=a.colFrom;G<=I;G++)if(r++,a=b.set(D,B,p.normalizeCol(G),p.getWorldForColumn(G)).id,e.has(a))g=e.get(a),g.isReady?(c.set(a,g),t++):A||this._addParentTile(a,c);else{g=void 0;if(this._tileCache&&this._tileCache.has(a)){if(g=this._tileCache.pop(a),this.tileIndex.set(a,g),g.isReady){c.set(a,g);t++;continue}}else g=this.acquireTile(b),this.tileIndex.set(a,g);A||this._addParentTile(a,c)}}var H=t===r;e.forEach(function(a,g){b.set(g);if(!c.has(g)){var e=f.tileInfoView.intersects(l,
b);!e||!A&&H?"purge"===f.cachePolicy?b.level===D&&e||d.push(g):(b.level>D||!e)&&d.push(g):a.isReady?n.push(g):b.level>D&&d.push(g)}});for(u=0;u<n.length;u++)a=n[u],(g=e.get(a))&&g.isReady&&c.set(a,g);for(u=0;u<d.length;u++)a=d[u],g=e.get(a),this._tileCache?this._tileCache.add(g):this.releaseTile(g),e.delete(a);c.forEach(function(a){return f.tiles.push(a)});e.forEach(function(a){c.has(a.key.id)||(a.visible=!1)});this._tileCache&&this._tileCache.prune(D,k,x);m.pool.release(l);c.clear();return H}};a.prototype.clear=
function(a){var b=this;void 0===a&&(a=!0);var c=this.tileIndex;a&&c.forEach(function(a){b.releaseTile(a)});c.clear()};a.prototype._addParentTile=function(a,b){for(var c=null;;){a=this.tileInfoView.getTileParentId(a);if(!a)break;if(this.tileIndex.has(a)){if((c=this.tileIndex.get(a))&&c.isReady){b.has(c.key.id)||b.set(c.key.id,c);break}}else if(this._tileCache&&this._tileCache.has(a)&&(c=this._tileCache.pop(a),this.tileIndex.set(a,c),c&&c.isReady)){b.has(c.key.id)||b.set(c.key.id,c);break}}};return a}()})},
"esri/views/2d/tiling/TileCache":function(){define(["require","exports","../../../core/libs/gl-matrix-2/vec2"],function(p,a,e){Object.defineProperty(a,"__esModule",{value:!0});p=function(){function a(a,b,c){this.maxSize=a;this.tileInfoView=b;this.removedFunc=c;this._tilePerId=new Map;this._tileKeysPerLevel=[]}a.prototype.has=function(a){return this._tilePerId.has(a)};a.prototype.get=function(a){return this._tilePerId.get(a)};a.prototype.pop=function(a){var b=this._tilePerId.get(a);if(!b)return null;
var c=this._tileKeysPerLevel[b.key.level];this._tilePerId["delete"](a);for(var d=0;d<c.length;d++)if(c[d].id===a){c.splice(d,1);break}b.visible=!0;return b};a.prototype.add=function(a){a.visible=!1;var b=a.key,c=b.id;this._tilePerId.has(c)||(this._tilePerId.set(c,a),a=b.level,this._tileKeysPerLevel[a]||(this._tileKeysPerLevel[a]=[]),this._tileKeysPerLevel[a].push(b))};a.prototype.prune=function(a,b,c){var d=this._tilePerId.size;if(!(d<=this.maxSize)){for(var e=this._tileKeysPerLevel.length-1;d>this.maxSize&&
0<=e;)e!==a&&(d=this._pruneAroundCenterTile(d,b,c,e)),e--;d>this.maxSize&&(d=this._pruneAroundCenterTile(d,b,c,a))}};a.prototype._pruneAroundCenterTile=function(a,b,c,d){d=this._tileKeysPerLevel[d];if(!d||0===d.length)return a;var n=this.tileInfoView.tileInfo,l=n.size,g=n.origin,f=c*l[0],h=c*l[1],k=[0,0],q=[0,0];for(d.sort(function(a,c){k[0]=g.x+f*(a.col+.5);k[1]=g.y-h*(a.row+.5);q[0]=g.x+f*(c.col+.5);q[1]=g.y-h*(c.row+.5);return e.vec2.squaredDistance(k,b)-e.vec2.squaredDistance(q,b)});0<d.length&&
(c=d.pop(),this._removeTile(c.id),a--,a!==this.maxSize););return a};a.prototype._removeTile=function(a){var b=this._tilePerId.get(a);this.removedFunc&&this.removedFunc(b);this._tilePerId["delete"](a)};return a}();a.default=p})},"esri/views/2d/support/Timeline":function(){define(["require","exports"],function(p,a){Object.defineProperty(a,"__esModule",{value:!0});a.Timeline=void 0;p=function(){function a(){this._names=new Map}a.prototype.begin=function(a){this._names.has(a)||(this._names.set(a,!1),
-1!==a.indexOf("Brush")&&this.record("Esri.FirstDraw"),performance.mark("Esri."+a+".Start"))};a.prototype.end=function(a){this._names.has(a)&&!this._names.get(a)&&(this._names.set(a,!0),performance.mark("Esri."+a+".End"))};a.prototype.record=function(a){this._names.has(a)||(this._names.set(a,!0),performance.mark("Esri."+a))};return a}();a.Timeline=p})},"esri/views/2d/input/MapViewInputManager":function(){define("require exports tslib ../../../core/Accessor ../../../core/Handles ../../../core/watchUtils ../../../core/accessorSupport/decorators ./handlers/DoubleClickZoom ./handlers/DoubleTapDragZoom ./handlers/DragPan ./handlers/DragRotate ./handlers/GamepadNavigation ./handlers/KeyPan ./handlers/KeyRotate ./handlers/KeyZoom ./handlers/MouseWheelZoom ./handlers/PinchAction ../../input/BrowserEventSource ../../input/InputManager ../../input/handlers/PreventContextMenu ../../input/recognizers/DoubleTapDrag ../../input/recognizers/Drag ../../input/recognizers/ImmediateDoubleClick ../../input/recognizers/PointerClickHoldAndDrag ../../input/recognizers/SingleAndDoubleClick".split(" "),
function(p,a,e,m,k,b,c,d,n,l,g,f,h,v,q,C,r,t,u,y,D,x,w,A,B){var I={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},G={zoomIn:["\x3d","+"],zoomOut:["-","_"]},H={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};return function(a){function m(){var b=null!==a&&a.apply(this,arguments)||this;b._handles=new k;return b}e.__extends(m,a);m.prototype.initialize=function(){var a=this;this._handles.add([b.whenNot(this.view,
"ready",function(){return a._disconnect()}),b.when(this.view,"ready",function(){return a._connect()})])};m.prototype.destroy=function(){this._handles&&(this._handles.removeAll(),this._handles=null);this._disconnect()};m.prototype._disconnect=function(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)};m.prototype._connect=function(){var a=this,c=new t.BrowserEventSource(this.view.surface,this.view.input),
e=[new w.ImmediateDoubleClick,new A.PointerClickHoldAndDrag,new B.SingleAndDoubleClick,new x.Drag(this.view.navigation),new D.DoubleTapDrag],e=new u.InputManager({eventSource:c,recognizers:e});e.installHandlers("prevent-context-menu",[new y.PreventContextMenu],u.ViewEventPriorities.INTERNAL);e.installHandlers("navigation",[new r.PinchRotateAndZoom(this.view),new f.GamepadNavigation(this.view),new C.MouseWheelZoom(this.view),new d.DoubleClickZoom(this.view),new d.DoubleClickZoom(this.view,["Ctrl"]),
new l.DragPan(this.view,"primary"),new h.KeyPan(this.view,I),new q.KeyZoom(this.view,G),new v.KeyRotate(this.view,H),new g.DragRotate(this.view,"secondary"),new n.DoubleTapDragZoom(this.view,"touch")],u.ViewEventPriorities.INTERNAL);this.view.viewEvents.connect(e);this._source=c;this._inputManager=e;b.init(this.view.navigation,"browserTouchPanEnabled",function(b){a._source.browserTouchPanningEnabled=!b})};Object.defineProperty(m.prototype,"test",{get:function(){return{inputManager:this._inputManager}},
enumerable:!1,configurable:!0});e.__decorate([c.property()],m.prototype,"view",void 0);return m=e.__decorate([c.subclass("esri.views.2d.input.MapViewInputManager")],m)}(m)})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["require","exports","tslib","../../../input/InputHandler","../../../input/handlers/support"],function(p,a,e,m,k){Object.defineProperty(a,"__esModule",{value:!0});a.DoubleClickZoom=void 0;p=function(a){function b(b,c){var d=a.call(this,!0)||this;d.view=b;d.registerIncoming("double-click",
c,function(a){return d._handleDoubleClick(a,c)});return d}e.__extends(b,a);b.prototype._handleDoubleClick=function(a,b){k.eventMatchesPointerAction(a.data,"primary")&&(a.stopPropagation(),b?this.view.mapViewNavigation.zoomOut([a.data.x,a.data.y]):this.view.mapViewNavigation.zoomIn([a.data.x,a.data.y]))};return b}(m.InputHandler);a.DoubleClickZoom=p})},"esri/views/input/handlers/support":function(){define(["require","exports"],function(p,a){Object.defineProperty(a,"__esModule",{value:!0});a.eventMatchesMousePointerAction=
a.eventMatchesPointerAction=void 0;a.eventMatchesPointerAction=function(a,m){switch(m){case "primary":return"touch"===a.pointerType||0===a.button;case "secondary":return"touch"!==a.pointerType&&2===a.button;case "tertiary":return"touch"!==a.pointerType&&1===a.button}};a.eventMatchesMousePointerAction=function(a,m){if("touch"===a.pointerType)return!1;switch(m){case "primary":return 0===a.button;case "secondary":return 2===a.button;case "tertiary":return 1===a.button}}})},"esri/views/2d/input/handlers/DoubleTapDragZoom":function(){define(["require",
"exports","tslib","../../../../core/compilerUtils","../../../input/InputHandler"],function(p,a,e,m,k){Object.defineProperty(a,"__esModule",{value:!0});a.DoubleTapDragZoom=void 0;p=function(a){function b(b,c,e){var d=a.call(this,!0)||this;d.view=b;d.pointerType=c;d.registerIncoming("double-tap-drag",e,function(a){return d._handleDoubleTapDrag(a)});return d}e.__extends(b,a);b.prototype._handleDoubleTapDrag=function(a){var b=a.data;if(b.pointerType===this.pointerType){a.stopPropagation();var c=b.action;
a=b.delta;var d=this.view,b=d.mapViewNavigation;switch(c){case "begin":this._currentScale=this._startScale=c=d.scale;this._previousDelta=a;b.begin();break;case "update":if(this._previousDelta.y===a.y)break;this._previousDelta=a;a=this._startScale*Math.pow(1.015,a.y);b.setViewpointImmediate(a/this._currentScale);this._currentScale=a;break;case "end":c=d.constraints;d=c.effectiveLODs;if(!c.snapToZoom||!d){b.end();break}d=c.snapScale(this._currentScale);a=(0<a.y?Math.max(d,c.snapToPreviousScale(this._startScale)):
Math.min(d,c.snapToNextScale(this._startScale)))/this._currentScale;b.zoom(a);break;default:m.neverReached(c)}}};return b}(k.InputHandler);a.DoubleTapDragZoom=p})},"esri/views/2d/input/handlers/DragPan":function(){define("require exports tslib ../../../input/DragEventSeparator ../../../input/InputHandler ../../../input/handlers/support".split(" "),function(p,a,e,m,k,b){Object.defineProperty(a,"__esModule",{value:!0});a.DragPan=void 0;p=function(a){function c(c,d,e){var f=a.call(this,!0)||this;f.view=
c;f.pointerAction=d;f.registerIncoming("drag",e,function(a){return f._handleDrag(a)});f.registerIncoming("pointer-down",function(){return f.stopMomentumNavigation()});var g=f.view.mapViewNavigation;f.dragEventSeparator=new m.DragEventSeparator({start:function(a,b){g.pan.begin(f.view,b.data);b.stopPropagation()},update:function(a,b){g.pan.update(f.view,b.data);b.stopPropagation()},end:function(a,b){g.pan.end(f.view,b.data);b.stopPropagation()},condition:function(a,c){return 1===a&&b.eventMatchesPointerAction(c.data,
f.pointerAction)}});return f}e.__extends(c,a);c.prototype._handleDrag=function(a){var b=this.view.mapViewNavigation;b.pinch.zoomMomentum||b.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(a)};c.prototype.stopMomentumNavigation=function(){this.view.mapViewNavigation.pan.stopMomentumNavigation()};return c}(k.InputHandler);a.DragPan=p})},"esri/views/input/DragEventSeparator":function(){define(["require","exports"],function(p,a){Object.defineProperty(a,"__esModule",{value:!0});
a.DragEventSeparator=void 0;p=function(){function a(a){this.callbacks=a;this.currentCount=0;this.callbacks.condition||(this.callbacks.condition=function(){return!0})}a.prototype.handle=function(a){var e=a.data,b=e.pointers.size;switch(e.action){case "start":this.currentCount=b;this.emitStart(a);break;case "added":this.emitEnd(this.previousEvent);this.currentCount=b;this.emitStart(a);break;case "update":this.emitUpdate(a);break;case "removed":this.startEvent&&this.emitEnd(this.previousEvent);this.currentCount=
b;this.emitStart(a);break;case "end":this.emitEnd(a),this.currentCount=0}this.previousEvent=a};a.prototype.emitStart=function(a){this.startEvent=a;this.callbacks.condition(this.currentCount,a)&&this.callbacks.start(this.currentCount,a,this.startEvent)};a.prototype.emitUpdate=function(a){this.callbacks.condition(this.currentCount,a)&&this.callbacks.update(this.currentCount,a,this.startEvent)};a.prototype.emitEnd=function(a){this.callbacks.condition(this.currentCount,a)&&this.callbacks.end(this.currentCount,
a,this.startEvent);this.startEvent=null};return a}();a.DragEventSeparator=p})},"esri/views/2d/input/handlers/DragRotate":function(){define("require exports tslib ../../../input/DragEventSeparator ../../../input/InputHandler ../../../input/handlers/support".split(" "),function(p,a,e,m,k,b){Object.defineProperty(a,"__esModule",{value:!0});a.DragRotate=void 0;p=function(a){function c(c,d,e){var f=a.call(this,!0)||this;f.view=c;f.pointerAction=d;var g=f.view.mapViewNavigation;f.dragEventSeparator=new m.DragEventSeparator({start:function(a,
b){g.rotate.begin(f.view,b.data);b.stopPropagation()},update:function(a,b){g.rotate.update(f.view,b.data);b.stopPropagation()},end:function(a,b){g.rotate.end();b.stopPropagation()},condition:function(a,c){return 1===a&&b.eventMatchesPointerAction(c.data,f.pointerAction)}});f.registerIncoming("drag",e,function(a){return f.dragEventSeparator.handle(a)});return f}e.__extends(c,a);return c}(k.InputHandler);a.DragRotate=p})},"esri/views/2d/input/handlers/GamepadNavigation":function(){define("require exports tslib ../../../../core/Handles ../../../../core/scheduling ../../../../core/watchUtils ../../viewpointUtils ../../../input/InputHandler ../../../navigation/gamepadAndKeyboardUtils".split(" "),
function(p,a,e,m,k,b,c,d,n){Object.defineProperty(a,"__esModule",{value:!0});a.GamepadNavigation=void 0;p=function(a){function d(b){var c=a.call(this,!0)||this;c.view=b;c.frameTask=null;c.watchHandles=new m;c.currentDevice=null;c.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0};c.handle=c.registerIncoming("gamepad",function(a){return c.handleEvent(a)});c.handle.pause();return c}e.__extends(d,a);d.prototype.onInstall=function(c){var d=this;a.prototype.onInstall.call(this,c);this.watchHandles.add([b.init(this.view.navigation.gamepad,
"enabled",function(a){a?(d.handle.resume(),d.frameTask||(d.frameTask=k.addFrameTask({update:function(a){return d.frameUpdate(a.deltaTime)}}))):(d.handle.pause(),d.frameTask&&(d.frameTask.remove(),d.frameTask=null))})])};d.prototype.onUninstall=function(){this.watchHandles.removeAll();this.frameTask&&(this.frameTask.remove(),this.frameTask=null);a.prototype.onUninstall.call(this)};d.prototype.handleEvent=function(a){var b=this.view.navigation.gamepad.device;b&&a.data.device!==b||this.currentDevice&&
this.currentDevice!==a.data.device||("end"===a.data.action?(this.currentDevice=null,n.resetTransformation(this.transformation)):(this.currentDevice=a.data.device,n.extractTransformation(a.data,this.view.navigation.gamepad,this.transformation)))};d.prototype.frameUpdate=function(a){var b=this.transformation;if(!n.isZeroTransformation(b)){var d=this.view.viewpoint.clone(),e=g*this.view.navigation.gamepad.velocityFactor*a;c.translateBy(d,d,[b.translation[0]*e,-b.translation[1]*e]);e=this.view.size;c.scaleAndRotateBy(d,
d,1+b.translation[2]*f*a,this.view.constraints.rotationEnabled?-b.heading*l*a:0,[e[0]/2,e[1]],e);a=this.view.constraints.constrain(d,this.view.viewpoint);this.view.viewpoint=a}};return d}(d.InputHandler);a.GamepadNavigation=p;var l=.06,g=.7,f=6E-4})},"esri/views/navigation/gamepadAndKeyboardUtils":function(){define(["require","exports","../../core/libs/gl-matrix-2/vec3"],function(p,a,e){function m(a){var b=a*a;0>a&&(b*=-1);return b}Object.defineProperty(a,"__esModule",{value:!0});a.isZeroTransformation=
a.extractTransformationKeyboard=a.extractTransformation=a.resetTransformation=a.quadraticAccentuation=void 0;a.quadraticAccentuation=m;a.resetTransformation=function(a){a.translation[0]=0;a.translation[1]=0;a.translation[2]=0;a.heading=0;a.tilt=0;return a};a.extractTransformation=function(a,b,c){var d=a.state;a=a.device;b="forward-down"===b.tiltDirection?1:-1;"standard"===a.deviceType?(c.translation[0]=m(d.axes[0]),c.translation[1]=m(d.axes[1]),c.translation[2]=m(d.buttons[7])-m(d.buttons[6]),c.heading=
m(d.axes[2]),c.tilt=m(d.axes[3])):"spacemouse"===a.deviceType&&(c.translation[0]=1.2*m(d.axes[0]),c.translation[1]=1.2*m(d.axes[1]),c.translation[2]=2*-m(d.axes[2]),c.heading=1.2*m(d.axes[5]),c.tilt=1.2*m(d.axes[3]));c.tilt*=b;e.vec3.scale(c.translation,c.translation,1);return c};a.extractTransformationKeyboard=function(a,b){b.translation[0]=a[1]-a[0];b.translation[1]=a[3]-a[2];b.translation[2]=a[4]-a[5];b.heading=a[7]-a[6];b.tilt=a[8]-a[9];b.zoom=a[10]-a[11];return b};a.isZeroTransformation=function(a){return 0===
a.translation[0]&&0===a.translation[1]&&0===a.translation[2]&&0===a.heading&&0===a.tilt&&0===a.zoom}})},"esri/views/2d/input/handlers/KeyPan":function(){define(["require","exports","tslib","../../../input/InputHandler"],function(p,a,e,m){Object.defineProperty(a,"__esModule",{value:!0});a.KeyPan=void 0;p=function(a){function b(b,d,e){var c,g=a.call(this,!0)||this;g.view=b;g.keys=d;g._pressed=!1;g._keyMap=(c={},c[d.left]="left",c[d.right]="right",c[d.up]="up",c[d.down]="down",c);g.registerIncoming("key-down",
e,function(a){return g._handleKeyDown(a)});g.registerIncoming("key-up",e,function(a){return g._handleKeyUp(a)});g.registerIncoming("blur",e,function(){return g._handleBlur()});return g}e.__extends(b,a);b.prototype._handleKeyDown=function(a){a.data.repeat||this._handleKey(a,!0)};b.prototype._handleKeyUp=function(a){this._handleKey(a,!1)};b.prototype._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};b.prototype._handleKey=function(a,b){var c=this._keyMap[a.data.key];
if(this._pressed=null!=c){if(b)switch(this.view.mapViewNavigation.begin(),c){case "left":this.view.mapViewNavigation.continousPanLeft();break;case "right":this.view.mapViewNavigation.continousPanRight();break;case "up":this.view.mapViewNavigation.continousPanUp();break;case "down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();a.stopPropagation()}};return b}(m.InputHandler);a.KeyPan=p})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["require",
"exports","tslib","../../../input/InputHandler"],function(p,a,e,m){Object.defineProperty(a,"__esModule",{value:!0});a.KeyRotate=void 0;p=function(a){function b(b,d,e){var c,g=a.call(this,!0)||this;g.view=b;g.keys=d;g._pressed=!1;g._keyToDirection=(c={},c[d.clockwiseOption1]="clockwise",c[d.clockwiseOption2]="clockwise",c[d.counterClockwiseOption1]="counterClockwise",c[d.counterClockwiseOption2]="counterClockwise",c[d.resetOption1]="reset",c[d.resetOption2]="reset",c);g.registerIncoming("key-down",
e,function(a){return g._handleKeyDown(a)});g.registerIncoming("key-up",e,function(a){return g._handleKeyUp(a)});g.registerIncoming("blur",e,function(){return g._handleBlur()});return g}e.__extends(b,a);b.prototype._handleKeyDown=function(a){a.data.repeat||this._handleKey(a,!0)};b.prototype._handleKeyUp=function(a){this._handleKey(a,!1)};b.prototype._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};b.prototype._handleKey=function(a,b){var c=a.modifiers;if(!(0<
c.size&&!c.has("Shift")||!this.view.constraints.rotationEnabled)&&(c=this._keyToDirection[a.data.key],this._pressed=null!=c)){if(b)switch(this.view.mapViewNavigation.begin(),c){case "clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case "counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case "reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();a.stopPropagation()}};return b}(m.InputHandler);
a.KeyRotate=p})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["require","exports","tslib","../../../../core/compilerUtils","../../../input/InputHandler"],function(p,a,e,m,k){Object.defineProperty(a,"__esModule",{value:!0});a.KeyZoom=void 0;p=function(a){function b(b,c,e){var d=a.call(this,!0)||this;d.view=b;d.keys=c;d._keysToZoomAction={};d.registerIncoming("key-down",e,function(a){return d._handleKeyDown(a)});c.zoomIn.forEach(function(a){return d._keysToZoomAction[a]=0});c.zoomOut.forEach(function(a){return d._keysToZoomAction[a]=
1});return d}e.__extends(b,a);b.prototype._handleKeyDown=function(a){this._handleKey(a)};b.prototype._handleKey=function(a){var b=a.modifiers;if(!(0<b.size)||b.has("Shift"))if(b=a.data.key,b in this._keysToZoomAction){var b=this._keysToZoomAction[b],c=this.view.mapViewNavigation,d=null;switch(b){case 0:d=c.zoomIn();break;case 1:d=c.zoomOut();break;default:m.neverReached(b);return}c.begin();d.then(function(){return c.end()});a.stopPropagation()}};return b}(k.InputHandler);a.KeyZoom=p})},"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["require",
"exports","tslib","../../../input/InputHandler"],function(p,a,e,m){Object.defineProperty(a,"__esModule",{value:!0});a.MouseWheelZoom=void 0;p=function(a){function b(b,d){var c=a.call(this,!0)||this;c.view=b;c._canZoom=!0;c.registerIncoming("mouse-wheel",d,function(a){return c._handleMouseWheel(a)});return c}e.__extends(b,a);b.prototype._handleMouseWheel=function(a){var b=this;if(this.view.navigation.mouseWheelZoomEnabled&&(a.preventDefault(),a.stopPropagation(),this._canZoom)){var c=this.view.mapViewNavigation;
a=a.data;if(a=c.zoom(1/Math.pow(.6,1/60*a.deltaY),[a.x,a.y]))this._canZoom=!1,a.catch(function(){}).then(function(){b._canZoom=!0;c.end()})}};return b}(m.InputHandler);a.MouseWheelZoom=p})},"esri/views/2d/input/handlers/PinchAction":function(){define(["require","exports","tslib","../../../input/DragEventSeparator","../../../input/InputHandler"],function(p,a,e,m,k){Object.defineProperty(a,"__esModule",{value:!0});a.PinchRotateAndZoom=void 0;p=function(a){function b(b){var c=a.call(this,!0)||this;c.view=
b;c.registerIncoming("drag",function(a){return c._handleDrag(a)});c.registerIncoming("pointer-down",function(){return c.stopMomentumNavigation()});var d=c.view.mapViewNavigation;c.dragEventSeparator=new m.DragEventSeparator({start:function(a,b){d.pinch.begin(c.view,b.data);b.stopPropagation()},update:function(a,b){d.pinch.update(c.view,b.data);b.stopPropagation()},end:function(a,b){d.pinch.end(c.view);b.stopPropagation()},condition:function(a){return 2<=a}});return c}e.__extends(b,a);b.prototype._handleDrag=
function(a){this.dragEventSeparator.handle(a)};b.prototype.stopMomentumNavigation=function(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()};return b}(k.InputHandler);a.PinchRotateAndZoom=p})},"esri/views/input/BrowserEventSource":function(){define("require exports ../../core/has ../../core/screenUtils ../../core/libs/pep/pep ./keys ./gamepad/GamepadSource".split(" "),function(p,a,e,m,k,b,c){Object.defineProperty(a,"__esModule",{value:!0});a.BrowserEventSource=void 0;var d=e("trident"),
n=e("edge"),l=e("chrome"),g=e("ff"),f=e("safari");p=function(){function a(a,b){var d=this;this.input=b;this._active={};this._activePointerCaptures=new Set;this._keyDownState=new Set;this._eventId=1;this._browserTouchPanningEnabled=!1;this._element=a;k.applyLocal(a);a.getAttribute("tabindex")||a.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,
"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost};this._updateTouchAction();this._element.addEventListener("keydown",this._preventAltKeyDefault);this._gamepadSource=new c.GamepadSource(a,this.input);this._gamepadSource.onEvent=function(a){return d._callback("gamepad",a)}}a.prototype.destroy=function(){var a=this;this.activeEvents=this._callback=null;
this._activePointerCaptures.forEach(function(b){a._releasePointerCaptureSafe(b)});this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null);this._activePointerCaptures=null;this._removeTouchAction();this._element.removeEventListener("keydown",this._preventAltKeyDefault)};Object.defineProperty(a.prototype,"browserTouchPanningEnabled",{get:function(){return this._browserTouchPanningEnabled},set:function(a){this._browserTouchPanningEnabled=a;this._updateTouchAction();this._updateTouchEventHandling()},
enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"onEventReceived",{set:function(a){this._callback=a},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"activeEvents",{set:function(a){var b=this,c;for(c in this._active)a&&a.has(c)||(this._element.removeEventListener(h[c],this._active[c]),delete this._active[c]);a&&a.forEach(function(a){if(!b._active[a]&&h[a]){var c=(b._eventHandlers[a]||b._handleDefault).bind(b,a);b._element.addEventListener(h[a],c);b._active[a]=c}});
this._gamepadSource.hasEventListeners=a&&a.has("gamepad")},enumerable:!1,configurable:!0});a.prototype.setPointerCapture=function(a,b){b?(this._element.setPointerCapture(a.pointerId),this._activePointerCaptures.add(a.pointerId)):(this._releasePointerCaptureSafe(a.pointerId),this._activePointerCaptures.delete(a.pointerId))};a.prototype._updateTouchAction=function(){this._element.classList.remove(this._browserTouchPanningEnabled?"esri-view-surface--touch-none":"esri-view-surface--touch-pan");this._element.classList.add(this._browserTouchPanningEnabled?
"esri-view-surface--touch-pan":"esri-view-surface--touch-none")};a.prototype._updateTouchEventHandling=function(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};a.prototype._removeTouchAction=function(){this._element.classList.remove("esri-view-surface--touch-none");this._element.classList.remove("esri-view-surface--touch-pan");this._element.removeEventListener("touchmove",
this._preventMultiTouchPanning)};a.prototype._releasePointerCaptureSafe=function(a){try{this._element.hasPointerCapture&&!this._element.hasPointerCapture(a)||this._element.releasePointerCapture(a)}catch(C){}};a.prototype._updateNormalizedPointerLikeEvent=function(b,c){b=m.createScreenPointFromNativeEvent(this._element,b);a.test.disableSubpixelCoordinates&&(b.x=Math.round(b.x),b.y=Math.round(b.y));c.x=b.x;c.y=b.y;return c};a.prototype._handleKey=function(a,c){var d=b.eventKey(c);d&&"key-up"===a&&this._keyDownState.delete(d);
c={native:c,key:d,repeat:d&&this._keyDownState.has(d)};d&&"key-down"===a&&this._keyDownState.add(c.key);this._callback(a,c)};a.prototype._handlePointer=function(a,b){b=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0,pointerType:b.pointerType,button:b.button,buttons:b.buttons,eventId:this._eventId++});this._callback(a,b)};a.prototype._handlePointerPreventDefault=function(a,b){var c=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0,pointerType:b.pointerType,button:b.button,buttons:b.buttons,
eventId:this._eventId++});b.preventDefault();this._callback(a,c)};a.prototype._handleMouseWheel=function(a,b){var c=b.deltaY;switch(b.deltaMode){case 0:if(d||n)c=c/document.documentElement.clientHeight*600;break;case 1:c*=30;break;case 2:c*=900}d||n?c*=.7:l||f?c*=.6:g&&(c*=1.375);var e=Math.abs(c);100<e&&(c=c/e*200/(1+Math.exp(-.02*(e-100))));b=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0,deltaY:c});this._callback(a,b)};a.prototype._handlePointerCaptureLost=function(a,b){this._activePointerCaptures.delete(b.pointerId);
this._handleDefault(a,b)};a.prototype._handleDefault=function(a,b){var c={native:b};b.preventDefault();this._callback(a,c)};a.prototype._preventAltKeyDefault=function(a){"Alt"===a.key&&a.preventDefault()};a.prototype._preventMultiTouchPanning=function(a){1<a.touches.length&&a.preventDefault()};a.test={disableSubpixelCoordinates:!1};return a}();a.BrowserEventSource=p;var h={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel",
"pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"}})},"esri/core/libs/pep/pep":function(){define(function(){function p(a,b){b=b||Object.create(null);var c=document.createEvent("Event");c.initEvent(a,b.bubbles||!1,b.cancelable||!1);a=2;for(var d;a<l.length;a++)d=l[a],c[d]=b[d]||g[a];c.buttons=b.buttons||0;a=0;a=b.pressure&&
c.buttons?b.pressure:c.buttons?.5:0;c.x=c.clientX;c.y=c.clientY;c.pointerId=b.pointerId||0;c.width=b.width||0;c.height=b.height||0;c.pressure=a;c.tiltX=b.tiltX||0;c.tiltY=b.tiltY||0;c.twist=b.twist||0;c.tangentialPressure=b.tangentialPressure||0;c.pointerType=b.pointerType||"";c.hwTimestamp=b.hwTimestamp||0;c.isPrimary=b.isPrimary||!1;return c}function a(){this.array=[];this.size=0}function e(a,b,c,d){this.addCallback=a.bind(d);this.removeCallback=b.bind(d);this.changedCallback=c.bind(d);w&&(this.observer=
new w(this.mutationWatcher.bind(this)))}function m(a){return"body /shadow-deep/ "+k(a)}function k(a){return'[touch-action\x3d"'+a+'"]'}function b(a){return"{ -ms-touch-action: "+a+"; touch-action: "+a+"; }"}function c(){if(G){B.forEach(function(a){String(a)===a?(I+=k(a)+b(a)+"\n",H&&(I+=m(a)+b(a)+"\n")):(I+=a.selectors.map(k)+b(a.rule)+"\n",H&&(I+=a.selectors.map(m)+b(a.rule)+"\n"))});var a=document.createElement("style");a.textContent=I;document.head.appendChild(a)}}function d(a){if(!r.pointermap.has(a))throw a=
Error("NotFoundError"),a.name="NotFoundError",a;}function n(a){for(var b=a.parentNode;b&&b!==a.ownerDocument;)b=b.parentNode;if(!b)throw a=Error("InvalidStateError"),a.name="InvalidStateError",a;}var l="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget pageX pageY".split(" "),g=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0],f=window.Map&&window.Map.prototype.forEach?Map:a;a.prototype={set:function(a,b){if(void 0===b)return this.delete(a);
this.has(a)||this.size++;this.array[a]=b},has:function(a){return void 0!==this.array[a]},delete:function(a){this.has(a)&&(delete this.array[a],this.size--)},get:function(a){return this.array[a]},clear:function(){this.size=this.array.length=0},forEach:function(a,b){return this.array.forEach(function(c,d){a.call(b,c,d,this)},this)}};var h="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget buttons pointerId width height pressure tiltX tiltY pointerType hwTimestamp isPrimary type target currentTarget which pageX pageY timeStamp".split(" "),
v=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],q={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},C="undefined"!==typeof SVGElementInstance,r={pointermap:new f,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(a,b){var c=b.events;c&&(c.forEach(function(a){b[a]&&(this.eventMap[a]=b[a].bind(b))},this),this.eventSources[a]=b,this.eventSourceList.push(b))},register:function(a){for(var b=
this.eventSourceList.length,c=0,d;c<b&&(d=this.eventSourceList[c]);c++)d.register.call(d,a)},unregister:function(a){for(var b=this.eventSourceList.length,c=0,d;c<b&&(d=this.eventSourceList[c]);c++)d.unregister.call(d,a)},contains:function(a,b){try{return a.contains(b)}catch(Z){return!1}},down:function(a){a.bubbles=!0;this.fireEvent("pointerdown",a)},move:function(a){a.bubbles=!0;this.fireEvent("pointermove",a)},up:function(a){a.bubbles=!0;this.fireEvent("pointerup",a)},enter:function(a){a.bubbles=
!1;this.fireEvent("pointerenter",a)},leave:function(a){a.bubbles=!1;this.fireEvent("pointerleave",a)},over:function(a){a.bubbles=!0;this.fireEvent("pointerover",a)},out:function(a){a.bubbles=!0;this.fireEvent("pointerout",a)},cancel:function(a){a.bubbles=!0;this.fireEvent("pointercancel",a)},leaveOut:function(a){this.out(a);this.propagate(a,this.leave,!1)},enterOver:function(a){this.over(a);this.propagate(a,this.enter,!0)},eventHandler:function(a){if(!a._handledByPE){var b=a.type;(b=this.eventMap&&
this.eventMap[b])&&b(a);a._handledByPE=!0}},listen:function(a,b){b.forEach(function(b){this.addEvent(a,b)},this)},unlisten:function(a,b){b.forEach(function(b){this.removeEvent(a,b)},this)},addEvent:function(a,b){a.addEventListener(b,this.boundHandler)},removeEvent:function(a,b){a.removeEventListener(b,this.boundHandler)},makeEvent:function(a,b){this.captureInfo[b.pointerId]&&(b.relatedTarget=null);a=new p(a,b);b.preventDefault&&(a.preventDefault=b.preventDefault);a._target=a._target||b.target;return a},
fireEvent:function(a,b){a=this.makeEvent(a,b);return this.dispatchEvent(a)},cloneEvent:function(a){for(var b=Object.create(null),c,d=0;d<h.length;d++)c=h[d],b[c]=a[c]||v[d],C&&("target"===c||"relatedTarget"===c)&&b[c]instanceof SVGElementInstance&&(b[c]=b[c].correspondingUseElement);a.preventDefault&&(b.preventDefault=function(){a.preventDefault()});return b},getTarget:function(a){var b=this.captureInfo[a.pointerId];if(!b)return a._target;if(a._target===b||!(a.type in q))return b},propagate:function(a,
b,c){for(var d=a.target,f=[];null!=d&&d!==document&&!d.contains(a.relatedTarget);)if(f.push(d),d=d.parentNode,!d)return;c&&f.reverse();f.forEach(function(c){a.target=c;b.call(this,a)},this)},setCapture:function(a,b,c){this.captureInfo[a]&&this.releaseCapture(a,c);this.captureInfo[a]=b;this.implicitRelease=this.releaseCapture.bind(this,a,c);document.addEventListener("pointerup",this.implicitRelease);document.addEventListener("pointercancel",this.implicitRelease);var d=new p("gotpointercapture");d.pointerId=
a;d._target=b;c||this.asyncDispatchEvent(d)},releaseCapture:function(a,b){var c=this.captureInfo[a];if(c){this.captureInfo[a]=void 0;document.removeEventListener("pointerup",this.implicitRelease);document.removeEventListener("pointercancel",this.implicitRelease);var d=new p("lostpointercapture");d.pointerId=a;d._target=c;b||this.asyncDispatchEvent(d)}},dispatchEvent:function(a){var b=this.getTarget(a);if(b)return b.dispatchEvent(a)},asyncDispatchEvent:function(a){requestAnimationFrame(this.dispatchEvent.bind(this,
a))}};r.boundHandler=r.eventHandler.bind(r);var t={shadow:function(a){if(a)return a.shadowRoot||a.webkitShadowRoot},canTarget:function(a){return a&&!!a.elementFromPoint},targetingShadow:function(a){a=this.shadow(a);if(this.canTarget(a))return a},olderShadow:function(a){var b=a.olderShadowRoot;!b&&(a=a.querySelector("shadow"))&&(b=a.olderShadowRoot);return b},allShadows:function(a){var b=[];for(a=this.shadow(a);a;)b.push(a),a=this.olderShadow(a);return b},searchRoot:function(a,b,c){if(a){var d=a.elementFromPoint(b,
c),f;for(f=this.targetingShadow(d);f;){if(a=f.elementFromPoint(b,c))return d=this.targetingShadow(a),this.searchRoot(d,b,c)||a;f=this.olderShadow(f)}return d}},owner:function(a){for(;a.parentNode;)a=a.parentNode;a.nodeType!==Node.DOCUMENT_NODE&&a.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(a=document);return a},findTarget:function(a){var b=a.clientX,c=a.clientY;a=this.owner(a.target);a.elementFromPoint(b,c)||(a=document);return this.searchRoot(a,b,c)}},u=Array.prototype.forEach.call.bind(Array.prototype.forEach),
y=Array.prototype.map.call.bind(Array.prototype.map),D=Array.prototype.slice.call.bind(Array.prototype.slice),x=Array.prototype.filter.call.bind(Array.prototype.filter),w=window.MutationObserver||window.WebKitMutationObserver,A={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};e.prototype={watchSubtree:function(a){this.observer&&t.canTarget(a)&&this.observer.observe(a,A)},enableOnSubtree:function(a){this.watchSubtree(a);a===document&&"complete"!==document.readyState?
this.installOnLoad():this.installNewSubtree(a)},installNewSubtree:function(a){u(this.findElements(a),this.addElement,this)},findElements:function(a){return a.querySelectorAll?a.querySelectorAll("[touch-action]"):[]},removeElement:function(a){this.removeCallback(a)},addElement:function(a){this.addCallback(a)},elementChanged:function(a,b){this.changedCallback(a,b)},concatLists:function(a,b){return a.concat(D(b))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===
document.readyState&&this.installNewSubtree(document)}.bind(this))},isElement:function(a){return a.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(a){var b=y(a,this.findElements,this);b.push(x(a,this.isElement));return b.reduce(this.concatLists,[])},mutationWatcher:function(a){a.forEach(this.mutationHandler,this)},mutationHandler:function(a){"childList"===a.type?(this.flattenMutationTree(a.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(a.removedNodes).forEach(this.removeElement,
this)):"attributes"===a.type&&this.elementChanged(a.target,a.oldValue)}};var B=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],I="",G=window.PointerEvent||window.MSPointerEvent,H=!window.ShadowDOMPolyfill&&document.head.createShadowRoot,z=r.pointermap,N=[1,4,2,8,16],E=!1;try{E=1===(new MouseEvent("test",{buttons:1})).buttons}catch(F){}var R={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(a){r.listen(a,
this.events)},unregister:function(a){r.unlisten(a,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(a){var b=this.lastTouches,c=a.clientX;a=a.clientY;for(var d=0,f=b.length,e;d<f&&(e=b[d]);d++){var g=Math.abs(a-e.y);if(25>=Math.abs(c-e.x)&&25>=g)return!0}},prepareEvent:function(a){var b=r.cloneEvent(a),c=b.preventDefault;b.preventDefault=function(){a.preventDefault();c()};b.pointerId=this.POINTER_ID;b.isPrimary=!0;b.pointerType=this.POINTER_TYPE;return b},prepareButtonsForMove:function(a,
b){var c=z.get(this.POINTER_ID);a.buttons=0!==b.which&&c?c.buttons:0;b.buttons=a.buttons},mousedown:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=z.get(this.POINTER_ID),c=this.prepareEvent(a);E||(c.buttons=N[c.button],b&&(c.buttons|=b.buttons),a.buttons=c.buttons);z.set(this.POINTER_ID,a);b&&0!==b.buttons?r.move(c):r.down(c)}},mousemove:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);E||this.prepareButtonsForMove(b,a);b.button=-1;z.set(this.POINTER_ID,a);r.move(b)}},
mouseup:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=z.get(this.POINTER_ID),c=this.prepareEvent(a);if(!E){var d=N[c.button];c.buttons=b?b.buttons&~d:0;a.buttons=c.buttons}z.set(this.POINTER_ID,a);c.buttons&=~N[c.button];0===c.buttons?r.up(c):r.move(c)}},mouseover:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);E||this.prepareButtonsForMove(b,a);b.button=-1;z.set(this.POINTER_ID,a);r.enterOver(b)}},mouseout:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=
this.prepareEvent(a);E||this.prepareButtonsForMove(b,a);b.button=-1;r.leaveOut(b)}},cancel:function(a){a=this.prepareEvent(a);r.cancel(a);this.deactivateMouse()},deactivateMouse:function(){z.delete(this.POINTER_ID)}},L=r.captureInfo,K=t.findTarget.bind(t),M=t.allShadows.bind(t),J=r.pointermap,O,P={events:["touchstart","touchmove","touchend","touchcancel"],register:function(a){O.enableOnSubtree(a)},unregister:function(){},elementAdded:function(a){var b=a.getAttribute("touch-action"),c=this.touchActionToScrollType(b);
c&&(a._scrollType=c,r.listen(a,this.events),M(a).forEach(function(a){a._scrollType=c;r.listen(a,this.events)},this))},elementRemoved:function(a){a._scrollType=void 0;r.unlisten(a,this.events);M(a).forEach(function(a){a._scrollType=void 0;r.unlisten(a,this.events)},this)},elementChanged:function(a,b){var c=a.getAttribute("touch-action"),d=this.touchActionToScrollType(c);b=this.touchActionToScrollType(b);d&&b?(a._scrollType=d,M(a).forEach(function(a){a._scrollType=d},this)):b?this.elementRemoved(a):
d&&this.elementAdded(a)},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(a){var b=this.scrollTypes;if("none"===a)return"none";if(a===b.XSCROLLER)return"X";if(a===b.YSCROLLER)return"Y";if(b.SCROLLER.exec(a))return"XY"},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(a){return this.firstTouch===a.identifier},setPrimaryTouch:function(a){if(0===J.size||1===J.size&&J.has(1))this.firstTouch=
a.identifier,this.firstXY={X:a.clientX,Y:a.clientY},this.scrolling=!1,this.cancelResetClickCount()},removePrimaryPointer:function(a){a.isPrimary&&(this.firstXY=this.firstTouch=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var a=function(){this.clickCount=0;this.resetId=null}.bind(this);this.resetId=setTimeout(a,200)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(a){var b=0;if("touchstart"===a||"touchmove"===a)b=
1;return b},touchToPointer:function(a){var b=this.currentTouchEvent,c=r.cloneEvent(a),d=c.pointerId=a.identifier+2;c.target=L[d]||K(c);c.bubbles=!0;c.cancelable=!0;c.detail=this.clickCount;c.button=0;c.buttons=this.typeToButtons(b.type);c.width=2*(a.radiusX||a.webkitRadiusX||0);c.height=2*(a.radiusY||a.webkitRadiusY||0);c.pressure=a.force||a.webkitForce||.5;c.isPrimary=this.isPrimaryTouch(a);c.pointerType=this.POINTER_TYPE;c.altKey=b.altKey;c.ctrlKey=b.ctrlKey;c.metaKey=b.metaKey;c.shiftKey=b.shiftKey;
var f=this;c.preventDefault=function(){f.scrolling=!1;f.firstXY=null;b.preventDefault()};return c},processTouches:function(a,b){var c=a.changedTouches;this.currentTouchEvent=a;a=0;for(var d;a<c.length;a++)d=c[a],b.call(this,this.touchToPointer(d))},shouldScroll:function(a){if(this.firstXY){var b;b=a.currentTarget._scrollType;if("none"===b)b=!1;else if("XY"===b)b=!0;else{a=a.changedTouches[0];var c="Y"===b?"X":"Y";b=Math.abs(a["client"+b]-this.firstXY[b])>=Math.abs(a["client"+c]-this.firstXY[c])}this.firstXY=
null;return b}},findTouch:function(a,b){for(var c=0,d=a.length,f;c<d&&(f=a[c]);c++)if(f.identifier===b)return!0},vacuumTouches:function(a){var b=a.touches;if(J.size>=b.length){var c=[];J.forEach(function(a,d){1===d||this.findTouch(b,d-2)||c.push(a.out)},this);c.forEach(this.cancelOut,this)}},touchstart:function(a){this.vacuumTouches(a);this.setPrimaryTouch(a.changedTouches[0]);this.dedupSynthMouse(a);this.scrolling||(this.clickCount++,this.processTouches(a,this.overDown))},overDown:function(a){J.set(a.pointerId,
{target:a.target,out:a,outTarget:a.target});r.enterOver(a);r.down(a)},touchmove:function(a){this.scrolling||(this.shouldScroll(a)?(this.scrolling=!0,this.touchcancel(a)):(a.preventDefault(),this.processTouches(a,this.moveOverOut)))},moveOverOut:function(a){var b=J.get(a.pointerId);if(b){var c=b.out,d=b.outTarget;r.move(a);c&&d!==a.target&&(c.relatedTarget=a.target,a.relatedTarget=d,c.target=d,a.target?(r.leaveOut(c),r.enterOver(a)):(a.target=d,a.relatedTarget=null,this.cancelOut(a)));b.out=a;b.outTarget=
a.target}},touchend:function(a){this.dedupSynthMouse(a);this.processTouches(a,this.upOut)},upOut:function(a){this.scrolling||(r.up(a),r.leaveOut(a));this.cleanUpPointer(a)},touchcancel:function(a){this.processTouches(a,this.cancelOut)},cancelOut:function(a){r.cancel(a);r.leaveOut(a);this.cleanUpPointer(a)},cleanUpPointer:function(a){J.delete(a.pointerId);this.removePrimaryPointer(a)},dedupSynthMouse:function(a){var b=R.lastTouches;a=a.changedTouches[0];this.isPrimaryTouch(a)&&(a={x:a.clientX,y:a.clientY},
b.push(a),b=function(a,b){b=a.indexOf(b);-1<b&&a.splice(b,1)}.bind(null,b,a),setTimeout(b,2500))}};O=new e(P.elementAdded,P.elementRemoved,P.elementChanged,P);var Q=r.pointermap,U=window.MSPointerEvent&&"number"===typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,T={events:"MSPointerDown MSPointerMove MSPointerUp MSPointerOut MSPointerOver MSPointerCancel MSGotPointerCapture MSLostPointerCapture".split(" "),register:function(a){r.listen(a,this.events)},unregister:function(a){r.unlisten(a,this.events)},
POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(a){var b=a;U&&(b=r.cloneEvent(a),b.pointerType=this.POINTER_TYPES[a.pointerType]);return b},cleanup:function(a){Q.delete(a)},MSPointerDown:function(a){Q.set(a.pointerId,a);a=this.prepareEvent(a);r.down(a)},MSPointerMove:function(a){a=this.prepareEvent(a);r.move(a)},MSPointerUp:function(a){var b=this.prepareEvent(a);r.up(b);this.cleanup(a.pointerId)},MSPointerOut:function(a){a=this.prepareEvent(a);r.leaveOut(a)},MSPointerOver:function(a){a=
this.prepareEvent(a);r.enterOver(a)},MSPointerCancel:function(a){var b=this.prepareEvent(a);r.cancel(b);this.cleanup(a.pointerId)},MSLostPointerCapture:function(a){a=r.makeEvent("lostpointercapture",a);r.dispatchEvent(a)},MSGotPointerCapture:function(a){a=r.makeEvent("gotpointercapture",a);r.dispatchEvent(a)}},Y,S,X;window.navigator.msPointerEnabled?(Y=function(a){d(a);n(this);0!==r.pointermap.get(a).buttons&&(r.setCapture(a,this,!0),this.msSetPointerCapture(a))},S=function(a){d(a);r.releaseCapture(a,
!0);this.msReleasePointerCapture(a)}):(Y=function(a){d(a);n(this);0!==r.pointermap.get(a).buttons&&r.setCapture(a,this)},S=function(a){d(a);r.releaseCapture(a)});X=function(a){return!!r.captureInfo[a]};var V=window.PointerEvent||window.MSPointerEvent;return{dispatcher:r,Installer:e,PointerEvent:p,PointerMap:f,targetFinding:t,applyGlobal:function(){c();window.PointerEvent||(window.PointerEvent=p,window.navigator.msPointerEnabled?(Object.defineProperty(window.navigator,"maxTouchPoints",{value:window.navigator.msMaxTouchPoints,
enumerable:!0}),r.registerSource("ms",T)):(Object.defineProperty(window.navigator,"maxTouchPoints",{value:0,enumerable:!0}),r.registerSource("mouse",R),void 0!==window.ontouchstart&&r.registerSource("touch",P)),r.register(document));window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:Y},releasePointerCapture:{value:S},hasPointerCapture:{value:X}})},applyLocal:function(a){V||(window.PointerEvent||(window.navigator.msPointerEnabled?
r.registerSource("ms",T):(r.registerSource("mouse",R),void 0!==window.ontouchstart&&r.registerSource("touch",P)),r.register(document)),window.Element&&!Element.prototype.setPointerCapture&&(a.setPointerCapture=Y.bind(a),a.releasePointerCapture=S.bind(a),a.hasPointerCapture=X.bind(a)),a.getAttribute("touch-action")||a.setAttribute("touch-action","none"))}}})},"esri/views/input/gamepad/GamepadSource":function(){define(["require","exports","../../../core/scheduling","./GamepadInputDevice","./GamepadState"],
function(p,a,e,m,k){Object.defineProperty(a,"__esModule",{value:!0});a.GamepadSource=void 0;p=function(){function a(a,b){var c=this;this.element=a;this.input=b;this._hasEventListeners=!1;this.onConnectGamepad=function(a){c.connectGamepad(a.gamepad)};this.onDisconnectGamepad=function(a){a=a.gamepad;var b=a.index,d=c.inputDevices[b];d&&(c.emitGamepadEvent(a,k.extractState(d),!1),c.inputDevices.splice(b,1),c.latestUpdate.splice(b,1),c.input.gamepad.devices.remove(d),c.ensurePollingState())};this.frameTask=
null;this.latestUpdate=[];this.inputDevices=[];this.callback=null;if(this.supported="getGamepads"in window.navigator)this.forEachGamepad(this.connectGamepad),window.addEventListener("gamepadconnected",this.onConnectGamepad),window.addEventListener("gamepaddisconnected",this.onDisconnectGamepad),this.ensurePollingState()}a.prototype.destroy=function(){this.hasEventListeners=!1;this.supported&&(window.removeEventListener("gamepadconnected",this.onConnectGamepad),window.removeEventListener("gamepaddisconnected",
this.onDisconnectGamepad))};Object.defineProperty(a.prototype,"hasEventListeners",{set:function(a){this._hasEventListeners!==a&&(this._hasEventListeners=a,this.ensurePollingState())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"eventsEnabled",{get:function(){return this.supported&&0<this.inputDevices.length&&this._hasEventListeners},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"onEvent",{set:function(a){this.callback=a},enumerable:!1,configurable:!0});a.prototype.connectGamepad=
function(a){var b=new m(a);"unknown"!==b.deviceType&&(this.inputDevices[a.index]=b,this.input.gamepad.devices.add(b));this.ensurePollingState()};a.prototype.ensurePollingState=function(){this.eventsEnabled?this.startPolling():this.stopPolling()};a.prototype.startPolling=function(){var a=this;null==this.frameTask&&(this.frameTask=e.addFrameTask({update:function(){return a.readGamepadState()}}))};a.prototype.stopPolling=function(){null!=this.frameTask&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=
[])};a.prototype.readGamepadState=function(){var a=this,b=document.hasFocus(),e=this.element.contains(document.activeElement),l="document"===this.input.gamepad.enabledFocusMode&&!b||"view"===this.input.gamepad.enabledFocusMode&&!e;this.forEachGamepad(function(b){var c=a.inputDevices[b.index];if(c){var d=a.latestUpdate[b.index],c=k.extractState(c),e=l||k.stateIdle(c);d&&(d.timestamp===b.timestamp||!d.active&&e||k.stateEqual(d.state,c))||a.emitGamepadEvent(b,c,!e)}})};a.prototype.forEachGamepad=function(a){for(var b=
window.navigator.getGamepads(),c=0;c<b.length;c++){var e=b[c];this.validate(e)&&a(e)}};a.prototype.emitGamepadEvent=function(a,b,e){var c=this.latestUpdate[a.index];if((c=c&&c.active)||e)this.latestUpdate[a.index]={timestamp:a.timestamp,state:b,active:e},this.callback&&this.callback({device:this.inputDevices[a.index],state:b,action:!c&&e?"start":c&&e?"update":"end"})};a.prototype.validate=function(a){if(!a||!a.connected)return!1;for(var b=0;b<a.axes.length;b++)if(isNaN(a.axes[b]))return!1;return!0};
return a}();a.GamepadSource=p})},"esri/views/input/gamepad/GamepadState":function(){define(["require","exports","../../../core/mathUtils"],function(p,a,e){Object.defineProperty(a,"__esModule",{value:!0});a.stateIdle=a.stateEqual=a.extractState=void 0;a.extractState=function(a){var k=a.native;return k?{buttons:k.buttons.map(function(a){return a.pressed?a.value?a.value:1:0}),axes:k.axes.map(function(b){var c=a.axisThreshold,d=Math.abs(b);b=d<c?0:e.sign(b)*(d-c)/(1-c);return b})}:{buttons:[],axes:[]}};
a.stateEqual=function(a,e){if(a.axes.length!==e.axes.length||a.buttons.length!==e.buttons.length)return!1;for(var b=0;b<a.axes.length;b++)if(a.axes[b]!==e.axes[b])return!1;for(b=0;b<a.buttons.length;b++)if(a.buttons[b]!==e.buttons[b])return!1;return!0};a.stateIdle=function(a){for(var e=0;e<a.axes.length;e++)if(0!==a.axes[e])return!1;for(e=0;e<a.buttons.length;e++)if(0!==a.buttons[e])return!1;return!0}})},"esri/views/input/handlers/PreventContextMenu":function(){define(["require","exports","tslib",
"../InputHandler"],function(p,a,e,m){Object.defineProperty(a,"__esModule",{value:!0});a.PreventContextMenu=void 0;p=function(a){function b(){var b=a.call(this,!0)||this;b.registerIncoming("context-menu",function(a){a.data.native.preventDefault()});return b}e.__extends(b,a);return b}(m.InputHandler);a.PreventContextMenu=p;a.default=p})},"esri/views/input/recognizers/DoubleTapDrag":function(){define("require exports tslib ../../../core/clock ../../../core/MapUtils ../../../core/screenUtils ../DragEventSeparator ../InputHandler ./SingleAndDoubleClick ./support".split(" "),
function(p,a,e,m,k,b,c,d,n,l){Object.defineProperty(a,"__esModule",{value:!0});a.DoubleTapDrag=void 0;p=function(a){function d(d,e,f,g,l){void 0===d&&(d=n.DefaultParameters.maximumDoubleClickDelay);void 0===e&&(e=n.DefaultParameters.maximumDoubleClickDistance);void 0===f&&(f=n.DefaultParameters.maximumDoubleTouchDelay);void 0===g&&(g=n.DefaultParameters.maximumDoubleTouchDistance);void 0===l&&(l=m.default);var h=a.call(this,!1)||this;h.maximumDoubleClickDelay=d;h.maximumDoubleClickDistance=e;h.maximumDoubleTouchDelay=
f;h.maximumDoubleTouchDistance=g;h._clock=l;h._doubleTapDragReady=!1;h._doubleTapDragActive=!1;h._dragStartCenter=b.createScreenPoint(0,0);h._pointerState=new Map;h._doubleTapDrag=h.registerOutgoing("double-tap-drag");h._dragEventSeparator=new c.DragEventSeparator({start:function(a,b){return h._dragStart(a,b)},update:function(a,b){return h._dragUpdate(b)},end:function(a,b){return h._dragEnd(b)}});h.registerIncoming("drag",function(a){return h._dragEventSeparator.handle(a)});h.registerIncoming("pointer-down",
function(a){return h._handlePointerDown(a)});h.registerIncoming("pointer-up",function(){return h._handlePointerUp()});return h}e.__extends(d,a);d.prototype.onUninstall=function(){this._pointerState.forEach(function(a){null!=a.doubleTapTimeout&&(a.doubleTapTimeout.remove(),a.doubleTapTimeout=null)})};Object.defineProperty(d.prototype,"hasPendingInputs",{get:function(){return k.someMap(this._pointerState,function(a){return null!=a.doubleTapTimeout})},enumerable:!1,configurable:!0});d.prototype._clearPointerDown=
function(a){var b=this._pointerState.get(a);b&&(b.doubleTapTimeout.remove(),b.doubleTapTimeout=null,this._pointerState.delete(a),this.refreshHasPendingInputs())};d.prototype._createDoubleTapDragData=function(a,b,c){return{action:a,delta:b,button:c.button,buttons:c.buttons,pointer:c.pointer,pointers:c.pointers,pointerType:c.pointerType,timestamp:c.timestamp}};d.prototype._dragStart=function(a,c){if(this._doubleTapDragReady&&1===a){this._doubleTapDragReady=!1;this._doubleTapDragActive=!0;var d=c.data;
a=c.modifiers;this._dragStartCenter=d.center;d=this._createDoubleTapDragData("begin",b.createScreenPoint(0,0),d);this._doubleTapDrag.emit(d,void 0,a);c.stopPropagation()}};d.prototype._dragUpdate=function(a){if(this._doubleTapDragActive){var c=a.data,d=a.modifiers,e=c.center,e=b.createScreenPoint(e.x-this._dragStartCenter.x,e.y-this._dragStartCenter.y),c=this._createDoubleTapDragData("update",e,c);this._doubleTapDrag.emit(c,void 0,d);a.stopPropagation()}};d.prototype._dragEnd=function(a){if(this._doubleTapDragActive){var c=
a.data,d=a.modifiers,e=c.center,e=b.createScreenPoint(e.x-this._dragStartCenter.x,e.y-this._dragStartCenter.y),c=this._createDoubleTapDragData("end",e,c);this._doubleTapDrag.emit(c,void 0,d);this._doubleTapDragActive=!1;a.stopPropagation()}};d.prototype._handlePointerDown=function(a){var b=a.data,c=this._pointerId(b),d=this._pointerState.get(c),e=b.native.pointerType;d?(e="touch"===e?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance,this._clearPointerDown(c),l.manhattanDistance(d.event.data,
b)>e?this._storePointerDown(a):this._doubleTapDragReady=!0):this._storePointerDown(a)};d.prototype._handlePointerUp=function(){this._doubleTapDragReady=!1};d.prototype._pointerId=function(a){var b=a.native;a=b.pointerId;var c=b.button,b=b.pointerType;return"mouse"===b?a+":"+c:""+b};d.prototype._storePointerDown=function(a){var b=this,c=a.data,d=c.native.pointerType,e=this._pointerId(c),c=this._clock.setTimeout(function(){return b._clearPointerDown(e)},"touch"===d?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay);
this._pointerState.set(e,{event:a,doubleTapTimeout:c});this.refreshHasPendingInputs()};return d}(d.InputHandler);a.DoubleTapDrag=p})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define("require exports tslib ../../../core/clock ../../../core/MapUtils ../InputHandler ./support".split(" "),function(p,a,e,m,k,b,c){Object.defineProperty(a,"__esModule",{value:!0});a.SingleAndDoubleClick=a.DefaultParameters=void 0;a.DefaultParameters={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,
maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};p=function(b){function d(c,d,e,h,n){void 0===c&&(c=a.DefaultParameters.maximumDoubleClickDelay);void 0===d&&(d=a.DefaultParameters.maximumDoubleClickDistance);void 0===e&&(e=a.DefaultParameters.maximumDoubleTouchDelay);void 0===h&&(h=a.DefaultParameters.maximumDoubleTouchDistance);void 0===n&&(n=m.default);var f=b.call(this,!1)||this;f.maximumDoubleClickDelay=c;f.maximumDoubleClickDistance=d;f.maximumDoubleTouchDelay=e;f.maximumDoubleTouchDistance=
h;f._clock=n;f._pointerState=new Map;f._click=f.registerOutgoing("click");f._doubleClick=f.registerOutgoing("double-click");f.registerIncoming("immediate-click",f._handleImmediateClick.bind(f));f.registerIncoming("pointer-drag",f._handlePointerDrag.bind(f));f.registerIncoming("drag",f._handleDrag.bind(f));return f}e.__extends(d,b);d.prototype.onUninstall=function(){this._pointerState.forEach(function(a){null!=a.doubleClickTimeout&&(a.doubleClickTimeout.remove(),a.doubleClickTimeout=null)})};Object.defineProperty(d.prototype,
"hasPendingInputs",{get:function(){return k.someMap(this._pointerState,function(a){return null!=a.doubleClickTimeout})},enumerable:!1,configurable:!0});d.prototype._pointerId=function(a){a=a.native;return"mouse"===a.pointerType?a.pointerId+":"+a.button:""+a.pointerType};d.prototype._handleImmediateClick=function(a){var b=a.data,d=this._pointerId(b),e=this._pointerState.get(d);if(e){var l="touch"===b.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;c.manhattanDistance(e.event.data,
b)>l?(this._clearDoubleClickTimeout(d,!0),this._startClick(a)):(this._clearDoubleClickTimeout(d,!1),this._doubleClick.emit(e.event.data,void 0,e.event.modifiers))}else this._startClick(a)};d.prototype._startClick=function(a){var b=this,c=this._pointerId(a.data);this._pointerState.set(c,{event:a,doubleClickTimeout:this._clock.setTimeout(function(){return b._doubleClickTimeoutExceeded(c)},"touch"===a.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)});this.refreshHasPendingInputs()};
d.prototype._handlePointerDrag=function(a){a=this._pointerId(a.data.currentEvent);this._clearDoubleClickTimeout(a,!0)};d.prototype._handleDrag=function(a){a=this._pointerId(a.data.pointer);this._clearDoubleClickTimeout(a,!0)};d.prototype._clearDoubleClickTimeout=function(a,b){var c=this._pointerState.get(a);c&&(c.doubleClickTimeout.remove(),c.doubleClickTimeout=null,b&&this._doubleClickTimeoutExceeded(a),this._pointerState.delete(a),this.refreshHasPendingInputs())};d.prototype._doubleClickTimeoutExceeded=
function(a){var b=this._pointerState.get(a);this._click.emit(b.event.data,void 0,b.event.modifiers);b.doubleClickTimeout=null;this._pointerState.delete(a);this.refreshHasPendingInputs()};return d}(b.InputHandler);a.SingleAndDoubleClick=p})},"esri/views/input/recognizers/support":function(){define(["require","exports","../../../core/screenUtils"],function(p,a,e){Object.defineProperty(a,"__esModule",{value:!0});a.fitCircleLSQ=a.euclideanDistance=a.manhattanDistance=void 0;a.manhattanDistance=function(a,
e){return Math.abs(e.x-a.x)+Math.abs(e.y-a.y)};a.euclideanDistance=function(a,e){var b=e.x-a.x;a=e.y-a.y;return Math.sqrt(b*b+a*a)};a.fitCircleLSQ=function(a,k){k?(k.radius=0,k.center.x=0,k.center.y=0):k={radius:0,center:e.createScreenPoint()};if(0===a.length)return k;if(1===a.length)return k.center.x=a[0].x,k.center.y=a[0].y,k;if(2===a.length){var b=a[0];a=a[1];var c=[a.x-b.x,a.y-b.y],d=c[0],c=c[1];k.radius=Math.sqrt(d*d+c*c)/2;k.center.x=(b.x+a.x)/2;k.center.y=(b.y+a.y)/2;return k}for(var n=0,l=
0,g=0;g<a.length;g++)n+=a[g].x,l+=a[g].y;for(var n=n/a.length,l=l/a.length,f=a.map(function(a){return a.x-n}),h=a.map(function(a){return a.y-l}),m=b=k=0,q=0,p=d=0,g=c=0;g<f.length;g++){var r=f[g],t=h[g],u=r*r,y=t*t;k+=u;b+=y;m+=r*t;q+=u*r;d+=y*t;p+=r*y;c+=t*u}g=k;f=m;h=b;q=.5*(q+p);d=.5*(d+c);c=g*h-m*f;p=(q*h-d*f)/c;d=(g*d-m*q)/c;c=e.createScreenPoint(p+n,d+l);return{radius:Math.sqrt(p*p+d*d+(k+b)/a.length),center:c}}})},"esri/views/input/recognizers/Drag":function(){define("require exports tslib ../../../core/screenUtils ../../../layers/support/timeUtils ../InputHandler ./support".split(" "),
function(p,a,e,m,k,b,c){function d(a){var b=[];a.forEach(function(a){b.push(m.createScreenPoint(a.event.x,a.event.y))});return c.fitCircleLSQ(b)}function n(a){var b=d(a),c=0;a.forEach(function(a){for(var d=g(a,b),d=d-a.lastAngle;d>Math.PI;)d-=2*Math.PI;for(;d<-Math.PI;)d+=2*Math.PI;d=a.lastAngle+d;a.lastAngle=d;c+=d-a.initialAngle});c/=a.size||1;return{angle:c,radius:b.radius,center:b.center}}function l(a){var b=new Map;a.forEach(function(a,c){return b.set(c,a.event)});return b}function g(a,b){a=
a.event;return Math.atan2(a.y-b.center.y,a.x-b.center.x)}Object.defineProperty(a,"__esModule",{value:!0});a.Button=a.Drag=void 0;p=function(a){function b(b){var c=a.call(this,!1)||this;c.navigationTouch=b;c.startStateModifiers=new Set;c.activePointerMap=new Map;c.isDragging=!1;c.isCurrentDragSuppressed=!1;c.drag=c.registerOutgoing("drag");c.registerIncoming("pointer-drag",c.handlePointerDrag.bind(c));c.registerIncoming("pointer-up",c.handlePointerUpAndPointerLost.bind(c));c.registerIncoming("pointer-capture-lost",
c.handlePointerUpAndPointerLost.bind(c));c.registerIncoming("pointer-cancel",c.handlePointerUpAndPointerLost.bind(c));return c}e.__extends(b,a);b.prototype.createPayload=function(a,b,c,d){return{action:a,pointerType:this.pointerType,button:this.mouseButton,buttons:b.buttons,timestamp:d,pointers:l(this.activePointerMap),pointer:b,angle:c.angle,radius:c.radius,center:c.center}};b.prototype.addPointer=function(a){var b=a.native.pointerId,c=n(this.activePointerMap).angle;a={event:a,initialAngle:0,lastAngle:0};
this.activePointerMap.set(b,a);b=g(a,d(this.activePointerMap));a.initialAngle=b;a.lastAngle=b;this.updatePointerAngles(c)};b.prototype.updatePointer=function(a){if(!a||null!=a.x||null!=a.y){var b=this.activePointerMap.get(a.native.pointerId);b?b.event=a:this.addPointer(a)}};b.prototype.removePointer=function(a){var b=n(this.activePointerMap).angle;this.activePointerMap.delete(a);this.updatePointerAngles(b)};b.prototype.updatePointerAngles=function(a){var b=n(this.activePointerMap);this.activePointerMap.forEach(function(c){c.initialAngle=
g(c,b)-a;c.lastAngle=g(c,b)-a})};b.prototype.emitEvent=function(a,b,c){var d=n(this.activePointerMap);this.drag.emit(this.createPayload(a,b,d,c),void 0,this.startStateModifiers)};b.prototype.handlePointerUpAndPointerLost=function(a){var b=a.data.native.pointerId,c=k.Milliseconds(a.timestamp);this.activePointerMap.get(b)&&(1===this.activePointerMap.size?(this.updatePointer(a.data),!this.isCurrentDragSuppressed&&this.emitEvent("end",a.data,c),this.isCurrentDragSuppressed=this.isDragging=!1,this.removePointer(b)):
(this.removePointer(b),this.emitEvent("removed",a.data,k.Milliseconds(a.timestamp))))};b.prototype.handlePointerDrag=function(a){var b=a.data,c=b.currentEvent,d=k.Milliseconds(a.timestamp);switch(b.action){case "start":case "update":this.isDragging?this.activePointerMap.has(c.native.pointerId)?(this.updatePointer(c),!this.isCurrentDragSuppressed&&this.emitEvent("update",c,d)):(this.addPointer(c),this.emitEvent("added",c,d),this.isCurrentDragSuppressed=this.isSuppressed):(this.updatePointer(c),this.pointerType=
a.data.startEvent.pointerType,this.mouseButton=a.data.startEvent.button,this.startStateModifiers=a.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this.emitEvent("start",c,d))}};Object.defineProperty(b.prototype,"isSuppressed",{get:function(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&"touch"===this.pointerType&&1===this.activePointerMap.size},enumerable:!1,configurable:!0});return b}(b.InputHandler);a.Drag=
p;(function(a){a[a.Left=0]="Left";a[a.Middle=1]="Middle";a[a.Right=2]="Right";a[a.Back=3]="Back";a[a.Forward=4]="Forward";a[a.Undefined=-1]="Undefined"})(a.Button||(a.Button={}))})},"esri/views/input/recognizers/ImmediateDoubleClick":function(){define("require exports tslib ../../../core/clock ../InputHandler ./SingleAndDoubleClick ./support".split(" "),function(p,a,e,m,k,b,c){Object.defineProperty(a,"__esModule",{value:!0});a.ImmediateDoubleClick=void 0;p=function(a){function d(c,d,e,h,n){void 0===
c&&(c=b.DefaultParameters.maximumDoubleClickDelay);void 0===d&&(d=b.DefaultParameters.maximumDoubleClickDistance);void 0===e&&(e=b.DefaultParameters.maximumDoubleTouchDelay);void 0===h&&(h=b.DefaultParameters.maximumDoubleTouchDistance);void 0===n&&(n=m.default);var f=a.call(this,!1)||this;f.maximumDoubleClickDelay=c;f.maximumDoubleClickDistance=d;f.maximumDoubleTouchDelay=e;f.maximumDoubleTouchDistance=h;f._clock=n;f._pointerState=new Map;f._immediateDoubleClick=f.registerOutgoing("immediate-double-click");
f.registerIncoming("pointer-down",f._handlePointerDown.bind(f));f.registerIncoming("pointer-up",function(a){f._handlePointerLoss(a,"pointer-up")});f.registerIncoming("pointer-capture-lost",function(a){f._handlePointerLoss(a,"pointer-capture-lost")});f.registerIncoming("pointer-cancel",function(a){f._handlePointerLoss(a,"pointer-cancel")});return f}e.__extends(d,a);d.prototype.onUninstall=function(){this._pointerState.forEach(function(a){a.immediateDoubleClick&&a.immediateDoubleClick.timeoutHandle.remove()});
a.prototype.onUninstall.call(this)};d.prototype._handlePointerDown=function(a){a=a.data;var b=this._pointerId(a);this._pointerState.has(b)||(this._pointerState.set(b,{downButton:a.native.button,immediateDoubleClick:null}),this.startCapturingPointer(a.native))};d.prototype._handlePointerLoss=function(a,b){var d=a.data,e=this._pointerId(d);if((e=this._pointerState.get(e))&&"pointer-up"===b&&e.downButton===d.native.button)if(b=e.immediateDoubleClick){b.timeoutHandle.remove();var g="touch"===a.data.native.pointerType?
this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;c.manhattanDistance(b,a.data)>g?this._startImmediateDoubleClick(a,e):(this._immediateDoubleClick.emit(a.data,void 0,b.modifiers),this._removeState(d))}else this._startImmediateDoubleClick(a,e)};d.prototype._startImmediateDoubleClick=function(a,b){var c=this;b.immediateDoubleClick={x:a.data.x,y:a.data.y,modifiers:a.modifiers,timeoutHandle:this._clock.setTimeout(function(){return c._removeState(a.data)},"touch"===a.data.native.pointerType?
this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)}};d.prototype._pointerId=function(a){a=a.native;return"mouse"===a.pointerType?a.pointerId+":"+a.button:""+a.pointerType};d.prototype._removeState=function(a){var b=this._pointerId(a);this._pointerState.delete(b);this.stopCapturingPointer(a.native);this.refreshHasPendingInputs()};return d}(k.InputHandler);a.ImmediateDoubleClick=p})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define("require exports tslib ../../../core/clock ../InputHandler ./support".split(" "),
function(p,a,e,m,k,b){Object.defineProperty(a,"__esModule",{value:!0});a.PointerClickHoldAndDrag=a.DefaultParameters=void 0;a.DefaultParameters={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};p=function(c){function d(b,d,e,f,h,k){void 0===b&&(b=a.DefaultParameters.maximumClickDelay);void 0===d&&(d=a.DefaultParameters.movementUntilMouseDrag);void 0===e&&(e=a.DefaultParameters.movementUntilPenDrag);void 0===f&&(f=a.DefaultParameters.movementUntilTouchDrag);
void 0===h&&(h=a.DefaultParameters.holdDelay);void 0===k&&(k=m.default);var g=c.call(this,!1)||this;g.maximumClickDelay=b;g.movementUntilMouseDrag=d;g.movementUntilPenDrag=e;g.movementUntilTouchDrag=f;g.holdDelay=h;g._clock=k;g._pointerState=new Map;g._pointerDrag=g.registerOutgoing("pointer-drag");g._immediateClick=g.registerOutgoing("immediate-click");g._pointerHold=g.registerOutgoing("hold");g.registerIncoming("pointer-down",g._handlePointerDown.bind(g));g.registerIncoming("pointer-up",function(a){g._handlePointerLoss(a,
"pointer-up")});g.registerIncoming("pointer-capture-lost",function(a){g._handlePointerLoss(a,"pointer-capture-lost")});g.registerIncoming("pointer-cancel",function(a){g._handlePointerLoss(a,"pointer-cancel")});g._moveHandle=g.registerIncoming("pointer-move",g._handlePointerMove.bind(g));g._moveHandle.pause();return g}e.__extends(d,c);d.prototype.onUninstall=function(){this._pointerState.forEach(function(a){null!=a.holdTimeout&&(a.holdTimeout.remove(),a.holdTimeout=null)});c.prototype.onUninstall.call(this)};
d.prototype._handlePointerDown=function(a){var b=this,c=a.data,d=c.native.pointerId,e=null;0===this._pointerState.size&&(e=this._clock.setTimeout(function(){var c=b._pointerState.get(d);c&&(c.isDragging||(b._pointerHold.emit(c.previousEvent,void 0,a.modifiers),c.holdEmitted=!0),c.holdTimeout=null)},this.holdDelay));e={startEvent:c,previousEvent:c,startTimestamp:a.timestamp,isDragging:!1,downButton:c.native.button,holdTimeout:e,modifiers:new Set};this._pointerState.set(d,e);this.startCapturingPointer(c.native);
this._moveHandle.resume();1<this._pointerState.size&&this.startDragging(a)};d.prototype._createPointerDragData=function(a,b,c){return{action:a,startEvent:b.startEvent,previousEvent:b.previousEvent,currentEvent:c}};d.prototype._handlePointerMove=function(a){var c=a.data,d=this._pointerState.get(c.native.pointerId);if(d){if(d.isDragging)this._pointerDrag.emit(this._createPointerDragData("update",d,c),void 0,d.modifiers);else{var e=b.euclideanDistance(c,d.startEvent),h=this._getDragThreshold(c.native.pointerType);
e>h&&this.startDragging(a)}d.previousEvent=c}};d.prototype._getDragThreshold=function(a){switch(a){case "touch":return this.movementUntilTouchDrag;case "pen":return this.movementUntilPenDrag;default:return this.movementUntilMouseDrag}};d.prototype.startDragging=function(a){var b=this,c=a.data,d=c.native.pointerId;this._pointerState.forEach(function(e){null!=e.holdTimeout&&(e.holdTimeout.remove(),e.holdTimeout=null);e.isDragging||(e.modifiers=a.modifiers,e.isDragging=!0,d===e.startEvent.native.pointerId?
b._pointerDrag.emit(b._createPointerDragData("start",e,c)):b._pointerDrag.emit(b._createPointerDragData("start",e,e.previousEvent),a.timestamp))})};d.prototype._handlePointerLoss=function(a,b){var c=a.data,d=c.native.pointerId,e=this._pointerState.get(d);e&&(null!=e.holdTimeout&&(e.holdTimeout.remove(),e.holdTimeout=null),e.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",e,"pointer-up"===b?c:e.previousEvent),void 0,e.modifiers):"pointer-up"===b&&e.downButton===c.native.button&&
a.timestamp-e.startTimestamp<=this.maximumClickDelay&&!e.holdEmitted&&this._immediateClick.emit(c),this._pointerState.delete(d),this.stopCapturingPointer(c.native),0===this._pointerState.size&&this._moveHandle.pause())};return d}(k.InputHandler);a.PointerClickHoldAndDrag=p})},"esri/views/2d/support/HighlightOptions":function(){define("require exports tslib ../../../Color ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(p,a,e,m,k,b){var c=0;return function(a){function d(){var b=
null!==a&&a.apply(this,arguments)||this;b.color=new m([0,255,255]);b.haloOpacity=1;b.fillOpacity=.25;return b}e.__extends(d,a);Object.defineProperty(d.prototype,"version",{get:function(){return c++},enumerable:!1,configurable:!0});e.__decorate([b.property({readOnly:!0,dependsOn:["color","haloColor","haloOpacity","fillOpacity"]})],d.prototype,"version",null);e.__decorate([b.property({type:m})],d.prototype,"color",void 0);e.__decorate([b.property({type:m})],d.prototype,"haloColor",void 0);e.__decorate([b.property()],
d.prototype,"haloOpacity",void 0);e.__decorate([b.property()],d.prototype,"fillOpacity",void 0);return d=e.__decorate([b.subclass("esri.views.2d.support.HighlightOptions")],d)}(k)})},"esri/views/support/screenshotUtils":function(){define(["require","exports","tslib","../../core/compilerUtils","../../core/mathUtils"],function(p,a,e,m,k){function b(a,b){var c=a||{},d=c.format,e=c.quality,f=c.rotation,c=c.disableSlice,h=g(a,b.padding),r;r=b.width-h.left-h.right;b=b.height-h.top-h.bottom;h={x:0,y:0,width:r,
height:b};if(a&&a.area){null!=a.area.x&&(h.x=Math.floor(a.area.x));null!=a.area.y&&(h.y=Math.floor(a.area.y));var t=null!=a.area.width?Math.floor(a.area.width):null,u=null!=a.area.height?Math.floor(a.area.height):null;h.width=r-h.x;h.height=b-h.y;null!=t&&null!=u?(h.width=Math.min(h.width,t),h.height=Math.min(h.height,u)):null==t&&null!=u?(t=Math.min(h.width,t),h.height*=t/h.width,h.width=t):null!=t&&null==u&&(t=Math.min(h.height,u),h.width*=t/h.height,h.height=t)}h=l(h,a);t=Math.floor(Math.max(h.x,
0));u=Math.floor(Math.max(h.y,0));r={x:t,y:u,width:Math.floor(Math.min(h.width,r-t)),height:Math.floor(Math.min(h.height,b-u))};b=r.width/r.height;h=h.width/h.height;h!==b&&(h>b?(b=Math.floor(r.width/h),r={x:r.x,y:Math.floor(r.y+(r.height-b)/2),width:r.width,height:b}):(b=Math.floor(r.height*h),r={x:Math.floor(r.x+(r.width-b)/2),y:r.y,width:b,height:r.height}));h=n(a,r);b=h.width;h=h.height;a:switch(d){case "png":case "jpg":case "jpeg":break a;case null:case void 0:d=q;break a;default:m.neverReached(d),
d=q}t=C[d];e=k.clamp(null!=e?e:t,0,100);return{format:d,quality:e,area:r,width:b,height:h,rotation:f,disableSlice:!!c,ignoreBackground:!(!a||!a.ignoreBackground),ignorePadding:!(!a||!a.ignorePadding)}}function c(a,b){return a.toDataURL(v[b.format],b.quality/100)}function d(a,b,c){c||(f||(f=document.createElement("canvas"),f.width=1,f.height=1),c=f);return c.getContext("2d").createImageData(a,b)}function n(a,b){if(!a)return b;var c=a.width;a=a.height;if(null!=c&&null!=a)return{width:Math.floor(c),
height:Math.floor(a)};if(null==c&&null==a)return b;b=b.width/b.height;return null==a?{width:Math.floor(c),height:Math.floor(c/b)}:{width:Math.floor(a*b),height:Math.floor(a)}}function l(a,b){if(!b||null==b.width||null==b.height)return a;b=b.width/b.height;var c=a.width/a.height;if(c===b)return a;if(c<b)return b=Math.floor(a.height*b),a.x-=(b-a.width)/2,a.width=b,a;b=Math.floor(a.width/b);a.y-=(b-a.height)/2;a.height=b;return a}function g(a,b){return!b||a&&a.ignorePadding?r:b}Object.defineProperty(a,
"__esModule",{value:!0});a.screenshotSuperSampleSettings=a.resampleHermite=a.wrapImageData=a.createEmptyImageData=a.toDataUrl=a.encodeResult=a.toRenderSettings=a.completeUserSettings=void 0;a.completeUserSettings=b;a.toRenderSettings=function(a,c){var d=b(a,c),e=d.area,f=d.width/e.width,l=g(d,c.padding),h=l.left+l.right,k=l.top+l.bottom;return{framebufferWidth:Math.floor((c.width-h)*f+h),framebufferHeight:Math.floor((c.height-k)*f+k),region:{x:Math.floor(e.x*f)+l.left,y:Math.floor(e.y*f)+l.top,width:d.width,
height:d.height},format:d.format,quality:d.quality,rotation:d.rotation,pixelRatio:f,layers:a&&a.layers?a.layers:[],disableSlice:d.disableSlice,ignoreBackground:d.ignoreBackground,ignorePadding:d.ignorePadding}};a.encodeResult=function(a,b,d,e){if(e.premultipliedAlpha)for(var f=a.data,g=f.length,l=0;l<g;l+=4){var h=f[l+3];0<h&&(h/=255,f[l+0]/=h,f[l+1]/=h,f[l+2]/=h)}d.width=a.width;d.height=a.height;f=d.getContext("2d");f.putImageData(a,0,0);e.flipY&&(f.save(),f.globalCompositeOperation="copy",f.scale(1,
-1),f.translate(0,-f.canvas.height),f.drawImage(f.canvas,0,0),f.restore());a=f.getImageData(0,0,a.width,a.height);b=c(d,b);d.width=0;d.height=0;return{dataUrl:b,data:a}};a.toDataUrl=c;a.createEmptyImageData=function(a,b,c){if(!a||!b)throw Error("Cannot construct image data without dimensions");if(h)try{return new ImageData(a,b)}catch(D){h=!1}return d(a,b,c)};a.wrapImageData=function(a,b,c,e){if(!b||!c)throw Error("Cannot construct image data without dimensions");if(h)try{return new ImageData(a,b,
c)}catch(x){h=!1}b=d(b,c,e);b.data.set(a,0);return b};a.resampleHermite=function(a,b,c,d,e,f,g,l){void 0===d&&(d=0);void 0===e&&(e=0);void 0===f&&(f=a.width-d);void 0===g&&(g=a.height-e);void 0===l&&(l=!1);var h=a.data,k=b.width,r=b.height,n=b.data;f/=k;g/=r;var m=Math.ceil(f/2),q=Math.ceil(g/2);a=a.width;for(var t=0;t<r;t++)for(var p=0;p<k;p++){for(var u=4*(p+(l?r-t-1:t)*k),y=0,C=0,v=0,x=0,w=0,D=0,B=(t+.5)*g,A=Math.floor(t*g);A<(t+1)*g;A++)for(var S=Math.abs(B-(A+.5))/q,X=(p+.5)*f,S=S*S,V=Math.floor(p*
f);V<(p+1)*f;V++){var F=Math.abs(X-(V+.5))/m,F=Math.sqrt(S+F*F);if(!(1<=F)){var F=2*F*F*F-3*F*F+1,W=4*(d+V+(e+A)*a),D=D+F*h[W+3],C=C+F;!c&&255>h[W+3]&&(F=F*h[W+3]/255);v+=F*h[W];x+=F*h[W+1];w+=F*h[W+2];y+=F}}n[u]=v/y;n[u+1]=x/y;n[u+2]=w/y;n[u+3]=D/C}return b};a.screenshotSuperSampleSettings=function(a,b,c){if(!b)return a;b=a.framebufferWidth;var d=a.framebufferHeight,f=a.pixelRatio,l=a.region;c=g(a,c);var h=c.left+c.right,k=c.top+c.bottom,r=b-h,n=d-k,m=Math.min(8,Math.min((2048-h)/r,(2048-k)/n));
return 1.5>m?a:e.__assign(e.__assign({},a),{framebufferWidth:Math.round(r*m)+h,framebufferHeight:Math.round(n*m)+k,pixelRatio:f*m,resample:{region:{x:Math.round((l.x-c.left)*m)+c.left,y:Math.round((l.y-c.top)*m)+c.top,width:Math.round(l.width*m),height:Math.round(l.height*m)},width:b,height:d}})};var f=null,h=!0,v={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},q="jpg",C={png:100,jpg:98,jpeg:98},r={top:0,right:0,bottom:0,left:0}})},"esri/views/support/WebGLRequirements":function(){define(["require",
"exports","tslib","../../core/Error","../../core/has"],function(p,a,e,m,k){Object.defineProperty(a,"__esModule",{value:!0});a.check=void 0;var b={checkMajorWebPerformanceCaveat:!0};a.check=function(a){a=e.__assign(e.__assign({},b),a);return k("esri-webgl")?a.checkMajorWebPerformanceCaveat&&k("esri-webgl-major-performance-caveat")?new m("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist."):
k("esri-webgl-high-precision-fragment")?k("esri-webgl-vertex-shader-samplers")?k("esri-webgl-element-index-uint")?k("esri-webgl-standard-derivatives")?k("esri-webgl-instanced-arrays")?null:new m("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported."):new m("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported."):new m("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported."):
new m("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new m("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new m("webgl:required","WebGL is required but not supported.")}})},"esri/views/ui/2d/DefaultUI2D":function(){define(["require","exports","tslib","../../../core/accessorSupport/decorators","../DefaultUI"],function(p,a,e,m,k){return function(a){function b(b){b=
a.call(this,b)||this;b.components=["attribution","zoom"];return b}e.__extends(b,a);e.__decorate([m.property()],b.prototype,"components",void 0);return b=e.__decorate([m.subclass("esri.views.ui.2d.DefaultUI2D")],b)}(k)})},"esri/views/ui/DefaultUI":function(){define("require exports tslib ../../core/has ../../core/Logger ../../core/watchUtils ../../core/accessorSupport/decorators ./Component ./UI ../../widgets/Attribution ../../widgets/Compass ../../widgets/NavigationToggle ../../widgets/Zoom".split(" "),
function(p,a,e,m,k,b,c,d,n,l,g,f,h){k.getLogger("esri.views.ui.DefaultUI");return function(a){function k(b){b=a.call(this,b)||this;b._defaultPositionLookup={attribution:"manual",compass:"top-leading","navigation-toggle":"top-leading",zoom:"top-leading"};b.components=[];return b}e.__extends(k,a);k.prototype.initialize=function(){this._handles.add([b.init(this,"components",this._componentsWatcher.bind(this)),b.init(this,"view",this._updateViewAwareWidgets.bind(this))])};k.prototype._add=function(b,
c,d,e){if("string"===typeof b&&this._defaultPositionLookup[b]){if(this._find(b))return;b=this._createComponent(b)}a.prototype._add.call(this,b,c,d,e)};k.prototype._removeComponents=function(a){var b=this;a.forEach(function(a){if(a=b._find(a))b.remove(a),a.destroy()})};k.prototype._updateViewAwareWidgets=function(a){var b=this;this.components.forEach(function(c){(c=(c=b._find(c))&&c.widget)&&void 0!==c.view&&(c.view=a)})};k.prototype._componentsWatcher=function(a,b){this._removeComponents(b);this._addComponents(a);
this._adjustPadding(a)};k.prototype._adjustPadding=function(a){-1!==a.indexOf("attribution")||this._isOverridden("padding")||(this.padding=this.padding.top)};k.prototype._addComponents=function(a){var b=this;this.initialized&&a.forEach(function(a){return b.add(b._createComponent(a),b._defaultPositionLookup[a])})};k.prototype._createComponent=function(a){var b=this._createWidget(a);if(b)return new d({id:a,node:b})};k.prototype._createWidget=function(a){if("attribution"===a)return this._createAttribution();
if("compass"===a)return this._createCompass();if("navigation-toggle"===a)return this._createNavigationToggle();if("zoom"===a)return this._createZoom()};k.prototype._createAttribution=function(){return new l({view:this.view})};k.prototype._createCompass=function(){return new g({view:this.view})};k.prototype._createNavigationToggle=function(){return new f({view:this.view})};k.prototype._createZoom=function(){return new h({view:this.view})};e.__decorate([c.property()],k.prototype,"components",void 0);
return k=e.__decorate([c.subclass("esri.views.ui.DefaultUI")],k)}(n)})},"esri/views/ui/Component":function(){define("require exports tslib ../../core/Accessor ../../core/domUtils ../../core/accessorSupport/decorators".split(" "),function(p,a,e,m,k,b){return function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.widget=null;return b}e.__extends(c,a);c.prototype.destroy=function(){this.widget&&this.widget.destroy();this.node=null};Object.defineProperty(c.prototype,"id",{get:function(){return this.get("widget.id")||
this.get("node.id")},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"node",{set:function(a){var b=this._get("node");a!==b&&(a&&a.classList.add("esri-component"),b&&b.classList.remove("esri-component"),this._set("node",a))},enumerable:!1,configurable:!0});c.prototype.castNode=function(a){if(!a)return this._set("widget",null),null;if("string"===typeof a||a&&"nodeType"in a)return this._set("widget",null),k.byId(a);a&&"function"===typeof a.render&&!a.domNode&&(a.domNode=document.createElement("div"));
this._set("widget",a);return a.domNode};e.__decorate([b.property()],c.prototype,"id",null);e.__decorate([b.property()],c.prototype,"node",null);e.__decorate([b.cast("node")],c.prototype,"castNode",null);e.__decorate([b.property({readOnly:!0})],c.prototype,"widget",void 0);return c=e.__decorate([b.subclass("esri.views.ui.Component")],c)}(m)})},"esri/views/ui/UI":function(){define("require exports tslib ../../core/domUtils ../../core/Evented ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ./Component ../../widgets/support/widgetUtils".split(" "),
function(p,a,e,m,k,b,c,d,n,l){function g(a){return"object"!==typeof a||a instanceof n||"declaredClass"in a||!("component"in a||"index"in a||"position"in a)?null:a}function f(a,b){var c=b.bottom,d=b.left,e=b.right;a.style.top=b.top;a.style.bottom=c;a.style.left=d;a.style.right=e}var h={left:0,top:0,bottom:0,right:0},v={bottom:30,top:15,right:15,left:15};return function(a){function k(c){c=a.call(this,c)||this;c._cornerNameToContainerLookup={};c._positionNameToContainerLookup={};c._components=[];c._componentToKey=
new Map;c._handles=new b;c.view=null;c._initContainers();return c}e.__extends(k,a);k.prototype.initialize=function(){this._handles.add([c.init(this,"view.padding, container",this._applyViewPadding.bind(this)),c.init(this,"padding",this._applyUIPadding.bind(this))])};k.prototype.destroy=function(){this.container=null;for(var a=0,b=this._components;a<b.length;a++)b[a].destroy();this._components.length=0;this._handles.destroy();this._componentToKey.clear()};Object.defineProperty(k.prototype,"container",
{set:function(a){var b=this._get("container");a!==b&&(a&&(a.classList.add("esri-ui"),this._attachContainers(a)),b&&(b.classList.remove("esri-ui"),f(b,{top:"",bottom:"",left:"",right:""}),m.empty(b)),this._set("container",a))},enumerable:!1,configurable:!0});Object.defineProperty(k.prototype,"height",{get:function(){var a=this.get("view.height")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.top+b.bottom),0)},enumerable:!1,configurable:!0});Object.defineProperty(k.prototype,
"padding",{get:function(){return this._get("padding")},set:function(a){a?this._override("padding",a):this._clearOverride("padding")},enumerable:!1,configurable:!0});k.prototype.castPadding=function(a){return"number"===typeof a?{bottom:a,top:a,right:a,left:a}:e.__assign(e.__assign({},v),a)};Object.defineProperty(k.prototype,"width",{get:function(){var a=this.get("view.width")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.left+b.right),0)},enumerable:!1,configurable:!0});k.prototype.add=
function(a,b){var c,d=this,e,f;if(Array.isArray(a))a.forEach(function(a){return d.add(a,b)});else{if(c=g(a))e=c.index,b=c.position,a=c.component,f=c.key;b&&"object"===typeof b&&(c=b,e=c.index,f=c.key,b=c.position);!a||b&&!this._isValidPosition(b)||this._add(a,b,e,f)}};k.prototype.remove=function(a,b){var c=this;if(a){if(Array.isArray(a))return a.map(function(a){return c.remove(a,b)});var d=this._find(a);if(d){var e=this._componentToKey;if(!e.has(a)||e.get(a)===b)return e=this._components.indexOf(d),
d.node.parentNode&&d.node.parentNode.removeChild(d.node),this._componentToKey.delete(a),this._components.splice(e,1)[0]}}};k.prototype.empty=function(a){var b=this;if(Array.isArray(a))return a.map(function(a){return b.empty(a)}).reduce(function(a,b){return a.concat(b)});a=a||"manual";return"manual"===a?Array.prototype.slice.call(this._manualContainer.children).filter(function(a){return!a.classList.contains("esri-ui-corner")}).map(function(a){return b.remove(a)}):this._isValidPosition(a)?Array.prototype.slice.call(this._cornerNameToContainerLookup[a].children).map(this.remove,
this):null};k.prototype.move=function(a,b){var c=this;Array.isArray(a)&&a.forEach(function(a){return c.move(a,b)});if(a){var d,e=g(a)||g(b);e&&(d=e.index,b=e.position,a=e.component||a);(!b||this._isValidPosition(b))&&(a=this.remove(a))&&this.add(a,{position:b,index:d})}};k.prototype.find=function(a){return a?(a=this._findById(a))&&(a.widget||a.node):null};k.prototype._add=function(a,b,c,d){a instanceof n||(a=new n({node:a}));this._place({component:a,position:b,index:c});this._components.push(a);d&&
this._componentToKey.set(a,d)};k.prototype._find=function(a){return a?a instanceof n?this._findByComponent(a):"string"===typeof a?this._findById(a):this._findByNode(a.domNode||a):null};k.prototype._getViewPadding=function(){return this.get("view.padding")||h};k.prototype._attachContainers=function(a){a.appendChild(this._innerContainer);a.appendChild(this._manualContainer)};k.prototype._initContainers=function(){var a=document.createElement("div");a.classList.add("esri-ui-inner-container");a.classList.add("esri-ui-corner-container");
var b=document.createElement("div");b.classList.add("esri-ui-inner-container");b.classList.add("esri-ui-manual-container");var c=document.createElement("div");c.classList.add("esri-ui-top-left");c.classList.add("esri-ui-corner");a.appendChild(c);var d=document.createElement("div");d.classList.add("esri-ui-top-right");d.classList.add("esri-ui-corner");a.appendChild(d);var f=document.createElement("div");f.classList.add("esri-ui-bottom-left");f.classList.add("esri-ui-corner");a.appendChild(f);var g=
document.createElement("div");g.classList.add("esri-ui-bottom-right");g.classList.add("esri-ui-corner");a.appendChild(g);this._innerContainer=a;this._manualContainer=b;a=l.isRTL();this._cornerNameToContainerLookup={"top-left":c,"top-right":d,"bottom-left":f,"bottom-right":g,"top-leading":a?d:c,"top-trailing":a?c:d,"bottom-leading":a?g:f,"bottom-trailing":a?f:g};this._positionNameToContainerLookup=e.__assign({manual:b},this._cornerNameToContainerLookup)};k.prototype._isValidPosition=function(a){return!!this._positionNameToContainerLookup[a]};
k.prototype._place=function(a){var b=a.component,c=a.index;a=this._positionNameToContainerLookup[a.position||"manual"];var d=-1<c,e=b.widget;e&&!e._started&&"function"===typeof e.postMixInProperties&&"function"===typeof e.buildRendering&&"function"===typeof e.postCreate&&"function"===typeof e.startup&&b.widget.startup();d?(d=Array.prototype.slice.call(a.children),0===c?a.firstChild?m.insertBefore(b.node,a.firstChild):a.appendChild(b.node):c>=d.length?a.appendChild(b.node):m.insertBefore(b.node,d[c])):
a.appendChild(b.node)};k.prototype._applyViewPadding=function(){var a=this.container;a&&f(a,this._toPxPosition(this._getViewPadding()))};k.prototype._applyUIPadding=function(){var a=this._innerContainer;a&&f(a,this._toPxPosition(this.padding))};k.prototype._toPxPosition=function(a){return{top:this._toPxUnit(a.top),left:this._toPxUnit(a.left),right:this._toPxUnit(a.right),bottom:this._toPxUnit(a.bottom)}};k.prototype._toPxUnit=function(a){return 0===a?"0":a+"px"};k.prototype._findByComponent=function(a){var b=
null,c;this._components.some(function(d){(c=d===a)&&(b=d);return c});return b};k.prototype._findById=function(a){var b=null,c;this._components.some(function(d){(c=d.id===a)&&(b=d);return c});return b};k.prototype._findByNode=function(a){var b=null,c;this._components.some(function(d){(c=d.node===a)&&(b=d);return c});return b};e.__decorate([d.property()],k.prototype,"container",null);e.__decorate([d.property({dependsOn:["view.height"]})],k.prototype,"height",null);e.__decorate([d.property({value:v})],
k.prototype,"padding",null);e.__decorate([d.cast("padding")],k.prototype,"castPadding",null);e.__decorate([d.property()],k.prototype,"view",void 0);e.__decorate([d.property({dependsOn:["view.width"]})],k.prototype,"width",null);return k=e.__decorate([d.subclass("esri.views.ui.UI")],k)}(k.EventedAccessor)})},"esri/widgets/Attribution":function(){define("require exports tslib ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./Attribution/AttributionViewModel ./support/widget".split(" "),
function(p,a,e,m,k,b,c,d){return function(a){function b(b,d){b=a.call(this,b,d)||this;b._isOpen=!1;b._attributionTextOverflowed=!1;b._prevSourceNodeHeight=0;b.iconClass="esri-icon-description";b.itemDelimiter=" | ";b.label=void 0;b.messages=null;b.view=null;b.viewModel=new c;return b}e.__extends(b,a);b.prototype.initialize=function(){var a=this;this.own(m.on(this,"viewModel.items","change",function(){return a.scheduleRender()}))};Object.defineProperty(b.prototype,"attributionText",{get:function(){return this.viewModel.items.reduce(function(a,
b){-1===a.indexOf(b.text)&&a.push(b.text);return a},[]).join(this.itemDelimiter)},enumerable:!1,configurable:!0});b.prototype.render=function(){var a,b=(a={},a["esri-attribution--open"]=this._isOpen,a);return d.tsx("div",{bind:this,class:this.classes("esri-attribution esri-widget",b),onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())};b.prototype.renderPoweredBy=function(){return d.tsx("div",{class:"esri-attribution__powered-by"},"Powered by"," ",
d.tsx("a",{class:this.classes("esri-attribution__link","esri-widget__anchor"),href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))};b.prototype.renderSourcesNode=function(){var a,b=this._isOpen,c=this._isInteractive(),e=c?0:-1,l=this.attributionText,k=c?"button":void 0,b=(a={},a["esri-attribution__sources--open"]=b,a["esri-interactive"]=c,a);return d.tsx("div",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:this.classes("esri-attribution__sources",
b),innerHTML:l,role:k,tabIndex:e})};b.prototype._afterSourcesNodeCreate=function(a){this._prevSourceNodeHeight=a.clientWidth};b.prototype._afterSourcesNodeUpdate=function(a){var b=!1,c=a.clientHeight;a=a.scrollWidth>=a.clientWidth;var d=this._attributionTextOverflowed!==a;this._attributionTextOverflowed=a;d&&(b=!0);this._isOpen&&(a=c<this._prevSourceNodeHeight,this._prevSourceNodeHeight=c,a&&(this._isOpen=!1,b=!0));b&&this.scheduleRender()};b.prototype._toggleState=function(){this._isInteractive()&&
(this._isOpen=!this._isOpen)};b.prototype._isInteractive=function(){return this._isOpen||this._attributionTextOverflowed};e.__decorate([k.property({dependsOn:["viewModel.items.length","itemDelimiter"],readOnly:!0}),d.renderable()],b.prototype,"attributionText",null);e.__decorate([k.property()],b.prototype,"iconClass",void 0);e.__decorate([k.property(),d.renderable()],b.prototype,"itemDelimiter",void 0);e.__decorate([k.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],b.prototype,
"label",void 0);e.__decorate([k.property(),d.renderable(),d.messageBundle("esri/widgets/Attribution/t9n/Attribution")],b.prototype,"messages",void 0);e.__decorate([k.aliasOf("viewModel.view")],b.prototype,"view",void 0);e.__decorate([k.property({type:c}),d.renderable(["state","view.size"])],b.prototype,"viewModel",void 0);e.__decorate([d.accessibleHandler()],b.prototype,"_toggleState",null);return b=e.__decorate([k.subclass("esri.widgets.Attribution")],b)}(b)})},"esri/widgets/Attribution/AttributionViewModel":function(){define("require exports tslib ../../geometry ../../core/arrayUtils ../../core/asyncUtils ../../core/Collection ../../core/HandleOwner ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/support/contains ../../geometry/support/webMercatorUtils".split(" "),
function(p,a,e,m,k,b,c,d,n,l,g,f){function h(a,b){return a.length!==b.length||a.some(function(a,c){return a.text!==b[c].text})}function v(a,b,c){c&&b&&(k.find(a,function(a){return a.layerView===b&&a.text===c})||a.push({text:c,layerView:b}))}var q=[];return function(a){function d(b){var d=a.call(this,b)||this;d.clear=function(){d._fetchedAttributionData.clear();d._pendingAttributions.clear();d.handles.remove("suspension");d.notifyChange("state")};d._pendingAttributions=new Set;d._fetchedAttributionData=
new Map;d.items=new c;d.view=null;d._allLayerViewsChange=function(a){d.handles.remove("suspension");var b=d.get("view.allLayerViews");b&&d.handles.add(b.map(function(a){return a.watch(["suspended","attributionVisible"],d._updateAttributionItems)}),"suspension");a&&a.removed&&a.removed.forEach(function(a){d._pendingAttributions.delete(a);d._fetchedAttributionData.delete(a)});d._updateAttributionItems()};d._updateAttributionItems=function(){var a=d.get("view.allLayerViews");q.length=0;a?(a.forEach(function(a){if(!a.suspended&&
a.get("layer.attributionVisible")){var b=a.layer;if(b&&"copyright"in b&&"function"===typeof b.originOf&&"user"===b.originOf("copyright"))v(q,a,b.copyright);else if(b.hasAttributionData)if(d._fetchedAttributionData.has(a)){var c=d._fetchedAttributionData.get(a);c&&v(q,a,d._getDynamicAttribution(c,d.view,b))}else d._fetchAttributionData(a);else(c=b.get("portalItem.accessInformation"))?v(q,a,c):v(q,a,b.copyright)}}),h(d.items,q)&&(d.items.removeAll(),d.items.addMany(q)),q.length=0,d.notifyChange("state")):
d.clear()};d.handles.add([n.on(d,"view.allLayerViews","change",d._allLayerViewsChange,d._allLayerViewsChange,d.clear),n.whenTrue(d,"view.stationary",function(){return d._updateAttributionItems()})]);return d}e.__extends(d,a);d.prototype.destroy=function(){this.view=null;this._fetchedAttributionData.clear();this._pendingAttributions.clear();this.items.removeAll()};Object.defineProperty(d.prototype,"state",{get:function(){return this.get("view.ready")?0<this._pendingAttributions.size?"loading":"ready":
"disabled"},enumerable:!1,configurable:!0});d.prototype._fetchAttributionData=function(a){return e.__awaiter(this,void 0,void 0,function(){var c,d;return e.__generator(this,function(e){switch(e.label){case 0:if(this._pendingAttributions.has(a))return[2];this._pendingAttributions.add(a);return[4,b.result(a.layer.fetchAttributionData())];case 1:return c=e.sent(),this._pendingAttributions.has(a)&&(d=c.ok?this._createContributionIndex(c.value,"bing-maps"===a.layer.type):null,this._pendingAttributions.delete(a),
this._fetchedAttributionData.set(a,d)),this._updateAttributionItems(),[2]}})})};d.prototype._createContributionIndex=function(a,b){a=a.contributors;var c={};if(!a)return c;for(var d=0;d<a.length;d++){var e=a[d],g=e.coverageAreas;if(!g)return;for(var h=0;h<g.length;h++)for(var l=g[h],k=l.bbox,n=l.zoomMin-(b&&l.zoomMin?1:0),p=l.zoomMax-(b&&l.zoomMax?1:0),l={extent:f.geographicToWebMercator({xmin:k[1],ymin:k[0],xmax:k[3],ymax:k[2],spatialReference:m.SpatialReference.WGS84}),attribution:e.attribution||
"",score:null!=l.score?l.score:100,id:d};n<=p;n++)c[n]=c[n]||[],c[n].push(l)}c.maxKey=Math.max.apply(null,Object.keys(c));return c};d.prototype._getDynamicAttribution=function(a,b,c){var d=b.extent;c=c.tileInfo.scaleToZoom(b.scale);c=Math.min(a.maxKey,Math.round(c));if(!d||null==c||-1>=c)return"";a=a[c];var e=f.project(d.center.clone().normalize(),b.spatialReference),h={};return a?a.filter(function(a){var b=!h[a.id]&&e&&g.extentContainsPoint(a.extent,e);b&&(h[a.id]=!0);return b}).sort(function(a,
b){return b.score-a.score||a.objectId-b.objectId}).map(function(a){return a.attribution}).join(", "):""};e.__decorate([l.property({readOnly:!0,type:c})],d.prototype,"items",void 0);e.__decorate([l.property({dependsOn:["view.ready"],readOnly:!0})],d.prototype,"state",null);e.__decorate([l.property()],d.prototype,"view",void 0);return d=e.__decorate([l.subclass("esri.widgets.Attribution.AttributionViewModel")],d)}(d.HandleOwner)})},"esri/widgets/Compass":function(){define("require exports tslib ../core/accessorSupport/decorators ./Widget ./Compass/CompassViewModel ./support/widget".split(" "),
function(p,a,e,m,k,b,c){return function(a){function d(c,d){c=a.call(this,c,d)||this;c.goToOverride=null;c.iconClass="esri-icon-locate-circled";c.label=void 0;c.messages=null;c.view=null;c.viewModel=new b;return c}e.__extends(d,a);d.prototype.reset=function(){return this.viewModel.reset()};d.prototype.render=function(){var a,b,d=this.viewModel,e=d.orientation,d=d.state,k="disabled"===d,m="compass"===("rotation"===d?"rotation":"compass"),d=k?-1:0,k=(a={},a["esri-disabled"]=k,a["esri-interactive"]=!k,
a);a=(b={},b["esri-icon-compass"]=m,b["esri-icon-dial"]=!m,b);b=this.messages;return c.tsx("div",{bind:this,class:this.classes("esri-compass esri-widget--button esri-widget",k),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:d,"aria-label":b.reset,title:b.reset},c.tsx("span",{"aria-hidden":"true",class:this.classes("esri-compass__icon",a),styles:this._toRotationTransform(e)}),c.tsx("span",{class:"esri-icon-font-fallback-text"},b.reset))};d.prototype._reset=function(){this.viewModel.reset()};
d.prototype._toRotationTransform=function(a){return{transform:"rotateZ("+a.z+"deg)"}};e.__decorate([m.aliasOf("viewModel.goToOverride")],d.prototype,"goToOverride",void 0);e.__decorate([m.property()],d.prototype,"iconClass",void 0);e.__decorate([m.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],d.prototype,"label",void 0);e.__decorate([m.property(),c.renderable(),c.messageBundle("esri/widgets/Compass/t9n/Compass")],d.prototype,"messages",void 0);e.__decorate([m.aliasOf("viewModel.view")],
d.prototype,"view",void 0);e.__decorate([m.property({type:b}),c.renderable(["viewModel.orientation","viewModel.state"])],d.prototype,"viewModel",void 0);e.__decorate([c.accessibleHandler()],d.prototype,"_reset",null);return d=e.__decorate([m.subclass("esri.widgets.Compass")],d)}(k)})},"esri/widgets/Compass/CompassViewModel":function(){define("require exports tslib ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ../support/GoTo".split(" "),function(p,
a,e,m,k,b,c,d){return function(a){function d(b){b=a.call(this,b)||this;b._handles=new k;b.orientation={x:0,y:0,z:0};b.view=null;b._updateForCamera=b._updateForCamera.bind(b);b._updateForRotation=b._updateForRotation.bind(b);b._updateRotationWatcher=b._updateRotationWatcher.bind(b);b.view;return b}e.__extends(d,a);d.prototype.initialize=function(){this._handles.add(b.init(this,"view",this._updateRotationWatcher))};d.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};
Object.defineProperty(d.prototype,"canShowNorth",{get:function(){var a=this.get("view.spatialReference");return!(!a||!a.isWebMercator&&!a.isGeographic)},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"state",{get:function(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"},enumerable:!1,configurable:!0});d.prototype.reset=function(){if(this.get("view.ready")){var a={};"2d"===this.view.type?a.rotation=0:a.heading=0;this.callGoTo({target:a})}};d.prototype._updateForRotation=
function(a){void 0!==a&&null!==a&&(this.orientation={z:a})};d.prototype._updateForCamera=function(a){a&&(this.orientation={x:0,y:0,z:-a.heading})};d.prototype._updateRotationWatcher=function(a){this._handles.removeAll();a&&("2d"===a.type?this._handles.add(b.init(this,"view.rotation",this._updateForRotation)):this._handles.add(b.init(this,"view.camera",this._updateForCamera)))};e.__decorate([c.property({dependsOn:["view.spatialReference.isWebMercator","view.spatialReference.wkid"],readOnly:!0})],d.prototype,
"canShowNorth",null);e.__decorate([c.property()],d.prototype,"orientation",void 0);e.__decorate([c.property({dependsOn:["view.ready","canShowNorth"],readOnly:!0})],d.prototype,"state",null);e.__decorate([c.property()],d.prototype,"view",void 0);return d=e.__decorate([c.subclass("esri.widgets.CompassViewModel")],d)}(d.GoToMixin(m))})},"esri/widgets/NavigationToggle":function(){define("require exports tslib ../core/accessorSupport/decorators ./Widget ./NavigationToggle/NavigationToggleViewModel ./support/widget".split(" "),
function(p,a,e,m,k,b,c){return function(a){function d(c,d){c=a.call(this,c,d)||this;c.iconClass="esri-icon-pan2";c.label=void 0;c.messages=null;c.view=null;c.viewModel=new b;return c}e.__extends(d,a);Object.defineProperty(d.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!1,configurable:!0});d.prototype.toggle=function(){return this.viewModel.toggle()};d.prototype.render=function(){var a,b,d,e="disabled"===this.get("viewModel.state"),k="pan"===
this.get("viewModel.navigationMode"),m=(a={},a["esri-disabled"]=e,a["esri-navigation-toggle--horizontal"]="horizontal"===this.layout,a);a=(b={},b["esri-navigation-toggle__button--active"]=k,b);b=(d={},d["esri-navigation-toggle__button--active"]=!k,d);d=e?-1:0;e=this.messages.toggle;return c.tsx("div",{bind:this,class:this.classes("esri-navigation-toggle esri-widget",m),onclick:this._toggle,onkeydown:this._toggle,tabIndex:d,"aria-label":e,title:e},c.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button",
"esri-navigation-toggle__button--pan",a)},c.tsx("span",{class:"esri-icon-pan"})),c.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button","esri-navigation-toggle__button--rotate",b)},c.tsx("span",{class:"esri-icon-rotate"})))};d.prototype._toggle=function(){this.toggle()};e.__decorate([m.property()],d.prototype,"iconClass",void 0);e.__decorate([m.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],d.prototype,"label",void 0);e.__decorate([m.property({value:"vertical"}),
c.renderable()],d.prototype,"layout",null);e.__decorate([m.property(),c.renderable(),c.messageBundle("esri/widgets/NavigationToggle/t9n/NavigationToggle")],d.prototype,"messages",void 0);e.__decorate([m.aliasOf("viewModel.view"),c.renderable()],d.prototype,"view",void 0);e.__decorate([m.property({type:b}),c.renderable(["viewModel.state","viewModel.navigationMode"])],d.prototype,"viewModel",void 0);e.__decorate([c.accessibleHandler()],d.prototype,"_toggle",null);return d=e.__decorate([m.subclass("esri.widgets.NavigationToggle")],
d)}(k)})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("require exports tslib ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators".split(" "),function(p,a,e,m,k,b,c){return function(a){function d(b){b=a.call(this,b)||this;b._handles=new k;b.navigationMode="pan";b.view=null;return b}e.__extends(d,a);d.prototype.initialize=function(){this._handles.add(b.when(this,"view.inputManager",this._setNavigationMode.bind(this)))};d.prototype.destroy=
function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(d.prototype,"state",{get:function(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"},enumerable:!1,configurable:!0});d.prototype.toggle=function(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())};d.prototype._setNavigationMode=function(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"};
e.__decorate([c.property({dependsOn:["view.ready"],readOnly:!0})],d.prototype,"state",null);e.__decorate([c.property()],d.prototype,"navigationMode",void 0);e.__decorate([c.property()],d.prototype,"view",void 0);return d=e.__decorate([c.subclass("esri.widgets.NavigationToggleViewModel")],d)}(m)})},"esri/widgets/Zoom":function(){define("require exports tslib ../core/accessorSupport/decorators ./Widget ./support/widget ./Zoom/IconButton ./Zoom/ZoomViewModel".split(" "),function(p,a,e,m,k,b,c,d){return function(a){function l(b,
c){b=a.call(this,b,c)||this;b.iconClass="esri-icon-zoom-in-magnifying-glass";b.label=void 0;b.messages=null;b.view=null;b.viewModel=new d;return b}e.__extends(l,a);l.prototype.initialize=function(){this._zoomInButton=new c({action:this.zoomIn.bind(this),iconClass:"esri-icon-plus"});this._zoomOutButton=new c({action:this.zoomOut.bind(this),iconClass:"esri-icon-minus"})};l.prototype.destroy=function(){this._zoomInButton.destroy();this._zoomOutButton.destroy();this._zoomOutButton=this._zoomInButton=
null};Object.defineProperty(l.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!1,configurable:!0});l.prototype.render=function(){var a,c=this.viewModel,d=(a={},a["esri-zoom--horizontal"]="horizontal"===this.layout,a);this._zoomInButton.enabled="ready"===c.state&&c.canZoomIn;this._zoomOutButton.enabled="ready"===c.state&&c.canZoomOut;this._zoomInButton.title=this.messages.zoomIn;this._zoomOutButton.title=this.messages.zoomOut;return b.tsx("div",
{class:this.classes("esri-zoom esri-widget",d)},this._zoomInButton.render(),this._zoomOutButton.render())};l.prototype.zoomIn=function(){return this.viewModel.zoomIn()};l.prototype.zoomOut=function(){return this.viewModel.zoomOut()};e.__decorate([m.property()],l.prototype,"iconClass",void 0);e.__decorate([m.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],l.prototype,"label",void 0);e.__decorate([m.property({value:"vertical"}),b.renderable()],l.prototype,"layout",null);e.__decorate([m.property(),
b.renderable(),b.messageBundle("esri/widgets/Zoom/t9n/Zoom")],l.prototype,"messages",void 0);e.__decorate([m.aliasOf("viewModel.view"),b.renderable()],l.prototype,"view",void 0);e.__decorate([m.property({type:d}),b.renderable(["viewModel.canZoomIn","viewModel.canZoomOut","viewModel.state"])],l.prototype,"viewModel",void 0);return l=e.__decorate([m.subclass("esri.widgets.Zoom")],l)}(k)})},"esri/widgets/Zoom/IconButton":function(){define("require exports tslib ../../core/accessorSupport/decorators ../Widget ../support/widget".split(" "),
function(p,a,e,m,k,b){return function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.enabled=!0;b.iconClass="";b.title="";return b}e.__extends(c,a);c.prototype.render=function(){var a,c,d=this.enabled?0:-1,e=(a={},a["esri-disabled"]=!this.enabled,a["esri-interactive"]=this.enabled,a);a=(c={},c[this.iconClass]=!!this.iconClass,c);return b.tsx("div",{bind:this,class:this.classes("esri-widget--button esri-widget",e),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",
tabIndex:d,title:this.title},b.tsx("span",{"aria-hidden":"true",role:"presentation",class:this.classes("esri-icon",a)}),b.tsx("span",{class:"esri-icon-font-fallback-text"},this.title))};c.prototype._triggerAction=function(){this.action.call(this)};e.__decorate([m.property()],c.prototype,"action",void 0);e.__decorate([m.property(),b.renderable()],c.prototype,"enabled",void 0);e.__decorate([m.property(),b.renderable()],c.prototype,"iconClass",void 0);e.__decorate([m.property(),b.renderable()],c.prototype,
"title",void 0);e.__decorate([b.accessibleHandler()],c.prototype,"_triggerAction",null);return c=e.__decorate([m.subclass("esri.widgets.IconButton")],c)}(k)})},"esri/widgets/Zoom/ZoomViewModel":function(){define("require exports tslib ../../core/Accessor ../../core/promiseUtils ../../core/accessorSupport/decorators ./ZoomConditions2D ./ZoomConditions3D".split(" "),function(p,a,e,m,k,b,c,d){return function(a){function l(b){b=a.call(this,b)||this;b.canZoomIn=!1;b.canZoomOut=!1;return b}e.__extends(l,
a);l.prototype.destroy=function(){this.view=null};Object.defineProperty(l.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!1,configurable:!0});Object.defineProperty(l.prototype,"view",{set:function(a){a?"2d"===a.type?this._zoomConditions=new c({view:a}):"3d"===a.type&&(this._zoomConditions=new d({view:a})):this._zoomConditions=null;this._set("view",a)},enumerable:!1,configurable:!0});l.prototype.zoomIn=function(){if(this.canZoomIn){var a=this.view;"2d"===
a.type?a.mapViewNavigation.zoomIn():k.ignoreAbortErrors(a.goTo({zoomFactor:2}))}};l.prototype.zoomOut=function(){if(this.canZoomOut){var a=this.view;"2d"===a.type?a.mapViewNavigation.zoomOut():k.ignoreAbortErrors(a.goTo({zoomFactor:.5}))}};e.__decorate([b.property()],l.prototype,"_zoomConditions",void 0);e.__decorate([b.property({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],l.prototype,"canZoomIn",void 0);e.__decorate([b.property({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],l.prototype,
"canZoomOut",void 0);e.__decorate([b.property({dependsOn:["view.ready"],readOnly:!0})],l.prototype,"state",null);e.__decorate([b.property()],l.prototype,"view",null);return l=e.__decorate([b.subclass("esri.widgets.Zoom.ZoomViewModel")],l)}(m)})},"esri/widgets/Zoom/ZoomConditions2D":function(){define(["require","exports","tslib","../../core/Accessor","../../core/accessorSupport/decorators"],function(p,a,e,m,k){return function(a){function b(){return null!==a&&a.apply(this,arguments)||this}e.__extends(b,
a);Object.defineProperty(b.prototype,"canZoomIn",{get:function(){if(!this.get("view.ready"))return!1;var a=this.get("view.animation.target.scale")||this.get("view.scale"),b=this.get("view.constraints.effectiveMaxScale");return 0===b||a>b},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"canZoomOut",{get:function(){if(!this.get("view.ready"))return!1;var a=this.get("view.animation.target.scale")||this.get("view.scale"),b=this.get("view.constraints.effectiveMinScale");return 0===b||
a<b},enumerable:!1,configurable:!0});e.__decorate([k.property({dependsOn:["view.ready","view.scale","view.animation.target.scale","view.constraints.effectiveMaxScale"],readOnly:!0})],b.prototype,"canZoomIn",null);e.__decorate([k.property({dependsOn:["view.ready","view.scale","view.animation.target.scale","view.constraints.effectiveMinScale"],readOnly:!0})],b.prototype,"canZoomOut",null);e.__decorate([k.property()],b.prototype,"view",void 0);return b=e.__decorate([k.subclass("esri.widgets.Zoom.ZoomConditions2D")],
b)}(m)})},"esri/widgets/Zoom/ZoomConditions3D":function(){define(["require","exports","tslib","../../core/Accessor","../../core/accessorSupport/decorators"],function(p,a,e,m,k){return function(a){function b(){return null!==a&&a.apply(this,arguments)||this}e.__extends(b,a);Object.defineProperty(b.prototype,"canZoomIn",{get:function(){return!!this.get("view.ready")},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"canZoomOut",{get:function(){return!!this.get("view.ready")},enumerable:!1,
configurable:!0});e.__decorate([k.property({dependsOn:["view.ready"],readOnly:!0})],b.prototype,"canZoomIn",null);e.__decorate([k.property({dependsOn:["view.ready"],readOnly:!0})],b.prototype,"canZoomOut",null);e.__decorate([k.property()],b.prototype,"view",void 0);return b=e.__decorate([k.subclass("esri.widgets.Zoom.ZoomConditions3D")],b)}(m)})},"esri/webmap/background/ColorBackground":function(){define("require exports tslib ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators".split(" "),
function(p,a,e,m,k,b,c){return function(a){function d(b){b=a.call(this,b)||this;b.color=new m([0,0,0,1]);return b}e.__extends(d,a);l=d;d.prototype.clone=function(){return new l(b.clone({color:this.color}))};var l;e.__decorate([c.property({type:m,json:{write:!0}})],d.prototype,"color",void 0);return d=l=e.__decorate([c.subclass("esri.webmap.background.ColorBackground")],d)}(k.JSONSupport)})},"*noref":1}});
define("require exports tslib ../Graphic ../core/Collection ../core/CollectionFlattener ../core/Error ../core/has ../core/Logger ../core/maybe ../core/promiseUtils ../core/screenUtils ../core/watchUtils ../core/workers ../core/accessorSupport/decorators ./BreakpointsOwner ./DOMContainer ./Magnifier ./MapViewBase ./2d/input/MapViewInputManager ./2d/support/HighlightOptions ./support/screenshotUtils ./support/WebGLRequirements ./ui/2d/DefaultUI2D ../webmap/background/ColorBackground @dojo/framework/shim/Promise".split(" "),function(p,
a,e,m,k,b,c,d,n,l,g,f,h,v,q,C,r,t,u,y,D,x,w,A,B){function I(){return e.__awaiter(this,void 0,void 0,function(){var a,b,c,d,f,g,h;return e.__generator(this,function(e){switch(e.label){case 0:return[4,Promise.all([new Promise(function(a,b){p(["./webgl"],a,b)}),new Promise(function(a,b){p(["./2d/mapViewDeps"],a,b)})])];case 1:return a=e.sent(),b=a[1],c=b.GraphicsView2D,d=b.LabelManager,f=b.MapViewNavigation,g=b.MagnifierView2D,h=b.Stage,N=c,E=d,R=f,L=g,z=h,[2]}})})}function G(a,b,c){a&&(Array.isArray(a)||
k.isCollection(a)?0!==a.length&&a.forEach(function(a){return G(a,b,c)}):a instanceof m?b.add(a):c.add(a))}var H=n.getLogger("esri.views.MapView"),z,N,E,R,L;return function(a){function k(c){c=a.call(this,c)||this;c._magnifierView=null;c._stage=null;c._resolveWhenReady=[];c.rootLayerViews=new b({root:c,rootCollectionNames:["basemapView.baseLayerViews","layerViews","basemapView.referenceLayerViews"],getChildrenFunction:function(a){return null}});c.graphicsView=null;c.highlightOptions=new D;c.magnifier=
new t;c.inputManager=new y({view:c});c.mapViewNavigation=null;c.supersampleScreenhotsEnabled=!0;c.ui=new A;c.rendering=!1;v.initialize();return c}e.__extends(k,a);k.prototype.destroy=function(){this.rootLayerViews.destroy();this.inputManager.destroy();this._set("inputManager",null)};Object.defineProperty(k.prototype,"background",{get:function(){return this.get("map.initialViewProperties.background")||null},set:function(a){void 0===a?this._clearOverride("background"):this._override("background",a)},
enumerable:!1,configurable:!0});Object.defineProperty(k.prototype,"textureManager",{get:function(){return this._stage.painter.textureManager},enumerable:!1,configurable:!0});Object.defineProperty(k.prototype,"navigating",{get:function(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)},enumerable:!1,configurable:!0});k.prototype.toMap=function(b){f.isSupportedScreenPointEvent(b)&&(b=f.createScreenPointFromSupportedEvent(this,b));return a.prototype.toMap.call(this,b)};k.prototype.hitTest=
function(a,b){var c=f.isSupportedScreenPointEvent(a)?f.createScreenPointFromSupportedEvent(this,a):a;if(!this.ready||isNaN(c.x)||isNaN(c.y))return g.resolve({screenPoint:c,results:[]});var d=this.toMap(c);a=[this.graphicsView];a.push.apply(a,this.allLayerViews.toArray().reverse());var e=new Set,h=new Set,k=new Set,l=new Set;b&&(G(b&&b.include,e,k),G(b&&b.exclude,h,l));return g.all(a.map(function(a){return!a||!a.hitTest||0<k.size&&!a.layer||0<k.size&&a.layer&&!k.has(a.layer)||0<l.size&&a.layer&&l.has(a.layer)?
null:a.hitTest(c.x,c.y)})).then(function(a){return{screenPoint:c,results:a.filter(function(a){return null!=a&&(0<e.size?e.has(a):!0)&&(0<h.size?!h.has(a):!0)}).map(function(a){return{mapPoint:d,graphic:a}})}})};k.prototype.takeScreenshot=function(a){return this.ready?this._stage.takeScreenshot(x.toRenderSettings(a,this),this.allLayerViews):g.reject("Map view cannot be used before it is ready")};k.prototype.on=function(b,c,d,e){return(d=this.inputManager&&this.viewEvents.on(b,c,d,e))?d:a.prototype.on.call(this,
b,c)};k.prototype.hasEventListener=function(b){return a.prototype.hasEventListener.call(this,b)||this.viewEvents.hasHandler(b)};k.prototype.whenLayerView=function(b){return a.prototype.whenLayerView.call(this,b)};k.prototype.graphicChanged=function(a){this.graphicsView&&this.graphicsView.graphicUpdateHandler(a)};k.prototype.whenReady=function(){var a=this;return g.create(function(b){a.ready?b(a):a._resolveWhenReady.push(b)})};k.prototype.forceDOMReadyCycle=function(){this.forceReadyCycle()};k.prototype.validate=
function(){var a=w.check({checkMajorWebPerformanceCaveat:!1});d("safari")&&9>d("safari")&&(a=new c("mapview:browser-not-supported","This browser is not supported by MapView (Safari \x3c 9)",{type:"safari",requiredVersion:9,detectedVersion:d("safari")}));return l.isSome(a)?(H.warn("#validate()",a.message),g.reject(a)):I()};k.prototype._startup=function(){var b=this;this.timeline.begin("MapView Startup");a.prototype._startup.call(this);this.graphics.owner=this;var c=new z(this.surface,{canvas:this.renderCanvas,
supersampleScreenshots:this.supersampleScreenhotsEnabled,contextOptions:{deactivatedWebGLExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline}),d=new N({view:this,graphics:this.graphics,requestUpdateCallback:function(){return b.requestUpdate()}}),e=new R({view:this,animationManager:this.animationManager}),f=new E({view:this});this._magnifierView=new L;this._magnifierView.magnifier=this.magnifier;this._stage=
c;this.frameTask.graphicsView=d;this._set("graphicsView",d);this._set("mapViewNavigation",e);this._set("labelManager",f);this.handles.add([this.rootLayerViews.on("change",function(){return b._updateStageChildren()}),c.on("post-render",function(){return b._set("rendering",c.renderRequested)}),c.on("will-render",function(){return b._set("rendering",c.renderRequested)}),c.on("webgl-error",function(a){return b.fatalError=a.error}),h.init(this,"stationary",function(a){return c.stationary=a},!0),h.init(this,
"state.id",function(){return c.state=b.state},!0),h.init(this,"background",function(a){c.background=a;b._magnifierView.background=a},!0),h.init(this,"magnifier",function(a){return b._magnifierView.magnifier=a},!0),h.init(this,"renderingOptions",function(a){return c.renderingOptions=a},!0),h.init(this,"highlightOptions",function(){return c.highlightOptions=b.highlightOptions},!0)],"map-view");c.state=this.state;this._updateStageChildren();d=this._resolveWhenReady;this._resolveWhenReady=[];d.forEach(function(a){return a(b)});
this.timeline.end("MapView Startup")};k.prototype._teardown=function(){this.handles.remove("map-view");this.layerViewManager.clear();this.labelManager.destroy();this._magnifierView.destroy();this._stage.destroy();this.graphicsView.destroy();this.mapViewNavigation.destroy();this._stage=null;this._set("graphicsView",null);this._magnifierView=null;this._set("labelManager",null);this._set("mapViewNavigation",null);this.graphics.owner=null;a.prototype._teardown.call(this)};k.prototype._updateStageChildren=
function(){var a=this;this._stage.removeAllChildren();this.rootLayerViews.forEach(function(b){a._stage.addChild(b.container)});this._stage.addChild(this.graphicsView.container);this._stage.addChild(this._magnifierView)};e.__decorate([q.property({type:B,dependsOn:["map.initialViewProperties?.background"]})],k.prototype,"background",null);e.__decorate([q.property()],k.prototype,"graphicsView",void 0);e.__decorate([q.property({type:D})],k.prototype,"highlightOptions",void 0);e.__decorate([q.property({type:t})],
k.prototype,"magnifier",void 0);e.__decorate([q.property({readOnly:!0})],k.prototype,"inputManager",void 0);e.__decorate([q.property({readOnly:!0})],k.prototype,"textureManager",null);e.__decorate([q.property({readOnly:!0})],k.prototype,"mapViewNavigation",void 0);e.__decorate([q.property({dependsOn:["mapViewNavigation.interacting"],type:Boolean})],k.prototype,"navigating",null);e.__decorate([q.property({type:Boolean,constructOnly:!0})],k.prototype,"supersampleScreenhotsEnabled",void 0);e.__decorate([q.property({type:A})],
k.prototype,"ui",void 0);e.__decorate([q.property({readOnly:!0})],k.prototype,"rendering",void 0);e.__decorate([q.property({constructOnly:!0})],k.prototype,"renderCanvas",void 0);e.__decorate([q.property({constructOnly:!0})],k.prototype,"deactivatedWebGLExtensions",void 0);e.__decorate([q.property({constructOnly:!0})],k.prototype,"debugWebGLExtensions",void 0);return k=e.__decorate([q.subclass("esri.views.MapView")],k)}(C.BreakpointsOwner(r.DOMContainer(u)))});