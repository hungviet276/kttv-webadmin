// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../ViewState ../../engine/Container ../../engine/webgl/enums".split(" "),function(g,d,k,l,m,n){Object.defineProperty(d,"__esModule",{value:!0});d.DisplayGL=void 0;g=function(d){function e(a){var b=d.call(this)||this;b.layerView=a;b._childrenRenderParameters={context:null,pixelRatio:1,state:new l,stationary:!0,painter:null};b._name=b.constructor.name;b.requestRender=b.requestRender.bind(b);return b}k.__extends(e,d);e.prototype.doRender=function(a){if(a.drawPhase===
n.WGLDrawPhase.MAP){var b=window.devicePixelRatio,c=a.state,d=a.stationary,f=a.context,e=a.painter,g=a.profiler,h=this._childrenRenderParameters;h.context=f.gl;h.state.copy(c);h.state.pixelRatio=b;h.stationary=d;h.painter=e;a=this.createRenderParams(a);e.beforeRenderLayer(a,this.clips?255:0,a.globalOpacity);g.recordContainerStart(this._name);b=f.getBoundFramebufferObject();c=f.getViewport();f.resetState();f.bindFramebuffer(b);f.setViewport(c.x,c.y,c.width,c.height);this.layerView._renderTarget.framebufferObject=
b.glName;this.layerView._renderTarget.viewport[0]=c.x;this.layerView._renderTarget.viewport[1]=c.y;this.layerView._renderTarget.viewport[2]=c.width;this.layerView._renderTarget.viewport[3]=c.height;this.layerView.render(h);f.enforceState();e.compositeLayer(a,a.globalOpacity);g.recordContainerEnd()}};e.prototype.createRenderParams=function(a){return k.__assign(k.__assign({},a),{blendMode:this.blendMode,globalOpacity:a.globalOpacity*this.opacity,inFadeTransition:this.inFadeTransition})};return e}(m.Container);
d.DisplayGL=g;d.default=g});