// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../core/shaderLibrary/Slice.glsl ../core/shaderLibrary/attributes/VerticalOffset.glsl ../core/shaderLibrary/hud/HUD.glsl ../core/shaderLibrary/hud/HUDOcclusionPass.glsl ../core/shaderLibrary/output/OutputHighlight.glsl ../core/shaderLibrary/shading/VisualVariables.glsl ../core/shaderLibrary/util/ScreenSizePerspective.glsl ../core/shaderLibrary/util/View.glsl ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/DefaultVertexAttributeLocations ./HUDMaterial.glsl ./HUDMaterial.glsl ../../../webgl/Program ../../../webgl/renderState ../../../webgl/renderState @dojo/framework/shim/Promise".split(" "),
function(n,f,d,p,q,l,r,t,u,v,k,w,g,b,x,y,z,A,m,e){Object.defineProperty(f,"__esModule",{value:!0});f.HUDMaterialTechniqueConfiguration=f.HUDMaterialTechnique=void 0;g=function(b){function a(){return null!==b&&b.apply(this,arguments)||this}d.__extends(a,b);a.prototype.initializeProgram=function(h){var b=a.shader.get(),c=this.configuration,b=b.build({output:c.output,viewingMode:h.viewingMode,occlusionTestEnabled:c.occlusionTestEnabled,signedDistanceFieldEnabled:c.sdf,slicePlaneEnabled:c.slicePlaneEnabled,
sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!0,debugDrawBorder:c.debugDrawBorder,binaryHighlightOcclusionEnabled:c.binaryHighlightOcclusion,screenCenterOffsetUnitsEnabled:c.screenCenterOffsetUnitsEnabled,screenSizePerspectiveEnabled:c.screenSizePerspective,verticalOffsetEnabled:c.verticalOffset,vvSize:c.vvSize,vvColor:c.vvColor,vvInstancingEnabled:!1});return new A(h.rctx,b.generateSource("vertex"),b.generateSource("fragment"),x.Default3D)};a.prototype.bindPass=function(h,a,c){k.View.bindProjectionMatrix(this.program,
c.camera.projectionMatrix);this.program.setUniform1f("cameraGroundRelative",c.camera.aboveGround?1:-1);this.program.setUniform1f("perDistancePixelRatio",Math.tan(c.camera.fovY/2)/(c.camera.fullViewport[2]/2));this.program.setUniformMatrix4fv("viewNormal",c.camera.viewInverseTransposeMatrix);this.program.setUniform1f("polygonOffset",a.shaderPolygonOffset);q.VerticalOffset.bindUniforms(this.program,a,c);v.ScreenSizePerspective.bindUniforms(this.program,a);this.program.setUniform1f("pixelRatio",c.camera.pixelRatio||
1);k.View.bindViewport(this.program,c);6===this.configuration.output?r.HUDOcclusion.bindUniforms(this.program):(l.HUD.bindUniforms(this.program,c),z.HUDMaterial.bindUniforms(this.program,a,c.camera.pixelRatio||1),u.VisualVariables.bindUniforms(this.program,a),this.configuration.occlusionTestEnabled&&l.HUD.bindVisibilityTexture(h,this.program,c));4===this.configuration.output&&t.OutputHighlight.bindOutputHighlight(h,this.program,c)};a.prototype.bindDraw=function(a){k.View.bindView(this.program,a);
k.View.bindCamPosition(this.program,a.origin,a.camera.viewInverseTransposeMatrix);p.Slice.bindUniformsWithOrigin(this.program,this.configuration,a)};a.prototype.initializePipeline=function(){return 4===this.configuration.output?e.makePipelineState({blending:m.separateBlendingParams(1,1,771,771),polygonOffset:this.configuration.polygonOffsetEnabled&&{factor:0,units:-4},depthTest:{func:513},colorWrite:e.defaultColorWriteParams}):6===this.configuration.output?e.makePipelineState({depthTest:{func:515},
depthWrite:e.defaultDepthWriteParams,colorWrite:e.defaultColorWriteParams}):e.makePipelineState({blending:m.simpleBlendingParams(1,771),polygonOffset:this.configuration.polygonOffsetEnabled&&{factor:0,units:-4},depthTest:{func:this.configuration.depthEnabled?515:519},depthWrite:this.configuration.depthEnabled?e.defaultDepthWriteParams:void 0,colorWrite:e.defaultColorWriteParams})};Object.defineProperty(a.prototype,"primitiveType",{get:function(){return 6===this.configuration.output?0:4},enumerable:!1,
configurable:!0});a.shader=new w.ReloadableShaderModule(y,function(){return new Promise(function(a,b){n(["./HUDMaterial.glsl"],a,b)})});return a}(g.ShaderTechnique);f.HUDMaterialTechnique=g;g=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;a.output=0;a.occlusionTestEnabled=!0;a.sdf=!1;a.vvSize=!1;a.vvColor=!1;a.verticalOffset=!1;a.screenSizePerspective=!1;a.screenCenterOffsetUnitsEnabled=0;a.debugDrawBorder=!0;a.binaryHighlightOcclusion=!0;a.slicePlaneEnabled=!1;a.polygonOffsetEnabled=
!1;a.depthEnabled=!0;return a}d.__extends(a,e);d.__decorate([b.parameter({count:7})],a.prototype,"output",void 0);d.__decorate([b.parameter()],a.prototype,"occlusionTestEnabled",void 0);d.__decorate([b.parameter()],a.prototype,"sdf",void 0);d.__decorate([b.parameter()],a.prototype,"vvSize",void 0);d.__decorate([b.parameter()],a.prototype,"vvColor",void 0);d.__decorate([b.parameter()],a.prototype,"verticalOffset",void 0);d.__decorate([b.parameter()],a.prototype,"screenSizePerspective",void 0);d.__decorate([b.parameter({count:2})],
a.prototype,"screenCenterOffsetUnitsEnabled",void 0);d.__decorate([b.parameter()],a.prototype,"debugDrawBorder",void 0);d.__decorate([b.parameter()],a.prototype,"binaryHighlightOcclusion",void 0);d.__decorate([b.parameter()],a.prototype,"slicePlaneEnabled",void 0);d.__decorate([b.parameter()],a.prototype,"polygonOffsetEnabled",void 0);d.__decorate([b.parameter()],a.prototype,"depthEnabled",void 0);return a}(b.ShaderTechniqueConfiguration);f.HUDMaterialTechniqueConfiguration=g});