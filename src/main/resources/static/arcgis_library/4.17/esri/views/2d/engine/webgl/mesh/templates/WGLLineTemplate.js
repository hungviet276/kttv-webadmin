// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../../../../../core/Logger ../../../../../../core/screenUtils ../../color ../../definitions ../../number ../../Utils ../../materialKey/MaterialKey ./util ./WGLBaseLineTemplate ./WGLMeshTemplate".split(" "),function(h,w,A,B,r,x,t,u,y,C,D,E,F){Object.defineProperty(w,"__esModule",{value:!0});var G=B.getLogger("esri.views.2d.engine.webgl.WGLLineTemplate");h=function(h){function f(a,b,f,d,k,p,m,n,q,g,e,l,v,r,t,u){var c=h.call(this)||this;a=C.LineMaterialKey.load(a);b&&
(a.sdf=b.sdf,a.pattern=!0,a.textureBinding=b.textureBinding);c._capType=d;c._joinType=k;c._miterLimitCosine=D.getLimitCosine(p);c.tessellationProperties._fillColor=m;c.tessellationProperties._tl=n;c.tessellationProperties._br=q;c._hasPattern=g;c._isDashed=e;c._joinOnUTurn=t;c._isColorLocked=l;c._zOrder=r;c.effects=u;c._materialKey=a.data;c.tessellationProperties._bitset=l?1:0;c.tessellationProperties._halfWidth=.5*f;c.tessellationProperties._halfReferenceWidth=.5*v;c._initializeTessellator(!1);return c}
A.__extends(f,h);f.fromCIMLine=function(a,b,z){var d=a.color,k=a.scaleFactor||1,p=a.isDashed,m=a.cap;p&&1===m&&(m=2);var n=a.join,k=r.pt2px(a.width)*k,q=r.pt2px(a.referenceWidth),g=r.pt2px(a.miterLimit),d=d&&x.premultiplyAlphaRGBA(d)||0;if(!b)return new f(a.materialKey,b,k,m,n,g,d,0,0,!1,p,a.colorLocked,q,a.zOrder,z,a.effects);var e=b.rect,l=e.x+t.SPRITE_PADDING,v=e.y+t.SPRITE_PADDING,e=l+b.width,h=v+b.height,l=u.i1616to32(l,v),e=u.i1616to32(e,h);return new f(a.materialKey,b,k,m,n,g,d,l,e,!0,p,a.colorLocked,
q,a.zOrder,z,a.effects)};f.fromSimpleLine=function(a,b,h){var d=a.color,k="esriSLSSolid"!==a.style&&"esriSLSNull"!==a.style,p=y.getCapType(a.cap||"round",k),m=y.getJoinType(a.join||"round"),d=d&&"esriSLSNull"!==a.style&&x.premultiplyAlphaRGBAArray(d)||0;"esriSLSNull"===a.style&&(d=0);var n=r.pt2px(a.width),q=a.miterLimit;if(!b)return new f(a.materialKey,b,n,p,m,q,d,0,0,!1,k,!1,n,0,h,null);var g=b.rect,e=g.x+t.SPRITE_PADDING,l=g.y+t.SPRITE_PADDING,g=e+b.width,v=l+b.height,e=u.i1616to32(e,l),g=u.i1616to32(g,
v);return new f(a.materialKey,b,n,p,m,q,d,e,g,!0,k,!1,n,0,h,null)};f.fromPictureLineSymbol=function(a,b,f,d){G.error("PictureLineSymbol support does not exist!");return null};return f}(E.default(F.default));w.default=h});