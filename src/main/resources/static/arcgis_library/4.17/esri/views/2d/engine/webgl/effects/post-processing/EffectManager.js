// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define(["require","exports","tslib","@dojo/framework/shim/Promise"],function(d,e,b){Object.defineProperty(e,"__esModule",{value:!0});e.EffectManager=void 0;var g={colorize:function(){return b.__awaiter(void 0,void 0,void 0,function(){return b.__generator(this,function(a){switch(a.label){case 0:return[4,new Promise(function(c,a){d(["./Colorize"],c,a)})];case 1:return[2,new (a.sent().Colorize)]}})})},blur:function(){return b.__awaiter(void 0,void 0,void 0,function(){return b.__generator(this,function(a){switch(a.label){case 0:return[4,
new Promise(function(c,a){d(["./Blur"],c,a)})];case 1:return[2,new (a.sent().Blur)]}})})},bloom:function(){return b.__awaiter(void 0,void 0,void 0,function(){return b.__generator(this,function(a){switch(a.label){case 0:return[4,new Promise(function(c,a){d(["./Bloom"],c,a)})];case 1:return[2,new (a.sent().Bloom)]}})})},opacity:function(){return b.__awaiter(void 0,void 0,void 0,function(){return b.__generator(this,function(a){switch(a.label){case 0:return[4,new Promise(function(c,a){d(["./Opacity"],
c,a)})];case 1:return[2,new (a.sent().Opacity)]}})})},"drop-shadow":function(){return b.__awaiter(void 0,void 0,void 0,function(){return b.__generator(this,function(a){switch(a.label){case 0:return[4,new Promise(function(c,a){d(["./DropShadow"],c,a)})];case 1:return[2,new (a.sent().DropShadow)]}})})}},h=function(){function a(a){this._requestRender=a;this._effectMap=new Map;this._effectPromiseMap=new Map}a.prototype.dispose=function(){this._requestRender&&(this._requestRender=null);this._effectMap.forEach(function(a){return a.dispose()});
this._effectMap.clear();this._effectPromiseMap.clear()};a.prototype.getPostProcessingEffects=function(a){if(!a||0===a.length)return[];for(var c=[],b=0;b<a.length;b++){var d=a[b],e=this._getPostProcessingEffectName(d),f=this._effectMap.get(e);f?c.push({postProcessingEffect:f,effect:d}):this._enablePostProcessingEffect(e)}return c};a.prototype._getPostProcessingEffectName=function(a){return"colorMatrix"in a?"colorize":"radial-blur"===a.type?"blur":a.type};a.prototype._enablePostProcessingEffect=function(a){return b.__awaiter(this,
void 0,void 0,function(){var c;return b.__generator(this,function(b){switch(b.label){case 0:return[4,this._loadPostProcessingEffect(a)];case 1:c=b.sent();if(!this._requestRender)return[2];this._effectMap.set(a,c);this._requestRender.requestRender();return[2]}})})};a.prototype._loadPostProcessingEffect=function(a){return b.__awaiter(this,void 0,void 0,function(){return b.__generator(this,function(b){this._effectPromiseMap.has(a)||this._effectPromiseMap.set(a,g[a]());return[2,this._effectPromiseMap.get(a)]})})};
return a}();e.EffectManager=h});