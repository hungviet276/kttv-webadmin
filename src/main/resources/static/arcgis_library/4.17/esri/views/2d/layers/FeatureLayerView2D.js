// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
require({cache:{"esri/AggregateGraphic":function(){define(["require","exports","tslib","./Graphic","./core/accessorSupport/decorators"],function(q,c,a,p,f){return function(h){function b(){return null!==h&&h.apply(this,arguments)||this}a.__extends(b,h);k=b;b.prototype.getEffectivePopupTemplate=function(a){void 0===a&&(a=!1);return this.popupTemplate?this.popupTemplate:(a=this.sourceLayer&&this.sourceLayer.featureReduction)&&"popupTemplate"in a&&a.popupEnabled?a.popupTemplate:null};b.prototype.getObjectId=
function(){return this.objectId};b.prototype.clone=function(){return new k(a.__assign({objectId:this.objectId},this.cloneProperties()))};var k;a.__decorate([f.property({type:Number,json:{read:!0}})],b.prototype,"objectId",void 0);return b=k=a.__decorate([f.subclass("esri.AggregateGraphic")],b)}(p)})},"esri/renderers/support/clickToleranceUtils":function(){define(["require","exports"],function(q,c){function a(a,b){return b?"xoffset"in b&&b.xoffset?Math.max(a,Math.abs(b.xoffset)):"yoffset"in b&&b.yoffset?
Math.max(a,Math.abs(b.yoffset||0)):a:a}function p(a,b){if("number"===typeof a)return a;if(a&&a.stops&&a.stops.length){a=a.stops;for(var k=b=0,d=0;d<a.length;d++){var e=a[d].size;"number"===typeof e&&(b+=e,k++)}return b/k}return b}function f(a,b){if(!b)return a;b=b.filter(function(a){return"size"===a.type}).map(function(b){var e=b.minSize;return(p(b.maxSize,a)+p(e,a))/2});var k=0,d=b.length;if(0===d)return a;for(var e=0;e<d;e++)k+=b[e];return Math.max(Math.floor(k/d),a)}Object.defineProperty(c,"__esModule",
{value:!0});c.calculateTolerance=void 0;c.calculateTolerance=function(h){var b=h&&h.renderer;h="touch"===(h&&h.event&&h.event.pointerType)?9:6;if(!b)return h;h="visualVariables"in b?f(h,b.visualVariables):h;if("simple"===b.type)return a(h,b.symbol);if("unique-value"===b.type){var k=h;b.uniqueValueInfos.forEach(function(b){k=a(k,b.symbol)});return k}if("class-breaks"===b.type){var d=h;b.classBreakInfos.forEach(function(b){d=a(d,b.symbol)});return d}return h}})},"esri/views/2d/layers/LayerView2D":function(){define("require exports tslib ../../../core/Collection ../../../core/collectionUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators ../engine/Container ../../layers/support/ClipArea ../../layers/support/ClipRect ../../layers/support/Geometry ../../layers/support/Path".split(" "),
function(q,c,a,p,f,h,b,k,d,e,g,r){Object.defineProperty(c,"__esModule",{value:!0});c.LayerView2DMixin=void 0;var t=p.ofType({key:"type",base:d,typeMap:{rect:e,path:r,geometry:g}});c.LayerView2DMixin=function(e){return function(e){function g(){var a=null!==e&&e.apply(this,arguments)||this;a.clips=new t;a.moving=!1;a.attached=!1;a.lastUpdateId=-1;a.updateRequested=!1;return a}a.__extends(g,e);g.prototype.initialize=function(){var a=this,b;this.container||(this.container=new k.Container);this.container.fadeTransitionEnabled=
!0;this.container.opacity=0;this.container.clips=this.clips;this.handles.add([h.init(this,"suspended",function(b){a.container&&(a.container.visible=!b);a.view&&!b&&a.updateRequested&&a.view.requestUpdate()},!0),h.init(this,["layer.opacity","container"],function(){var b,e;a.container&&(a.container.opacity=null!==(e=null===(b=a.layer)||void 0===b?void 0:b.opacity)&&void 0!==e?e:1)},!0),h.init(this,["layer.blendMode"],function(b){a.container&&(a.container.blendMode=b)},!0),h.init(this,["layer.effect"],
function(b){a.container&&(a.container.effect=b)},!0),this.clips.on("change",function(){a.container.clips=a.clips;a.notifyChange("clips")})]);(null===(b=this.view)||void 0===b?0:b.whenLayerView)?this.view.whenLayerView(this.layer).then(function(b){b!==a||a.attached||a.destroyed||(a.attach(),a.requestUpdate(),a.attached=!0)},function(){}):this.when().then(function(){a.attached||a.destroyed||(a.attach(),a.requestUpdate(),a.attached=!0)},function(){})};g.prototype.destroy=function(){this.attached&&(this.detach(),
this.attached=!1);this.handles.remove("initialize");this.updateRequested=!1};Object.defineProperty(g.prototype,"updating",{get:function(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())},enumerable:!1,configurable:!0});g.prototype.isVisibleAtScale=function(a){var b=!0,e=this.layer,g=e.minScale,e=e.maxScale;if(null!=g&&null!=e){var b=!g,d=!e;!b&&a<=g&&(b=!0);!d&&a>=e&&(d=!0);b=b&&d}return b};g.prototype.requestUpdate=function(){this.updateRequested||(this.updateRequested=
!0,this.suspended||this.view.requestUpdate())};g.prototype.processUpdate=function(a){this.isFulfilled()&&!this.isResolved()?this.updateRequested=!1:(this._set("updateParameters",a),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(a)))};g.prototype.isUpdating=function(){return!1};g.prototype.isRendering=function(){return!1};g.prototype.canResume=function(){return e.prototype.canResume.call(this)?this.isVisibleAtScale(this.view.scale):!1};a.__decorate([b.property({type:t,
set:function(a){a=f.referenceSetter(a,this._get("clips"),t);this._set("clips",a)}})],g.prototype,"clips",void 0);a.__decorate([b.property()],g.prototype,"moving",void 0);a.__decorate([b.property()],g.prototype,"attached",void 0);a.__decorate([b.property()],g.prototype,"container",void 0);a.__decorate([b.property({dependsOn:["view.scale","layer.minScale","layer.maxScale"]})],g.prototype,"suspended",void 0);a.__decorate([b.property({readOnly:!0})],g.prototype,"updateParameters",void 0);a.__decorate([b.property()],
g.prototype,"updateRequested",void 0);a.__decorate([b.property({dependsOn:["attached","updateRequested","suspended"]})],g.prototype,"updating",null);a.__decorate([b.property()],g.prototype,"view",void 0);return g=a.__decorate([b.subclass("esri.views.2d.layers.LayerView2D")],g)}(e)}})},"esri/views/layers/support/ClipArea":function(){define(["require","exports","tslib","../../../core/JSONSupport","../../../core/accessorSupport/decorators"],function(q,c,a,p,f){return function(h){function b(){return null!==
h&&h.apply(this,arguments)||this}a.__extends(b,h);return b=a.__decorate([f.subclass("esri.views.layers.support.ClipArea")],b)}(p.JSONSupport)})},"esri/views/layers/support/ClipRect":function(){define(["require","exports","tslib","../../../core/accessorSupport/decorators","./ClipArea"],function(q,c,a,p,f){return function(h){function b(){var a=null!==h&&h.apply(this,arguments)||this;a.type="rect";a.left=null;a.right=null;a.top=null;a.bottom=null;return a}a.__extends(b,h);k=b;b.prototype.clone=function(){return new k({left:this.left,
right:this.right,top:this.top,bottom:this.bottom})};Object.defineProperty(b.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!1,configurable:!0});var k;a.__decorate([p.property({type:[Number,String],json:{write:!0}})],b.prototype,"left",void 0);a.__decorate([p.property({type:[Number,String],json:{write:!0}})],b.prototype,"right",void 0);a.__decorate([p.property({type:[Number,String],json:{write:!0}})],b.prototype,"top",void 0);a.__decorate([p.property({type:[Number,
String],json:{write:!0}})],b.prototype,"bottom",void 0);a.__decorate([p.property({readOnly:!0,dependsOn:["left","right","top","bottom"]})],b.prototype,"version",null);return b=k=a.__decorate([p.subclass("esri.views.layers.support.ClipRect")],b)}(f)})},"esri/views/layers/support/Geometry":function(){define("require exports tslib ../../../geometry ../../../core/accessorSupport/decorators ../../../geometry/Geometry ../../../geometry/support/jsonUtils ./ClipArea".split(" "),function(q,c,a,p,f,h,b,k){var d=
{base:h,key:"type",typeMap:{extent:p.Extent,polygon:p.Polygon}};return function(e){function g(){var a=null!==e&&e.apply(this,arguments)||this;a.type="geometry";a.geometry=null;return a}a.__extends(g,e);k=g;Object.defineProperty(g.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!1,configurable:!0});g.prototype.clone=function(){return new k({geometry:this.geometry.clone()})};var k;a.__decorate([f.property({types:d,json:{read:b.fromJSON,write:!0}})],g.prototype,"geometry",
void 0);a.__decorate([f.property({readOnly:!0,dependsOn:["geometry"]})],g.prototype,"version",null);return g=k=a.__decorate([f.subclass("esri.views.layers.support.Geometry")],g)}(k)})},"esri/views/layers/support/Path":function(){define(["require","exports","tslib","../../../core/accessorSupport/decorators","./ClipArea"],function(q,c,a,p,f){return function(h){function b(){var a=null!==h&&h.apply(this,arguments)||this;a.type="path";a.path=[];return a}a.__extends(b,h);Object.defineProperty(b.prototype,
"version",{get:function(){return(this._get("version")||0)+1},enumerable:!1,configurable:!0});a.__decorate([p.property({type:[[[Number]]],json:{write:!0}})],b.prototype,"path",void 0);a.__decorate([p.property({readOnly:!0,dependsOn:["path"]})],b.prototype,"version",null);return b=a.__decorate([p.subclass("esri.views.layers.support.Path")],b)}(f)})},"esri/views/2d/layers/features/tileRenderers":function(){define(["require","exports","tslib","@dojo/framework/shim/Promise"],function(q,c,a){Object.defineProperty(c,
"__esModule",{value:!0});c.createOrReuseTileRenderer=void 0;c.createOrReuseTileRenderer=function(c,f){return a.__awaiter(this,void 0,void 0,function(){var h,b,k;return a.__generator(this,function(a){switch(a.label){case 0:if(!c)return[2,null];h=c.type;switch(h){case "class-breaks":return[3,1];case "simple":return[3,1];case "unique-value":return[3,1];case "dot-density":return[3,1];case "dictionary":return[3,1];case "heatmap":return[3,3]}return[3,5];case 1:return[4,new Promise(function(a,b){q(["./tileRenderers/SymbolTileRenderer"],
a,b)})];case 2:return b=a.sent(),[2,new b.default(f)];case 3:return[4,new Promise(function(a,b){q(["./tileRenderers/HeatmapTileRenderer"],a,b)})];case 4:return k=a.sent(),[2,new k.default(f)];case 5:return[2]}})})}})},"esri/views/2d/layers/features/support/pixelBuffering":function(){define("require exports tslib ../../../../../core/promiseUtils ../../../../../core/screenUtils ../../../../../symbols/cim/CIMSymbolHelper ../../../../../symbols/cim/Rect ../../../engine/webgl/definitions ../../graphics/graphicsUtils".split(" "),
function(q,c,a,p,f,h,b,k,d){function e(a){if(!("visualVariables"in a&&a.hasVisualVariables("size")))return 0;a=a.getVisualVariablesForType("size");if(!a[0])return 0;a=a[0];if("stops"===a.transformationType)return a.stops.map(function(a){return a.size}).reduce(u,0);if("clamped-linear"===a.transformationType)return"number"===typeof a.maxSize?a.maxSize:a.maxSize.stops.map(function(a){return a.size}).reduce(u,0);if("real-world-size"===a.transformationType)return 30}function g(a,b){return null==a?b:a}
function r(b,e){return a.__awaiter(this,void 0,void 0,function(){var k,E,t,f,u,c,w,p,A,z,q,J,C,G;return a.__generator(this,function(y){switch(y.label){case 0:if("simple-marker"===b.type)return k=Math.max(g(b.size,12),e),[2,m(b)+.707*k];if("picture-marker"===b.type)return E=Math.max(g(b.height,12),e),t=g(b.width,12)*(E/g(b.height,12)),f=t/2,u=E/2,[2,m(b)+Math.sqrt(f*f+u*u)];if("text"===b.type){if(y=b.text&&b.text.length){for(var H=[],F=0;F<y;F++)H.push(a.__assign(a.__assign({},x),{code:b.text.charCodeAt(F)}));
c={glyphMosaicItems:H}}else c={glyphMosaicItems:[x]};d.getTextSymbolSize(n,b.toJSON(),c);w=Math.abs(n[0]);p=Math.abs(n[1]);A=n[2];z=n[3];return[2,Math.max(w,p)+Math.max(A,z)]}if("simple-line"===b.type)return q=b,J=Math.max(g(q.width,.75),e)/2,q.marker?[2,Math.max(6*q.width,2*e)]:[2,J];if("simple-fill"===b.type||"picture-fill"===b.type)return[2,Math.max(null==b.outline?0:g(b.outline.width,0),e)/2];if("cim"===b.type)return(C=h.CIMSymbolHelper.getEnvelope(b.data))?[2,Math.sqrt(C.width*C.width+C.height*
C.height)]:[2,0];if("web-style"!==b.type)return[3,2];G=r;return[4,b.fetchCIMSymbol()];case 1:return[2,G.apply(void 0,[y.sent(),e])];case 2:return[2,0]}})})}function t(b,e){return a.__awaiter(this,void 0,void 0,function(){var g,d;return a.__generator(this,function(a){switch(a.label){case 0:if(!(b.type in w))return[2,0];d=(g=Math).min;return[4,r(b,e)];case 1:return[2,d.apply(g,[a.sent(),75])]}})})}function m(a){var b=g(a.xoffset,0);a=g(a.yoffset,0);return Math.sqrt(b*b+a*a)}function u(a,b){return Math.max(a,
b)}Object.defineProperty(c,"__esModule",{value:!0});c.computePxBuffer=void 0;var w={"simple-marker":1,"picture-marker":1,text:0,"simple-line":0,"simple-fill":0,"picture-fill":0,cim:1,"web-style":1};c.computePxBuffer=function(b,g,d){return a.__awaiter(this,void 0,void 0,function(){var k,h,r,m,n,c,w;return a.__generator(this,function(a){switch(a.label){case 0:if(!b||d&&"cluster"===d.type)return[2,0];if("heatmap"===b.type)return[2,Math.round(3*b.blurRadius)];if("dot-density"===b.type)return[2,0];if("dictionary"===
b.type)return"esriGeometryPoint"===g||"esriGeometryMultipoint"===g?[2,100]:[2,200];k=b.getSymbols();h=e(b);r=[];m=0;for(n=k;m<n.length;m++)c=n[m],r.push(t(c,h));return[4,p.all(r)];case 1:return w=a.sent(),[2,f.pt2px(w.reduce(u,0))]}})})};var n=[0,0,0,0],x={sdf:!0,code:99,metrics:k.AVERAGE_GLYPH_MOSAIC_ITEM.metrics,rect:new b.default(0,0,24,24),page:0,textureBinding:2}})},"esri/views/2d/layers/support/FeatureLayerProxy":function(){define("require exports tslib ../../../../core/Promise ../../../../core/promiseUtils ../../../../core/workers ../../../../core/accessorSupport/decorators".split(" "),
function(q,c,a,p,f,h,b){Object.defineProperty(c,"__esModule",{value:!0});q=function(k){function d(a){a=k.call(this,a)||this;a._startupResolver=f.createResolver();a.isReady=!1;return a}a.__extends(d,k);d.prototype.initialize=function(){this._controller=f.createAbortController();this.addResolvingPromise(this._startWorker(this._controller.signal))};d.prototype.destroy=function(){this._controller.abort();this._connection&&this._connection.close()};Object.defineProperty(d.prototype,"tileRenderer",{set:function(a){this.client.tileRenderer=
a},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"closed",{get:function(){return this._connection.closed},enumerable:!1,configurable:!0});d.prototype.startup=function(b,g,d){return a.__awaiter(this,void 0,void 0,function(){var e,k,h,r;return a.__generator(this,function(a){switch(a.label){case 0:return[4,this.when()];case 1:return a.sent(),e=this._controller.signal,k=Array.isArray(d.source)?{transferList:d.source,signal:e}:void 0,h=b.tileInfo.toJSON(),r={service:d,config:g,tileInfo:h},
[4,this._connection.invoke("startup",r,k)];case 2:return a.sent(),this._startupResolver.resolve(),this._set("isReady",!0),[2]}})})};d.prototype.updateTiles=function(b){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(a){switch(a.label){case 0:return[4,this._startupResolver.promise];case 1:return a.sent(),[2,f.ignoreAbortErrors(this._connection.invoke("updateTiles",b))]}})})};d.prototype.update=function(b,g){return a.__awaiter(this,void 0,void 0,function(){var e;
return a.__generator(this,function(a){switch(a.label){case 0:return e={config:b,pause:g},[4,this._startupResolver.promise];case 1:return a.sent(),[2,this._connection.invoke("update",e)]}})})};d.prototype.invalidate=function(b){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(a){switch(a.label){case 0:return[4,this._startupResolver.promise];case 1:return a.sent(),[2,this._connection.invoke("invalidate",b)]}})})};d.prototype.resume=function(){return a.__awaiter(this,
void 0,void 0,function(){return a.__generator(this,function(a){switch(a.label){case 0:return[4,this._startupResolver.promise];case 1:return a.sent(),[2,f.ignoreAbortErrors(this._connection.invoke("controller.resume"))]}})})};d.prototype.setHighlight=function(b){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(a){switch(a.label){case 0:return[4,this._startupResolver.promise];case 1:return a.sent(),[2,f.ignoreAbortErrors(this._connection.invoke("controller.setHighlight",
b))]}})})};d.prototype.refresh=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(a){switch(a.label){case 0:return[4,this._startupResolver.promise];case 1:return a.sent(),[2,f.ignoreAbortErrors(this._connection.invoke("controller.refresh"))]}})})};d.prototype.setViewState=function(b){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(a){switch(a.label){case 0:return[4,this._startupResolver.promise];case 1:return a.sent(),
[2,f.ignoreAbortErrors(this._connection.invoke("setViewState",b.toJSON()))]}})})};d.prototype.queryFeatures=function(b,g){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(a){switch(a.label){case 0:return[4,this._startupResolver.promise];case 1:return a.sent(),[2,this._connection.invoke("controller.queryFeatures",b.toJSON(),g)]}})})};d.prototype.queryObjectIds=function(b,g){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(a){switch(a.label){case 0:return[4,
this._startupResolver.promise];case 1:return a.sent(),[2,this._connection.invoke("controller.queryObjectIds",b.toJSON(),g)]}})})};d.prototype.queryFeatureCount=function(b,g){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(a){switch(a.label){case 0:return[4,this._startupResolver.promise];case 1:return a.sent(),[2,this._connection.invoke("controller.queryFeatureCount",b.toJSON(),g)]}})})};d.prototype.queryExtent=function(b,g){return a.__awaiter(this,void 0,void 0,
function(){return a.__generator(this,function(a){return[2,this._connection.invoke("controller.queryExtent",b.toJSON(),g)]})})};d.prototype.queryLatestObservations=function(b,g){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(a){switch(a.label){case 0:return[4,this._startupResolver.promise];case 1:return a.sent(),[2,this._connection.invoke("controller.queryLatestObservations",b.toJSON(),g)]}})})};d.prototype.queryStatistics=function(b){return a.__awaiter(this,void 0,
void 0,function(){return a.__generator(this,function(a){switch(a.label){case 0:return[4,this._startupResolver.promise];case 1:return a.sent(),[2,this._connection.invoke("controller.queryStatistics",b)]}})})};d.prototype.getObjectId=function(b){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(a){switch(a.label){case 0:return[4,this._startupResolver.promise];case 1:return a.sent(),[2,this._connection.invoke("controller.getObjectId",b)]}})})};d.prototype.getDisplayId=
function(b){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(a){switch(a.label){case 0:return[4,this._startupResolver.promise];case 1:return a.sent(),[2,this._connection.invoke("controller.getDisplayId",b)]}})})};d.prototype.getFeature=function(b){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(a){switch(a.label){case 0:return[4,this._startupResolver.promise];case 1:return a.sent(),[2,this._connection.invoke("controller.getFeature",
b)]}})})};d.prototype.getAggregate=function(b){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(a){switch(a.label){case 0:return[4,this._startupResolver.promise];case 1:return a.sent(),[2,this._connection.invoke("controller.getAggregate",b)]}})})};d.prototype.getAggregateValueRanges=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(a){switch(a.label){case 0:return[4,this._startupResolver.promise];case 1:return a.sent(),
[2,this._connection.invoke("controller.getAggregateValueRanges")]}})})};d.prototype.mapValidDisplayIds=function(b){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(a){switch(a.label){case 0:return[4,this._startupResolver.promise];case 1:return a.sent(),[2,this._connection.invoke("controller.mapValidDisplayIds",b)]}})})};d.prototype.onEdits=function(b){return a.__awaiter(this,void 0,void 0,function(){var e,d,k;return a.__generator(this,function(a){switch(a.label){case 0:return[4,
this._startupResolver.promise];case 1:return a.sent(),e=b.addedFeatures,d=b.deletedFeatures,k=b.updatedFeatures,[2,f.ignoreAbortErrors(this._connection.invoke("controller.onEdits",{addedFeatures:e,deletedFeatures:d,updatedFeatures:k}))]}})})};d.prototype.enableEvent=function(b,d){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(a){switch(a.label){case 0:return[4,this._startupResolver.promise];case 1:return a.sent(),[2,f.ignoreAbortErrors(this._connection.invoke("controller.enableEvent",
{name:b,value:d}))]}})})};d.prototype._startWorker=function(b){return a.__awaiter(this,void 0,void 0,function(){var d,e;return a.__generator(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),d=this,[4,h.open("Pipeline",{client:this.client,strategy:"dedicated",signal:b})];case 1:return d._connection=a.sent(),[3,3];case 2:return e=a.sent(),f.throwIfNotAbortError(e),[3,3];case 3:return[2]}})})};a.__decorate([b.property()],d.prototype,"isReady",void 0);a.__decorate([b.property()],d.prototype,
"client",void 0);a.__decorate([b.property()],d.prototype,"tileRenderer",null);return d=a.__decorate([b.subclass("esri.views.2d.layers.support.FeatureLayerProxy")],d)}(p.EsriPromise);c.default=q})},"esri/views/2d/tiling/TileManager":function(){define(["require","exports","../../../core/maybe","./TileCoverage","./TileKey"],function(q,c,a,p,f){Object.defineProperty(c,"__esModule",{value:!0});c.TileManager=void 0;q=function(){function h(a){this._tiles=new Map;this.buffer=0;this.acquireTile=a.acquireTile;
this.releaseTile=a.releaseTile;this.tileInfoView=a.tileInfoView;this.buffer=a.buffer}h.prototype.destroy=function(){};h.prototype.clear=function(){var a=this;this._tiles.forEach(function(b){return a._releaseTile(b)})};h.prototype.tileKeys=function(){var a=[];this._tiles.forEach(function(b,d){return a.push(d)});return a};h.prototype.update=function(a){var b=this;a=this.tileInfoView.getTileCoverage(a.state,this.buffer,"closest");for(var d=a.spans,e=a.lodInfo,g=e.level,h=[],c=[],m=new Set,u=new Set,
w=0;w<d.length;w++)for(var n=d[w],x=n.row,q=n.colTo,n=n.colFrom;n<=q;n++){var z=f.getId(g,x,e.normalizeCol(n),e.getWorldForColumn(n)),y=this._getOrAcquireTile(h,z);m.add(z);y.isReady?y.visible=!0:u.add(y.key)}u.forEach(function(a){return b._addPlaceholders(m,a)});this._tiles.forEach(function(a){m.has(a.key.id)||(c.push(a.key.id),b._releaseTile(a))});p.pool.release(a);return{hasMissingTiles:0<u.size,added:h,removed:c}};h.prototype._getOrAcquireTile=function(a,k){if(!this._tiles.has(k)){var b=this.acquireTile(new f(k));
a.push(k);this._tiles.set(k,b);b.visible=!1}return this._tiles.get(k)};h.prototype._getTile=function(a){return this._tiles.get(a)};h.prototype._releaseTile=function(a){this._tiles.delete(a.key.id);this.releaseTile(a)};h.prototype._addPlaceholders=function(a,k){var b=this._addPlaceholderChildren(a,k);1E-6>Math.abs(1-b)||this._addPlaceholderParent(a,k)||(this._getTile(k.id).visible=!0)};h.prototype._addPlaceholderChildren=function(a,k){var b=this,e=0;this._tiles.forEach(function(d){e+=b._addPlaceholderChild(a,
d,k)});return e};h.prototype._addPlaceholderChild=function(a,k,d){if(k.key.level<=d.level||!k.hasData||!d.contains(k.key))return 0;k.visible=!0;a.add(k.key.id);return 1/(1<<2*(k.key.level-d.level))};h.prototype._addPlaceholderParent=function(b,k){k=k.getParentKey();for(var d=0,e=null;a.isSome(k);){if(b.has(k.id))return!0;var g=this._getTile(k.id);if(null===g||void 0===g?0:g.isReady)return g.visible=!0,b.add(g.key.id),!0;(null===g||void 0===g?0:g.hasData)&&g.patchCount>d&&(d=g.patchCount,e=g);k=k.getParentKey()}return e?
(e.visible=!0,b.add(e.key.id),!0):!1};return h}();c.TileManager=q})},"esri/views/layers/FeatureLayerView":function(){define("require exports tslib ../../core/Error ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/SetUtils ../../core/watchUtils ../../core/accessorSupport/decorators ../../layers/support/commonProperties ../../layers/support/fieldUtils ../../support/arcadeOnDemand ../../tasks/support/Query ./support/FeatureEffect ./support/FeatureFilter ./support/popupUtils".split(" "),
function(q,c,a,p,f,h,b,k,d,e,g,r,t,m,u,w,n){Object.defineProperty(c,"__esModule",{value:!0});c.FeatureLayerView=void 0;var x=f.getLogger("esri.views.layers.FeatureLayerView");c.FeatureLayerView=function(c){return function(c){function f(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];a=c.apply(this,a)||this;a._updatingRequiredFieldsPromise=null;a.effect=null;a.filter=null;a.layer=null;a.requiredFields=[];a.view=null;return a}a.__extends(f,c);f.prototype.initialize=function(){var a=this;
d.init(this,"layer.renderer layer.labelingInfo layer.elevationInfo.featureExpressionInfo layer.displayField filter effect layer.timeInfo timeExtent".split(" "),function(){return a._handleRequiredFieldsChange()},!0)};Object.defineProperty(f.prototype,"availableFields",{get:function(){var b=this.layer,e=this.layer.fields,d=this.requiredFields;return"outFields"in b&&b.outFields?r.fixFields(e,a.__spreadArrays(r.unpackFieldNames(e,b.outFields),d)):r.fixFields(e,d)},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,
"maximumNumberOfFeatures",{get:function(){return 0},set:function(a){x.error("#maximumNumberOfFeatures\x3d","Setting maximum number of features is not supported")},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"maximumNumberOfFeaturesExceeded",{get:function(){return!1},enumerable:!1,configurable:!0});f.prototype.highlight=function(a,b){void 0===b&&(b={});throw Error("missing implementation");};f.prototype.createQuery=function(){var a={outFields:["*"],returnGeometry:!0,outSpatialReference:this.view.spatialReference},
a=h.isSome(this.filter)?this.filter.createQuery(a):new m(a);this.timeExtent&&(a.timeExtent=a.timeExtent?a.timeExtent.intersection(this.timeExtent):this.timeExtent.clone());return a};f.prototype.queryFeatures=function(a,b){throw Error("missing implementation");};f.prototype.queryObjectIds=function(a,b){throw Error("missing implementation");};f.prototype.queryFeatureCount=function(a,b){throw Error("missing implementation");};f.prototype.queryExtent=function(a,b){throw Error("missing implementation");
};f.prototype._loadArcadeModules=function(a){if(a.get("expressionInfos.length"))return t.loadArcade()};f.prototype._handleRequiredFieldsChange=function(){var a=this,b=this._updateRequiredFields();this._set("_updatingRequiredFieldsPromise",b);b.then(function(){a._updatingRequiredFieldsPromise===b&&a._set("_updatingRequiredFieldsPromise",null)})};f.prototype._updateRequiredFields=function(){return a.__awaiter(this,void 0,void 0,function(){var e,d,g,f,m,c,n,u,w,t,p,q,A,z,y;return a.__generator(this,
function(a){switch(a.label){case 0:if(!this.layer||!this.view)return[2];e="3d"===this.view.type;d=this;f=g=d.layer;m=f.fields;c=f.objectIdField;n=f.renderer;u=f.displayField;w=g.featureReduction;t=new Set;return[4,b.eachAlways([n?n.collectRequiredFields(t,m):null,r.collectLabelingFields(t,g),e?r.collectElevationFields(t,g):null,h.isSome(this.filter)?r.collectFilterFields(t,g,this.filter):null,this.effect?r.collectFilterFields(t,g,this.effect.filter):null,w?r.collectFeatureReductionFields(t,g,w):null])];
case 1:p=a.sent();g.timeInfo&&this.timeExtent&&r.collectFields(t,g.fields,[g.timeInfo.startField,g.timeInfo.endField]);q=0;for(A=p;q<A.length;q++)z=A[q],z.error&&x.error(z.error);r.collectField(t,m,c);e&&u&&r.collectField(t,m,u);y=k.valuesOfSet(t).sort();this._set("requiredFields",y);return[2]}})})};f.prototype.validateFetchPopupFeatures=function(a){var b=this.layer;if(!this.layer.popupEnabled)return new p("featurelayerview:fetchPopupFeatures","Popups are disabled",{layer:b});if(!n.getFetchPopupTemplate(this.layer,
a))return new p("featurelayerview:fetchPopupFeatures","Layer does not define a popup template",{layer:b})};f.prototype.fetchClientPopupFeatures=function(e){return a.__awaiter(this,void 0,void 0,function(){var d,g,k,f,m,c,t,u,w,p,x,q;return a.__generator(this,function(a){switch(a.label){case 0:d=h.isSome(e)?e.clientGraphics:null;if(!d||0===d.length)return[2,b.resolve([])];g=[];k=[];f=this.layer;m=n.getFetchPopupTemplate(f,e);return h.isSome(m)?[4,this._loadArcadeModules(m)]:[2,b.resolve([])];case 1:return t=
(c=a.sent())&&c.arcadeUtils.hasGeometryOperations(m),[4,this.createPopupQuery(e)];case 2:u=a.sent();w=r.unpackFieldNames(f.fields,u.outFields);p=0;for(x=d;p<x.length;p++)q=x[p],t||!r.featureHasFields(w,q)?k.push(q):g.push(q);if("stream"===f.type||0===k.length)return[2,b.resolve(g)];u.objectIds=k.map(function(a){return a.attributes[f.objectIdField]});return[2,f.queryFeatures(u).then(function(a){return g.concat(a.features)}).catch(function(){return k})]}})})};f.prototype.createPopupQuery=function(b){return a.__awaiter(this,
void 0,void 0,function(){var e,d,g,k,f,m,c,t;return a.__generator(this,function(a){switch(a.label){case 0:return e=this.layer,d=e.createQuery(),g=n.getFetchPopupTemplate(e,b),(f=h.isSome(g))?[4,this._loadArcadeModules(g)]:[3,2];case 1:f=a.sent(),a.label=2;case 2:return k=f,m=h.isSome(g)&&k&&k.arcadeUtils.hasGeometryOperations(g),c=!("point"!==e.geometryType&&!m),d.returnGeometry=c,d.returnZ=c,d.returnM=c,t=d,[4,n.getRequiredFields(this.layer,g)];case 3:return t.outFields=a.sent(),d.outSpatialReference=
this.view.spatialReference,[2,d]}})})};f.prototype.canResume=function(){var a;return!c.prototype.canResume.call(this)||(null===(a=this.timeExtent)||void 0===a?0:a.isEmpty)?!1:!0};a.__decorate([e.property()],f.prototype,"_updatingRequiredFieldsPromise",void 0);a.__decorate([e.property({readOnly:!0,dependsOn:["layer.outFields?","requiredFields"]})],f.prototype,"availableFields",null);a.__decorate([e.property({type:u})],f.prototype,"effect",void 0);a.__decorate([e.property({type:w})],f.prototype,"filter",
void 0);a.__decorate([e.property(g.combinedViewLayerTimeExtentProperty)],f.prototype,"timeExtent",void 0);a.__decorate([e.property()],f.prototype,"layer",void 0);a.__decorate([e.property({type:Number})],f.prototype,"maximumNumberOfFeatures",null);a.__decorate([e.property({readOnly:!0,type:Boolean})],f.prototype,"maximumNumberOfFeaturesExceeded",null);a.__decorate([e.property({readOnly:!0})],f.prototype,"requiredFields",void 0);a.__decorate([e.property({dependsOn:["timeExtent"]})],f.prototype,"suspended",
void 0);a.__decorate([e.property()],f.prototype,"view",void 0);return f=a.__decorate([e.subclass("esri.views.layers.FeatureLayerView")],f)}(c)}})},"esri/views/layers/support/FeatureEffect":function(){define("require exports tslib ../../../core/JSONSupport ../../../core/Logger ../../../core/maybe ../../../core/accessorSupport/decorators ./FeatureFilter ./ParsedFeatureEffect ./Transition".split(" "),function(q,c,a,p,f,h,b,k,d,e){var g=f.getLogger("esri.views.layers.support.FeatureEffect");return function(f){function c(){var a=
null!==f&&f.apply(this,arguments)||this;a.filter=null;a.includedEffect=null;a.excludedEffect=null;a.excludedLabelsVisible=!1;return a}a.__extends(c,f);m=c;Object.defineProperty(c.prototype,"insideEffect",{get:function(){g.warn("insideEffect is a temporary interface that will be removed. Use includedEffect instead");return this.includedEffect},set:function(a){g.warn("insideEffect is a temporary interface that will be removed. Use includedEffect instead");this.includedEffect=a},enumerable:!1,configurable:!0});
Object.defineProperty(c.prototype,"outsideEffect",{get:function(){g.warn("outsideEffect is a temporary interface that will be removed. Use excludedEffect instead");return this.excludedEffect},set:function(a){g.warn("outsideEffect is a temporary interface that will be removed. Use excludedEffect instead");this.excludedEffect=a},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"parsedIncludedEffect",{get:function(){return h.isSome(this.includedEffect)?"string"===typeof this.includedEffect?
d.ParsedFeatureEffect.fromString(this.includedEffect):new e({from:d.ParsedFeatureEffect.fromString(this.includedEffect.from),to:d.ParsedFeatureEffect.fromString(this.includedEffect.to),duration:this.includedEffect.duration}):null},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"parsedExcludedEffect",{get:function(){return h.isSome(this.excludedEffect)?"string"===typeof this.excludedEffect?d.ParsedFeatureEffect.fromString(this.excludedEffect):new e({from:d.ParsedFeatureEffect.fromString(this.excludedEffect.from),
to:d.ParsedFeatureEffect.fromString(this.excludedEffect.to),duration:this.excludedEffect.duration}):null},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"renderingHash",{get:function(){return this.excludedLabelsVisible+"-"+this.includedEffect+"-"+this.excludedEffect},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"done",{get:function(){return(!h.isSome(this.parsedIncludedEffect)||this.parsedIncludedEffect.done)&&(!h.isSome(this.parsedExcludedEffect)||this.parsedExcludedEffect.done)},
enumerable:!1,configurable:!0});c.prototype.clone=function(){return new m({filter:this.filter&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})};var m;a.__decorate([b.property({type:k,json:{write:!0}})],c.prototype,"filter",void 0);a.__decorate([b.property({type:String,json:{write:!0}})],c.prototype,"includedEffect",void 0);a.__decorate([b.property({type:String,json:{write:!0}})],c.prototype,"excludedEffect",
void 0);a.__decorate([b.property({type:Boolean,json:{write:!0}})],c.prototype,"excludedLabelsVisible",void 0);a.__decorate([b.property({dependsOn:["includedEffect"]})],c.prototype,"parsedIncludedEffect",null);a.__decorate([b.property({dependsOn:["excludedEffect"]})],c.prototype,"parsedExcludedEffect",null);a.__decorate([b.property({dependsOn:["includedEffect","excludedEffect"]})],c.prototype,"renderingHash",null);return c=m=a.__decorate([b.subclass("esri.views.layers.support.FeatureEffect")],c)}(p.JSONSupport)})},
"esri/views/layers/support/FeatureFilter":function(){define("require exports tslib ../../../geometry ../../../TimeExtent ../../../core/jsonMap ../../../core/JSONSupport ../../../core/lang ../../../core/SetUtils ../../../core/accessorSupport/decorators ../../../geometry/support/jsonUtils ../../../tasks/support/Query".split(" "),function(q,c,a,p,f,h,b,k,d,e,g,r){var t=new h.default({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",
esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),m=new h.default({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});return function(b){function c(a){a=b.call(this,
a)||this;a.where=null;a.geometry=null;a.spatialRelationship="intersects";a.hiddenIds=new Set;a.distance=void 0;a.objectIds=null;a.units=null;a.timeExtent=null;a.enabled=!1;return a}a.__extends(c,b);h=c;c.prototype.writeWhere=function(a,b){b.where=a||"1\x3d1"};c.prototype.enable=function(){this._set("enabled",!0)};c.prototype.createQuery=function(b){void 0===b&&(b={});var e=this.where,d=this.spatialRelationship,g=this.timeExtent,c=this.objectIds,f=this.units,h=this.distance;return new r(a.__assign({geometry:k.clone(this.geometry),
objectIds:k.clone(c),spatialRelationship:d,timeExtent:k.clone(g),where:e,units:f,distance:h},b))};c.prototype.clone=function(){var a=this.where,b=this.geometry,e=this.spatialRelationship,d=this.hiddenIds,g=this.timeExtent,c=this.objectIds,f=this.units,m=this.distance,n=new Set;d.forEach(function(a){return n.add(a)});return new h({geometry:k.clone(b),hiddenIds:n,objectIds:k.clone(c),spatialRelationship:e,timeExtent:k.clone(g),where:a,units:f,distance:m})};var h;a.__decorate([e.property({type:String})],
c.prototype,"where",void 0);a.__decorate([e.writer("where")],c.prototype,"writeWhere",null);a.__decorate([e.property({types:p.geometryTypes,json:{read:g.fromJSON,write:!0}})],c.prototype,"geometry",void 0);a.__decorate([e.property({type:String,json:{read:{source:"spatialRel",reader:t.read},write:{target:"spatialRel",writer:t.write}}})],c.prototype,"spatialRelationship",void 0);a.__decorate([e.property({json:{write:function(a,b,e){return b[e]=d.valuesOfSet(a)},read:function(a){return d.SetFromValues(a)}}})],
c.prototype,"hiddenIds",void 0);a.__decorate([e.property({type:Number,json:{write:{overridePolicy:function(a){return{enabled:0<a}}}}})],c.prototype,"distance",void 0);a.__decorate([e.property({type:[Number],json:{write:!0}})],c.prototype,"objectIds",void 0);a.__decorate([e.property({type:String,json:{read:m.read,write:{writer:m.write,overridePolicy:function(a){return{enabled:a&&0<this.distance}}}}})],c.prototype,"units",void 0);a.__decorate([e.property({type:f,json:{write:!0}})],c.prototype,"timeExtent",
void 0);a.__decorate([e.property({readOnly:!0})],c.prototype,"enabled",void 0);return c=h=a.__decorate([e.subclass("esri.views.layers.support.FeatureFilter")],c)}(b.JSONSupport)})},"esri/views/layers/support/ParsedFeatureEffect":function(){define("require exports tslib ../../../core/Error ../../../core/JSONSupport ../../../core/Logger ../../../core/maybe ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/mat4 ../../../core/libs/gl-matrix-2/mat4f32 ../effects/parser".split(" "),
function(q,c,a,p,f,h,b,k,d,e,g){Object.defineProperty(c,"__esModule",{value:!0});c.ParsedFeatureEffect=void 0;var r=h.getLogger("esri.views.layers.support.ParsedFeatureEffect");q=function(c){function f(){var a=null!==c&&c.apply(this,arguments)||this;a.done=!0;return a}a.__extends(f,c);h=f;f.fromString=function(a){var b=[],e=null,d=g.parse(a);if(d.error)r.error(new p("invalid-type","Encountered an error when parsing css",d.error));else for(a=0,d=d.effects;a<d.length;a++){var f=d[a];"opacity"===f.type?
e=f:"colorMatrix"in f&&b.push(f)}return new h({transforms:b,opacity:e})};f.prototype.getOpacity=function(){return b.isSome(this.opacity)?this.opacity.amount:1};f.prototype.getColorMatrix=function(){return(this.transforms||[]).map(function(a){return{colorMatrix:e.mat4f32.clone(a.colorMatrix)}}).reverse().reduce(function(a,b){return d.mat4.multiply(a,a,b.colorMatrix)},e.mat4f32.create())};f.prototype.clone=function(){return new h({transforms:this.transforms&&this.transforms.map(function(b){return a.__assign({},
b)})})};var h;a.__decorate([k.property()],f.prototype,"opacity",void 0);a.__decorate([k.property()],f.prototype,"transforms",void 0);return f=h=a.__decorate([k.subclass("esri.views.layers.support.ParsedFeatureEffect")],f)}(f.JSONSupport);c.ParsedFeatureEffect=q})},"esri/views/layers/support/Transition":function(){define("require exports tslib ../../../core/Accessor ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/mat4".split(" "),function(q,c,a,p,f,h){return function(b){function c(){var a=
null!==b&&b.apply(this,arguments)||this;a.from=null;a.to=null;a.duration=4E3;a.repeat=!0;a.done=!1;return a}a.__extends(c,b);d=c;c.prototype.getColorMatrix=function(){this.done=!1;if(null==this._lastTime)this._currentStep=0,this._lastTime=Date.now();else{var a=this._lastTime,b=Date.now();this._currentStep+=b-a;2147483647<=this._currentStep&&(this._currentStep=0);this._lastTime=b}var a=this._currentStep%this.duration/(this.duration/2),a=1>=a?a:2-a,b=this.from.getColorMatrix(),d=this.to.getColorMatrix();
h.mat4.multiplyScalar(b,b,1-a);h.mat4.multiplyScalar(d,d,a);!this.repeat&&this._currentStep>=this.duration&&(this.done=!0);return h.mat4.add(b,b,d)};c.prototype.getOpacity=function(){throw Error("No getOpacity definition for Transition");};c.prototype.clone=function(){var a=new d({from:this.from.clone(),to:this.to.clone(),duration:this.duration});a._lastTime=this._lastTime;a._currentStep=this._currentStep;return a};var d;a.__decorate([f.property()],c.prototype,"from",void 0);a.__decorate([f.property()],
c.prototype,"to",void 0);a.__decorate([f.property({type:Number})],c.prototype,"duration",void 0);a.__decorate([f.property({type:Boolean})],c.prototype,"repeat",void 0);return c=d=a.__decorate([f.subclass("esri.views.layers.support.Transition")],c)}(p)})},"esri/views/layers/support/popupUtils":function(){define("require exports tslib @dojo/framework/shim/array ../../../core/maybe ../../../layers/support/fieldUtils".split(" "),function(q,c,a,p,f,h){Object.defineProperty(c,"__esModule",{value:!0});c.getFetchPopupTemplate=
c.getRequiredFields=void 0;c.getRequiredFields=function(b,c){void 0===c&&(c=b.popupTemplate);return a.__awaiter(this,void 0,void 0,function(){var d,e,g,k,t,m,u,q,n;return a.__generator(this,function(r){switch(r.label){case 0:return f.isSome(c)?[4,c.getRequiredFields(b.fields)]:[2,[]];case 1:return d=r.sent(),e=c.lastEditInfoEnabled,g=b.objectIdField,k=b.typeIdField,t=b.globalIdField,m=b.relationships,p.includes(d,"*")?[2,["*"]]:e?[4,h.getFeatureEditFields(b)]:[3,3];case 2:return q=r.sent(),[3,4];
case 3:q=[],r.label=4;case 4:return u=q,n=h.fixFields(b.fields,a.__spreadArrays(d,u)),k&&n.push(k),n&&g&&h.hasField(b.fields,g)&&-1===n.indexOf(g)&&n.push(g),n&&t&&h.hasField(b.fields,t)&&-1===n.indexOf(t)&&n.push(t),m&&m.forEach(function(a){a=a.keyField;n&&a&&h.hasField(b.fields,a)&&-1===n.indexOf(a)&&n.push(a)}),[2,n]}})})};c.getFetchPopupTemplate=function(a,c){return a.popupTemplate?a.popupTemplate:f.isSome(c)&&c.defaultPopupTemplateEnabled&&f.isSome(a.defaultPopupTemplate)?a.defaultPopupTemplate:
null}})},"esri/views/support/drapedUtils":function(){define("require exports ../../geometry ../../core/maybe ../../core/unitUtils ../../renderers/support/clickToleranceUtils".split(" "),function(q,c,a,p,f,h){function b(b,c,g,h){void 0===h&&(h=new a.Extent);var d;if("2d"===g.type)d=c*g.resolution;else if("3d"===g.type){var e=g.basemapTerrain,k=e.overlayManager,k=k?k.overlayPixelSizeInMapUnits(b):1;d=e&&!e.spatialReference.equals(g.spatialReference)?f.getMetersPerUnitForSR(e.spatialReference)/f.getMetersPerUnitForSR(g.spatialReference):
c*k}c=b.x-d;e=b.y-d;k=b.x+d;b=b.y+d;g=g.spatialReference;h.xmin=Math.min(c,k);h.ymin=Math.min(e,b);h.xmax=Math.max(c,k);h.ymax=Math.max(e,b);h.spatialReference=g;return h}Object.defineProperty(c,"__esModule",{value:!0});c.intersectsDrapedGeometry=c.createQueryGeometry=void 0;c.createQueryGeometry=b;c.intersectsDrapedGeometry=function(a,c,g){a=g.toMap(a);if(p.isNone(a))return null;var d=h.calculateTolerance();return b(a,d,g,k).intersects(c)?a:null};var k=new a.Extent})},"*noref":1}});
define("require exports tslib ../../../AggregateGraphic ../../../geometry ../../../Graphic ../../../core/arrayUtils ../../../core/Collection ../../../core/Error ../../../core/has ../../../core/lang ../../../core/Logger ../../../core/MapUtils ../../../core/maybe ../../../core/promiseUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators ../../../layers/graphics/data/projectionSupport ../../../renderers/support/clickToleranceUtils ../../../tasks/support/FeatureSet ../../../tasks/support/Query ../engine/webgl/definitions ./LayerView2D ./features/schemaUtils ./features/tileRenderers ./features/support/pixelBuffering ./support/clusterUtils ./support/FeatureLayerProxy ./support/util ../tiling/TileManager ../../layers/FeatureLayerView ../../layers/LayerView ../../layers/RefreshableLayerView ../../../views/layers/support/FeatureFilter ../../layers/support/FeatureEffect ../../support/drapedUtils".split(" "),function(q,
c,a,p,f,h,b,k,d,e,g,r,t,m,u,w,n,x,A,z,y,E,H,F,L,M,I,N,K,O,P,J,C,G,Q,R){function S(a){return a&&"openPorts"in a}var B=r.getLogger("esri.views.2d.layers.FeatureLayerView2D");return function(c){function l(){var b=null!==c&&c.apply(this,arguments)||this;b._pipelineIsUpdating=!0;b._updatingPipelineConfig=!1;b._onGoingEdits=0;b._isRefreshing=!1;b._viewStateId=-1;b._visibilityOverrides=new Set;b._effect=null;b._highlightIds=new Map;b._lastPixelBuffer=0;b.filter=null;b.doRefresh=u.debounce(function(){return a.__awaiter(b,
void 0,void 0,function(){var b;return a.__generator(this,function(a){switch(a.label){case 0:return this._onGoingEdits=0,this.isUpdating()?[4,w.whenFalseOnce(this,"updating")]:[3,2];case 1:a.sent(),a.label=2;case 2:return a.trys.push([2,4,,5]),this._set("_isRefreshing",!0),this._lockGPUUploads(),[4,this._proxy.refresh()];case 3:return a.sent(),this._unlockGPUUploads(),this._set("_isRefreshing",!1),[3,5];case 4:return b=a.sent(),u.isAbortError(b)||B.error(b),[3,5];case 5:return[2]}})})});b._doUpdate=
u.debounce(function(){return a.__awaiter(b,void 0,void 0,function(){var b,D,c,d,g,e,f,h,k,l,n,p,q,r;return a.__generator(this,function(v){switch(v.label){case 0:if(this.destroyed||!this._hasRequiredSupport(this.layer))return[2];this._set("_updatingPipelineConfig",!0);return[4,w.whenFalseOnce(this,"_isRefreshing")];case 1:return v.sent(),b=this,D=b.effect,c=b.filter,[4,this._updateRequiredFields()];case 2:v.sent();if(this.destroyed)return[2];d=this._getEffectiveRenderer().renderer;this._set("_effectiveRenderer",
d);g=K.toJSONGeometryType(this.layer.geometryType);return[4,M.computePxBuffer(d,g,this.layer.featureReduction)];case 3:return e=v.sent(),f=this._createConfiguration(c,D),this._lastPixelBuffer=0===e?0:Math.max(e,this._lastPixelBuffer),f.schema.source.pixelBuffer=this._lastPixelBuffer,h=this._createTileRendererHash(d),this.destroyed?[2]:h===this._tileRendererHash?[3,11]:[4,this._initTileRenderer(d)];case 4:return v.sent(),this.destroyed?[2]:[4,this._createServiceOptions()];case 5:k=v.sent();if(this.destroyed)return[2];
this.effects.forEach(function(a){return m.isSome(a)&&m.isSome(a.filter)&&a.filter.enable()});this.tileRenderer.onConfigUpdate(d);return[4,this._proxy.startup(this.view.featuresTilingScheme,f,k)];case 6:return v.sent(),[4,this._proxy.updateTiles({added:this._tileStrategy.tileKeys(),removed:[]})];case 7:return v.sent(),this.destroyed?[2]:this.hasHighlight()?[4,this._proxy.setHighlight(t.keysOfMap(this._highlightIds))]:[3,9];case 8:v.sent(),v.label=9;case 9:return this.destroyed?[2]:[4,this._onceTilesUpdated()];
case 10:v.sent();if(this.destroyed)return[2];this.tileRenderer.onConfigUpdate(d);return[3,26];case 11:return[4,this._proxy.update(f,!0)];case 12:l=v.sent();if(this.destroyed)return[2];if(!l.queryFilter)return[3,17];this._lockGPUUploads();v.label=13;case 13:return v.trys.push([13,15,,16]),[4,this._proxy.invalidate(l)];case 14:return v.sent(),[3,16];case 15:return n=v.sent(),u.isAbortError(n)||B.error(n),[3,16];case 16:if(this.destroyed)return[2];this._unlockGPUUploads();return[3,25];case 17:return v.trys.push([17,
19,,20]),[4,this._proxy.invalidate(a.__assign(a.__assign({},l),{mesh:!1}))];case 18:return v.sent(),[3,20];case 19:return p=v.sent(),u.isAbortError(p)||B.error(p),[3,20];case 20:if(this.destroyed)return[2];if(!l.mesh)return[3,25];this._lockGPUUploads();v.label=21;case 21:return v.trys.push([21,23,,24]),[4,this._proxy.invalidate({mesh:!0,targets:{aggregate:null===(r=l.targets)||void 0===r?void 0:r.aggregate}})];case 22:return v.sent(),[3,24];case 23:return q=v.sent(),u.isAbortError(q)||B.error(q),
[3,24];case 24:this._unlockGPUUploads(),v.label=25;case 25:if(this.destroyed)return[2];this._proxy.resume();this.effects.forEach(function(a){return m.isSome(a)&&m.isSome(a.filter)&&a.filter.enable()});this.tileRenderer.onConfigUpdate(d);this._forceAttributeTextureUpload();v.label=26;case 26:return this._tileRendererHash=h,this.tileRenderer.invalidateLabels(),this.requestUpdate(),[2]}})})});b._updateHighlight=u.debounce(function(){return a.__awaiter(b,void 0,void 0,function(){return a.__generator(this,
function(a){return[2,this._proxy.setHighlight(t.keysOfMap(this._highlightIds))]})})});return b}a.__extends(l,c);l.prototype.destroy=function(){var a,b;null===(a=this._proxy)||void 0===a?void 0:a.destroy();m.andThen(this._updateClusterSizeTask,function(a){return a.remove()});null===(b=this.tileRenderer)||void 0===b?void 0:b.destroy()};l.prototype.initialize=function(){var a=this;this.addResolvingPromise(this._initProxy());this.handles.add([this.on("valueRangesChanged",function(b){a._set("_aggregateValueRanges",
b.valueRanges)})])};l.prototype._initProxy=function(){return a.__awaiter(this,void 0,void 0,function(){var b,c,e;return a.__generator(this,function(a){if("stream"!==this.layer.type&&"ogc-feature"!==this.layer.type&&this.layer.isTable)throw new d("featurelayerview:table-not-supported","table feature layer can't be displayed",{layer:this.layer});b=this.layer.spatialReference;c=f.SpatialReference.WGS84;if(this.layer.featureReduction&&!x.doesBrowserSupportProjection(b,c))throw new d("featurelayerview:featureReduction-not-supported",
"cannot project feature layer to WGS84",{inSpatialReference:b,outSpatialReference:c});this._proxy&&this._proxy.destroy();e=this._createClientOptions();this._set("_proxy",new N.default({client:e}));return[2,this._proxy.when()]})})};Object.defineProperty(l.prototype,"labelsVisible",{get:function(){return!this.suspended&&this.layer.labelingInfo&&this.layer.labelsVisible},enumerable:!1,configurable:!0});Object.defineProperty(l.prototype,"effect",{get:function(){return m.unwrapOr(this._effect,null)},set:function(a){var b=
this._effect;m.isSome(b)&&m.isSome(b.filter)&&b.filter.enabled&&m.isSome(a)&&m.isSome(a.filter)&&a.filter.enable();this._effect=a;this.notifyChange("effect")},enumerable:!1,configurable:!0});Object.defineProperty(l.prototype,"effects",{get:function(){return this.effect&&[this.effect]||[]},enumerable:!1,configurable:!0});Object.defineProperty(l.prototype,"renderingConfigHash",{get:function(){if(!this.layer)return null;var a=this.availableFields,b=this.layer,c=b.definitionExpression,d=b.renderer,e=
b.labelingInfo,g="feature"===b.type?b.gdbVersion:void 0,f="feature"===b.type&&b.historicMoment?b.historicMoment.getTime():void 0,h=this.timeExtent,k="stream"===b.type?""+JSON.stringify(b.geometryDefinition)+b.definitionExpression:null,l=JSON.stringify(this.clips),n=b.featureReduction&&b.featureReduction.toJSON();return JSON.stringify({filterHash:m.isSome(this.filter)&&this.filter.toJSON(),effectHash:m.isSome(this.effect)&&this.effect.toJSON(),streamFilter:k,gdbVersion:g,definitionExpression:c,historicMoment:f,
availableFields:a,renderer:d,labelingInfo:b.labelsVisible&&e,timeExtent:h,clipsHash:l,featureReduction:n})},enumerable:!1,configurable:!0});l.prototype.highlight=function(a){var b=this,c;a instanceof h?c=[a.getObjectId()]:"number"===typeof a?c=[a]:k.isCollection(a)?c=a.map(function(a){return a&&a.getAttribute(b.layer.objectIdField)}).toArray():Array.isArray(a)&&0<a.length&&(c="number"===typeof a[0]?a:a.map(function(a){return a&&a.getAttribute(b.layer.objectIdField)}));if(!c||!c.length)return{remove:function(){},
pause:function(){},resume:function(){}};c=c.filter(function(a){return null!=a});this._addHighlight(c);return{remove:function(){return b._removeHighlight(c)},pause:function(){return b._removeHighlight(c)},resume:function(){return b._addHighlight(c)}}};l.prototype.hasHighlight=function(){return!!this._highlightIds.size};l.prototype.hitTest=function(a,b){return this._hitTest(a,b)};l.prototype.queryStatistics=function(){return this._proxy.queryStatistics()};l.prototype.queryFeatures=function(a,b){var c=
this;return this.queryFeaturesJSON(a,b).then(function(a){a=z.fromJSON(a);a.features.forEach(function(a){a.layer=c.layer;a.sourceLayer=c.layer});return a})};l.prototype.queryFeaturesJSON=function(a,b){return this._proxy.queryFeatures(this._cleanUpQuery(a),b)};l.prototype.queryObjectIds=function(a,b){return this._proxy.queryObjectIds(this._cleanUpQuery(a),b)};l.prototype.queryFeatureCount=function(a,b){return this._proxy.queryFeatureCount(this._cleanUpQuery(a),b)};l.prototype.queryExtent=function(a,
b){return this._proxy.queryExtent(this._cleanUpQuery(a),b).then(function(a){return{count:a.count,extent:f.Extent.fromJSON(a.extent)}})};l.prototype.setVisibility=function(a,b){b?this._visibilityOverrides.delete(a):this._visibilityOverrides.add(a);this._update()};l.prototype.update=function(a){if(this._tileStrategy&&this.tileRenderer){var b=this._tileStrategy.update(a),c=b.hasMissingTiles,d=b.added,b=b.removed;(d.length||b.length)&&this._proxy.updateTiles({added:d,removed:b});c&&this.requestUpdate();
a=a.state;this._viewStateId!==a.id&&(this._proxy.setViewState(a),this._viewStateId=a.id);this.notifyChange("updating")}};l.prototype.attach=function(){var b=this;this.view.timeline.record(this.layer.title+" (FeatureLayer) Attach");this._tileStrategy=new O.TileManager({acquireTile:function(a){return b._acquireTile(a)},releaseTile:function(a){return b._releaseTile(a)},tileInfoView:this.view.featuresTilingScheme,buffer:0});this.handles.add(w.init(this,"renderingConfigHash",function(){return b._update()}),
"attach");"stream"!==this.layer.type&&this.handles.add(this.layer.on("edits",function(c){return a.__awaiter(b,void 0,void 0,function(){return a.__generator(this,function(a){switch(a.label){case 0:return this._set("_onGoingEdits",this._onGoingEdits+1),[4,this._proxy.onEdits(c)];case 1:return a.sent(),this._set("_onGoingEdits",Math.max(0,this._onGoingEdits-1)),[2]}})})}),"attach")};l.prototype.detach=function(){this.container.removeAllChildren();this.handles.remove("attach");this._updatingPipelineConfig=
!1;this.tileRenderer&&(this.tileRenderer.uninstall(this.container),this.tileRenderer=null);this._tileStrategy&&(this._tileStrategy.destroy(),this._tileStrategy=null);this._tileRendererHash=null};l.prototype.moveStart=function(){this.requestUpdate()};l.prototype.viewChange=function(){this.requestUpdate()};l.prototype.moveEnd=function(){this.requestUpdate()};l.prototype.fetchPopupFeatures=function(c,d){return a.__awaiter(this,void 0,void 0,function(){var e,g,f,h;return a.__generator(this,function(a){if(m.isSome(d)&&
d.clientGraphics.length&&(e=d.clientGraphics[0],e instanceof p))return[2,[e]];if(g=this.validateFetchPopupFeatures(d))return[2,u.reject(g)];if(m.isSome(d)&&0===d.clientGraphics.length)return[2,u.resolve([])];f=this.fetchClientPopupFeatures(d);if(!c)return[2,f];h=this._fetchServicePopupFeatures(c,d);return[2,u.eachAlwaysValues([f,h]).then(b.flatten)]})})};l.prototype._fetchServicePopupFeatures=function(b,c){return a.__awaiter(this,void 0,void 0,function(){var d,e,f,g,h,k,D,v,l,n,p;return a.__generator(this,
function(a){switch(a.label){case 0:return"stream"===this.layer.type?[2,[]]:[4,this.createPopupQuery(c)];case 1:d=a.sent();e=this.layer;f=e.renderer;g=m.isSome(c)?c.event:null;h=A.calculateTolerance({renderer:f,event:g});d.geometry=this.createFetchPopupFeaturesQueryGeometry(b,h);k=new Set;D=e.objectIdField;if(v=m.isSome(c)?c.clientGraphics:null)for(l=0,n=v;l<n.length;l++)p=n[l],k.add(p.attributes[D]);return[2,e.queryFeatures(d).then(function(a){return a.features.filter(function(a){return!k.has(a.attributes[D])})})]}})})};
l.prototype.createFetchPopupFeaturesQueryGeometry=function(a,b){return R.createQueryGeometry(a,b,this.view)};l.prototype.isUpdating=function(){return null!=this.layer.renderer&&(null!=this._updatingRequiredFieldsPromise||null==this.tileRenderer||!this._proxy||!this._proxy.isReady||this._pipelineIsUpdating||this._updatingPipelineConfig||this.tileRenderer.updating||0<this._onGoingEdits)};l.prototype._createClientOptions=function(){var a=this;return{setUpdating:function(b){a._set("_pipelineIsUpdating",
b)},emitEvent:function(b){a.emit(b.name,b.event)}}};l.prototype._createServiceOptions=function(){return a.__awaiter(this,void 0,void 0,function(){var b,c,d,e,f,h,k,l,m;return a.__generator(this,function(a){switch(a.label){case 0:b=this.layer;if("stream"===b.type)return[2,null];c=b.capabilities;d=b.objectIdField;e=b.fields.map(function(a){return a.toJSON()});f=b.fullExtent&&b.fullExtent.toJSON();h=K.toJSONGeometryType(b.geometryType);k=b.timeInfo&&b.timeInfo.toJSON()||null;l=b.spatialReference?b.spatialReference.toJSON():
null;if("ogc-feature"!==b.type)return[3,1];m={capabilities:b.capabilities,collectionId:b.collectionId,url:b.url,layerDefinition:b.source.layerDefinition};return[3,4];case 1:return S(b.source)?[4,b.source.openPorts()]:[3,3];case 2:return m=a.sent(),[3,4];case 3:b.parsedUrl&&(m=g.clone(b.parsedUrl),"dynamicDataSource"in b&&b.dynamicDataSource&&(m.query={layer:JSON.stringify({source:b.dynamicDataSource})})),a.label=4;case 4:return[2,{type:"on-demand",maxRecordCount:c.query.maxRecordCount,tileMaxRecordCount:c.query.tileMaxRecordCount,
capabilities:c,fields:e,fullExtent:f,geometryType:h,objectIdField:d,source:m,timeInfo:k,spatialReference:l}]}})})};l.prototype._createMemoryServiceOptions=function(b){return a.__awaiter(this,void 0,void 0,function(){var c;return a.__generator(this,function(d){switch(d.label){case 0:return[4,b.openPorts()];case 1:return c=d.sent(),[2,a.__assign(a.__assign({},this._createServiceOptions()),{type:"memory",source:c})]}})})};l.prototype._cleanUpQuery=function(a){a=y.from(a)||this.createQuery();a.outSpatialReference||
(a.outSpatialReference=this.view.spatialReference);return a};l.prototype._createUpdateClusterSizeTask=function(b,c){var d=this;return this.watch("_aggregateValueRanges",function(e){return a.__awaiter(d,void 0,void 0,function(){return a.__generator(this,function(a){this._updateClusterEffectiveRendererSizeVariable(b,c,e);if(!this._updatingPipelineConfig)this.tileRenderer.onConfigUpdate(this._effectiveRenderer);return[2]})})})};l.prototype._updateClusterEffectiveRendererSizeVariable=function(b,c,d){return a.__awaiter(this,
void 0,void 0,function(){var e,f,g;return a.__generator(this,function(a){b.dynamicClusterSize&&"visualVariables"in b&&b.visualVariables&&(e=I.findSizeVV(b.visualVariables),m.isSome(e)&&"cluster_count"===e.field&&(f=b.visualVariables.indexOf(e),b.visualVariables[f]=I.createClusterCountSizeVariable(c,d),g=b.clone(),g.dynamicClusterSize=!0,this._set("_effectiveRenderer",g)));return[2]})})};l.prototype._getEffectiveRenderer=function(){var a=this.layer.renderer,b=this.layer.featureReduction;m.isSome(this._updateClusterSizeTask)&&
(this._updateClusterSizeTask.remove(),this._updateClusterSizeTask=null);if(b&&"cluster"===b.type&&I.isClusterCompatibleRenderer(a)){var c=[],a=I.createClusterRenderer(c,a,b,this._aggregateValueRanges);m.andThen(this._updateClusterSizeTask,function(a){return a.remove()});this._updateClusterSizeTask=this._createUpdateClusterSizeTask(a,b);return{renderer:a,aggregateFields:c,featureReduction:b}}return{renderer:a,aggregateFields:[],featureReduction:null}};l.prototype._acquireTile=function(a){var b=this;
a=this.tileRenderer.acquireTile(a);a.once("attach",function(){b.requestUpdate()});return a};l.prototype._releaseTile=function(a){this.tileRenderer.releaseTile(a)};l.prototype._initTileRenderer=function(b){return a.__awaiter(this,void 0,void 0,function(){var c;return a.__generator(this,function(a){switch(a.label){case 0:return[4,L.createOrReuseTileRenderer(b,{layerView:this,tileInfoView:this.view.featuresTilingScheme,layer:this.layer})];case 1:c=a.sent();this.tileRenderer&&(this._tileStrategy.clear(),
this.tileRenderer.uninstall(this.container),this.tileRenderer.destroy(),this.tileRenderer=null);if(this.destroyed)return[2,null];this._proxy.tileRenderer=c;this._set("tileRenderer",c);this.tileRenderer.install(this.container);this.tileRenderer.onConfigUpdate(b);this.requestUpdate();return[2,this.tileRenderer]}})})};l.prototype._createTileRendererHash=function(a){return("heatmap"===a.type?"heatmap":"symbol")+"."+("dot-density"===a.type)};l.prototype._createFeatureDataHash=function(a,b,c){a=a.getAttributeHash();
b=JSON.stringify(b);c=m.isSome(c)&&JSON.stringify(c.filter);var d=JSON.stringify(this.timeExtent),e="";this._visibilityOverrides.forEach(function(a){return e+=a});return a+"."+b+"."+c+"."+d+"."+e};l.prototype._injectOverrides=function(a){var b=m.isSome(a)?a.timeExtent:null,b=this.timeExtent&&b?this.timeExtent.intersection(b):this.timeExtent||b;if(!this._visibilityOverrides.size&&!b)return a;a=m.isSome(a)&&a.clone()||new G;a.hiddenIds=this._visibilityOverrides;a.timeExtent=b;return a};l.prototype._createConfiguration=
function(a,b){var c="feature"===this.layer.type&&this.layer.historicMoment?this.layer.historicMoment.getTime():void 0,d="feature"===this.layer.type?this.layer.gdbVersion:void 0,e=Array(E.MAX_FILTERS);a=this._injectOverrides(a);e[0]=m.isSome(a)?a.toJSON():null;e[1]=m.isSome(b)&&b.filter?b.filter.toJSON():null;return{definitionExpression:this.layer.definitionExpression,availableFields:this.availableFields,gdbVersion:d,historicMoment:c,devicePixelRatio:window.devicePixelRatio||1,filters:e,schema:m.unwrap(F.createSchema(this,
0))}};l.prototype._hasRequiredSupport=function(a){var b;return"dot-density"!==(null===(b=a.renderer)||void 0===b?void 0:b.type)||e("esri-webgl-texture-float")?!0:(B.error(new d("webgl-missing-extension","Missing WebGL extension OES_Texture_Float which is required for DotDensity")),!1)};l.prototype._onceTilesUpdated=function(){this.requestUpdate();return w.whenFalseOnce(this,"_pipelineIsUpdating",!1)};l.prototype._lockGPUUploads=function(){this.tileRenderer&&this.tileRenderer.lockGPUUploads()};l.prototype._unlockGPUUploads=
function(){this.tileRenderer&&this.tileRenderer.unlockGPUUploads()};l.prototype._forceAttributeTextureUpload=function(){this.tileRenderer&&this.tileRenderer.forceAttributeTextureUpload()};l.prototype._update=function(){var a=this;this.view.timeline.begin(this.layer.title+" (FeatureLayer) Initial Pipeline Config");var b=this._doUpdate();this._updatingPromise=b;var c=function(){b===a._updatingPromise&&a._set("_updatingPipelineConfig",!1);a.view&&a.view.timeline.end(a.layer.title+" (FeatureLayer) Initial Pipeline Config")};
b.then(c).catch(function(a){u.isAbortError(a)||B.error(a);c()})};l.prototype._addHighlight=function(a){for(var b=0;b<a.length;b++){var c=a[b];if(this._highlightIds.has(c)){var d=this._highlightIds.get(c);this._highlightIds.set(c,d+1)}else this._highlightIds.set(c,1)}this._updateHighlight().catch(function(a){u.isAbortError(a)||B.error(a)})};l.prototype._removeHighlight=function(a){for(var b=0;b<a.length;b++){var c=a[b];if(this._highlightIds.has(c)){var d=this._highlightIds.get(c)-1;0===d?this._highlightIds.delete(c):
this._highlightIds.set(c,d)}}this._updateHighlight().catch(function(a){u.isAbortError(a)||B.error(a)})};l.prototype._createHittestResult=function(a){a.layer=this.layer;a.sourceLayer=this.layer;m.isSome(a.geometry)&&(a.geometry.spatialReference=this.view.spatialReference);return a};l.prototype._hitTest=function(b,c){return a.__awaiter(this,void 0,void 0,function(){var d,e,f,g,k=this;return a.__generator(this,function(a){switch(a.label){case 0:return this.suspended||!this.tileRenderer?[2,null]:[4,this.tileRenderer.hitTest(b,
c)];case 1:return d=a.sent(),0!==d.length?[3,3]:[4,u.after(1)];case 2:return a.sent(),[2,null];case 3:return e=d[0],1===(e&2147483648)>>>31?[3,5]:[4,this._proxy.getFeature(e)];case 4:return f=a.sent(),[2,m.andThen(f,function(a){return k._createHittestResult(h.fromJSON(a))})];case 5:return[4,this._proxy.getAggregate(e)];case 6:return g=a.sent(),m.isNone(g)?[2,null]:m.isSome(g.referenceId)?[4,this._proxy.getFeature(g.referenceId)]:[3,8];case 7:return f=a.sent(),[2,m.andThen(f,function(a){return k._createHittestResult(h.fromJSON(a))})];
case 8:return[2,this._createHittestResult(p.fromJSON(g))]}})})};a.__decorate([n.property()],l.prototype,"_proxy",void 0);a.__decorate([n.property()],l.prototype,"_pipelineIsUpdating",void 0);a.__decorate([n.property()],l.prototype,"_updatingPipelineConfig",void 0);a.__decorate([n.property()],l.prototype,"_effectiveRenderer",void 0);a.__decorate([n.property()],l.prototype,"_aggregateValueRanges",void 0);a.__decorate([n.property()],l.prototype,"_onGoingEdits",void 0);a.__decorate([n.property()],l.prototype,
"_isRefreshing",void 0);a.__decorate([n.property({dependsOn:["suspended","layer.labelingInfo","layer.labelsVisible"]})],l.prototype,"labelsVisible",null);a.__decorate([n.property({type:G})],l.prototype,"filter",void 0);a.__decorate([n.property({type:Q})],l.prototype,"effect",null);a.__decorate([n.property({readOnly:!0,dependsOn:["effect"]})],l.prototype,"effects",null);a.__decorate([n.property({dependsOn:"layer.renderer layer.outFields layer.definitionExpression layer.gdbVersion? layer.geometryDefinition? layer.historicMoment? layer.labelingInfo layer.labelsVisible layer.featureReduction filter effect timeExtent clips".split(" ")})],
l.prototype,"renderingConfigHash",null);a.__decorate([n.property()],l.prototype,"tileRenderer",void 0);a.__decorate([n.property({dependsOn:"layer.renderer tileRenderer tileRenderer.updating _updatingPipelineConfig _pipelineIsUpdating _updatingRequiredFieldsPromise _proxy _proxy.isReady? _onGoingEdits".split(" ")})],l.prototype,"updating",void 0);return l=a.__decorate([n.subclass("esri.views.2d.layers.FeatureLayerView2D")],l)}(P.FeatureLayerView(C.RefreshableLayerView(H.LayerView2DMixin(J))))});