// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../lib/GLMaterialTexture ../lib/Material ./internal/DefaultBufferWriter ./internal/MaterialUtil ./internal/MaterialUtil ../shaders/ImageMaterialTechnique".split(" "),function(e,q,c,k,l,f,m,h,g){e=function(d){function b(a,b){b=d.call(this,b)||this;b.supportsEdges=!0;b.techniqueConfig=new g.ImageMaterialTechniqueConfiguration;b.params=h.copyParameters(a,n);return b}c.__extends(b,d);b.prototype.setParameterValues=function(a){m.updateParameters(this.params,a)&&this.parametersChanged()};
b.prototype.getParameters=function(){return this.params};b.prototype.getTechniqueConfig=function(a){this.techniqueConfig.output=a;this.techniqueConfig.cullFace=this.params.cullFace;this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled;this.techniqueConfig.transparent=this.params.transparent;this.techniqueConfig.writeDepth=this.params.writeDepth;this.techniqueConfig.sceneHasOcludees=this.params.sceneHasOcludees;return this.techniqueConfig};b.prototype.intersect=function(a,b,d,c,e,f,
g){h.intersectTriangleGeometry(a,b,c,e,f,void 0,g)};b.prototype.getGLMaterial=function(a){return 0===a.output||4===a.output?new p(a):void 0};b.prototype.createBufferWriter=function(){return new f.DefaultBufferWriter(f.PositionUVLayout)};return b}(l.Material);var p=function(d){function b(a){a=d.call(this,c.__assign(c.__assign({},a),a.material.getParameters()))||this;a.updateParameters();return a}c.__extends(b,d);b.prototype.updateParameters=function(){var a=this.material.getParameters();this.updateTexture(a.textureId);
this.technique=this.techniqueRep.acquireAndReleaseExisting(g.ImageMaterialTechnique,this.material.getTechniqueConfig(this.output),this.technique)};b.prototype.beginSlot=function(a){return 4===this.output?3===a:a===(this.technique.configuration.transparent?this.technique.configuration.writeDepth?5:8:3)};b.prototype._updateOccludeeState=function(a){a.hasOccludees!==this.material.getParameters().sceneHasOcludees&&(this.material.setParameterValues({sceneHasOcludees:a.hasOccludees}),this.updateParameters())};
b.prototype.ensureParameters=function(a){0===this.output&&this._updateOccludeeState(a)};b.prototype.bind=function(a,b){a.bindProgram(this.technique.program);this.bindTexture(a,this.technique.program);this.bindTextureScale(a,this.technique.program);this.technique.bindPass(a,this.material.getParameters(),b)};b.prototype.getPipelineState=function(a,b){return b?this.technique.opaqueOccludeeState:this.technique.pipeline};return b}(k),n={transparent:!1,writeDepth:!0,slicePlaneEnabled:!1,cullFace:0,sceneHasOcludees:!1,
opacity:1,textureId:null,initTextureTransparent:!0};return e});