// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/webgl/BufferObject":function(){define(["require","exports","../../core/maybe","../../core/typedArrayUtil"],function(q,a,r,n){return function(){function a(g,f,h,e,d){this._glName=this._context=null;this._bufferType=void 0;this._usage=35044;this._size=-1;this._indexType=void 0;this._context=g;this._bufferType=f;this._usage=h;this._id=a._nextId++;this._glName=this._context.gl.createBuffer();r.isSome(g.instanceCounter)&&g.instanceCounter.increment(1,this);e&&this.setData(e,
d)}a.createIndex=function(g,f,h,e){return new a(g,34963,f,h,e)};a.createVertex=function(g,f,h){return new a(g,34962,f,h)};Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"usage",{get:function(){return this._usage},
enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"bufferType",{get:function(){return this._bufferType},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"indexType",{get:function(){return this._indexType},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"byteSize",{get:function(){return 34962===this._bufferType?this._size:5125===this._indexType?4*this._size:2*this._size},enumerable:!1,configurable:!0});a.prototype.dispose=function(){this._context&&
(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),r.isSome(this._context.instanceCounter)&&this._context.instanceCounter.decrement(1,this),this._context=null)};a.prototype.setData=function(g,f){if(g){if("number"===typeof g){if(0>g&&console.error("Buffer size cannot be negative!"),34963===this._bufferType&&f)switch(this._indexType=f,this._size=g,f){case 5123:g*=2;break;case 5125:g*=4}}else f=g.byteLength,n.isUint16Array(g)&&(f/=2,this._indexType=5123),n.isUint32Array(g)&&
(f/=4,this._indexType=5125),this._size=f;f=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);this._context.gl.bufferData(this._bufferType,g,this._usage);this._context.bindVAO(f)}};a.prototype.setSubData=function(g,f,h,e){void 0===f&&(f=0);void 0===h&&(h=0);if(g){(0>f||f>=this._size)&&console.error("offset is out of range!");var d=f,b=h,c=e,t=g.byteLength;n.isUint16Array(g)&&(t/=2,d*=2,b*=2,c*=2);n.isUint32Array(g)&&(t/=4,d*=4,b*=4,c*=4);void 0===e&&(e=t-1);h>=
e&&console.error("end must be bigger than start!");f+h-e>this._size&&console.error("An attempt to write beyond the end of the buffer!");f=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);h=this._context.gl;g=ArrayBuffer.isView(g)?g.buffer:g;h.bufferSubData(this._bufferType,d,g.slice(b,c));this._context.bindVAO(f)}};a._nextId=0;return a}()})},"esri/views/webgl/FramebufferObject":function(){define("require exports tslib ../../core/has ../../core/Logger ../../core/maybe ./Renderbuffer ./Texture".split(" "),
function(q,a,r,n,k,g,f,h){var e=k.getLogger("esri.views.webgl.FrameBufferObject");return function(){function d(b,c,e,l){var t,a;this._stencilAttachment=this._depthAttachment=this._glName=this._context=null;this._colorAttachments=new Map;this._initialized=!1;this._context=b;this._desc=r.__assign({},c);this._id=d._nextId++;g.isSome(b.instanceCounter)&&b.instanceCounter.increment(4,this);if(e){var n=void 0;if(Array.isArray(e))for(t=0;t<e.length;t++){n=e[t];c=n.attachmentPoint;var n=n.texture,k=n instanceof
h?n:new h(b,n),n=k.descriptor;this._colorAttachments.set(c,k);this._validateColorAttachmentPoint(c);this._validateTextureDimensions(n,this._desc)}else e instanceof h?(n=e.descriptor,this._colorAttachments.set(36064,e)):(n=e,this._colorAttachments.set(36064,new h(b,e))),0!==(null===(t=this._desc)||void 0===t?void 0:t.colorTarget)&&console.error("Framebuffer is initialized with a texture however the descriptor indicates using a renderbuffer color attachment!"),this._validateTextureDimensions(n,this._desc)}l instanceof
f?(b=null!==(a=this._desc.depthStencilTarget)&&void 0!==a?a:3,2===b?this._stencilAttachment=l:1===b||3===b?this._depthAttachment=l:console.error('If a Renderbuffer is provided, "depthStencilTarget" must be one of STENCIL_RENDER_BUFFER, DEPTH_RENDER_BUFFER or DEPTH_STENCIL_RENDER_BUFFER'),d._validateBufferDimensions(l.descriptor,this._desc)):l&&(this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),
a=void 0,l instanceof h?(this._depthStencilTexture=l,a=this._depthStencilTexture.descriptor):(a=l,this._depthStencilTexture=new h(this._context,a)),this._validateTextureDimensions(a,this._desc))}d.prototype.dispose=function(){if(this._context){var b=this._context,c=b.getBoundFramebufferObject();this._disposeColorAttachments();this._disposeDepthStencilAttachments();this._glName&&(b.gl.deleteFramebuffer(this._glName),this._glName=null);g.isSome(b.instanceCounter)&&b.instanceCounter.decrement(4,this);
b.bindFramebuffer(c);this._context=null}};Object.defineProperty(d.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"glName",{get:function(){return this._glName},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"descriptor",{get:function(){return this._desc},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"colorTexture",{get:function(){var b=this._colorAttachments.get(36064);return b&&b instanceof h?
b:null},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"colorAttachment",{get:function(){return this._colorAttachments.get(36064)},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"depthStencilAttachment",{get:function(){return this._depthStencilTexture||this._depthAttachment||this._stencilAttachment},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"depthStencilTexture",{get:function(){return this._depthStencilTexture},enumerable:!1,configurable:!0});
Object.defineProperty(d.prototype,"width",{get:function(){return this._desc.width},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"height",{get:function(){return this._desc.height},enumerable:!1,configurable:!0});d.prototype.getColorTexture=function(b){return(b=this._colorAttachments.get(b))&&b instanceof h?b:null};d.prototype.attachColorTexture=function(b,c){void 0===c&&(c=36064);if(b){this._validateColorAttachmentPoint(c);this._validateTextureDimensions(b.descriptor,this._desc);
this._disposeColorAttachments();if(this._initialized){this._context.bindFramebuffer(this);var d=this._context.gl;d.framebufferTexture2D(d.FRAMEBUFFER,c,d.TEXTURE_2D,b.glName,0)}this._colorAttachments.set(c,b)}};d.prototype.detachColorTexture=function(b){void 0===b&&(b=36064);var c=this._colorAttachments.get(b);if(c instanceof h){if(this._initialized){this._context.bindFramebuffer(this);var d=this._context.gl;d.framebufferTexture2D(d.FRAMEBUFFER,b,d.TEXTURE_2D,null,0)}this._colorAttachments.delete(b);
return c}};d.prototype.attachDepthStencilTexture=function(b){if(b){var c=b.descriptor;34041!==c.pixelFormat&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!");34042!==c.dataType&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8_WEBGL!");this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!");this._validateTextureDimensions(c,this._desc);
this._desc.depthStencilTarget&&4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4);this._disposeDepthStencilAttachments();this._initialized&&(this._context.bindFramebuffer(this),c=this._context.gl,c.framebufferTexture2D(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.TEXTURE_2D,b.glName,0));this._depthStencilTexture=b}};d.prototype.detachDepthStencilTexture=function(){var b=this._depthStencilTexture;if(b&&this._initialized){this._context.bindFramebuffer(this);var c=this._context.gl;this._context.gl.framebufferTexture2D(c.FRAMEBUFFER,
c.DEPTH_STENCIL_ATTACHMENT,c.TEXTURE_2D,null,0)}this._depthStencilTexture=null;return b};d.prototype.attachDepthStencilBuffer=function(b){if(b){var c=b.descriptor;34041!==c.internalFormat&&33189!==c.internalFormat&&console.error("Depth/Stencil buffer must have correct internalFormat");d._validateBufferDimensions(c,this._desc);this._disposeDepthStencilAttachments();this._desc.depthStencilTarget=34041===c.internalFormat?3:1;this._initialized&&(this._context.bindFramebuffer(this),c=this._context.gl,
c.framebufferRenderbuffer(c.FRAMEBUFFER,1===this._desc.depthStencilTarget?c.DEPTH_ATTACHMENT:c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,b.glName));this._depthAttachment=b}};d.prototype.detachDepthStencilBuffer=function(){var b=this._context.gl,c=this._depthAttachment;c&&this._initialized&&(this._context.bindFramebuffer(this),b.framebufferRenderbuffer(b.FRAMEBUFFER,1===this._desc.depthStencilTarget?b.DEPTH_ATTACHMENT:b.DEPTH_STENCIL_ATTACHMENT,b.RENDERBUFFER,null));this._depthAttachment=null;return c};
d.prototype.copyToTexture=function(b,c,d,e,f,h,g){(0>b||0>c||0>f||0>h)&&console.error("Offsets cannot be negative!");(0>=d||0>=e)&&console.error("Copy width and height must be greater than zero!");var t=this._desc,l=g.descriptor;3553!==g.descriptor.target&&console.error("Texture target must be TEXTURE_2D!");(b+d>t.width||c+e>t.height||f+d>l.width||h+e>l.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");t=this._context;t.bindTexture(g);t.bindFramebuffer(this);
t.gl.copyTexSubImage2D(3553,0,f,h,b,c,d,e)};d.prototype.readPixels=function(b,c,d,e,f,h,g){(0>=d||0>=e)&&console.error("Copy width and height must be greater than zero!");g||console.error("Target memory is not initialized!");this._context.bindFramebuffer(this);this._context.gl.readPixels(b,c,d,e,f,h,g)};d.prototype.resize=function(b,c){var d=this._desc;if(d.width!==b||d.height!==c)if(this._initialized){d.width=b;d.height=c;this._colorAttachments.forEach(function(d){d&&d.resize(b,c)});if(null!=this._depthStencilTexture)this._depthStencilTexture.resize(b,
c);else if(this._depthAttachment||this._stencilAttachment)this._depthAttachment&&this._depthAttachment.resize(b,c),this._stencilAttachment&&this._stencilAttachment.resize(b,c);this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null);this._initialized=!1}else d.width=b,d.height=c,this._colorAttachments.forEach(function(d){d&&d.resize(b,c)}),this._depthStencilTexture&&this._depthStencilTexture.resize(b,c)};d.prototype.initialize=function(){var b,c,d,e;if(this._initialized)return!1;
var g=this._context,a=g.gl;this._glName&&a.deleteFramebuffer(this._glName);var n=a.createFramebuffer(),k=this._desc,r=null!==(b=k.colorTarget)&&void 0!==b?b:1;b=null!==(c=k.width)&&void 0!==c?c:1;c=null!==(d=k.height)&&void 0!==d?d:1;a.bindFramebuffer(a.FRAMEBUFFER,n);0===this._colorAttachments.size&&(0===r?this._colorAttachments.set(36064,new h(g,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:k.width,height:k.height})):(d=new f(g,{internalFormat:32854,width:b,
height:c}),this._colorAttachments.set(36064,d)));this._colorAttachments.forEach(function(b,c){b&&(b instanceof h?a.framebufferTexture2D(a.FRAMEBUFFER,c,a.TEXTURE_2D,b.glName,0):a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.RENDERBUFFER,b.glName))});d=null!==(e=k.depthStencilTarget)&&void 0!==e?e:0;switch(d){case 1:case 3:this._depthAttachment||(this._depthAttachment=new f(g,{internalFormat:1===k.depthStencilTarget?33189:34041,width:b,height:c}));a.framebufferRenderbuffer(a.FRAMEBUFFER,
1===d?a.DEPTH_ATTACHMENT:a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,this._depthAttachment.glName);break;case 2:this._stencilAttachment||(this._stencilAttachment=new f(g,{internalFormat:36168,width:b,height:c}));a.framebufferRenderbuffer(a.FRAMEBUFFER,a.STENCIL_ATTACHMENT,a.RENDERBUFFER,this._stencilAttachment.glName);break;case 4:this._depthStencilTexture||(g.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),
this._depthStencilTexture=new h(g,{target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:b,height:c})),a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,this._depthStencilTexture.glName,0)}this._glName=n;return this._initialized=!0};d.prototype._disposeColorAttachments=function(){var b=this;this._colorAttachments.forEach(function(c,d){if(c instanceof h){if(b._initialized){b._context.bindFramebuffer(b);var e=b._context.gl;e.framebufferTexture2D(e.FRAMEBUFFER,
d,e.TEXTURE_2D,null,0)}c.dispose()}else c instanceof WebGLRenderbuffer&&(e=b._context.gl,b._initialized&&(b._context.bindFramebuffer(b),e.framebufferRenderbuffer(e.FRAMEBUFFER,d,e.RENDERBUFFER,null)),b._context.gl.deleteRenderbuffer(c))});this._colorAttachments.clear()};d.prototype._disposeDepthStencilAttachments=function(){var b=this._context.gl;this._depthAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),b.framebufferRenderbuffer(b.FRAMEBUFFER,1===this._desc.depthStencilTarget?
b.DEPTH_ATTACHMENT:b.DEPTH_STENCIL_ATTACHMENT,b.RENDERBUFFER,null)),this._depthAttachment.dispose(),this._depthAttachment=null);this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),b.framebufferRenderbuffer(b.FRAMEBUFFER,b.STENCIL_ATTACHMENT,b.RENDERBUFFER,null)),this._stencilAttachment.dispose(),this._stencilAttachment=null);this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),b.framebufferTexture2D(b.FRAMEBUFFER,b.DEPTH_STENCIL_ATTACHMENT,
b.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),this._depthStencilTexture=null)};d._validateBufferDimensions=function(b,c){console.assert(0<=b.width&&0<=b.height);void 0!==c.width&&0<=c.width&&void 0!==c.height&&0<=c.height?c.width===b.width&&c.height===b.height||console.error("Renderbuffer dimensions must match the framebuffer's!"):(c.width=b.width,c.height=b.height)};d.prototype._validateTextureDimensions=function(b,c){console.assert(0<=b.width&&0<=b.height);3553!==b.target&&console.error("Texture type must be TEXTURE_2D!");
void 0!==c.width&&0<=c.width&&void 0!==c.height&&0<=c.height?c.width===b.width&&c.height===b.height||console.error("Color attachment texture must match the framebuffer's!"):(c.width=b.width,c.height=b.height)};d.prototype._validateColorAttachmentPoint=function(b){if(-1===d._MAX_COLOR_ATTACHMENTS){var c=this._context.capabilities.drawBuffers;d._MAX_COLOR_ATTACHMENTS=c?this._context.gl.getParameter(c.MAX_COLOR_ATTACHMENTS):1}b-=36064;b+1>d._MAX_COLOR_ATTACHMENTS&&e.error("esri.FrameBufferObject","illegal attachment point for color attachment: "+
(b+1)+". Implementation supports up to "+d._MAX_COLOR_ATTACHMENTS+" color attachments")};d._nextId=0;d._MAX_COLOR_ATTACHMENTS=-1;return d}()})},"esri/views/webgl/Renderbuffer":function(){define(["require","exports","../../core/maybe"],function(q,a,r){return function(){function a(n,g){this._context=n;this._desc=g;this._glName=null;this._id=-1;n=this._context.gl;r.isSome(this._context.instanceCounter)&&this._context.instanceCounter.increment(5,this);this._id=++a._nextId;this._glName=n.createRenderbuffer();
this._context.bindRenderbuffer(this);n.renderbufferStorage(n.RENDERBUFFER,g.internalFormat,g.width,g.height)}Object.defineProperty(a.prototype,"descriptor",{get:function(){return this._desc},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},enumerable:!1,configurable:!0});a.prototype.resize=function(a,g){var f=this._context.gl,h=this._desc;
if(h.width!==a||h.height!==g)h.width=a,h.height=g,this._context.bindRenderbuffer(this),f.renderbufferStorage(f.RENDERBUFFER,h.internalFormat,h.width,h.height)};a.prototype.dispose=function(){this._glName&&(this._context.gl.deleteRenderbuffer(this._glName),this._glName=null);this._context&&r.isSome(this._context.instanceCounter)&&this._context.instanceCounter.decrement(5,this);this._context=null};a._nextId=0;return a}()})},"esri/views/webgl/Texture":function(){define(["require","exports","tslib","../../core/mathUtils",
"../../core/maybe"],function(q,a,r,n,k){return function(){function a(f,h,e){void 0===e&&(e=null);this._glName=this._context=null;this._id=-1;this._descriptor=void 0;this._wrapModeDirty=this._samplingModeDirty=!1;this._boundToUnits=new Set;this._context=f;this._descriptor=r.__assign({target:3553,samplingMode:9729,wrapMode:10497,flipped:!1,hasMipmap:!1,isOpaque:!1,unpackAlignment:4,preMultiplyAlpha:!1},h);this._id=++a._nextId;k.isSome(f.instanceCounter)&&f.instanceCounter.increment(0,this);this.setData(e)}
Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"descriptor",{get:function(){return this._descriptor},enumerable:!1,configurable:!0});a.prototype.dispose=function(){var f=this;if(this._context&&this._context.gl){if(this._glName){var h=this._context.gl;this._boundToUnits.forEach(function(e){f._context.bindTexture(null,
e)});h.deleteTexture(this._glName);this._glName=null}k.isSome(this._context.instanceCounter)&&this._context.instanceCounter.decrement(0,this);this._context=null}};a.prototype.release=function(){this.dispose()};a.prototype.resize=function(f,h){var e=this._descriptor;if(e.width!==f||e.height!==h)e.width=f,e.height=h,this.setData(null)};a.prototype.setData=function(f){if(this._context&&this._context.gl){var h=this._context.gl;this._glName||(this._glName=h.createTexture());void 0===f&&(f=null);null===
f&&(this._descriptor.width=this._descriptor.width||4,this._descriptor.height=this._descriptor.height||4);var e=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var d=this._descriptor;a._validateTexture(d);h.pixelStorei(h.UNPACK_ALIGNMENT,d.unpackAlignment);h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,d.flipped?1:0);h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,d.preMultiplyAlpha?1:0);var b=d.pixelFormat,c=d.internalFormat?d.internalFormat:b;if(f instanceof ImageData||f instanceof HTMLImageElement||
f instanceof HTMLCanvasElement||f instanceof HTMLVideoElement){var t=f.width,l=f.height;f instanceof HTMLVideoElement&&(t=f.videoWidth,l=f.videoHeight);d.width&&d.height&&console.assert(t===d.width&&l===d.height);h.texImage2D(h.TEXTURE_2D,0,c,b,d.dataType,f);d.hasMipmap&&this.generateMipmap();void 0===d.width&&(d.width=t);void 0===d.height&&(d.height=l)}else{null!=d.width&&null!=d.height||console.error("Width and height must be specified!");h.DEPTH24_STENCIL8&&c===h.DEPTH_STENCIL&&(c=h.DEPTH24_STENCIL8);
var t=d.width,l=d.height,g=f;if(k.isSome(g)&&"type"in g&&"compressed"===g.type)for(b=Math.round(Math.log(Math.max(t,l))/Math.LN2)+1,d.hasMipmap=d.hasMipmap&&b===f.levels.length,g=0;;++g){h.compressedTexImage2D(h.TEXTURE_2D,g,c,t,l,0,f.levels[Math.min(g,f.levels.length-1)]);if(1===t&&1===l||!d.hasMipmap)break;t=Math.max(1,t>>1);l=Math.max(1,l>>1)}else if(k.isSome(f))h.texImage2D(h.TEXTURE_2D,0,c,t,l,0,b,d.dataType,f),d.hasMipmap&&this.generateMipmap();else for(g=0;;++g){h.texImage2D(h.TEXTURE_2D,g,
c,t,l,0,b,d.dataType,null);if(1===t&&1===l||!d.hasMipmap)break;t=Math.max(1,t>>1);l=Math.max(1,l>>1)}}a._applySamplingMode(h,this._descriptor);a._applyWrapMode(h,this._descriptor);a._applyAnisotropicFilteringParameters(this._context,this._descriptor);this._context.bindTexture(e,0)}};a.prototype.updateData=function(f,h,e,d,b,c){c||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");var a=this._context.gl,l=this._descriptor,
g=this._context.getBoundTexture(0);this._context.bindTexture(this,0);(0>h||0>e||d>l.width||b>l.height||h+d>l.width||e+b>l.height)&&console.error("An attempt to update out of bounds of the texture!");a.pixelStorei(a.UNPACK_ALIGNMENT,l.unpackAlignment);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,l.flipped?1:0);a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l.preMultiplyAlpha?1:0);c instanceof ImageData||c instanceof HTMLImageElement||c instanceof HTMLCanvasElement||c instanceof HTMLVideoElement?a.texSubImage2D(a.TEXTURE_2D,
f,h,e,l.pixelFormat,l.dataType,c):a.texSubImage2D(a.TEXTURE_2D,f,h,e,d,b,l.pixelFormat,l.dataType,c);this._context.bindTexture(g,0)};a.prototype.generateMipmap=function(){var f=this._descriptor;f.hasMipmap||(this._samplingModeDirty=f.hasMipmap=!0,a._validateTexture(f));9729===f.samplingMode?(this._samplingModeDirty=!0,f.samplingMode=9985):9728===f.samplingMode&&(this._samplingModeDirty=!0,f.samplingMode=9984);f=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var h=this._context.gl;
h.generateMipmap(h.TEXTURE_2D);this._context.bindTexture(f,0)};a.prototype.setSamplingMode=function(f){f!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=f,a._validateTexture(this._descriptor),this._samplingModeDirty=!0)};a.prototype.setWrapMode=function(f){f!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=f,a._validateTexture(this._descriptor),this._wrapModeDirty=!0)};a.prototype.applyChanges=function(){var f=this._context.gl,h=this._descriptor;this._samplingModeDirty&&(a._applySamplingMode(f,
h),this._samplingModeDirty=!1);this._wrapModeDirty&&(a._applyWrapMode(f,h),this._wrapModeDirty=!1)};a.prototype.setBoundToUnit=function(f,a){a?this._boundToUnits.add(f):this._boundToUnits.delete(f)};a._validateTexture=function(f){(0>f.width||0>f.height)&&console.error("Negative dimension parameters are not allowed!");n.isPowerOfTwo(f.width)&&n.isPowerOfTwo(f.height)||("number"===typeof f.wrapMode?33071!==f.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"):
33071===f.wrapMode.s&&33071===f.wrapMode.t||console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),f.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))};a._applySamplingMode=function(f,a){var e=a.samplingMode,d=a.samplingMode;if(9985===e||9987===e)e=9729,a.hasMipmap||(d=9729);else if(9984===e||9986===e)e=9728,a.hasMipmap||(d=9728);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,e);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,d)};a._applyWrapMode=
function(f,a){"number"===typeof a.wrapMode?(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,a.wrapMode),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,a.wrapMode)):(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,a.wrapMode.s),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,a.wrapMode.t))};a._applyAnisotropicFilteringParameters=function(a,h){if(null!=h.maxAnisotropy){var e=a.capabilities.textureFilterAnisotropic;e&&(a=a.gl,a.texParameterf(a.TEXTURE_2D,e.TEXTURE_MAX_ANISOTROPY,h.maxAnisotropy))}};a._nextId=
0;return a}()})},"esri/views/webgl/Program":function(){define(["require","exports","../../core/has","../../core/maybe","./ShaderTranspiler"],function(q,a,r,n,k){function g(a,h){if(n.isNone(a)||a.length!==h.length)return!0;for(var e=0;e<a.length;++e)if(a[e]!==h[e])return!0;return!1}return function(){function a(h,e,d,b,c){void 0===c&&(c={});this._glName=this._context=null;this._locations={};this._id=void 0;this._initialized=!1;this._fShader=this._vShader=null;this._defines={};this._nameToUniformLocation=
{};this._nameToAttribLocation={};this._nameToUniform1={};this._nameToUniform1v={};this._nameToUniform2={};this._nameToUniform3={};this._nameToUniform4={};this._nameToUniformMatrix3={};this._nameToUniformMatrix4={};h||console.error("RenderingContext isn't initialized!");0===e.length&&console.error("Shaders source should not be empty!");this._context=h;this._vertexShaderSource=e;this._fragmentShaderSource=d;if(Array.isArray(c))for(e=0;e<c.length;e++)this._defines[c[e]]="1";else this._defines=c;this._id=
a._nextId++;this._locations=b;n.isSome(h.instanceCounter)&&h.instanceCounter.increment(3,this)}Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"locations",{get:function(){return this._locations},enumerable:!1,configurable:!0});a.prototype.getDefine=function(a){return this._defines[a]};a.prototype.dispose=
function(){if(this._context){var a=this._context.gl;this._vShader&&(a.deleteShader(this._vShader),this._vShader=null);this._fShader&&(a.deleteShader(this._fShader),this._fShader=null);this._glName&&(a.deleteProgram(this._glName),this._glName=null);n.isSome(this._context.instanceCounter)&&this._context.instanceCounter.decrement(3,this);this._context=null}};a.prototype.initialize=function(){if(!this._initialized){this._vShader=this._loadShader(35633);this._fShader=this._loadShader(35632);this._vShader&&
this._fShader||console.error("Error loading shaders!");var a=this._context.gl,e=a.createProgram();a.attachShader(e,this._vShader);a.attachShader(e,this._fShader);for(var d in this._locations)a.bindAttribLocation(e,this._locations[d],d);a.linkProgram(e);this._glName=e;this._initialized=!0}};a.prototype.getUniformLocation=function(a){this.initialize();void 0===this._nameToUniformLocation[a]&&(this._nameToUniformLocation[a]=this._context.gl.getUniformLocation(this._glName,a));return this._nameToUniformLocation[a]};
a.prototype.hasUniform=function(a){return null!==this.getUniformLocation(a)};a.prototype.getAttribLocation=function(a){this.initialize();void 0===this._nameToAttribLocation[a]&&(this._nameToAttribLocation[a]=this._context.gl.getAttribLocation(this._glName,a));return this._nameToAttribLocation[a]};a.prototype.setUniform1i=function(a,e){var d=this._nameToUniform1[a];if(void 0===d||e!==d)this._context.bindProgram(this),this._context.gl.uniform1i(this.getUniformLocation(a),e),this._nameToUniform1[a]=
e};a.prototype.setUniform1iv=function(h,e){var d=this._nameToUniform1v[h];g(d,e)&&(this._context.bindProgram(this),this._context.gl.uniform1iv(this.getUniformLocation(h),e),void 0===d?this._nameToUniform1v[h]=a._arrayCopy(e):a._arrayAssign(e,d))};a.prototype.setUniform2iv=function(h,e){var d=this._nameToUniform2[h];g(d,e)&&(this._context.bindProgram(this),this._context.gl.uniform2iv(this.getUniformLocation(h),e),void 0===d?this._nameToUniform2[h]=a._arrayCopy(e):a._arrayAssign(e,d))};a.prototype.setUniform3iv=
function(h,e){var d=this._nameToUniform3[h];g(d,e)&&(this._context.bindProgram(this),this._context.gl.uniform3iv(this.getUniformLocation(h),e),void 0===d?this._nameToUniform3[h]=a._arrayCopy(e):a._arrayAssign(e,d))};a.prototype.setUniform4iv=function(h,e){var d=this._nameToUniform4[h];g(d,e)&&(this._context.bindProgram(this),this._context.gl.uniform4iv(this.getUniformLocation(h),e),void 0===d?this._nameToUniform4[h]=a._arrayCopy(e):a._arrayAssign(e,d))};a.prototype.setUniform1f=function(a,e){var d=
this._nameToUniform1[a];if(void 0===d||e!==d)this._context.bindProgram(this),this._context.gl.uniform1f(this.getUniformLocation(a),e),this._nameToUniform1[a]=e};a.prototype.setUniform1fv=function(h,e){var d=this._nameToUniform1v[h];g(d,e)&&(this._context.bindProgram(this),this._context.gl.uniform1fv(this.getUniformLocation(h),e),void 0===d?this._nameToUniform1v[h]=a._arrayCopy(e):a._arrayAssign(e,d))};a.prototype.setUniform2f=function(a,e,d){var b=this._nameToUniform2[a];if(void 0===b||e!==b[0]||
d!==b[1])this._context.bindProgram(this),this._context.gl.uniform2f(this.getUniformLocation(a),e,d),void 0===b?this._nameToUniform2[a]=[e,d]:(b[0]=e,b[1]=d)};a.prototype.setUniform2fv=function(h,e){var d=this._nameToUniform2[h];g(d,e)&&(this._context.bindProgram(this),this._context.gl.uniform2fv(this.getUniformLocation(h),e),void 0===d?this._nameToUniform2[h]=a._arrayCopy(e):a._arrayAssign(e,d))};a.prototype.setUniform3f=function(a,e,d,b){var c=this._nameToUniform3[a];if(void 0===c||e!==c[0]||d!==
c[1]||b!==c[2])this._context.bindProgram(this),this._context.gl.uniform3f(this.getUniformLocation(a),e,d,b),void 0===c?this._nameToUniform3[a]=[e,d,b]:(c[0]=e,c[1]=d,c[2]=b)};a.prototype.setUniform3fv=function(h,e){var d=this._nameToUniform3[h];g(d,e)&&(this._context.bindProgram(this),this._context.gl.uniform3fv(this.getUniformLocation(h),e),void 0===d?this._nameToUniform3[h]=a._arrayCopy(e):a._arrayAssign(e,d))};a.prototype.setUniform4f=function(a,e,d,b,c){var t=this._nameToUniform4[a];if(void 0===
t||e!==t[0]||d!==t[1]||b!==t[2]||c!==t[3])this._context.bindProgram(this),this._context.gl.uniform4f(this.getUniformLocation(a),e,d,b,c),void 0===t?this._nameToUniform4[a]=[e,d,b,c]:(t[0]=e,t[1]=d,t[2]=b,t[3]=c)};a.prototype.setUniform4fv=function(f,e){var d=this._nameToUniform4[f];g(d,e)&&(this._context.bindProgram(this),this._context.gl.uniform4fv(this.getUniformLocation(f),e),void 0===d?this._nameToUniform4[f]=a._arrayCopy(e):a._arrayAssign(e,d))};a.prototype.setUniformMatrix3fv=function(f,e,d){void 0===
d&&(d=!1);var b=this._nameToUniformMatrix3[f],c;c=n.isNone(b)?!0:9!==b.length?g(b,e):9!==b.length||b[0]!==e[0]||b[1]!==e[1]||b[2]!==e[2]||b[3]!==e[3]||b[4]!==e[4]||b[5]!==e[5]||b[6]!==e[6]||b[7]!==e[7]||b[8]!==e[8];c&&(this._context.bindProgram(this),this._context.gl.uniformMatrix3fv(this.getUniformLocation(f),d,e),void 0===b?this._nameToUniformMatrix3[f]=a._arrayCopy(e):a._arrayAssign(e,b))};a.prototype.setUniformMatrix4fv=function(f,e,d){void 0===d&&(d=!1);var b=this._nameToUniformMatrix4[f],c;
c=n.isNone(b)?!0:16!==b.length?g(b,e):16!==b.length||b[0]!==e[0]||b[1]!==e[1]||b[2]!==e[2]||b[3]!==e[3]||b[4]!==e[4]||b[5]!==e[5]||b[6]!==e[6]||b[7]!==e[7]||b[8]!==e[8]||b[9]!==e[9]||b[10]!==e[10]||b[11]!==e[11]||b[12]!==e[12]||b[13]!==e[13]||b[14]!==e[14]||b[15]!==e[15];c&&(this._context.bindProgram(this),this._context.gl.uniformMatrix4fv(this.getUniformLocation(f),d,e),void 0===b?this._nameToUniformMatrix4[f]=a._arrayCopy(e):a._arrayAssign(e,b))};a.prototype.assertCompatibleVertexAttributeLocations=
function(a){(a=a.locations===this.locations)||console.error("VertexAttributeLocations are incompatible");return a};a._padToThree=function(a){var e=a.toString();1E3>a&&(e=("  "+a).slice(-3));return e};a.prototype._addLineNumbers=function(f){var e=2;return f.replace(/\n/g,function(){return"\n"+a._padToThree(e++)+":"})};a.prototype._loadShader=function(a){var e=35633===a,d=e?this._vertexShaderSource:this._fragmentShaderSource,b="",c;for(c in this._defines)b+="#define "+c+" "+this._defines[c]+"\n";d=
b+d;"webgl2"===this._context.contextVersion&&(d=k.transpileShader(d,e?"vertex":"fragment"));e=this._context.gl;a=e.createShader(a);e.shaderSource(a,d);e.compileShader(a);return a};a._arrayCopy=function(a){for(var e=[],d=0;d<a.length;++d)e.push(a[d]);return e};a._arrayAssign=function(a,e){for(var d=0;d<a.length;++d)e[d]=a[d]};a._nextId=0;return a}()})},"esri/views/webgl/ShaderTranspiler":function(){define(["require","exports","./reservedWordsGLSL3","./lib/glsl-tokenizer/string"],function(q,a,r,n){function k(a){return a.map(function(d){return"eof"!==
d.type?d.data:""}).join("")}function g(a,d,b,c){c=c||b;for(var e=0;e<a.length;e++){var f=a[e];if("ident"===f.type&&f.data===b)return c in d?d[c]++:d[c]=0,g(a,d,c+"_"+d[c],c)}return b}function f(a,d,b){void 0===b&&(b="afterVersion");var c={data:"\n",type:"whitespace"},e=function(b){return b<a.length?/[^\r\n]$/.test(a[b].data):!1},f=function(c){for(var d=-1,a=0,e=-1,f=0;f<c.length;f++){var g=c[f];"preprocessor"===g.type&&(g.data.match(/\#(if|ifdef|ifndef)\s+.+/)?++a:g.data.match(/\#endif\s*.*/)&&--a);
("afterVersion"===b||"afterPrecision"===b)&&"preprocessor"===g.type&&/^#version/.test(g.data)&&(e=Math.max(e,f));if("afterPrecision"===b&&"keyword"===g.type&&"precision"===g.data){a:{for(g=f;g<c.length;g++){var t=c[g];if("operator"===t.type&&";"===t.data)break a}g=null}if(null===g)throw Error("precision statement not followed by any semicolons!");e=Math.max(e,g)}d<e&&0===a&&(d=f)}return d+1}(a);e(f-1)&&a.splice(f++,0,c);for(var g=0;g<d.length;g++){var h=d[g];a.splice(f++,0,h)}e(f-1)&&e(f)&&a.splice(f,
0,c)}Object.defineProperty(a,"__esModule",{value:!0});a.transpileShader=void 0;var h=["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"];a.transpileShader=function(a,d){a=n(a);var b;a:{b="100";var c="300 es";void 0===b&&(b="100");void 0===c&&(c="300 es");for(var e=/^\s*\#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/,l=0;l<a.length;l++){var m=a[l];if("preprocessor"===m.type){var u=e.exec(m.data);if(u){e=u[1].replace(/\s\s+/g," ");if(e===c){b=e;break a}if(e===
b){m.data="#version "+c;break a}throw Error("unknown glsl version: "+e);}}}a.splice(0,0,{type:"preprocessor",data:"#version "+c},{type:"whitespace",data:"\n"});b=null}if("300 es"===b)throw Error("shader is already glsl 300 es");e=m=null;l={};u={};for(b=0;b<a.length;++b)switch(c=a[b],c.type){case "keyword":"vertex"===d&&"attribute"===c.data?c.data="in":"varying"===c.data&&(c.data="vertex"===d?"out":"in");break;case "builtin":/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(c.data.trim())&&(c.data=
c.data.replace(/(2D|Cube|EXT)/g,""));if("fragment"===d&&"gl_FragColor"===c.data){if(!m){var m=g(a,l,"fragColor"),p=void 0;void 0===p&&(p="lowp");f(a,[{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:p},{type:"whitespace",data:" "},{type:"keyword",data:"vec4"},{type:"whitespace",data:" "},{type:"ident",data:m},{type:"operator",data:";"}],"afterPrecision")}c.data=m}if("fragment"===d&&"gl_FragData"===c.data){for(var p=a,q=void 0,w=void 0,x=-1,v=b+1;v<p.length;v++){var y=
p[v];if("operator"===y.type&&("["===y.data&&(q=v),"]"===y.data)){w=v;break}"integer"===y.type&&(x=parseInt(y.data,10))}q&&w&&p.splice(q,w-q+1);p=x;q=g(a,l,"fragData");w="mediump";void 0===w&&(w="lowp");f(a,[{type:"keyword",data:"layout"},{type:"operator",data:"("},{type:"keyword",data:"location"},{type:"whitespace",data:" "},{type:"operator",data:"\x3d"},{type:"whitespace",data:" "},{type:"integer",data:p.toString()},{type:"operator",data:")"},{type:"whitespace",data:" "},{type:"keyword",data:"out"},
{type:"whitespace",data:" "},{type:"keyword",data:w},{type:"whitespace",data:" "},{type:"keyword",data:"vec4"},{type:"whitespace",data:" "},{type:"ident",data:q},{type:"operator",data:";"}],"afterPrecision");c.data=q}else"fragment"===d&&"gl_FragDepthEXT"===c.data&&(e||(e=g(a,l,"gl_FragDepth")),c.data=e);break;case "ident":if(0<=r.indexOf(c.data)){if(p="vertex"===d)a:{for(p=b-1;0<=p;p--)if(q=a[p],"whitespace"!==q.type&&"block-comment"!==q.type)if("keyword"===q.type){if("attribute"===q.data||"in"===
q.data){p=!0;break a}}else break;p=!1}if(p)throw Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");c.data in u||(u[c.data]=g(a,l,c.data));c.data=u[c.data]}}for(b=a.length-1;0<=b;--b)c=a[b],"preprocessor"===c.type&&((d=c.data.match(/\#extension\s+(.*)\:/))&&d[1]&&0<=h.indexOf(d[1].trim())&&(d=a[b+1],a.splice(b,d&&"whitespace"===d.type?2:1)),(d=c.data.match(/\#ifdef\s+(.*)/))&&d[1]&&0<=h.indexOf(d[1].trim())&&(c.data="#if 1"),(d=c.data.match(/\#ifndef\s+(.*)/))&&
d[1]&&0<=h.indexOf(d[1].trim())&&(c.data="#if 0"));return k(a)}})},"esri/views/webgl/reservedWordsGLSL3":function(){define(["require","exports"],function(q,a){return"layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uint uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" ")})},
"esri/views/webgl/lib/glsl-tokenizer/string":function(){define(["./index"],function(q){"use strict;";return function(a){var r=q(),n=[],n=n.concat(r(a));return n=n.concat(r(null))}})},"esri/views/webgl/lib/glsl-tokenizer/index":function(){define(["./lib/literals","./lib/operators","./lib/builtins"],function(q,a,r){"use strict;";var n="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ");return function(){function k(b){b.length&&C.push({type:n[l],
data:b,position:v,line:w,column:x})}function g(){p=p.length?[]:p;if("/"===u&&"*"===m)return v=t+c-1,l=0,u=m,c+1;if("/"===u&&"/"===m)return v=t+c-1,l=1,u=m,c+1;if("#"===m)return l=2,v=t+c,c;if(/\s/.test(m))return l=9,v=t+c,c;y=/\d/.test(m);A=/[^\w_]/.test(m);v=t+c;l=y?4:A?3:9999;return c}function f(){if(("\r"===m||"\n"===m)&&"\\"!==u)return k(p.join("")),l=999,c;p.push(m);u=m;return c+1}function h(){if("."===u&&/\d/.test(m))return l=5,c;if("/"===u&&"*"===m)return l=0,c;if("/"===u&&"/"===m)return l=
1,c;if("."===m&&p.length){for(;e(p););l=5;return c}if(";"===m||")"===m||"("===m){if(p.length)for(;e(p););k(m);l=999;return c+1}var b=2===p.length&&"\x3d"!==m;if(/[\w_\d\s]/.test(m)||b){for(;e(p););l=999;return c}p.push(m);u=m;return c+1}function e(b){var c=0,d,e;do{d=a.indexOf(b.slice(0,b.length+c).join(""));e=a[d];if(-1===d){if(0<c--+b.length)continue;e=b.slice(0,1).join("")}k(e);v+=e.length;p=p.slice(e.length);return p.length}while(1)}function d(){if("."===m||/[eE]/.test(m))return p.push(m),l=5,
u=m,c+1;if("x"===m&&1===p.length&&"0"===p[0])return l=11,p.push(m),u=m,c+1;if(/[^\d]/.test(m))return k(p.join("")),l=999,c;p.push(m);u=m;return c+1}function b(){"f"===m&&(p.push(m),u=m,c+=1);if(/[eE]/.test(m)||"-"===m&&/[eE]/.test(u))return p.push(m),u=m,c+1;if(/[^\d]/.test(m))return k(p.join("")),l=999,c;p.push(m);u=m;return c+1}var c=0,t=0,l=999,m,u,p=[],C=[],w=1,x=0,v=0,y=!1,A=!1,z="",B;return function(a){C=[];if(null!==a){a=a.replace?a.replace(/\r\n/g,"\n"):a;c=0;z+=a;for(B=z.length;m=z[c],c<
B;){a=c;switch(l){case 0:"/"===m&&"*"===u?(p.push(m),k(p.join("")),l=999):(p.push(m),u=m);c+=1;break;case 1:c=f();break;case 2:c=f();break;case 3:c=h();break;case 4:c=d();break;case 11:/[^a-fA-F0-9]/.test(m)?(k(p.join("")),l=999):(p.push(m),u=m,c+=1);break;case 5:c=b();break;case 9999:if(/[^\d\w_]/.test(m)){var e=p.join("");l=-1<q.indexOf(e)?8:-1<r.indexOf(e)?7:6;k(p.join(""));l=999}else p.push(m),u=m,c+=1;break;case 9:/[^\s]/g.test(m)?(k(p.join("")),l=999):(p.push(m),u=m,c+=1);break;case 999:c=g()}if(a!==
c)switch(z[a]){case "\n":x=0;++w;break;default:++x}}t+=c;z=z.slice(c);return C}p.length&&k(p.join(""));l=10;k("(eof)");return C}}})},"esri/views/webgl/lib/glsl-tokenizer/lib/literals":function(){define([],function(){return"precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")})},
"esri/views/webgl/lib/glsl-tokenizer/lib/operators":function(){define([],function(){"use strict;";return"\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")})},"esri/views/webgl/lib/glsl-tokenizer/lib/builtins":function(){define([],function(){return"abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")})},
"esri/views/webgl/RenderingContext":function(){define("require exports ../../core/has ../../core/maybe ./enums ./InstanceCounter ./renderState ./capabilities/isWebGL2Context ./capabilities/load".split(" "),function(q,a,r,n,k,g,f,h,e){return function(){function a(b,a){var c=this;this.gl=null;this._blendEnabled=!1;this._blendColorState={r:0,g:0,b:0,a:0};this._blendFunctionState={srcRGB:1,dstRGB:0,srcAlpha:1,dstAlpha:0};this._blendEquationState={mode:32774,modeAlpha:32774};this._colorMaskState={r:!0,
g:!0,b:!0,a:!0};this._polygonCullingEnabled=!1;this._cullFace=1029;this._frontFace=2305;this._scissorTestEnabled=!1;this._scissorRect={x:0,y:0,width:0,height:0};this._depthTestEnabled=!1;this._depthFunction=513;this._clearDepth=1;this._depthWriteEnabled=!0;this._depthRange={zNear:0,zFar:1};this._viewport=null;this._polygonOffsetFillEnabled=this._stencilTestEnabled=!1;this._polygonOffset=[0,0];this._stencilFunction={face:1032,func:519,ref:0,mask:1};this._clearStencil=0;this._stencilWriteMask=1;this._stencilOperation=
{face:1032,fail:7680,zFail:7680,zPass:7680};this._clearColor={r:0,g:0,b:0,a:0};this._activeRenderbuffer=this._activeFramebuffer=this._activeIndexBuffer=this._activeVertexBuffer=this._activeShaderProgram=null;this._activeTextureUnit=0;this._textureUnitMap={};this._numOfTriangles=this._numOfDrawCalls=0;this.contextVersion=h.default(b)?"webgl2":"webgl";this.gl=b;b instanceof WebGLRenderingContext&&this.gl.getExtension("OES_element_index_uint");this._capabilities=e.loadCapabilities(b,a);b=this.gl.getParameter(this.gl.VIEWPORT);
this._viewport={x:b[0],y:b[1],width:b[2],height:b[3]};this._stateTracker=new f.StateTracker({setBlending:function(b){b?(c.setBlendingEnabled(!0),c.setBlendEquationSeparate(b.opRgb,b.opAlpha),c.setBlendFunctionSeparate(b.srcRgb,b.dstRgb,b.srcAlpha,b.dstAlpha),b=b.color,c.setBlendColor(b.r,b.g,b.b,b.a)):c.setBlendingEnabled(!1)},setCulling:function(b){b?(c.setFaceCullingEnabled(!0),c.setCullFace(b.face),c.setFrontFace(b.mode)):c.setFaceCullingEnabled(!1)},setPolygonOffset:function(b){b?(c.setPolygonOffsetFillEnabled(!0),
c.setPolygonOffset(b.factor,b.units)):c.setPolygonOffsetFillEnabled(!1)},setDepthTest:function(b){b?(c.setDepthTestEnabled(!0),c.setDepthFunction(b.func)):c.setDepthTestEnabled(!1)},setStencilTest:function(b){if(b){c.setStencilTestEnabled(!0);var a=b.function;c.setStencilFunction(a.func,a.ref,a.mask);b=b.operation;c.setStencilOp(b.fail,b.zFail,b.zPass)}else c.setStencilTestEnabled(!1)},setDepthWrite:function(b){b?(c.setDepthWriteEnabled(!0),c.setDepthRange(b.zNear,b.zFar)):c.setDepthWriteEnabled(!1)},
setColorWrite:function(b){b?c.setColorMask(b.r,b.g,b.b,b.a):c.setColorMask(!1,!1,!1,!1)},setStencilWrite:function(b){b?c.setStencilWriteMask(b.mask):c.setStencilWriteMask(0)}});this.enforceState()}Object.defineProperty(a.prototype,"contextAttributes",{get:function(){return this.gl.getContextAttributes()},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"parameters",{get:function(){if(!this._parameters){var b=this.capabilities.textureFilterAnisotropic;this._parameters={versionString:this.gl.getParameter(this.gl.VERSION),
maxVertexTextureImageUnits:this.gl.getParameter(this.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),maxVertexAttributes:this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS),maxMaxAnisotropy:b?this.gl.getParameter(b.MAX_TEXTURE_MAX_ANISOTROPY):void 0,maxTextureImageUnits:this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),maxTextureSize:this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE)}}return this._parameters},enumerable:!1,configurable:!0});a.prototype.dispose=function(){this.bindVAO(null);this.unbindBuffer(34962);
this.unbindBuffer(34963);this._textureUnitMap={};n.isSome(this.instanceCounter)&&(this.instanceCounter.printResourceCount(),this.instanceCounter.destroy());this._capabilities=this.gl=null};a.prototype.setPipelineState=function(b){this._stateTracker.setPipeline(b)};a.prototype.setBlendingEnabled=function(b){this._blendEnabled!==b&&(!0===b?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._blendEnabled=b,this._stateTracker.invalidateBlending())};a.prototype.setBlendColor=function(b,
a,d,e){if(b!==this._blendColorState.r||a!==this._blendColorState.g||d!==this._blendColorState.b||e!==this._blendColorState.a)this.gl.blendColor(b,a,d,e),this._blendColorState.r=b,this._blendColorState.g=a,this._blendColorState.b=d,this._blendColorState.a=e,this._stateTracker.invalidateBlending()};a.prototype.setBlendFunction=function(b,a){if(b!==this._blendFunctionState.srcRGB||a!==this._blendFunctionState.dstRGB)this.gl.blendFunc(b,a),this._blendFunctionState.srcRGB=b,this._blendFunctionState.srcAlpha=
b,this._blendFunctionState.dstRGB=a,this._blendFunctionState.dstAlpha=a,this._stateTracker.invalidateBlending()};a.prototype.setBlendFunctionSeparate=function(b,a,d,e){if(this._blendFunctionState.srcRGB!==b||this._blendFunctionState.srcAlpha!==d||this._blendFunctionState.dstRGB!==a||this._blendFunctionState.dstAlpha!==e)this.gl.blendFuncSeparate(b,a,d,e),this._blendFunctionState.srcRGB=b,this._blendFunctionState.srcAlpha=d,this._blendFunctionState.dstRGB=a,this._blendFunctionState.dstAlpha=e,this._stateTracker.invalidateBlending()};
a.prototype.setBlendEquation=function(b){this._blendEquationState.mode!==b&&(this.gl.blendEquation(b),this._blendEquationState.mode=b,this._blendEquationState.modeAlpha=b,this._stateTracker.invalidateBlending())};a.prototype.setBlendEquationSeparate=function(b,a){if(this._blendEquationState.mode!==b||this._blendEquationState.modeAlpha!==a)this.gl.blendEquationSeparate(b,a),this._blendEquationState.mode=b,this._blendEquationState.modeAlpha=a,this._stateTracker.invalidateBlending()};a.prototype.setColorMask=
function(b,a,d,e){if(this._colorMaskState.r!==b||this._colorMaskState.g!==a||this._colorMaskState.b!==d||this._colorMaskState.a!==e)this.gl.colorMask(b,a,d,e),this._colorMaskState.r=b,this._colorMaskState.g=a,this._colorMaskState.b=d,this._colorMaskState.a=e,this._stateTracker.invalidateColorWrite()};a.prototype.setClearColor=function(b,a,d,e){if(this._clearColor.r!==b||this._clearColor.g!==a||this._clearColor.b!==d||this._clearColor.a!==e)this.gl.clearColor(b,a,d,e),this._clearColor.r=b,this._clearColor.g=
a,this._clearColor.b=d,this._clearColor.a=e};a.prototype.setFaceCullingEnabled=function(b){this._polygonCullingEnabled!==b&&(!0===b?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._polygonCullingEnabled=b,this._stateTracker.invalidateCulling())};a.prototype.setPolygonOffsetFillEnabled=function(b){this._polygonOffsetFillEnabled!==b&&(!0===b?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._polygonOffsetFillEnabled=b,this._stateTracker.invalidatePolygonOffset())};
a.prototype.setPolygonOffset=function(b,a){if(this._polygonOffset[0]!==b||this._polygonOffset[1]!==a)this._polygonOffset[0]=b,this._polygonOffset[1]=a,this.gl.polygonOffset(b,a),this._stateTracker.invalidatePolygonOffset()};a.prototype.setCullFace=function(b){this._cullFace!==b&&(this.gl.cullFace(b),this._cullFace=b,this._stateTracker.invalidateCulling())};a.prototype.setFrontFace=function(b){this._frontFace!==b&&(this.gl.frontFace(b),this._frontFace=b,this._stateTracker.invalidateCulling())};a.prototype.setScissorTestEnabled=
function(b){this._scissorTestEnabled!==b&&(!0===b?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._scissorTestEnabled=b)};a.prototype.setScissorRect=function(b,a,d,e){if(this._scissorRect.x!==b||this._scissorRect.y!==a||this._scissorRect.width!==d||this._scissorRect.height!==e)this.gl.scissor(b,a,d,e),this._scissorRect.x=b,this._scissorRect.y=a,this._scissorRect.width=d,this._scissorRect.height=e};a.prototype.setDepthTestEnabled=function(b){this._depthTestEnabled!==
b&&(!0===b?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST),this._depthTestEnabled=b,this._stateTracker.invalidateDepthTest())};a.prototype.setClearDepth=function(b){this._clearDepth!==b&&(this.gl.clearDepth(b),this._clearDepth=b)};a.prototype.setDepthFunction=function(b){this._depthFunction!==b&&(this.gl.depthFunc(b),this._depthFunction=b,this._stateTracker.invalidateDepthTest())};a.prototype.setDepthWriteEnabled=function(b){this._depthWriteEnabled!==b&&(this.gl.depthMask(b),
this._depthWriteEnabled=b,this._stateTracker.invalidateDepthWrite())};a.prototype.setDepthRange=function(b,a){if(this._depthRange.zNear!==b||this._depthRange.zFar!==a)this.gl.depthRange(b,a),this._depthRange.zNear=b,this._depthRange.zFar=a,this._stateTracker.invalidateDepthWrite()};a.prototype.setStencilTestEnabled=function(b){this._stencilTestEnabled!==b&&(!0===b?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._stencilTestEnabled=b,this._stateTracker.invalidateStencilTest())};
a.prototype.setClearStencil=function(b){b!==this._clearStencil&&(this.gl.clearStencil(b),this._clearStencil=b)};a.prototype.setStencilFunction=function(b,a,d){if(this._stencilFunction.func!==b||this._stencilFunction.ref!==a||this._stencilFunction.mask!==d)this.gl.stencilFunc(b,a,d),this._stencilFunction.face=1032,this._stencilFunction.func=b,this._stencilFunction.ref=a,this._stencilFunction.mask=d,this._stateTracker.invalidateStencilTest()};a.prototype.setStencilFunctionSeparate=function(b,a,d,e){if(this._stencilFunction.face!==
b||this._stencilFunction.func!==a||this._stencilFunction.ref!==d||this._stencilFunction.mask!==e)this.gl.stencilFuncSeparate(b,a,d,e),this._stencilFunction.face=b,this._stencilFunction.func=a,this._stencilFunction.ref=d,this._stencilFunction.mask=e,this._stateTracker.invalidateStencilTest()};a.prototype.setStencilWriteMask=function(b){this._stencilWriteMask!==b&&(this.gl.stencilMask(b),this._stencilWriteMask=b,this._stateTracker.invalidateStencilWrite())};a.prototype.setStencilOp=function(b,a,d){if(this._stencilOperation.fail!==
b||this._stencilOperation.zFail!==a||this._stencilOperation.zPass!==d)this.gl.stencilOp(b,a,d),this._stencilOperation.face=1032,this._stencilOperation.fail=b,this._stencilOperation.zFail=a,this._stencilOperation.zPass=d,this._stateTracker.invalidateStencilTest()};a.prototype.setStencilOpSeparate=function(b,a,d,e){if(this._stencilOperation.face!==b||this._stencilOperation.fail!==a||this._stencilOperation.zFail!==d||this._stencilOperation.zPass!==e)this.gl.stencilOpSeparate(b,a,d,e),this._stencilOperation.face=
b,this._stencilOperation.face=b,this._stencilOperation.fail=a,this._stencilOperation.zFail=d,this._stencilOperation.zPass=e,this._stateTracker.invalidateStencilTest()};a.prototype.setActiveTexture=function(b){var a=this._activeTextureUnit;0<=b&&b!==this._activeTextureUnit&&(this.gl.activeTexture(k.BASE_TEXTURE_UNIT+b),this._activeTextureUnit=b);return a};a.prototype.clear=function(b){b&&this.gl.clear(b)};a.prototype.clearSafe=function(b,a){void 0===a&&(a=255);b&&(b&16384&&this.setColorMask(!0,!0,
!0,!0),b&256&&this.setDepthWriteEnabled(!0),b&1024&&this.setStencilWriteMask(a),this.gl.clear(b))};a.prototype.drawArrays=function(b,a,d){this.gl.drawArrays(b,a,d)};a.prototype.drawElements=function(b,a,d,e){5123===d?this.gl.drawElements(b,a,d,e):5125===d&&this.gl.drawElements(b,a,d,e)};a.prototype.logIno=function(){};Object.defineProperty(a.prototype,"capabilities",{get:function(){return this._capabilities},enumerable:!1,configurable:!0});a.prototype.setViewport=function(b,a,d,e){var c=this._viewport;
if(c.x!==b||c.y!==a||c.width!==d||c.height!==e)c.x=b,c.y=a,c.width=d,c.height=e,this.gl.viewport(b,a,d,e)};a.prototype.getViewport=function(){return{x:this._viewport.x,y:this._viewport.y,width:this._viewport.width,height:this._viewport.height}};a.prototype.bindProgram=function(b){b?this._activeShaderProgram!==b&&(b.initialize(),this.gl.useProgram(b.glName),this._activeShaderProgram=b):(this.gl.useProgram(null),this._activeShaderProgram=null)};a.prototype.bindTexture=function(b,c){void 0===c&&(c=0);
-1===a._MAX_TEXTURE_IMAGE_UNITS&&(a._MAX_TEXTURE_IMAGE_UNITS=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS));(c>=a._MAX_TEXTURE_IMAGE_UNITS||0>c)&&console.error("Input texture unit is out of range of available units!");var d=this._textureUnitMap[c];this.setActiveTexture(c);null==b||null==b.glName?(null!=d&&(this.gl.bindTexture(d.descriptor.target,null),d.setBoundToUnit(c,!1)),this._textureUnitMap[c]=null):d&&d.id===b.id?b.applyChanges():(d&&d.setBoundToUnit(c,!1),this.gl.bindTexture(b.descriptor.target,
b.glName),b.setBoundToUnit(c,!0),b.applyChanges(),this._textureUnitMap[c]=b)};a.prototype.bindFramebuffer=function(b){n.isNone(b)?(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this._activeFramebuffer=null):this._activeFramebuffer!==b&&(b.initialize()||this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,b.glName),this._activeFramebuffer=b)};a.prototype.bindBuffer=function(b){b&&(34962===b.bufferType?this._activeVertexBuffer=a._bindBuffer(this.gl,b,b.bufferType,this._activeVertexBuffer):this._activeIndexBuffer=
a._bindBuffer(this.gl,b,b.bufferType,this._activeIndexBuffer))};a.prototype.bindRenderbuffer=function(b){var a=this.gl;b||(a.bindRenderbuffer(a.RENDERBUFFER,null),this._activeRenderbuffer=null);this._activeRenderbuffer!==b&&(a.bindRenderbuffer(a.RENDERBUFFER,b.glName),this._activeRenderbuffer=b)};a.prototype.unbindBuffer=function(b){34962===b?this._activeVertexBuffer=a._bindBuffer(this.gl,null,b,this._activeVertexBuffer):this._activeIndexBuffer=a._bindBuffer(this.gl,null,b,this._activeIndexBuffer)};
a.prototype.bindVAO=function(b){b?this._activeVertexArrayObject&&this._activeVertexArrayObject.id===b.id||(b.bind(),this._activeVertexArrayObject=b):this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null)};a.prototype.getBoundTexture=function(b){return this._textureUnitMap[b]};a.prototype.getBoundFramebufferObject=function(){return this._activeFramebuffer};a.prototype.getBoundVAO=function(){return this._activeVertexArrayObject};a.prototype.resetState=
function(){this.bindProgram(null);this.bindVAO(null);this.bindFramebuffer(null);this.unbindBuffer(34962);this.unbindBuffer(34963);for(var b=0;b<this.parameters.maxTextureImageUnits;b++)this.bindTexture(null,b);this.setBlendingEnabled(!1);this.setBlendFunction(1,0);this.setBlendEquation(32774);this.setBlendColor(0,0,0,0);this.setFaceCullingEnabled(!1);this.setCullFace(1029);this.setFrontFace(2305);this.setPolygonOffsetFillEnabled(!1);this.setPolygonOffset(0,0);this.setScissorTestEnabled(!1);this.setScissorRect(0,
0,this.gl.canvas.width,this.gl.canvas.height);this.setDepthTestEnabled(!1);this.setDepthFunction(513);this.setDepthRange(0,1);this.setStencilTestEnabled(!1);this.setStencilFunction(519,0,0);this.setStencilOp(7680,7680,7680);this.setClearColor(0,0,0,0);this.setClearDepth(1);this.setClearStencil(0);this.setColorMask(!0,!0,!0,!0);this.setStencilWriteMask(4294967295);this.setDepthWriteEnabled(!0);this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)};a.prototype.enforceState=function(){var b=
this.gl,a=this.capabilities.vao;a&&a.bindVertexArray(null);for(var d=0;d<this.parameters.maxVertexAttributes;d++)b.disableVertexAttribArray(d);this._activeVertexBuffer?b.bindBuffer(this._activeVertexBuffer.bufferType,this._activeVertexBuffer.glName):b.bindBuffer(34962,null);this._activeIndexBuffer?b.bindBuffer(this._activeIndexBuffer.bufferType,this._activeIndexBuffer.glName):b.bindBuffer(34963,null);if(a&&this._activeVertexArrayObject){if(a=this._activeVertexArrayObject)this._activeVertexArrayObject.unbind(),
this._activeVertexArrayObject=null;this.bindVAO(a)}b.bindFramebuffer(b.FRAMEBUFFER,this._activeFramebuffer?this._activeFramebuffer.glName:null);b.useProgram(this._activeShaderProgram?this._activeShaderProgram.glName:null);b.blendColor(this._blendColorState.r,this._blendColorState.g,this._blendColorState.b,this._blendColorState.a);b.bindRenderbuffer(b.RENDERBUFFER,this._activeRenderbuffer?this._activeRenderbuffer.glName:null);!0===this._blendEnabled?b.enable(this.gl.BLEND):b.disable(this.gl.BLEND);
b.blendEquationSeparate(this._blendEquationState.mode,this._blendEquationState.modeAlpha);b.blendFuncSeparate(this._blendFunctionState.srcRGB,this._blendFunctionState.dstRGB,this._blendFunctionState.srcAlpha,this._blendFunctionState.dstAlpha);b.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a);b.clearDepth(this._clearDepth);b.clearStencil(this._clearStencil);b.colorMask(this._colorMaskState.r,this._colorMaskState.g,this._colorMaskState.b,this._colorMaskState.a);
b.cullFace(this._cullFace);b.depthFunc(this._depthFunction);b.depthRange(this._depthRange.zNear,this._depthRange.zFar);!0===this._depthTestEnabled?b.enable(b.DEPTH_TEST):b.disable(b.DEPTH_TEST);b.depthMask(this._depthWriteEnabled);b.frontFace(this._frontFace);b.lineWidth(1);!0===this._polygonCullingEnabled?b.enable(b.CULL_FACE):b.disable(b.CULL_FACE);b.polygonOffset(this._polygonOffset[0],this._polygonOffset[1]);!0===this._polygonOffsetFillEnabled?b.enable(b.POLYGON_OFFSET_FILL):b.disable(b.POLYGON_OFFSET_FILL);
b.scissor(this._scissorRect.x,this._scissorRect.y,this._scissorRect.width,this._scissorRect.height);!0===this._scissorTestEnabled?b.enable(b.SCISSOR_TEST):b.disable(b.SCISSOR_TEST);b.stencilFunc(this._stencilFunction.func,this._stencilFunction.ref,this._stencilFunction.mask);b.stencilOpSeparate(this._stencilOperation.face,this._stencilOperation.fail,this._stencilOperation.zFail,this._stencilOperation.zPass);!0===this._stencilTestEnabled?b.enable(b.STENCIL_TEST):b.disable(b.STENCIL_TEST);b.stencilMask(this._stencilWriteMask);
for(a=0;a<this.parameters.maxTextureImageUnits;a++)b.activeTexture(k.BASE_TEXTURE_UNIT+a),b.bindTexture(3553,null),(d=this._textureUnitMap[a])&&b.bindTexture(d.descriptor.target,d.glName);b.activeTexture(k.BASE_TEXTURE_UNIT+this._activeTextureUnit);b.viewport(this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height)};a._bindBuffer=function(a,d,e,f){if(!d)return a.bindBuffer(e,null),null;if(f===d)return f;a.bindBuffer(e,d.glName);return d};a._MAX_TEXTURE_IMAGE_UNITS=-1;return a}()})},
"esri/views/webgl/enums":function(){define(["require","exports"],function(q,a){Object.defineProperty(a,"__esModule",{value:!0});a.BASE_TEXTURE_UNIT=void 0;a.BASE_TEXTURE_UNIT=33984})},"esri/views/webgl/InstanceCounter":function(){define(["require","exports"],function(q,a){Object.defineProperty(a,"__esModule",{value:!0});a.InstanceCounter=a.allInstanceCounters=void 0;a.allInstanceCounters=new Set;q=function(){function r(){this._current=[];this._max=[];for(this._allocations=new Map;6>this._current.length;)this._current.push(0),
this._max.push(0);a.allInstanceCounters.add(this)}r.prototype.destroy=function(){a.allInstanceCounters.delete(this)};r.prototype.increment=function(a,k){k=++this._current[a];this._max[a]=Math.max(k,this._max[a])};r.prototype.decrement=function(a,k){--this._current[a]};Object.defineProperty(r.prototype,"max",{get:function(){return this._max},enumerable:!1,configurable:!0});Object.defineProperty(r.prototype,"current",{get:function(){return this._current},enumerable:!1,configurable:!0});r.prototype.printResourceCount=
function(){console.log("Live objects:");console.log("Textures: "+this._current[0]);console.log("Buffers: "+this._current[1]);console.log("VAOs: "+this._current[2]);console.log("Programs: "+this._current[3]);console.log("Framebuffers: "+this._current[4]);console.log("Renderbuffers: "+this._current[5]);if(0<this._allocations.size){console.log(this._allocations.size+" live object allocations:");var a=new Map;this._allocations.forEach(function(n){var g;a.set(n,(null!==(g=a.get(n))&&void 0!==g?g:0)+1)});
a.forEach(function(a,g){return console.log(a," : ",g)})}};return r}();a.InstanceCounter=q})},"esri/views/webgl/renderState":function(){define(["require","exports","tslib"],function(q,a,r){function n(a){return v.intern(a)}function k(a){return y.intern(a)}function g(a){return A.intern(a)}function f(a){return z.intern(a)}function h(a){return B.intern(a)}function e(a){return D.intern(a)}function d(a){return E.intern(a)}function b(a){return F.intern(a)}function c(a){return"["+a.join(",")+"]"}function t(a){return a?
c([a.srcRgb,a.srcAlpha,a.dstRgb,a.dstAlpha,a.opRgb,a.opAlpha,a.color.r,a.color.g,a.color.b,a.color.a]):null}function l(a){return a?c([a.face,a.mode]):null}function m(a){return a?c([a.factor,a.units]):null}function u(a){return a?c([a.func]):null}function p(a){return a?c([a.function.func,a.function.ref,a.function.mask,a.operation.fail,a.operation.zFail,a.operation.zPass]):null}function C(a){return a?c([a.zNear,a.zFar]):null}function w(a){return a?c([a.r,a.g,a.b,a.a]):null}function x(a){return a?c([a.mask]):
null}Object.defineProperty(a,"__esModule",{value:!0});a.StateTracker=a.makePipelineState=a.makeStencilWrite=a.makeColorWrite=a.makeDepthWrite=a.makeStencilTest=a.makeDepthTest=a.makePolygonOffset=a.makeCulling=a.makeBlending=a.defaultColorWriteParams=a.defaultDepthWriteParams=a.backFaceCullingParams=a.separateBlendingParams=a.simpleBlendingParams=void 0;a.simpleBlendingParams=function(a,b,d,c){void 0===d&&(d=32774);void 0===c&&(c=[0,0,0,0]);return{srcRgb:a,srcAlpha:a,dstRgb:b,dstAlpha:b,opRgb:d,opAlpha:d,
color:{r:c[0],g:c[1],b:c[2],a:c[3]}}};a.separateBlendingParams=function(a,b,d,c,e,f,g){void 0===e&&(e=32774);void 0===f&&(f=32774);void 0===g&&(g=[0,0,0,0]);return{srcRgb:a,srcAlpha:b,dstRgb:d,dstAlpha:c,opRgb:e,opAlpha:f,color:{r:g[0],g:g[1],b:g[2],a:g[3]}}};a.backFaceCullingParams={face:1029,mode:2305};a.defaultDepthWriteParams={zNear:0,zFar:1};a.defaultColorWriteParams={r:!0,g:!0,b:!0,a:!0};a.makeBlending=n;a.makeCulling=k;a.makePolygonOffset=g;a.makeDepthTest=f;a.makeStencilTest=h;a.makeDepthWrite=
e;a.makeColorWrite=d;a.makeStencilWrite=b;a.makePipelineState=function(a){return G.intern(a)};q=function(){function a(a,b){this.makeKey=a;this.makeRef=b;this.interns=new Map}a.prototype.intern=function(a){if(!a)return null;var b=this.makeKey(a),d=this.interns;d.has(b)||d.set(b,this.makeRef(a));return d.get(b)};return a}();var v=new q(t,function(a){return r.__assign({__tag:"Blending"},a)}),y=new q(l,function(a){return r.__assign({__tag:"Culling"},a)}),A=new q(m,function(a){return r.__assign({__tag:"PolygonOffset"},
a)}),z=new q(u,function(a){return r.__assign({__tag:"DepthTest"},a)}),B=new q(p,function(a){return r.__assign({__tag:"StencilTest"},a)}),D=new q(C,function(a){return r.__assign({__tag:"DepthWrite"},a)}),E=new q(w,function(a){return r.__assign({__tag:"ColorWrite"},a)}),F=new q(x,function(a){return r.__assign({__tag:"StencilWrite"},a)}),G=new q(function(a){return a?c([t(a.blending),l(a.culling),m(a.polygonOffset),u(a.depthTest),p(a.stencilTest),C(a.depthWrite),w(a.colorWrite),x(a.stencilWrite)]):null},
function(a){return{blending:n(a.blending),culling:k(a.culling),polygonOffset:g(a.polygonOffset),depthTest:f(a.depthTest),stencilTest:h(a.stencilTest),depthWrite:e(a.depthWrite),colorWrite:d(a.colorWrite),stencilWrite:b(a.stencilWrite)}});q=function(){function a(a){this._stencilWriteInvalid=this._colorWriteInvalid=this._depthWriteInvalid=this._stencilTestInvalid=this._depthTestInvalid=this._polygonOffsetInvalid=this._cullingInvalid=this._blendingInvalid=this._pipelineInvalid=!0;this._stateSetters=
a}a.prototype.setPipeline=function(a){if(this._pipelineInvalid||a!==this._pipeline)this.setBlending(a.blending),this.setCulling(a.culling),this.setPolygonOffset(a.polygonOffset),this.setDepthTest(a.depthTest),this.setStencilTest(a.stencilTest),this.setDepthWrite(a.depthWrite),this.setColorWrite(a.colorWrite),this.setStencilWrite(a.stencilWrite),this._pipeline=a;this._pipelineInvalid=!1};a.prototype.invalidateBlending=function(){this._pipelineInvalid=this._blendingInvalid=!0};a.prototype.invalidateCulling=
function(){this._pipelineInvalid=this._cullingInvalid=!0};a.prototype.invalidatePolygonOffset=function(){this._pipelineInvalid=this._polygonOffsetInvalid=!0};a.prototype.invalidateDepthTest=function(){this._pipelineInvalid=this._depthTestInvalid=!0};a.prototype.invalidateStencilTest=function(){this._pipelineInvalid=this._stencilTestInvalid=!0};a.prototype.invalidateDepthWrite=function(){this._pipelineInvalid=this._depthWriteInvalid=!0};a.prototype.invalidateColorWrite=function(){this._pipelineInvalid=
this._colorWriteInvalid=!0};a.prototype.invalidateStencilWrite=function(){this._pipelineInvalid=this._stencilTestInvalid=!0};a.prototype.setBlending=function(a){this._blending=this.setSubState(a,this._blending,this._blendingInvalid,this._stateSetters.setBlending);this._blendingInvalid=!1};a.prototype.setCulling=function(a){this._culling=this.setSubState(a,this._culling,this._cullingInvalid,this._stateSetters.setCulling);this._cullingInvalid=!1};a.prototype.setPolygonOffset=function(a){this._polygonOffset=
this.setSubState(a,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset);this._polygonOffsetInvalid=!1};a.prototype.setDepthTest=function(a){this._depthTest=this.setSubState(a,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest);this._depthTestInvalid=!1};a.prototype.setStencilTest=function(a){this._stencilTest=this.setSubState(a,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest);this._stencilTestInvalid=!1};a.prototype.setDepthWrite=
function(a){this._depthWrite=this.setSubState(a,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite);this._depthWriteInvalid=!1};a.prototype.setColorWrite=function(a){this._colorWrite=this.setSubState(a,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite);this._colorWriteInvalid=!1};a.prototype.setStencilWrite=function(a){this._stencilWrite=this.setSubState(a,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite);this._stencilTestInvalid=
!1};a.prototype.setSubState=function(a,b,d,c){if(d||a!==b)c(a),this._pipelineInvalid=!0;return a};return a}();a.StateTracker=q})},"esri/views/webgl/capabilities/isWebGL2Context":function(){define(["require","exports"],function(q,a){Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a){return window.WebGL2RenderingContext&&a instanceof window.WebGL2RenderingContext}})},"esri/views/webgl/capabilities/load":function(){define("require exports ./DisjointTimerQuery ./DrawBuffers ./Instancing ./isWebGL2Context ./LoseContext ./VertexArrayObjects".split(" "),
function(q,a,r,n,k,g,f,h){function e(a,b,c,e,f){if(e&&g.default(a))return!0;if(b[c])return!1;for(b=0;b<f.length;b++)if(a.getExtension(f[b]))return!0;return!1}Object.defineProperty(a,"__esModule",{value:!0});a.loadCapabilities=void 0;a.loadCapabilities=function(a,b){var c=b&&b.disabledExtensions||{},d=b&&b.debugWebGLExtensions||{},l,m,u,p,q,w,x,v,y,A,z=null,B=null,D=null,E=null;return{get drawBuffers(){A||(A=n.load(a,c));return A},get instancing(){l||(l=k.load(a));return l},get vao(){m||(m=h.load(a,
c));return m},get compressedTextureS3TC(){if(!u)if(c.compressedTextureS3TC)u=null;else{var b=a.getExtension("WEBGL_compressed_texture_s3tc");u=b?{COMPRESSED_RGB_S3TC_DXT1:b.COMPRESSED_RGB_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT1:b.COMPRESSED_RGBA_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT3:b.COMPRESSED_RGBA_S3TC_DXT3_EXT,COMPRESSED_RGBA_S3TC_DXT5:b.COMPRESSED_RGBA_S3TC_DXT5_EXT}:null}return u},get textureFilterAnisotropic(){if(!p)if(c.textureFilterAnisotropic)p=null;else{var b=a.getExtension("EXT_texture_filter_anisotropic")||
a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic");p=b?{MAX_TEXTURE_MAX_ANISOTROPY:b.MAX_TEXTURE_MAX_ANISOTROPY_EXT,TEXTURE_MAX_ANISOTROPY:b.TEXTURE_MAX_ANISOTROPY_EXT}:null}return p},get disjointTimerQuery(){q||(q=r.load(a,c));return q},get textureFloat(){if(!w)if(g.default(a))w={textureFloat:!0,textureFloatLinear:!c.textureFloatLinear&&!!a.getExtension("OES_texture_float_linear"),textureHalfFloat:!0,textureHalfFloatLinear:!c.textureHalfFloatLinear&&
!!a.getExtension("OES_texture_half_float_linear"),HALF_FLOAT:a.HALF_FLOAT};else if(a instanceof WebGLRenderingContext){var b=!c.textureHalfFloat&&a.getExtension("OES_texture_half_float");w={textureFloat:!c.textureFloat&&!!a.getExtension("OES_texture_float"),textureFloatLinear:!c.textureFloatLinear&&!!a.getExtension("OES_texture_float_linear"),textureHalfFloat:!!b,textureHalfFloatLinear:!c.textureHalfFloatLinear&&!!a.getExtension("OES_texture_half_float_linear"),HALF_FLOAT:b?b.HALF_FLOAT_OES:void 0}}else w=
null;return w},get colorBufferFloat(){if(!x)if(g.default(a)){var b=!c.colorBufferFloat&&a.getExtension("EXT_color_buffer_half_float"),d=!c.colorBufferFloat&&a.getExtension("EXT_color_buffer_float");x=b||d?{textureFloat:!!d,textureHalfFloat:!!b,R16F:a.R16F,RG16F:a.RG16F,RGBA16F:a.RGBA16F,R32F:a.R32F,RG32F:a.RG32F,RGBA32F:a.RGBA32F,R11F_G11F_B10F:a.R11F_G11F_B10F,RGB16F:a.RGB16F}:null}else a instanceof WebGLRenderingContext?(b=!c.colorBufferFloat&&a.getExtension("EXT_color_buffer_half_float"),d=!c.colorBufferFloat&&
a.getExtension("WEBGL_color_buffer_float"),x=b||d?{textureFloat:!!d,textureHalfFloat:!!b,RGBA16F:b?b.RGBA16F_EXT:void 0,RGB16F:b?b.RGB16F_EXT:void 0,RGBA32F:d?d.RGBA32F_EXT:void 0}:null):x=null;return x},get blendMinMax(){if(!v)if(g.default(a))v={MIN:a.MIN,MAX:a.MAX};else if(c.blendMinMax)v=null;else{var b=a.getExtension("EXT_blend_minmax");v=b?{MIN:b.MIN_EXT,MAX:b.MAX_EXT}:null}return v},get depthTexture(){null===z&&(z=e(a,c,"depthTexture",!0,["WEBGL_depth_texture","MOZ_WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"]));
return z},get standardDerivatives(){null===B&&(B=e(a,c,"standardDerivatives",!0,["OES_standard_derivatives"]));return B},get shaderTextureLOD(){null===D&&(D=e(a,c,"shaderTextureLOD",!0,["EXT_shader_texture_lod"]));return D},get fragDepth(){null===E&&(E=e(a,c,"fragDepth",!0,["EXT_frag_depth"]));return E},get loseContext(){y||(y=f.load(a,d));return y}}}})},"esri/views/webgl/capabilities/DisjointTimerQuery":function(){define(["require","exports","./isWebGL2Context"],function(q,a,r){Object.defineProperty(a,
"__esModule",{value:!0});a.load=void 0;a.load=function(a,k){if(k.disjointTimerQuery)return null;var g=a.getExtension("EXT_disjoint_timer_query")||a.getExtension("EXT_disjoint_timer_query_webgl2");return g?r.default(a)?{createQuery:function(){return a.createQuery()},resultAvailable:function(f){return a.getQueryParameter(f,a.QUERY_RESULT_AVAILABLE)},getResult:function(f){return a.getQueryParameter(f,a.QUERY_RESULT)},disjoint:function(){return a.getParameter(g.GPU_DISJOINT_EXT)},beginTimeElapsed:function(f){return a.beginQuery(g.TIME_ELAPSED_EXT,
f)},endTimeElapsed:function(){return a.endQuery(g.TIME_ELAPSED_EXT)},createTimestamp:function(a){return g.queryCounterEXT(a,g.TIMESTAMP_EXT)},timestampBits:function(){return a.getQuery(g.TIMESTAMP_EXT,g.QUERY_COUNTER_BITS_EXT)}}:{createQuery:function(){return g.createQueryEXT()},resultAvailable:function(a){return g.getQueryObjectEXT(a,g.QUERY_RESULT_AVAILABLE_EXT)},getResult:function(a){return g.getQueryObjectEXT(a,g.QUERY_RESULT_EXT)},disjoint:function(){return a.getParameter(g.GPU_DISJOINT_EXT)},
beginTimeElapsed:function(a){return g.beginQueryEXT(g.TIME_ELAPSED_EXT,a)},endTimeElapsed:function(){return g.endQueryEXT(g.TIME_ELAPSED_EXT)},createTimestamp:function(a){return g.queryCounterEXT(a,g.TIMESTAMP_EXT)},timestampBits:function(){return g.getQueryEXT(g.TIMESTAMP_EXT,g.QUERY_COUNTER_BITS_EXT)}}:null}})},"esri/views/webgl/capabilities/DrawBuffers":function(){define(["require","exports","./isWebGL2Context"],function(q,a,r){Object.defineProperty(a,"__esModule",{value:!0});a.load=void 0;a.load=
function(a,k){return k.disjointTimerQuery?null:r.default(a)?{drawBuffers:a.drawBuffers.bind(a),MAX_DRAW_BUFFERS:a.MAX_DRAW_BUFFERS,MAX_COLOR_ATTACHMENTS:a.MAX_COLOR_ATTACHMENTS}:k.drawBuffers?null:(a=a.getExtension("WEBGL_draw_buffers"))?{drawBuffers:a.drawBuffersWEBGL.bind(a),MAX_DRAW_BUFFERS:a.MAX_DRAW_BUFFERS_WEBGL,MAX_COLOR_ATTACHMENTS:a.MAX_COLOR_ATTACHMENTS_WEBGL}:null}})},"esri/views/webgl/capabilities/Instancing":function(){define(["require","exports","./isWebGL2Context"],function(q,a,r){Object.defineProperty(a,
"__esModule",{value:!0});a.load=void 0;a.load=function(a){return r.default(a)?{drawArraysInstanced:a.drawArraysInstanced.bind(a),drawElementsInstanced:a.drawElementsInstanced.bind(a),vertexAttribDivisor:a.vertexAttribDivisor.bind(a)}:(a=a.getExtension("ANGLE_instanced_arrays"))?{drawArraysInstanced:a.drawArraysInstancedANGLE.bind(a),drawElementsInstanced:a.drawElementsInstancedANGLE.bind(a),vertexAttribDivisor:a.vertexAttribDivisorANGLE.bind(a)}:null}})},"esri/views/webgl/capabilities/LoseContext":function(){define(["require",
"exports"],function(q,a){Object.defineProperty(a,"__esModule",{value:!0});a.load=void 0;a.load=function(a,n){var k=n.loseContext&&a.getExtension("WEBGL_lose_context");return k?{loseRenderingContext:function(){return k.loseContext()}}:null}})},"esri/views/webgl/capabilities/VertexArrayObjects":function(){define(["require","exports","./isWebGL2Context"],function(q,a,r){Object.defineProperty(a,"__esModule",{value:!0});a.load=void 0;a.load=function(a,k){return r.default(a)?{createVertexArray:a.createVertexArray.bind(a),
deleteVertexArray:a.deleteVertexArray.bind(a),bindVertexArray:a.bindVertexArray.bind(a)}:k.vao?null:(a=a.getExtension("OES_vertex_array_object")||a.getExtension("MOZ_OES_vertex_array_object")||a.getExtension("WEBKIT_OES_vertex_array_object"))?{createVertexArray:a.createVertexArrayOES.bind(a),deleteVertexArray:a.deleteVertexArrayOES.bind(a),bindVertexArray:a.bindVertexArrayOES.bind(a)}:null}})},"esri/views/webgl/ShaderCompiler":function(){define(["require","exports"],function(q,a){return function(){function a(a){this.readFile=
a}a.prototype.resolveIncludes=function(a){return this.resolve(a)};a.prototype.resolve=function(a,k){var g=this;void 0===k&&(k=new Map);if(k.has(a))return k.get(a);var f=this.read(a);if(!f)throw Error("cannot find shader file "+a);for(var h=/^[^\S\n]*#include\s+<(\S+)>[^\S\n]?/gm,e=h.exec(f),d=[];null!=e;)d.push({path:e[1],start:e.index,length:e[0].length}),e=h.exec(f);var b=0,c="";d.forEach(function(a){c+=f.slice(b,a.start);c+=k.has(a.path)?"":g.resolve(a.path,k);b=a.start+a.length});c+=f.slice(b);
k.set(a,c);return c};a.prototype.read=function(a){return this.readFile(a)};return a}()})},"esri/views/webgl/VertexArrayObject":function(){define(["require","exports","../../core/maybe","./Util"],function(q,a,r,n){return function(){function a(g,f,h,e,d){this._context=g;this._locations=f;this._layout=h;this._buffers=e;this._indexBuffer=d;this._glName=null;this._initialized=!1;this._id=a._nextId++;r.isSome(g.instanceCounter)&&g.instanceCounter.increment(2,this)}Object.defineProperty(a.prototype,"id",
{get:function(){return this._id},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"vertexBuffers",{get:function(){return this._buffers},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"indexBuffer",{get:function(){return this._indexBuffer},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"size",{get:function(){var a=this;return Object.keys(this._buffers).reduce(function(f,
g){return f+a._buffers[g].size},this._indexBuffer?this._indexBuffer.size:0)},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"locations",{get:function(){return this._locations},enumerable:!1,configurable:!0});a.prototype.dispose=function(a){void 0===a&&(a=!0);if(this._context){var f=this._context.capabilities.vao;f&&this._glName&&(f.deleteVertexArray(this._glName),this._glName=
null);this._context.getBoundVAO()===this&&this._context.bindVAO(null);if(a){for(var g in this._buffers)this._buffers[g].dispose(),delete this._buffers[g];this._indexBuffer&&(this._indexBuffer.dispose(),this._indexBuffer=null)}r.isSome(this._context.instanceCounter)&&this._context.instanceCounter.decrement(2,this);this._context=null}};a.prototype.initialize=function(){if(!this._initialized){var a=this._context.capabilities.vao;if(a){var f=a.createVertexArray();a.bindVertexArray(f);this._bindLayout();
a.bindVertexArray(null);this._glName=f}this._initialized=!0}};a.prototype.bind=function(){this.initialize();var a=this._context.capabilities.vao;a?a.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())};a.prototype._bindLayout=function(){var a=this._buffers,f=!!this._context.capabilities.vao,h=this._layout,e=this._indexBuffer;a||console.error("Vertex buffer dictionary is empty!");var d=this._context.gl,b;for(b in a){var c=a[b];c||console.error("Vertex buffer is uninitialized!");
var k=h[b];k||console.error("Vertex element descriptor is empty!");n.bindVertexBufferLayout(this._context,this._locations,c,k)}e&&(f?d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,e.glName):this._context.bindBuffer(e))};a.prototype.unbind=function(){this.initialize();var a=this._context.capabilities.vao;a?a.bindVertexArray(null):this._unbindLayout()};a.prototype._unbindLayout=function(){var a=this._buffers,f=this._layout;a||console.error("Vertex buffer dictionary is empty!");for(var h in a){var e=a[h];e||console.error("Vertex buffer is uninitialized!");
n.unbindVertexBufferLayout(this._context,this._locations,e,f[h])}(a=this._indexBuffer)&&this._context.unbindBuffer(a.bufferType)};a._nextId=0;return a}()})},"esri/views/webgl/Util":function(){define(["require","exports","tslib","../../core/compilerUtils","../../core/maybe"],function(q,a,r,n,k){function g(a){return a[0].stride}function f(a){switch(a){case 5126:return 4;case 5124:return 4;case 5125:return 4;case 5122:return 2;case 5123:return 2;case 5120:return 1;case 5121:return 1;default:throw n.neverReached(a),
Error("Unknown data type");}}function h(a){switch(a){case 6406:case 6409:return 1;case 6410:return 2;case 6407:return 3;case 6408:return 4;case 34041:return 4;case 33325:return 2;case 33326:return 4;case 35898:return 4;case 33327:return 4;case 33328:return 8;case 34842:return 8;case 34836:return 16;case 33189:return 2;case 34041:return 4;case 32854:return 2;case 36168:return 1;default:n.neverReached(a)}return 0}function e(a){if(k.isNone(a))return 0;if("colorAttachment"in a)return a.glName?e(a.colorAttachment)+
e(a.depthStencilAttachment):0;if("descriptor"in a)return a.glName?e(a.descriptor):0;var b=a.internalFormat||"pixelFormat"in a&&a.pixelFormat;if(!b)return 0;var c="hasMipmap"in a&&a.hasMipmap?1.3:1;a=a.width*a.height;return h(b)*a*c}Object.defineProperty(a,"__esModule",{value:!0});a.getGpuMemoryUsage=a.getBytesPerElementFormat=a.unbindVertexBufferLayout=a.bindVertexBufferLayout=a.setBaseInstanceOffset=a.copyFramebufferToTexture=a.findAttribute=a.hasAttribute=a.addDescriptor=a.getTypedArrayConstructor=
a.getBytesPerElement=a.getStride=a.vertexCount=void 0;a.vertexCount=function(a,b){return a.vertexBuffers[b].size/g(a.layout[b])};a.getStride=g;a.getBytesPerElement=f;a.getTypedArrayConstructor=function(a){switch(a){case 5120:return Int8Array;case 5126:return Float32Array;case 5124:return Int32Array;case 5122:return Int16Array;case 5121:return Uint8Array;case 5125:return Uint32Array;case 5123:return Uint16Array;default:throw n.neverReached(a),Error("Unknown data type");}};a.addDescriptor=function(a,
b,c,e,g,h){var d=f(e);if(0<a.length){var k=a[0].stride,l=k+d*c;a.forEach(function(a){return a.stride=l});a.push({name:b,count:c,type:e,offset:k,stride:l,normalized:g,divisor:h})}else a.push({name:b,count:c,type:e,offset:0,stride:d*c,normalized:g,divisor:h})};a.hasAttribute=function(a,b){for(var c=0;c<a.length;c++)if(a[c].name===b)return!0;return!1};a.findAttribute=function(a,b){for(var c=0;c<a.length;c++)if(a[c].name===b)return a[c];return null};a.copyFramebufferToTexture=function(a,b,c,e,f){void 0===
f&&(f=0);var d=a.getBoundFramebufferObject(),g=a.getBoundTexture(0);a.bindFramebuffer(b);a.bindTexture(c,0);a.gl.copyTexImage2D(a.gl.TEXTURE_2D,f,c.descriptor.pixelFormat,e[0],e[1],e[2],e[3],0);a.gl.flush();a.bindFramebuffer(d);a.bindTexture(g,0)};a.setBaseInstanceOffset=function(a,b){var c={},d;for(d in a)c[d]=a[d].map(function(a){return a.divisor?r.__assign(r.__assign({},a),{baseInstance:b}):a});return c};a.bindVertexBufferLayout=function(a,b,c,e,f){var d=a.gl,g=a.capabilities.instancing;a.bindBuffer(c);
for(a=0;a<e.length;a++){c=e[a];var h=b[c.name],k=(f?f:0+c.baseInstance?c.baseInstance:0)*c.stride;void 0===h&&console.error("There is no location for vertex attribute '"+c.name+"' defined.");c.baseInstance&&!c.divisor&&console.error("Vertex attribute '"+c.name+"' uses baseInstanceOffset without divisor.");if(4>=c.count)d.vertexAttribPointer(h,c.count,c.type,c.normalized,c.stride,c.offset+k),d.enableVertexAttribArray(h),c.divisor&&0<c.divisor&&g&&g.vertexAttribDivisor(h,c.divisor);else if(9===c.count)for(var l=
0;3>l;l++)d.vertexAttribPointer(h+l,3,c.type,c.normalized,c.stride,c.offset+12*l+k),d.enableVertexAttribArray(h+l),c.divisor&&0<c.divisor&&g&&g.vertexAttribDivisor(h+l,c.divisor);else if(16===c.count)for(l=0;4>l;l++)d.vertexAttribPointer(h+l,4,c.type,c.normalized,c.stride,c.offset+16*l+k),d.enableVertexAttribArray(h+l),c.divisor&&0<c.divisor&&g&&g.vertexAttribDivisor(h+l,c.divisor);else console.error("Unsupported vertex attribute element count: "+c.count)}};a.unbindVertexBufferLayout=function(a,b,
c,e){var d=a.gl,f=a.capabilities.instancing;a.bindBuffer(c);for(c=0;c<e.length;c++){var g=e[c],h=b[g.name];if(4>=g.count)d.disableVertexAttribArray(h),g.divisor&&0<g.divisor&&f&&f.vertexAttribDivisor(h,0);else if(9===g.count)for(var k=0;3>k;k++)d.disableVertexAttribArray(h+k),g.divisor&&0<g.divisor&&f&&f.vertexAttribDivisor(h+k,0);else if(16===g.count)for(k=0;4>k;k++)d.disableVertexAttribArray(h+k),g.divisor&&0<g.divisor&&f&&f.vertexAttribDivisor(h+k,0);else console.error("Unsupported vertex attribute element count: "+
g.count)}a.unbindBuffer(34962)};a.getBytesPerElementFormat=h;a.getGpuMemoryUsage=e})},"esri/views/webgl/ProgramCache":function(){define(["require","exports","./programUtils"],function(q,a,r){Object.defineProperty(a,"__esModule",{value:!0});a.ProgramCache=void 0;q=function(){function a(a){this._programCacheByTemplate=new Map;this._rctx=a}a.prototype.dispose=function(){this._programCacheByTemplate.forEach(function(a){a.programs.forEach(function(a){a.dispose()})});this._programCacheByTemplate=null};
a.prototype.getProgram=function(a,g){var f=this;this._programCacheByTemplate.has(a)||this.addProgramTemplate(a,function(g){return r.createProgram(f._rctx,a,g)});return this.getProgramTemplateInstance(a,g)};a.prototype.addProgramTemplate=function(a,g){this._programCacheByTemplate.set(a,{constructor:g,programs:new Map})};a.prototype.getProgramTemplateInstance=function(a,g){if(a=this._programCacheByTemplate.get(a)){var f=g?JSON.stringify(g):"default";a.programs.has(f)||(g=a.constructor(g),a.programs.set(f,
g));return a.programs.get(f)}return null};return a}();a.ProgramCache=q})},"esri/views/webgl/programUtils":function(){define(["require","exports","./Program"],function(q,a,r){Object.defineProperty(a,"__esModule",{value:!0});a.createProgram=a.glslifyDefineMap=void 0;a.glslifyDefineMap=function(a){var k="",g;for(g in a){var f=a[g];if("boolean"===typeof f)f&&(k+="#define "+g+"\n");else if("number"===typeof f)k+="#define "+g+" "+f.toFixed()+"\n";else if("object"===typeof f){var h=f.options,e=0,d;for(d in h)k+=
"#define "+h[d]+" "+(e++).toFixed()+"\n";k+="#define "+g+" "+h[f.value]+"\n"}}return k};a.createProgram=function(a,k,g,f){g=g||{};f=f||"";g="function"===typeof k.shaders?k.shaders(g):k.shaders;return new r(a,f+g.vertexShader,f+g.fragmentShader,k.attributes)}})},"*noref":1}});
define("require exports ./webgl/BufferObject ./webgl/FramebufferObject ./webgl/Program ./webgl/Renderbuffer ./webgl/RenderingContext ./webgl/ShaderCompiler ./webgl/Texture ./webgl/VertexArrayObject ./webgl/ProgramCache ./webgl/programUtils ./webgl/context-util".split(" "),function(q,a,r,n,k,g,f,h,e,d,b,c,t){Object.defineProperty(a,"__esModule",{value:!0});a.Renderbuffer=a.ShaderCompiler=a.Program=a.FramebufferObject=a.VertexArrayObject=a.Texture=a.RenderingContext=a.BufferObject=void 0;a.BufferObject=
r;a.FramebufferObject=n;a.Program=k;a.Renderbuffer=g;a.RenderingContext=f;a.ShaderCompiler=h;a.Texture=e;a.VertexArrayObject=d;Object.defineProperty(a,"ProgramCache",{enumerable:!0,get:function(){return b.ProgramCache}});Object.defineProperty(a,"createProgram",{enumerable:!0,get:function(){return c.createProgram}});Object.defineProperty(a,"glslifyDefineMap",{enumerable:!0,get:function(){return c.glslifyDefineMap}});Object.defineProperty(a,"createContextOrErrorHTML",{enumerable:!0,get:function(){return t.createContextOrErrorHTML}})});