// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../../core/Accessor ../../../core/Logger ../../../core/accessorSupport/decorators ../../../geometry/projection ../../../geometry/support/contains ../../../geometry/support/near ../../../geometry/support/webMercatorUtils".split(" "),function(h,d,e,n,p,f,k,l,q,m){Object.defineProperty(d,"__esModule",{value:!0});d.GeometryConstraint=void 0;var r=p.getLogger("esri.views.MapView");h=function(d){function c(a){a=d.call(this,a)||this;a.geometry=null;a.spatialReference=null;
return a}e.__extends(c,d);g=c;Object.defineProperty(c.prototype,"normalizedGeometry",{get:function(){if(!this.geometry||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference)){if(m.canProject(this.geometry,this.spatialReference))return m.project(this.geometry,this.spatialReference);if(k.isLoaded())return k.project(this.geometry,this.spatialReference);r.error("#constraints.geometry","unsupported coordinate system. The source geometry cannot be projected to the view's coordinate system. The projection engine cannot be loaded.",
{geometry:this.geometry});return null}return this.geometry},enumerable:!1,configurable:!0});c.prototype.constrain=function(a,b){if(!this.normalizedGeometry)return a;b=a.targetGeometry;if("extent"===this.normalizedGeometry.type?l.extentContainsPoint(this.normalizedGeometry,b):l.polygonContainsPoint(this.normalizedGeometry,b))return a;b=q.nearestCoordinate(this.normalizedGeometry,b).coordinate;if(!b)return a;a.targetGeometry=b;return a};c.prototype.clone=function(){var a,b;return new g({geometry:null===
(a=this.geometry)||void 0===a?void 0:a.clone(),spatialReference:null===(b=this.spatialReference)||void 0===b?void 0:b.clone()})};var g;e.__decorate([f.property({constructOnly:!0})],c.prototype,"geometry",void 0);e.__decorate([f.property({readOnly:!0,dependsOn:["geometry","spatialReference"]})],c.prototype,"normalizedGeometry",null);e.__decorate([f.property({constructOnly:!0})],c.prototype,"spatialReference",void 0);return c=g=e.__decorate([f.subclass("esri.views.2d.constraints.GeometryConstraint")],
c)}(n);d.GeometryConstraint=h});