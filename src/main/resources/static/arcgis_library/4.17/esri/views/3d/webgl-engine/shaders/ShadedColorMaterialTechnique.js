// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../../../core/libs/gl-matrix-2/vec4f64 ../core/shaderLibrary/Slice.glsl ../core/shaderLibrary/util/View.glsl ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/DefaultVertexAttributeLocations ./ShadedColorMaterial.glsl ../../../webgl/Program ../../../webgl/renderState @dojo/framework/shim/Promise".split(" "),function(m,f,g,n,p,l,q,h,c,r,t,u,k){Object.defineProperty(f,"__esModule",
{value:!0});f.ShadedColorMaterialTechniqueConfiguration=f.ShadedColorMaterialTechnique=void 0;h=function(c){function a(){return null!==c&&c.apply(this,arguments)||this}g.__extends(a,c);a.prototype.initializeProgram=function(b){var d=a.shader.get(),e=this.configuration,d=d.build({slicePlaneEnabled:e.slicePlaneEnabled,sliceHighlightDisabled:e.sliceHighlightDisabled,sliceEnabledForVertexPrograms:!1});return new u(b.rctx,d.generateSource("vertex"),d.generateSource("fragment"),r.Default3D)};a.prototype.bindPass=
function(b,d,a){l.View.bindProjectionMatrix(this.program,a.camera.projectionMatrix);b=d.color;var e=d.shadingTint;this.program.setUniform4fv("color",b);this.program.setUniform4fv("shadedColor",this.blendColor(v,e,b));this.program.setUniform3fv("shadingDirection",d.shadingDirection);this.program.setUniformMatrix4fv("viewNormal",a.camera.viewInverseTransposeMatrix)};a.prototype.blendColor=function(b,a,e){var d=1-a[3],c=a[3]+e[3]*d;if(0===c)return b[3]=c,b;b[0]=(a[0]*a[3]+e[0]*e[3]*d)/c;b[1]=(a[1]*a[3]+
e[1]*e[3]*d)/c;b[2]=(a[2]*a[3]+e[2]*e[3]*d)/c;b[3]=e[3];return b};a.prototype.bindDraw=function(b){l.View.bindView(this.program,b);p.Slice.bindUniformsWithOrigin(this.program,this.configuration,b)};a.prototype.initializePipeline=function(){var b=this.configuration,a=0===b.output?b.transparent&&k.separateBlendingParams(770,1,771,771):null;return k.makePipelineState({blending:a,culling:function(a){return 0!==a&&{face:1===a?1028:1029,mode:2305}}(b.cullFace),depthTest:{func:515},depthWrite:b.writeDepth&&
k.defaultDepthWriteParams,colorWrite:k.defaultColorWriteParams})};a.shader=new q.ReloadableShaderModule(t,function(){return new Promise(function(a,c){m(["./ShadedColorMaterial.glsl"],a,c)})});return a}(h.ShaderTechnique);f.ShadedColorMaterialTechnique=h;h=function(f){function a(){var a=null!==f&&f.apply(this,arguments)||this;a.output=0;a.cullFace=0;a.slicePlaneEnabled=!1;a.sliceHighlightDisabled=!1;a.transparent=!1;a.writeDepth=!0;return a}g.__extends(a,f);g.__decorate([c.parameter({count:7})],a.prototype,
"output",void 0);g.__decorate([c.parameter({count:3})],a.prototype,"cullFace",void 0);g.__decorate([c.parameter()],a.prototype,"slicePlaneEnabled",void 0);g.__decorate([c.parameter()],a.prototype,"sliceHighlightDisabled",void 0);g.__decorate([c.parameter()],a.prototype,"transparent",void 0);g.__decorate([c.parameter()],a.prototype,"writeDepth",void 0);return a}(c.ShaderTechniqueConfiguration);f.ShadedColorMaterialTechniqueConfiguration=h;var v=n.vec4f64.create()});