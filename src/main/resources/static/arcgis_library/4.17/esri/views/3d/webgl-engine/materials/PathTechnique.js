// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../core/shaderLibrary/Slice.glsl ../core/shaderLibrary/attributes/PathVertexPosition.glsl ../core/shaderLibrary/attributes/VertexNormal.glsl ../core/shaderLibrary/shading/ReadShadowMap.glsl ../core/shaderLibrary/util/View.glsl ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/StencilUtils ../shaders/Path.glsl ../../../webgl/Program ../../../webgl/renderState @dojo/framework/shim/Promise".split(" "),
function(m,c,d,n,p,q,r,f,t,e,a,l,u,v,g){Object.defineProperty(c,"__esModule",{value:!0});c.PathTechniqueConfiguration=c.PathTechnique=c.pathVertexAttributeLocations=c.PathVertexAttrConstants=void 0;c.PathVertexAttrConstants={POSITION:"position",PROFILERIGHT:"profileRight",PROFILEUP:"profileUp",PROFILEVERTEXANDNORMAL:"profileVertexAndNormal",FEATUREVALUE:"featureValue"};c.pathVertexAttributeLocations={position:0,profileRight:1,profileUp:2,profileVertexAndNormal:3,featureValue:4};e=function(a){function b(){return null!==
a&&a.apply(this,arguments)||this}d.__extends(b,a);b.prototype.initializeProgram=function(k){var h=b.shader.get(),a=this.configuration,h=h.build({output:a.output,viewingMode:k.viewingMode,slicePlaneEnabled:a.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,receiveShadows:a.receiveShadows,vvSize:a.vvSize,vvColor:a.vvColor,vvInstancingEnabled:!0,vvOpacity:a.vvOpacity,useOldSceneLightInterface:!1,pbrMode:0,useCustomDTRExponentForWater:!1,receiveAmbientOcclusion:a.receiveSSAO,
doubleSidedMode:a.doubleSidedMode});return new v(k.rctx,h.generateSource("vertex"),h.generateSource("fragment"),c.pathVertexAttributeLocations)};b.prototype.bindPass=function(k,a,b){f.View.bindProjectionMatrix(this.program,b.camera.projectionMatrix);this.program.setUniform3fv("size",a.size);0===this.configuration.output?(b.lighting.setUniforms(this.program,!1),this.program.setUniform3fv("size",a.size),this.program.setUniform3fv("ambient",a.ambient),this.program.setUniform3fv("diffuse",a.diffuse),
this.program.setUniform3fv("specular",a.specular),this.program.setUniform1f("opacity",a.opacity)):1!==this.configuration.output&&3!==this.configuration.output||f.View.bindNearFar(this.program,b.camera.nearFar);p.setVVUniforms(this.program,a)};b.prototype.bindDraw=function(a){f.View.bindView(this.program,a);n.Slice.bindUniformsWithOrigin(this.program,this.configuration,a);0===this.configuration.output&&(f.View.bindCamPosition(this.program,a.origin,a.camera.viewInverseTransposeMatrix),r.ReadShadowMap.bindView(this.program,
a));2===this.configuration.output&&q.VertexNormal.bindUniforms(this.program,a.camera.viewInverseTransposeMatrix)};b.prototype.initializePipeline=function(){var a=this.configuration,b=function(b){return g.makePipelineState({blending:b,culling:(a.slicePlaneEnabled?!1:!a.transparent&&0!==a.doubleSidedMode)&&{face:1028,mode:2305},depthTest:{func:513},depthWrite:g.defaultDepthWriteParams,colorWrite:g.defaultColorWriteParams,stencilWrite:a.sceneHasOcludees?l.stencilWriteMaskOn:null,stencilTest:a.sceneHasOcludees?
l.stencilBaseAllZerosParams:null})};return 0===a.output?b(a.transparent&&g.separateBlendingParams(770,1,771,771)):b(null)};b.shader=new t.ReloadableShaderModule(u,function(){return new Promise(function(a,b){m(["../shaders/Path.glsl"],a,b)})});return b}(e.ShaderTechnique);c.PathTechnique=e;e=function(c){function b(){var a=null!==c&&c.apply(this,arguments)||this;a.output=0;a.doubleSidedMode=0;a.receiveShadows=!1;a.receiveSSAO=!1;a.vvSize=!1;a.vvColor=!1;a.vvOpacity=!1;a.slicePlaneEnabled=!1;a.shadowMap=
!1;a.transparent=!1;a.sceneHasOcludees=!1;return a}d.__extends(b,c);d.__decorate([a.parameter({count:7})],b.prototype,"output",void 0);d.__decorate([a.parameter({count:3})],b.prototype,"doubleSidedMode",void 0);d.__decorate([a.parameter()],b.prototype,"receiveShadows",void 0);d.__decorate([a.parameter()],b.prototype,"receiveSSAO",void 0);d.__decorate([a.parameter()],b.prototype,"vvSize",void 0);d.__decorate([a.parameter()],b.prototype,"vvColor",void 0);d.__decorate([a.parameter()],b.prototype,"vvOpacity",
void 0);d.__decorate([a.parameter()],b.prototype,"slicePlaneEnabled",void 0);d.__decorate([a.parameter()],b.prototype,"shadowMap",void 0);d.__decorate([a.parameter()],b.prototype,"transparent",void 0);d.__decorate([a.parameter()],b.prototype,"sceneHasOcludees",void 0);return b}(a.ShaderTechniqueConfiguration);c.PathTechniqueConfiguration=e});