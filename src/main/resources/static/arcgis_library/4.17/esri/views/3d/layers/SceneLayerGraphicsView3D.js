// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../../Graphic ../../../core/arrayUtils ../../../core/Logger ../../../core/maybe ../../../core/promiseUtils ../../../core/SetUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../geometry/support/aaBoundingRect ../../../geometry/support/contains ../../../layers/graphics/dehydratedFeatures ../../../layers/graphics/hydratedFeatures ../../../layers/graphics/controllers/I3SOnDemandController ../../../layers/support/fieldUtils ../../../renderers/support/renderingInfoUtils ../../../tasks/operations/zscale ../../../tasks/support/Query ./I3SPointsWorkerHandle ./LayerView3D ./graphics/Graphics3DFeatureLikeLayerView ./graphics/QueryEngine ./i3s/I3SUtil ./support/DefinitionExpressionSceneLayerView ./support/fieldProperties ./support/layerViewUpdatingProperties ./support/PopupSceneLayerView ../../3d/support/debugFlags ../support/GraphicsMap ../support/orientedBoundingBox ../support/projectionUtils ../../layers/SceneLayerView ../../layers/support/FeatureFilter ../../support/Scheduler @dojo/framework/shim/Promise".split(" "),
function(na,K,d,X,oa,pa,h,z,A,qa,e,ra,la,sa,ta,ga,ua,va,B,L,wa,M,xa,ya,za,Aa,C,Ba,Ca,Da,Ea,x,Fa,Ga,N,Ha,Ia,Ja){function ma(d,b){for(var a=0;a<d.length;a++)for(var c=0,k=d[a].graphics;c<k.length;c++){var f=k[c];f.attributes||(f.attributes={});if(h.isSome(b)&&h.isSome(b.loadedAttributes))for(var n=0,g=b.loadedAttributes;n<g.length;n++){var l=g[n].name;b.attributeData[l]&&(f.attributes[l]=C.getCachedAttributeValue(b.attributeData[l],a))}}}var O=pa.getLogger("esri.views.3d.layers.SceneLayerGraphicsView3D"),
P=Ca.defineFieldProperties();K=function(y){function b(){var a=null!==y&&y.apply(this,arguments)||this;a._nodesAddedToStage=new Map;a.drapeSourceType=1;a._queryEngine=null;a._memCache=null;a.loadedGraphics=new Fa.GraphicsMap;a.holeFilling="always";a.progressiveLoadFactor=1;a.supportsHeightUnitConversion=!0;a._coordinatesOutsideExtentErrors=0;a._maxCoordinatesOutsideExtentErrors=20;return a}d.__extends(b,y);b.prototype.initialize=function(){var a=this,c=this.layer;C.checkSpatialReferences(c,this.view.spatialReference,
this.view.viewingMode);for(var b=0,f=["layer.renderer","layer.labelingInfo","layer.labelsVisible","definitionExpressionFields","filter"];b<f.length;b++)this.updatingHandles.add(this,f[b],function(){return a._updateRequiredFields()});this.updatingHandles.add(c,"rangeInfos",function(c){return a._rangeInfosChanged(c)},2);this.updatingHandles.add(c,"renderer",function(c,b){return a._rendererChange(c,b)});this.updatingHandles.add(this,"layer.objectIdFilter",function(){return a._filterChange()});this.updatingHandles.add(this,
"parsedDefinitionExpression",function(){return a._filterChange()});this.handles.add(qa.init(x,"I3S_TREE_SHOW_TILES",function(c){if(c&&!a._treeDebugger){var b=a._controller.crsIndex;(new Promise(function(a,c){na(["./support/I3STreeDebugger"],a,c)})).then(function(c){c=c.I3STreeDebugger;!a._treeDebugger&&x.I3S_TREE_SHOW_TILES&&(a._treeDebugger=new c({lv:a,view:a.view,nodeSR:b}))})}else c||!a._treeDebugger||x.I3S_TREE_SHOW_TILES||(a._treeDebugger.destroy(),a._treeDebugger=null)}));this._updateRequiredFields();
this._set("graphics3d",new za.default({owner:this,layer:c,preferredUpdatePolicy:1,scaleVisibilityEnabled:!0,filterVisibilityEnabled:!0,timeExtentVisibilityEnabled:!1,frustumVisibilityEnabled:!1,elevationAlignmentEnabled:!0,elevationFeatureExpressionEnabled:!1,suspendResumeExtentMode:"data",dataExtent:c.fullExtent,updateClippingExtent:function(c){return a._updateClippingExtent(c)}}));if(this.graphics3d.elevationAlignment)this.graphics3d.elevationAlignment.events.on("invalidate-elevation",function(c){return a._invalidateElevation(c)});
this.supportsHeightUnitConversion&&(this._verticalScale=wa.getGeometryZScaler("point",c.spatialReference,this.view.spatialReference));this.addResolvingPromise(this.graphics3d.setup());this._memCache=this.view.resourceController.memoryController.getMemCache(c.uid);this._controller=new va({layerView:this,scaleVisibilityEnabled:!1});this.when(function(){a._queryEngine=new Aa.default({layerView:a,task:Ja.Task.FEATURE_QUERY_ENGINE});a.updatingHandles.add(a,"maximumNumberOfFeatures",function(c){return a._controller.featureTarget=
c},2);a.updatingHandles.add(a,"suspended",function(c){c&&a._removeAllNodeData()})})};b.prototype.destroy=function(){this._treeDebugger&&(this._treeDebugger.destroy(),this._treeDebugger=null);this.graphics3d&&(this.graphics3d.destroy(),this._set("graphics3d",null));this._controller&&(this._controller.destroy(),this._controller=null);this._queryEngine&&(this._queryEngine.destroy(),this._queryEngine=null);this._memCache.destroy();this._nodesAddedToStage=this._memCache=null};Object.defineProperty(b.prototype,
"maximumNumberOfFeatures",{get:function(){var a=this.graphics3d&&this.graphics3d.graphicsCore&&this.graphics3d.graphicsCore.displayFeatureLimit;return a?a.maximumNumberOfFeatures:0},set:function(a){null!=a?(this._override("maximumNumberOfFeatures",a),this._controller.fixedFeatureTarget=!0):(this._clearOverride("maximumNumberOfFeatures"),this._controller.fixedFeatureTarget=!1)},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"maximumNumberOfFeaturesExceeded",{get:function(){return this.suspended?
!1:!!this._controller&&!this._controller.leafsReached},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"hasM",{get:function(){return!1},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"hasZ",{get:function(){return!0},enumerable:!1,configurable:!0});b.prototype.notifyGraphicUpdate=function(a,c){this.graphics3d.graphicsCore.notifyGraphicUpdate(a,c)};b.prototype.whenGraphicAttributes=function(a,c){return d.__awaiter(this,void 0,void 0,function(){var b,f=this;return d.__generator(this,
function(k){b=function(a){for(var c=new Map,b=[],k=0;k<a.length;k++){var d=a[k],n=f._findGraphicNodeAndIndex(d),g=c.get(n.node);g||(g={node:n.node,indices:[],graphics:[]},b.push(g),c.set(n.node,g));g.indices.push(n.index);g.graphics.push(d)}return b};return[2,C.whenGraphicAttributes(this.layer,a,this._getObjectIdField(),c,b,{populateObjectId:!0})]})})};b.prototype.getGraphicFromGraphicUid=function(a){if(!this.loadedGraphics)return null;var c=ua.hydrateGraphic(this.loadedGraphics.find(function(c){return c.uid===
a}),this.layer),b=this._getObjectIdField();if(!c||!c.attributes||!c.attributes[b])return null;c.layer=this.layer;c.sourceLayer=this.layer;return c};b.prototype.whenGraphicBounds=function(a,c){return this.graphics3d.graphicsCore.whenGraphicBounds(a,c)};b.prototype.computeAttachmentOrigin=function(a,c){return this.graphics3d.graphicsCore.computeAttachmentOrigin(a,c)};b.prototype.canResume=function(){return y.prototype.canResume.call(this)&&(!this._controller||this._controller.rootNodeVisible)};b.prototype.isUpdating=
function(){return!!(this._controller&&this._controller.updating||this.graphics3d&&this.graphics3d.updating)};b.prototype.getRenderingInfo=function(a,c,b){(a=L.getRenderingInfo(a,{renderer:c,arcade:b}))&&a.color&&(c=a.color,c[0]/=255,c[1]/=255,c[2]/=255);return a};b.prototype.getRenderingInfoAsync=function(a,c,b,f){return d.__awaiter(this,void 0,void 0,function(){return d.__generator(this,function(k){return[2,L.getRenderingInfoAsync(a,d.__assign({renderer:c,arcade:b},f))]})})};Object.defineProperty(b.prototype,
"symbolUpdateType",{get:function(){return this.graphics3d.graphicsCore.symbolUpdateType},enumerable:!1,configurable:!0});b.prototype._findGraphicNodeAndIndex=function(a){a=a.attributes[this.layer.objectIdField];for(var c=0,b=oa.keysOfMap(this._nodesAddedToStage);c<b.length;c++){var f=this._nodesAddedToStage.get(b[c]),d=this._findGraphicIndex(f.bundle,a);if(0<=d)return{node:f.node,index:d}}return null};b.prototype._findGraphicIndex=function(a,c){for(var b=0;b<a.length;b++)for(var f=0,d=a[b].featureIds;f<
d.length;f++)if(d[f]===c)return b;return-1};b.prototype.highlight=function(a){return this.graphics3d.highlight(a,this.layer.objectIdField)};b.prototype.extractBinaryPointData=function(a,c){return d.__awaiter(this,void 0,void 0,function(){var b,f,n;return d.__generator(this,function(d){switch(d.label){case 0:return b={geometryBuffer:a.geometryBuffer},f=new xa.I3SPointsWorkerHandle(this.view.resourceController.scheduler),[4,f.invoke(b,c).then(function(a){if(h.isSome(a))return{positionData:a.positions,
featureIds:a.featureIds};throw Error("Failed to decompress Draco point data");})];case 1:return n=d.sent(),[2,n]}})})};b.prototype.checkExtent=function(a,c){a&&!ta.extentContainsCoords3D(a,c)&&(this._coordinatesOutsideExtentErrors<this._maxCoordinatesOutsideExtentErrors&&O.error("Service Error: Coordinates outside of layer extent"),this._coordinatesOutsideExtentErrors+1===this._maxCoordinatesOutsideExtentErrors&&O.error("Maximum number of errors reached. Further errors are ignored."),this._coordinatesOutsideExtentErrors++)};
b.prototype.addNode=function(a,c,b){return d.__awaiter(this,void 0,void 0,function(){var f,k,g,l,e,p,m,Y,y,Q,R,A,S,B,Z,w,t,r,D,E,F,u,C,G,aa,x,T,ba,U,ha,H,ca,K,L,da,ea,I,ia,M,J,V,ja,P,fa,ka,W;return d.__generator(this,function(d){switch(d.label){case 0:if(!("geometryBuffer"in c||"pointData"in c))return[2,z.reject()];if(this._nodesAddedToStage.has(a.index))return O.error("I3S node "+a.id+" already added"),[2,void 0];f=this._getObjectIdField();if(d=this.layer.fullExtent)d=this.layer.fullExtent.clone(),
d.xmin-=.5,d.ymin-=.5,d.xmax+=.5,d.ymax+=.5,d.hasZ&&(d.zmin-=.5,d.zmax+=.5),d.hasM&&(d.mmin-=.5,d.mmax+=.5);k=d;g=this._controller.crsVertex;l=this.view.spatialReference;e=[];p=[];m=[];return"geometryBuffer"in c&&null!=c.geometryBuffer?[4,this.extractBinaryPointData(c,b)]:[3,2];case 1:Y=d.sent();if(null==Y)return[2,z.reject()];y=this.graphics3d.graphicsCore;Q=Y.positionData;R=Y.featureIds;A=Q.length/3;for(S=0;S<A;S++)B=h.isSome(a.serviceObb)?a.serviceObb.center:[0,0,0],Z=3*S,w=la.vec3f64.fromValues(Q[Z+
0],Q[Z+1],Q[Z+2]),ra.vec3.add(w,w,B),a.serviceObb||m.push(w[0],w[1],w[2]),k&&this.checkExtent(k,w),t=[],r=R[S],D={},null!=r&&(D[f]=r),E=null==r?X.generateUID():r,N.bufferToBuffer(w,g,0,q,l,0,1),F=ga.makeDehydratedPoint(q[0],q[1],q[2],l),u=this.loadedGraphics.get(E),h.isSome(u)?(u.level<a.level&&(v.property="geometry",v.graphic=u,v.oldValue=h.unwrap(u.geometry),v.newValue=F,u.geometry=F,y.graphicUpdateHandler(v)),t.push(u)):(C=X.generateUID(),t.push({objectId:E,uid:C,geometry:F,attributes:D,visible:!0,
level:a.level})),e.push.apply(e,t),p.push({featureIds:[r],graphics:t});d.label=2;case 2:if("pointData"in c)for(G=[0,0,0],aa=0,x=c.pointData;aa<x.length;aa++)for(T=x[aa],ba=T.featureDataPosition,U=ba.length,ha=T.geometries||[Ka[U]],R=T.featureIds,k&&this.checkExtent(k,ba),H=0;H<ha.length;H++)if(ca=ha[H],K=ca.params.type,"points"===K){t=[];L=H<R.length?H:0;r=R[L];D={};null!=r&&(D[f]=r);E=null==r?X.generateUID():r;da=void 0;"Embedded"===ca.type&&(da=ca.params.vertexAttributes.position);for(ea=0;ea<da.length;ea+=
U){for(I=0;I<U;I++)G[I]=ba[I]+da[ea+I];ia=3===U;a.serviceObb||m.push(G[0],G[1],ia?G[2]:0);N.bufferToBuffer(G,g,0,q,l,0,1);F=ga.makeDehydratedPoint(q[0],q[1],ia?q[2]:void 0,l);u=this.loadedGraphics.get(E);h.isSome(u)?t.push(u):t.push({objectId:E,uid:X.generateUID(),geometry:F,attributes:D,visible:!0})}e.push.apply(e,t);p.push({featureIds:T.featureIds,graphics:t})}a.numFeatures=e.length;this._updateNodeMemory(a);M=c.attributeDataInfo;J={bundle:p,attributeInfo:M,node:a};ma(J.bundle,J.attributeInfo);
0<m.length&&(V=this._controller.crsIndex,ja=V.isGeographic?this.view.renderSpatialReference:V,N.bufferToBuffer(m,g,0,m,ja,0,m.length/3),P={data:m,size:3,offsetIdx:0,strideIdx:3},a.serviceObb=Ga.compute(P),V.isGeographic&&N.vectorToVector(a.serviceObb.center,ja,a.serviceObb.center,V),this._controller.updateVisibility(a.index));if(!this._controller.isGeometryVisible(a))return this._cacheNodeData(J),[2,z.resolve()];if(this._verticalScale)for(fa=0,ka=e;fa<ka.length;fa++)W=ka[fa],this._verticalScale(W.geometry);
this._nodesAddedToStage.set(a.index,J);this.loadedGraphics.addMany(e);this._filterNode(J);this._treeDebugger&&this._treeDebugger.update();return[2,z.resolve()]}})})};b.prototype.isNodeLoaded=function(a){return this._nodesAddedToStage.has(a)};b.prototype.isNodeReloading=function(){return!1};b.prototype.updateNodeState=function(){};b.prototype._updateNodeMemory=function(a){a.memory=4096+(h.isSome(a.numFeatures)?a.numFeatures*this.graphics3d.graphicsCore.usedMemoryPerGraphic:0)};b.prototype._cacheNodeData=
function(a){var c=a.bundle.reduce(function(a,c){return c.graphics.reduce(function(a,c){return ga.estimateSize(c)+a},512+8*c.featureIds.length+a)},1024);this._memCache.put(this._getMemCacheKey(a.node),a,c)};b.prototype._getMemCacheKey=function(a){return""+a.index};b.prototype._removeAllNodeData=function(){var a=this;this._nodesAddedToStage.forEach(function(c){c&&(a._updateNodeMemory(c.node),a._cacheNodeData(c))});this._nodesAddedToStage.clear();this._treeDebugger&&this._treeDebugger.update();this.loadedGraphics.clear()};
b.prototype.removeNode=function(a){if(a=this._removeNodeStageData(a))this._updateNodeMemory(a.node),this._cacheNodeData(a)};b.prototype._removeNodeStageData=function(a){var c=this._nodesAddedToStage.get(a);if(!c)return null;for(var b=0,d=c.bundle;b<d.length;b++)this.loadedGraphics.removeMany(d[b].graphics);this._nodesAddedToStage.delete(a);this._treeDebugger&&this._treeDebugger.update();return c};b.prototype.loadCachedNodeData=function(a){return z.resolve(this._memCache.pop(this._getMemCacheKey(a)))};
b.prototype.addCachedNodeData=function(a,c,b){if(this._nodesAddedToStage.has(a.index))O.error("I3S node "+a.id+" already added");else{for(var d=0,k=c.bundle;d<k.length;d++)this.loadedGraphics.addMany(k[d].graphics);this._nodesAddedToStage.set(a.index,c);this._updateNodeMemory(a);this.setAttributeData(a.index,b);this._filterNode(c);this._treeDebugger&&this._treeDebugger.update();return z.resolve()}};b.prototype.getLoadedNodeIds=function(){var a=[];this._nodesAddedToStage.forEach(function(c){return a.push(c.node.id)});
return a.sort()};b.prototype.getVisibleNodes=function(){var a=[];this._nodesAddedToStage.forEach(function(c){return a.push(c.node)});return a};b.prototype.getLoadedNodeIndices=function(a){this._nodesAddedToStage.forEach(function(c,b){return a.push(b)})};b.prototype.getLoadedAttributes=function(a){if((a=this._nodesAddedToStage.get(a))&&h.isSome(a.attributeInfo))return a.attributeInfo.loadedAttributes};b.prototype.getAttributeData=function(a){if((a=this._nodesAddedToStage.get(a))&&h.isSome(a.attributeInfo))return a.attributeInfo.attributeData};
b.prototype.setAttributeData=function(a,c){if(a=this._nodesAddedToStage.get(a))a.attributeInfo=c,ma(a.bundle,c),this._filterNode(a),this.graphics3d.graphicsCore.labelsEnabled&&(c=a.bundle.map(function(a){return a.graphics.length&&a.graphics[0].uid}),this.graphics3d.graphicsCore.updateLabelingInfo(c))};b.prototype._updateClippingExtent=function(a){this._controller&&this._controller.updateClippingArea(a);return!1};b.prototype._getObjectIdField=function(){return this.layer.objectIdField||"OBJECTID"};
b.prototype._rendererChange=function(a,c){return d.__awaiter(this,void 0,void 0,function(){var b,f,e,g;return d.__generator(this,function(d){switch(d.label){case 0:return b=this.layer.fields,f=new Set,a?[4,a.collectRequiredFields(f,b)]:[3,2];case 1:return d.sent(),e=A.valuesOfSet(f).sort(),[3,3];case 2:e=[],d.label=3;case 3:return f.clear(),c?[4,c.collectRequiredFields(f,b)]:[3,5];case 4:return d.sent(),g=A.valuesOfSet(f).sort(),[3,6];case 5:g=[],d.label=6;case 6:if(e.length===g.length&&e.every(function(a,
c){return e[c]===g[c]}))return[2];this._reloadAllNodes();return[2]}})})};b.prototype._rangeInfosChanged=function(a){null!=a&&0<a.length&&O.warn("Unsupported property: rangeInfos are currently only serialized to and from web scenes but do not affect rendering.")};b.prototype._filterChange=function(){var a=this;this._nodesAddedToStage.forEach(function(c){return a._filterNode(c)})};b.prototype._reloadAllNodes=function(){this._removeAllNodeData();this._controller&&this._controller.restartNodeLoading()};
b.prototype._filterNode=function(a){var c=this._getObjectIdField(),b=null;if(this.layer.objectIdFilter)var d=this.layer.objectIdFilter.ids,e="include"===this.layer.objectIdFilter.method,b=function(a){return 0<=d.indexOf(a)===e};var g=this.parsedDefinitionExpression,l=0;for(a=a.bundle;l<a.length;l++)for(var h=0,p=a[l].graphics;h<p.length;h++){var m=p[h],q=m.visible;b&&!b(m.attributes[c])?m.visible=!1:m.visible=g?this._evaluateClause(g,m):!0;q!==m.visible&&(v.graphic=m,v.property="visible",v.oldValue=
q,v.newValue=m.visible,this.graphics3d.graphicsCore.graphicUpdateHandler(v))}};b.prototype._updateRequiredFields=function(){return d.__awaiter(this,void 0,void 0,function(){var a,c,b,e,n,g,l,q,p;return d.__generator(this,function(d){switch(d.label){case 0:return a=this,b=c=a.layer,e=b.fields,n=b.renderer,g=b.labelsVisible,l=a.filter,q=a.definitionExpressionFields,p=new Set,n?[4,n.collectRequiredFields(p,e)]:[3,2];case 1:d.sent(),d.label=2;case 2:return g?[4,B.collectLabelingFields(p,c)]:[3,4];case 3:d.sent(),
d.label=4;case 4:return h.isSome(l)?[4,B.collectFilterFields(p,c,l)]:[3,6];case 5:d.sent(),d.label=6;case 6:return B.collectFields(p,e,q),this._set("requiredFields",A.valuesOfSet(p).sort()),[2]}})})};b.prototype._invalidateElevation=function(a){var b=this._controller.crsIndex;N.boundingRectToBoundingRect(a.extent,a.spatialReference,W,b);this._controller.updateElevationChanged(W,b)};b.prototype.createQuery=function(){var a={outFields:["*"],returnGeometry:!0,outSpatialReference:this.view.spatialReference};
return h.isSome(this.filter)?this.filter.createQuery(a):new M(a)};b.prototype.queryFeatures=function(a,b){return this._queryEngine.executeQuery(this._ensureQuery(a),b&&b.signal)};b.prototype.queryObjectIds=function(a,b){return this._queryEngine.executeQueryForIds(this._ensureQuery(a),b&&b.signal)};b.prototype.queryFeatureCount=function(a,b){return this._queryEngine.executeQueryForCount(this._ensureQuery(a),b&&b.signal)};b.prototype.queryExtent=function(a,b){return this._queryEngine.executeQueryForExtent(this._ensureQuery(a),
b&&b.signal)};b.prototype._ensureQuery=function(a){return this._addDefinitionExpressionToQuery(h.isNone(a)?this.createQuery():M.from(a))};b.prototype.getUsedMemory=function(){var a=this.graphics3d&&this.graphics3d.graphicsCore;return a?a.usedMemory:0};b.prototype.getUnloadedMemory=function(){var a=this.graphics3d&&this.graphics3d.graphicsCore;return.8*((this._controller?this._controller.unloadedMemoryEstimate:0)+(a?a.unprocessedMemoryEstimate:0))};b.prototype.ignoresMemoryFactor=function(){return this._controller&&
this._controller.fixedFeatureTarget};b.prototype.getNumberOfNodes=function(){return this._nodesAddedToStage.size};b.prototype.getNumberOfFeatures=function(){return this.loadedGraphics.length};Object.defineProperty(b.prototype,"performanceInfo",{get:function(){var a={displayedNumberOfFeatures:this.loadedGraphics.length,maximumNumberOfFeatures:this.maximumNumberOfFeatures,totalNumberOfFeatures:-1,nodes:this.getNumberOfNodes(),core:this.graphics3d.graphicsCore.performanceInfo};this._controller&&this._controller.updateStats(a);
return a},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"test",{get:function(){return{controller:this._controller}},enumerable:!1,configurable:!0});d.__decorate([e.property()],b.prototype,"graphics3d",void 0);d.__decorate([e.property({aliasOf:"graphics3d.graphicsCore.hasDraped"})],b.prototype,"hasDraped",void 0);d.__decorate([e.property({type:Ia})],b.prototype,"filter",void 0);d.__decorate([e.property()],b.prototype,"loadedGraphics",void 0);d.__decorate([e.property()],b.prototype,
"layer",void 0);d.__decorate([e.property({aliasOf:"layer"})],b.prototype,"i3slayer",void 0);d.__decorate([e.property()],b.prototype,"_controller",void 0);d.__decorate([e.property({dependsOn:["_controller.updating","graphics3d.updating"]})],b.prototype,"updating",void 0);d.__decorate([e.property({dependsOn:["_controller.rootNodeVisible"]})],b.prototype,"suspended",void 0);d.__decorate([e.property()],b.prototype,"holeFilling",void 0);d.__decorate([e.property(Da.updatingProgress)],b.prototype,"updatingProgress",
void 0);d.__decorate([e.property({aliasOf:"_controller.updatingProgress"})],b.prototype,"updatingProgressValue",void 0);d.__decorate([e.property(P.requiredFields)],b.prototype,"requiredFields",void 0);d.__decorate([e.property(P.availableFields)],b.prototype,"availableFields",void 0);d.__decorate([e.property({type:Number,dependsOn:["graphics3d.graphicsCore.displayFeatureLimit"]})],b.prototype,"maximumNumberOfFeatures",null);d.__decorate([e.property({readOnly:!0,dependsOn:["suspended","_controller.leafsReached"]})],
b.prototype,"maximumNumberOfFeaturesExceeded",null);d.__decorate([e.property({readOnly:!0,aliasOf:"view.qualitySettings.sceneService.point.lodFactor"})],b.prototype,"lodFactor",void 0);d.__decorate([e.property({readOnly:!0})],b.prototype,"hasM",null);d.__decorate([e.property({readOnly:!0})],b.prototype,"hasZ",null);return b=d.__decorate([e.subclass("esri.views.3d.layers.SceneLayerGraphicsView3D")],b)}(Ba.DefinitionExpressionSceneLayerView(Ea.PopupSceneLayerView(ya.LayerView3D(Ha))));var Ka={2:{type:"Embedded",
params:{type:"points",vertexAttributes:{position:[0,0]}}},3:{type:"Embedded",params:{type:"points",vertexAttributes:{position:[0,0,0]}}}},q=la.vec3f64.create(),v={graphic:null,property:null,oldValue:null,newValue:null},W=sa.create();return K});