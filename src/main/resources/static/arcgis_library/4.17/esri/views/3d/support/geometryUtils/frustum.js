// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/ObjectStack ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4 ../../../../core/libs/gl-matrix-2/vec4f64 ../stack ./clipRay ./plane".split(" "),function(x,b,u,l,m,e,v,g,n,k,d){function h(a){if(a){var c=a.planes;a=a.points;return{planes:[d.create(c[0]),d.create(c[1]),d.create(c[2]),d.create(c[3]),d.create(c[4]),d.create(c[5])],points:[e.vec3f64.clone(a[0]),
e.vec3f64.clone(a[1]),e.vec3f64.clone(a[2]),e.vec3f64.clone(a[3]),e.vec3f64.clone(a[4]),e.vec3f64.clone(a[5]),e.vec3f64.clone(a[6]),e.vec3f64.clone(a[7])]}}return{planes:[d.create(),d.create(),d.create(),d.create(),d.create(),d.create()],points:[e.vec3f64.create(),e.vec3f64.create(),e.vec3f64.create(),e.vec3f64.create(),e.vec3f64.create(),e.vec3f64.create(),e.vec3f64.create(),e.vec3f64.create()]}}function p(a,c,f){void 0===f&&(f=h());for(var b=0;6>b;b++)d.copy(a[b],f.planes[b]);for(b=0;8>b;b++)m.vec3.copy(f.points[b],
c[b]);return f}function q(a){var c=a.planes;a=a.points;d.fromPoints(a[4],a[0],a[3],c[0]);d.fromPoints(a[1],a[5],a[6],c[1]);d.fromPoints(a[4],a[5],a[1],c[2]);d.fromPoints(a[3],a[2],a[6],c[3]);d.fromPoints(a[0],a[1],a[2],c[4]);d.fromPoints(a[5],a[4],a[7],c[5])}function r(a,c){for(var b=0;6>b;b++)if(!d.clip(a[b],c))return!1;return!0}Object.defineProperty(b,"__esModule",{value:!0});b.planePointIndices=b.intersectsAABB=b.intersectsPoint=b.intersectsLineSegment=b.intersectClipRay=b.intersectsRay=b.intersectsSphere=
b.recomputePlanes=b.fromMatrix=b.fromValues=b.copy=b.create=void 0;b.create=h;b.copy=function(a,c){void 0===c&&(c=h());return p(a.planes,a.points,c)};b.fromValues=p;b.fromMatrix=function(a,c,b){void 0===b&&(b=h());var d=b.points;a=l.mat4.multiply(n.sm4d.get(),c,a);l.mat4.invert(a,a);for(c=0;8>c;++c){var f=v.vec4.transformMat4(n.sv4d.get(),w[c],a);m.vec3.set(d[c],f[0]/f[3],f[1]/f[3],f[2]/f[3])}q(b);return b};b.recomputePlanes=q;b.intersectsSphere=function(a,b){for(var c=0;6>c;c++)if(d.isSphereFullyInside(a[c],
b))return!1;return!0};b.intersectsRay=function(a,b){return r(a,k.fromRay(b,t.get()))};b.intersectClipRay=function(a,b){for(var c=0;6>c;c++)if(!d.clipInfinite(a[c],b))return!1;return!0};b.intersectsLineSegment=function(a,b,d){return r(a,k.fromLineSegmentAndDirection(b,d,t.get()))};b.intersectsPoint=function(a,b){for(var c=0;6>c;c++)if(0<d.signedDistance(a[c],b))return!1;return!0};b.intersectsAABB=function(a,b){for(var c=0;6>c;c++)if(d.isAABBFullyInside(a[c],b))return!1;return!0};b.planePointIndices=
{bottom:[5,1,0,4],near:[0,1,2,3],far:[5,4,7,6],right:[1,5,6,2],left:[4,0,3,7],top:[7,3,2,6]};var w=[g.vec4f64.fromValues(-1,-1,-1,1),g.vec4f64.fromValues(1,-1,-1,1),g.vec4f64.fromValues(1,1,-1,1),g.vec4f64.fromValues(-1,1,-1,1),g.vec4f64.fromValues(-1,-1,1,1),g.vec4f64.fromValues(1,-1,1,1),g.vec4f64.fromValues(1,1,1,1),g.vec4f64.fromValues(-1,1,1,1)],t=new u.ObjectStack(k.create)});