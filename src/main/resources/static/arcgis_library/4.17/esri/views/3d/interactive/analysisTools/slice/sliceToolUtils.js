// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../../../../geometry ../../../../../core/compilerUtils ../../../../../core/Logger ../../../../../core/mathUtils ../../../../../core/maybe ../../../../../core/screenUtils ../../../../../core/libs/gl-matrix-2/mat4 ../../../../../core/libs/gl-matrix-2/mat4f64 ../../../../../core/libs/gl-matrix-2/quat ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../Manipulator3D ../../manipulatorUtils ./sliceToolConfig ../../../support/geometryUtils ../../../support/stack ../../../support/geometryUtils/vector ../../../webgl-engine/lib/Geometry ../../../webgl-engine/lib/GeometryData ../../../webgl-engine/lib/GeometryUtil ../../../webgl-engine/lib/Util ../../../webgl-engine/materials/ColorMaterial ../../../webgl-engine/materials/ImageMaterial ../../../webgl-engine/materials/NativeLineMaterial ../../../webgl-engine/materials/RibbonLineMaterial ../../../webgl-engine/materials/SlicePlaneMaterial".split(" "),
function(fa,b,w,Y,S,Z,G,D,N,m,O,T,e,v,F,aa,k,q,h,H,x,ba,z,I,J,ca,P,U,da){function V(a,c,d,f,r,b){var t=e.vec3.dot(a,c),g=h.sv3d.get(),l=h.sv3d.get();f=0===f?Math.abs(t)>k.VERTICAL_DOT_THRESHOLD?1:2:f;switch(f){case 2:t=Math.abs(t)<=k.SMALL_ANGLE_DOT_THRESHOLD?a:d.viewUp;e.vec3.cross(g,t,c);e.vec3.copy(l,c);break;case 1:e.vec3.cross(g,d.viewUp,c);e.vec3.cross(l,c,g);break;case 3:t=Math.abs(t)<=k.SMALL_ANGLE_DOT_THRESHOLD?c:d.viewUp;e.vec3.cross(g,t,a);e.vec3.cross(l,a,g);break;default:S.neverReached(f)}a=
e.vec3.cross(h.sv3d.get(),g,l);0<e.vec3.dot(a,d.viewForward)&&e.vec3.scale(l,l,-1);e.vec3.normalize(r,g);e.vec3.normalize(b,l)}function Q(a,c){switch(c){case 0:return{basis:a.basis1,direction:1,position:e.vec3.add(h.sv3d.get(),a.origin,a.basis1),edge:c};case 1:return{basis:a.basis2,direction:1,position:e.vec3.add(h.sv3d.get(),a.origin,a.basis2),edge:c};case 2:return{basis:a.basis1,direction:-1,position:e.vec3.subtract(h.sv3d.get(),a.origin,a.basis1),edge:c};case 3:return{basis:a.basis2,direction:-1,
position:e.vec3.subtract(h.sv3d.get(),a.origin,a.basis2),edge:c}}}function R(a,c,d){var f=d.projectPoint(e.vec3.add(h.sv3d.get(),a,c),N.castRenderScreenPointArray3(h.sv3d.get()));a=d.projectPoint(e.vec3.subtract(h.sv3d.get(),a,c),N.castRenderScreenPointArray3(h.sv3d.get()));return e.vec3.squaredLength(e.vec3.subtract(f,f,a))}function E(a){var c=e.vec3.length(a.basis1);a=e.vec3.length(a.basis2);return k.RESIZE_HANDLE_EDGE_PADDING_FRAC*Math.min(c,a)}function K(a){return 0!==a.direction[0]&&0!==a.direction[1]}
function W(a,c,d){var f=function(f){var b=(f?c:a).slice(0),r=e.vec3.subtract(h.sv3d.get(),b[0],b[1]);e.vec3.normalize(r,r);var g=e.vec3.subtract(h.sv3d.get(),b[b.length-1],b[b.length-2]);e.vec3.normalize(g,g);if(0<d.padding){var l=e.vec3.scale(v.vec3f64.create(),g,-d.padding);b[b.length-1]=e.vec3.add(l,l,b[b.length-1]);d.bothEnds&&(l=e.vec3.scale(v.vec3f64.create(),r,-d.padding),b[0]=e.vec3.add(l,l,b[0]))}var n=f?d.tipFocusMultiplier:1,l=d.tipLength*(d.focusTipLength?n:1),k=d.tipRadius*n,n=m.mat4.identity(h.sm4d.get());
if(0<d.padding){var p=l/4,C=e.vec3.set(h.sv3d.get(),0,p,0),p=1+d.padding/p;m.mat4.translate(n,n,C);m.mat4.scale(n,n,e.vec3.set(h.sv3d.get(),p,p,p));m.mat4.translate(n,n,e.vec3.scale(C,C,-1/p))}p=m.mat4.identity(O.mat4f64.create());C=v.vec3f64.fromValues(0,1,0);g=m.mat4.fromQuat(O.mat4f64.create(),T.quat.rotationTo(h.sq4d.get(),C,g));g[12]=b[b.length-1][0];g[13]=b[b.length-1][1];g[14]=b[b.length-1][2];m.mat4.multiply(g,g,n);f=d.tubeRadius*(f?d.tubeFocusMultiplier:1)+d.padding;var A=d.flat,q=[];if(D.isSome(A))q.push([f,
A.thickness/2],[-f,A.thickness/2],[-f,-A.thickness/2],[f,-A.thickness/2]);else for(A=0;12>A;A++){var y=A/12*2*Math.PI;q.push([Math.cos(y)*f,Math.sin(y)*f])}f=z.createPathExtrusionGeometry(q,b,[],[],!1);f=[{part:"tube",geometry:new x(f,"arrow-tube"),transform:p}];var w;D.isSome(d.flat)?p=new x(z.createExtrudedTriangle(l,k,k,d.flat.thickness),"arrow-tip"):(p=new x(z.createConeGeometry(l,k,24,!1,!1,!0),"arrow-tip"),w=new x(z.createConeGeometry(l,k,24,!1,!0,!1),"arrow-cap"));f.push({part:"tip",geometry:p,
transform:g});w&&f.push({part:"cap",geometry:w,transform:g});d.bothEnds&&(r=m.mat4.fromQuat(O.mat4f64.create(),T.quat.rotationTo(h.sq4d.get(),C,r)),r[12]=b[0][0],r[13]=b[0][1],r[14]=b[0][2],m.mat4.multiply(r,r,n),f.push({part:"tip",geometry:p,transform:r}),w&&f.push({part:"cap",geometry:w,transform:r}));return f};return{normal:f(!1),focused:f(!0)}}function X(a,c){var d=e.vec3.subtract(v.vec3f64.create(),a[a.length-1],a[a.length-2]);e.vec3.normalize(d,d);e.vec3.scale(d,d,k.ROTATE_HEADING_TIP_LENGTH);
e.vec3.add(d,d,a[a.length-1]);return c?(c=e.vec3.subtract(v.vec3f64.create(),a[0],a[1]),e.vec3.normalize(c,c),e.vec3.scale(c,c,k.ROTATE_HEADING_TIP_LENGTH),e.vec3.add(c,c,a[0]),w.__spreadArrays([c],a,[d])):w.__spreadArrays(a,[d])}Object.defineProperty(b,"__esModule",{value:!0});b.DidPointerMoveRecentlyFlag=b.isAlwaysDrapedLayer=b.shapeToPlane=b.planeToShape=b.addArrowTips=b.createArrowGeometry=b.createResizeManipulator=b.createGridManipulator=b.createOutlineManipulator=b.createRotateManipulator=b.createShiftManipulator=
b.isDiagonalResizeHandle=b.calculateDiagonalResizeHandleScale=b.calculateResizeHandlePadding=b.calculateScreenSpaceBasisLength2=b.updateRotateTiltHandle=b.updateRotateHeadingHandle=b.updateResizeHandle=b.updateShiftRestartHandle=b.createRotatePlane=b.calculateBoundedPlaneTranslateRotate=b.createShiftPlane=b.calculatePlaneHalfSize=b.resizePlane=b.forceHorizontalOrVertical=b.normalToBases=b.createPlane=void 0;var ea=Z.getLogger("esri.views.3d.interactive.analysisTools.slice.sliceToolUtils");b.createPlane=
function(a,c,d,f,b,k,u,g){u=u.worldUpAtPosition(a,h.sv3d.get());V(c,u,b,k,g.basis1,g.basis2);e.vec3.scale(g.basis1,g.basis1,d);e.vec3.scale(g.basis2,g.basis2,f);e.vec3.copy(g.origin,a);q.plane.fromVectorsAndPoint(g.basis2,g.basis1,g.origin,g.plane);return g};b.normalToBases=V;b.forceHorizontalOrVertical=function(a,c,d){var f=c.worldUpAtPosition(a.origin,h.sv3d.get());c=a.basis1;f=H.angleAroundAxis(f,a.basis2,a.basis1)+y;return q.boundedPlane.rotate(a,Math.round(f/y)*y-f,c,d)};b.resizePlane=function(a,
c,d,f,b,t){var r=e.vec3.copy(h.sv3d.get(),b.origin);e.vec3.add(r,r,e.vec3.scale(h.sv3d.get(),b.basis1,0>a.direction[0]?1:-1));e.vec3.add(r,r,e.vec3.scale(h.sv3d.get(),b.basis2,0>a.direction[1]?1:-1));var g=e.vec3.length(b.basis1),l=e.vec3.length(b.basis2);d=e.vec3.subtract(h.sv3d.get(),d,r);var n=e.vec3.subtract(h.sv3d.get(),c,r),m=0;c=0;if(K(a)){var p=E(b),C=E(t),m=g-.5*a.direction[0]*e.vec3.dot(b.basis1,n)/g;c=l-.5*a.direction[1]*e.vec3.dot(b.basis2,n)/l;n=C/p;m*=n;c*=n}n=.5*a.direction[0]*e.vec3.dot(b.basis1,
d)/g;p=.5*a.direction[1]*e.vec3.dot(b.basis2,d)/l;d=m+n;c+=p;g=e.vec3.scale(h.sv3d.get(),b.basis1,d/g);b=e.vec3.scale(h.sv3d.get(),b.basis2,c/l);(0>=d||R(t.origin,g,f)<=k.PLANE_MIN_BASIS_SCREEN_LEN2)&&e.vec3.copy(g,t.basis1);(0>=c||R(t.origin,b,f)<=k.PLANE_MIN_BASIS_SCREEN_LEN2)&&e.vec3.copy(b,t.basis2);f=e.vec3.copy(h.sv3d.get(),r);e.vec3.add(f,f,e.vec3.scale(h.sv3d.get(),g,0>a.direction[0]?-1:1));e.vec3.add(f,f,e.vec3.scale(h.sv3d.get(),b,0>a.direction[1]?-1:1));return q.boundedPlane.fromValues(f,
g,b,t)};b.calculatePlaneHalfSize=function(a,c){return k.INITIAL_PLANE_HALF_SIZE_VIEW_PROPORTION*Math.min(c.width,c.height)*c.computeRenderPixelSizeAt(a)};b.createShiftPlane=function(a,c,d,f){d=e.vec3.cross(h.sv3d.get(),c,d);e.vec3.cross(d,d,c);return q.plane.fromPositionAndNormal(a,d,f)};b.calculateBoundedPlaneTranslateRotate=function(a,c){return aa.calculateTranslateRotateFromBases(a.basis1,a.basis2,a.origin,c)};b.createRotatePlane=function(a,c,d,f){c=c.worldUpAtPosition(a.origin,h.sv3d.get());var b=
h.sv3d.get();switch(d){case 1:e.vec3.copy(b,c);break;case 2:e.vec3.copy(b,a.basis1)}return q.plane.fromPositionAndNormal(a.origin,b,f)};b.updateShiftRestartHandle=function(a,b,d,f){var c=Q(d,2),t=h.sm4d.get();m.mat4.rotateZ(t,b,c.edge*Math.PI/2);b=e.vec3.normalize(h.sv3d.get(),c.basis);b=e.vec3.scale(h.sv3d.get(),b,c.direction*f.computeScreenPixelSizeAt(c.position)*k.SHIFT_RESTART_OFFSET_DISTANCE);e.vec3.add(b,b,c.position);var c=f.projectPoint(b,N.castRenderScreenPointArray3(h.sv3d.get())),u,g=f.viewport;
u=g[0];var l=g[1],n=g[2],g=g[3],B=Math.min(n,g)/16,p=!0;c[0]<u+B?(c[0]=u+B,p=!1):c[0]>u+n-B&&(c[0]=u+n-B,p=!1);c[1]<l+B?(c[1]=l+B,p=!1):c[1]>l+g-B&&(c[1]=l+g-B,p=!1);u=p;q.ray.fromRender(f,c,L);e.vec3.normalize(L.direction,L.direction);f=h.sv3d.get();!u&&q.boundedPlane.intersectRay(d,L,f)&&(b=f);t[12]=0;t[13]=0;t[14]=0;a.modelTransform=t;a.renderLocation=v.vec3f64.clone(b);a.state=u?a.state|M:a.state&~M};b.updateResizeHandle=function(b,c,d,f){var a=e.vec3.length(f.basis1),k=e.vec3.length(f.basis2),
u=E(f),g=E(f),l=e.vec3.set(h.sv3d.get(),0,0,0);e.vec3.add(l,e.vec3.scale(h.sv3d.get(),f.basis1,c.direction[0]),e.vec3.scale(h.sv3d.get(),f.basis2,c.direction[1]));e.vec3.add(l,f.origin,l);f=0;var n=1;K(c)?(1===c.direction[0]&&-1===c.direction[1]?f=y:1===c.direction[0]&&1===c.direction[1]?f=Math.PI:-1===c.direction[0]&&1===c.direction[1]&&(f=3*Math.PI/2),n=g):(c=0!==c.direction[0]?1:2,f=1===c?y:0,n=(1===c?k:a)-u);a=m.mat4.identity(h.sm4d.get());m.mat4.rotateZ(a,a,f);m.mat4.scale(a,a,e.vec3.set(h.sv3d.get(),
n,n,n));m.mat4.multiply(a,d,a);a[12]=0;a[13]=0;a[14]=0;b.modelTransform=a;b.renderLocation=l};b.updateRotateHeadingHandle=function(a,b,d,f){f=f.worldUpAtPosition(d.origin,h.sv3d.get());var c=Q(d,0),e=m.mat4.identity(h.sm4d.get());m.mat4.rotateZ(e,e,c.edge*Math.PI/2);m.mat4.rotateX(e,e,-(H.angleAroundAxis(f,d.basis2,d.basis1)+y));m.mat4.multiply(e,b,e);e[12]=0;e[13]=0;e[14]=0;a.modelTransform=e;a.renderLocation=c.position};b.updateRotateTiltHandle=function(a,b,d){d=Q(d,1);var c=m.mat4.identity(h.sm4d.get());
m.mat4.rotateZ(c,c,d.edge*Math.PI/2);m.mat4.rotateX(c,c,y);m.mat4.multiply(c,b,c);c[12]=0;c[13]=0;c[14]=0;a.modelTransform=c;a.renderLocation=d.position};b.calculateScreenSpaceBasisLength2=R;b.calculateResizeHandlePadding=E;b.calculateDiagonalResizeHandleScale=function(a){return E(a)};b.isDiagonalResizeHandle=K;b.createShiftManipulator=function(a){var c=[v.vec3f64.fromValues(0,0,-k.SHIFT_RESTART_ARROW_LENGTH/2),v.vec3f64.fromValues(0,0,k.SHIFT_RESTART_ARROW_LENGTH/2)],d=X(c,!0),f=function(a,b){return W(c,
c,{tubeRadius:k.SHIFT_RESTART_TUBE_RADIUS,tipRadius:k.SHIFT_RESTART_TIP_RADIUS,tipLength:k.SHIFT_RESTART_TIP_LENGTH,tubeFocusMultiplier:k.SHIFT_RESTART_TUBE_FOCUS_MULTIPLIER,tipFocusMultiplier:k.SHIFT_RESTART_TIP_FOCUS_MULTIPLIER,padding:a,bothEnds:!0,flat:null,focusTipLength:!0,addCap:b})},e=f(0,!1),f=f(k.SHIFT_RESTART_ARROW_OUTLINE_WIDTH,!0),h=new J({color:k.SHIFT_RESTART_ARROW_TIP_COLOR,cullFace:2},"slice-shift");h.renderOccluded=16;var m=new J({color:k.SHIFT_RESTART_ARROW_CAP_COLOR,cullFace:2},
"slice-shift");m.renderOccluded=16;var g=new J({color:k.SHIFT_RESTART_TUBE_COLOR,cullFace:2},"slice-shift");g.renderOccluded=16;var l=new J({color:k.SHIFT_RESTART_OUTLINE_COLOR,transparent:!0,writeDepth:!1,cullFace:1},"slice-shift");l.renderOccluded=2;var n=new x(z.createPolylineGeometry([[0,0,0],[-k.SHIFT_RESTART_OFFSET_DISTANCE,0,0]]),"slice-rotate-heading"),q=new x(z.createPolylineGeometry([[0,0,0],[-k.SHIFT_RESTART_OFFSET_DISTANCE,0,0]]),"slice-rotate-heading"),p=new P({color:k.SHIFT_RESTART_CALLOUT_COLOR},
"slice-rotate-heading");p.renderOccluded=4;return new F.Manipulator3D({view:a,renderObjects:w.__spreadArrays(e.normal.map(function(a){var c=a.part;return{geometry:a.geometry,material:"tip"===c?h:"cap"===c?m:g,transform:a.transform,stateMask:1|b.DidPointerMoveRecentlyFlag}}),f.normal.map(function(a){return{geometry:a.geometry,material:l,transform:a.transform,stateMask:1|b.DidPointerMoveRecentlyFlag}}),[{geometry:n,material:p,stateMask:1|b.DidPointerMoveRecentlyFlag|M}],e.focused.map(function(a){var c=
a.part;return{geometry:a.geometry,material:"tip"===c?h:"cap"===c?m:g,transform:a.transform,stateMask:2|b.DidPointerMoveRecentlyFlag}}),f.focused.map(function(a){return{geometry:a.geometry,material:l,transform:a.transform,stateMask:2|b.DidPointerMoveRecentlyFlag}}),[{geometry:q,material:p,stateMask:2|b.DidPointerMoveRecentlyFlag|M}]),autoScaleRenderObjects:!1,collisionType:{type:"line",paths:[d]},collisionPriority:1,radius:k.SHIFT_RESTART_TIP_RADIUS,state:b.DidPointerMoveRecentlyFlag})};b.createRotateManipulator=
function(a,c){var d=new ca({transparent:!0,writeDepth:!1,textureId:c.id},"slice-rotate"),f=k.ROTATE_HEADING_OFFSET_DISTANCE;c=k.ROTATE_HEADING_DISC_RADIUS;var e=c*k.ROTATE_HEADING_DISC_RADIUS_FOCUS_MULTIPLIER,h=function(a){var c,b,d=new Uint32Array([0,1,2,2,3,0]);return new x(new ba.GeometryData((c={},c[I.VertexAttrConstants.POSITION]={size:3,data:new Float32Array([f-a,-a,0,f+a,-a,0,f+a,a,0,f-a,a,0])},c[I.VertexAttrConstants.UV0]={size:2,data:new Float32Array([0,0,1,0,1,1,0,1])},c),(b={},b[I.VertexAttrConstants.POSITION]=
d,b[I.VertexAttrConstants.UV0]=d,b)))};d.renderOccluded=16;var m=new x(z.createPolylineGeometry([[0,0,0],[f-c,0,0]]),"slice-rotate-heading"),g=new x(z.createPolylineGeometry([[0,0,0],[f-e,0,0]]),"slice-rotate-heading"),l=new P({color:k.ROTATE_HEADING_CALLOUT_COLOR},"slice-rotate-heading");l.renderOccluded=4;d=[{geometry:h(c),material:d,stateMask:1|b.DidPointerMoveRecentlyFlag},{geometry:m,material:l,stateMask:1|b.DidPointerMoveRecentlyFlag},{geometry:h(e),material:d,stateMask:2|b.DidPointerMoveRecentlyFlag},
{geometry:g,material:l,stateMask:2|b.DidPointerMoveRecentlyFlag}];return new F.Manipulator3D({view:a,renderObjects:d,autoScaleRenderObjects:!1,collisionType:{type:"disc",direction:[0,0,1],offset:[f,0,0]},collisionPriority:1,radius:c/2,state:b.DidPointerMoveRecentlyFlag})};b.createOutlineManipulator=function(a){var c=new x(z.createPolylineGeometry([[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0],[-1,-1,0]]),"slice-outline"),b=w.__spreadArrays(k.PLANE_OUTLINE_COLOR),b=new U({color:b,writeDepth:!1,width:k.PLANE_OUTLINE_WIDTH},
"slice-outline");b.renderOccluded=4;return{manipulator:new F.Manipulator3D({view:a,renderObjects:[{geometry:c,material:b}],interactive:!1,autoScaleRenderObjects:!1,worldSized:!0}),material:b}};b.createGridManipulator=function(a){var b=new x(z.createSquareGeometry(),"slice-grid"),d=w.__spreadArrays(k.PLANE_BACKGROUND_COLOR),d=new da({backgroundColor:d,gridColor:k.GRID_COLOR,gridWidth:4},"slice-grid");d.renderOccluded=4;return{manipulator:new F.Manipulator3D({view:a,renderObjects:[{geometry:b,material:d}],
interactive:!1,autoScaleRenderObjects:!1,worldSized:!0}),material:d}};b.createResizeManipulator=function(a,b){var c=(b=K(b))?[v.vec3f64.fromValues(1,0,0),v.vec3f64.fromValues(0,0,0),v.vec3f64.fromValues(0,1,0)]:[v.vec3f64.fromValues(1,0,0),v.vec3f64.fromValues(-1,0,0)],e=new x(z.createPolylineGeometry(c),"slice-resize"),h=w.__spreadArrays(k.HANDLE_COLOR,[1]),m=function(a){a=new U({color:h,width:a},"slice-resize");a.renderOccluded=4;return a},q=function(){var a=new P({color:h},"slice-resize");a.renderOccluded=
4;return a},g=b?k.RESIZE_HANDLE_CORNER_WIDTH:k.RESIZE_HANDLE_EDGE_WIDTH,l=g*k.DISPLAY_FOCUS_MULTIPLIER;return new F.Manipulator3D({view:a,renderObjects:[{geometry:e,material:1<g?m(g):q(),stateMask:1},{geometry:e,material:1<l?m(l):q(),stateMask:2}],collisionType:{type:"line",paths:[c]},autoScaleRenderObjects:!1,worldSized:!0,radius:b?k.RESIZE_HANDLE_CORNER_INPUT_RADIUS:k.RESIZE_HANDLE_EDGE_INPUT_RADIUS})};b.createArrowGeometry=W;b.addArrowTips=X;b.planeToShape=function(a,b,d,f){if(D.isNone(a))return null;
var c=D.isSome(f.position)?f.position:new Y.Point;b.fromRenderCoords(a.origin,c,d);f.position=c;d=b.worldUpAtPosition(a.origin,h.sv3d.get());b=b.worldBasisAtPosition(a.origin,1,h.sv3d.get());f.width=2*e.vec3.length(a.basis1);f.height=2*e.vec3.length(a.basis2);f.tilt=G.rad2deg(H.angleAroundAxis(d,a.basis2,a.basis1)+y);f.heading=G.rad2deg(H.angleAroundAxis(a.basis1,b,d)-y);return f};b.shapeToPlane=function(a,b,d){if(D.isNone(a)||D.isNone(a.position))return null;if(!b.toRenderCoords(a.position,d.origin))return ea.error("Failed to project slice plane position, projection from "+
a.position.spatialReference.wkid+" is not supported"),null;b.worldBasisAtPosition(d.origin,0,d.basis1);b.worldBasisAtPosition(d.origin,1,d.basis2);q.plane.fromVectorsAndPoint(d.basis2,d.basis1,d.origin,d.plane);q.boundedPlane.rotate(d,-G.deg2rad(a.heading),q.boundedPlane.normal(d),d);q.boundedPlane.rotate(d,G.deg2rad(a.tilt),d.basis1,d);e.vec3.scale(d.basis1,d.basis1,a.width/2);e.vec3.scale(d.basis2,d.basis2,a.height/2);q.boundedPlane.updateUnboundedPlane(d);return d};b.isAlwaysDrapedLayer=function(a){switch(a.type){case "building-scene":case "csv":case "feature":case "geo-rss":case "geojson":case "graphics":case "group":case "integrated-mesh":case "kml":case "map-notes":case "ogc-feature":case "point-cloud":case "route":case "scene":case "stream":case "unknown":case "unsupported":case null:return!1;
case "base-dynamic":case "base-elevation":case "base-tile":case "bing-maps":case "elevation":case "imagery":case "imagery-tile":case "map-image":case "open-street-map":case "tile":case "vector-tile":case "wcs":case "web-tile":case "wms":case "wmts":return!0;default:return S.neverReached(a.type),!1}};b.DidPointerMoveRecentlyFlag=16;var M=32,L=q.ray.create(),y=Math.PI/2});