// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../core/Accessor ../../core/promiseUtils ../../core/accessorSupport/decorators ./interactiveToolUtils ./ManipulatorCollection".split(" "),function(e,d,b,f,g,c,h,k){Object.defineProperty(d,"__esModule",{value:!0});d.InteractiveToolBase=void 0;e=function(d){function a(a){a=d.call(this,a)||this;a.attached=!1;a.created=!1;a.completed=!1;a.manipulators=new k.ManipulatorCollection;a.deferCreation=!1;a._editableFlags=[];a._creationResolver=g.createResolver();return a}b.__extends(a,
d);Object.defineProperty(a.prototype,"active",{get:function(){return null!=this.view&&this.view.activeTool===this},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"isSupported",{get:function(){return!0},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"visible",{set:function(a){this._set("visible",a);a||h.setActive(this,!1);this.attached&&(a?this._show():this._hide())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"editable",{get:function(){return this.hasEditableFlag(0)},
set:function(a){this.setEditableFlag(0,a)},enumerable:!1,configurable:!0});a.prototype.attach=function(){if(!this.attached&&this.isSupported){this.manipulators.attach();this.onAttach();if(this.visible)this.onShow();this._set("attached",!0)}};a.prototype.detach=function(){this.attached&&(this.onHide(),this.onDetach(),this.manipulators.detach(),this._set("attached",!1))};a.prototype.handleInputEvent=function(a){if(this.attached)this.onInputEvent(a)};a.prototype.handleInputEventAfter=function(a){if(this.attached)this.onInputEventAfter(a)};
a.prototype.destroy=function(){this.manipulators.destroy();this._set("view",null)};a.prototype.setEditableFlag=function(a,b){this._editableFlags[a]=b;this.manipulators.isToolEditable=this._editableFlags.every(function(a){return null==a||a});this._updateManipulatorAttachment();0===a&&this.notifyChange("editable");this.onEditableChange()};a.prototype.hasEditableFlag=function(a){a=this._editableFlags[a];return null==a?!0:a};a.prototype.when=function(){return this._creationResolver.promise};a.prototype.rejectCreation=
function(a){this._creationResolver.reject(a)};a.prototype.initialize=function(){this.deferCreation||this.complete()};a.prototype.onAttach=function(){};a.prototype.onDetach=function(){};a.prototype.onShow=function(){};a.prototype.onHide=function(){};a.prototype.onEditableChange=function(){};a.prototype.onInputEvent=function(a){};a.prototype.onInputEventAfter=function(a){};Object.defineProperty(a.prototype,"internallyEditable",{get:function(){return this.hasEditableFlag(0)&&this.hasEditableFlag(1)},
enumerable:!1,configurable:!0});a.prototype.create=function(){this.created||(this._set("created",!0),this._creationResolver(this))};a.prototype.complete=function(){this.create();this._set("completed",!0)};a.prototype._show=function(){this._updateManipulatorAttachment();this.onShow()};a.prototype._hide=function(){this._updateManipulatorAttachment();this.onHide()};a.prototype._updateManipulatorAttachment=function(){this.attached&&this.visible?this.manipulators.attach():this.manipulators.detach()};b.__decorate([c.property({constructOnly:!0})],
a.prototype,"view",void 0);b.__decorate([c.property({dependsOn:["view.activeTool"],readOnly:!0})],a.prototype,"active",null);b.__decorate([c.property({value:!0})],a.prototype,"visible",null);b.__decorate([c.property({value:!0})],a.prototype,"editable",null);b.__decorate([c.property({readOnly:!0})],a.prototype,"attached",void 0);b.__decorate([c.property({readOnly:!0})],a.prototype,"created",void 0);b.__decorate([c.property({readOnly:!0})],a.prototype,"completed",void 0);b.__decorate([c.property({readOnly:!0})],
a.prototype,"manipulators",void 0);b.__decorate([c.property({constructOnly:!0})],a.prototype,"deferCreation",void 0);return a=b.__decorate([c.subclass("esri.views.interactive.InteractiveToolBase")],a)}(f);d.InteractiveToolBase=e});