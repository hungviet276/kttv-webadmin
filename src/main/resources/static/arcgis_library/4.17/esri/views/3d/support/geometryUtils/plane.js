// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/mathUtils ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../stack".split(" "),function(F,a,D,d,n,f){function l(b){void 0===b&&(b=a.UP);return[b[0],b[1],b[2],b[3]]}function x(b,c){void 0===c&&(c=l());return u(b[0],b[1],b[2],b[3],c)}function u(b,c,e,a,d){void 0===d&&(d=l());d[0]=b;d[1]=c;d[2]=e;d[3]=a;return d}function y(b,c,e){void 0===e&&(e=l());d.vec3.copy(e,c);c=d.vec3.dot(c,c);1E-5<Math.abs(c-1)&&1E-12<c&&d.vec3.scale(e,
e,1/Math.sqrt(c));z(e,b,e);return e}function A(b,c,e,a){void 0===a&&(a=l());return B(d.vec3.subtract(f.sv3d.get(),b,c),d.vec3.subtract(f.sv3d.get(),e,c),b,a)}function v(b,c,e,a,f){if(3>b.count)return!1;b.getVec(e,p);for(var g=a,k=!1;g<b.count-1&&!k;)b.getVec(g,m),g++,k=!d.vec3.exactEquals(p,m);if(!k)return!1;g=Math.max(g,f);for(k=!1;g<b.count&&!k;)b.getVec(g,q),g++,d.vec3.subtract(r,p,m),d.vec3.normalize(r,r),d.vec3.subtract(t,m,q),d.vec3.normalize(t,t),k=!d.vec3.exactEquals(p,q)&&!d.vec3.exactEquals(m,
q)&&Math.abs(d.vec3.dot(r,t))<E;if(!k)return 0===e&&1===a&&2===f?!1:v(b,c,0,1,2);A(p,m,q,c);return!0}function z(b,c,a){b!==a&&x(b,a);a[3]=-d.vec3.dot(a,c);return a}function B(b,c,a,g){void 0===g&&(g=l());b=d.vec3.cross(f.sv3d.get(),c,b);return y(a,b,g)}function C(b,c,a){b=d.vec3.scale(f.sv3d.get(),b,d.vec3.dot(b,c));d.vec3.subtract(a,c,b);return a}function h(b,c){return d.vec3.dot(b,c)+b[3]}function w(b,c,a,g,f,h){var e=d.vec3.dot(b,a);if(0===e)return!1;b=-(d.vec3.dot(b,c)+b[3])/e;f&&(b=g?Math.max(0,
b):D.clamp(b,0,1));if(0>b||!g&&1<b)return!1;d.vec3.add(h,c,d.vec3.scale(h,a,b));return!0}Object.defineProperty(a,"__esModule",{value:!0});a.UP=a.normal=a.signedDistance=a.distance=a.projectVector=a.projectPoint=a.clipInfinite=a.clip=a.isAABBFullyInside=a.isPointOutside=a.isPointInside=a.isSphereFullyOutside=a.isSphereFullyInside=a.intersectLineSegmentClamp=a.intersectLineSegment=a.intersectRay=a.fromVectorsAndPoint=a.negate=a.setOffsetFromPoint=a.fromManyPointsSampleAt=a.fromManyPoints=a.fromPoints=
a.fromPositionAndNormal=a.fromNormalAndOffset=a.fromValues=a.copy=a.wrap=a.create=void 0;a.create=l;a.wrap=function(b,c,a,d){return u(b,c,a,d,f.sv4d.get())};a.copy=x;a.fromValues=u;a.fromNormalAndOffset=function(b,c,a){void 0===a&&(a=l());d.vec3.copy(a,b);a[3]=c;return a};a.fromPositionAndNormal=y;a.fromPoints=A;a.fromManyPoints=function(b,c){return v(b,c,0,1,2)};a.fromManyPointsSampleAt=v;var E=.99619469809,p=n.vec3f64.create(),m=n.vec3f64.create(),q=n.vec3f64.create(),r=n.vec3f64.create(),t=n.vec3f64.create();
a.setOffsetFromPoint=z;a.negate=function(b,c){c[0]=-b[0];c[1]=-b[1];c[2]=-b[2];c[3]=-b[3];return c};a.fromVectorsAndPoint=B;a.intersectRay=function(b,c,a){return w(b,c.origin,c.direction,!0,!1,a)};a.intersectLineSegment=function(b,c,a){return w(b,c.origin,c.vector,!1,!1,a)};a.intersectLineSegmentClamp=function(b,c,a){return w(b,c.origin,c.vector,!1,!0,a)};a.isSphereFullyInside=function(b,a){var c=a.radius;return 0<=h(b,a.center)-c};a.isSphereFullyOutside=function(b,a){var c=a.radius;return 0>h(b,
a.center)+c};a.isPointInside=function(b,a){return 0<=h(b,a)};a.isPointOutside=function(b,a){return 0>h(b,a)};a.isAABBFullyInside=function(b,a){var c=a[0],d=a[1],f=a[2],h=a[3],k=a[4];a=a[5];return 0<=b[0]*(0<b[0]?c:h)+b[1]*(0<b[1]?d:k)+b[2]*(0<b[2]?f:a)+b[3]};a.clip=function(b,a){var c=d.vec3.dot(b,a.ray.direction);b=-h(b,a.ray.origin);if(0>b&&0<=c)return!1;if(-1E-6<c&&1E-6>c)return 0<b;if((0>b||0>c)&&!(0>b&&0>c))return!0;b/=c;0<c?b<a.c1&&(a.c1=b):b>a.c0&&(a.c0=b);return a.c0<=a.c1};a.clipInfinite=
function(a,c){var b=d.vec3.dot(a,c.ray.direction);a=-h(a,c.ray.origin);if(-1E-6<b&&1E-6>b)return 0<a;a/=b;0<b?a<c.c1&&(c.c1=a):a>c.c0&&(c.c0=a);return c.c0<=c.c1};a.projectPoint=function(a,c,e){var b=d.vec3.scale(f.sv3d.get(),a,-a[3]);c=d.vec3.subtract(f.sv3d.get(),c,b);a=C(a,c,f.sv3d.get());d.vec3.add(e,a,b);return e};a.projectVector=C;a.distance=function(a,c){return Math.abs(h(a,c))};a.signedDistance=h;a.normal=function(a){return a};a.UP=[0,0,1,0]});