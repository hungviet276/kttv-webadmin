// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define(["require","exports","../../../tiling","./CollisionBucketEntry"],function(f,g,h,e){Object.defineProperty(g,"__esModule",{value:!0});f=function(){function b(a,d){this.neighbors=Array(9);this._tiles=Array(d);for(var b=0;b<d;b++)this._tiles[b]=new e.default;this.key=a}Object.defineProperty(b.prototype,"isDirty",{get:function(){for(var a=0,b=this._tiles;a<b.length;a++)if(b[a].dirty)return!0;return!1},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"size",{get:function(){return this._tiles.length},
enumerable:!1,configurable:!0});b.prototype.getTile=function(a){return this._tiles[a]};b.prototype.getReference=function(a){return(a=this._tiles[a])&&a.reference};b.prototype.onRegisterLayer=function(a){this.invalidateRange(a);this._add(a)};b.prototype.onUnregisterLayer=function(a){this.invalidateRange(a);this._remove(a)};b.prototype.onLabelsRendered=function(){};b.prototype.invalidateRange=function(a){for(;a<this._tiles.length;a++)this._tiles[a].dirty=!0};b.prototype.add=function(a){this._add(a)};
b.prototype.remove=function(a){this._remove(a)};b.prototype.canDelete=function(){return 0===this._tiles.length};b.prototype.ready=function(){for(var a=0,b=this._tiles;a<b.length;a++)b[a].dirty=!1};b.prototype.computeNeighbors=function(a){this.neighbors[0]=this._getNeighbor(a,-1,-1);this.neighbors[1]=this._getNeighbor(a,0,-1);this.neighbors[2]=this._getNeighbor(a,1,-1);this.neighbors[3]=this._getNeighbor(a,-1,0);this.neighbors[4]=this;this.neighbors[5]=this._getNeighbor(a,1,0);this.neighbors[6]=this._getNeighbor(a,
-1,1);this.neighbors[7]=this._getNeighbor(a,0,1);this.neighbors[8]=this._getNeighbor(a,1,1)};b.prototype.reset=function(a,b,c){var d=this._tiles[c.index];d&&d.reset(a,b,c)};b.prototype._add=function(a){var b=[];if(a>=this._tiles.length)this._tiles.push(new e.default);else{for(var c=0;c<this._tiles.length;c++)c===a&&b.push(new e.default),b.push(this._tiles[c]);this._tiles=b}};b.prototype._remove=function(a){for(var b=[],c=0;c<this._tiles.length;c++)c!==a&&b.push(this._tiles[c]);this._tiles=b};b.prototype._getNeighbor=
function(a,b,c){var d=this.key;b=h.TileKey.getId(d.level,d.row+c,d.col+b,d.world);return a.has(b)?a.get(b):null};return b}();g.default=f});