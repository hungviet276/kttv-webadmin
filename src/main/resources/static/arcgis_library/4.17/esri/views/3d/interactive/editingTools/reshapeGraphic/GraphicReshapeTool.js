// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../../../../core/Evented ../../../../../core/Handles ../../../../../core/maybe ../../../../../core/watchUtils ../../../../../core/accessorSupport/decorators ./isSupportedGraphic ./ReshapeOperation ../../../../interactive/InteractiveToolBase".split(" "),function(f,c,d,k,l,g,m,e,h,n,p){Object.defineProperty(c,"__esModule",{value:!0});c.GraphicReshapeTool=void 0;f=function(c){function b(a){a=c.call(this,a)||this;a._handles=new l;a._reshapeOperation=null;a._internalGeometryUpdate=
!1;a.type="reshape-3d";return a}d.__extends(b,c);b.prototype.destroy=function(){this._handles.removeAll();this._reshapeOperation&&(this._reshapeOperation.destroy(),this._reshapeOperation=null);this._set("view",null);this._set("graphic",null)};Object.defineProperty(b.prototype,"selectionManagementDisabled",{get:function(){return!0},enumerable:!1,configurable:!0});b.prototype._updateGeometry=function(){var a=this.graphic.geometry;0!==h.isSupportedGraphic(this.graphic)||!g.isSome(a)||"polygon"!==a.type&&
"polyline"!==a.type?this._reshapeOperation.inputGeometry=null:this._reshapeOperation.inputGeometry=a.clone()};b.prototype._updateGraphic=function(){var a=this;this._handles.remove("onGraphicGeometryChange");this._updateGeometry();if(0===h.isSupportedGraphic(this.graphic)){var b=this.watch("graphic.geometry",function(){!1===a._internalGeometryUpdate&&a._updateGeometry()},!0);this._handles.add(b,"onGraphicGeometryChange")}};b.prototype.manipulatorSelectionChanged=function(){this._reshapeOperation&&
this._reshapeOperation.manipulatorSelectionChanged()};b.prototype._onReshapeGeometryChanged=function(){g.isNone(this.graphic)||(this._internalGeometryUpdate=!0,this.graphic.geometry=this._reshapeOperation.outputGeometry.clone(),this._internalGeometryUpdate=!1)};b.prototype.initialize=function(){var a=this;this._reshapeOperation=new n.ReshapeOperation({tool:this});this._handles.add([this._reshapeOperation.on("reshape",function(b){"reshape"===b.type&&a._onReshapeGeometryChanged();a.emit("reshape",b)}),
this._reshapeOperation.on("move",function(b){"move"===b.type&&a._onReshapeGeometryChanged();a.emit("move",b)}),this._reshapeOperation.on("vertex-add",function(b){a._onReshapeGeometryChanged();a.emit("vertex-add",b)}),this._reshapeOperation.on("vertex-remove",function(b){a._onReshapeGeometryChanged();a.emit("vertex-remove",b)}),this._reshapeOperation.on("immediate-click",function(){return a.emit("immediate-click")}),m.init(this,"graphic",function(){a._updateGraphic()},!0)])};b.prototype.onInputEvent=
function(a){"key-down"!==a.type||"Delete"!==a.key&&"Backspace"!==a.key||this._reshapeOperation.removeSelectedVertices()};b.prototype.reset=function(){};d.__decorate([e.property({constructOnly:!0,nonNullable:!0})],b.prototype,"view",void 0);d.__decorate([e.property({constructOnly:!0})],b.prototype,"graphic",void 0);d.__decorate([e.property({constructOnly:!0,nonNullable:!0,value:!0})],b.prototype,"enableZ",void 0);d.__decorate([e.property({readOnly:!0})],b.prototype,"type",void 0);return b=d.__decorate([e.subclass("esri.views.3d.interactive.editingTools.graphicReshape3D.GraphicReshapeTool")],
b)}(k.EventedMixin(p.InteractiveToolBase));c.GraphicReshapeTool=f});