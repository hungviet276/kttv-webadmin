// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../../core/Accessor ../../../core/Logger ../../../core/mathUtils ../../../core/mathUtils ../../../core/accessorSupport/decorators ../../../geometry/support/geodesicConstants ../support/mathUtils".split(" "),function(h,c,e,m,q,n,g,f,r,k){Object.defineProperty(c,"__esModule",{value:!0});c.TiltDefault=c.AltitudeDefault=c.Constraints=void 0;var t=q.getLogger("esri.views.3d.state.Constraints");h=function(p){function a(b){b=p.call(this,b)||this;b.collision=new u;b.distance=
Infinity;b.minimumPoiDistance=4;return b}e.__extends(a,p);Object.defineProperty(a.prototype,"altitude",{get:function(){return 2===this.mode?null:this._get("altitude")||null},set:function(b){2===this.mode?t.warn("Altitude constraint is ignored in local scenes"):this._set("altitude",b)},enumerable:!1,configurable:!0});a.prototype.clampAltitude=function(b){return this.altitude?n.clamp(b,this.altitude.min,this.altitude.max):b};a.prototype.clampTilt=function(b,a){if(!this.tilt)return a;b=this.tilt(b);
return n.clamp(a,b.min,b.max)};a.prototype.clampDistance=function(b){return Math.min(b,this.distance)};a.prototype.createDefaultTilt=function(){return 2===this.mode?this.createDefaultTiltLocal():this.createDefaultTiltGlobal()};a.prototype.createConstantMaxTilt=function(b){return function(a,d){void 0===d&&(d=l);d.min=c.TiltDefault.min;d.max=b;return d}};a.prototype.createDefaultTiltLocal=function(){var b=this.collision.enabled?k.makePiecewiseLinearFunction([[4E3,c.TiltDefault.max],[1E4,g.deg2rad(88)],
[6E6,g.deg2rad(88)]]):function(){return c.TiltDefault.max};return function(a,d){void 0===d&&(d=l);d.min=c.TiltDefault.min;d.max=b(a);return d}};a.prototype.createDefaultTiltGlobal=function(){var a=this.collision.enabled?k.makePiecewiseLinearFunction([[4E3,c.TiltDefault.max],[5E4,g.deg2rad(88)],[6E6,g.deg2rad(88)],[2E7,c.TiltDefault.min]]):k.makePiecewiseLinearFunction([[3E5,c.TiltDefault.max],[3E6,g.deg2rad(88)],[6E6,g.deg2rad(88)],[2E7,c.TiltDefault.min]]);return function(b,d){void 0===d&&(d=l);
d.min=c.TiltDefault.min;d.max=a(b);return d}};e.__decorate([f.property()],a.prototype,"altitude",null);e.__decorate([f.property({readOnly:!0})],a.prototype,"collision",void 0);e.__decorate([f.property()],a.prototype,"distance",void 0);e.__decorate([f.property({readOnly:!0})],a.prototype,"minimumPoiDistance",void 0);e.__decorate([f.property()],a.prototype,"tilt",void 0);e.__decorate([f.property({constructOnly:!0})],a.prototype,"mode",void 0);return a=e.__decorate([f.subclass("esri.views.3d.state.Constraints")],
a)}(m);c.Constraints=h;c.AltitudeDefault={min:-2E5,max:4*r.earthRadius};c.TiltDefault={min:g.deg2rad(.5),max:g.deg2rad(179.5)};var l={min:0,max:0},u=function(c){function a(){var a=null!==c&&c.apply(this,arguments)||this;a.enabled=!0;a.elevationMargin=5;return a}e.__extends(a,c);e.__decorate([f.property({type:Boolean})],a.prototype,"enabled",void 0);e.__decorate([f.property({type:Number})],a.prototype,"elevationMargin",void 0);return a=e.__decorate([f.subclass("esri.views.3d.state.Constraints.CollisionConstraint")],
a)}(m);c.default=h});