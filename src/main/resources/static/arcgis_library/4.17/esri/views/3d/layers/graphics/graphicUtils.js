// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/mathUtils ../../../../core/maybe ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec2f64 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4 ../../../../core/libs/gl-matrix-2/vec4f64 ../../../../geometry/support/aaBoundingBox ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/centroid ../../../../geometry/support/coordsUtils ../../../../layers/graphics/dehydratedFeatures ../../../../layers/graphics/hydratedFeatures ../../support/pointUtils".split(" "),
function(G,c,A,l,m,B,h,t,C,u,v,D,E,w,n,x,F){function y(a){var b=a.paths[0];if(!b||0===b.length)return null;b=w.getPointOnPath(b,w.getPathLength(b)/2);return n.makeDehydratedPoint(b[0],b[1],b[2],a.spatialReference)}function g(a,b,d){d=d?a:x.clonePoint(a);return b&&a?F.pointToPoint(a,d,b)?d:null:d}function r(a){if(Array.isArray(a)){for(var b=0;b<a.length;b++)if(!r(a[b]))return!1;return!0}return null==a||0<=a}Object.defineProperty(c,"__esModule",{value:!0});c.namedAnchorToHUDMaterialAnchorPos=c.demResolutionForBoundingBox=
c.computeObjectRotation=c.isValidSize=c.validateSymbolLayerSize=c.computeObjectScale=c.overrideColor=c.mixinColorAndOpacity=c.updateVertexAttributeAuxpos1w=c.enlargeExtent=c.computeCentroid=void 0;c.computeCentroid=function(a,b){if("point"===a.type)return g(a,b,!1);if(x.isHydratedGeometry(a))switch(a.type){case "extent":return g(a.center,b,!1);case "polygon":return g(a.centroid,b,!1);case "polyline":return g(y(a),b,!0);case "mesh":return g(a.extent.center,b,!1)}else switch(a.type){case "extent":var d=
A.isFinite(a.zmin);a=n.makeDehydratedPoint(.5*(a.xmax+a.xmin),.5*(a.ymax+a.ymin),d?.5*(a.zmax+a.zmin):void 0,a.spatialReference);return g(a,b,!0);case "polygon":return(d=a.rings[0])&&0!==d.length?(d=E.ringsCentroid(a.rings,a.hasZ),a=n.makeDehydratedPoint(d[0],d[1],d[2],a.spatialReference)):a=null,g(a,b,!0);case "polyline":return g(y(a),b,!0)}};c.enlargeExtent=function(a,b,d,e){void 0===e&&(e=0);if(a){b||(b=D.create());var c=.5*a.width*(d-1);d=.5*a.height*(d-1);a.width<1E-7*a.height?c+=d/20:a.height<
1E-7*a.width&&(d+=c/20);C.vec4.set(b,a.xmin-c-e,a.ymin-d-e,a.xmax+c+e,a.ymax+d+e);return b}return null};c.updateVertexAttributeAuxpos1w=function(a,b){for(var d=0;d<a.geometries.length;++d){var c=a.geometries[d].data.vertexAttributes.auxpos1;c&&c.data[3]!==b&&(c.data[3]=b,a.geometryVertexAttrsUpdated(d))}};c.mixinColorAndOpacity=function(a,b){var d=u.vec4f64.clone(u.vec4f64.ONES);l.isSome(a)&&(d[0]=a[0],d[1]=a[1],d[2]=a[2]);l.isSome(b)?d[3]=b:l.isSome(a)&&3<a.length&&(d[3]=a[3]);return d};c.overrideColor=
function(a,b,d,c,z,k){void 0===k&&(k=[0,0,0,0]);for(var e=0;3>e;++e)l.isSome(a)&&null!=a[e]?k[e]=a[e]:l.isSome(d)&&null!=d[e]?k[e]=d[e]:k[e]=z[e];l.isSome(b)?k[3]=b:l.isSome(c)?k[3]=c:k[3]=z[3];return k};c.computeObjectScale=function(a,b,d,c){void 0===a&&(a=t.vec3f64.ONES);void 0===c&&(c=1);var e=Array(3);if(l.isNone(b)||l.isNone(d))e[0]=1,e[1]=1,e[2]=1;else{for(var k=void 0,h=0,f=2;0<=f;f--){var g=a[f],p=void 0,m=null!=g,n=0===f&&!k&&!m,q=d[f];"symbol-value"===g||n?p=0!==q?b[f]/q:1:m&&"proportional"!==
g&&isFinite(g)&&(p=0!==q?g/q:1);null!=p&&(k=e[f]=p,h=Math.max(h,Math.abs(p)))}for(f=2;0<=f;f--)null==e[f]?e[f]=k:0===e[f]&&(e[f]=.001*h)}for(f=2;0<=f;f--)e[f]/=c;return t.vec3f64.fromArray(e)};c.validateSymbolLayerSize=function(a){null!=a.isPrimitive&&(a=[a.width,a.depth,a.height]);return r(a)?null:"Symbol sizes may not be negative values"};c.isValidSize=r;c.computeObjectRotation=function(a,b,d,c){void 0===c&&(c=B.mat4f64.create());a=a||0;b=b||0;d=d||0;0!==a&&m.mat4.rotateZ(c,c,-a/180*Math.PI);0!==
b&&m.mat4.rotateX(c,c,b/180*Math.PI);0!==d&&m.mat4.rotateY(c,c,d/180*Math.PI);return c};c.demResolutionForBoundingBox=function(a,b){return null!=b.minDemResolution?b.minDemResolution:v.isPoint(a)?b.minDemResolutionForPoints:.01*v.maximumDimension(a)};c.namedAnchorToHUDMaterialAnchorPos={"bottom-left":h.vec2f64.fromValues(0,0),bottom:h.vec2f64.fromValues(.5,0),"bottom-right":h.vec2f64.fromValues(1,0),left:h.vec2f64.fromValues(0,.5),center:h.vec2f64.fromValues(.5,.5),right:h.vec2f64.fromValues(1,.5),
"top-left":h.vec2f64.fromValues(0,1),top:h.vec2f64.fromValues(.5,1),"top-right":h.vec2f64.fromValues(1,1)}});