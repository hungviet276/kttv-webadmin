// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports ../../../../geometry/support/aaBoundingRect ../../webgl-engine/lib/GeometryData ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/lib/Util".split(" "),function(D,f,h,B,t,l){function x(a,b){return t.createSquareGeometry([[a[0],a[1],b],[a[2],a[1],b],[a[2],a[3],b],[a[0],a[3],b]])}Object.defineProperty(f,"__esModule",{value:!0});f.createOuterImageGeometry=f.createGeometryForExtent=f.computeImageExportSize=void 0;f.computeImageExportSize=function(a,b,c){var d=h.width(a)/h.height(a),
e={width:c,height:c};1.0001<d?e.height=c/d:.9999>d&&(e.width=c*d);e.width=Math.round(e.width/(h.width(a)/h.width(b)));e.height=Math.round(e.height/(h.height(a)/h.height(b)));return e};f.createGeometryForExtent=x;f.createOuterImageGeometry=function(a,b,c){if(!h.intersects(a,b))return x(b,c);var d=[a[1]-b[1],Math.min(a[3],b[3])-Math.max(a[1],b[1]),b[3]-a[3],123456],e=[a[0]-b[0],Math.min(a[2],b[2])-Math.max(a[0],b[0]),b[2]-a[2],123456],f=b[2]-b[0],t=b[3]-b[1],p=0<e[0]&&0<e[2]?3:2;a=0<d[0]&&0<d[2]?3:
2;var m=(a+1)*(p+1),g=new Float64Array(3*m),m=new Float32Array(2*m);a=new Uint32Array(6*(a*p-1));for(var u=0,v=0,y=0,k=0,n=0,q=0;4>q;q++){var z=d[q];if(!(0>=z)){for(var w=0,r=0;4>r;r++){var A=e[r];0>=A||(g[v++]=b[0]+w,g[v++]=b[1]+u,g[v++]=c,m[y++]=w/f,m[y++]=u/t,3>r&&3>q&&(1!==r||1!==q)&&(a[n++]=k,a[n++]=k+1,a[n++]=k+p+1,a[n++]=k+1,a[n++]=k+p+2,a[n++]=k+p+1),k++,w+=A)}u+=z}}b={};b[l.VertexAttrConstants.POSITION]={size:3,data:g};b[l.VertexAttrConstants.NORMAL]={size:3,data:C};b[l.VertexAttrConstants.UV0]=
{size:2,data:m};c={};d=new Uint32Array(a.length);for(g=0;g<d.length;g++)d[g]=0;c[l.VertexAttrConstants.POSITION]=a;c[l.VertexAttrConstants.NORMAL]=d;c[l.VertexAttrConstants.UV0]=a;return new B.GeometryData(b,c)};var C=new Float32Array([0,0,1])});