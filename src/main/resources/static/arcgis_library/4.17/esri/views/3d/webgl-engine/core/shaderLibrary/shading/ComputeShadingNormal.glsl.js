// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../attributes/VertexNormal.glsl ../attributes/VertexPosition.glsl ../../shaderModules/interfaces".split(" "),function(u,f,c,t,g,d){Object.defineProperty(f,"__esModule",{value:!0});f.ComputeShadingNormal=void 0;f.ComputeShadingNormal=function(e,a){var b=e.fragment;0===a.doubleSidedMode?b.code.add(d.glsl(h||(h=c.__makeTemplateObject(["\n      vec3 _adjustDoublesided(vec3 normal) {\n        return normal;\n      }\n    "],["\n      vec3 _adjustDoublesided(vec3 normal) {\n        return normal;\n      }\n    "])))):
1===a.doubleSidedMode?(e.include(g.VertexPosition,a),b.uniforms.add("uTransform_ViewFromCameraLocal_T","vec3"),b.code.add(d.glsl(k||(k=c.__makeTemplateObject(["\n      vec3 _adjustDoublesided(vec3 normal) {\n        vec3 viewDir \x3d vPositionWorldCameraRelative + uTransform_ViewFromCameraLocal_T;\n        return dot(normal, viewDir) \x3e 0.0 ? -normal : normal;\n      }\n    "],["\n      vec3 _adjustDoublesided(vec3 normal) {\n        vec3 viewDir \x3d vPositionWorldCameraRelative + uTransform_ViewFromCameraLocal_T;\n        return dot(normal, viewDir) \x3e 0.0 ? -normal : normal;\n      }\n    "]))))):
2===a.doubleSidedMode&&b.code.add(d.glsl(l||(l=c.__makeTemplateObject(["\n      vec3 _adjustDoublesided(vec3 normal) {\n        return gl_FrontFacing ? normal : -normal;\n      }\n    "],["\n      vec3 _adjustDoublesided(vec3 normal) {\n        return gl_FrontFacing ? normal : -normal;\n      }\n    "]))));0===a.normalType||1===a.normalType?(e.include(t.VertexNormal,a),b.code.add(d.glsl(m||(m=c.__makeTemplateObject(["\n      vec3 shadingNormalWorld() {\n        return _adjustDoublesided(normalize(vNormalWorld));\n      }\n\n      vec3 shadingNormal_view() {\n        vec3 normal \x3d normalize(vNormalView);\n        return gl_FrontFacing ? normal : -normal;\n      }\n    "],
["\n      vec3 shadingNormalWorld() {\n        return _adjustDoublesided(normalize(vNormalWorld));\n      }\n\n      vec3 shadingNormal_view() {\n        vec3 normal \x3d normalize(vNormalView);\n        return gl_FrontFacing ? normal : -normal;\n      }\n    "]))))):3===a.normalType?(e.extensions.add("GL_OES_standard_derivatives"),e.include(g.VertexPosition,a),b.code.add(d.glsl(n||(n=c.__makeTemplateObject(["\n      vec3 shadingNormalWorld() {\n        return normalize(cross(\n          dFdx(vPositionWorldCameraRelative),\n          dFdy(vPositionWorldCameraRelative)\n        ));\n      }\n\n      vec3 shadingNormal_view() {\n        return normalize(cross(dFdx(vPosition_view),dFdy(vPosition_view)));\n      }\n    "],
["\n      vec3 shadingNormalWorld() {\n        return normalize(cross(\n          dFdx(vPositionWorldCameraRelative),\n          dFdy(vPositionWorldCameraRelative)\n        ));\n      }\n\n      vec3 shadingNormal_view() {\n        return normalize(cross(dFdx(vPosition_view),dFdy(vPosition_view)));\n      }\n    "]))))):2===a.normalType&&(1===a.viewingMode?(e.include(g.VertexPosition,a),b.code.add(d.glsl(p||(p=c.__makeTemplateObject(["\n        vec3 shadingNormalWorld() {\n          return normalize(positionWorld());\n        }\n      "],
["\n        vec3 shadingNormalWorld() {\n          return normalize(positionWorld());\n        }\n      "]))))):2===a.viewingMode&&b.code.add(d.glsl(q||(q=c.__makeTemplateObject(["\n        vec3 shadingNormalWorld() {\n          return vec3(0.0, 0.0, 1.0);\n        }\n      "],["\n        vec3 shadingNormalWorld() {\n          return vec3(0.0, 0.0, 1.0);\n        }\n      "])))),e.extensions.add("GL_OES_standard_derivatives"),b.code.add(d.glsl(r||(r=c.__makeTemplateObject(["\n      vec3 shadingNormal_view() {\n        return normalize(cross(dFdx(vPosition_view),dFdy(vPosition_view))).xyz;\n      }\n    "],
["\n      vec3 shadingNormal_view() {\n        return normalize(cross(dFdx(vPosition_view),dFdy(vPosition_view))).xyz;\n      }\n    "])))))};var h,k,l,m,n,p,q,r});