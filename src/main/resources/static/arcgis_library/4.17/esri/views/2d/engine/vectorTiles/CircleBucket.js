// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define(["require","exports","tslib","./BaseBucket"],function(A,B,y,z){return function(k){function c(a,d,l,b){a=k.call(this,a,d)||this;a.type=4;a._circleVertexBuffer=l;a._circleIndexBuffer=b;return a}y.__extends(c,k);Object.defineProperty(c.prototype,"circleIndexStart",{get:function(){return this._circleIndexStart},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"circleIndexCount",{get:function(){return this._circleIndexCount},enumerable:!1,configurable:!0});c.prototype.processFeatures=
function(a){var d=this._circleVertexBuffer,l=this._circleIndexBuffer;this._circleIndexStart=3*l.index;this._circleIndexCount=0;var b=this.layer,g=this.zoom;a&&a.setExtent(this.layerExtent);for(var c=1,m=[1,1,1,1],n=1,p=0,q=1,r=[1,1,1,1],t=1,u=0,k=this._features;u<k.length;u++){var e=k[u],v=e.getGeometry(a);if(v)for(b.hasDataDrivenRadius&&(c=b.getPaintValue("circle-radius",g,e)),b.hasDataDrivenColor&&(m=b.getPaintValue("circle-color",g,e)),b.hasDataDrivenOpacity&&(n=b.getPaintValue("circle-opacity",
g,e)),b.hasDataDrivenStrokeWidth&&(q=b.getPaintValue("circle-stroke-width",g,e)),b.hasDataDrivenStrokeColor&&(r=b.getPaintValue("circle-stroke-color",g,e)),b.hasDataDrivenStrokeOpacity&&(t=b.getPaintValue("circle-stroke-opacity",g,e)),b.hasDataDrivenBlur&&(p=b.getPaintValue("circle-blur",g,e)),e=0;e<v.length;e++){var w=v[e];if(w)for(var x=0;x<w.length;x++){var f=w[x],h=d.index;d.add(f.x,f.y,0,0,c,m,n,p,q,r,t);d.add(f.x,f.y,0,1,c,m,n,p,q,r,t);d.add(f.x,f.y,1,0,c,m,n,p,q,r,t);d.add(f.x,f.y,1,1,c,m,
n,p,q,r,t);l.add(h+0,h+1,h+2);l.add(h+1,h+2,h+3);this._circleIndexCount+=6}}}};c.prototype.serialize=function(){var a;a=6+this.layerIndices.length;a+=this._circleVertexBuffer.array.length;a+=this._circleIndexBuffer.array.length;var d=0;a=new Uint32Array(a);var c=new Int32Array(a.buffer);a[d++]=this.type;a[d++]=this.layerIndices.length;for(var b=0;b<this.layerIndices.length;b++)a[d++]=this.layerIndices[b];a[d++]=this._circleIndexStart;a[d++]=this._circleIndexCount;a[d++]=this._circleVertexBuffer.array.length;
for(b=0;b<this._circleVertexBuffer.array.length;b++)c[d++]=this._circleVertexBuffer.array[b];a[d++]=this._circleIndexBuffer.array.length;for(c=0;c<this._circleIndexBuffer.array.length;c++)a[d++]=this._circleIndexBuffer.array[c];return a.buffer};return c}(z)});