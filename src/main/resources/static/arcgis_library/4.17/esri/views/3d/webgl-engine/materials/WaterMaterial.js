// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../lib/AnimationTimer ../lib/Material ./WaterGLMaterial ./WaterTechnique ./internal/DefaultBufferWriter ./internal/MaterialUtil ./internal/waterMaterialUtils".split(" "),function(e,c,d,k,l,f,m,g,h,n){Object.defineProperty(c,"__esModule",{value:!0});c.WaterMaterial=void 0;e=function(c){function a(b,a){a=c.call(this,a)||this;a.animation=new k.AnimationTimer;a.techniqueConfig=new m.WaterTechniqueConfiguration;a.params=h.copyParameters(b,n.defaultWaterMaterialParameters);
return a}d.__extends(a,c);a.prototype.setParameterValues=function(b){this.params=d.__assign(d.__assign({},this.params),b);this.parametersChanged()};a.prototype.getParameters=function(){return this.params};a.prototype.getTechniqueConfig=function(b){this.techniqueConfig.output=b;this.techniqueConfig.writeDepth=this.params.writeDepth;this.techniqueConfig.receiveShadows=this.params.receiveShadows;this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled;this.techniqueConfig.transparent=this.params.transparent;
this.techniqueConfig.useSSR=this.params.ssrEnabled;this.techniqueConfig.isDraped=this.params.isDraped;return this.techniqueConfig};a.prototype.update=function(b){this.animation.enabled=Math.sqrt(this.params.waveTextureRepeat/this.params.waveStrength)*Math.min(b.camera.relativeElevation,b.camera.distance)<p;this.animation.advance(b.dt);return this.animation.enabled};a.prototype.intersect=function(b,a,c,d,e,f,g){h.intersectTriangleGeometry(b,a,d,e,f,void 0,g)};a.prototype.getGLMaterial=function(a){if(0===
a.output&&this.params.isDraped)return a.output=5,new f.WaterGLMaterial(a);switch(a.output){case 0:case 2:case 4:return new f.WaterGLMaterial(a)}};a.prototype.createBufferWriter=function(){return new g.DefaultBufferWriter(g.PositionUVLayout)};return a}(l.Material);c.WaterMaterial=e;var p=35E3});