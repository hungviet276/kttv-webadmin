// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../../geometry ../../../core/asyncUtils ../../../core/Error ../../../core/unitUtils ../../../portal/support/geometryServiceUtils ../../../tasks/support/ProjectParameters".split(" "),function(f,b,d,g,h,n,p,q,r){Object.defineProperty(b,"__esModule",{value:!0});b.MapCoordsHelper=void 0;f=function(){function b(a,e,c){void 0===c&&(c=null);this.spatialReference=e;this.unitInMeters=p.getMetersPerUnitForSR(this.spatialReference);this._geometryServicePromise=h.result(this.loadGeometryService(a,
c))}b.prototype.loadGeometryService=function(a,e){return d.__awaiter(this,void 0,void 0,function(){return d.__generator(this,function(c){switch(c.label){case 0:if(e)return[2,e];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,q.create(a&&a.get("portalItem"))];case 2:return[2,c.sent()];case 3:throw c.sent(),new n("mapcoordshelper:missing-geometry-service","Must specify geometryService in esri/config");case 4:return[2]}})})};b.prototype.awaitGeometryService=function(){return d.__awaiter(this,void 0,
void 0,function(){var a;return d.__generator(this,function(e){switch(e.label){case 0:return[4,this._geometryServicePromise];case 1:a=e.sent();if(!0===a.ok)return[2,a.value];throw a.error;}})})};b.prototype.toGeographic=function(a){return d.__awaiter(this,void 0,void 0,function(){var e,c,b,f,l,m,k,h=this;return d.__generator(this,function(d){switch(d.label){case 0:return[4,this.awaitGeometryService()];case 1:return e=d.sent(),c=!0,Array.isArray(a[0])&&"number"!==typeof a[0]?b=a:(b=[a],c=!1),f=b.map(function(a){return a instanceof
g.Point?a:new g.Point(a,h.spatialReference)}),l=new r({geometries:f,outSpatialReference:g.SpatialReference.WGS84}),[4,e.project(l)];case 2:return m=d.sent(),k=m.map(function(a){return"point"===a.type?[a.x,a.y]:void 0}),[2,c?k:k[0]]}})})};return b}();b.MapCoordsHelper=f;b.default=f});