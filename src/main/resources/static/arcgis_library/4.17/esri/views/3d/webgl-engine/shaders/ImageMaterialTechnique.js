// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../core/shaderLibrary/Slice.glsl ../core/shaderLibrary/util/View.glsl ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/DefaultVertexAttributeLocations ../lib/StencilUtils ./ImageMaterial.glsl ../../../webgl/Program ../../../webgl/renderState ../../../webgl/renderState @dojo/framework/shim/Promise".split(" "),function(m,d,c,n,l,p,e,a,q,f,r,t,u,h){Object.defineProperty(d,"__esModule",
{value:!0});d.ImageMaterialTechniqueConfiguration=d.ImageMaterialTechnique=void 0;e=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}c.__extends(b,a);b.prototype.initializeProgram=function(k){var g=b.shader.get(),a=this.configuration,g=g.build({slicePlaneEnabled:a.slicePlaneEnabled,sliceHighlightDisabled:a.sliceHighlightDisabled,sliceEnabledForVertexPrograms:!1});return new t(k.rctx,g.generateSource("vertex"),g.generateSource("fragment"),q.Default3D)};b.prototype.bindPass=function(b,
a,c){l.View.bindProjectionMatrix(this.program,c.camera.projectionMatrix);this.program.setUniform1f("opacity",a.opacity)};b.prototype.bindDraw=function(b){l.View.bindView(this.program,b);n.Slice.bindUniformsWithOrigin(this.program,this.configuration,b)};b.prototype.initializePipeline=function(){var b=function(a){return 0!==a&&{face:1===a?1028:1029,mode:2305}},a=this.configuration,c=0===a.output&&a.transparent?u.simpleBlendingParams(1,771):null,d=function(k){return h.makePipelineState({blending:c,polygonOffset:a.polygonOffset&&
v,culling:b(a.cullFace),depthTest:f.depthCompareLess,depthWrite:a.writeDepth&&h.defaultDepthWriteParams,colorWrite:h.defaultColorWriteParams,stencilWrite:a.sceneHasOcludees?f.stencilWriteMaskOn:null,stencilTest:a.sceneHasOcludees?k?f.stencilToolMaskBaseParams:f.stencilBaseAllZerosParams:null})};this._occludeeState=d(!0);return d(!1)};Object.defineProperty(b.prototype,"opaqueOccludeeState",{get:function(){return this._occludeeState},enumerable:!1,configurable:!0});b.shader=new p.ReloadableShaderModule(r,
function(){return new Promise(function(a,b){m(["./ImageMaterial.glsl"],a,b)})});return b}(e.ShaderTechnique);d.ImageMaterialTechnique=e;var v={factor:1,units:1};e=function(d){function b(){var a=null!==d&&d.apply(this,arguments)||this;a.output=0;a.cullFace=0;a.slicePlaneEnabled=!1;a.sliceHighlightDisabled=!1;a.transparent=!1;a.polygonOffset=!1;a.writeDepth=!0;a.sceneHasOcludees=!1;return a}c.__extends(b,d);c.__decorate([a.parameter({count:7})],b.prototype,"output",void 0);c.__decorate([a.parameter({count:3})],
b.prototype,"cullFace",void 0);c.__decorate([a.parameter()],b.prototype,"slicePlaneEnabled",void 0);c.__decorate([a.parameter()],b.prototype,"sliceHighlightDisabled",void 0);c.__decorate([a.parameter()],b.prototype,"transparent",void 0);c.__decorate([a.parameter()],b.prototype,"polygonOffset",void 0);c.__decorate([a.parameter()],b.prototype,"writeDepth",void 0);c.__decorate([a.parameter()],b.prototype,"sceneHasOcludees",void 0);return b}(a.ShaderTechniqueConfiguration);d.ImageMaterialTechniqueConfiguration=
e});