// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/ObjectStack ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../stack ./lineSegment".split(" "),function(D,b,w,u,f,g,h,k){function q(a){return a?{p0:g.vec3f64.clone(a.p0),p1:g.vec3f64.clone(a.p1),p2:g.vec3f64.clone(a.p2)}:{p0:g.vec3f64.create(),p1:g.vec3f64.create(),p2:g.vec3f64.create()}}function x(a,d,e,c){void 0===c&&(c=q());f.vec3.copy(c.p0,a);f.vec3.copy(c.p1,d);f.vec3.copy(c.p2,e);
return c}function y(a,d,e){var c=u.vec2.distance(a,d);d=u.vec2.distance(d,e);a=u.vec2.distance(e,a);e=(c+d+a)/2;c=e*(e-c)*(e-d)*(e-a);return 0>=c?0:Math.sqrt(c)}Object.defineProperty(b,"__esModule",{value:!0});b.areaPoints3d=b.area2d=b.areaPoints2d=b.intersectRay=b.distance2=b.fromValues=b.copy=b.wrap=b.create=void 0;b.create=q;b.wrap=function(a,d,e){var c=C.get();c.p0=a;c.p1=d;c.p2=e;return c};b.copy=function(a,d){void 0===d&&(d=q());return x(a.p0,a.p1,a.p2,d)};b.fromValues=x;b.distance2=function(a,
d){var e=a.p0,c=a.p1;a=a.p2;var b=f.vec3.subtract(h.sv3d.get(),c,e),z=f.vec3.subtract(h.sv3d.get(),a,c),m=f.vec3.subtract(h.sv3d.get(),e,a),A=f.vec3.subtract(h.sv3d.get(),d,e),n=f.vec3.subtract(h.sv3d.get(),d,c),p=f.vec3.subtract(h.sv3d.get(),d,a),l=f.vec3.cross(b,b,m),g=f.vec3.dot(f.vec3.cross(h.sv3d.get(),b,l),A),n=f.vec3.dot(f.vec3.cross(h.sv3d.get(),z,l),n),p=f.vec3.dot(f.vec3.cross(h.sv3d.get(),m,l),p);if(0<g&&0<n&&0<p)return d=f.vec3.dot(l,A),d*d/f.vec3.dot(l,l);e=k.distance2(k.fromValues(e,
b,r.get()),d);c=k.distance2(k.fromValues(c,z,r.get()),d);d=k.distance2(k.fromValues(a,m,r.get()),d);return Math.min(e,c,d)};b.intersectRay=function(a,d,e){var c=d.direction;d=d.origin;var b=a.p0,g=a.p1,m=a.p2,h=g[0]-b[0],n=g[1]-b[1],p=g[2]-b[2],g=m[0]-b[0];a=m[1]-b[1];var m=m[2]-b[2],l=c[1]*m-a*c[2],k=c[2]*g-m*c[0],u=c[0]*a-g*c[1],t=h*l+n*k+p*u;if(-1E-5<t&&1E-5>t)return!1;var t=1/t,q=d[0]-b[0],r=d[1]-b[1],b=d[2]-b[2],l=t*(q*l+r*k+b*u);if(0>l||1<l)return!1;k=r*p-n*b;p=b*h-p*q;h=q*n-h*r;n=t*(c[0]*k+
c[1]*p+c[2]*h);if(0>n||1<l+n)return!1;e&&(f.vec3.scale(e,c,t*(g*k+a*p+m*h)),f.vec3.add(e,d,e));return!0};b.areaPoints2d=y;b.area2d=function(a){return y(a.p0,a.p1,a.p2)};b.areaPoints3d=function(a,b,e){f.vec3.subtract(v,b,a);f.vec3.subtract(B,e,a);return f.vec3.length(f.vec3.cross(v,v,B))/2};var r=new w.ObjectStack(k.create),C=new w.ObjectStack(function(){return{p0:null,p1:null,p2:null}}),v=g.vec3f64.create(),B=g.vec3f64.create()});