// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define(["require","exports"],function(u,m){Object.defineProperty(m,"__esModule",{value:!0});m.perfElement=m.perfClear=m.perfAdd=m.drawColliders=m.drawGridIndex=void 0;m.drawGridIndex=function(f,h){f.strokeStyle="black";for(var b=h.cellSize,a=h.rows,m=h.columns,d=0;d<a;d++)for(var p=h.cells[d],e=d*b,n=(d+1)*b,c=0;c<m;c++){var g=p[c],l=c*b;f.strokeRect(l,e,(c+1)*b-l,n-e);f.fillText("cells:"+g.length,l+4,e+12)}};m.drawColliders=function(f,h){for(var b=window.COLLISION_XRAY,a=0;a<h.length;++a){var m=
!h[a].unique.show;if(b||!m)for(var d=0,p=h[a].colliders;d<p.length;d++){var e=p[d];if(e.enabled){var n=!h[a].unique.parts[e.partIndex].show;if(b||!n){var c=e.xScreen,g=e.yScreen,l=e.dxScreen,q=e.dyScreen;f.globalAlpha=m||n?.2:1;var n=f,k=c-1,r=g-1;n.fillStyle="green";n.fillRect(k,r,3,3);var n=f,k=c+l,r=g+q,t=e.width,e=e.height;n.strokeStyle="red";n.strokeRect(k,r,t,e);e=f;c=c+l-1;g=g+q-1;e.fillStyle="blue";e.fillRect(c,g,3,3);f.globalAlpha=1}}}}};m.perfAdd=function(f,h,b){if(window.PERFORMANCE_RECORDING_STORAGE){var a=
window.PERFORMANCE_RECORDING_STORAGE;a.perf=a.perf||{};a=a.perf;a[f]=a[f]||{start:null,time:0,min:void 0,max:void 0,samples:[],unit:b};a[f].time+=h;a[f].samples.push(h);if(null==a[f].min||h<a[f].min)a[f].min=h;if(null==a[f].max||h>a[f].max)a[f].max=h}};m.perfClear=function(){window.PERFORMANCE_RECORDING_STORAGE&&(window.PERFORMANCE_RECORDING_STORAGE.perf={})};m.perfElement=function(f){if(!window.PERFORMANCE_RECORDING_STORAGE){var h=document.createElement("div");h.innerHTML="No recorded data is present because performance recording is disabled.";
return h}var h=document.createElement("div"),b,a=window.PERFORMANCE_RECORDING_STORAGE.perf;b='\x3ctable style\x3d"border-collapse: collapse;"\x3e'+('\x3ctr style\x3d"text-weight: bold; border-bottom: 1px solid "'+f+'";"\x3e\x3ctd\x3eName\x3c/td\x3e\x3ctd\x3eTotal\x3c/td\x3e\x3ctd\x3eRuns\x3c/td\x3e\x3ctd\x3eAverage\x3c/td\x3e\x3ctd\x3eMin\x3c/td\x3e\x3ctd\x3eDistribution\x3c/td\x3e\x3ctd\x3eMax\x3c/td\x3e\x3ctd\x3eHistogram (50 bins)\x3c/td\x3e\x3c/tr\x3e');var m=[],d;for(d in a)m.push({name:d,value:a[d].time/
a[d].samples.length,sortkey:a[d].max});m.sort(function(a,b){return-(a.sortkey-b.sortkey)});d=m.map(function(a){return a.name});for(var p=0;p<d.length;p++){var e=d[p];b+="\x3ctr\x3e";b+="\x3ctd\x3e"+e+"\x3c/td\x3e";b+="\x3ctd\x3e"+(""+Math.round(10*a[e].time)/10+a[e].unit)+"\x3c/td\x3e";b+="\x3ctd\x3e"+a[e].samples.length+"\x3c/td\x3e";b+="\x3ctd\x3e"+(""+Math.round(a[e].time/a[e].samples.length*10)/10+a[e].unit)+"\x3c/td\x3e";b+='\x3ctd style\x3d"text-align: right;"\x3e'+(""+Math.round(10*a[e].min)/
10+a[e].unit)+"\x3c/td\x3e";b+="\x3ctd data-distribution\x3d'1'\x3e\x3c/td\x3e";b+="\x3ctd\x3e"+(""+Math.round(10*a[e].max)/10+a[e].unit)+"\x3c/td\x3e";b+="\x3ctd data-histogram\x3d'1'\x3e\x3c/td\x3e";b+="\x3c/tr\x3e"}h.innerHTML=b+"\x3ctable\x3e";p=h.querySelectorAll("td[data-distribution\x3d'1']");e=h.querySelectorAll("td[data-histogram\x3d'1']");for(b=0;b<p.length;b++){var n=p[b],c=document.createElement("canvas");c.height=10;c.width=100;var g=c.getContext("2d");g.strokeStyle=f;g.beginPath();g.moveTo(0,
5);g.lineTo(100,5);if(a[d[b]].max>a[d[b]].min+.001)for(var l=0,q=a[d[b]].samples;l<q.length;l++){var k=q[l],k=(k-a[d[b]].min)/(a[d[b]].max-a[d[b]].min);g.moveTo(100*k,3);g.lineTo(100*k,7)}g.stroke();g.strokeRect((m[b].value-a[d[b]].min)/(a[d[b]].max-a[d[b]].min)*100-2,0,4,9);n.appendChild(c);n=e[b];l=Array(50);for(c=0;c<l.length;c++)l[c]=0;c=0;for(g=a[d[b]].samples;c<g.length;c++)k=g[c],k=(k-a[d[b]].min)/(a[d[b]].max-a[d[b]].min),k=1===k?l.length-1:Math.floor(k*l.length),l[k]++;c=document.createElement("canvas");
c.height=30;c.width=120;g=c.getContext("2d");g.strokeStyle=f;g.fillStyle=f;for(k=q=0;k<l.length;k++)var r=l[k],q=Math.max(q,r);for(k=0;k<l.length;k++)r=l[k],g.fillRect(k*c.width/l.length,c.height*(1-r/q),c.width/l.length,r/q*c.height);g.beginPath();g.moveTo(0,c.height);g.lineTo(c.width,c.height);g.stroke();n.appendChild(c)}f=h.querySelectorAll("td");for(b=0;b<f.length;b++)f[b].style.padding="5px";return h}});