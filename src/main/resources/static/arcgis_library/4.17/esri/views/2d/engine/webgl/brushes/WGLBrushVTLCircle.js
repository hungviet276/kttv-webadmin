// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../../../../core/maybe ../../../../../core/libs/gl-matrix-2/vec4f32 ../enums ../number ./WGLBrush".split(" "),function(p,f,u,v,q,w,x,y){Object.defineProperty(f,"__esModule",{value:!0});f.WGLBrushVTLCircle=void 0;var t=[1,1,1,1];p=function(f){function g(){var c=null!==f&&f.apply(this,arguments)||this;c._color=q.vec4f32.create();c._strokeColor=q.vec4f32.create();c._programOptions={id:!1};return c}u.__extends(g,f);g.prototype.dispose=function(){};g.prototype.drawMany=
function(c,f){var n=c.context,h=c.state,b=c.drawPhase,g=c.styleLayerId,d=c.displayLevel,a=c.styleLayer;c=c.painter.getVectorTileProgramCach();var l=a.hasDataDrivenRadius?1:a.getPaintValue("circle-radius",d),m=a.hasDataDrivenColor?t:a.getPaintValue("circle-color",d),e=a.hasDataDrivenOpacity?1:a.getPaintValue("circle-opacity",d),r=a.hasDataDrivenStrokeWidth?1:a.getPaintValue("circle-stroke-width",d),k=a.hasDataDrivenStrokeColor?t:a.getPaintValue("circle-stroke-color",d),p=a.hasDataDrivenStrokeOpacity?
1:a.getPaintValue("circle-stroke-opacity",d),q=a.hasDataDrivenBlur?0:a.getPaintValue("circle-blur",d),e=e*m[3];this._color[0]=e*m[0];this._color[1]=e*m[1];this._color[2]=e*m[2];this._color[3]=e;e=p*k[3];this._strokeColor[0]=e*k[0];this._strokeColor[1]=e*k[1];this._strokeColor[2]=e*k[2];this._strokeColor[3]=e;m=a.getPaintValue("circle-translate",d);d=a.getPaintValue("circle-translate-anchor",d);k=b===w.WGLDrawPhase.HITTEST;b=this._programOptions;b.id=k;b=c.getProgram(5,k?1:0,b);n.bindProgram(b);b.setUniformMatrix3fv("u_displayMat3",
1===d?h.displayMat3:h.displayViewMat3);b.setUniform2fv("u_circleTranslation",m);b.setUniform1f("u_depth",a.z);b.setUniform1f("u_radius",l);b.setUniform4fv("u_color",this._color);b.setUniform1f("u_blur",q);b.setUniform1f("u_stroke_width",r);b.setUniform4fv("u_stroke_color",this._strokeColor);b.setUniform1f("u_antialiasingWidth",1.2);k&&(h=x.u32to4Xu8(g+1),b.setUniform4fv("u_id",h));for(h=0;h<f.length;h++)a=f[h],a.layerData[g]&&(l=a.layerData[g],l.prepareForRendering(n,c),r=l.circleVertexArrayObject,
v.isNone(r)||(n.bindVAO(r),b.setUniformMatrix3fv("u_dvsMat3",a.transforms.dvs),n.setStencilFunction(514,a.stencilRef,255),n.drawElements(4,l.circleIndexCount,5125,Uint32Array.BYTES_PER_ELEMENT*l.circleIndexStart),a.triangleCount+=l.circleIndexCount/3))};return g}(y.default);f.WGLBrushVTLCircle=p});