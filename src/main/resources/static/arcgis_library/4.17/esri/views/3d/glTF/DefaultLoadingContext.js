// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../../request ../../../core/asyncUtils ../../../core/Error ../../../core/maybe ../../../core/promiseUtils ../../../core/urlUtils".split(" "),function(g,f,a,l,m,n,p,h,k){Object.defineProperty(f,"__esModule",{value:!0});f.DefaultLoadingContext=void 0;g=function(){function d(b){this.streamDataRequester=b}d.prototype.loadJSON=function(b,c){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(a){return[2,this.load("json",b,c)]})})};d.prototype.loadBinary=
function(b,c){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(a){return k.isDataProtocol(b)?(h.throwIfAborted(c),[2,k.dataToArrayBuffer(b)]):[2,this.load("binary",b,c)]})})};d.prototype.loadImage=function(b,c){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(a){return[2,this.load("image",b,c)]})})};d.prototype.load=function(b,c,d){return a.__awaiter(this,void 0,void 0,function(){var e;return a.__generator(this,function(a){switch(a.label){case 0:return p.isNone(this.streamDataRequester)?
[4,l(c,{responseType:q[b]})]:[3,2];case 1:return[2,a.sent().data];case 2:return[4,m.result(this.streamDataRequester.request(c,b,d))];case 3:e=a.sent();if(!0===e.ok)return[2,e.value];h.throwIfAbortError(e.error);throw new n("","Request for resource failed: "+e.error);}})})};return d}();f.DefaultLoadingContext=g;var q={image:"image",binary:"array-buffer",json:"json"}});