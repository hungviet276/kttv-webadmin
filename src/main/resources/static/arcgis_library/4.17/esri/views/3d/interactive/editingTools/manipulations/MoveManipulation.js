// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../../../../core/Handles ../../../../../core/handleUtils ../../../../../core/has ../../../../../core/maybe ./config ./Manipulation ./MoveXYAxisManipulation ./MoveXYDiscManipulation ./MoveZManipulation".split(" "),function(g,d,n,p,h,q,k,l,r,t,u,v){Object.defineProperty(d,"__esModule",{value:!0});d.MoveManipulation=void 0;g=function(d){function b(a){var c=d.call(this)||this;c._handles=new p;c._angleDeferred=null;c._interactive=!0;var b=a.tool,e=a.view,w=a.snapToScene,
f=a.radius;c._view=e;c.xyManipulation=new u.MoveXYDiscManipulation({tool:b,view:e,snapToScene:w,radius:f});c.xyAxisManipulation=new t.MoveXYAxisManipulation({tool:b,view:e,radius:f});c.zManipulation=new v.MoveZManipulation({tool:b,view:e,radius:f});c.xyManipulation.available=a.xyAvailable;c.xyAxisManipulation.available=a.xyAxisAvailable;c.zManipulation.available=a.zAvailable;c.autoHideXYAxis();c.forEachManipulator(function(a){c._handles.add(a.events.on("grab-changed",function(){return c.updateManipulatorInteractivity()}))});
return c}n.__extends(b,d);b.prototype.destroy=function(){this._handles.destroy();this.xyManipulation.destroy();this.xyAxisManipulation.destroy();this.zManipulation.destroy()};b.prototype.createGraphicDragPipeline=function(a,c){return h.handlesGroup([this.xyManipulation.createGraphicDragPipeline(a,c),this.xyAxisManipulation.createGraphicDragPipeline(a,c),this.zManipulation.createGraphicDragPipeline(a,c)])};b.prototype.createDragPipeline=function(a,c,b){return h.handlesGroup([this.xyManipulation.createDragPipeline(a,
c,b),this.xyAxisManipulation.createDragPipeline(a,c,b),this.zManipulation.createDragPipeline(a,b)])};Object.defineProperty(b.prototype,"snapToScene",{set:function(a){this.xyManipulation.snapToScene=a},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"angle",{set:function(a){this._angleDeferred=null;this.xyAxisManipulation.angle=a},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"angleDeferred",{set:function(a){this.xyAxisVisible?this.angle=a():this._angleDeferred=
a},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"interactive",{set:function(a){this._interactive!==a&&(this._interactive=a,this.updateManipulatorInteractivity())},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"radius",{set:function(a){this.xyAxisManipulation.radius=a;this.xyManipulation.radius=a;this.zManipulation.radius=a},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"displayScale",{set:function(a){this.xyManipulation.displayScale=a;this.xyAxisManipulation.displayScale=
a},enumerable:!1,configurable:!0});b.prototype.forEachManipulator=function(a){this.xyManipulation.forEachManipulator(function(c){return a(c,1)});this.xyAxisManipulation.forEachManipulator(function(c){return a(c,1)});this.zManipulation.forEachManipulator(function(c){return a(c,0)})};Object.defineProperty(b.prototype,"xyAxisVisible",{get:function(){var a=this.xyManipulation.someManipulator(function(a){return a.focused})||this.xyAxisManipulation.someManipulator(function(a){return a.focused});return this._view.inputManager&&
"touch"===this._view.inputManager.latestPointerType||a},enumerable:!1,configurable:!0});b.prototype.autoHideXYAxis=function(){var a=this,c=this.xyAxisManipulation,b=this.xyManipulation;if(!q("esri-mobile")){var e=[];b.forEachManipulator(function(a){return e.push(a)});c.forEachManipulator(function(a){return e.push(a)});for(var b=function(){var b=[];a.xyAxisVisible?k.isSome(a._angleDeferred)&&(a.angle=a._angleDeferred()):c.forEachManipulator(function(a){return b.push(a.disableDisplay())});a._handles.remove(m);
a._handles.add(b,m)},d=0;d<e.length;d++)this._handles.add(e[d].events.on("focus-changed",b));this._view.inputManager&&this._handles.add(this._view.inputManager.watch("latestPointerType",b));b()}};b.prototype.updateManipulatorInteractivity=function(){var a=this,c=this.grabbing;this.forEachManipulator(function(b){b.interactive=!c&&a._interactive||b.grabbing})};b.radiusForSymbol=function(a){return(a=k.isSome(a)&&"point-3d"===a.type&&a.symbolLayers)&&0<a.length&&a.some(function(a){return"icon"===a.type})?
l.DISC_RADIUS_SMALL:l.DISC_RADIUS};return b}(r.Manipulation);d.MoveManipulation=g;var m="disable-xy-axis-display"});