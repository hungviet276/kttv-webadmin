// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../../core/Error ../../../core/JSONSupport ../../../core/Logger ../../../core/maybe ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/mat4 ../../../core/libs/gl-matrix-2/mat4f32 ../effects/parser".split(" "),function(h,c,d,l,m,n,p,g,q,k,r){Object.defineProperty(c,"__esModule",{value:!0});c.ParsedFeatureEffect=void 0;var t=n.getLogger("esri.views.layers.support.ParsedFeatureEffect");h=function(c){function a(){var b=null!==c&&c.apply(this,arguments)||
this;b.done=!0;return b}d.__extends(a,c);f=a;a.fromString=function(b){var a=[],c=null,e=r.parse(b);if(e.error)t.error(new l("invalid-type","Encountered an error when parsing css",e.error));else for(b=0,e=e.effects;b<e.length;b++){var d=e[b];"opacity"===d.type?c=d:"colorMatrix"in d&&a.push(d)}return new f({transforms:a,opacity:c})};a.prototype.getOpacity=function(){return p.isSome(this.opacity)?this.opacity.amount:1};a.prototype.getColorMatrix=function(){return(this.transforms||[]).map(function(b){return{colorMatrix:k.mat4f32.clone(b.colorMatrix)}}).reverse().reduce(function(b,
a){return q.mat4.multiply(b,b,a.colorMatrix)},k.mat4f32.create())};a.prototype.clone=function(){return new f({transforms:this.transforms&&this.transforms.map(function(a){return d.__assign({},a)})})};var f;d.__decorate([g.property()],a.prototype,"opacity",void 0);d.__decorate([g.property()],a.prototype,"transforms",void 0);return a=f=d.__decorate([g.subclass("esri.views.layers.support.ParsedFeatureEffect")],a)}(m.JSONSupport);c.ParsedFeatureEffect=h});