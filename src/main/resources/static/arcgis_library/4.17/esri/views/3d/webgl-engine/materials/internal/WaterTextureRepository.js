// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../../../../assets ../../../../../core/Accessor ../../../../../core/Logger ../../../../../core/promiseUtils ../../../../../core/accessorSupport/decorators ../../../support/imageUtils ../../../../webgl/Texture".split(" "),function(h,d,e,k,l,m,n,f,p,q){Object.defineProperty(d,"__esModule",{value:!0});d.WaterTextureRepository=d.waveAndPertubationTextureUrls=void 0;var r=m.getLogger("esri.views.3d.webgl-engine.materials.internal.waterMaterialUtils");d.waveAndPertubationTextureUrls=
[k.getAssetUrl("esri/images/materials/water/normals.jpg"),k.getAssetUrl("esri/images/materials/water/perturbation.jpg")];h=function(g){function a(){var b=null!==g&&g.apply(this,arguments)||this;b.data=[];b.loadingState=0;return b}e.__extends(a,g);a.prototype.dispose=function(){this.loadingState=0;this.data.forEach(function(b){b.dispose();b=null});this.data=null};a.prototype.getTextureProps=function(b,a,c){void 0===c&&(c=!1);return{target:3553,pixelFormat:6408,dataType:5121,wrapMode:10497,samplingMode:9987,
hasMipmap:c,maxAnisotropy:8,width:b,height:a}};Object.defineProperty(a.prototype,"updating",{get:function(){return 1===this.loadingState},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"ready",{get:function(){return 2===this.loadingState},enumerable:!1,configurable:!0});a.prototype.loadTextures=function(a){var b=this;this.loadingState=1;n.all(d.waveAndPertubationTextureUrls.map(function(a){return p.requestImage(a)})).then(function(c){c.forEach(function(c,d){b.data[d]=new q(a,b.getTextureProps(c.width,
c.height,!0),c)});b.loadingState=2}).catch(function(a){r.error("Failed to load textures for water material.",a);b.loadingState=0})};a.prototype.bindRepo=function(a){for(var b=0;b<this.data.length;b++)a.bindTexture(this.data[b],b)};e.__decorate([f.property()],a.prototype,"loadingState",void 0);e.__decorate([f.property({type:Boolean,readOnly:!0,dependsOn:["loadingState"]})],a.prototype,"updating",null);return a=e.__decorate([f.subclass("esri.views.3d.webgl-engine.materials.internal.WaterTextureRepository")],
a)}(l);d.WaterTextureRepository=h});