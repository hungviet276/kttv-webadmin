// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../../Graphic ../../../core/Collection ../../../core/promiseUtils ../../../core/accessorSupport/decorators ./LayerView2D ./graphics/GraphicsView2D ../../layers/LayerView".split(" "),function(q,r,c,h,k,g,e,l,m,n){var p={remove:function(){},pause:function(){},resume:function(){}};return function(f){function a(){return null!==f&&f.apply(this,arguments)||this}c.__extends(a,f);a.prototype.initialize=function(){var d=this;this.graphicsView=new m.default({requestUpdateCallback:function(){return d.requestUpdate()},
view:this.view,graphics:this.layer.graphics})};a.prototype.attach=function(){this.container.addChild(this.graphicsView.container);this.handles.add(this.layer.on("graphic-update",this.graphicsView.graphicUpdateHandler),"graphicslayerview2d")};a.prototype.detach=function(){this.container.removeAllChildren();this.graphicsView.destroy();this.handles.remove("graphicslayerview2d")};a.prototype.hitTest=function(d,a){return this.suspended||!this.graphicsView?g.resolve(null):this.graphicsView.hitTest(d,a)};
a.prototype.fetchPopupFeatures=function(a){return c.__awaiter(this,void 0,void 0,function(){return c.__generator(this,function(d){return this.graphicsView?[2,this.graphicsView.searchFeatures(a).then(function(a){return a.filter(function(a){return!!a.popupTemplate})})]:[2,void 0]})})};a.prototype.update=function(a){this.graphicsView.processUpdate(a)};a.prototype.moveStart=function(){};a.prototype.viewChange=function(){this.graphicsView.viewChange()};a.prototype.moveEnd=function(){};a.prototype.isUpdating=
function(){return!this.graphicsView||this.graphicsView.updating};a.prototype.highlight=function(a){var c=this,b;"number"===typeof a?b=[a]:a instanceof h?b=[a.uid]:Array.isArray(a)&&0<a.length?b="number"===typeof a[0]?a:a.map(function(a){return a&&a.uid}):k.isCollection(a)&&(b=a.map(function(a){return a&&a.uid}).toArray());b=b.filter(function(a){return null!=a});if(!b.length)return p;this.graphicsView.addHighlight(b);return{remove:function(){return c.graphicsView.removeHighlight(b)},pause:function(){},
resume:function(){}}};a.prototype.queryGraphics=function(){return g.resolve(this.graphicsView.graphics)};c.__decorate([e.property()],a.prototype,"graphicsView",void 0);c.__decorate([e.property({dependsOn:["graphicsView.updating"]})],a.prototype,"updating",void 0);return a=c.__decorate([e.subclass("esri.views.2d.layers.GraphicsLayerView2D")],a)}(l.LayerView2DMixin(n))});