// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define(["require","exports","../layers/support/MemoryManagedLayerView","./LayerPerformanceInfo","../terrain/terrainUtils"],function(g,h,c,d,e){return function(){return function(a){var f=this;this.usedMemory=this.totalMemory=0;this.quality=1;this.edgesMemory=this.terrainMemory=this.load=0;this.layerPerformanceInfos=[];var b=a.resourceController.memoryController;this.totalMemory=1048576*b.maxMemory;this.usedMemory=Math.round(b.usedMemory*this.totalMemory);this.quality=b.memoryFactor;this.load=a.resourceController.scheduler.load;
this.terrainMemory=a.basemapTerrain?a.basemapTerrain.getUsedMemory():0;this.edgesMemory=(b=a._stage&&a._stage.renderView&&a._stage.renderView.edgeView)?b.getUsedMemory():0;a.allLayerViews.items.forEach(function(b){(c.isMemoryManagedLayerView(b)||e.isSurfaceLayerView(b))&&f.layerPerformanceInfos.push(new d(b,a))});this.layerPerformanceInfos.sort(function(a,b){return b.memory-a.memory})}}()});