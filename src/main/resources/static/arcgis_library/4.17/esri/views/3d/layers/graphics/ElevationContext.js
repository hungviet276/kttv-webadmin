// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define(["require","exports","../../../../core/maybe","../../../../symbols/support/unitConversionUtils","./featureExpressionInfoUtils"],function(e,c,d,g,f){Object.defineProperty(c,"__esModule",{value:!0});c.ElevationContext=void 0;e=function(){function a(){this._renderUnitOffset=this._meterUnitOffset=0;this._unit="meters";this._metersPerElevationInfoUnit=1;this.mode=this.centerPointInElevationSR=this._featureExpressionInfoContext=null}Object.defineProperty(a.prototype,"featureExpressionInfoContext",
{get:function(){return this._featureExpressionInfoContext},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"meterUnitOffset",{get:function(){return this._meterUnitOffset},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"unit",{get:function(){return this._unit},set:function(b){this._unit=b;this._metersPerElevationInfoUnit=g.getMetersPerUnit(b)},enumerable:!1,configurable:!0});a.prototype.reset=function(){this.mode=null;this._renderUnitOffset=this._meterUnitOffset=
0;this._featureExpressionInfoContext=null;this.unit="meters"};Object.defineProperty(a.prototype,"offsetMeters",{set:function(b){this._meterUnitOffset=b;this._renderUnitOffset=0},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"offsetElevationInfoUnits",{set:function(b){this._meterUnitOffset=b*this._metersPerElevationInfoUnit;this._renderUnitOffset=0},enumerable:!1,configurable:!0});a.prototype.addOffsetRenderUnits=function(b){this._renderUnitOffset+=b};a.prototype.geometryZWithOffset=
function(b,a){a=this.calculateOffsetRenderUnits(a);return null!=this.featureExpressionInfoContext?a:b+a};a.prototype.calculateOffsetRenderUnits=function(b){var a=this._meterUnitOffset,d=this.featureExpressionInfoContext;null!=d&&(a+=f.execute(d)*this._metersPerElevationInfoUnit);return a/b.unitInMeters+this._renderUnitOffset};a.prototype.setFromElevationInfo=function(b){this.mode=b.mode;this.unit=b.unit||"meters";this.offsetElevationInfoUnits=d.unwrapOr(b.offset,0)};a.prototype.updateFeatureExpressionInfoContext=
function(b,a,c){if(d.isNone(b))this._featureExpressionInfoContext=null;else{var e=b&&b.arcade;e&&d.isSome(a)&&d.isSome(c)?(this._featureExpressionInfoContext=f.clone(b),f.setContextFeature(this._featureExpressionInfoContext,f.createFeature(e.modules,a,c))):this._featureExpressionInfoContext=b}};a.fromElevationInfo=function(b){var c=new a;d.isSome(b)&&c.setFromElevationInfo(b);return c};return a}();c.ElevationContext=e});