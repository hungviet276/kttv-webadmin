// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../geometry ../PopupTemplate ../renderers ../core/ReadOnlyMultiOriginJSONSupport ../core/accessorSupport/decorators ./Layer ./graphics/sources/OGCFeatureSource ./mixins/BlendLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./mixins/TemporalLayer ./support/FeatureReduction ./support/FeatureReductionCluster ./support/FeatureReductionSelection ./support/FeatureType ./support/Field ./support/FieldsIndex ./support/fieldUtils ./support/LabelClass ../support/popupUtils ../symbols/support/ElevationInfo ../tasks/support/Query @dojo/framework/shim/Promise".split(" "),
function(G,H,b,f,p,l,q,d,r,t,u,v,w,x,y,z,A,B,m,C,h,D,E,F,n){return function(k){function a(c){c=k.call(this,c)||this;c.collectionId=null;c.copyright=null;c.definitionExpression=null;c.displayField=null;c.elevationInfo=null;c.featureReduction=null;c.fullExtent=null;c.geometryType=null;c.hasZ=void 0;c.labelingInfo=null;c.labelsVisible=!0;c.legendEnabled=!0;c.mediaType="application/json";c.objectIdField=null;c.popupEnabled=!0;c.popupTemplate=null;c.screenSizePerspectiveEnabled=!0;c.source=null;c.spatialReference=
f.SpatialReference.WGS84;c.type="ogc-feature";c.typeIdField=null;c.types=null;c.url=null;return c}b.__extends(a,k);a.prototype.load=function(c){var a=this,b=new t.default({layer:this});this._set("source",b);this.addResolvingPromise(b.load(c).then(function(){var c=a.source.layerDefinition,b=c.hasZ,g=c.objectIdField;a.set({geometryType:f.typeKebabDictionary.fromJSON(c.geometryType),hasZ:b,objectIdField:g});h.fixRendererFields(a.renderer,a.fields);h.fixTimeInfoFields(a.timeInfo,a.fields)}));return this.when()};
Object.defineProperty(a.prototype,"capabilities",{get:function(){return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:!!this.hasZ},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsQuery:!0,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1},query:{maxRecordCount:1E4,
maxRecordCountFactor:void 0,standardMaxRecordCount:void 0,supportsCacheHint:!1,supportsCentroid:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,
supportsResultType:!1,supportsStandardizedQueriesOnly:!1,supportsStatistics:!1,supportsSqlExpression:!1,tileMaxRecordCount:void 0},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUploadWithItemId:!1,supportsUpdateWithoutM:!1}}},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,
"defaultPopupTemplate",{get:function(){return this.createPopupTemplate()},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"description",{get:function(){var c,a,b;return null!==(b=null===(a=null===(c=this.source)||void 0===c?void 0:c.collection)||void 0===a?void 0:a.description)&&void 0!==b?b:null},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"fields",{get:function(){var c,a,b,d=null===(a=null===(c=this.source)||void 0===c?void 0:c.layerDefinition)||void 0===
a?void 0:a.fields;return null!==(b=null===d||void 0===d?void 0:d.map(function(c){return m.fromJSON(c)}))&&void 0!==b?b:null},set:function(c){c?this._override("fields",c):this._clearOverride("fields")},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"fieldsIndex",{get:function(){return new C(this.fields)},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"renderer",{get:function(){var c,a,b,d=null===(b=null===(a=null===(c=this.source)||void 0===c?void 0:c.layerDefinition)||
void 0===a?void 0:a.drawingInfo)||void 0===b?void 0:b.renderer;return d?l.read(d,null,{origin:"service"}):null},set:function(c){c?(h.fixRendererFields(c,this.fields),this._override("renderer",c)):this._clearOverride("renderer")},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"spatialReferences",{get:function(){var c,a;return null===(a=null===(c=this.source)||void 0===c?void 0:c.collection)||void 0===a?void 0:a.crs},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,
"title",{get:function(){var c,a;return null===(a=null===(c=this.source)||void 0===c?void 0:c.collection)||void 0===a?void 0:a.title},set:function(a){a?this._override("title",a):this._clearOverride("title")},enumerable:!1,configurable:!0});a.prototype.on=function(a,b){return k.prototype.on.call(this,a,b)};a.prototype.createPopupTemplate=function(a){return E.createPopupTemplate(this,a)};a.prototype.createQuery=function(){return new n};a.prototype.getField=function(a){return this.fieldsIndex.get(a)};
a.prototype.getFieldDomain=function(a,b){var c=this,d,e,g=!1;b=null===(d=null===b||void 0===b?void 0:b.feature)||void 0===d?void 0:d.attributes;var f=this.typeIdField&&(null===b||void 0===b?void 0:b[this.typeIdField]);null!=f&&this.types&&(g=this.types.some(function(b){var d;return b.id==f?(e=null===(d=b.domains)||void 0===d?void 0:d[a],"inherited"===(null===e||void 0===e?void 0:e.type)&&(e=c._getLayerDomain(a)),!0):!1}));g||e||(e=this._getLayerDomain(a));return e};a.prototype.queryFeatures=function(a,
b){var c=this;return this.load().then(function(){return c.source.queryFeatures(n.from(a)||c.createQuery(),b)}).then(function(a){var b;null===(b=null===a||void 0===a?void 0:a.features)||void 0===b?void 0:b.forEach(function(a){a.layer=a.sourceLayer=c});return a})};a.prototype._getLayerDomain=function(a){if(!this.fields)return null;for(var b=0,c=this.fields;b<c.length;b++){var d=c[b];if(d.name===a&&d.domain)return d.domain}return null};b.__decorate([d.property({readOnly:!0,dependsOn:["hasZ"]})],a.prototype,
"capabilities",null);b.__decorate([d.property({type:String})],a.prototype,"collectionId",void 0);b.__decorate([d.property({type:String})],a.prototype,"copyright",void 0);b.__decorate([d.property({readOnly:!0,dependsOn:["fields","title"]})],a.prototype,"defaultPopupTemplate",null);b.__decorate([d.property({type:String})],a.prototype,"definitionExpression",void 0);b.__decorate([d.property({dependsOn:["source.collection"],readOnly:!0,type:String})],a.prototype,"description",null);b.__decorate([d.property({type:String})],
a.prototype,"displayField",void 0);b.__decorate([d.property({type:F})],a.prototype,"elevationInfo",void 0);b.__decorate([d.property({types:{key:"type",base:y.default,typeMap:{selection:A,cluster:z}}})],a.prototype,"featureReduction",void 0);b.__decorate([d.property({dependsOn:["source.layerDefinition"],type:[m]})],a.prototype,"fields",null);b.__decorate([d.property({readOnly:!0,dependsOn:["fields"]})],a.prototype,"fieldsIndex",null);b.__decorate([d.property({type:f.Extent,aliasOf:"source.fullExtent"})],
a.prototype,"fullExtent",void 0);b.__decorate([d.property({type:["point","polygon","polyline","multipoint"]})],a.prototype,"geometryType",void 0);b.__decorate([d.property({type:Boolean})],a.prototype,"hasZ",void 0);b.__decorate([d.property({type:String})],a.prototype,"id",void 0);b.__decorate([d.property({type:[D]})],a.prototype,"labelingInfo",void 0);b.__decorate([d.property({type:Boolean})],a.prototype,"labelsVisible",void 0);b.__decorate([d.property({type:Boolean})],a.prototype,"legendEnabled",
void 0);b.__decorate([d.property({type:["show","hide"]})],a.prototype,"listMode",void 0);b.__decorate([d.property({type:String})],a.prototype,"mediaType",void 0);b.__decorate([d.property({type:String})],a.prototype,"objectIdField",void 0);b.__decorate([d.property({type:Boolean})],a.prototype,"popupEnabled",void 0);b.__decorate([d.property({type:p})],a.prototype,"popupTemplate",void 0);b.__decorate([d.property({dependsOn:["source.layerDefinition"],types:l.rendererTypes})],a.prototype,"renderer",null);
b.__decorate([d.property({type:Boolean})],a.prototype,"screenSizePerspectiveEnabled",void 0);b.__decorate([d.property({readOnly:!0})],a.prototype,"source",void 0);b.__decorate([d.property({type:f.SpatialReference,readOnly:!0})],a.prototype,"spatialReference",void 0);b.__decorate([d.property({dependsOn:["source.collection"],readOnly:!0,type:[String]})],a.prototype,"spatialReferences",null);b.__decorate([d.property({dependsOn:["source.collection"]})],a.prototype,"title",null);b.__decorate([d.property({readOnly:!0})],
a.prototype,"type",void 0);b.__decorate([d.property({type:String,readOnly:!0})],a.prototype,"typeIdField",void 0);b.__decorate([d.property({type:[B]})],a.prototype,"types",void 0);b.__decorate([d.property({type:String})],a.prototype,"url",void 0);return a=b.__decorate([d.subclass("esri.layers.OGCFeatureLayer")],a)}(u.BlendLayer(x.TemporalLayer(w.ScaleRangeLayer(v.RefreshableLayer(q.ReadOnlyMultiOriginJSONMixin(r))))))});