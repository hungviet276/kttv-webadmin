// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/number":function(){define(["require","exports","tslib","../core/string","../intl/locale"],function(v,a,q,p,h){function b(a){a||(a=h.getLocale());var d=a in u;if(!d){var c=a.split("-");1<c.length&&c[0]in u&&(a=c[0],d=!0);d||(a="en")}a=u[a];d=a[2];return{decimal:a[0],group:a[1],pattern:void 0===d?"#,##0.###":d}}function l(a,d,g){g=g||{};!0===g.places&&(g.places=0);Infinity===g.places&&(g.places=6);d=d.split(".");var c="string"===typeof g.places&&g.places.indexOf(","),b=g.places;
c?b=g.places.substring(c+1):0<=b||(b=(d[1]||[]).length);0>g.round||(a=Number(a.toFixed(Number(b))));a=String(Math.abs(a)).split(".");var t=a[1]||"";d[1]||g.places?(c&&(g.places=g.places.substring(0,c)),c=void 0!==g.places?g.places:d[1]&&d[1].lastIndexOf("0")+1,c>t.length&&(a[1]=p.padEnd(t,Number(c),"0")),b<t.length&&(a[1]=t.substr(0,Number(b)))):a[1]&&a.pop();b=d[0].replace(",","");c=b.indexOf("0");-1!==c&&(c=b.length-c,c>a[0].length&&(a[0]=p.padStart(a[0],c,"0")),-1===b.indexOf("#")&&(a[0]=a[0].substr(a[0].length-
c)));var b=d[0].lastIndexOf(","),e,l;-1!==b&&(e=d[0].length-b-1,d=d[0].substr(0,b),b=d.lastIndexOf(","),-1!==b&&(l=d.length-b-1));d=[];for(b=a[0];b;)c=b.length-e,d.push(0<c?b.substr(c):b),b=0<c?b.slice(0,c):"",l&&(e=l,l=void 0);a[0]=d.reverse().join(g.group||",");return a.join(g.decimal||".")}function e(a){a=a||{};var d=b(a.locale),c=a.pattern||d.pattern,e=d.group,G=d.decimal,t=1;if(-1!==c.indexOf("%"))t/=100;else if(-1!==c.indexOf("\u2030"))t/=1E3;else if(-1!==c.indexOf("\u00a4"))throw Error("currency notation not supported");
d=c.split(";");1===d.length&&d.push("-"+d[0]);return{regexp:x(d,function(d){d="(?:"+p.escapeRegExpString(d,".")+")";return d.replace(g,function(d){var c={signed:!1,separator:a.strict?e:[e,""],fractional:a.fractional,decimal:G,exponent:!1};d=d.split(".");var g=a.places;1===d.length&&1!==t&&(d[1]="###");1===d.length||0===g?c.fractional=!1:(void 0===g&&(g=a.pattern?d[1].lastIndexOf("0")+1:Infinity),g&&null==a.fractional&&(c.fractional=!0),!a.places&&g<d[1].length&&(g+=","+d[1].length),c.places=g);d=
d[0].split(",");1<d.length&&(c.groupSize=d.pop().length,1<d.length&&(c.groupSize2=d.pop().length));return"("+m(c)+")"})},!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:e,decimal:G,factor:t}}function m(a){a=a||{};"places"in a||(a.places=Infinity);"string"!==typeof a.decimal&&(a.decimal=".");"fractional"in a&&!/^0/.test(String(a.places))||(a.fractional=[!0,!1]);"exponent"in a||(a.exponent=[!0,!1]);"eSigned"in a||(a.eSigned=[!0,!1]);var d=r(a),c=x(a.fractional,function(d){var c="";d&&0!==a.places&&(c="\\"+
a.decimal,c=Infinity===a.places?"(?:"+c+"\\d+)?":c+("\\d{"+a.places+"}"));return c},!0),g=x(a.exponent,function(d){return d?"([eE]"+r({signed:a.eSigned})+")":""}),d=d+c;c&&(d="(?:(?:"+d+")|(?:"+c+"))");return d+g}function r(a){a=a||{};"signed"in a||(a.signed=[!0,!1]);"separator"in a?"groupSize"in a||(a.groupSize=3):a.separator="";var d=x(a.signed,function(a){return a?"[-+]":""},!0),c=x(a.separator,function(d){if(!d)return"(?:\\d+)";d=p.escapeRegExpString(d);" "===d?d="\\s":"\u00a0"===d&&(d="\\s\\xa0");
var c=a.groupSize,g=a.groupSize2;return g?(d="(?:0|[1-9]\\d{0,"+(g-1)+"}(?:["+d+"]\\d{"+g+"})*["+d+"]\\d{"+c+"})",0<c-g?"(?:"+d+"|(?:0|[1-9]\\d{0,"+(c-1)+"}))":d):"(?:0|[1-9]\\d{0,"+(c-1)+"}(?:["+d+"]\\d{"+c+"})*)"},!0);return d+c}Object.defineProperty(a,"__esModule",{value:!0});a.parse=a._parseInfo=a.regexp=a.format=a.getCustoms=void 0;var u={ar:[".",","],bs:[",","."],ca:[",","."],cs:[",","\u00a0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",",
"."],"es-mx":[".",","],et:[",","\u00a0"],fi:[",","\u00a0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\u00a0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\u00a0"],lv:[",","\u00a0"],mk:[",","."],nb:[",","\u00a0"],nl:[",","."],pl:[",","\u00a0"],pt:[",","."],"pt-pt":[",","\u00a0"],ro:[",","."],ru:[",","\u00a0"],sk:[",","\u00a0"],sl:[",","."],sr:[",","."],sv:[",","\u00a0"],th:[".",","],tr:[",","."],uk:[",",
"\u00a0"],vi:[",","."],zh:[".",","]};a.getCustoms=b;a.format=function(a,d){d=q.__assign({},d);var c=b(d.locale);d.customs=c;var e=d.pattern||c.pattern;if(isNaN(a)||Infinity===Math.abs(a))return null;d=d||{};var c=d.customs.group,G=d.customs.decimal,e=e.split(";"),t=e[0],e=e[0>a?1:0]||"-"+t;if(-1!==e.indexOf("%"))a*=100;else if(-1!==e.indexOf("\u2030"))a*=1E3;else{if(-1!==e.indexOf("\u00a4"))throw Error("currency notation not supported");if(-1!==e.indexOf("E"))throw Error("exponential notation not supported");
}var h=g,t=t.match(h);if(!t)throw Error("unable to find a number expression in pattern: "+e);!1===d.fractional&&(d.places=0);return e.replace(h,l(a,t[0],{decimal:G,group:c,places:d.places,round:d.round}))};var g=/[#0,]*[#0](?:\.0*#*)?/;a.regexp=function(a){return e(a).regexp};a._parseInfo=e;a.parse=function(a,d){d=e(d);a=(new RegExp("^"+d.regexp+"$")).exec(a);if(!a)return NaN;var c=a[1];if(!a[1]){if(!a[2])return NaN;c=a[2];d.factor*=-1}c=c.replace(new RegExp("["+d.group+"\\s\\xa0]","g"),"").replace(d.decimal,
".");return Number(c)*d.factor};var x=function(a,d,g){if(!(a instanceof Array))return d(a);for(var c=[],b=0;b<a.length;b++)c.push(d(a[b]));a=c.join("|");return"("+(g?"?:":"")+a+")"}})},"esri/intl/locale":function(){define(["require","exports","tslib","../core/global"],function(v,a,q,p){function h(){var a,d;return null!==(d=null!==c&&void 0!==c?c:null===(a=p.navigator)||void 0===a?void 0:a.language)&&void 0!==d?d:"en"}function b(){void 0===x&&(x=h());return x}function l(){var a=null!==g&&void 0!==
g?g:h();x!==a&&(x=a,q.__spreadArrays(F).forEach(function(d){d.call(null,a)}),q.__spreadArrays(H).forEach(function(d){d.call(null,a)}))}var e,m,r,u;Object.defineProperty(a,"__esModule",{value:!0});var g=a.beforeLocaleChange=a.onLocaleChange=a.prefersRTL=a.setLocale=a.getLocale=a.getDefaultLocale=void 0,x=void 0,c=null!==(m=null===(e=p.esriConfig)||void 0===e?void 0:e.locale)&&void 0!==m?m:null===(r=p.dojoConfig)||void 0===r?void 0:r.locale;a.getDefaultLocale=h;a.getLocale=b;a.setLocale=function(a){g=
a?a:void 0;l()};var d={he:!0,ar:!0};a.prefersRTL=function(a){void 0===a&&(a=b());a=/^([a-zA-Z]{2,3})(?:[_\-]\w+)*$/.exec(a);a=null===a||void 0===a?void 0:a[1].toLowerCase();return void 0!==a&&(d[a]||!1)};var H=[];a.onLocaleChange=function(a){H.push(a);return{remove:function(){H.splice(H.indexOf(a),1)}}};var F=[];a.beforeLocaleChange=function(a){F.push(a);return{remove:function(){H.splice(F.indexOf(a),1)}}};null===(u=p.addEventListener)||void 0===u?void 0:u.call(p,"languagechange",l)})},"esri/geometry/projection":function(){define("require exports ../core/promiseUtils ./pe ./support/GeographicTransformation @dojo/framework/shim/Promise".split(" "),
function(v,a,q,p,h){function b(a,b,c,d,m){void 0===m&&(m=null);if(null===m){var g=h.cacheKey(c,d);void 0!==u[g]?m=u[g]:(m=l(c,d,null),null===m&&(m=new h),u[g]=m)}return e._project(a,b,c,d,m)}function l(a,b,c){void 0===c&&(c=null);a=e._getTransformation(m,a,b,c,null===c||void 0===c?void 0:c.spatialReference);return null!==a?h.fromGE(a):null}Object.defineProperty(a,"__esModule",{value:!0});a.getTransformations=a.getTransformation=a.projectMany=a.project=a.load=a.isSupported=a.isLoaded=void 0;var e=
null,m=null;a.isLoaded=function(){return!!e&&p.isLoaded()};a.isSupported=function(){return p.isSupported()};var r=null;a.load=function(){return r?r:r=q.all([p.load(),new Promise(function(a,b){v(["./geometryEngineBase"],a,b)}),new Promise(function(a,b){v(["./geometryAdapters/hydrated"],a,b)})]).then(function(a){var g=a[1];m=a[2].hydratedAdapter;e=g;e._enableProjection(p)})};a.project=function(a,e,c){void 0===c&&(c=null);return a instanceof Array?0===a.length?[]:b(m,a,a[0].spatialReference,e,c):b(m,
[a],a.spatialReference,e,c)[0]};var u={};a.projectMany=b;a.getTransformation=l;a.getTransformations=function(a,b,c){void 0===c&&(c=null);a=e._getTransformationBySuitability(m,a,b,c,null===c||void 0===c?void 0:c.spatialReference);if(null!==a){b=[];for(c=0;c<a.length;c++)b.push(h.fromGE(a[c]));return b}return[]}})},"esri/geometry/pe":function(){define("require exports tslib ../assets ../core/has ../core/promiseUtils @dojo/framework/shim/Promise".split(" "),function(v,a,q,p,h,b){function l(b){function g(a,
d,c){a[d]=c(a[d])}a._pe=b;x.init();c.init();d.init();H.init();F.init();a.PeGCSExtent=function(d){function c(){return null!==d&&d.apply(this,arguments)||this}q.__extends(c,d);c.prototype.destroy=function(){a._pe.destroy(this)};return c}(a._pe.PeGCSExtent);for(var e=0,l=[a._pe.PeDatum,a._pe.PeGeogcs,a._pe.PeGeogtran,a._pe.PeObject,a._pe.PeParameter,a._pe.PePrimem,a._pe.PeProjcs,a._pe.PeSpheroid,a._pe.PeUnit];e<l.length;e++)b=l[e],g(b.prototype,"getName",function(a){return function(){return a.call(this,
Array(x.PE_NAME_MAX))}});e=0;for(l=[a._pe.PeGeogtran,a._pe.PeProjcs];e<l.length;e++)b=l[e],g(b.prototype,"getParameters",function(d){return function(){for(var c=Array(x.PE_PARM_MAX),b=d.call(this),g=0;g<c.length;g++){var e=a._pe.getValue(b,"*");c[g]=e?a._pe.wrapPointer(e,a._pe.PeParameter):null;b+=Int32Array.BYTES_PER_ELEMENT}return c}});g(a._pe.PeHorizon.prototype,"getCoord",function(a){return function(){var d=this.getSize();if(!d)return null;var c=[],b=a.call(this);u(c,d,b);return c}});g(a._pe.PeGTlistExtendedEntry.prototype,
"getEntries",function(d){var c=a._pe._pe_getPeGTlistExtendedGTsSize();return function(){var b=null,g=d.call(this);if(!a._pe.compare(g,a._pe.NULL)){var b=[g],e=this.getSteps();if(1<e)for(var g=a._pe.getPointer(g),t=1;t<e;t++)b.push(a._pe.wrapPointer(g+c*t,a._pe.PeGTlistExtendedGTs))}return b}});var h=a._pe._pe_getPeHorizonSize();b=function(d){return function(){var c=this._cache;c||(this._cache=c=new Map);if(c.has(d))return c.get(d);var b=null,g=d.call(this);if(!a._pe.compare(g,a._pe.NULL)){var b=[g],
e=g.getNump();if(1<e)for(var g=a._pe.getPointer(g),t=1;t<e;t++)b.push(a._pe.wrapPointer(g+h*t,a._pe.PeHorizon))}c.set(d,b);return b}};g(a._pe.PeProjcs.prototype,"horizonGcsGenerate",b);g(a._pe.PeProjcs.prototype,"horizonPcsGenerate",b);a._pe.PeObject.prototype.toString=function(d){void 0===d&&(d=x.PE_STR_OPTS_NONE);a._pe.ensureCache.prepare();var c=a._pe.getPointer(this),b=a._pe.ensureInt8(Array(x.PE_BUFFER_MAX));return a._pe.UTF8ToString(a._pe._pe_object_to_string_ext(c,d,b))}}function e(d){if(d){var c=
a._pe.getClass(d);c&&(c=a._pe.getCache(c))&&(d=a._pe.getPointer(d))&&delete c[d]}}function m(d,c){var b=[];c=Array(c);for(var g=0;g<d;g++)b.push(a._pe.ensureInt8(c));return b}function r(a){var d;Array.isArray(a[0])?(d=[],a.forEach(function(a){d.push(a[0],a[1])})):d=a;return d}function u(d,c,b,g){void 0===g&&(g=!1);if(g)for(g=0;g<2*c;g++)d[g]=a._pe.getValue(b+g*Float64Array.BYTES_PER_ELEMENT,"double");else{var e=0===d.length;for(g=0;g<c;g++)e&&(d[g]=Array(2)),d[g][0]=a._pe.getValue(b,"double"),d[g][1]=
a._pe.getValue(b+Float64Array.BYTES_PER_ELEMENT,"double"),b+=2*Float64Array.BYTES_PER_ELEMENT}}Object.defineProperty(a,"__esModule",{value:!0});a._init=a.PeVersion=a.PePCSInfo=a.PeNotationUtm=a.PeNotationUsng=a.PeNotationMgrs=a.PeNotationDms=a.PeGTTransformations=a.PeGTlistExtendedEntry=a.PeGTlistExtended=a.PeGCSExtent=a.PeFactory=a.PeDefs=a.PeCSTransformations=a.load=a.isSupported=a.isLoaded=a._pe=void 0;var g;a._pe=null;a.isLoaded=function(){return!!a._pe};a.isSupported=function(){return!!h("esri-wasm")};
a.load=function(){return g?g:g=b.create(function(a,d){(new Promise(function(a,d){v(["./support/pe-wasm"],a,d)})).then(function(c){c({locateFile:function(a){return p.getAssetUrl("esri/geometry/support/"+a)},onAbort:function(a){d(Error(a))}}).then(function(d){l(d);a()})})})};(function(d){function c(d,c,b){a._pe.ensureCache.prepare();var g=r(b),e=b===g,g=a._pe.ensureFloat64(g);(d=a._pe._pe_geog_to_proj(a._pe.getPointer(d),c,g))&&u(b,c,g,e);return d}function b(a,d,c){return g(a,d,c,0)}function g(d,c,
g,b){a._pe.ensureCache.prepare();var e=r(g),t=g===e,e=a._pe.ensureFloat64(e);(d=a._pe._pe_proj_to_geog_center(a._pe.getPointer(d),c,e,b))&&u(g,c,e,t);return d}d.geogToProj=c;d.projGeog=function(a,d,g,e){switch(e){case x.PE_TRANSFORM_P_TO_G:return b(a,d,g);case x.PE_TRANSFORM_G_TO_P:return c(a,d,g)}return 0};d.projToGeog=b;d.projToGeogCenter=g})(a.PeCSTransformations||(a.PeCSTransformations={}));var x;(function(d){d.init=function(){d.PE_BUFFER_MAX=a._pe.PeDefs.prototype.PE_BUFFER_MAX;d.PE_NAME_MAX=
a._pe.PeDefs.prototype.PE_NAME_MAX;d.PE_MGRS_MAX=a._pe.PeDefs.prototype.PE_MGRS_MAX;d.PE_USNG_MAX=a._pe.PeDefs.prototype.PE_USNG_MAX;d.PE_DD_MAX=a._pe.PeDefs.prototype.PE_DD_MAX;d.PE_DDM_MAX=a._pe.PeDefs.prototype.PE_DDM_MAX;d.PE_DMS_MAX=a._pe.PeDefs.prototype.PE_DMS_MAX;d.PE_UTM_MAX=a._pe.PeDefs.prototype.PE_UTM_MAX;d.PE_PARM_MAX=a._pe.PeDefs.prototype.PE_PARM_MAX;d.PE_TYPE_NONE=a._pe.PeDefs.prototype.PE_TYPE_NONE;d.PE_TYPE_GEOGCS=a._pe.PeDefs.prototype.PE_TYPE_GEOGCS;d.PE_TYPE_PROJCS=a._pe.PeDefs.prototype.PE_TYPE_PROJCS;
d.PE_TYPE_GEOGTRAN=a._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;d.PE_TYPE_COORDSYS=a._pe.PeDefs.prototype.PE_TYPE_COORDSYS;d.PE_TYPE_UNIT=a._pe.PeDefs.prototype.PE_TYPE_UNIT;d.PE_STR_OPTS_NONE=a._pe.PeDefs.prototype.PE_STR_OPTS_NONE;d.PE_STR_AUTH_NONE=a._pe.PeDefs.prototype.PE_STR_AUTH_NONE;d.PE_STR_AUTH_TOP=a._pe.PeDefs.prototype.PE_STR_AUTH_TOP;d.PE_STR_NAME_CANON=a._pe.PeDefs.prototype.PE_STR_NAME_CANON;d.PE_PARM_X0=a._pe.PeDefs.prototype.PE_PARM_X0;d.PE_PARM_ND=a._pe.PeDefs.prototype.PE_PARM_ND;d.PE_TRANSFORM_1_TO_2=
a._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;d.PE_TRANSFORM_2_TO_1=a._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;d.PE_TRANSFORM_P_TO_G=a._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;d.PE_TRANSFORM_G_TO_P=a._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;d.PE_HORIZON_RECT=a._pe.PeDefs.prototype.PE_HORIZON_RECT;d.PE_HORIZON_POLY=a._pe.PeDefs.prototype.PE_HORIZON_POLY;d.PE_HORIZON_LINE=a._pe.PeDefs.prototype.PE_HORIZON_LINE;d.PE_HORIZON_DELTA=a._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(x=a.PeDefs||(a.PeDefs={}));(function(d){function c(d,
c){var e=null,t=b[d];t||(t={},b[d]=t);t.hasOwnProperty(String(c))?e=t[c]:(d=a._pe.PeFactory.prototype.factoryByType(d,c),a._pe.compare(d,a._pe.NULL)||(e=d,t[c]=e));return e=g(e)}function g(d){if(d){var c=d.getType();switch(c){case x.PE_TYPE_GEOGCS:d=a._pe.castObject(d,a._pe.PeGeogcs);break;case x.PE_TYPE_PROJCS:d=a._pe.castObject(d,a._pe.PeProjcs);break;case x.PE_TYPE_GEOGTRAN:d=a._pe.castObject(d,a._pe.PeGeogtran);break;default:c&x.PE_TYPE_UNIT&&(d=a._pe.castObject(d,a._pe.PeUnit))}}return d}var b=
{},e={};d.initialize=function(){a._pe.PeFactory.prototype.initialize(null)};d.coordsys=function(a){return c(x.PE_TYPE_COORDSYS,a)};d.factoryByType=c;d.fromString=function(d,c){var b=null,t=e[d];t||(t={},e[d]=t);t.hasOwnProperty(c)?b=t[c]:(d=a._pe.PeFactory.prototype.fromString(d,c),a._pe.compare(d,a._pe.NULL)||(b=d,t[c]=b));return b=g(b)};d.geogcs=function(a){return c(x.PE_TYPE_GEOGCS,a)};d.geogtran=function(a){return c(x.PE_TYPE_GEOGTRAN,a)};d.getCode=function(d){return a._pe.PeFactory.prototype.getCode(d)};
d.projcs=function(a){return c(x.PE_TYPE_PROJCS,a)};d.unit=function(a){return c(x.PE_TYPE_UNIT,a)}})(a.PeFactory||(a.PeFactory={}));a.PeGCSExtent=null;var c;(function(d){var c;d.init=function(){d.PE_GTLIST_OPTS_COMMON=a._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;c=a._pe._pe_getPeGTlistExtendedEntrySize()};d.getGTlist=function(d,g,b,e,t,l){var h=null,m=new a._pe.PeInteger(l);try{var x=a._pe.PeGTlistExtended.prototype.getGTlist(d,g,b,e,t,m);if(l=m.val)if(h=[x],1<l){var A=a._pe.getPointer(x);
for(d=1;d<l;d++)h.push(a._pe.wrapPointer(A+c*d,a._pe.PeGTlistExtendedEntry))}}finally{a._pe.destroy(m)}return h}})(c=a.PeGTlistExtended||(a.PeGTlistExtended={}));(function(d){d.destroy=function(d){if(d&&d.length){for(var c=0;c<d.length;c++){var g=d[c];e(g);g.getEntries().forEach(function(a){e(a);a=a.getGeogtran();e(a);a.getParameters().forEach(e);[a.getGeogcs1(),a.getGeogcs2()].forEach(function(a){e(a);var d=a.getDatum();e(d);e(d.getSpheroid());e(a.getPrimem());e(a.getUnit())})})}a._pe.PeGTlistExtendedEntry.prototype.Delete(d[0])}}})(a.PeGTlistExtendedEntry||
(a.PeGTlistExtendedEntry={}));(function(d){d.geogToGeog=function(d,c,g,b,e){a._pe.ensureCache.prepare();var t=r(g),l=g===t,t=a._pe.ensureFloat64(t),h=0;b&&(h=a._pe.ensureFloat64(b));(d=a._pe._pe_geog_to_geog(a._pe.getPointer(d),c,t,h,e))&&u(g,c,t,l);return d}})(a.PeGTTransformations||(a.PeGTTransformations={}));(function(d){function c(d,c,g,b,e,t){a._pe.ensureCache.prepare();var l,h;switch(d){case "dd":l=a._pe._pe_geog_to_dd;h=x.PE_DD_MAX;break;case "ddm":l=a._pe._pe_geog_to_ddm;h=x.PE_DDM_MAX;break;
case "dms":l=a._pe._pe_geog_to_dms,h=x.PE_DMS_MAX}d=0;c&&(d=a._pe.getPointer(c));c=r(b);c=a._pe.ensureFloat64(c);h=m(g,h);b=a._pe.ensureInt32(h);if(e=l(d,g,c,e,b))for(l=0;l<g;l++)t[l]=a._pe.UTF8ToString(h[l]);return e}function g(d,c,g,b,e){a._pe.ensureCache.prepare();var t;switch(d){case "dd":t=a._pe._pe_dd_to_geog;break;case "ddm":t=a._pe._pe_ddm_to_geog;break;case "dms":t=a._pe._pe_dms_to_geog}d=0;c&&(d=a._pe.getPointer(c));c=b.map(function(d){return a._pe.ensureString(d)});b=a._pe.ensureInt32(c);
c=a._pe.ensureFloat64(Array(2*g));(t=t(d,g,b,c))&&u(e,g,c);return t}d.geog_to_dms=function(a,d,g,b,e){return c("dms",a,d,g,b,e)};d.dms_to_geog=function(a,d,c,b){return g("dms",a,d,c,b)};d.geog_to_ddm=function(a,d,g,b,e){return c("ddm",a,d,g,b,e)};d.ddm_to_geog=function(a,d,c,b){return g("ddm",a,d,c,b)};d.geog_to_dd=function(a,d,g,b,e){return c("dd",a,d,g,b,e)};d.dd_to_geog=function(a,d,c,b){return g("dd",a,d,c,b)}})(a.PeNotationDms||(a.PeNotationDms={}));var d;(function(d){d.init=function(){d.PE_MGRS_STYLE_NEW=
a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;d.PE_MGRS_STYLE_OLD=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;d.PE_MGRS_STYLE_AUTO=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;d.PE_MGRS_180_ZONE_1_PLUS=a._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;d.PE_MGRS_ADD_SPACES=a._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};d.geog_to_mgrs_extended=function(d,c,g,b,e,l,h){a._pe.ensureCache.prepare();var t=0;d&&(t=a._pe.getPointer(d));d=r(g);g=a._pe.ensureFloat64(d);d=m(c,x.PE_MGRS_MAX);
var H=a._pe.ensureInt32(d);if(b=a._pe._pe_geog_to_mgrs_extended(t,c,g,b,e,l,H))for(e=0;e<c;e++)h[e]=a._pe.UTF8ToString(d[e]);return b};d.mgrs_to_geog_extended=function(d,c,g,b,e){a._pe.ensureCache.prepare();var t=0;d&&(t=a._pe.getPointer(d));d=g.map(function(d){return a._pe.ensureString(d)});g=a._pe.ensureInt32(d);d=a._pe.ensureFloat64(Array(2*c));(b=a._pe._pe_mgrs_to_geog_extended(t,c,g,b,d))&&u(e,c,d);return b}})(d=a.PeNotationMgrs||(a.PeNotationMgrs={}));(function(d){d.geog_to_usng=function(d,
c,g,b,e,l,h){a._pe.ensureCache.prepare();var t=0;d&&(t=a._pe.getPointer(d));d=r(g);g=a._pe.ensureFloat64(d);d=m(c,x.PE_MGRS_MAX);var H=a._pe.ensureInt32(d);if(b=a._pe._pe_geog_to_usng(t,c,g,b,e,l,H))for(e=0;e<c;e++)h[e]=a._pe.UTF8ToString(d[e]);return b};d.usng_to_geog=function(d,c,g,b){a._pe.ensureCache.prepare();var e=0;d&&(e=a._pe.getPointer(d));d=g.map(function(d){return a._pe.ensureString(d)});g=a._pe.ensureInt32(d);d=a._pe.ensureFloat64(Array(2*c));(e=a._pe._pe_usng_to_geog(e,c,g,d))&&u(b,c,
d);return e}})(a.PeNotationUsng||(a.PeNotationUsng={}));var H;(function(d){d.init=function(){d.PE_UTM_OPTS_NONE=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;d.PE_UTM_OPTS_ADD_SPACES=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;d.PE_UTM_OPTS_NS=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};d.geog_to_utm=function(d,c,g,b,e){a._pe.ensureCache.prepare();var l=0;d&&(l=a._pe.getPointer(d));d=r(g);g=a._pe.ensureFloat64(d);d=m(c,x.PE_UTM_MAX);var h=a._pe.ensureInt32(d);if(b=a._pe._pe_geog_to_utm(l,
c,g,b,h))for(l=0;l<c;l++)e[l]=a._pe.UTF8ToString(d[l]);return b};d.utm_to_geog=function(d,c,g,b,e){a._pe.ensureCache.prepare();var l=0;d&&(l=a._pe.getPointer(d));d=g.map(function(d){return a._pe.ensureString(d)});g=a._pe.ensureInt32(d);d=a._pe.ensureFloat64(Array(2*c));(b=a._pe._pe_utm_to_geog(l,c,g,b,d))&&u(e,c,d);return b}})(H=a.PeNotationUtm||(a.PeNotationUtm={}));var F;(function(d){var c=new Map;d.init=function(){d.PE_PCSINFO_OPTION_NONE=a._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;d.PE_PCSINFO_OPTION_DOMAIN=
a._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;d.PE_POLE_OUTSIDE_BOUNDARY=a._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;d.PE_POLE_POINT=a._pe.PePCSInfo.prototype.PE_POLE_POINT};d.generate=function(g,b){void 0===b&&(b=d.PE_PCSINFO_OPTION_DOMAIN);var e,l;c.has(g)&&(l=c.get(g),l[b]&&(e=l[b]));e||(e=a._pe.PePCSInfo.prototype.generate(g,b),l||(l=[],c.set(g,l)),l[b]=e);return e}})(F=a.PePCSInfo||(a.PePCSInfo={}));(function(d){d.version_string=function(){return a._pe.PeVersion.prototype.version_string()}})(a.PeVersion||
(a.PeVersion={}));a._init=l})},"esri/assets":function(){define(["require","exports","./request","./core/urlUtils"],function(v,a,q,p){function h(a){return p.join(v.toUrl("."),"../",a)}Object.defineProperty(a,"__esModule",{value:!0});a.getAssetUrl=a.fetchAsset=void 0;a.fetchAsset=function(a,l){return q(h(a),l)};a.getAssetUrl=h})},"esri/geometry/support/GeographicTransformation":function(){define(["require","exports","./GeographicTransformationStep"],function(v,a,q){return function(){function a(a){this.steps=
[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(a&&a.steps){var b=0;for(a=a.steps;b<a.length;b++){var l=a[b];l instanceof q?this.steps.push(l):this.steps.push(new q({wkid:l.wkid,wkt:l.wkt,isInverse:l.isInverse}))}}}a.cacheKey=function(a,b){return[void 0!==a.wkid&&null!==a.wkid?a.wkid.toString():"-1",void 0!==a.wkt&&null!==a.wkt?a.wkt.toString():"",void 0!==b.wkid&&null!==b.wkid?b.wkid.toString():"-1",void 0!==b.wkt&&null!==b.wkt?b.wkt.toString():""].join()};a.fromGE=function(h){var b=
new a,l="",e=0;for(h=h.steps;e<h.length;e++){var m=q.fromGE(h[e]);b.steps.push(m);l+=m.uid.toString()+","}b._cached_projection={};b._gtlistentry=null;b._chain=l;return b};a.prototype.getInverse=function(){var h=new a;h.steps=[];for(var b=this.steps.length-1;0<=b;b--)h.steps.push(this.steps[b].getInverse());return h};a.prototype.getGTListEntry=function(){for(var a="",b=0,l=this.steps;b<l.length;b++)a+=l[b].uid.toString()+",";a!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=
a);return this._gtlistentry};a.prototype.assignCachedGe=function(h,b,l){this._cached_projection[a.cacheKey(h,b)]=l};a.prototype.getCachedGeTransformation=function(h,b){for(var l="",e=0,m=this.steps;e<m.length;e++)l+=m[e].uid.toString()+",";l!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=l);h=this._cached_projection[a.cacheKey(h,b)];return void 0===h?null:h};return a}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["require","exports"],function(v,
a){var q=0;return function(){function a(a){void 0===a&&(a=null);this.uid=q++;a?(this._wkt=void 0!==a.wkt?a.wkt:null,this._wkid=void 0!==a.wkid?a.wkid:-1,this._isInverse=void 0!==a.isInverse?!0===a.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}a.fromGE=function(h){var b=new a;b._wkt=h.wkt;b._wkid=h.wkid;b._isInverse=h.isInverse;return b};Object.defineProperty(a.prototype,"wkt",{get:function(){return this._wkt},set:function(a){this._wkt=a;this.uid=q++},enumerable:!1,configurable:!0});
Object.defineProperty(a.prototype,"wkid",{get:function(){return this._wkid},set:function(a){this._wkid=a;this.uid=q++},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"isInverse",{get:function(){return this._isInverse},set:function(a){this._isInverse=a;this.uid=q++},enumerable:!1,configurable:!0});a.prototype.getInverse=function(){var h=new a;h._wkt=this.wkt;h._wkid=this._wkid;h._isInverse=!this.isInverse;return h};return a}()})},"esri/geometry/geometryAdapters/json":function(){define(["require",
"exports"],function(v,a){Object.defineProperty(a,"__esModule",{value:!0});a.jsonAdapter=void 0;a.jsonAdapter={convertToGEGeometry:function(a,b){return null==b?null:a.convertJSONToGeometry(b)},exportPoint:function(a,b,l){l=new q(a.getPointX(b),a.getPointY(b),l);var e=a.hasZ(b),g=a.hasM(b);e&&(l.z=a.getPointZ(b));g&&(l.m=a.getPointM(b));return l},exportPolygon:function(a,b,l){return new p(a.exportPaths(b),l,a.hasZ(b),a.hasM(b))},exportPolyline:function(a,b,l){return new h(a.exportPaths(b),l,a.hasZ(b),
a.hasM(b))},exportMultipoint:function(a,l,h){return new b(a.exportPoints(l),h,a.hasZ(l),a.hasM(l))},exportExtent:function(a,b,h){var e=a.hasZ(b),g=a.hasM(b);h=new l(a.getXMin(b),a.getYMin(b),a.getXMax(b),a.getYMax(b),h);e&&(e=a.getZExtent(b),h.zmin=e.vmin,h.zmax=e.vmax);g&&(a=a.getMExtent(b),h.mmin=a.vmin,h.mmax=a.vmax);return h}};var q=function(){return function(a,b,l){this.x=a;this.y=b;this.spatialReference=l;this.m=this.z=void 0}}(),p=function(){return function(a,b,l,h){this.rings=a;this.spatialReference=
b;this.hasM=this.hasZ=void 0;l&&(this.hasZ=l);h&&(this.hasM=h)}}(),h=function(){return function(a,b,l,h){this.paths=a;this.spatialReference=b;this.hasM=this.hasZ=void 0;l&&(this.hasZ=l);h&&(this.hasM=h)}}(),b=function(){return function(a,b,l,h){this.points=a;this.spatialReference=b;this.hasM=this.hasZ=void 0;l&&(this.hasZ=l);h&&(this.hasM=h)}}(),l=function(){return function(a,b,l,h,g){this.xmin=a;this.ymin=b;this.xmax=l;this.ymax=h;this.spatialReference=g;this.mmax=this.mmin=this.zmax=this.zmin=void 0}}()})},
"esri/layers/graphics/OptimizedFeature":function(){define(["require","exports"],function(v,a){Object.defineProperty(a,"__esModule",{value:!0});v=function(){function a(a,h,b,l){void 0===a&&(a=null);void 0===h&&(h={});this.displayId=0;this.geohashIndexed=!1;this.geohashY=this.geohashX=0;this.geometry=a;h&&(this.attributes=h);b&&(this.centroid=b);null!=l&&(this.objectId=l)}Object.defineProperty(a.prototype,"hasGeometry",{get:function(){return!(!this.geometry||!this.geometry.coords||!this.geometry.coords.length)},
enumerable:!1,configurable:!0});a.prototype.weakClone=function(){var p=new a(this.geometry,this.attributes,this.centroid,this.objectId);p.displayId=this.displayId;p.geohashIndexed=this.geohashIndexed;p.geohashX=this.geohashX;p.geohashY=this.geohashY;return p};return a}();a.default=v})},"esri/layers/graphics/OptimizedGeometry":function(){define(["require","exports"],function(v,a){Object.defineProperty(a,"__esModule",{value:!0});v=function(){function a(a,h,b){void 0===a&&(a=[]);void 0===h&&(h=[]);void 0===
b&&(b=!1);this.lengths=a;this.coords=h;this.hasIndeterminateRingOrder=b}Object.defineProperty(a.prototype,"isPoint",{get:function(){return 0===this.lengths.length},enumerable:!1,configurable:!0});a.prototype.forEachVertex=function(a){var h=0;this.lengths.length||a(this.coords[0],this.coords[1]);for(var b=0;b<this.lengths.length;b++){for(var l=this.lengths[b],e=0;e<l;e++)a(this.coords[2*(e+h)],this.coords[2*(e+h)+1]);h+=l}};a.prototype.clone=function(){return new a(this.lengths.slice(),this.coords.slice(),
this.hasIndeterminateRingOrder)};return a}();a.default=v})},"esri/layers/graphics/data/FeatureStore":function(){define("require exports ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter".split(" "),function(v,a,q,p,h,b,l,e,m,r,u){Object.defineProperty(a,"__esModule",{value:!0});v=function(){function a(a){this.geometryInfo=
a;this._boundsStore=new r.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new p;this.featureAdapter=u.optimizedFeatureQueryEngineAdapter}Object.defineProperty(a.prototype,"geometryType",{get:function(){return this.geometryInfo.geometryType},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"hasM",{get:function(){return this.geometryInfo.hasM},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"hasZ",{get:function(){return this.geometryInfo.hasZ},
enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"numFeatures",{get:function(){return this._featuresById.size},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"fullBounds",{get:function(){var a=this;if(!this.numFeatures)return null;var c=e.create(e.NEGATIVE_INFINITY);this._featuresById.forEach(function(d){if(d=a._boundsStore.get(d.objectId))c[0]=Math.min(d[0],c[0]),c[1]=Math.min(d[1],c[1]),c[2]=Math.max(d[2],c[2]),c[3]=Math.max(d[3],c[3])});return c},enumerable:!1,
configurable:!0});Object.defineProperty(a.prototype,"storeStatistics",{get:function(){var a=0;this._featuresById.forEach(function(c){c.geometry&&c.geometry.coords&&(a+=c.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:a/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}},enumerable:!1,configurable:!0});a.prototype.add=function(a){this._add(a);this._emitChanged()};a.prototype.addMany=function(a){for(var c=0;c<a.length;c++)this._add(a[c]);this._emitChanged()};a.prototype.clear=
function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};a.prototype.removeById=function(a){a=this._featuresById.get(a);if(!a)return null;this._remove(a);this._emitChanged();return a};a.prototype.removeManyById=function(a){this._boundsStore.invalidateIndex();for(var c=0;c<a.length;c++){var d=this._featuresById.get(a[c]);d&&this._remove(d)}this._emitChanged()};a.prototype.forEachBounds=function(a,c,d){for(var b=0;b<a.length;b++){var g=this._boundsStore.get(a[b].objectId);
g&&c(l.fromRect(d,g))}};a.prototype.getFeature=function(a){return this._featuresById.get(a)};a.prototype.has=function(a){return this._featuresById.has(a)};a.prototype.forEach=function(a){this._featuresById.forEach(function(b){return a(b)})};a.prototype.forEachInBounds=function(a,b){var d=this;this._boundsStore.forEachInBounds(a,function(a){b(d._featuresById.get(a))})};a.prototype.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};a.prototype.sweep=function(){var a=
this,b=!1;this._featuresById.forEach(function(d,c){a._markedIds.has(c)||(b=!0,a._remove(d))});this._markedIds.clear();b&&this._emitChanged()};a.prototype._emitChanged=function(){this.events.emit("changed",void 0)};a.prototype._add=function(a){if(a){var c=a.objectId;if(null==c)h.getLogger("esri.layers.graphics.data.FeatureStore").error(new q("featurestore:invalid-feature","feature id is missing",{feature:a}));else{var d=this._featuresById.get(c),g;this._markedIds.add(c);if(d)a.displayId=d.displayId,
g=this._boundsStore.get(c),this._boundsStore.delete(c);else if(b.isSome(this.onFeatureAdd))this.onFeatureAdd(a);a.geometry&&a.geometry.coords&&a.geometry.coords.length?(g=m.getBoundsOptimizedGeometry(g||e.create(),a.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),this._boundsStore.set(c,g)):this._boundsStore.set(c,null);this._featuresById.set(c,a)}}};a.prototype._remove=function(a){if(b.isSome(this.onFeatureRemove))this.onFeatureRemove(a);this._markedIds.delete(a.objectId);this._boundsStore.delete(a.objectId);
this._featuresById.delete(a.objectId);return a};return a}();a.default=v})},"esri/core/Evented":function(){define("require exports tslib ./Accessor ./handleUtils ./accessorSupport/decorators/subclass".split(" "),function(v,a,q,p,h,b){var l=function(){function a(){this._emitter=new a.EventEmitter(this)}a.prototype.emit=function(a,b){return this._emitter.emit(a,b)};a.prototype.on=function(a,b){return this._emitter.on(a,b)};a.prototype.once=function(a,b){return this._emitter.once(a,b)};a.prototype.hasEventListener=
function(a){return this._emitter.hasEventListener(a)};return a}();(function(a){var e=function(){function a(a){void 0===a&&(a=null);this.target=a;this._listenersMap=null}a.prototype.clear=function(){this._listenersMap&&this._listenersMap.clear()};a.prototype.emit=function(a,b){a=this._listenersMap&&this._listenersMap.get(a);if(!a)return!1;var c=this.target||this;q.__spreadArrays(a).forEach(function(a){a.call(c,b)});return 0<a.length};a.prototype.on=function(a,b){var c=this;if(Array.isArray(a)){var d=
a.map(function(a){return c.on(a,b)});return h.handlesGroup(d)}if(-1<a.indexOf(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);d=this._listenersMap.get(a)||[];d.push(b);this._listenersMap.set(a,d);return{remove:function(){var d=c._listenersMap&&c._listenersMap.get(a)||[],g=d.indexOf(b);0<=g&&d.splice(g,1)}}};a.prototype.once=function(a,b){var c;return c=this.on(a,function(a){c.remove();b.call(null,
a)})};a.prototype.hasEventListener=function(a){a=this._listenersMap&&this._listenersMap.get(a);return null!=a&&0<a.length};return a}();a.EventEmitter=e;a.EventedMixin=function(a){return function(a){function g(){var b=null!==a&&a.apply(this,arguments)||this;b._emitter=new e;return b}q.__extends(g,a);g.prototype.emit=function(a,d){return this._emitter.emit(a,d)};g.prototype.on=function(a,d){return this._emitter.on(a,d)};g.prototype.once=function(a,d){return this._emitter.once(a,d)};g.prototype.hasEventListener=
function(a){return this._emitter.hasEventListener(a)};return g=q.__decorate([b.subclass("esri.core.Evented")],g)}(a)};var r=function(a){function g(){var b=null!==a&&a.apply(this,arguments)||this;b._emitter=new l.EventEmitter(b);return b}q.__extends(g,a);g.prototype.emit=function(a,b){return this._emitter.emit(a,b)};g.prototype.on=function(a,b){return this._emitter.on(a,b)};g.prototype.once=function(a,b){return this._emitter.once(a,b)};g.prototype.hasEventListener=function(a){return this._emitter.hasEventListener(a)};
return g=q.__decorate([b.subclass("esri.core.Evented")],g)}(p);a.EventedAccessor=r})(l||(l={}));return l})},"esri/geometry/support/aaBoundingBox":function(){define(["require","exports","../../core/maybe","../Extent","./aaBoundingRect"],function(v,a,q,p,h){function b(d){void 0===d&&(d=a.ZERO);return[d[0],d[1],d[2],d[3],d[4],d[5]]}function l(a,c,g,e,l,h,m){void 0===m&&(m=b());m[0]=a;m[1]=c;m[2]=g;m[3]=e;m[4]=l;m[5]=h;return m}function e(a){return a[0]>=a[3]?0:a[3]-a[0]}function m(a){return a[1]>=a[4]?
0:a[4]-a[1]}function r(a){return a[2]>=a[5]?0:a[5]-a[2]}function u(a,b){return Math.max(b[0],a[0])<=Math.min(b[3],a[3])&&Math.max(b[1],a[1])<=Math.min(b[4],a[4])&&Math.max(b[2],a[2])<=Math.min(b[5],a[5])}function g(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a}function x(a){return 6===a.length}Object.defineProperty(a,"__esModule",{value:!0});a.ZERO=a.NEGATIVE_INFINITY=a.POSITIVE_INFINITY=a.wrap=a.equals=a.isPoint=a.is=a.fromRect=a.toRect=a.empty=a.set=a.setMax=a.setMin=
a.getMax=a.getMin=a.offset=a.intersectsClippingArea=a.intersects=a.contains=a.containsPointWithMargin=a.containsPoint=a.maximumDimension=a.size=a.center=a.diameter=a.height=a.depth=a.width=a.allFinite=a.expandWithNestedArray=a.expandWithOffset=a.expandWithBuffer=a.expand=a.expandPointInPlace=a.fromMinMax=a.toExtent=a.fromExtent=a.fromValues=a.create=void 0;a.create=b;a.fromValues=l;a.fromExtent=function(a,c){void 0===c&&(c=b());c[0]=a.xmin;c[1]=a.ymin;c[2]=a.zmin;c[3]=a.xmax;c[4]=a.ymax;c[5]=a.zmax;
return c};a.toExtent=function(a,b){return isFinite(a[2])||isFinite(a[5])?new p({xmin:a[0],xmax:a[3],ymin:a[1],ymax:a[4],zmin:a[2],zmax:a[5],spatialReference:b}):new p({xmin:a[0],xmax:a[3],ymin:a[1],ymax:a[4],spatialReference:b})};a.fromMinMax=function(a,c,g){void 0===g&&(g=b());g[0]=a[0];g[1]=a[1];g[2]=a[2];g[3]=c[0];g[4]=c[1];g[5]=c[2];return g};a.expandPointInPlace=function(a,b){b[0]<a[0]&&(a[0]=b[0]);b[0]>a[3]&&(a[3]=b[0]);b[1]<a[1]&&(a[1]=b[1]);b[1]>a[4]&&(a[4]=b[1]);b[2]<a[2]&&(a[2]=b[2]);b[2]>
a[5]&&(a[5]=b[2])};a.expand=function(a,b,c){void 0===c&&(c=a);x(b)?(c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],b[1]),c[2]=Math.min(a[2],b[2]),c[3]=Math.max(a[3],b[3]),c[4]=Math.max(a[4],b[4]),c[5]=Math.max(a[5],b[5])):h.is(b)?(c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],b[1]),c[3]=Math.max(a[3],b[2]),c[4]=Math.max(a[4],b[3])):2===b.length?(c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],b[1]),c[3]=Math.max(a[3],b[0]),c[4]=Math.max(a[4],b[1])):3===b.length&&(c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],
b[1]),c[2]=Math.min(a[2],b[2]),c[3]=Math.max(a[3],b[0]),c[4]=Math.max(a[4],b[1]),c[5]=Math.max(a[5],b[2]));return c};a.expandWithBuffer=function(a,b,c,g,e){void 0===c&&(c=0);void 0===g&&(g=b.length/3);void 0===e&&(e=a);var d=a[0],l=a[1],h=a[2],t=a[3],m=a[4];a=a[5];for(var r=0;r<g;r++)d=Math.min(d,b[c+3*r]),l=Math.min(l,b[c+3*r+1]),h=Math.min(h,b[c+3*r+2]),t=Math.max(t,b[c+3*r]),m=Math.max(m,b[c+3*r+1]),a=Math.max(a,b[c+3*r+2]);e[0]=d;e[1]=l;e[2]=h;e[3]=t;e[4]=m;e[5]=a;return e};a.expandWithOffset=
function(a,b,c,g,e){void 0===e&&(e=a);e[0]=Math.min(a[0],a[0]+b);e[3]=Math.max(a[3],a[3]+b);e[1]=Math.min(a[1],a[1]+c);e[4]=Math.max(a[4],a[4]+c);e[2]=Math.min(a[2],a[2]+g);e[5]=Math.max(a[5],a[5]+g);return e};a.expandWithNestedArray=function(a,b,c,g){void 0===g&&(g=a);var d=b.length,e=a[0],l=a[1],h=a[2],m=a[3],r=a[4];a=a[5];if(c)for(c=0;c<d;c++){var x=b[c],e=Math.min(e,x[0]),l=Math.min(l,x[1]),h=Math.min(h,x[2]),m=Math.max(m,x[0]),r=Math.max(r,x[1]);a=Math.max(a,x[2])}else for(c=0;c<d;c++)x=b[c],
e=Math.min(e,x[0]),l=Math.min(l,x[1]),m=Math.max(m,x[0]),r=Math.max(r,x[1]);g[0]=e;g[1]=l;g[2]=h;g[3]=m;g[4]=r;g[5]=a;return g};a.allFinite=function(a){for(var d=0;6>d;d++)if(!isFinite(a[d]))return!1;return!0};a.width=e;a.depth=m;a.height=r;a.diameter=function(a){var d=e(a),b=r(a);a=m(a);return Math.sqrt(d*d+b*b+a*a)};a.center=function(a,b){void 0===b&&(b=[0,0,0]);b[0]=a[0]+e(a)/2;b[1]=a[1]+m(a)/2;b[2]=a[2]+r(a)/2;return b};a.size=function(a,b){void 0===b&&(b=[0,0,0]);b[0]=e(a);b[1]=m(a);b[2]=r(a);
return b};a.maximumDimension=function(a){return Math.max(e(a),r(a),m(a))};a.containsPoint=function(a,b){return b[0]>=a[0]&&b[1]>=a[1]&&b[2]>=a[2]&&b[0]<=a[3]&&b[1]<=a[4]&&b[2]<=a[5]};a.containsPointWithMargin=function(a,b,c){return b[0]>=a[0]-c&&b[1]>=a[1]-c&&b[2]>=a[2]-c&&b[0]<=a[3]+c&&b[1]<=a[4]+c&&b[2]<=a[5]+c};a.contains=function(a,b){return b[0]>=a[0]&&b[1]>=a[1]&&b[2]>=a[2]&&b[3]<=a[3]&&b[4]<=a[4]&&b[5]<=a[5]};a.intersects=u;a.intersectsClippingArea=function(a,b){return q.isNone(b)?!0:u(a,b)};
a.offset=function(a,b,c,g,e){void 0===e&&(e=a);e[0]=a[0]+b;e[1]=a[1]+c;e[2]=a[2]+g;e[3]=a[3]+b;e[4]=a[4]+c;e[5]=a[5]+g;return e};a.getMin=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};a.getMax=function(a,b){b[0]=a[3];b[1]=a[4];b[2]=a[5];return b};a.setMin=function(a,b,c){void 0===c&&(c=a);c[0]=b[0];c[1]=b[1];c[2]=b[2];c!==a&&(c[3]=a[3],c[4]=a[4],c[5]=a[5]);return c};a.setMax=function(a,b,c){void 0===c&&(c=a);c[3]=b[0];c[4]=b[1];c[5]=b[2];c!==a&&(c[0]=a[0],c[1]=a[1],c[2]=a[2]);return a};a.set=
g;a.empty=function(d){return d?g(d,a.NEGATIVE_INFINITY):b(a.NEGATIVE_INFINITY)};a.toRect=function(a,b){b||(b=h.create());b[0]=a[0];b[1]=a[1];b[2]=a[3];b[3]=a[4];return b};a.fromRect=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=Number.NEGATIVE_INFINITY;a[3]=b[2];a[4]=b[3];a[5]=Number.POSITIVE_INFINITY;return a};a.is=x;a.isPoint=function(a){return 0===e(a)&&0===m(a)&&0===r(a)};a.equals=function(a,b,c){if(q.isNone(a)||q.isNone(b))return a===b;if(!x(a)||!x(b))return!1;if(c)for(var d=0;d<a.length;d++){if(!c(a[d],
b[d]))return!1}else for(d=0;d<a.length;d++)if(a[d]!==b[d])return!1;return!0};a.wrap=function(a,b,g,e,h,m){return l(a,b,g,e,h,m,c)};a.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];a.NEGATIVE_INFINITY=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity];a.ZERO=[0,0,0,0,0,0];var c=b()})},"esri/geometry/support/aaBoundingRect":function(){define(["require","exports","../../core/compilerUtils","../Extent"],function(v,a,q,p){function h(b){void 0===b&&(b=a.ZERO);return[b[0],
b[1],b[2],b[3]]}function b(a){return a[0]>=a[2]?0:a[2]-a[0]}function l(a){return a[1]>=a[3]?0:a[3]-a[1]}function e(a,b,c){return b>=a[0]&&c>=a[1]&&b<=a[2]&&c<=a[3]}function m(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a}function r(a){return 4===a.length}function u(a,b,c){return a<b?b:a>c?c:a}Object.defineProperty(a,"__esModule",{value:!0});a.UNIT=a.ZERO=a.NEGATIVE_INFINITY=a.POSITIVE_INFINITY=a.equals=a.isPoint=a.is=a.empty=a.set=a.setMax=a.setMin=a.pad=a.offset=a.size=a.distance=a.intersection=
a.contains=a.intersects=a.containsPointWithMargin=a.containsXY=a.containsPointObject=a.containsPoint=a.center=a.area=a.diameter=a.height=a.width=a.allFinite=a.expandWithNestedArray=a.expand=a.expandPointInPlace=a.toExtent=a.fromExtent=a.fromValues=a.clone=a.create=void 0;a.create=h;a.clone=function(a){return[a[0],a[1],a[2],a[3]]};a.fromValues=function(a,b,c,d,e){void 0===e&&(e=h());e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e};a.fromExtent=function(a,b){void 0===b&&(b=h());b[0]=a.xmin;b[1]=a.ymin;b[2]=a.xmax;
b[3]=a.ymax;return b};a.toExtent=function(a,b){return new p({xmin:a[0],ymin:a[1],xmax:a[2],ymax:a[3],spatialReference:b})};a.expandPointInPlace=function(a,b){b[0]<a[0]&&(a[0]=b[0]);b[0]>a[2]&&(a[2]=b[0]);b[1]<a[1]&&(a[1]=b[1]);b[1]>a[3]&&(a[3]=b[1])};a.expand=function(a,b,c){void 0===c&&(c=a);if("length"in b)if(r(b))c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],b[1]),c[2]=Math.max(a[2],b[2]),c[3]=Math.max(a[3],b[3]);else{if(2===b.length||3===b.length)c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],b[1]),
c[2]=Math.max(a[2],b[0]),c[3]=Math.max(a[3],b[1])}else switch(b.type){case "extent":c[0]=Math.min(a[0],b.xmin);c[1]=Math.min(a[1],b.ymin);c[2]=Math.max(a[2],b.xmax);c[3]=Math.max(a[3],b.ymax);break;case "point":c[0]=Math.min(a[0],b.x);c[1]=Math.min(a[1],b.y);c[2]=Math.max(a[2],b.x);c[3]=Math.max(a[3],b.y);break;default:q.neverReached(b)}return c};a.expandWithNestedArray=function(a,b,c){void 0===c&&(c=a);var d=b.length,e=a[0],g=a[1],l=a[2];a=a[3];for(var h=0;h<d;h++){var m=b[h],e=Math.min(e,m[0]),
g=Math.min(g,m[1]),l=Math.max(l,m[0]);a=Math.max(a,m[1])}c[0]=e;c[1]=g;c[2]=l;c[3]=a;return c};a.allFinite=function(a){for(var b=0;4>b;b++)if(!isFinite(a[b]))return!1;return!0};a.width=b;a.height=l;a.diameter=function(a){var e=b(a);a=l(a);return Math.sqrt(e*e+a*a)};a.area=function(a){return b(a)*l(a)};a.center=function(a,b){void 0===b&&(b=[0,0]);b[0]=(a[0]+a[2])/2;b[1]=(a[1]+a[3])/2;return b};a.containsPoint=function(a,b){return e(a,b[0],b[1])};a.containsPointObject=function(a,b){return e(a,b.x,b.y)};
a.containsXY=e;a.containsPointWithMargin=function(a,b,c){return b[0]>=a[0]-c&&b[1]>=a[1]-c&&b[0]<=a[2]+c&&b[1]<=a[3]+c};a.intersects=function(a,b){return Math.max(b[0],a[0])<=Math.min(b[2],a[2])&&Math.max(b[1],a[1])<=Math.min(b[3],a[3])};a.contains=function(a,b){return b[0]>=a[0]&&b[2]<=a[2]&&b[1]>=a[1]&&b[3]<=a[3]};a.intersection=function(a,b,c){void 0===c&&(c=a);var d=b[0],e=b[1],l=b[2];b=b[3];c[0]=u(a[0],d,l);c[1]=u(a[1],e,b);c[2]=u(a[2],d,l);c[3]=u(a[3],e,b);return c};a.distance=function(a,e){var c=
(a[1]+a[3])/2,d=Math.max(Math.abs(e[0]-(a[0]+a[2])/2)-b(a)/2,0);a=Math.max(Math.abs(e[1]-c)-l(a)/2,0);return Math.sqrt(d*d+a*a)};a.size=function(a,b){b[0]=a[2]-a[0];b[1]=a[3]-a[1]};a.offset=function(a,b,c,d){void 0===d&&(d=a);d[0]=a[0]+b;d[1]=a[1]+c;d[2]=a[2]+b;d[3]=a[3]+c;return d};a.pad=function(a,b,c){void 0===c&&(c=a);c[0]=a[0]-b;c[1]=a[1]-b;c[2]=a[2]+b;c[3]=a[3]+b;return c};a.setMin=function(a,b,c){void 0===c&&(c=a);c[0]=b[0];c[1]=b[1];c!==a&&(c[2]=a[2],c[3]=a[3]);return c};a.setMax=function(a,
b,c){void 0===c&&(c=a);c[2]=b[0];c[3]=b[1];c!==a&&(c[0]=a[0],c[1]=a[1]);return a};a.set=m;a.empty=function(b){return b?m(b,a.NEGATIVE_INFINITY):h(a.NEGATIVE_INFINITY)};a.is=r;a.isPoint=function(a){return(0===b(a)||!isFinite(a[0]))&&(0===l(a)||!isFinite(a[1]))};a.equals=function(a,b,c){if(null==a||null==b)return a===b;if(!r(a)||!r(b))return!1;if(c)for(var d=0;d<a.length;d++){if(!c(a[d],b[d]))return!1}else for(d=0;d<a.length;d++)if(a[d]!==b[d])return!1;return!0};a.POSITIVE_INFINITY=[-Infinity,-Infinity,
Infinity,Infinity];a.NEGATIVE_INFINITY=[Infinity,Infinity,-Infinity,-Infinity];a.ZERO=[0,0,0,0];a.UNIT=[0,0,1,1]})},"esri/layers/graphics/featureConversionUtils":function(){define("require exports ../../core/Error ../../core/Logger ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(v,a,q,p,h,b,l,e){function m(a,b){return a?b?4:3:b?3:2}function r(a,b,c,d){if(a){if(c)return b&&d?va:S;if(b&&d)return ga}else if(b&&d)return S;return da}function u(a,
b){return Math.round((b-a.translate[0])/a.scale[0])}function g(a,b){return Math.round((a.translate[1]-b)/a.scale[1])}function x(a,b){return b*a.scale[0]+a.translate[0]}function c(a,b){return a.translate[1]-b*a.scale[1]}function d(a){a=a.coords;return{x:a[0],y:a[1]}}function H(a,b){a.coords[0]=b.x;a.coords[1]=b.y;return a}function F(a){a=a.coords;return{x:a[0],y:a[1],z:a[2]}}function G(a,b){a.coords[0]=b.x;a.coords[1]=b.y;a.coords[2]=b.z;return a}function t(a){a=a.coords;return{x:a[0],y:a[1],m:a[2]}}
function I(a,b){a.coords[0]=b.x;a.coords[1]=b.y;a.coords[2]=b.m;return a}function L(a){a=a.coords;return{x:a[0],y:a[1],z:a[2],m:a[3]}}function J(a,b){a.coords[0]=b.x;a.coords[1]=b.y;a.coords[2]=b.z;a.coords[3]=b.m;return a}function R(a,b){return a&&b?J:a?G:b?I:H}function C(a,c,d,n,l){d=R(d,n);for(n=0;n<c.length;n++){var h=c[n],g=h.geometry,h=h.attributes,w=void 0;g&&(w=d(new e.default,g));a.push(new b.default(w,h,null,h[l]))}return a}function M(a,b,c,d){for(var e=0;e<b.length;e++){var n=b[e],l=n.geometry,
n=n.attributes,h=void 0;l&&(h=O(l,c,d));a.push({attributes:n,geometry:h})}return a}function O(a,b,c){if(!a)return null;for(var d=m(b,c),e=[],n=0;n<a.coords.length;n+=d){for(var l=[],h=0;h<d;h++)l.push(a.coords[n+h]);e.push(l)}return b?c?{points:e,hasZ:b,hasM:c}:{points:e,hasZ:b}:c?{points:e,hasM:c}:{points:e}}function y(a,c,d,n,l){d=m(d,n);for(n=0;n<c.length;n++){var h=c[n],g=h.geometry,h=h.attributes,w=void 0;g&&(w=E(new e.default,g,d));a.push(new b.default(w,h,null,h[l]))}return a}function E(a,
b,c){void 0===c&&(c=m(b.hasZ,b.hasM));a.lengths[0]=b.points.length;var d=a.coords,e=0,n=0;for(b=b.points;n<b.length;n++)for(var l=b[n],h=0;h<c;h++)d[e++]=l[h];return a}function A(a,b,c){if(!a)return null;var d=m(b,c),e=a.coords,n=[],l=0,h=0;for(a=a.lengths;h<a.length;h++){for(var g=a[h],w=[],D=0;D<g;D++){for(var A=[],t=0;t<d;t++)A.push(e[l++]);w.push(A)}n.push(w)}return b?c?{paths:n,hasZ:b,hasM:c}:{paths:n,hasZ:b}:c?{paths:n,hasM:c}:{paths:n}}function n(a,c,d,n,l){d=m(d,n);for(n=0;n<c.length;n++){var h=
c[n],g=h.geometry,h=h.attributes,D=void 0;g&&(D=w(new e.default,g,d));a.push(new b.default(D,h,null,h[l]))}return a}function w(a,b,c){void 0===c&&(c=m(b.hasZ,b.hasM));var d=a.lengths,n=a.coords,e=0,l=0;for(b=b.paths;l<b.length;l++){for(var h=b[l],g=0,w=h;g<w.length;g++)for(var D=w[g],A=0;A<c;A++)n[e++]=D[A];d.push(h.length)}return a}function D(a,b,c){if(!a)return null;var d=m(b,c),n=a.coords,e=[],l=0,h=0;for(a=a.lengths;h<a.length;h++){for(var g=a[h],w=[],D=0;D<g;D++){for(var A=[],t=0;t<d;t++)A.push(n[l++]);
w.push(A)}e.push(w)}return b?c?{rings:e,hasZ:b,hasM:c}:{rings:e,hasZ:b}:c?{rings:e,hasM:c}:{rings:e}}function K(a,c,d,n,l){for(var h=0;h<c.length;h++){var g=c[h],w=g.geometry,D=g.centroid,g=g.attributes,A=void 0;w&&(A=ma(new e.default,w,d,n));D?a.push(new b.default(A,g,H(new e.default,D),g[l])):a.push(new b.default(A,g,null,g[l]))}return a}function ma(a,b,c,d){void 0===c&&(c=b.hasZ);void 0===d&&(d=b.hasM);Ia(a,b.rings,c,d);return a}function Ia(a,b,c,d){c=m(c,d);d=a.lengths;for(var n=a.coords,e=0,
l=d.length=n.length=0;l<b.length;l++){for(var h=b[l],g=0,w=h;g<w.length;g++)for(var D=w[g],A=0;A<c;A++)n[e++]=D[A];d.push(h.length)}return a}function Xa(a,c,d,e,l,h){a.length=0;if(!d){for(d=0;d<c.length;d++)e=c[d],a.push(new b.default(null,e.attributes,null,e.attributes[h]));return a}switch(d){case "esriGeometryPoint":return C(a,c,e,l,h);case "esriGeometryMultipoint":return y(a,c,e,l,h);case "esriGeometryPolyline":return n(a,c,e,l,h);case "esriGeometryPolygon":return K(a,c,e,l,h);default:Z.error("convertToFeatureSet:unknown-geometry",
new q("Unable to parse unknown geometry type '"+d+"'")),a.length=0}return a}function Ja(a,b,c,e){a=a&&("coords"in a?a:a.geometry);if(!a)return null;switch(b){case "esriGeometryPoint":return b=d,c&&e?b=L:c?b=F:e&&(b=t),b(a);case "esriGeometryMultipoint":return O(a,c,e);case "esriGeometryPolyline":return A(a,c,e);case "esriGeometryPolygon":return D(a,c,e);default:Z.error("convertToGeometry:unknown-geometry",new q("Unable to parse unknown geometry type '"+b+"'"))}}function Ya(a,b,c,e,n){a.length=0;switch(c){case "esriGeometryPoint":c=
d;e&&n?c=L:e?c=F:n&&(c=t);for(e=0;e<b.length;e++){var l=b[e];n=l.geometry;l=l.attributes;n=n?c(n):null;a.push({attributes:l,geometry:n})}break;case "esriGeometryMultipoint":return M(a,b,e,n);case "esriGeometryPolyline":for(c=0;c<b.length;c++){var h=b[c],l=h.geometry,h=h.attributes,g=void 0;l&&(g=A(l,e,n));a.push({attributes:h,geometry:g})}break;case "esriGeometryPolygon":for(c=0;c<b.length;c++){var g=b[c],h=g.geometry,l=g.attributes,w=g.centroid,g=void 0;h&&(g=D(h,e,n));w?(h=d(w),a.push({attributes:l,
centroid:h,geometry:g})):a.push({attributes:l,geometry:g})}break;default:Z.error("convertToFeatureSet:unknown-geometry",new q("Unable to parse unknown geometry type '"+c+"'"))}return a}function Za(a,b,c,d,e,n,l,h){void 0===l&&(l=c);void 0===h&&(h=d);a.lengths.length&&(a.lengths.length=0);a.coords.length&&(a.coords.length=0);if(!b||!b.coords.length)return null;e=P[e];var w=b.coords;b=b.lengths;var D=m(c,d),A=m(c&&l,d&&h);c=r(c,d,l,h);if(!b.length)return c(a.coords,w,0,0,u(n,w[0]),g(n,w[1])),a.lengths.length&&
(a.lengths.length=0),a.coords.length=D,a;for(var t,E=0,y,K=0,p=0;p<b.length;p++){var ma=b[p];if(!(ma<e)){var I=0;y=K;h=d=u(n,w[E]);t=l=g(n,w[E+1]);c(a.coords,w,y,E,h,t);I++;E+=D;y+=A;for(var f=1;f<ma;f++,E+=D)if(h=u(n,w[E]),t=g(n,w[E+1]),h!==d||t!==l)c(a.coords,w,y,E,h-d,t-l),y+=A,I++,d=h,l=t;I>=e&&(a.lengths.push(I),K=y)}}a.coords.length=K;return a.coords.length?a:null}function ea(a,b,c,d,e,n,l){for(var h=d,g=0,w,D=n+c;D<l;D+=c){w=b[D];var A=b[D+1],t=b[l],m=b[l+1],E=b[n],y=b[n+1],K=t-E,r=m-y;if(0!==
K||0!==r){var f=((w-E)*K+(A-y)*r)/(K*K+r*r);1<f?(E=t,y=m):0<f&&(E+=K*f,y+=r*f)}K=w-E;r=A-y;w=K*K+r*r;w>h&&(g=D,h=w)}h>d&&(g-n>c&&ea(a,b,c,d,e,n,g),e(a,b,a.length,g,b[g],b[g+1]),l-g>c&&ea(a,b,c,d,e,g,l))}function T(a,b,d,e,n){var l=b.coords,h=b.lengths,g=d?e?va:S:e?S:da;d=m(d,e);if(!l.length)return a!==b&&(a.lengths.length=0,a.coords.length=0),a;if(!h.length)return g(a.coords,l,0,0,x(n,l[0]),c(n,l[1])),a!==b&&(a.lengths.length=0,a.coords.length=d),a;var w=n.scale;e=w[0];for(var w=w[1],D=0,A=0;A<h.length;A++){var t=
h[A];a.lengths[A]=t;var E=x(n,l[D]),y=c(n,l[D+1]);g(a.coords,l,D,D,E,y);for(var D=D+d,K=1;K<t;K++,D+=d)E+=l[D]*e,y-=l[D+1]*w,g(a.coords,l,D,D,E,y)}a!==b&&(a.lengths.length=h.length,a.coords.length=l.length);return a}function oa(a,b,c,d){for(var e=0,n=a[d*b],l=a[d*(b+1)],h=1;h<c;h++)var g=n+a[d*(b+h)],w=l+a[d*(b+h)+1],D=(g-n)*(w+l),n=g,l=w,e=e+D;return.5*e}Object.defineProperty(a,"__esModule",{value:!0});a.deltaDecodeGeometry=a.deltaEncodeGeometry=a.getQuantizedArea=a.getSignedQuantizedRingArea=a.removeCollinearVectices=
a.removeZMValues=a.unquantizeOptimizedGeometry=a.getQuantizedBoundsOptimizedGeometry=a.getBoundsOptimizedGeometry=a.generalizeOptimizedGeometry=a.quantizeOptimizedGeometry=a.quantizeOptimizedFeatureSet=a.unquantizeOptimizedFeatureSet=a.convertFromFeatureSet=a.convertToFeatureSet=a.convertToFeatures=a.convertToGeometry=a.convertFromGeometry=a.convertToFeature=a.convertFromGraphics=a.convertFromFeatures=a.convertFromFeature=a.convertFromNestedArray=a.convertFromPolygon=a.convertToPolygon=a.convertFromPolyline=
a.convertFromPolylineFeatures=a.convertToPolyline=a.convertFromMultipoint=a.convertFromMultipointFeatures=a.convertToMultipoint=a.convertToMultipointFeatures=a.convertFromPoint=a.convertFromPointFeatures=a.convertToPoint=a.unquantizeY=a.unquantizeX=a.quantizeY=a.quantizeX=void 0;var Z=p.getLogger("esri.tasks.support.optimizedFeatureSet"),P={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},da=function(a,b,c,d,e,n){a[c]=e;a[c+1]=n},S=function(a,b,c,d,e,n){a[c]=
e;a[c+1]=n;a[c+2]=b[d+2]},ga=function(a,b,c,d,e,n){a[c]=e;a[c+1]=n;a[c+2]=b[d+3]},va=function(a,b,c,d,e,n){a[c]=e;a[c+1]=n;a[c+2]=b[d+2];a[c+3]=b[d+3]};a.quantizeX=u;a.quantizeY=g;a.unquantizeX=x;a.unquantizeY=c;a.convertToPoint=function(a,b,c){return a?b?c?L(a):F(a):c?t(a):d(a):null};a.convertFromPointFeatures=C;a.convertFromPoint=function(a,b,c){void 0===c&&(c=R(null!=b.z,null!=b.m));return c(a,b)};a.convertToMultipointFeatures=M;a.convertToMultipoint=O;a.convertFromMultipointFeatures=y;a.convertFromMultipoint=
E;a.convertToPolyline=A;a.convertFromPolylineFeatures=n;a.convertFromPolyline=w;a.convertToPolygon=D;a.convertFromPolygon=ma;a.convertFromNestedArray=Ia;var ka=[],ha=[];a.convertFromFeature=function(a,b,c,d,e){ka[0]=a;a=Xa(ha,ka,b,c,d,e)[0];ka.length=ha.length=0;return a};a.convertFromFeatures=Xa;a.convertFromGraphics=function(a,b,c,d,e,l){var h=a.length;switch(c){case "esriGeometryPoint":C(a,b,d,e,l);break;case "esriGeometryMultipoint":y(a,b,d,e,l);break;case "esriGeometryPolyline":n(a,b,d,e,l);
break;case "esriGeometryPolygon":K(a,b,d,e,l);break;default:Z.error("convertToFeatureSet:unknown-geometry",new q("Unable to parse unknown geometry type '"+c+"'"))}for(d=0;d<b.length;d++)a[d+h].geometryType=c,a[d+h].insertAfter=b[d].insertAfter,a[d+h].groupId=b[d].groupId;return a};a.convertToFeature=function(a,b,c,d){ha[0]=a;Ya(ka,ha,b,c,d);a=ka[0];ka.length=ha.length=0;return a};a.convertFromGeometry=function(a,b,c){if(!a)return null;var d=new e.default;"hasZ"in a&&null==b&&(b=a.hasZ);"hasM"in a&&
null==c&&(c=a.hasM);if(h.isPoint(a))return R(null!=b?b:null!=a.z,null!=c?c:null!=a.m)(d,a);if(h.isPolygon(a))return ma(d,a,b,c);if(h.isPolyline(a))return w(d,a,m(b,c));if(h.isMultipoint(a))return E(d,a,m(b,c));Z.error("convertFromGeometry:unknown-geometry",new q("Unable to parse unknown geometry type '"+a+"'"))};a.convertToGeometry=Ja;a.convertToFeatures=Ya;a.convertToFeatureSet=function(a){var b=a.objectIdFieldName,c=a.spatialReference,d=a.transform,e=a.fields,n=a.hasM,l=a.hasZ,h=a.geometryType,
g=a.exceededTransferLimit,w=a.uniqueIdField,D=a.queryGeometry,A=a.queryGeometryType;a=Ya([],a.features,h,l,n);D=Ja(D,A,!1,!1);b={features:a,fields:e,geometryType:h,objectIdFieldName:b,spatialReference:c,uniqueIdField:w,queryGeometry:D};d&&(b.transform=d);g&&(b.exceededTransferLimit=g);n&&(b.hasM=n);l&&(b.hasZ=l);return b};a.convertFromFeatureSet=function(a,b){var c=new l.default,d=a.hasM,e=a.hasZ,n=a.features,h=a.objectIdFieldName,g=a.spatialReference,w=a.geometryType,D=a.exceededTransferLimit,A=
a.transform;if(a=a.fields)c.fields=a;c.geometryType=w;c.objectIdFieldName=h||b;c.spatialReference=g;if(!c.objectIdFieldName)return Z.error(new q("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),c;n&&Xa(c.features,n,w,e,d,c.objectIdFieldName);D&&(c.exceededTransferLimit=D);d&&(c.hasM=d);e&&(c.hasZ=e);A&&(c.transform=A);return c};a.unquantizeOptimizedFeatureSet=function(a){var b=a.transform,c=a.hasM,d=a.hasZ;if(!b)return a;for(var e=0,n=a.features;e<n.length;e++){var l=
n[e];l.geometry&&T(l.geometry,l.geometry,c,d,b);l.centroid&&T(l.centroid,l.centroid,c,d,b)}a.transform=null;return a};a.quantizeOptimizedFeatureSet=function(a,b){var c=b.geometryType,d=b.features,n=b.hasM,l=b.hasZ;if(!a)return b;for(var h=0;h<d.length;h++){var g=d[h],w=g.weakClone();w.geometry=new e.default;Za(w.geometry,g.geometry,n,l,c,a);g.centroid&&(w.centroid=new e.default,Za(w.centroid,g.centroid,n,l,"esriGeometryPoint",a));d[h]=w}b.transform=a;return b};a.quantizeOptimizedGeometry=Za;a.generalizeOptimizedGeometry=
function(a,b,c,d,e,n,l,h){void 0===l&&(l=c);void 0===h&&(h=d);a.lengths.length&&(a.lengths.length=0);a.coords.length&&(a.coords.length=0);if(!b||!b.coords.length)return null;e=P[e];var g=b.coords;b=b.lengths;var w=m(c,d),D=m(c&&l,d&&h);c=r(c,d,l,h);if(!b.length)return c(a.coords,g,0,0,g[0],g[1]),a.lengths.length&&(a.lengths.length=0),a.coords.length=w,a;d=0;n*=n;for(l=0;l<b.length;l++){h=b[l];if(!(h<e)){var A=a.coords.length/D,t=d,E=d+(h-1)*w;c(a.coords,g,a.coords.length,t,g[t],g[t+1]);ea(a.coords,
g,w,n,c,t,E);c(a.coords,g,a.coords.length,E,g[E],g[E+1]);t=a.coords.length/D-A;t>=e?a.lengths.push(t):a.coords.length=A*D}d+=h*w}return a.coords.length?a:null};a.getBoundsOptimizedGeometry=function(a,b,c,d){if(!b||!b.coords||!b.coords.length)return null;c=m(c,d);var e=d=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;if(b&&b.coords){b=b.coords;for(var h=0;h<b.length;h+=c){var g=b[h],w=b[h+1];d=Math.min(d,g);n=Math.max(n,g);e=Math.min(e,w);l=Math.max(l,w)}}a[0]=d;a[1]=
e;a[2]=n;a[3]=l;return a};a.getQuantizedBoundsOptimizedGeometry=function(a,b,c,d){c=m(c,d);d=b.coords;var e=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY,g=0,w=0;for(b=b.lengths;w<b.length;w++)for(var D=b[w],A=d[g],t=d[g+1],e=Math.min(A,e),n=Math.min(t,n),l=Math.max(A,l),h=Math.max(t,h),g=g+c,E=1;E<D;E++,g+=c){var y=d[g],K=d[g+1],A=A+y,t=t+K;0>y&&(e=Math.min(e,A));0<y&&(l=Math.max(l,A));0>K?n=Math.min(n,t):0<K&&(h=Math.max(h,t))}a[0]=e;a[1]=
n;a[2]=l;a[3]=h;return a};a.unquantizeOptimizedGeometry=T;a.removeZMValues=function(a,b,c,d,e,n){var l,h=m(c,d);c=r(c,d,e,n);d=b.coords;a.coords.length=0;a.lengths.length=0;(l=a.lengths).push.apply(l,b.lengths);for(b=0;b<d.length;b+=h)c(a.coords,d,a.coords.length,b,d[b],d[b+1]);return a};a.removeCollinearVectices=function(a,b,c,d,e){if(!b||!b.coords||!b.coords.length)return null;c=P[c];var n=b.coords;b=b.lengths;var l=r(d,e,d,e);d=m(d,e);for(var h=e=0,g=0,w=0,D=0;D<b.length;D++){var A=b[D],h=w;l(a.coords,
n,h,e,n[e],n[e+1]);e+=d;var t=n[e],E=n[e+1],y=t,K=E,p=E/t,h=h+d;l(a.coords,n,h,e,y,K);e+=d;for(var ma=2;ma<A;ma++){var t=n[e],E=n[e+1],f=E/t,I=p===f||!isFinite(p)&&!isFinite(f),p=I&&isFinite(f)?0<=p&&0<=f||0>=p&&0>=f:0<=K&&0<=E||0>=K&&0>=E;I&&p?(y+=t,K+=E):(y=t,K=E,h+=d);l(a.coords,n,h,e,y,K);e+=d;p=f}h+=d;A=(h-w)/d;A>=c&&(a.lengths[g]=A,w=h,g++)}a.coords.length>w&&(a.coords.length=w);a.lengths.length>g&&(a.lengths.length=g);return a.coords.length&&a.lengths.length?a:null};a.getSignedQuantizedRingArea=
oa;a.getQuantizedArea=function(a,b){var c=a.coords;a=a.lengths;for(var d=0,e=0,n=0;n<a.length;n++)e+=oa(c,d,a[n],b),d+=n;return Math.abs(e)};a.deltaEncodeGeometry=function(a,b){var c=a.clone(),d=a.coords;a=a.lengths;for(var e=0,n=0;n<a.length;n++){for(var l=a[n],h=d[b*e],g=d[b*e+1],w=1;w<l;w++){var D=d[b*(e+w)],A=d[b*(e+w)+1],g=A-g;c.coords[b*(e+w)]=D-h;c.coords[b*(e+w)+1]=g;h=D;g=A}e+=l}return c};a.deltaDecodeGeometry=function(a,b){var c=a.clone(),d=a.coords;a=a.lengths;for(var e=0,n=0;n<a.length;n++){for(var l=
a[n],h=d[b*e],g=d[b*e+1],w=1;w<l;w++)h+=d[b*(e+w)],g+=d[b*(e+w)+1],c.coords[b*(e+w)]=h,c.coords[b*(e+w)+1]=g;e+=l}return c}})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(["require","exports"],function(v,a){Object.defineProperty(a,"__esModule",{value:!0});v=function(){function a(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=
null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}a.prototype.weakClone=function(){var p=new a;p.objectIdFieldName=this.objectIdFieldName;p.globalIdFieldName=this.globalIdFieldName;p.geohashFieldName=this.geohashFieldName;p.geometryProperties=this.geometryProperties;p.geometryType=this.geometryType;p.spatialReference=this.spatialReference;p.hasZ=this.hasZ;p.hasM=this.hasM;p.features=this.features;p.fields=this.fields;p.transform=this.transform;p.exceededTransferLimit=
this.exceededTransferLimit;p.uniqueIdField=this.uniqueIdField;p.queryGeometry=this.queryGeometry;p.queryGeometryType=this.queryGeometryType;return p};return a}();a.default=v})},"esri/layers/graphics/data/BoundsStore":function(){define(["require","exports","../../../core/has","../../../core/libs/rbush/rbush","@dojo/framework/shim/Promise"],function(v,a,q,p){Object.defineProperty(a,"__esModule",{value:!0});a.BoundsStore=void 0;var h={minX:0,minY:0,maxX:0,maxY:0};v=function(){function a(){var a=this;
this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=p(9,q("csp-restrictions")?function(a){return{minX:a[0],minY:a[1],maxX:a[2],maxY:a[3]}}:["[0]","[1]","[2]","[3]"]);this._loadIndex=function(){if(a._indexInvalid){var b=Array(a._idByBounds.size),l=0;a._idByBounds.forEach(function(a,e){b[l++]=e});a._indexInvalid=!1;a._index.clear();a._index.load(b)}else a._boundsToLoad.length&&(a._index.load(a._boundsToLoad.filter(function(b){return a._idByBounds.has(b)})),
a._boundsToLoad.length=0)}}a.prototype.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};a.prototype.delete=function(a){var b=this._boundsById.get(a);this._boundsById.delete(a);b&&(this._idByBounds.delete(b),this._indexInvalid||this._index.remove(b))};a.prototype.forEachInBounds=function(a,b){this._loadIndex();var e=0,l=this._index;h.minX=a[0];h.minY=a[1];h.maxX=a[2];h.maxY=a[3];for(a=l.search(h);e<a.length;e++)b(this._idByBounds.get(a[e]))};
a.prototype.get=function(a){return this._boundsById.get(a)};a.prototype.has=function(a){return this._boundsById.has(a)};a.prototype.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};a.prototype.set=function(a,b){if(!this._indexInvalid){var e=this._boundsById.get(a);e&&(this._index.remove(e),this._idByBounds.delete(e))}this._boundsById.set(a,b);b&&(this._idByBounds.set(b,a),this._indexInvalid||(this._boundsToLoad.push(b),5E4<this._boundsToLoad.length&&
this._loadIndex()))};return a}();a.BoundsStore=v})},"esri/core/libs/rbush/rbush":function(){define(["../quickselect/quickselect"],function(v){function a(b,d){if(!(this instanceof a))return new a(b,d);this._maxEntries=Math.max(4,b||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));d&&("function"===typeof d?this.toBBox=d:this._initFormat(d));this.clear()}function q(a,b){p(a,0,a.children.length,b,a)}function p(a,b,e,l,m){m||(m=g(null));m.minX=Infinity;m.minY=Infinity;m.maxX=-Infinity;m.maxY=
-Infinity;for(var c;b<e;b++)c=a.children[b],h(m,a.leaf?l(c):c);return m}function h(a,b){a.minX=Math.min(a.minX,b.minX);a.minY=Math.min(a.minY,b.minY);a.maxX=Math.max(a.maxX,b.maxX);a.maxY=Math.max(a.maxY,b.maxY);return a}function b(a,b){return a.minX-b.minX}function l(a,b){return a.minY-b.minY}function e(a){return(a.maxX-a.minX)*(a.maxY-a.minY)}function m(a){return a.maxX-a.minX+(a.maxY-a.minY)}function r(a,b){return a.minX<=b.minX&&a.minY<=b.minY&&b.maxX<=a.maxX&&b.maxY<=a.maxY}function u(a,b){return b.minX<=
a.maxX&&b.minY<=a.maxY&&b.maxX>=a.minX&&b.maxY>=a.minY}function g(a){return{children:a,height:1,leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function x(a,b,e,l,h){for(var c=[b,e],d;c.length;)e=c.pop(),b=c.pop(),e-b<=l||(d=b+Math.ceil((e-b)/l/2)*l,v(a,d,b,e,h),c.push(b,d,d,e))}a.prototype={all:function(){return this._all(this.data,[])},search:function(a){var b=this.data,c=[],e=this.toBBox;if(!u(a,b))return c;for(var l=[],h,g,m,p;b;){h=0;for(g=b.children.length;h<g;h++)m=b.children[h],
p=b.leaf?e(m):m,u(a,p)&&(b.leaf?c.push(m):r(a,p)?this._all(m,c):l.push(m));b=l.pop()}return c},collides:function(a){var b=this.data,c=this.toBBox;if(!u(a,b))return!1;for(var e=[],l,h,g,m;b;){l=0;for(h=b.children.length;l<h;l++)if(g=b.children[l],m=b.leaf?c(g):g,u(a,m)){if(b.leaf||r(a,m))return!0;e.push(g)}b=e.pop()}return!1},load:function(a){if(!a||!a.length)return this;if(a.length<this._minEntries){for(var b=0,c=a.length;b<c;b++)this.insert(a[b]);return this}a=this._build(a.slice(),0,a.length-1,
0);this.data.children.length?this.data.height===a.height?this._splitRoot(this.data,a):(this.data.height<a.height&&(b=this.data,this.data=a,a=b),this._insert(a,this.data.height-a.height-1,!0)):this.data=a;return this},insert:function(a){a&&this._insert(a,this.data.height-1);return this},clear:function(){this.data=g([]);return this},remove:function(a,b){if(!a)return this;for(var c=this.data,d=this.toBBox(a),e=[],l=[],h,g,m,p;c||e.length;){c||(c=e.pop(),g=e[e.length-1],h=l.pop(),p=!0);if(c.leaf){a:{m=
a;var u=c.children,q=b;if(q){for(var x=0;x<u.length;x++)if(q(m,u[x])){m=x;break a}m=-1}else m=u.indexOf(m)}if(-1!==m){c.children.splice(m,1);e.push(c);this._condense(e);break}}p||c.leaf||!r(c,d)?g?(h++,c=g.children[h],p=!1):c=null:(e.push(c),l.push(h),h=0,g=c,c=c.children[0])}return this},toBBox:function(a){return a},compareMinX:b,compareMinY:l,toJSON:function(){return this.data},fromJSON:function(a){this.data=a;return this},_all:function(a,b){for(var c=[];a;)a.leaf?b.push.apply(b,a.children):c.push.apply(c,
a.children),a=c.pop();return b},_build:function(a,b,e,l){var c=e-b+1,d=this._maxEntries,h;if(c<=d)return h=g(a.slice(b,e+1)),q(h,this.toBBox),h;l||(l=Math.ceil(Math.log(c)/Math.log(d)),d=Math.ceil(c/Math.pow(d,l-1)));h=g([]);h.leaf=!1;h.height=l;var c=Math.ceil(c/d),d=c*Math.ceil(Math.sqrt(d)),m,r,p;for(x(a,b,e,d,this.compareMinX);b<=e;b+=d)for(r=Math.min(b+d-1,e),x(a,b,r,c,this.compareMinY),m=b;m<=r;m+=c)p=Math.min(m+c-1,r),h.children.push(this._build(a,m,p,l-1));q(h,this.toBBox);return h},_chooseSubtree:function(a,
b,l,h){for(var c,d,g,m,r,p,u,q;;){h.push(b);if(b.leaf||h.length-1===l)break;u=q=Infinity;c=0;for(d=b.children.length;c<d;c++)g=b.children[c],r=e(g),p=(Math.max(g.maxX,a.maxX)-Math.min(g.minX,a.minX))*(Math.max(g.maxY,a.maxY)-Math.min(g.minY,a.minY))-r,p<q?(q=p,u=r<u?r:u,m=g):p===q&&r<u&&(u=r,m=g);b=m||b.children[0]}return b},_insert:function(a,b,e){var c=this.toBBox;e=e?a:c(a);var c=[],d=this._chooseSubtree(e,this.data,b,c);d.children.push(a);for(h(d,e);0<=b;)if(c[b].children.length>this._maxEntries)this._split(c,
b),b--;else break;this._adjustParentBBoxes(e,c,b)},_split:function(a,b){var c=a[b],d=c.children.length,e=this._minEntries;this._chooseSplitAxis(c,e,d);d=this._chooseSplitIndex(c,e,d);d=g(c.children.splice(d,c.children.length-d));d.height=c.height;d.leaf=c.leaf;q(c,this.toBBox);q(d,this.toBBox);b?a[b-1].children.push(d):this._splitRoot(c,d)},_splitRoot:function(a,b){this.data=g([a,b]);this.data.height=a.height+1;this.data.leaf=!1;q(this.data,this.toBBox)},_chooseSplitIndex:function(a,b,l){var c,d,
h,g,m,r,u;m=r=Infinity;for(c=b;c<=l-b;c++)d=p(a,0,c,this.toBBox),h=p(a,c,l,this.toBBox),g=Math.max(0,Math.min(d.maxX,h.maxX)-Math.max(d.minX,h.minX))*Math.max(0,Math.min(d.maxY,h.maxY)-Math.max(d.minY,h.minY)),d=e(d)+e(h),g<m?(m=g,u=c,r=d<r?d:r):g===m&&d<r&&(r=d,u=c);return u},_chooseSplitAxis:function(a,d,e){var c=a.leaf?this.compareMinX:b,h=a.leaf?this.compareMinY:l,g=this._allDistMargin(a,d,e,c);d=this._allDistMargin(a,d,e,h);g<d&&a.children.sort(c)},_allDistMargin:function(a,b,e,l){a.children.sort(l);
l=this.toBBox;var c=p(a,0,b,l),d=p(a,e-b,e,l),g=m(c)+m(d),r,u;for(r=b;r<e-b;r++)u=a.children[r],h(c,a.leaf?l(u):u),g+=m(c);for(r=e-b-1;r>=b;r--)u=a.children[r],h(d,a.leaf?l(u):u),g+=m(d);return g},_adjustParentBBoxes:function(a,b,e){for(;0<=e;e--)h(b[e],a)},_condense:function(a){for(var b=a.length-1,c;0<=b;b--)0===a[b].children.length?0<b?(c=a[b-1].children,c.splice(c.indexOf(a[b]),1)):this.clear():q(a[b],this.toBBox)},_initFormat:function(a){var b=["return a"," - b",";"];this.compareMinX=new Function("a",
"b",b.join(a[0]));this.compareMinY=new Function("a","b",b.join(a[1]));this.toBBox=new Function("a","return {minX: a"+a[0]+", minY: a"+a[1]+", maxX: a"+a[2]+", maxY: a"+a[3]+"};")}};return a})},"esri/core/libs/quickselect/quickselect":function(){define([],function(){function v(p,h,b,l,e){for(;l>b;){if(600<l-b){var m=l-b+1,r=h-b+1,u=Math.log(m),g=.5*Math.exp(2*u/3),u=.5*Math.sqrt(u*g*(m-g)/m)*(0>r-m/2?-1:1);v(p,h,Math.max(b,Math.floor(h-r*g/m+u)),Math.min(l,Math.floor(h+(m-r)*g/m+u)),e)}m=p[h];r=b;
g=l;a(p,b,h);for(0<e(p[l],m)&&a(p,b,l);r<g;){a(p,r,g);r++;for(g--;0>e(p[r],m);)r++;for(;0<e(p[g],m);)g--}0===e(p[b],m)?a(p,b,g):(g++,a(p,g,l));g<=h&&(b=g+1);h<=g&&(l=g-1)}}function a(a,h,b){var l=a[h];a[h]=a[b];a[b]=l}function q(a,h){return a<h?-1:a>h?1:0}return function(a,h,b,l,e){v(a,h,b||0,l||a.length-1,e||q)}})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["require","exports","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(v,a,q,p,h){Object.defineProperty(a,
"__esModule",{value:!0});a.optimizedFeatureQueryEngineAdapter=void 0;a.optimizedFeatureQueryEngineAdapter={getObjectId:function(a){return a.objectId},getAttributes:function(a){return a.attributes},getAttribute:function(a,l){return a.attributes[l]},cloneWithGeometry:function(a,l){return new p.default(l,a.attributes,null,a.objectId)},getGeometry:function(a){return a.geometry},getCentroid:function(a,l){a.centroid||(a.centroid=q.getCentroidOptimizedGeometry(new h.default,a.geometry,l.hasZ,l.hasM));return a.centroid}};
a.default=a.optimizedFeatureQueryEngineAdapter})},"esri/layers/graphics/centroid":function(){define(["require","exports"],function(v,a){function q(a,b,l,e,m,r,p){void 0===p&&(p=1);r=m?r?4:3:r?3:2;var h=l,u=l+r,c=0,d=0,q=l=0,v=0,G=0;for(--e;G<e;G++,h+=r,u+=r){var t=b[h],I=b[h+1],L=b[h+2],J=b[u],R=b[u+1],C=b[u+2],M=t*R-J*I,q=q+M,c=c+(t+J)*M,d=d+(I+R)*M;m&&(M=t*C-J*L,l+=(L+C)*M,v+=M);t<a[0]&&(a[0]=t);t>a[1]&&(a[1]=t);I<a[2]&&(a[2]=I);I>a[3]&&(a[3]=I);m&&(L<a[4]&&(a[4]=L),L>a[5]&&(a[5]=L))}0<q*p&&(q*=
-1);0<v*p&&(v*=-1);if(!q)return null;a=[c,d,.5*q];m&&(a[3]=l,a[4]=.5*v);return a}function p(a,b,l,e,m){m=e?m?4:3:m?3:2;for(var h=b,p=b+m,g=0,q=0,c=0,d=0,v=0,F=l-1;v<F;v++,h+=m,p+=m){var G=a[h],t=a[h+1],I=a[h+2],L=a[p],J=a[p+1],R=a[p+2],C;if(e){C=L-G;var M=J-t,O=R-I;C=Math.sqrt(C*C+M*M+O*O)}else C=L-G,M=J-t,C=Math.sqrt(C*C+M*M);C&&(g+=C,e?(G=[G+.5*(L-G),t+.5*(J-t),I+.5*(R-I)],q+=C*G[0],c+=C*G[1],d+=C*G[2]):(G=[G+.5*(L-G),t+.5*(J-t)],q+=C*G[0],c+=C*G[1]))}return 0<g?e?[q/g,c/g,d/g]:[q/g,c/g]:0<l?e?
[a[b],a[b+1],a[b+2]]:[a[b],a[b+1]]:null}Object.defineProperty(a,"__esModule",{value:!0});a.lineCentroid=a.getCentroidOptimizedGeometry=void 0;a.getCentroidOptimizedGeometry=function(a,b,l,e,m){if(!b||!b.lengths.length)return null;var h="upperLeft"===(null===m||void 0===m?void 0:m.originPosition)?-1:1;a.lengths.length&&(a.lengths.length=0);a.coords.length&&(a.coords.length=0);m=a.coords;for(var u=[],g=l?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,
Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],x=b.lengths,c=b.coords,d=l?e?4:3:e?3:2,v=0,F=0;F<x.length;F++){var G=x[F],t=q(g,c,v,G,l,e,h);t&&u.push(t);v+=G*d}u.sort(function(a,b){var c=h*a[2]-h*b[2];0===c&&l&&(c=a[4]-b[4]);return c});u.length&&(d=6*u[0][2],m[0]=u[0][0]/d,m[1]=u[0][1]/d,l&&(d=6*u[0][4],m[2]=0!==d?u[0][3]/d:0),m[0]<g[0]||m[0]>g[1]||m[1]<g[2]||m[1]>g[3]||l&&(m[2]<g[4]||m[2]>g[5]))&&
(m.length=0);if(!m.length)if(b=b.lengths[0]?p(c,0,x[0],l,e):null)m[0]=b[0],m[1]=b[1],l&&2<b.length&&(m[2]=b[2]);else return null;return a};a.lineCentroid=p})},"esri/layers/graphics/data/projectionSupport":function(){define("require exports tslib ../../../core/Error ../../../core/promiseUtils ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),function(v,a,q,p,h,b,l,e,m){function r(a,
b){var d;if(!b)return null;if("x"in b){var e={x:0,y:0};a=a(b.x,b.y,c);e.x=a[0];e.y=a[1];null!=b.z&&(e.z=b.z);null!=b.m&&(e.m=b.m);return e}if("xmin"in b)return e={xmin:0,ymin:0,xmax:0,ymax:0},d=a(b.xmin,b.ymin,c),e.xmin=d[0],e.ymin=d[1],a=a(b.xmax,b.ymax,c),e.xmax=a[0],e.ymax=a[1],b.hasZ&&(e.zmin=b.zmin,e.zmax=b.zmax,e.hasZ=!0),b.hasM&&(e.mmin=b.mmin,e.mmax=b.mmax,e.hasM=!0),e;if("rings"in b)return{rings:u(b.rings,a),hasM:b.hasM,hasZ:b.hasZ};if("paths"in b)return{paths:u(b.paths,a),hasM:b.hasM,hasZ:b.hasZ};
if("points"in b)return{points:g(b.points,a),hasM:b.hasM,hasZ:b.hasZ}}function u(a,b){for(var c=[],d=0;d<a.length;d++)c.push(g(a[d],b));return c}function g(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d],l=b(e[0],e[1],[0,0]);c.push(l);2<e.length&&l.push(e[2]);3<e.length&&l.push(e[3])}return c}function x(a,b){return!e.isValid(a)||!e.isValid(b)||e.equals(a,b)||m.canProject(a,b)?!1:!0}Object.defineProperty(a,"__esModule",{value:!0});a.projectMany=a.project=a.checkProjectionSupport=a.doesBrowserSupportProjection=
void 0;var c=[0,0];a.doesBrowserSupportProjection=function(a,c){return x(a,c)?b.isSupported():!0};a.checkProjectionSupport=function(a,c){return q.__awaiter(this,void 0,void 0,function(){var d,e,l;return q.__generator(this,function(h){if(!c)return[2];if(Array.isArray(a)){d=0;for(e=a;d<e.length;d++)if(l=e[d],x(l.geometry&&l.geometry.spatialReference,c)){if(b.isSupported())return[2,b.load()];throw new p("feature-store:unsupported-query","projection not supported",{inSpatialReference:a,outSpatialReference:c});
}return[2]}if(!x(a,c))return[2];if(b.isSupported())return[2,b.load()];throw new p("feature-store:unsupported-query","projection not supported",{inSpatialReference:a,outSpatialReference:c});})})};var d=r.bind(null,m.lngLatToXY),H=r.bind(null,m.xyToLngLat);a.project=function(a,c,h){if(!a)return a;h||(h=c,c=a.spatialReference);return e.isValid(c)&&e.isValid(h)&&!e.equals(c,h)?m.canProject(c,h)?e.isWebMercator(h)?d(a):H(a):b.projectMany(l.jsonAdapter,[a],c,h,null)[0]:a};var F=new (function(){function a(){this._jobs=
[];this._timer=null;this._process=this._process.bind(this)}a.prototype.push=function(a,b,c){return q.__awaiter(this,void 0,void 0,function(){var d,l=this;return q.__generator(this,function(g){a&&a.length&&b&&c&&!e.equals(b,c)||h.resolve(a);d={geometries:a,inSpatialReference:b,outSpatialReference:c,resolve:null};this._jobs.push(d);return[2,h.create(function(a){d.resolve=a;null===l._timer&&(l._timer=setTimeout(l._process,10))})]})})};a.prototype._process=function(){this._timer=null;var a=this._jobs.shift();
if(a){var c=a.geometries,h=a.inSpatialReference,g=a.outSpatialReference,a=a.resolve;m.canProject(h,g)?e.isWebMercator(g)?a(c.map(d)):a(c.map(H)):a(b.projectMany(l.jsonAdapter,c,h,g,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return a}());a.projectMany=function(a,b,c){return q.__awaiter(this,void 0,void 0,function(){return q.__generator(this,function(d){return[2,F.push(a,b,c)]})})}})},"esri/layers/graphics/data/QueryEngine":function(){define("require exports tslib ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/promiseUtils ../../../core/SetUtils ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../support/PromiseQueue".split(" "),
function(v,a,q,p,h,b,l,e,m,r,u,g,x,c,d,H,F,G,t,I,L,J,R,C){function M(a){return a.every(function(a){return"exceedslimit"!==a.statisticType})}Object.defineProperty(a,"__esModule",{value:!0});a.Feature=void 0;v=function(){return function(a,b,c,d,e){void 0===b&&(b=null);this.attributes=a;this.geometry=c;this.centroid=d;this.filterFlags=e;this.groupId=-1;this.displayId=b}}();a.Feature=v;var O=new Set,y=new l.MemCacheStorage(2E6),E=0;v=function(){function a(a){var b=this;this.capabilities={query:G.queryCapabilities};
this.geometryType=a.geometryType;this.hasM=a.hasM;this.hasZ=a.hasZ;this.objectIdField=a.objectIdField;this.spatialReference=a.spatialReference;this.definitionExpression=a.definitionExpression;this.featureStore=a.featureStore;this._changeHandle=this.featureStore.events.on("changed",function(){return b.clearCache()});this.timeInfo=a.timeInfo;a.cacheSpatialQueries&&(this._geometryQueryCache=new l.MemCache(E++ +"$$",y));this.fieldsIndex=new R(a.fields);a.scheduler&&a.task&&(this._frameQueue=new C.default,
this._frameTask=a.scheduler.registerTask(a.task,function(a){return b._update(a)},function(){return 0<b._frameQueue.length}))}a.prototype.destroy=function(){this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._frameQueue.cancelAll(),this._frameQueue=null);this.clearCache();this._geometryQueryCache&&this._geometryQueryCache.destroy();this._changeHandle&&(this._changeHandle.remove(),this._changeHandle=null);this.fieldsIndex.destroy()};Object.defineProperty(a.prototype,"featureAdapter",
{get:function(){return this.featureStore.featureAdapter},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"fullExtent",{get:function(){var a=this.featureStore.fullBounds;return a?{xmin:a[0],ymin:a[1],xmax:a[2],ymax:a[3],spatialReference:J.cleanFromGeometryEngine(this.spatialReference)}:null},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"timeExtent",{get:function(){return this.timeInfo?this._timeExtent?this._timeExtent:this._timeExtent=L.getTimeExtent(this.timeInfo,
this.featureStore):null},enumerable:!1,configurable:!0});a.prototype.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear();this._timeExtent=this._allItems=null};a.prototype.executeQuery=function(a,b){void 0===a&&(a={});return q.__awaiter(this,void 0,void 0,function(){var b,c,d,e=this;return q.__generator(this,function(n){switch(n.label){case 0:b=h.clone(a),n.label=1;case 1:return n.trys.push([1,8,,9]),[4,this._schedule(function(){return J.normalizeQuery(b,e.definitionExpression,
e.spatialReference)})];case 2:return b=n.sent(),[4,this._reschedule(function(){return e._checkQuerySupport(b)})];case 3:return b=n.sent(),[4,this._reschedule(function(){return e._executeGeometryQuery(b)})];case 4:return c=n.sent(),[4,this._reschedule(function(){return c.executeObjectIdsQuery(b)})];case 5:return c=n.sent(),[4,this._reschedule(function(){return c.executeTimeQuery(b)})];case 6:return c=n.sent(),[4,this._reschedule(function(){return c.executeAttributesQuery(b)})];case 7:return c=n.sent(),
[3,9];case 8:d=n.sent();if(d!==J.QUERY_ENGINE_EMPTY_RESULT)throw d;c=new t.default([],null,this);return[3,9];case 9:return[2,c.createQueryResponse(b)]}})})};a.prototype.executeQueryForCount=function(a,b){void 0===a&&(a={});return q.__awaiter(this,void 0,void 0,function(){var b,c,d,e=this;return q.__generator(this,function(n){switch(n.label){case 0:b=h.clone(a),b.returnGeometry=!1,b.returnCentroid=!1,b.outSR=null,n.label=1;case 1:return n.trys.push([1,8,,9]),[4,this._schedule(function(){return J.normalizeQuery(b,
e.definitionExpression,e.spatialReference)})];case 2:return b=n.sent(),[4,this._reschedule(function(){return e._checkQuerySupport(b)})];case 3:return b=n.sent(),[4,this._reschedule(function(){return e._executeGeometryQuery(b)})];case 4:return c=n.sent(),[4,this._reschedule(function(){return c.executeObjectIdsQuery(b)})];case 5:return c=n.sent(),[4,this._reschedule(function(){return c.executeTimeQuery(b)})];case 6:return c=n.sent(),[4,this._reschedule(function(){return c.executeAttributesQuery(b)})];
case 7:return c=n.sent(),[3,9];case 8:d=n.sent();if(d!==J.QUERY_ENGINE_EMPTY_RESULT)throw d;return[2,0];case 9:return[2,c.createQueryResponseForCount(b)]}})})};a.prototype.executeQueryForExtent=function(a,b){void 0===a&&(a={});return q.__awaiter(this,void 0,void 0,function(){var b,c,d,e,l,g,w,D,m=this;return q.__generator(this,function(E){switch(E.label){case 0:b=h.clone(a),d=b.outSR,E.label=1;case 1:return E.trys.push([1,8,,9]),[4,this._schedule(function(){return J.normalizeQuery(b,m.definitionExpression,
m.spatialReference)})];case 2:return b=E.sent(),[4,this._reschedule(function(){return m._checkQuerySupport(b)})];case 3:return b=E.sent(),b.returnGeometry=!0,b.returnCentroid=!1,b.outSR=null,[4,this._reschedule(function(){return m._executeGeometryQuery(b)})];case 4:return c=E.sent(),[4,this._reschedule(function(){return c.executeObjectIdsQuery(b)})];case 5:return c=E.sent(),[4,this._reschedule(function(){return c.executeTimeQuery(b)})];case 6:return c=E.sent(),[4,this._reschedule(function(){return c.executeAttributesQuery(b)})];
case 7:c=E.sent();e=c.size;if(!e)return[2,{count:e,extent:null}];u.set(n,u.NEGATIVE_INFINITY);this.featureStore.forEachBounds(c.items,function(a){return u.expand(n,a)},A);l={xmin:n[0],ymin:n[1],xmax:n[3],ymax:n[4],spatialReference:J.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(n[2])&&isFinite(n[5])&&(l.zmin=n[2],l.zmax=n[5]);g=F.project(l,c.spatialReference,d);g.spatialReference=J.cleanFromGeometryEngine(d||this.spatialReference);0===g.xmax-g.xmin&&(w=r.getMetersPerUnitForSR(g.spatialReference),
g.xmin-=w,g.xmax+=w);0===g.ymax-g.ymin&&(w=r.getMetersPerUnitForSR(g.spatialReference),g.ymin-=w,g.ymax+=w);this.hasZ&&null!=g.zmin&&null!=g.zmax&&0===g.zmax-g.zmin&&(w=r.getMetersPerUnitForSR(g.spatialReference),g.zmin-=w,g.zmax+=w);return[2,{count:e,extent:g}];case 8:D=E.sent();if(D===J.QUERY_ENGINE_EMPTY_RESULT)return[2,{count:0,extent:null}];throw D;case 9:return[2]}})})};a.prototype.executeQueryForIds=function(a,b){void 0===a&&(a={});return q.__awaiter(this,void 0,void 0,function(){return q.__generator(this,
function(c){return[2,this.executeQueryForIdSet(a,b).then(function(a){return m.valuesOfSet(a)})]})})};a.prototype.executeQueryForIdSet=function(a,b){void 0===a&&(a={});return q.__awaiter(this,void 0,void 0,function(){var b,c,d,e,n,l=this;return q.__generator(this,function(g){switch(g.label){case 0:b=h.clone(a),b.returnGeometry=!1,b.returnCentroid=!1,b.outSR=null,g.label=1;case 1:return g.trys.push([1,9,,10]),[4,this._schedule(function(){return J.normalizeQuery(b,l.definitionExpression,l.spatialReference)})];
case 2:return b=g.sent(),[4,this._reschedule(function(){return l._checkQuerySupport(b)})];case 3:return b=g.sent(),[4,this._reschedule(function(){return l._executeGeometryQuery(b)})];case 4:return c=g.sent(),[4,this._reschedule(function(){return c.executeObjectIdsQuery(b)})];case 5:return c=g.sent(),[4,this._reschedule(function(){return c.executeTimeQuery(b)})];case 6:return c=g.sent(),[4,this._reschedule(function(){return c.executeAttributesQuery(b)})];case 7:return c=g.sent(),d=c.items,e=new Set,
[4,this._reschedule(function(){for(var a=0,b=d;a<b.length;a++)e.add(c.featureAdapter.getObjectId(b[a]))})];case 8:return g.sent(),[2,e];case 9:n=g.sent();if(n===J.QUERY_ENGINE_EMPTY_RESULT)return[2,new Set];throw n;case 10:return[2]}})})};a.prototype.executeQueryForLatestObservations=function(a,b){void 0===a&&(a={});return q.__awaiter(this,void 0,void 0,function(){var b,c,d,e=this;return q.__generator(this,function(n){switch(n.label){case 0:if(!this.timeInfo||!this.timeInfo.trackIdField)throw new p("feature-store:unsupported-query",
"Missing timeInfo or timeInfo.trackIdField",{query:a,timeInfo:this.timeInfo});b=h.clone(a);n.label=1;case 1:return n.trys.push([1,9,,10]),[4,this._schedule(function(){return J.normalizeQuery(b,e.definitionExpression,e.spatialReference)})];case 2:return b=n.sent(),[4,this._reschedule(function(){return e._checkQuerySupport(b)})];case 3:return b=n.sent(),[4,this._reschedule(function(){return e._executeGeometryQuery(b)})];case 4:return c=n.sent(),[4,this._reschedule(function(){return c.executeObjectIdsQuery(b)})];
case 5:return c=n.sent(),[4,this._reschedule(function(){return c.executeTimeQuery(b)})];case 6:return c=n.sent(),[4,this._reschedule(function(){return c.executeAttributesQuery(b)})];case 7:return c=n.sent(),[4,this._reschedule(function(){return c.filterLatest()})];case 8:return c=n.sent(),[3,10];case 9:d=n.sent();if(d!==J.QUERY_ENGINE_EMPTY_RESULT)throw d;c=new t.default([],null,this);return[3,10];case 10:return[2,c.createQueryResponse(b)]}})})};a.prototype._schedule=function(a){return q.__awaiter(this,
void 0,void 0,function(){return q.__generator(this,function(b){return this._frameQueue?[2,this._frameQueue.push(a)]:[2,a()]})})};a.prototype._reschedule=function(a){return q.__awaiter(this,void 0,void 0,function(){return q.__generator(this,function(b){return this._frameQueue?[2,this._frameQueue.unshift(a)]:[2,a()]})})};a.prototype._update=function(a){for(this._budget=a;!a.done&&this._frameQueue&&this._frameQueue.process();)a.madeProgress();this._budget=null};a.prototype._getAll=function(){if(!this._allItems){var a=
[];this.featureStore.forEach(function(b){return a.push(b)});this._allItems=new t.default(a,null,this)}return this._allItems};a.prototype._executeGeometryQuery=function(a){return q.__awaiter(this,void 0,void 0,function(){var c,e,n,l,g,h,w,A,m,D,E,y,r,p,u,x,C,L,O,J,G=this;return q.__generator(this,function(K){switch(K.label){case 0:c=a.geometry;e=a.outSR;n=a.spatialRel;l=d.isValid(e)&&!d.equals(this.spatialReference,e);if(g=this._geometryQueryCache?l?JSON.stringify({geometry:c,spatialRelationship:n,
outSpatialReference:e}):JSON.stringify({geometry:c,spatialRelationship:n}):null)if(h=this._geometryQueryCache.get(g),!b.isUndefined(h))return[2,h];w=function(b){return q.__awaiter(G,void 0,void 0,function(){var c;return q.__generator(this,function(d){switch(d.label){case 0:return l&&(a.returnGeometry||a.returnCentroid)?[4,b.project(e)]:[3,2];case 1:return c=d.sent(),g&&this._geometryQueryCache.put(g,c,c.size||1),[2,c];case 2:return g&&this._geometryQueryCache.put(g,b,b.size||1),[2,b]}})})};if(!c)return[2,
w(this._getAll())];A=this.featureAdapter;if("esriSpatialRelDisjoint"!==n)return[3,3];m=this._searchFeatures(this._getQueryBBoxes(c));if(!m.length)return[2,w(this._getAll())];y=new Set;r=0;for(p=m;r<p.length;r++)u=p[r],y.add(A.getObjectId(u));return[4,this._reschedule(function(){var a=0;D=Array(y.size);G.featureStore.forEach(function(b){return D[a++]=b});E=y})];case 1:return K.sent(),[4,this._reschedule(function(){return q.__awaiter(G,void 0,void 0,function(){var a,b,d;return q.__generator(this,function(e){switch(e.label){case 0:return[4,
I.getSpatialQueryOperator(n,c,this.geometryType,this.hasZ,this.hasM)];case 1:return a=e.sent(),b=function(b){return!E.has(A.getObjectId(b))||a(A.getGeometry(b))},d=t.default.bind,[4,this._runSpatialFilter(D,b)];case 2:return[2,new (d.apply(t.default,[void 0,e.sent(),c,this]))]}})})})];case 2:return x=K.sent(),[2,w(x)];case 3:return C=this._searchFeatures(this._getQueryBBoxes(c)),C.length?(L=this._canExecuteSoloPass(c,a))?[2,w(new t.default(C,c,this))]:[4,I.getSpatialQueryOperator(n,c,this.geometryType,
this.hasZ,this.hasM)]:(x=new t.default([],c,this),g&&this._geometryQueryCache.put(g,x,x.size||1),[2,x]);case 4:return O=K.sent(),[4,this._runSpatialFilter(C,function(a){return O(A.getGeometry(a))})];case 5:return J=K.sent(),[2,w(new t.default(J,c,this))]}})})};a.prototype._runSpatialFilter=function(a,b){return q.__awaiter(this,void 0,void 0,function(){var c,d,e,n=this;return q.__generator(this,function(l){if(!b)return[2,a];if(!this._budget)return[2,a.filter(function(a){return b(a)})];c=0;d=[];e=function(){return q.__awaiter(n,
void 0,void 0,function(){var n;return q.__generator(this,function(l){switch(l.label){case 0:if(!(c<a.length))return[3,3];n=a[c];b(n)&&d.push(n);return this._budget.done?[4,this._reschedule(function(){return e()})]:[3,2];case 1:l.sent(),l.label=2;case 2:return++c,[3,0];case 3:return[2]}})})};return[2,this._reschedule(function(){return e()}).then(function(){return d})]})})};a.prototype._canExecuteSoloPass=function(a,b){var c=this.geometryType;b=b.spatialRel;return I.canQueryWithRBush(a)&&("esriSpatialRelEnvelopeIntersects"===
b||"esriGeometryPoint"===c&&("esriSpatialRelIntersects"===b||"esriSpatialRelContains"===b||"esriSpatialRelWithin"===b))};a.prototype._getQueryBBoxes=function(a){if(I.canQueryWithRBush(a)){if(c.isExtent(a))return[g.fromValues(a.xmin,a.ymin,a.xmax,a.ymax)];if(c.isPolygon(a))return a.rings.map(function(a){return g.fromValues(Math.min(a[0][0],a[2][0]),Math.min(a[0][1],a[2][1]),Math.max(a[0][0],a[2][0]),Math.max(a[0][1],a[2][1]))})}return[x.getBoundsXY(g.create(),a)]};a.prototype._searchFeatures=function(a){for(var b=
0;b<a.length;b++)this.featureStore.forEachInBounds(a[b],function(a){O.add(a)});var c=Array(O.size),d=0;O.forEach(function(a){return c[d++]=a});O.clear();return c};a.prototype._checkQuerySupport=function(a){return q.__awaiter(this,void 0,void 0,function(){return q.__generator(this,function(b){if(0>a.distance||null!=a.geometryPrecision||a.multipatchOption||a.pixelSize||a.relationParam||a.text)throw new p("feature-store:unsupported-query","Unsupported query options",{query:a});return[2,e.all([this._checkAttributesQuerySupport(a),
this._checkStatisticsQuerySupport(a),I.checkSpatialQuerySupport(a,this.geometryType,this.spatialReference),F.checkProjectionSupport(this.spatialReference,a.outSR)]).then(function(){return a})]})})};a.prototype._checkAttributesQuerySupport=function(a){var b=a.outFields,c=a.orderByFields,d=a.returnDistinctValues,e=a.outStatistics,n=e?e.map(function(a){return a.outStatisticFieldName&&a.outStatisticFieldName.toLowerCase()}):[];c&&0<c.length&&(c=c.map(function(a){var b=a.toLowerCase();return-1<b.indexOf(" asc")?
b.split(" asc")[0]:-1<b.indexOf(" desc")?b.split(" desc")[0]:a}).filter(function(a){return-1===n.indexOf(a)}),H.validateFields(this.fieldsIndex,c,"orderByFields contains missing fields"));if(b&&0<b.length)H.validateFields(this.fieldsIndex,b,"outFields contains missing fields");else if(d)throw new p("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:a});H.validateWhere(this.fieldsIndex,a.where)};a.prototype._checkStatisticsQuerySupport=function(a){return q.__awaiter(this,
void 0,void 0,function(){var b,c,d,e,n,l,g,h,w,A,m,E,D;return q.__generator(this,function(y){b=a.outStatistics;c=a.groupByFieldsForStatistics;d=a.having;e=c&&c.length;n=b&&b.length;if(d){if(!e||!n)throw new p("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:a});H.validateHaving(this.fieldsIndex,d,b)}if(n){if(!M(b))return[2];l=b.map(function(a){return a.onStatisticField});H.validateFields(this.fieldsIndex,l,"onStatisticFields contains missing fields");
e&&H.validateFields(this.fieldsIndex,c,"groupByFieldsForStatistics contains missing fields");g=0;for(h=b;g<h.length;g++)if(w=h[g],A=w.onStatisticField,m=w.statisticType,(E="percentile_disc"===m||"percentile_cont"===m)&&"statisticParameters"in w){if(D=w.statisticParameters,!D)throw new p("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:w,query:a});}else if("count"!==m&&A&&H.hasInvalidFieldType(A,this.fieldsIndex))throw new p("feature-store:unsupported-query",
"outStatistics contains non-numeric fields",{definition:w,query:a});}return[2]})})};return a}();a.default=v;var A=u.create(),n=u.create()})},"esri/core/MemCache":function(){define(["require","exports","./MapUtils","./PooledArray","./string"],function(v,a,q,p,h){Object.defineProperty(a,"__esModule",{value:!0});a.MemCacheStorage=a.MemCache=a.MIN_PRIORITY=void 0;a.MIN_PRIORITY=-3;v=function(){function a(a,b,h){this._namespace=a;this._storage=b;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);
this._namespace+=":";h&&(this._storage.registerRemoveFunc(this._namespace,h),this._removeFunc=!0)}Object.defineProperty(a.prototype,"namespace",{get:function(){return this._namespace.slice(0,-1)},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"hitRate",{get:function(){return this._hit/(this._hit+this._miss)},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"size",{get:function(){return this._storage.size},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,
"maxSize",{get:function(){return this._storage.maxSize},enumerable:!1,configurable:!0});a.prototype.resetHitRate=function(){this._hit=this._miss=0};a.prototype.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this)};a.prototype.put=function(a,b,h,r){void 0===r&&(r=0);this._storage.put(this._namespace+a,b,h,r)};a.prototype.get=function(a){a=this._storage.get(this._namespace+a);void 0===a?++this._miss:
++this._hit;return a};a.prototype.pop=function(a){a=this._storage.pop(this._namespace+a);void 0===a?++this._miss:++this._hit;return a};a.prototype.updateSize=function(a,b,h){this._storage.updateSize(this._namespace+a,b,h)};a.prototype.clear=function(){this._storage.clear(this._namespace)};a.prototype.clearAll=function(){this._storage.clearAll()};a.prototype.getStats=function(){return this._storage.getStats()};a.prototype.resetStats=function(){this._storage.resetStats()};return a}();a.MemCache=v;v=
function(){function b(a){void 0===a&&(a=10485760);this._maxSize=a;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=[];this._users=new p}b.prototype.register=function(a){this._users.push(a)};b.prototype.deregister=function(a){this._users.removeUnordered(a)};b.prototype.registerRemoveFunc=function(a,b){this._removeFuncs.push([a,b])};b.prototype.deregisterRemoveFunc=function(a){this._removeFuncs=this._removeFuncs.filter(function(b){return b[0]!==a})};Object.defineProperty(b.prototype,
"size",{get:function(){return this._size},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"maxSize",{get:function(){return this._maxSize},set:function(a){this._maxSize=Math.max(a,0);this._checkSizeLimit()},enumerable:!1,configurable:!0});b.prototype.put=function(b,e,h,r){var l=this._db.get(b);l&&(this._size-=l.size,this._db.delete(b),l.entry!==e&&this._notifyRemoved(b,l.entry));h>this._maxSize?this._notifyRemoved(b,e):void 0===e?console.warn("Refusing to cache undefined entry "):
!h||0>h?console.warn("Refusing to cache entry with invalid size "+h):(r=1+Math.max(r,a.MIN_PRIORITY)-a.MIN_PRIORITY,this._db.set(b,{entry:e,size:h,lifetime:r,lives:r}),this._size+=h,this._checkSizeLimit())};b.prototype.updateSize=function(a,b,h){var e=this._db.get(a);e&&e.entry===b&&(this._size-=e.size,h>this._maxSize?this._notifyRemoved(a,b):(e.size=h,this._size+=h,this._checkSizeLimit()))};b.prototype.pop=function(a){var b=this._db.get(a);if(b)return this._size-=b.size,this._db.delete(a),++this._hit,
b.entry;++this._miss};b.prototype.get=function(a){var b=this._db.get(a);if(void 0===b)++this._miss;else return this._db.delete(a),b.lives=b.lifetime,this._db.set(a,b),++this._hit,b.entry};b.prototype.getStats=function(){var b=this,e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},m={},r=[];this._db.forEach(function(a,d){var c=a.lifetime;r[c]=(r[c]||0)+a.size;b._users.forEachSimple(function(b){b=
b.namespace;h.startsWith(d,b)&&(m[b]=(m[b]||0)+a.size)})});var p={};this._users.forEachSimple(function(a){var b=a.namespace;!isNaN(a.hitRate)&&0<a.hitRate?(m[b]=m[b]||0,p[b]=Math.round(100*a.hitRate)+"%"):p[b]="0%"});var g=Object.keys(m);g.forEach(function(a){return m[a]=m[a]/b._size*100});g.sort(function(a,b){return m[b]-m[a]});g.forEach(function(a){return e[a]=Math.round(m[a])+"% / "+p[a]});for(g=r.length-1;0<=g;--g){var q=r[g];q&&(e["Priority "+(g+a.MIN_PRIORITY-1)]=Math.round(q/this.size*100)+
"%")}return e};b.prototype.resetStats=function(){this._hit=this._miss=0;this._users.forEachSimple(function(a){return a.resetHitRate()})};b.prototype.clear=function(a){var b=this;this._db.forEach(function(e,l){h.startsWith(l,a)&&(b._size-=e.size,b._db.delete(l),b._notifyRemoved(l,e.entry))})};b.prototype.clearAll=function(){var a=this;this._db.forEach(function(b,h){return a._notifyRemoved(h,b.entry)});this._size=0;this._db.clear()};b.prototype._getHitRate=function(){return this._hit/(this._hit+this._miss)};
b.prototype._notifyRemoved=function(a,b){this._removeFuncs.forEach(function(e){if(h.startsWith(a,e[0]))e[1](b)})};b.prototype._checkSizeLimit=function(){var a=this;this._size<=this._maxSize||q.someMap(this._db,function(b,h){a._db.delete(h);1>=b.lives?(a._size-=b.size,a._notifyRemoved(h,b.entry)):(--b.lives,a._db.set(h,b));return a._size<=.9*a.maxSize})};return b}();a.MemCacheStorage=v})},"esri/core/MapUtils":function(){define(["require","exports","./maybe"],function(v,a,q){function p(a){if(0===a.size)throw Error("Map is empty");
return a.keys().next().value}function h(a){if(0===a.size)throw Error("Map is empty");var b=void 0,e=!1;a.forEach(function(a,c){e||(b=c,e=!0)});return q.assumeNonNull(b)}function b(a){if(0===a.size)throw Error("Map is empty");return a.values().next().value}function l(a){if(0===a.size)throw Error("Map is empty");var b=void 0,e=!1;a.forEach(function(a){e||(b=a,e=!0)});return q.assumeNonNull(b)}Object.defineProperty(a,"__esModule",{value:!0});a.test=a.firstValueOfMap=a.firstKeyOfMap=a.MapFromValues=a.keysOfMap=
a.valuesOfMap=a.pairsOfMap=a.someMap=void 0;a.someMap=Map.prototype.entries?function(a,b){a=a.entries();for(var e=a.next();!e.done;e=a.next())if(b(e.value[1],e.value[0]))return!0;return!1}:function(a,b){var e=!0;a.forEach(function(a,c){e&&(e=!b(a,c))});return!e};v=!!Map.prototype.values;var e=!!Map.prototype.keys,m=!!Array.from;a.pairsOfMap=function(a){var b=[];a.forEach(function(a,e){return b.push([e,a])});return b};a.valuesOfMap=v&&m?function(a){return Array.from(a.values())}:function(a){var b=
Array(a.size),e=0;a.forEach(function(a){return b[e++]=a});return b};a.keysOfMap=e&&m?function(a){return Array.from(a.keys())}:function(a){var b=Array(a.size),e=0;a.forEach(function(a,c){return b[e++]=c});return b};a.MapFromValues=v?function(a){return new Map(a)}:function(a){for(var b=new Map,e=0;e<a.length;e++){var h=a[e];b.set(h[0],h[1])}return b};a.firstKeyOfMap=e?p:h;a.firstValueOfMap=v?b:l;a.test={firstKeyOfMapFallback:h,firstValueOfMapFallback:l}})},"esri/core/SetUtils":function(){define(["require",
"exports","./maybe"],function(v,a,q){function p(a){if(0===a.size)throw Error("Set is empty");return a.values().next().value}function h(a){if(0===a.size)throw Error("Set is empty");var b=void 0,h=!1;a.forEach(function(a){h||(b=a,h=!0)});return q.assumeNonNull(b)}Object.defineProperty(a,"__esModule",{value:!0});a.reduceSet=a.firstOfSet=a.SetFromValues=a.valuesOfSet=a.someSet=void 0;a.someSet=Set.prototype.entries?function(a,b){a=a.entries();for(var e=a.next();!e.done;e=a.next())if(b(e.value[0]))return!0;
return!1}:function(a,b){var e=!0;a.forEach(function(a){e&&(e=!b(a))});return!e};v=!!Set.prototype.values;var b=!!Array.from;a.valuesOfSet=v&&b?function(a){return Array.from(a.values())}:function(a){var b=Array(a.size),h=0;a.forEach(function(a){return b[h++]=a});return b};a.SetFromValues=v?function(a){return new Set(a)}:function(a){for(var b=new Set,h=0;h<a.length;h++)b.add(a[h]);return b};a.firstOfSet=v?p:h;a.reduceSet=function(a,b,h){var e=h;a.forEach(function(a){return e=b(a,e)});return e}})},"esri/core/unitUtils":function(){define("require exports ./compilerUtils ./jsonMap ./SetUtils ../geometry/support/geodesicConstants ../geometry/support/WKIDUnitConversion".split(" "),
function(v,a,q,p,h,b,l){function e(a){if(a=y[a])return a;throw Error("unknown measure");}function m(a){return O[a].baseUnit}function r(a,b){void 0===b&&(b=null);b=b||e(a);return O[b].baseUnit===a}function u(a,b,c){if(b===c)return a;var d=e(b);if(d!==e(c))throw Error("incompatible units");a=r(b,d)?a:a*O[d].units[b].inBaseUnits;return r(c,d)?a:a/O[d].units[c].inBaseUnits}function g(a,b){return 3E3>u(a,b,"meters")?"meters":"kilometers"}function x(a,b){return 1E5>u(a,b,"meters")?"meters":"kilometers"}
function c(a,b){return 1E3>u(a,b,"feet")?"feet":"miles"}function d(a,b){return 1E5>u(a,b,"feet")?"feet":"miles"}function H(a){return M.fromJSON(a.toLowerCase())||null}function F(a,b){void 0===b&&(b=I);return G(a,!0)||b}function G(a,b){void 0===b&&(b=!1);var c,d,e;null!=a&&("object"===typeof a?(c=a.wkid,d=a.wkt):"number"===typeof a?c=a:"string"===typeof a&&(d=a));c?(e=R.values[R[c]],!e&&b&&C.has(c)&&(e=L)):d&&-1!==d.search(/^PROJCS/i)&&(a=J.exec(d))&&a[1]&&(e=parseFloat(a[1].split(",")[1]));return e}
function t(a){var b,c,d;null!=a&&("object"===typeof a?(b=a.wkid,c=a.wkt):"number"===typeof a?b=a:"string"===typeof a&&(c=a));b?d=R.units[R[b]]:c&&-1!==c.search(/^PROJCS/i)&&(a=J.exec(c))&&a[1]&&(d=(a=/[\\"\\']{1}([^\\"\\']+)/.exec(a[1]))&&a[1]);return d?H(d):null}Object.defineProperty(a,"__esModule",{value:!0});a.getDefaultUnitSystem=a.getUnitString=a.getMetersPerUnit=a.getMetersPerUnitForSR=a.getVerticalUnitStringForSR=a.getMetersPerVerticalUnitForSR=a.unitToRESTJSON=a.unitFromRESTJSON=a.lengthToDegrees=
a.preferredImperialAreaUnit=a.preferredMetricAreaUnit=a.preferredImperialVerticalLengthUnit=a.preferredImperialLengthUnit=a.preferredMetricVerticalLengthUnit=a.preferredMetricLengthUnit=a.preferredVerticalLengthUnit=a.preferredLengthUnit=a.convertUnit=a.isBaseUnit=a.baseUnitForUnit=a.baseUnitForMeasure=a.measureForUnit=a.measurementLengthUnits=a.measurementAreaUnits=a.inchesPerMeter=void 0;a.inchesPerMeter=39.37;var I=b.metersPerDegree,L=b.earthRadius*Math.PI/200,J=/UNIT\[([^\]]+)\]\]$/i,R=l,C=h.SetFromValues([4261,
4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),M=p.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers",
"150_kilometers":"150-kilometers"});v={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};p={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*.1},"square-meters":{inBaseUnits:1},
"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:function(a){return a*a}(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};var O={length:{baseUnit:"meters",units:v},area:{baseUnit:"square-meters",units:p},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1E3*
1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},y=function(){var a={},b;for(b in O)for(var c in O[b].units)a[c]=b;return a}();a.measurementAreaUnits=
"metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");a.measurementLengthUnits="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" ");a.measureForUnit=e;a.baseUnitForMeasure=m;a.baseUnitForUnit=function(a){return m(e(a))};a.isBaseUnit=r;a.convertUnit=u;a.preferredLengthUnit=function(a,b,d){switch(d){case "metric":return g(a,b);case "imperial":return c(a,b);default:return d}};
a.preferredVerticalLengthUnit=function(a,b,c){switch(c){case "metric":return x(a,b);case "imperial":return d(a,b);default:return c}};a.preferredMetricLengthUnit=g;a.preferredMetricVerticalLengthUnit=x;a.preferredImperialLengthUnit=c;a.preferredImperialVerticalLengthUnit=d;a.preferredMetricAreaUnit=function(a,b){return 3E6>u(a,b,"square-meters")?"square-meters":"square-kilometers"};a.preferredImperialAreaUnit=function(a,b){return 1E6>u(a,b,"square-feet")?"square-feet":"square-miles"};a.lengthToDegrees=
function(a,c,d){void 0===d&&(d=b.earthRadius);return u(a,c,"meters")/(d*Math.PI/180)};a.unitFromRESTJSON=H;a.unitToRESTJSON=function(a){return M.toJSON(a)||null};a.getMetersPerVerticalUnitForSR=function(a){a=F(a);return 1E5<a?1:a};a.getVerticalUnitStringForSR=function(a){return 1E5<F(a)?"meters":t(a)};a.getMetersPerUnitForSR=F;a.getMetersPerUnit=G;a.getUnitString=t;a.getDefaultUnitSystem=function(a){if(!a)return null;a=t(a);switch(a){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";
case "50-kilometers":case "150-kilometers":case "meters":return"metric";case null:case void 0:break;default:q.neverReached(a)}return null}})},"esri/layers/graphics/data/attributeSupport":function(){define(["require","exports","../../../core/Error","../../../core/SetUtils","../../../core/sql/WhereClauseCache"],function(v,a,q,p,h){function b(a,b){return a?m.get(a,b):null}function l(a,h,m,c){void 0===c&&(c=!0);for(var d=[],g=0;g<h.length;g++){var r=h[g];if("*"!==r&&!a.has(r))if(c){var p=e(r);try{var t=
b(p,a);if(!t)throw new q("feature-store:unsupported-query","invalid SQL expression",{where:p});if(!t.isStandardized)throw new q("feature-store:unsupported-query","expression is not standard",{clause:t});l(a,t.fieldNames,"expression contains missing fields")}catch(I){if((p=I&&I.details)&&(p.clause||p.where))throw I;p&&p.missingFields?d.push.apply(d,p.missingFields):d.push(r)}}else d.push(r)}if(d.length)throw new q("feature-store:unsupported-query",m,{missingFields:d});}function e(a){return a.split(" as ")[0]}
Object.defineProperty(a,"__esModule",{value:!0});a.hasInvalidFieldType=a.getAliasFromFieldName=a.getExpressionFromFieldName=a.validateFields=a.getWhereClause=a.validateHaving=a.validateWhere=void 0;var m=new h.WhereClauseCache(50,500),r=p.SetFromValues("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));a.validateWhere=function(a,b){if(!b)return!0;var e=m.get(b,a);if(!e)throw new q("feature-store:unsupported-query",
"invalid SQL expression",{where:b});if(!e.isStandardized)throw new q("feature-store:unsupported-query","where clause is not standard",{where:b});l(a,e.fieldNames,"where clause contains missing fields");return!0};a.validateHaving=function(a,b,e){if(!b)return!0;var c=m.get(b,a);if(!c)throw new q("feature-store:unsupported-query","invalid SQL expression",{having:b});if(!c.isAggregate)throw new q("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:b});l(a,c.fieldNames,
"having contains missing fields");if(!c.getExpressions().every(function(b){var c=b.aggregateType;b=b.field;var d=a.has(b)&&a.get(b).name;return e.some(function(b){var e=b.onStatisticField;b=b.statisticType;return(a.has(e)&&a.get(e).name)===d&&b.toLowerCase().trim()===c})}))throw new q("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:b});return!0};a.getWhereClause=b;a.validateFields=l;a.getExpressionFromFieldName=e;a.getAliasFromFieldName=function(a){return a.split(" as ")[1]};
a.hasInvalidFieldType=function(a,b){return(a=b.get(a))?!r.has(a.type):!1}})},"esri/core/sql/WhereClauseCache":function(){define(["require","exports","../ItemCache","./WhereClause"],function(v,a,q,p){Object.defineProperty(a,"__esModule",{value:!0});a.WhereClauseCache=void 0;v=function(){function a(a,h){this._cache=new q(a);this._invalidCache=new q(h)}a.prototype.get=function(a,h){var b=h.uid+":"+a,l=this._cache.get(b);if(l)return l;if(void 0!==this._invalidCache.get(b))return null;try{var r=p.WhereClause.create(a,
h);this._cache.put(b,r);return r}catch(u){return this._invalidCache.put(b,null),null}};return a}();a.WhereClauseCache=v})},"esri/core/ItemCache":function(){define(["require","exports","./MemCache"],function(v,a,q){return function(){function a(a,b){this._storage=new q.MemCacheStorage;this._storage.maxSize=a;b&&this._storage.registerRemoveFunc("",b)}a.prototype.put=function(a,b){this._storage.put(a,b,1,1)};a.prototype.pop=function(a){return this._storage.pop(a)};a.prototype.get=function(a){return this._storage.get(a)};
a.prototype.clear=function(){this._storage.clearAll()};a.prototype.destroy=function(){this._storage.clearAll()};return a}()})},"esri/core/sql/WhereClause":function(){define("require exports ../has ../MapUtils ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(v,a,q,p,h,b,l){function e(a,b){a+="";return a.length>=b?a:Array(b-a.length+1).join("0")+a}function m(a,b,c,d,h,l,g,m,y){void 0===c&&(c="0");void 0===d&&(d="0");void 0===h&&(h="0");void 0===l&&(l="0");void 0===g&&
(g="");void 0===m&&(m="0");void 0===y&&(y="0");return"+"===g||"-"===g?(a=e(parseInt(a,10),4)+"-"+e(parseInt(b,10),2)+"-"+e(parseInt(c,10),2),b="",10>parseFloat(l)&&(b="0"),d=e(parseInt(d,10),2)+":"+e(parseInt(h,10),2)+":"+(b+parseFloat(l).toString()),g=""+g+e(parseInt(m,10),2)+":"+e(parseInt(y,10),2),new Date(a+"T"+d+g)):new Date(parseInt(a,10),parseInt(b,10)-1,parseInt(c,10),parseInt(d,10),parseInt(h,10),parseFloat(l))}function r(a){var b=C.exec(a);if(null!==b){a=b[1];var c=b[2],d=b[3],e=b[4],h=
b[5],l=b[6];return m(a,c,d,e,h,l)}b=M.exec(a);if(null!==b){a=b[1];var c=b[2],d=b[3],e=b[4],h=b[5],l=b[6],g=b[7],A=b[8],b=b[9];return m(a,c,d,e,h,l,g,A,b)}b=O.exec(a);if(null!==b)return a=b[1],c=b[2],d=b[3],e=b[4],h=b[5],g=b[6],A=b[7],b=b[8],m(a,c,d,e,h,"0",g,A,b);b=y.exec(a);if(null!==b)return a=b[1],c=b[2],d=b[3],e=b[4],h=b[5],m(a,c,d,e,h);b=R.exec(a);if(null!==b)return a=b[1],c=b[2],d=b[3],m(a,c,d);throw Error("SQL Invalid Timestamp");}function u(a){a=R.exec(a);if(null===a)throw Error("SQL Invalid Date");
var b=a[2],c=a[3];return new Date(parseInt(a[1],10),parseInt(b,10)-1,parseInt(c,10))}function g(a){return Array.isArray(a)?a:[a]}function x(a){return null!==a?!0!==a:null}function c(a,b){return null!=a&&null!=b?!0===a&&!0===b:!1===a||!1===b?!1:null}function d(a,b){return null!=a&&null!=b?!0===a||!0===b:!0===a||!0===b?!0:null}function H(a,b){if(null==a)return null;for(var c=!1,d=0;d<b.length;d++){var e=b[d];if(null==e)c=null;else if(a===e){c=!0;break}}return c}function F(a,b,c){if(null==a)return null;
for(var d="",e=0,n=0;n<b.length;n++){var h=b.charAt(n);switch(e){case 0:h===c?e=1:d=0<="-[]/{}()*+?.\\^$|".indexOf(h)?d+("\\"+h):"%"===h?d+".*":"_"===h?d+".":d+h;break;case 1:d=0<="-[]/{}()*+?.\\^$|".indexOf(h)?d+("\\"+h):d+h,e=0}}return(new RegExp("^"+d+"$")).test(a)}function G(a){return a instanceof Date?a.valueOf():a}function t(a,b,c){if(null==b||null==c)return null;b=G(b);c=G(c);switch(a){case "\x3c\x3e":return b!==c;case "\x3d":return b===c;case "\x3e":return b>c;case "\x3c":return b<c;case "\x3e\x3d":return b>=
c;case "\x3c\x3d":return b<=c}}function I(a){for(var b=[],c={},d=0;d<a.length;d++){var e=a[d],h=e.toLowerCase();void 0===c[h]&&(b.push(e),c[h]=1)}return b}function L(a,c,d){if(c instanceof b.SqlInterval)if(d instanceof Date)switch(a){case "+":return new Date(c.valueInMilliseconds()+d.getTime());case "-":return c.valueInMilliseconds()-d.getTime();case "*":return c.valueInMilliseconds()*d.getTime();case "/":return c.valueInMilliseconds()/d.getTime()}else if(d instanceof b.SqlInterval)switch(a){case "+":return b.SqlInterval.createFromMilliseconds(c.valueInMilliseconds()+
d.valueInMilliseconds());case "-":return b.SqlInterval.createFromMilliseconds(c.valueInMilliseconds()-d.valueInMilliseconds());case "*":return c.valueInMilliseconds()*d.valueInMilliseconds();case "/":return c.valueInMilliseconds()/d.valueInMilliseconds()}else c=c.valueInMilliseconds();else if(d instanceof b.SqlInterval)if(c instanceof Date)switch(a){case "+":return new Date(d.valueInMilliseconds()+c.getTime());case "-":return new Date(c.getTime()-d.valueInMilliseconds());case "*":return c.getTime()*
d.valueInMilliseconds();case "/":return c.getTime()/d.valueInMilliseconds()}else d=d.valueInMilliseconds();else if(c instanceof Date&&"number"===typeof d)switch(d*=864E5,c=c.getTime(),a){case "+":return new Date(c+d);case "-":return new Date(c-d);case "*":return new Date(c*d);case "/":return new Date(c/d)}else if(d instanceof Date&&"number"===typeof c)switch(c*=864E5,d=d.getTime(),a){case "+":return new Date(c+d);case "-":return new Date(c-d);case "*":return new Date(c*d);case "/":return new Date(c/
d)}switch(a){case "+":return c+d;case "-":return c-d;case "*":return c*d;case "/":return c/d}}function J(a,b,c,d){a=d.getAttribute(a,b);return null!=a&&1===c[b]?new Date(a):a}Object.defineProperty(a,"__esModule",{value:!0});a.defaultAttributeAdapter=a.WhereClause=void 0;var R=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,C=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,M=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,O=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,
y=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,E=function(){function a(){}a.makeBool=function(a){return!0===a};a.featureValue=function(a,b,c,d){return J(a,b,c,d)};a.equalsNull=function(a){return null===a};a.applyLike=function(a,b,c){return F(a,b,c)};a.ensureArray=function(a){return g(a)};a.applyIn=function(a,b){return H(a,b)};a.currentDate=function(){var a=new Date;a.setHours(0,0,0,0);return a};a.makeSqlInterval=function(a,c,d){return b.SqlInterval.createFromValueAndQualifer(a,c,d)};a.convertInterval=
function(a){return a instanceof b.SqlInterval?a.valueInMilliseconds():a};a.currentTimestamp=function(){return new Date};a.compare=function(a,b,c){return t(a,b,c)};a.calculate=function(a,b,c){return L(a,b,c)};a.makeComparable=function(a){return G(a)};a.evaluateFunction=function(a,c){return b.evaluateFunction(a,c)};a.lookup=function(a,b){a=b[a];return void 0===a?null:a};a.between=function(a,b){return null==a||null==b[0]||null==b[1]?null:a>=b[0]&&a<=b[1]};a.notbetween=function(a,b){return null==a||null==
b[0]||null==b[1]?null:a<b[0]||a>b[1]};a.ternaryNot=function(a){return x(a)};a.ternaryAnd=function(a,b){return c(a,b)};a.ternaryOr=function(a,b){return d(a,b)};return a}();v=function(){function e(a,b){this.fieldsIndex=b;this.datefields={};this.parameters={};this.parseTree=l.WhereGrammar.parse(a);a=this.extractExpressionInfo(b);b=a.isStandardized;var c=a.isAggregate;this.referencedFieldNames=a.referencedFieldNames;this.isStandardized=b;this.isAggregate=c}e.create=function(a,b){return new e(a,b)};Object.defineProperty(e.prototype,
"fieldNames",{get:function(){return this.referencedFieldNames},enumerable:!1,configurable:!0});e.prototype.testSet=function(b,c){void 0===c&&(c=a.defaultAttributeAdapter);for(var d={},e=function(a){d[a]=b.map(function(b){return c.getAttribute(b,a)})},h=0,l=this.fieldNames;h<l.length;h++)e(l[h]);return!!this.evaluateNode(this.parseTree,{attributes:d},a.defaultAttributeAdapter)};e.prototype.calculateValue=function(c,d){void 0===d&&(d=a.defaultAttributeAdapter);c=this.evaluateNode(this.parseTree,c,d);
return c instanceof b.SqlInterval?c.valueInMilliseconds()/864E5:c};e.prototype.calculateValueCompiled=function(b,c){void 0===c&&(c=a.defaultAttributeAdapter);if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(b,this.parameters,c,this.datefields);if(q("csp-restrictions"))return this.calculateValue(b,c);this.compileMe();return this.parseTree._compiledVersion(b,this.parameters,c,this.datefields)};e.prototype.testFeature=function(b,c){void 0===c&&(c=a.defaultAttributeAdapter);
return!!this.evaluateNode(this.parseTree,b,c)};e.prototype.testFeatureCompiled=function(b,c){void 0===c&&(c=a.defaultAttributeAdapter);if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(b,this.parameters,c,this.datefields);if(q("csp-restrictions"))return this.testFeature(b,c);this.compileMe();return!!this.parseTree._compiledVersion(b,this.parameters,c,this.datefields)};e.prototype.getFunctions=function(){var a=[];this.visitAll(this.parseTree,function(b){"function"===
b.type&&a.push(b.name.toLowerCase())});return I(a)};e.prototype.getExpressions=function(){var a=new Map;this.visitAll(this.parseTree,function(b){if("function"===b.type){var c=b.name.toLowerCase();b=b.args.value[0];if("column_ref"===b.type){b=b.column;var d=c+"-"+b;a.has(d)||a.set(d,{aggregateType:c,field:b})}}});return p.valuesOfMap(a)};e.prototype.getVariables=function(){var a=[];this.visitAll(this.parseTree,function(b){"param"===b.type&&a.push(b.value.toLowerCase())});return I(a)};e.prototype.compileMe=
function(){var a="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",a)).bind(E)};e.prototype.extractExpressionInfo=function(a){var c=this,d=[],e=!0,l=!0;this.visitAll(this.parseTree,function(g){switch(g.type){case "column_ref":var n=a.get(g.column),m=n&&n.name;!n||"date"!==n.type&&"esriFieldTypeDate"!==n.type||(c.datefields[n.name]=1);void 0!==m?(d.push(m),g.column=m):d.push(g.column);
break;case "function":n=g.name,g=g.args.value.length,e&&(e=b.isStandardized(n,g)),l&&(l=h.isAggregate(n,g))}});return{referencedFieldNames:I(d),isStandardized:e,isAggregate:l}};e.prototype.visitAll=function(a,b){if(null!=a)switch(b(a),a.type){case "when_clause":this.visitAll(a.operand,b);this.visitAll(a.value,b);break;case "case_expression":for(var c=0,d=a.clauses;c<d.length;c++){var e=d[c];this.visitAll(e,b)}"simple"===a.format&&this.visitAll(a.operand,b);null!==a.else&&this.visitAll(a.else,b);break;
case "expr_list":c=0;for(a=a.value;c<a.length;c++)e=a[c],this.visitAll(e,b);break;case "unary_expr":this.visitAll(a.expr,b);break;case "binary_expr":this.visitAll(a.left,b);this.visitAll(a.right,b);break;case "function":this.visitAll(a.args,b)}};e.prototype.evaluateNodeToJavaScript=function(a){switch(a.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(a.value)+", "+JSON.stringify(a.qualifier)+","+JSON.stringify(a.op)+")";case "case_expression":var b="";if("simple"===
a.format)for(var c="this.makeComparable("+this.evaluateNodeToJavaScript(a.operand)+")",b="( ",d=0;d<a.clauses.length;d++)b+=" ("+c+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(a.clauses[d].operand)+")) ? ("+this.evaluateNodeToJavaScript(a.clauses[d].value)+") : ";else for(b="( ",d=0;d<a.clauses.length;d++)b+=" this.makeBool("+this.evaluateNodeToJavaScript(a.clauses[d].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(a.clauses[d].value)+") : ";b=null!==a.else?b+
this.evaluateNodeToJavaScript(a.else):b+"null";return b+" )";case "param":return"this.lookup("+JSON.stringify(a.value.toLowerCase())+",lookups)";case "expr_list":b="[";c=0;for(a=a.value;c<a.length;c++)d=a[c],"["!==b&&(b+=","),b+=this.evaluateNodeToJavaScript(d);return b+"]";case "unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(a.expr)+")";case "binary_expr":switch(a.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(a.left)+","+this.evaluateNodeToJavaScript(a.right)+
" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(a.left)+","+this.evaluateNodeToJavaScript(a.right)+" )";case "IS":if("null"!==a.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(a.left)+")";case "ISNOT":if("null"!==a.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(a.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(a.left)+",this.ensureArray("+
this.evaluateNodeToJavaScript(a.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(a.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(a.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(a.left)+","+this.evaluateNodeToJavaScript(a.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(a.left)+","+this.evaluateNodeToJavaScript(a.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(a.left)+
","+this.evaluateNodeToJavaScript(a.right)+","+JSON.stringify(a.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(a.left)+","+this.evaluateNodeToJavaScript(a.right)+","+JSON.stringify(a.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(a.operator)+","+this.evaluateNodeToJavaScript(a.left)+","+this.evaluateNodeToJavaScript(a.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+
JSON.stringify(a.operator)+","+this.evaluateNodeToJavaScript(a.left)+","+this.evaluateNodeToJavaScript(a.right)+")"}throw Error("Not Supported Operator "+a.operator);case "null":case "bool":case "string":case "number":return JSON.stringify(a.value);case "date":return"(new Date("+u(a.value).getTime().toString()+"))";case "timestamp":return"(new Date("+r(a.value).getTime().toString()+"))";case "current_time":return"date"===a.mode?"this.currentDate()":"this.currentTimestamp()";case "column_ref":return"this.featureValue(feature,"+
JSON.stringify(a.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(a.name)+","+this.evaluateNodeToJavaScript(a.args)+")"}throw Error("Unsupported sql syntax "+a.type);};e.prototype.evaluateNode=function(a,e,l){switch(a.type){case "interval":return e=this.evaluateNode(a.value,e,l),b.SqlInterval.createFromValueAndQualifer(e,a.qualifier,a.op);case "case_expression":if("simple"===a.format)for(var n=G(this.evaluateNode(a.operand,e,l)),m=0;m<a.clauses.length;m++){if(n===
G(this.evaluateNode(a.clauses[m].operand,e,l)))return this.evaluateNode(a.clauses[m].value,e,l)}else for(m=0;m<a.clauses.length;m++)if(!0===this.evaluateNode(a.clauses[m].operand,e,l))return this.evaluateNode(a.clauses[m].value,e,l);return null!==a.else?this.evaluateNode(a.else,e,l):null;case "param":return this.parameters[a.value.toLowerCase()];case "expr_list":n=[];m=0;for(a=a.value;m<a.length;m++)n.push(this.evaluateNode(a[m],e,l));return n;case "unary_expr":return x(this.evaluateNode(a.expr,e,
l));case "binary_expr":switch(a.operator){case "AND":return c(this.evaluateNode(a.left,e,l),this.evaluateNode(a.right,e,l));case "OR":return d(this.evaluateNode(a.left,e,l),this.evaluateNode(a.right,e,l));case "IS":if("null"!==a.right.type)throw Error("Unsupported RHS for IS");return null===this.evaluateNode(a.left,e,l);case "ISNOT":if("null"!==a.right.type)throw Error("Unsupported RHS for IS");return null!==this.evaluateNode(a.left,e,l);case "IN":return n=g(this.evaluateNode(a.right,e,l)),H(this.evaluateNode(a.left,
e,l),n);case "NOT IN":return n=g(this.evaluateNode(a.right,e,l)),x(H(this.evaluateNode(a.left,e,l),n));case "BETWEEN":return n=this.evaluateNode(a.left,e,l),a=this.evaluateNode(a.right,e,l),null==n||null==a[0]||null==a[1]?null:n>=G(a[0])&&n<=G(a[1]);case "NOTBETWEEN":return n=this.evaluateNode(a.left,e,l),a=this.evaluateNode(a.right,e,l),null==n||null==a[0]||null==a[1]?null:n<G(a[0])||n>G(a[1]);case "LIKE":return F(this.evaluateNode(a.left,e,l),this.evaluateNode(a.right,e,l),a.escape);case "NOT LIKE":return x(F(this.evaluateNode(a.left,
e,l),this.evaluateNode(a.right,e,l),a.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return t(a.operator,this.evaluateNode(a.left,e,l),this.evaluateNode(a.right,e,l));case "-":case "+":case "*":case "/":return L(a.operator,this.evaluateNode(a.left,e,l),this.evaluateNode(a.right,e,l))}case "null":case "bool":case "string":case "number":return a.value;case "date":return u(a.value);case "timestamp":return r(a.value);case "current_time":return e=new Date,
"date"===a.mode&&e.setHours(0,0,0,0),e;case "column_ref":return J(e,a.column,this.datefields,l);case "function":return e=this.evaluateNode(a.args,e,l),this.isAggregate?h.aggregateFunction(a.name,e):b.evaluateFunction(a.name,e)}throw Error("Unsupported sql syntax "+a.type);};return e}();a.WhereClause=v;a.defaultAttributeAdapter={getAttribute:function(a,b){return(a&&"object"===typeof a.attributes?a.attributes:a)[b]}}})},"esri/core/sql/AggregateFunctions":function(){define(["require","exports"],function(v,
a){function q(a){for(var b=0,e=0;e<a.length;e++)b+=a[e];return b/a.length}function p(a){for(var b=q(a),e=a.length,h=0,r=0;r<a.length;r++)h+=Math.pow(a[r]-b,2);return 1<e?h/(e-1):0}Object.defineProperty(a,"__esModule",{value:!0});a.isAggregate=a.aggregateFunction=void 0;a.aggregateFunction=function(a,l){var b=h[a.toLowerCase()];if(null==b)throw Error("Function Not Recognised");if(l.length<b.minParams||l.length>b.maxParams)throw Error("Invalid Parameter count for call to "+a.toUpperCase());return b.evaluate(l)};
a.isAggregate=function(a,l){a=h[a.toLowerCase()];return null!=a&&l>=a.minParams&&l<=a.maxParams};var h={min:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.min.apply(Math,a[0])}},max:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.max.apply(Math,a[0])}},avg:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:q(a[0])}},sum:{minParams:1,maxParams:1,evaluate:function(a){if(null==a[0])a=null;else{a=a[0];for(var b=0,e=0;e<a.length;e++)b+=
a[e];a=b}return a}},stddev:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.sqrt(p(a[0]))}},count:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:a[0].length}},var:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:p(a[0])}}}})},"esri/core/sql/StandardizedFunctions":function(){define(["require","exports","../string"],function(v,a,q){Object.defineProperty(a,"__esModule",{value:!0});a.isStandardized=a.evaluateFunction=a.SqlInterval=void 0;
v=function(){function a(){this.op="+";this.minute=this.year=this.month=this.hour=this.second=this.day=0}a.fixDefaults=function(a){if(null!==a.precision||null!==a.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};a.createFromMilliseconds=function(b){var h=new a;h.second=b/1E3;return h};a.createFromValueAndQualifer=function(b,h,e){var l=null,r=new a;r.op="-"===e?"-":"+";if("interval-period"===h.type){a.fixDefaults(h);if("year"===h.period||"month"===h.period)throw Error("Year-Month Intervals not supported");
if(/^[0-9]{1,}$/.test(b))r[h.period]=parseFloat(b);else throw Error("Illegal Interval");}else{a.fixDefaults(h.start);a.fixDefaults(h.end);if("year"===h.start.period||"month"===h.start.period)throw Error("Year-Month Intervals not supported");if("year"===h.end.period||"month"===h.end.period)throw Error("Year-Month Intervals not supported");switch(h.start.period){case "day":switch(h.end.period){case "hour":l=/^[0-9]{1,} [0-9]{1,}$/;if(l.test(b))r[h.start.period]=parseFloat(b.split(" ")[0]),r[h.end.period]=
parseFloat(b.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":l=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(l.test(b))r[h.start.period]=parseFloat(b.split(" ")[0]),b=b.split(" ")[1].split(":"),r.hour=parseFloat(b[0]),r.minute=parseFloat(b[1]);else throw Error("Illegal Interval");break;case "second":l=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(l.test(b))r[h.start.period]=parseFloat(b.split(" ")[0]),b=b.split(" ")[1].split(":"),r.hour=parseFloat(b[0]),r.minute=
parseFloat(b[1]),r.second=parseFloat(b[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "hour":switch(h.end.period){case "minute":l=/^[0-9]{1,}:[0-9]{1,}$/;if(l.test(b))r.hour=parseFloat(b.split(":")[0]),r.minute=parseFloat(b.split(":")[1]);else throw Error("Illegal Interval");break;case "second":l=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(l.test(b))b=b.split(":"),r.hour=parseFloat(b[0]),r.minute=parseFloat(b[1]),r.second=parseFloat(b[2]);
else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "minute":switch(h.end.period){case "second":l=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(l.test(b))b=b.split(":"),r.minute=parseFloat(b[0]),r.second=parseFloat(b[1]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;default:throw"Invalid Interval.";}}return r};a.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+
864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return a}();a.SqlInterval=v;a.evaluateFunction=function(a,b){var h=p[a.toLowerCase()];if(null==h)throw Error("Function Not Recognised");if(b.length<h.minParams||b.length>h.maxParams)throw Error("Invalid Parameter count for call to "+a.toUpperCase());return h.evaluate(b)};a.isStandardized=function(a,b){a=p[a.toLowerCase()];return null!=a&&b>=a.minParams&&b<=a.maxParams};var p={extract:{minParams:2,maxParams:2,evaluate:function(a){var b=a[0];
a=a[1];if(null==a)return null;if(a instanceof Date)switch(b.toUpperCase()){case "SECOND":return a.getSeconds();case "MINUTE":return a.getMinutes();case "HOUR":return a.getHours();case "DAY":return a.getDate();case "MONTH":return a.getMonth()+1;case "YEAR":return a.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:function(a){if(2===a.length){var b=a[0],h=a[1];return null==b||null==h?null:b.toString().substring(h-1)}if(3===a.length)return b=
a[0],h=a[1],a=a[2],null==b||null==h||null==a?null:0>=a?"":b.toString().substring(h-1,h+a-1)}},position:{minParams:2,maxParams:2,evaluate:function(a){var b=a[0];a=a[1];return null==b||null==a?null:a.indexOf(b)+1}},trim:{minParams:2,maxParams:3,evaluate:function(a){var b=3===a.length,h=b?a[1]:" ",b=b?a[2]:a[1];if(null==h||null==b)return null;h="("+q.escapeRegExpString(h)+")";switch(a[0]){case "BOTH":return b.replace(new RegExp("^"+h+"*|"+h+"*$","g"),"");case "LEADING":return b.replace(new RegExp("^"+
h+"*","g"),"");case "TRAILING":return b.replace(new RegExp(h+"*$","g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.abs(a[0])}},ceiling:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.ceil(a[0])}},floor:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.floor(a[0])}},log:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.log(a[0])}},log10:{minParams:1,
maxParams:1,evaluate:function(a){return null==a[0]?null:Math.log(a[0])*Math.LOG10E}},sin:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.sin(a[0])}},cos:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.cos(a[0])}},tan:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.tan(a[0])}},asin:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.asin(a[0])}},acos:{minParams:1,maxParams:1,evaluate:function(a){return null==
a[0]?null:Math.acos(a[0])}},atan:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.atan(a[0])}},sign:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:0<a[0]?1:0>a[1]?-1:0}},power:{minParams:2,maxParams:2,evaluate:function(a){return null==a[0]||null==a[1]?null:Math.pow(a[0],a[1])}},mod:{minParams:2,maxParams:2,evaluate:function(a){return null==a[0]||null==a[1]?null:a[0]%a[1]}},round:{minParams:1,maxParams:2,evaluate:function(a){var b=a[0];a=2===a.length?
Math.pow(10,a[1]):1;return null==b?null:Math.round(b*a)/a}},truncate:{minParams:1,maxParams:2,evaluate:function(a){return null==a[0]?null:1===a.length?parseInt(a[0].toFixed(0),10):parseFloat(a[0].toFixed(a[1]))}},char_length:{minParams:1,maxParams:1,evaluate:function(a){return"string"===typeof a[0]||a[0]instanceof String?a[0].length:0}},concat:{minParams:1,maxParams:Infinity,evaluate:function(a){for(var b="",l=0;l<a.length;l++){if(null==a[l])return null;b+=a[l].toString()}return b}},lower:{minParams:1,
maxParams:1,evaluate:function(a){return null==a[0]?null:a[0].toString().toLowerCase()}},upper:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:a[0].toString().toUpperCase()}}}})},"esri/core/sql/WhereGrammar":function(){define(["require","exports","./sql92grammar"],function(v,a,q){Object.defineProperty(a,"__esModule",{value:!0});a.WhereGrammar=void 0;v=function(){function a(){}a.parse=function(a){return q.parse(a)};return a}();a.WhereGrammar=v})},"esri/core/sql/sql92grammar":function(){(function(v,
a){"function"===typeof define&&define.amd?define([],a):"object"===typeof module&&module.exports&&(module.exports=a())})(this,function(){function v(a,q,p,h){this.message=a;this.expected=q;this.found=p;this.location=h;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,v)}(function(a,q){function p(){this.constructor=a}p.prototype=q.prototype;a.prototype=new p})(v,Error);v.buildMessage=function(a,q){function p(a){return a.charCodeAt(0).toString(16).toUpperCase()}
function h(a){return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(a){return"\\x0"+p(a)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(a){return"\\x"+p(a)})}function b(a){return a.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(a){return"\\x0"+
p(a)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(a){return"\\x"+p(a)})}var l={literal:function(a){return'"'+h(a.text)+'"'},"class":function(a){var e="",l;for(l=0;l<a.parts.length;l++)e+=a.parts[l]instanceof Array?b(a.parts[l][0])+"-"+b(a.parts[l][1]):b(a.parts[l]);return"["+(a.inverted?"^":"")+e+"]"},any:function(a){return"any character"},end:function(a){return"end of input"},other:function(a){return a.description}};return"Expected "+function(a){var b=Array(a.length),e;for(e=0;e<a.length;e++){var h=
e,g;g=a[e];g=l[g.type](g);b[h]=g}b.sort();if(0<b.length){for(a=e=1;e<b.length;e++)b[e-1]!==b[e]&&(b[a]=b[e],a++);b.length=a}switch(b.length){case 1:return b[0];case 2:return b[0]+" or "+b[1];default:return b.slice(0,-1).join(", ")+", or "+b[b.length-1]}}(a)+" but "+(q?'"'+h(q)+'"':"end of input")+" found."};return{SyntaxError:v,parse:function(a,q){function p(a,b){return{type:"literal",text:a,ignoreCase:b}}function h(a,b,c){return{type:"class",parts:a,inverted:b,ignoreCase:c}}function b(b){var c=La[b],
f;if(!c){for(f=b-1;!La[f];)f--;c=La[f];for(c={line:c.line,column:c.column};f<b;)10===a.charCodeAt(f)?(c.line++,c.column=1):c.column++,f++;La[b]=c}return c}function l(a,c){var f=b(a),d=b(c);return{start:{offset:a,line:f.line,column:f.column},end:{offset:c,line:d.line,column:d.column}}}function e(a){k<na||(k>na&&(na=k,Ma=[]),Ma.push(a))}function m(){var a,b,c;a=k;b=B();b!==f?(b=u(),b!==f?(c=B(),c!==f?a=b:(k=a,a=f)):(k=a,a=f)):(k=a,a=f);return a}function r(){var a,b,c,d,e,l,g,h;a=k;b=u();if(b!==f){c=
[];d=k;e=B();e!==f?(l=ja(),l!==f?(g=B(),g!==f?(h=u(),h!==f?d=e=[e,l,g,h]:(k=d,d=f)):(k=d,d=f)):(k=d,d=f)):(k=d,d=f);for(;d!==f;)c.push(d),d=k,e=B(),e!==f?(l=ja(),l!==f?(g=B(),g!==f?(h=u(),h!==f?d=e=[e,l,g,h]:(k=d,d=f)):(k=d,d=f)):(k=d,d=f)):(k=d,d=f);if(c!==f){a={type:"expr_list"};b=[b];for(d=0;d<c.length;d++)b.push(c[d][3]);a.value=b}else k=a,a=f}else k=a,a=f;return a}function u(){var a,b,c,d,e,l,h,n;a=k;b=g();if(b!==f){c=[];d=k;e=B();e!==f?(l=ga(),l!==f?(h=B(),h!==f?(n=g(),n!==f?d=e=[e,l,h,n]:(k=
d,d=f)):(k=d,d=f)):(k=d,d=f)):(k=d,d=f);for(;d!==f;)c.push(d),d=k,e=B(),e!==f?(l=ga(),l!==f?(h=B(),h!==f?(n=g(),n!==f?d=e=[e,l,h,n]:(k=d,d=f)):(k=d,d=f)):(k=d,d=f)):(k=d,d=f);c!==f?a=b=Ba(b,c):(k=a,a=f)}else k=a,a=f;return a}function g(){var a,b,c,d,e,l,g,h;a=k;b=x();if(b!==f){c=[];d=k;e=B();e!==f?(l=S(),l!==f?(g=B(),g!==f?(h=x(),h!==f?d=e=[e,l,g,h]:(k=d,d=f)):(k=d,d=f)):(k=d,d=f)):(k=d,d=f);for(;d!==f;)c.push(d),d=k,e=B(),e!==f?(l=S(),l!==f?(g=B(),g!==f?(h=x(),h!==f?d=e=[e,l,g,h]:(k=d,d=f)):(k=d,
d=f)):(k=d,d=f)):(k=d,d=f);c!==f?a=b=Ba(b,c):(k=a,a=f)}else k=a,a=f;return a}function x(){var b,l,g,h,n;b=k;l=da();l===f&&(l=k,33===a.charCodeAt(k)?(g=ad,k++):(g=f,0===z&&e(bd)),g!==f?(h=k,z++,61===a.charCodeAt(k)?(n=lb,k++):(n=f,0===z&&e(mb)),z--,n===f?h=void 0:(k=h,h=f),h!==f?l=g=[g,h]:(k=l,l=f)):(k=l,l=f));l!==f?(g=B(),g!==f?(h=x(),h!==f?b=l={type:"unary_expr",operator:"NOT",expr:h}:(k=b,b=f)):(k=b,b=f)):(k=b,b=f);if(b===f)if(b=k,l=F(),l!==f)if(g=B(),g!==f){var y,m,E;g=[];h=k;n=B();n!==f?(y=c(),
y!==f?(m=B(),m!==f?(E=F(),E!==f?h=n=[n,y,m,E]:(k=h,h=f)):(k=h,h=f)):(k=h,h=f)):(k=h,h=f);if(h!==f)for(;h!==f;)g.push(h),h=k,n=B(),n!==f?(y=c(),y!==f?(m=B(),m!==f?(E=F(),E!==f?h=n=[n,y,m,E]:(k=h,h=f)):(k=h,h=f)):(k=h,h=f)):(k=h,h=f);else g=f;g!==f&&(g={type:"arithmetic",tail:g});g===f&&(g=k,h=H(),h!==f?(n=B(),n!==f?(n=ca(),n!==f?(n=B(),n!==f?(n=r(),n!==f?(y=B(),y!==f?(y=fa(),y!==f?g=h={op:h,right:n}:(k=g,g=f)):(k=g,g=f)):(k=g,g=f)):(k=g,g=f)):(k=g,g=f)):(k=g,g=f)):(k=g,g=f),g===f&&(g=k,h=H(),h!==f?
(n=B(),n!==f?(n=ca(),n!==f?(n=B(),n!==f?(n=fa(),n!==f?g=h={op:h,right:{type:"expr_list",value:[]}}:(k=g,g=f)):(k=g,g=f)):(k=g,g=f)):(k=g,g=f)):(k=g,g=f),g===f&&(g=k,h=H(),h!==f?(n=B(),n!==f?(n=O(),n!==f?g=h={op:h,right:n}:(k=g,g=f)):(k=g,g=f)):(k=g,g=f))),g===f&&(g=k,n=da(),n!==f?(h=B(),h!==f?(h=va(),h!==f?(y=B(),y!==f?(y=F(),y!==f?(m=B(),m!==f?(m=S(),m!==f?(n=B(),n!==f?(n=F(),n!==f?g=n={op:"NOT"+h,right:{type:"expr_list",value:[y,n]}}:(k=g,g=f)):(k=g,g=f)):(k=g,g=f)):(k=g,g=f)):(k=g,g=f)):(k=g,g=
f)):(k=g,g=f)):(k=g,g=f)):(k=g,g=f),g===f&&(g=k,n=va(),n!==f?(h=B(),h!==f?(h=F(),h!==f?(y=B(),y!==f?(y=S(),y!==f?(m=B(),m!==f?(m=F(),m!==f?g=n={op:n,right:{type:"expr_list",value:[h,m]}}:(k=g,g=f)):(k=g,g=f)):(k=g,g=f)):(k=g,g=f)):(k=g,g=f)):(k=g,g=f)):(k=g,g=f)),g===f&&(g=k,h=Z(),h!==f?(n=B(),n!==f?(n=da(),n!==f?(n=B(),n!==f?(n=F(),n!==f?g=h={op:h+"NOT",right:n}:(k=g,g=f)):(k=g,g=f)):(k=g,g=f)):(k=g,g=f)):(k=g,g=f),g===f&&(g=k,h=Z(),h!==f?(n=B(),n!==f?(n=F(),n!==f?g=h={op:h,right:n}:(k=g,g=f)):(k=
g,g=f)):(k=g,g=f)),g===f&&(g=k,h=d(),h!==f?(n=B(),n!==f?(n=D(),n!==f?(y=B(),y!==f?(y=k,a.substr(k,6).toLowerCase()===cd?(m=a.substr(k,6),k+=6):(m=f,0===z&&e(dd)),m!==f?(m=k,z++,E=C(),z--,E===f?m=void 0:(k=m,m=f),m!==f?y="ESCAPE":(k=y,y=f)):(k=y,y=f),y!==f?(y=B(),y!==f?(y=K(),y!==f?g=h={op:h,right:n,escape:y.value}:(k=g,g=f)):(k=g,g=f)):(k=g,g=f)):(k=g,g=f)):(k=g,g=f)):(k=g,g=f)):(k=g,g=f),g===f&&(g=k,h=d(),h!==f?(n=B(),n!==f?(n=D(),n!==f?g=h={op:h,right:n,escape:""}:(k=g,g=f)):(k=g,g=f)):(k=g,g=f))))));
g===f&&(g=null);g!==f?(b=l,l=g,""==l||void 0==l||null==l?l=b:(g=null,l=g="arithmetic"==l.type?Ba(b,l.tail):Ka(l.op,b,l.right,l.escape)),b=l):(k=b,b=f)}else k=b,b=f;else k=b,b=f;return b}function c(){var b;a.substr(k,2)===nb?(b=nb,k+=2):(b=f,0===z&&e(ed));b===f&&(62===a.charCodeAt(k)?(b=fd,k++):(b=f,0===z&&e(gd)),b===f&&(a.substr(k,2)===ob?(b=ob,k+=2):(b=f,0===z&&e(hd)),b===f&&(a.substr(k,2)===pb?(b=pb,k+=2):(b=f,0===z&&e(id)),b===f&&(60===a.charCodeAt(k)?(b=jd,k++):(b=f,0===z&&e(kd)),b===f&&(61===
a.charCodeAt(k)?(b=lb,k++):(b=f,0===z&&e(mb)),b===f&&(a.substr(k,2)===qb?(b=qb,k+=2):(b=f,0===z&&e(ld))))))));return b}function d(){var a,b,c,d;a=a=k;b=da();b!==f?(c=B(),c!==f?(d=P(),d!==f?a=b=[b,c,d]:(k=a,a=f)):(k=a,a=f)):(k=a,a=f);a!==f&&(a=a[0]+" "+a[2]);a===f&&(a=P());return a}function H(){var a,b,c,d;a=a=k;b=da();b!==f?(c=B(),c!==f?(d=oa(),d!==f?a=b=[b,c,d]:(k=a,a=f)):(k=a,a=f)):(k=a,a=f);a!==f&&(a=a[0]+" "+a[2]);a===f&&(a=oa());return a}function F(){var a,b,c,d,e,g,h,l;a=k;b=t();if(b!==f){c=
[];d=k;e=B();e!==f?(g=G(),g!==f?(h=B(),h!==f?(l=t(),l!==f?d=e=[e,g,h,l]:(k=d,d=f)):(k=d,d=f)):(k=d,d=f)):(k=d,d=f);for(;d!==f;)c.push(d),d=k,e=B(),e!==f?(g=G(),g!==f?(h=B(),h!==f?(l=t(),l!==f?d=e=[e,g,h,l]:(k=d,d=f)):(k=d,d=f)):(k=d,d=f)):(k=d,d=f);c!==f?a=b=Ba(b,c):(k=a,a=f)}else k=a,a=f;return a}function G(){var b;43===a.charCodeAt(k)?(b=gc,k++):(b=f,0===z&&e(hc));b===f&&(45===a.charCodeAt(k)?(b=ic,k++):(b=f,0===z&&e(jc)));return b}function t(){var a,b,c,d,e,g,h,l;a=k;b=L();if(b!==f){c=[];d=k;e=
B();e!==f?(g=I(),g!==f?(h=B(),h!==f?(l=L(),l!==f?d=e=[e,g,h,l]:(k=d,d=f)):(k=d,d=f)):(k=d,d=f)):(k=d,d=f);for(;d!==f;)c.push(d),d=k,e=B(),e!==f?(g=I(),g!==f?(h=B(),h!==f?(l=L(),l!==f?d=e=[e,g,h,l]:(k=d,d=f)):(k=d,d=f)):(k=d,d=f)):(k=d,d=f);c!==f?a=b=Ba(b,c):(k=a,a=f)}else k=a,a=f;return a}function I(){var b;42===a.charCodeAt(k)?(b=md,k++):(b=f,0===z&&e(nd));b===f&&(47===a.charCodeAt(k)?(b=od,k++):(b=f,0===z&&e(pd)));return b}function L(){var b,c,d,g,h,l,n;n=K();if(n===f){var m,A,t,p;m=k;var w,q,I,
x;w=k;q=Ja();q!==f?(I=Ya(),I!==f?(x=Za(),x!==f?w=q=parseFloat(q+I+x):(k=w,w=f)):(k=w,w=f)):(k=w,w=f);w===f&&(w=k,q=Ja(),q!==f?(I=Ya(),I!==f?w=q=parseFloat(q+I):(k=w,w=f)):(k=w,w=f),w===f&&(w=k,q=Ja(),q!==f?(I=Za(),I!==f?w=q=parseFloat(q+I):(k=w,w=f)):(k=w,w=f),w===f&&(w=k,q=Ja(),q!==f&&(q=parseFloat(q)),w=q)));A=w;A!==f?(t=k,z++,p=R(),z--,p===f?t=void 0:(k=t,t=f),t!==f?m=A={type:"number",value:A}:(k=m,m=f)):(k=m,m=f);n=m;if(n===f){var L,v;L=k;var G,F,H,ea;G=k;a.substr(k,4).toLowerCase()===qd?(F=a.substr(k,
4),k+=4):(F=f,0===z&&e(rd));F!==f?(H=k,z++,ea=C(),z--,ea===f?H=void 0:(k=H,H=f),H!==f?G=F=[F,H]:(k=G,G=f)):(k=G,G=f);v=G;v!==f&&(v={type:"bool",value:!0});L=v;if(L===f){L=k;var P,T,S,va;P=k;a.substr(k,5).toLowerCase()===sd?(T=a.substr(k,5),k+=5):(T=f,0===z&&e(td));T!==f?(S=k,z++,va=C(),z--,va===f?S=void 0:(k=S,S=f),S!==f?P=T=[T,S]:(k=P,P=f)):(k=P,P=f);v=P;v!==f&&(v={type:"bool",value:!1});L=v}n=L;if(n===f){var da,Z,ga,aa,ja;Z=k;a.substr(k,4).toLowerCase()===ud?(ga=a.substr(k,4),k+=4):(ga=f,0===z&&
e(vd));ga!==f?(aa=k,z++,ja=C(),z--,ja===f?aa=void 0:(k=aa,aa=f),aa!==f?Z=ga=[ga,aa]:(k=Z,Z=f)):(k=Z,Z=f);da=Z;da!==f&&(da={type:"null",value:null});n=da;if(n===f){var ba,na,xa,Ba;ba=k;var Na,Ka,rb,La;Na=k;a.substr(k,4).toLowerCase()===wd?(Ka=a.substr(k,4),k+=4):(Ka=f,0===z&&e(xd));Ka!==f?(rb=k,z++,La=C(),z--,La===f?rb=void 0:(k=rb,rb=f),rb!==f?Na=Ka="DATE":(k=Na,Na=f)):(k=Na,Na=f);na=Na;na!==f?(xa=B(),xa!==f?(Ba=D(),Ba!==f?ba=na={type:"date",value:Ba.value}:(k=ba,ba=f)):(k=ba,ba=f)):(k=ba,ba=f);n=
ba;if(n===f){var Ca,Ga,Ua,Ma;Ca=k;var Oa,Lb,sb,kb;Oa=k;a.substr(k,9).toLowerCase()===yd?(Lb=a.substr(k,9),k+=9):(Lb=f,0===z&&e(zd));Lb!==f?(sb=k,z++,kb=C(),z--,kb===f?sb=void 0:(k=sb,sb=f),sb!==f?Oa=Lb="TIMESTAMP":(k=Oa,Oa=f)):(k=Oa,Oa=f);Ga=Oa;Ga!==f?(Ua=B(),Ua!==f?(Ma=D(),Ma!==f?Ca=Ga={type:"timestamp",value:Ma.value}:(k=Ca,Ca=f)):(k=Ca,Ca=f)):(k=Ca,Ca=f);n=Ca;if(n===f){var U,$a,Mb,ya,Nb,ab,lb,kc;U=k;$a=Da();$a!==f?(Mb=B(),Mb!==f?(45===a.charCodeAt(k)?(ya=ic,k++):(ya=f,0===z&&e(jc)),ya===f&&(43===
a.charCodeAt(k)?(ya=gc,k++):(ya=f,0===z&&e(hc))),ya!==f?(Nb=B(),Nb!==f?(ab=D(),ab!==f?(lb=B(),lb!==f?(kc=E(),kc!==f?U=$a={type:"interval",value:ab,qualifier:kc,op:ya}:(k=U,U=f)):(k=U,U=f)):(k=U,U=f)):(k=U,U=f)):(k=U,U=f)):(k=U,U=f)):(k=U,U=f);U===f&&(U=k,$a=Da(),$a!==f?(Mb=B(),Mb!==f?(ya=D(),ya!==f?(Nb=B(),Nb!==f?(ab=E(),ab!==f?U=$a={type:"interval",value:ya,qualifier:ab,op:""}:(k=U,U=f)):(k=U,U=f)):(k=U,U=f)):(k=U,U=f)):(k=U,U=f));n=U}}}}}}b=n;if(b===f){var X,lc,mb,nb,ob,mc,pb,qb,Cb,nc,Db,Eb;X=k;
var Pa,Ob,tb,Fb;Pa=k;a.substr(k,7).toLowerCase()===Ad?(Ob=a.substr(k,7),k+=7):(Ob=f,0===z&&e(Bd));Ob!==f?(tb=k,z++,Fb=C(),z--,Fb===f?tb=void 0:(k=tb,tb=f),tb!==f?Pa=Ob="EXTRACT":(k=Pa,Pa=f)):(k=Pa,Pa=f);lc=Pa;if(lc!==f)if(mb=B(),mb!==f)if(nb=ca(),nb!==f)if(ob=B(),ob!==f){var qa;qa=Ha();qa===f&&(qa=ib(),qa===f&&(qa=Va(),qa===f&&(qa=Wa(),qa===f&&(qa=jb(),qa===f&&(qa=wa())))));mc=qa;mc!==f?(pb=B(),pb!==f?(qb=ka(),qb!==f?(Cb=B(),Cb!==f?(nc=u(),nc!==f?(Db=B(),Db!==f?(Eb=fa(),Eb!==f?X=lc={type:"function",
name:"extract",args:{type:"expr_list",value:[{type:"string",value:mc},nc]}}:(k=X,X=f)):(k=X,X=f)):(k=X,X=f)):(k=X,X=f)):(k=X,X=f)):(k=X,X=f)):(k=X,X=f)}else k=X,X=f;else k=X,X=f;else k=X,X=f;else k=X,X=f;b=X;if(b===f){var W,oc,Gb,Hb,Ib,Pb,Jb,Kb,yc,Qb,zc,la,bb,pc,qc,rc;W=k;var Qa,Rb,ub,Ac;Qa=k;a.substr(k,9).toLowerCase()===Cd?(Rb=a.substr(k,9),k+=9):(Rb=f,0===z&&e(Dd));Rb!==f?(ub=k,z++,Ac=C(),z--,Ac===f?ub=void 0:(k=ub,ub=f),ub!==f?Qa=Rb="SUBSTRING":(k=Qa,Qa=f)):(k=Qa,Qa=f);oc=Qa;if(oc!==f)if(Gb=B(),
Gb!==f)if(Hb=ca(),Hb!==f)if(Ib=B(),Ib!==f)if(Pb=u(),Pb!==f)if(Jb=B(),Jb!==f)if(Kb=ka(),Kb!==f)if(yc=B(),yc!==f)if(Qb=u(),Qb!==f)if(zc=B(),zc!==f){la=k;var Ra,Sb,vb,Bc;Ra=k;a.substr(k,3).toLowerCase()===Ed?(Sb=a.substr(k,3),k+=3):(Sb=f,0===z&&e(Fd));Sb!==f?(vb=k,z++,Bc=C(),z--,Bc===f?vb=void 0:(k=vb,vb=f),vb!==f?Ra=Sb="FOR":(k=Ra,Ra=f)):(k=Ra,Ra=f);bb=Ra;bb!==f?(pc=B(),pc!==f?(qc=u(),qc!==f?(rc=B(),rc!==f?la=bb=[bb,pc,qc,rc]:(k=la,la=f)):(k=la,la=f)):(k=la,la=f)):(k=la,la=f);la===f&&(la=null);la!==
f?(bb=fa(),bb!==f?W=oc={type:"function",name:"substring",args:{type:"expr_list",value:la?[Pb,Qb,la[2]]:[Pb,Qb]}}:(k=W,W=f)):(k=W,W=f)}else k=W,W=f;else k=W,W=f;else k=W,W=f;else k=W,W=f;else k=W,W=f;else k=W,W=f;else k=W,W=f;else k=W,W=f;else k=W,W=f;else k=W,W=f;b=W;if(b===f){var N,cb,Tb,Ub,Vb,ra,Wb,db,Xb,Yb,Cc,sc,Dc,Ec;N=k;cb=ha();cb!==f?(Tb=B(),Tb!==f?(Ub=ca(),Ub!==f?(Vb=B(),Vb!==f?(ra=y(),ra===f&&(ra=null),ra!==f?(Wb=B(),Wb!==f?(db=u(),db!==f?(Xb=B(),Xb!==f?(Yb=ka(),Yb!==f?(Cc=B(),Cc!==f?(sc=
u(),sc!==f?(Dc=B(),Dc!==f?(Ec=fa(),Ec!==f?N=cb={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==ra?"BOTH":ra},db,sc]}}:(k=N,N=f)):(k=N,N=f)):(k=N,N=f)):(k=N,N=f)):(k=N,N=f)):(k=N,N=f)):(k=N,N=f)):(k=N,N=f)):(k=N,N=f)):(k=N,N=f)):(k=N,N=f)):(k=N,N=f)):(k=N,N=f);N===f&&(N=k,cb=ha(),cb!==f?(Tb=B(),Tb!==f?(Ub=ca(),Ub!==f?(Vb=B(),Vb!==f?(ra=y(),ra===f&&(ra=null),ra!==f?(Wb=B(),Wb!==f?(db=u(),db!==f?(Xb=B(),Xb!==f?(Yb=fa(),Yb!==f?N=cb={type:"function",name:"trim",args:{type:"expr_list",
value:[{type:"string",value:null==ra?"BOTH":ra},db]}}:(k=N,N=f)):(k=N,N=f)):(k=N,N=f)):(k=N,N=f)):(k=N,N=f)):(k=N,N=f)):(k=N,N=f)):(k=N,N=f)):(k=N,N=f));b=N;if(b===f){var Y,tc,Fc,Gc,Hc,uc,Ic,Jc,Kc,vc,Lc,Mc;Y=k;var Sa,Zb,wb,Nc;Sa=k;a.substr(k,8).toLowerCase()===Gd?(Zb=a.substr(k,8),k+=8):(Zb=f,0===z&&e(Hd));Zb!==f?(wb=k,z++,Nc=C(),z--,Nc===f?wb=void 0:(k=wb,wb=f),wb!==f?Sa=Zb="POSITION":(k=Sa,Sa=f)):(k=Sa,Sa=f);tc=Sa;tc!==f?(Fc=B(),Fc!==f?(Gc=ca(),Gc!==f?(Hc=B(),Hc!==f?(uc=u(),uc!==f?(Ic=B(),Ic!==
f?(Jc=oa(),Jc!==f?(Kc=B(),Kc!==f?(vc=u(),vc!==f?(Lc=B(),Lc!==f?(Mc=fa(),Mc!==f?Y=tc={type:"function",name:"position",args:{type:"expr_list",value:[uc,vc]}}:(k=Y,Y=f)):(k=Y,Y=f)):(k=Y,Y=f)):(k=Y,Y=f)):(k=Y,Y=f)):(k=Y,Y=f)):(k=Y,Y=f)):(k=Y,Y=f)):(k=Y,Y=f)):(k=Y,Y=f)):(k=Y,Y=f);b=Y;if(b===f){var ia,$b,Oc,Pc,Qc,eb,Rc,Sc;ia=k;var sa,xb,yb,za;sa=k;sa=xb=J();if(sa===f)if(sa=k,96===a.charCodeAt(k)?(xb=Tc,k++):(xb=f,0===z&&e(Uc)),xb!==f){yb=[];Vc.test(a.charAt(k))?(za=a.charAt(k),k++):(za=f,0===z&&e(Wc));
if(za!==f)for(;za!==f;)yb.push(za),Vc.test(a.charAt(k))?(za=a.charAt(k),k++):(za=f,0===z&&e(Wc));else yb=f;yb!==f?(96===a.charCodeAt(k)?(za=Tc,k++):(za=f,0===z&&e(Uc)),za!==f?sa=xb=yb.join(""):(k=sa,sa=f)):(k=sa,sa=f)}else k=sa,sa=f;$b=sa;$b!==f?(Oc=B(),Oc!==f?(Pc=ca(),Pc!==f?(Qc=B(),Qc!==f?(eb=r(),eb===f&&(eb=null),eb!==f?(Rc=B(),Rc!==f?(Sc=fa(),Sc!==f?ia=$b={type:"function",name:$b,args:eb?eb:{type:"expr_list",value:[]}}:(k=ia,ia=f)):(k=ia,ia=f)):(k=ia,ia=f)):(k=ia,ia=f)):(k=ia,ia=f)):(k=ia,ia=
f)):(k=ia,ia=f);b=ia;if(b===f){var ac,Q,fb,bc,gb,cc,Ea,ta,zb,Xc,Yc;Q=k;fb=Aa();if(fb!==f)if(bc=B(),bc!==f)if(gb=u(),gb!==f)if(cc=B(),cc!==f){Ea=[];for(ta=Ia();ta!==f;)Ea.push(ta),ta=Ia();Ea!==f?(ta=B(),ta!==f?(zb=pa(),zb!==f?Q=fb={type:"case_expression",format:"simple",operand:gb,clauses:Ea,else:null}:(k=Q,Q=f)):(k=Q,Q=f)):(k=Q,Q=f)}else k=Q,Q=f;else k=Q,Q=f;else k=Q,Q=f;else k=Q,Q=f;if(Q===f)if(Q=k,fb=Aa(),fb!==f)if(bc=B(),bc!==f)if(gb=u(),gb!==f)if(cc=B(),cc!==f){Ea=[];for(ta=Ia();ta!==f;)Ea.push(ta),
ta=Ia();Ea!==f?(ta=B(),ta!==f?(zb=Xa(),zb!==f?(Xc=B(),Xc!==f?(Yc=pa(),Yc!==f?Q=fb={type:"case_expression",format:"simple",operand:gb,clauses:Ea,else:zb.value}:(k=Q,Q=f)):(k=Q,Q=f)):(k=Q,Q=f)):(k=Q,Q=f)):(k=Q,Q=f)}else k=Q,Q=f;else k=Q,Q=f;else k=Q,Q=f;else k=Q,Q=f;ac=Q;if(ac===f){var V,hb,dc,Fa,ua,Ab,Zc,$c;V=k;hb=Aa();if(hb!==f)if(dc=B(),dc!==f){Fa=[];for(ua=ma();ua!==f;)Fa.push(ua),ua=ma();Fa!==f?(ua=B(),ua!==f?(Ab=pa(),Ab!==f?V=hb={type:"case_expression",format:"searched",clauses:Fa,else:null}:
(k=V,V=f)):(k=V,V=f)):(k=V,V=f)}else k=V,V=f;else k=V,V=f;if(V===f)if(V=k,hb=Aa(),hb!==f)if(dc=B(),dc!==f){Fa=[];for(ua=ma();ua!==f;)Fa.push(ua),ua=ma();Fa!==f?(ua=B(),ua!==f?(Ab=Xa(),Ab!==f?(Zc=B(),Zc!==f?($c=pa(),$c!==f?V=hb={type:"case_expression",format:"searched",clauses:Fa,else:Ab.value}:(k=V,V=f)):(k=V,V=f)):(k=V,V=f)):(k=V,V=f)):(k=V,V=f)}else k=V,V=f;else k=V,V=f;ac=V}b=ac;if(b===f){var Bb,Ta,wc,ec,fc;Ta=k;wc=R();if(wc!==f){ec=[];for(fc=M();fc!==f;)ec.push(fc),fc=M();ec!==f?Ta=wc+=ec.join(""):
(k=Ta,Ta=f)}else k=Ta,Ta=f;Bb=Ta;if(Bb!==f){var xc=Bb;Bb=/^CURRENT_DATE$/i.test(xc)?{type:"current_time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(xc)?{type:"current_time",mode:"timestamp"}:{type:"column_ref",table:"",column:xc}}b=Bb;b===f&&(b=O(),b===f&&(b=k,c=ca(),c!==f?(d=B(),d!==f?(g=u(),g!==f?(h=B(),h!==f?(l=fa(),l!==f?(g.paren=!0,b=c=g):(k=b,b=f)):(k=b,b=f)):(k=b,b=f)):(k=b,b=f)):(k=b,b=f)))}}}}}}}return b}function J(){var a,b,c,d;a=k;b=R();if(b!==f){c=[];for(d=C();d!==f;)c.push(d),d=C();c!==
f?a=b+=c.join(""):(k=a,a=f)}else k=a,a=f;return a}function R(){var b;Id.test(a.charAt(k))?(b=a.charAt(k),k++):(b=f,0===z&&e(Jd));return b}function C(){var b;Kd.test(a.charAt(k))?(b=a.charAt(k),k++):(b=f,0===z&&e(Ld));return b}function M(){var b;Md.test(a.charAt(k))?(b=a.charAt(k),k++):(b=f,0===z&&e(Nd));return b}function O(){var b,c,d;b=k;64===a.charCodeAt(k)?(c=Od,k++):(c=f,0===z&&e(Pd));c!==f?(d=J(),d!==f?b=c=[c,d]:(k=b,b=f)):(k=b,b=f);b!==f&&(b={type:"param",value:b[1]});return b}function y(){var b,
c,d;b=k;a.substr(k,7).toLowerCase()===Qd?(c=a.substr(k,7),k+=7):(c=f,0===z&&e(Rd));c!==f?(c=k,z++,d=C(),z--,d===f?c=void 0:(k=c,c=f),c!==f?b="LEADING":(k=b,b=f)):(k=b,b=f);b===f&&(b=k,a.substr(k,8).toLowerCase()===Sd?(c=a.substr(k,8),k+=8):(c=f,0===z&&e(Td)),c!==f?(c=k,z++,d=C(),z--,d===f?c=void 0:(k=c,c=f),c!==f?b="TRAILING":(k=b,b=f)):(k=b,b=f),b===f&&(b=k,a.substr(k,4).toLowerCase()===Ud?(c=a.substr(k,4),k+=4):(c=f,0===z&&e(Vd)),c!==f?(c=k,z++,d=C(),z--,d===f?c=void 0:(k=c,c=f),c!==f?b="BOTH":
(k=b,b=f)):(k=b,b=f)));return b}function E(){var b,c,d;b=k;var g,h;c=k;d=A();d!==f?(g=B(),g!==f?(g=ca(),g!==f?(g=B(),g!==f?(g=w(),g!==f?(h=B(),h!==f?(h=fa(),h!==f?c=d={type:"interval-period",period:d.value,precision:g,secondary:null}:(k=c,c=f)):(k=c,c=f)):(k=c,c=f)):(k=c,c=f)):(k=c,c=f)):(k=c,c=f)):(k=c,c=f);c===f&&(c=k,d=A(),d!==f&&(d=Cb(d)),c=d);if(c!==f)if(d=B(),d!==f)if(d=k,a.substr(k,2).toLowerCase()===Wd?(g=a.substr(k,2),k+=2):(g=f,0===z&&e(Xd)),g!==f?(g=k,z++,h=C(),z--,h===f?g=void 0:(k=g,
g=f),g!==f?d="TO":(k=d,d=f)):(k=d,d=f),d!==f)if(d=B(),d!==f){var l;d=k;g=A();g!==f&&(g={type:"interval-period",period:g.value,precision:null,secondary:null});d=g;d===f&&(d=k,g=wa(),g!==f?(g=B(),g!==f?(g=ca(),g!==f?(g=B(),g!==f?(g=w(),g!==f?(h=B(),h!==f?(h=ja(),h!==f?(h=B(),h!==f?(h=n(),h!==f?(l=B(),l!==f?(l=fa(),l!==f?d=g=Db(g,h):(k=d,d=f)):(k=d,d=f)):(k=d,d=f)):(k=d,d=f)):(k=d,d=f)):(k=d,d=f)):(k=d,d=f)):(k=d,d=f)):(k=d,d=f)):(k=d,d=f)):(k=d,d=f),d===f&&(d=k,g=wa(),g!==f?(g=B(),g!==f?(g=ca(),g!==
f?(g=B(),g!==f?(g=w(),g!==f?(h=B(),h!==f?(h=fa(),h!==f?d=g={type:"interval-period",period:"second",precision:g,secondary:null}:(k=d,d=f)):(k=d,d=f)):(k=d,d=f)):(k=d,d=f)):(k=d,d=f)):(k=d,d=f)):(k=d,d=f),d===f&&(d=k,g=wa(),g!==f&&(g={type:"interval-period",period:"second",precision:null,secondary:null}),d=g)));d!==f?b=c={type:"interval-qualifier",start:c,end:d}:(k=b,b=f)}else k=b,b=f;else k=b,b=f;else k=b,b=f;else k=b,b=f;b===f&&(b=k,d=A(),d!==f?(c=B(),c!==f?(c=ca(),c!==f?(c=B(),c!==f?(c=n(),c!==f?
(g=B(),g!==f?(g=fa(),g!==f?b=d={type:"interval-period",period:d.value,precision:c,secondary:null}:(k=b,b=f)):(k=b,b=f)):(k=b,b=f)):(k=b,b=f)):(k=b,b=f)):(k=b,b=f)):(k=b,b=f),b===f&&(b=k,d=A(),d!==f&&(d=Cb(d)),b=d,b===f&&(b=k,d=wa(),d!==f?(c=B(),c!==f?(c=ca(),c!==f?(c=B(),c!==f?(c=w(),c!==f?(g=B(),g!==f?(g=ja(),g!==f?(d=B(),d!==f?(d=n(),d!==f?(g=B(),g!==f?(g=fa(),g!==f?b=d=Db(c,d):(k=b,b=f)):(k=b,b=f)):(k=b,b=f)):(k=b,b=f)):(k=b,b=f)):(k=b,b=f)):(k=b,b=f)):(k=b,b=f)):(k=b,b=f)):(k=b,b=f)):(k=b,b=f),
b===f&&(b=k,d=wa(),d!==f?(c=B(),c!==f?(c=ca(),c!==f?(c=B(),c!==f?(c=n(),c!==f?(g=B(),g!==f?(g=fa(),g!==f?b=d={type:"interval-period",period:"second",precision:c,secondary:null}:(k=b,b=f)):(k=b,b=f)):(k=b,b=f)):(k=b,b=f)):(k=b,b=f)):(k=b,b=f)):(k=b,b=f),b===f&&(b=k,d=wa(),d!==f&&(d={type:"interval-period",period:"second",precision:null,secondary:null}),b=d)))));return b}function A(){var a;a=k;a=Va();a!==f&&(a={type:"string",value:"day"});a===f&&(a=k,a=Wa(),a!==f&&(a={type:"string",value:"hour"}),a===
f&&(a=k,a=jb(),a!==f&&(a={type:"string",value:"minute"}),a===f&&(a=k,a=ib(),a!==f&&(a={type:"string",value:"month"}),a===f&&(a=k,a=Ha(),a!==f&&(a={type:"string",value:"year"})))));return a}function n(){var a;a=ea();a!==f&&(a=parseFloat(a));return a}function w(){var a;a=ea();a!==f&&(a=parseFloat(a));return a}function D(){var a;a=K();a===f&&(a=O());return a}function K(){var b,c,d;b=k;39===a.charCodeAt(k)?(c=Eb,k++):(c=f,0===z&&e(Fb));c===f&&(a.substr(k,2)===Gb?(c=Gb,k+=2):(c=f,0===z&&e(Yd)));if(c!==
f){c=[];d=k;a.substr(k,2)===Ga?(d=Ga,k+=2):(d=f,0===z&&e(Hb));d!==f&&(d="'");d===f&&(Ib.test(a.charAt(k))?(d=a.charAt(k),k++):(d=f,0===z&&e(Jb)));for(;d!==f;)c.push(d),d=k,a.substr(k,2)===Ga?(d=Ga,k+=2):(d=f,0===z&&e(Hb)),d!==f&&(d="'"),d===f&&(Ib.test(a.charAt(k))?(d=a.charAt(k),k++):(d=f,0===z&&e(Jb)));c!==f?(39===a.charCodeAt(k)?(d=Eb,k++):(d=f,0===z&&e(Fb)),d!==f?b=c={type:"string",value:c.join("")}:(k=b,b=f)):(k=b,b=f)}else k=b,b=f;return b}function ma(){var a,b,c;a=k;b=aa();b!==f?(b=B(),b!==
f?(b=u(),b!==f?(c=B(),c!==f?(c=ba(),c!==f?(c=B(),c!==f?(c=u(),c!==f?a=b={type:"when_clause",operand:b,value:c}:(k=a,a=f)):(k=a,a=f)):(k=a,a=f)):(k=a,a=f)):(k=a,a=f)):(k=a,a=f)):(k=a,a=f);return a}function Ia(){var a,b,c;a=k;b=aa();b!==f?(b=B(),b!==f?(b=u(),b!==f?(c=B(),c!==f?(c=ba(),c!==f?(c=B(),c!==f?(c=u(),c!==f?a=b={type:"when_clause",operand:b,value:c}:(k=a,a=f)):(k=a,a=f)):(k=a,a=f)):(k=a,a=f)):(k=a,a=f)):(k=a,a=f)):(k=a,a=f);return a}function Xa(){var b,c;b=k;var d,g;c=k;a.substr(k,4).toLowerCase()===
Zd?(d=a.substr(k,4),k+=4):(d=f,0===z&&e($d));d!==f?(d=k,z++,g=C(),z--,g===f?d=void 0:(k=d,d=f),d!==f?c="ELSE":(k=c,c=f)):(k=c,c=f);c!==f?(c=B(),c!==f?(c=u(),c!==f?b={type:"else_clause",value:c}:(k=b,b=f)):(k=b,b=f)):(k=b,b=f);return b}function Ja(){var b,c,d;b=ea();b===f&&(b=k,45===a.charCodeAt(k)?(c=ic,k++):(c=f,0===z&&e(jc)),c===f&&(43===a.charCodeAt(k)?(c=gc,k++):(c=f,0===z&&e(hc))),c!==f?(d=ea(),d!==f?b=c=c[0]+d:(k=b,b=f)):(k=b,b=f));return b}function Ya(){var b,c;b=k;46===a.charCodeAt(k)?(c=
ae,k++):(c=f,0===z&&e(be));c!==f?(c=ea(),c===f&&(c=null),c!==f?b="."+(null!=c?c:""):(k=b,b=f)):(k=b,b=f);return b}function Za(){var b,c,d;c=b=k;ce.test(a.charAt(k))?(d=a.charAt(k),k++):(d=f,0===z&&e(de));d!==f?(ee.test(a.charAt(k))?(d=a.charAt(k),k++):(d=f,0===z&&e(fe)),d===f&&(d=null),d!==f?c="e"+(null===d?"":d):(k=c,c=f)):(k=c,c=f);c!==f?(d=ea(),d!==f?b=c+d:(k=b,b=f)):(k=b,b=f);return b}function ea(){var a,b;a=[];b=T();if(b!==f)for(;b!==f;)a.push(b),b=T();else a=f;a!==f&&(a=a.join(""));return a}
function T(){var b;ge.test(a.charAt(k))?(b=a.charAt(k),k++):(b=f,0===z&&e(he));return b}function oa(){var b,c,d;b=k;a.substr(k,2).toLowerCase()===ie?(c=a.substr(k,2),k+=2):(c=f,0===z&&e(je));c!==f?(c=k,z++,d=C(),z--,d===f?c=void 0:(k=c,c=f),c!==f?b="IN":(k=b,b=f)):(k=b,b=f);return b}function Z(){var b,c,d;b=k;a.substr(k,2).toLowerCase()===ke?(c=a.substr(k,2),k+=2):(c=f,0===z&&e(le));c!==f?(c=k,z++,d=C(),z--,d===f?c=void 0:(k=c,c=f),c!==f?b="IS":(k=b,b=f)):(k=b,b=f);return b}function P(){var b,c,d;
b=k;a.substr(k,4).toLowerCase()===me?(c=a.substr(k,4),k+=4):(c=f,0===z&&e(ne));c!==f?(c=k,z++,d=C(),z--,d===f?c=void 0:(k=c,c=f),c!==f?b="LIKE":(k=b,b=f)):(k=b,b=f);return b}function da(){var b,c,d;b=k;a.substr(k,3).toLowerCase()===oe?(c=a.substr(k,3),k+=3):(c=f,0===z&&e(pe));c!==f?(c=k,z++,d=C(),z--,d===f?c=void 0:(k=c,c=f),c!==f?b="NOT":(k=b,b=f)):(k=b,b=f);return b}function S(){var b,c,d;b=k;a.substr(k,3).toLowerCase()===qe?(c=a.substr(k,3),k+=3):(c=f,0===z&&e(re));c!==f?(c=k,z++,d=C(),z--,d===
f?c=void 0:(k=c,c=f),c!==f?b="AND":(k=b,b=f)):(k=b,b=f);return b}function ga(){var b,c,d;b=k;a.substr(k,2).toLowerCase()===se?(c=a.substr(k,2),k+=2):(c=f,0===z&&e(te));c!==f?(c=k,z++,d=C(),z--,d===f?c=void 0:(k=c,c=f),c!==f?b="OR":(k=b,b=f)):(k=b,b=f);return b}function va(){var b,c,d;b=k;a.substr(k,7).toLowerCase()===ue?(c=a.substr(k,7),k+=7):(c=f,0===z&&e(ve));c!==f?(c=k,z++,d=C(),z--,d===f?c=void 0:(k=c,c=f),c!==f?b="BETWEEN":(k=b,b=f)):(k=b,b=f);return b}function ka(){var b,c,d;b=k;a.substr(k,
4).toLowerCase()===we?(c=a.substr(k,4),k+=4):(c=f,0===z&&e(xe));c!==f?(c=k,z++,d=C(),z--,d===f?c=void 0:(k=c,c=f),c!==f?b="FROM":(k=b,b=f)):(k=b,b=f);return b}function ha(){var b,c,d;b=k;a.substr(k,4).toLowerCase()===ye?(c=a.substr(k,4),k+=4):(c=f,0===z&&e(ze));c!==f?(c=k,z++,d=C(),z--,d===f?c=void 0:(k=c,c=f),c!==f?b="TRIM":(k=b,b=f)):(k=b,b=f);return b}function Da(){var b,c,d;b=k;a.substr(k,8).toLowerCase()===Ae?(c=a.substr(k,8),k+=8):(c=f,0===z&&e(Be));c!==f?(c=k,z++,d=C(),z--,d===f?c=void 0:(k=
c,c=f),c!==f?b="INTERVAL":(k=b,b=f)):(k=b,b=f);return b}function Ha(){var b,c,d;b=k;a.substr(k,4).toLowerCase()===Ce?(c=a.substr(k,4),k+=4):(c=f,0===z&&e(De));c!==f?(c=k,z++,d=C(),z--,d===f?c=void 0:(k=c,c=f),c!==f?b="YEAR":(k=b,b=f)):(k=b,b=f);return b}function ib(){var b,c,d;b=k;a.substr(k,5).toLowerCase()===Ee?(c=a.substr(k,5),k+=5):(c=f,0===z&&e(Fe));c!==f?(c=k,z++,d=C(),z--,d===f?c=void 0:(k=c,c=f),c!==f?b="MONTH":(k=b,b=f)):(k=b,b=f);return b}function Va(){var b,c,d;b=k;a.substr(k,3).toLowerCase()===
Ge?(c=a.substr(k,3),k+=3):(c=f,0===z&&e(He));c!==f?(c=k,z++,d=C(),z--,d===f?c=void 0:(k=c,c=f),c!==f?b="DAY":(k=b,b=f)):(k=b,b=f);return b}function Wa(){var b,c,d;b=k;a.substr(k,4).toLowerCase()===Ie?(c=a.substr(k,4),k+=4):(c=f,0===z&&e(Je));c!==f?(c=k,z++,d=C(),z--,d===f?c=void 0:(k=c,c=f),c!==f?b="HOUR":(k=b,b=f)):(k=b,b=f);return b}function jb(){var b,c,d;b=k;a.substr(k,6).toLowerCase()===Ke?(c=a.substr(k,6),k+=6):(c=f,0===z&&e(Le));c!==f?(c=k,z++,d=C(),z--,d===f?c=void 0:(k=c,c=f),c!==f?b="MINUTE":
(k=b,b=f)):(k=b,b=f);return b}function wa(){var b,c,d;b=k;a.substr(k,6).toLowerCase()===Me?(c=a.substr(k,6),k+=6):(c=f,0===z&&e(Ne));c!==f?(c=k,z++,d=C(),z--,d===f?c=void 0:(k=c,c=f),c!==f?b="SECOND":(k=b,b=f)):(k=b,b=f);return b}function Aa(){var b,c,d;b=k;a.substr(k,4).toLowerCase()===Oe?(c=a.substr(k,4),k+=4):(c=f,0===z&&e(Pe));c!==f?(c=k,z++,d=C(),z--,d===f?c=void 0:(k=c,c=f),c!==f?b="CASE":(k=b,b=f)):(k=b,b=f);return b}function pa(){var b,c,d;b=k;a.substr(k,3).toLowerCase()===Qe?(c=a.substr(k,
3),k+=3):(c=f,0===z&&e(Re));c!==f?(c=k,z++,d=C(),z--,d===f?c=void 0:(k=c,c=f),c!==f?b="END":(k=b,b=f)):(k=b,b=f);return b}function aa(){var b,c,d;b=k;a.substr(k,4).toLowerCase()===Se?(c=a.substr(k,4),k+=4):(c=f,0===z&&e(Te));c!==f?(c=k,z++,d=C(),z--,d===f?c=void 0:(k=c,c=f),c!==f?b="WHEN":(k=b,b=f)):(k=b,b=f);return b}function ba(){var b,c,d;b=k;a.substr(k,4).toLowerCase()===Ue?(c=a.substr(k,4),k+=4):(c=f,0===z&&e(Ve));c!==f?(c=k,z++,d=C(),z--,d===f?c=void 0:(k=c,c=f),c!==f?b="THEN":(k=b,b=f)):(k=
b,b=f);return b}function ja(){var b;44===a.charCodeAt(k)?(b=We,k++):(b=f,0===z&&e(Xe));return b}function ca(){var b;40===a.charCodeAt(k)?(b=Ye,k++):(b=f,0===z&&e(Ze));return b}function fa(){var b;41===a.charCodeAt(k)?(b=$e,k++):(b=f,0===z&&e(af));return b}function B(){var a,b;a=[];for(b=xa();b!==f;)a.push(b),b=xa();return a}function xa(){var b;bf.test(a.charAt(k))?(b=a.charAt(k),k++):(b=f,0===z&&e(cf));return b}function Ka(a,b,c,d){a={type:"binary_expr",operator:a,left:b,right:c};void 0!==d&&(a.escape=
d);return a}function Ba(a,b){for(var c=0;c<b.length;c++)a=Ka(b[c][1],a,b[c][3]);return a}q=void 0!==q?q:{};var f={},kb={start:m},Kb=m,ad="!",bd=p("!",!1),lb="\x3d",mb=p("\x3d",!1),nb="\x3e\x3d",ed=p("\x3e\x3d",!1),fd="\x3e",gd=p("\x3e",!1),ob="\x3c\x3d",hd=p("\x3c\x3d",!1),pb="\x3c\x3e",id=p("\x3c\x3e",!1),jd="\x3c",kd=p("\x3c",!1),qb="!\x3d",ld=p("!\x3d",!1),gc="+",hc=p("+",!1),ic="-",jc=p("-",!1),md="*",nd=p("*",!1),od="/",pd=p("/",!1),Id=/^[A-Za-z_\x80-\uFFFF]/,Jd=h([["A","Z"],["a","z"],"_",["\u0080",
"\uffff"]],!1,!1),Kd=/^[A-Za-z0-9_]/,Ld=h([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Md=/^[A-Za-z0-9_.\x80-\uFFFF]/,Nd=h([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),Od="@",Pd=p("@",!1),Cb=function(a){return{type:"interval-period",period:a.value,precision:null,secondary:null}},Db=function(a,b){return{type:"interval-period",period:"second",precision:a,secondary:b}},Eb="'",Fb=p("'",!1),Gb="N'",Yd=p("N'",!1),Ga="''",Hb=p("''",!1),Ib=/^[^']/,Jb=h(["'"],!0,!1),ae=".",be=p(".",!1),
ge=/^[0-9]/,he=h([["0","9"]],!1,!1),ce=/^[eE]/,de=h(["e","E"],!1,!1),ee=/^[+\-]/,fe=h(["+","-"],!1,!1),ud="null",vd=p("NULL",!0),qd="true",rd=p("TRUE",!0),sd="false",td=p("FALSE",!0),ie="in",je=p("IN",!0),ke="is",le=p("IS",!0),me="like",ne=p("LIKE",!0),cd="escape",dd=p("ESCAPE",!0),oe="not",pe=p("NOT",!0),qe="and",re=p("AND",!0),se="or",te=p("OR",!0),ue="between",ve=p("BETWEEN",!0),we="from",xe=p("FROM",!0),Ed="for",Fd=p("FOR",!0),Cd="substring",Dd=p("SUBSTRING",!0),Ad="extract",Bd=p("EXTRACT",!0),
ye="trim",ze=p("TRIM",!0),Gd="position",Hd=p("POSITION",!0),yd="timestamp",zd=p("TIMESTAMP",!0),wd="date",xd=p("DATE",!0),Qd="leading",Rd=p("LEADING",!0),Sd="trailing",Td=p("TRAILING",!0),Ud="both",Vd=p("BOTH",!0),Wd="to",Xd=p("TO",!0),Ae="interval",Be=p("INTERVAL",!0),Ce="year",De=p("YEAR",!0),Ee="month",Fe=p("MONTH",!0),Ge="day",He=p("DAY",!0),Ie="hour",Je=p("HOUR",!0),Ke="minute",Le=p("MINUTE",!0),Me="second",Ne=p("SECOND",!0),Oe="case",Pe=p("CASE",!0),Qe="end",Re=p("END",!0),Se="when",Te=p("WHEN",
!0),Ue="then",Ve=p("THEN",!0),Zd="else",$d=p("ELSE",!0),We=",",Xe=p(",",!1),Ye="(",Ze=p("(",!1),$e=")",af=p(")",!1),bf=/^[ \t\n\r]/,cf=h([" ","\t","\n","\r"],!1,!1),Tc="`",Uc=p("`",!1),Vc=/^[^`]/,Wc=h(["`"],!0,!1),k=0,La=[{line:1,column:1}],na=0,Ma=[],z=0,Ua;if("startRule"in q){if(!(q.startRule in kb))throw Error("Can't start parsing from rule \""+q.startRule+'".');Kb=kb[q.startRule]}Ua=Kb();if(Ua!==f&&k===a.length)return Ua;Ua!==f&&k<a.length&&e({type:"end"});throw function(a,b,c){return new v(v.buildMessage(a,
b),a,b,c)}(Ma,na<a.length?a.charAt(na):null,na<a.length?l(na,na+1):l(na,na));}}})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["require","exports"],function(v,a){Object.defineProperty(a,"__esModule",{value:!0});a.queryCapabilities=void 0;a.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,
supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0}})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports tslib ../../../core/MapUtils ../../../core/maybe ../../../core/promiseUtils ../../../core/SetUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./AttributesBuilder ./attributeSupport ./projectionSupport ./timeSupport ./utils".split(" "),
function(v,a,q,p,h,b,l,e,m,r,u,g,x,c,d){function H(a){return a.substr(24,12)+a.substr(19,4)+a.substr(16,2)+a.substr(14,2)+a.substr(11,2)+a.substr(9,2)+a.substr(6,2)+a.substr(4,2)+a.substr(2,2)+a.substr(0,2)}function F(a,b,c,d){if(c&&"esriFieldTypeDate"===c.type){var e=(new Date(a)).getTime(),g=(new Date(b)).getTime();if(!isNaN(e)&&!isNaN(g))return d?g-e:e-g}return"number"===typeof a&&"number"===typeof b?d?b-a:a-b:"string"===typeof a&&"string"===typeof b?(e=a.toUpperCase(),g=b.toUpperCase(),!c||"esriFieldTypeGUID"!==
c.type&&"esriFieldTypeGlobalID"!==c.type?d=(d?e>g:e<g)?-1:(d?e<g:e>g)?1:0:(a=H(e),g=H(g),d=(d?a>g:a<g)?-1:(d?a<g:a>g)?1:0),d):d?1:-1}Object.defineProperty(a,"__esModule",{value:!0});v=function(){function a(a,b,c){this.items=a;this.queryGeometry=b;this.definitionExpression=c.definitionExpression;this.geometryType=c.geometryType;this.hasM=c.hasM;this.hasZ=c.hasZ;this.objectIdField=c.objectIdField;this.spatialReference=c.spatialReference;this.fieldsIndex=c.fieldsIndex;this.timeInfo=c.timeInfo;this.featureAdapter=
c.featureAdapter}Object.defineProperty(a.prototype,"size",{get:function(){return this.items.length},enumerable:!1,configurable:!0});a.prototype.createQueryResponseForCount=function(a){var b=new u.default(a,this.featureAdapter,this.fieldsIndex);if(!a.outStatistics)return b.countDistinctValues(this.items);var c=a.groupByFieldsForStatistics,d=a.having;if(null===c||void 0===c||!c.length)return 1;var e=new Map,g=new Map,h=new Set,l=0;for(a=a.outStatistics;l<a.length;l++){var y=a[l],y="exceedslimit"!==
y.statisticType?y.onStatisticField:void 0;if(!g.has(y)){for(var m=[],A=0,n=c;A<n.length;A++){var w=this._getAttributeValues(b,n[A],e);m.push(w)}g.set(y,this._calculateUniqueValues(m))}var y=g.get(y),p;for(p in y)A=y[p],m=A.items,A=A.data.join(","),d&&!b.validateItems(m,d)||h.add(A)}return h.size};a.prototype.createQueryResponse=function(a){var b;b=a.outStatistics?a.outStatistics.some(function(a){return"exceedslimit"===a.statisticType})?this._createExceedsLimitQueryResponse(a):this._createStatisticsQueryResponse(a):
this._createFeatureQueryResponse(a);a.returnQueryGeometry&&(m.isValid(a.outSR)&&!m.equals(this.queryGeometry.spatialReference,a.outSR)?b.queryGeometry=d.cleanFromGeometryEngine(q.__assign({spatialReference:a.outSR},x.project(this.queryGeometry,this.queryGeometry.spatialReference,a.outSR))):b.queryGeometry=d.cleanFromGeometryEngine(q.__assign({spatialReference:a.outSR},this.queryGeometry)));return b};a.prototype.executeAttributesQuery=function(c){var d=g.getWhereClause(c.where,this.fieldsIndex);if(!d)return b.resolve(this);
if(d.isStandardized){for(var e=0,h=[],l=0,m=this.items;l<m.length;l++){var p=m[l];d.testFeature(p,this.featureAdapter)&&(h[e++]=p)}d=new a(h,this.queryGeometry,this);d.definitionExpression=c.where;return b.resolve(d)}return b.reject(new TypeError("Where clause is not standardized"))};a.prototype.executeObjectIdsQuery=function(c){if(!c.objectIds||!c.objectIds.length)return b.resolve(this);var d=l.SetFromValues(c.objectIds),e=this.featureAdapter.getObjectId;return b.resolve(new a(this.items.filter(function(a){return d.has(e(a))}),
this.queryGeometry,this))};a.prototype.executeTimeQuery=function(d){d=c.getTimeOperator(this.timeInfo,d.timeExtent,this.featureAdapter);if(!h.isSome(d))return b.resolve(this);d=this.items.filter(d);return b.resolve(new a(d,this.queryGeometry,this))};a.prototype.filterLatest=function(){for(var c=this.timeInfo,d=c.trackIdField,e=c.startTimeField,c=c.endTimeField||e,e=new Map,g=this.featureAdapter.getAttribute,h=0,l=this.items;h<l.length;h++){var m=l[h],r=g(m,d),y=g(m,c),E=e.get(r);(!E||y>g(E,c))&&e.set(r,
m)}d=p.valuesOfMap(e);return b.resolve(new a(d,this.queryGeometry,this))};a.prototype.project=function(b){return q.__awaiter(this,void 0,void 0,function(){var c,e,g,h=this;return q.__generator(this,function(l){switch(l.label){case 0:if(!b||m.equals(this.spatialReference,b))return[2,this];c=this.featureAdapter;return[4,x.projectMany(this.items.map(function(a){return d.getGeometry(h.geometryType,h.hasZ,h.hasM,c.getGeometry(a))}),this.spatialReference,b)];case 1:return e=l.sent(),g=e.map(function(a,
b){return c.cloneWithGeometry(h.items[b],r.convertFromGeometry(a,h.hasZ,h.hasM))}),[2,new a(g,this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:b,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})]}})})};a.prototype._sortFeatures=function(a,b,c){if(1<a.length&&b&&b.length){var d=function(b){b=b.split(" ");var d=b[0],g=e.fieldsIndex.get(d),
h=b[1]&&"desc"===b[1].toLowerCase();a.sort(function(a,b){a=c(a,d,g);b=c(b,d,g);return F(a,b,g,h)})},e=this,g=0;for(b=b.reverse();g<b.length;g++)d(b[g])}};a.prototype._createFeatureQueryResponse=function(a){var b=this,c=this.items,g=this.geometryType,h=this.hasM,l=this.hasZ,m=this.objectIdField,p=this.spatialReference,y=a.outFields,E=a.outSR,A=a.quantizationParameters,n=a.resultRecordCount,w=a.resultOffset,r=a.returnZ,t=a.returnM,n=null!=n?c.length>(w||0)+n:!1,y=y&&(-1<y.indexOf("*")?q.__spreadArrays(this.fieldsIndex.fields):
y.map(function(a){return b.fieldsIndex.get(a)}));return{exceededTransferLimit:n,features:this._createFeatures(a,c),fields:y,geometryType:g,hasM:h&&t,hasZ:l&&r,objectIdFieldName:m,spatialReference:d.cleanFromGeometryEngine(E?E:p),transform:A&&e.toQuantizationTransform(A)||null}};a.prototype._createFeatures=function(a,b){var c=new u.default(a,this.featureAdapter,this.fieldsIndex),g=a.orderByFields,h=a.quantizationParameters,l=a.returnGeometry,m=a.returnCentroid,p=a.maxAllowableOffset,y=a.resultOffset,
E=a.resultRecordCount,A=a.returnZ;a=a.returnM;var n=this.hasZ&&(void 0===A?!1:A),w=this.hasM&&(void 0===a?!1:a),A=[];a=0;b=q.__spreadArrays(b);this._sortFeatures(b,g,function(a,b,d){return c.getFieldValue(a,b,d)});if(l||m)if(g=e.toQuantizationTransform(h),l&&!m)for(m=0;m<b.length;m++)l=b[m],A[a++]={attributes:c.getAttributes(l),geometry:d.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(l),p,g,n,w)};else if(!l&&m)for(p=0;p<b.length;p++)l=b[p],A[a++]={attributes:c.getAttributes(l),
centroid:d.transformCentroid(this,this.featureAdapter.getCentroid(l,this),g)};else for(m=0;m<b.length;m++)l=b[m],A[a++]={attributes:c.getAttributes(l),centroid:d.transformCentroid(this,this.featureAdapter.getCentroid(l,this),g),geometry:d.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(l),p,g,n,w)};else for(p=0;p<b.length;p++)l=b[p],(n=c.getAttributes(l))&&(A[a++]={attributes:n});y=y||0;null!=E&&(A=A.slice(y,Math.min(A.length,y+E)));return A};a.prototype._createExceedsLimitQueryResponse=
function(a){var b=!1,c=Number.POSITIVE_INFINITY,d=Number.POSITIVE_INFINITY,b=Number.POSITIVE_INFINITY,e=0;for(a=a.outStatistics;e<a.length;e++){var g=a[e];if("exceedslimit"===g.statisticType){c=null!=g.maxPointCount?g.maxPointCount:Number.POSITIVE_INFINITY;d=null!=g.maxRecordCount?g.maxRecordCount:Number.POSITIVE_INFINITY;b=null!=g.maxVertexCount?g.maxVertexCount:Number.POSITIVE_INFINITY;break}}if("esriGeometryPoint"===this.geometryType)b=this.items.length>c;else if(this.items.length>d)b=!0;else var c=
this.hasZ?this.hasM?4:3:this.hasM?3:2,h=this.featureAdapter,b=this.items.reduce(function(a,b){b=h.getGeometry(b);return a+(b&&b.coords.length||0)},0)/c>b;return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(b)}}]}};a.prototype._createStatisticsQueryResponse=function(a){var b=this,c={attributes:{}},d=[],e=new Map,g=new Map,h=new Map,l=new Map,m=new u.default(a,this.featureAdapter,
this.fieldsIndex),E=a.outStatistics,A=a.groupByFieldsForStatistics,n=a.having;a=a.orderByFields;for(var w=A&&A.length,r=!!w,q=r&&A[0],t=r&&!this.fieldsIndex.get(q),x=0;x<E.length;x++){var v=E[x],F=v.outStatisticFieldName,H=v.statisticType,G=v,ea="exceedslimit"!==H?v.onStatisticField:void 0,T="percentile_disc"===H||"percentile_cont"===H,oa=r&&1===w&&(ea===q||t)&&"count"===H;if(r){if(!h.has(ea)){for(var v=[],H=0,Z=A;H<Z.length;H++){var P=this._getAttributeValues(m,Z[H],e);v.push(P)}h.set(ea,this._calculateUniqueValues(v))}var da=
h.get(ea),v=function(a){var c=da[a];a=c.count;var d=c.data,g=c.items,h=c.itemPositions,c=d.join(",");if(!n||m.validateItems(g,n)){var y=l.get(c)||{attributes:{}},g=null;if(oa)g=a;else{var p=S._getAttributeValues(m,ea,e);a=h.map(function(a){return p[a]});g=T&&"statisticParameters"in G?S._getPercentileValue(G,a):S._getStatisticValue(G,a)}y.attributes[F]=g;A.forEach(function(a,c){return y.attributes[b.fieldsIndex.get(a)?a:"EXPR_"+(c+1)]=d[c]});l.set(c,y)}},S=this,ga;for(ga in da)v(ga)}else P=this._getAttributeValues(m,
ea,e),c.attributes[F]=T&&"statisticParameters"in G?this._getPercentileValue(G,P):this._getStatisticValue(G,P,g);d.push({name:F,alias:F,type:"esriFieldTypeDouble"})}c=r?p.valuesOfMap(l):[c];this._sortFeatures(c,a,function(a,b){return a.attributes[b]});return{fields:d,features:c}};a.prototype._getStatisticValue=function(a,b,c){var d=a.onStatisticField;a=a.statisticType;b=c&&c.has(d)?c.get(d):this._calculateStatistics(b);c&&c.set(d,b);return b["var"===a?"variance":a]};a.prototype._getPercentileValue=
function(a,b){var c=a.statisticParameters,d=a.statisticType,e=c.value,g="desc"===c.orderBy,h=this.fieldsIndex.get(a.onStatisticField);a=q.__spreadArrays(b).filter(function(a){return null!=a}).sort(function(a,b){return F(a,b,h,g)});return this._calculatePercentile(a,e,"percentile_disc"===d)};a.prototype._getAttributeValues=function(a,b,c){if(c.has(b))return c.get(b);var d=this.fieldsIndex.get(b),e=this.items.map(function(c){return a.getFieldValue(c,b,d)});c.set(b,e);return e};a.prototype._calculateStatistics=
function(a){for(var b=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,d=null,e=null,g=null,h=null,l=[],m=0,p=0;p<a.length;p++){var A=a[p];"string"===typeof A?m++:null==A||isNaN(A)||(d+=A,b=Math.min(b,A),c=Math.max(c,A),l.push(A),m++)}if(m){e=d/m;for(g=a=0;g<l.length;g++)A=l[g],a+=Math.pow(A-e,2);h=1<m?a/(m-1):0;g=Math.sqrt(h)}else c=b=null;return{avg:e,count:m,max:c,min:b,stddev:g,sum:d,variance:h}};a.prototype._calculateUniqueValues=function(a){for(var b={},c=this.items,d=c.length,e=0;e<d;e++){for(var g=
c[e],h=[],l=0,m=a;l<m.length;l++)h.push(m[l][e]);l=h.join(",");null==b[l]?b[l]={count:1,data:h,items:[g],itemPositions:[e]}:(b[l].count++,b[l].items.push(g),b[l].itemPositions.push(e))}return b};a.prototype._calculatePercentile=function(a,b,c){if(0===a.length)return null;if(0>=b)return a[0];if(1<=b)return a[a.length-1];var d=(a.length-1)*b,e=Math.floor(d);b=e+1;var d=d%1,e=a[e],g=a[b];return b>=a.length||c||"string"===typeof e||"string"===typeof g?e:e*(1-d)+g*d};return a}();a.default=v})},"esri/geometry/support/quantizationUtils":function(){define(["require",
"exports","./jsonUtils"],function(v,a,q){function p(a,b){return Math.round((b-a.translate[0])/a.scale[0])}function h(a,b){return Math.round((a.translate[1]-b)/a.scale[1])}function b(a,b,c){for(var d=[],e,g,l,m,y=0;y<c.length;y++){var A=c[y];if(0<y){if(l=p(a,A[0]),m=h(a,A[1]),l!==e||m!==g)d.push(b(A,l-e,m-g)),e=l,g=m}else e=p(a,A[0]),g=h(a,A[1]),d.push(b(A,e,g))}return 0<d.length?d:null}function l(a,c,d,e){return b(a,d?e?O:M:e?M:C,c)}function e(a,c,d,e){var g=[];d=d?e?O:M:e?M:C;for(e=0;e<c.length;e++){var h=
b(a,d,c[e]);h&&3<=h.length&&g.push(h)}return g.length?g:null}function m(a,c,d,e){var g=[];d=d?e?O:M:e?M:C;for(e=0;e<c.length;e++){var h=b(a,d,c[e]);h&&2<=h.length&&g.push(h)}return g.length?g:null}function r(a,b){return b*a.scale[0]+a.translate[0]}function u(a,b){return a.translate[1]-b*a.scale[1]}function g(a,b,c){var d=Array(c.length);if(!c.length)return d;var e=a.scale,g=e[0],e=e[1],h=r(a,c[0][0]);a=u(a,c[0][1]);d[0]=b(c[0],h,a);for(var l=1;l<c.length;l++){var m=c[l],h=h+m[0]*g;a-=m[1]*e;d[l]=
b(m,h,a)}return d}function x(a,b,c){for(var d=Array(c.length),e=0;e<c.length;e++)d[e]=g(a,b,c[e]);return d}function c(a,b,c,d){return g(a,c?d?O:M:d?M:C,b)}function d(a,b,c,d){return x(a,c?d?O:M:d?M:C,b)}function H(a,b,c,d){return x(a,c?d?O:M:d?M:C,b)}function F(a,b,c){var d=c[0],e=d[0],d=d[1],g=Math.min(e,b[0]),h=Math.min(d,b[1]),l=Math.max(e,b[2]);b=Math.max(d,b[3]);for(var m=1;m<c.length;m++){var y=c[m],p=y[0],y=y[1],e=e+p,d=d+y;0>p&&(g=Math.min(g,e));0<p&&(l=Math.max(l,e));0>y?h=Math.min(h,d):
0<y&&(b=Math.max(b,d))}a[0]=g;a[1]=h;a[2]=l;a[3]=b;return a}function G(a,b){if(!b.length)return null;a[0]=a[1]=Number.POSITIVE_INFINITY;a[2]=a[3]=Number.NEGATIVE_INFINITY;for(var c=0;c<b.length;c++)F(a,a,b[c]);return a}function t(a,b,c,d,e){b.xmin=p(a,c.xmin);b.ymin=h(a,c.ymin);b.xmax=p(a,c.xmax);b.ymax=h(a,c.ymax);b!==c&&(d&&(b.zmin=c.zmin,b.zmax=c.zmax),e&&(b.mmin=c.mmin,b.mmax=c.mmax));return b}function I(a,b,c,d,e){b.points=l(a,c.points,d,e);return b}function L(a,b,c,d,e){b.x=p(a,c.x);b.y=h(a,
c.y);b!==c&&(d&&(b.z=c.z),e&&(b.m=c.m));return b}function J(a,b,c,d,g){a=e(a,c.rings,d,g);if(!a)return null;b.rings=a;return b}function R(a,b,c,d,e){a=m(a,c.paths,d,e);if(!a)return null;b.paths=a;return b}Object.defineProperty(a,"__esModule",{value:!0});a.unquantizePolyline=a.unquantizePolygon=a.unquantizePoint=a.unquantizeMultipoint=a.unquantizeExtent=a.quantizeGeometry=a.quantizePolyline=a.quantizePolygon=a.quantizePoint=a.quantizeMultipoint=a.quantizeExtent=a.getQuantizedBoundsRings=a.getQuantizedBoundsPaths=
a.getQuantizedBoundsPoints=a.getQuantizedBoundsCoordsArrayArray=a.getQuantizedBoundsCoordsArray=a.unquantizeRings=a.unquantizePaths=a.unquantizePoints=a.unquantizeBounds=a.unquantizeCoordsArrayArray=a.unquantizeCoordsArray=a.unquantizeY=a.unquantizeX=a.quantizePaths=a.quantizeRings=a.quantizePoints=a.quantizeBounds=a.quantizeY=a.quantizeX=a.equals=a.toQuantizationTransform=void 0;var C=function(a,b,c){return[b,c]},M=function(a,b,c){return[b,c,a[2]]},O=function(a,b,c){return[b,c,a[2],a[3]]};a.toQuantizationTransform=
function(a){return a?{originPosition:"upper-left"===a.originPosition?"upperLeft":"lower-left"===a.originPosition?"lowerLeft":a.originPosition,scale:[a.tolerance,a.tolerance],translate:[a.extent.xmin,a.extent.ymax]}:null};a.equals=function(a,b){if(a===b||null==a&&null==b)return!0;if(null==a||null==b)return!1;var c,d,e,g;a&&"upperLeft"===a.originPosition?(c=a.translate[0],d=a.translate[1],a=a.scale[0]):(c=a.extent.xmin,d=a.extent.ymax,a=a.tolerance);b&&"upperLeft"===b.originPosition?(e=b.translate[0],
g=b.translate[1],b=b.scale[0]):(e=b.extent.xmin,g=b.extent.ymax,b=b.tolerance);return c===e&&d===g&&a===b};a.quantizeX=p;a.quantizeY=h;a.quantizeBounds=function(a,b,c){b[0]=p(a,c[0]);b[3]=h(a,c[1]);b[2]=p(a,c[2]);b[1]=h(a,c[3]);return b};a.quantizePoints=l;a.quantizeRings=e;a.quantizePaths=m;a.unquantizeX=r;a.unquantizeY=u;a.unquantizeCoordsArray=g;a.unquantizeCoordsArrayArray=x;a.unquantizeBounds=function(a,b,c){return c?(b[0]=r(a,c[0]),b[1]=u(a,c[3]),b[2]=r(a,c[2]),b[3]=u(a,c[1]),b):[r(a,b[0]),
u(a,b[3]),r(a,b[2]),u(a,b[1])]};a.unquantizePoints=c;a.unquantizePaths=d;a.unquantizeRings=H;a.getQuantizedBoundsCoordsArray=F;a.getQuantizedBoundsCoordsArrayArray=G;a.getQuantizedBoundsPoints=function(a){var b=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return F(b,b,a)};a.getQuantizedBoundsPaths=function(a){return G([0,0,0,0],a)};a.getQuantizedBoundsRings=function(a){return G([0,0,0,0],a)};a.quantizeExtent=t;a.quantizeMultipoint=I;a.quantizePoint=
L;a.quantizePolygon=J;a.quantizePolyline=R;a.quantizeGeometry=function(a,b){return a&&b?q.isPoint(b)?L(a,{},b,!1,!1):q.isPolyline(b)?R(a,{},b,!1,!1):q.isPolygon(b)?J(a,{},b,!1,!1):q.isMultipoint(b)?I(a,{},b,!1,!1):q.isExtent(b)?t(a,{},b,!1,!1):null:null};a.unquantizeExtent=function(a,b,c,d,e){b.xmin=r(a,c.xmin);b.ymin=u(a,c.ymin);b.xmax=r(a,c.xmax);b.ymax=u(a,c.ymax);b!==c&&(d&&(b.zmin=c.zmin,b.zmax=c.zmax),e&&(b.mmin=c.mmin,b.mmax=c.mmax));return b};a.unquantizeMultipoint=function(a,b,d,e,g){b.points=
c(a,d.points,e,g);return b};a.unquantizePoint=function(a,b,c,d,e){b.x=r(a,c.x);b.y=u(a,c.y);b!==c&&(d&&(b.z=c.z),e&&(b.m=c.m));return b};a.unquantizePolygon=function(a,b,c,d,e){b.rings=H(a,c.rings,d,e);return b};a.unquantizePolyline=function(a,b,c,e,g){b.paths=d(a,c.paths,e,g);return b}})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["require","exports","../../../core/maybe","./attributeSupport"],function(v,a,q,p){Object.defineProperty(a,"__esModule",{value:!0});v=function(){function a(a,
h,e){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=a.returnDistinctValues;this.fieldsIndex=e;this.featureAdapter=h;if((a=a.outFields)&&-1===a.indexOf("*")){this.outFields=a;for(var b=h=0;b<a.length;b++){var l=a[b],q=p.getExpressionFromFieldName(l),g=this.fieldsIndex.get(q),q=g?null:p.getWhereClause(q,e),g=g?g.name:p.getAliasFromFieldName(l)||"FIELD_EXP_"+h++;this._fieldDataCache.set(l,{alias:g,clause:q})}}}a.prototype.countDistinctValues=function(a){var b=
this;if(!this.returnDistinctValues)return a.length;a.forEach(function(a){return b.getAttributes(a)});return this._returnDistinctMap.size};a.prototype.getAttributes=function(a){a=this._processAttributesForOutFields(a);return this._processAttributesForDistinctValues(a)};a.prototype.getFieldValue=function(a,h,e){var b=e?e.name:h,l=null;this._fieldDataCache.has(b)?l=this._fieldDataCache.get(b).clause:e||(l=p.getWhereClause(h,this.fieldsIndex),this._fieldDataCache.set(b,{alias:b,clause:l}));return e?this.featureAdapter.getAttribute(a,
b):l.calculateValue(a,this.featureAdapter)};a.prototype.validateItem=function(a,h){this._fieldDataCache.has(h)||this._fieldDataCache.set(h,{alias:h,clause:p.getWhereClause(h,this.fieldsIndex)});return this._fieldDataCache.get(h).clause.testFeature(a,this.featureAdapter)};a.prototype.validateItems=function(a,h){this._fieldDataCache.has(h)||this._fieldDataCache.set(h,{alias:h,clause:p.getWhereClause(h,this.fieldsIndex)});return this._fieldDataCache.get(h).clause.testSet(a,this.featureAdapter)};a.prototype._processAttributesForOutFields=
function(a){var b=this.outFields;if(!b||!b.length)return this.featureAdapter.getAttributes(a);for(var e={},h=0;h<b.length;h++){var p=this._fieldDataCache.get(b[h]),q=p.alias,p=p.clause;e[q]=p?p.calculateValue(a,this.featureAdapter):this.featureAdapter.getAttribute(a,q)}return e};a.prototype._processAttributesForDistinctValues=function(a){if(q.isNone(a)||!this.returnDistinctValues)return a;var b=this.outFields,e=[];if(b)for(var h=0;h<b.length;h++){var p=this._fieldDataCache.get(b[h]).alias;e.push(a[p])}else for(p in a)e.push(a[p]);
b=(b||["*"]).join(",")+"\x3d"+e.join(",");e=this._returnDistinctMap.get(b)||0;this._returnDistinctMap.set(b,++e);return 1<e?null:a};return a}();a.default=v})},"esri/layers/graphics/data/timeSupport":function(){define(["require","exports"],function(v,a){function q(a,h,e,m,p){if(null!=m&&null!=p)return function(b){var g=a.getAttribute(b,h);b=a.getAttribute(b,e);return(null==g||g<=p)&&(null==b||b>=m)};if(null!=m)return function(b){b=a.getAttribute(b,e);return null==b||b>=m};if(null!=p)return function(b){b=
a.getAttribute(b,h);return null==b||b<=p}}function p(a,h,e,m){if(null!=e&&null!=m&&e===m)return function(b){return a.getAttribute(b,h)===e};if(null!=e&&null!=m)return function(b){b=a.getAttribute(b,h);return b>=e&&b<=m};if(null!=e)return function(b){return a.getAttribute(b,h)>=e};if(null!=m)return function(b){return a.getAttribute(b,h)<=m}}function h(){return function(){return!1}}Object.defineProperty(a,"__esModule",{value:!0});a.getTimeOperator=a.getTimeExtent=void 0;a.getTimeExtent=function(a,h){if(!a)return null;
var b=h.featureAdapter,l=a.startTimeField,p=a.endTimeField,q=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY;if(l&&p)h.forEach(function(a){var c=b.getAttribute(a,l);a=b.getAttribute(a,p);null==c||isNaN(c)||(q=Math.min(q,c));null==a||isNaN(a)||(g=Math.max(g,a))});else{var x=l||p;h.forEach(function(a){a=b.getAttribute(a,x);null==a||isNaN(a)||(q=Math.min(q,a),g=Math.max(g,a))})}return{start:q,end:g}};a.getTimeOperator=function(a,l,e){if(!l||!a)return null;var b=a.startTimeField;a=a.endTimeField;
if(!b&&!a)return null;var r=l.start;l=l.end;return null===r&&null===l?null:void 0===r&&void 0===l?h():b&&a?q(e,b,a,r,l):p(e,b||a,r,l)}})},"esri/layers/graphics/data/utils":function(){define("require exports tslib ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../centroid ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./spatialQuerySupport".split(" "),
function(v,a,q,p,h,b,l,e,m,r,u,g,x,c,d){function H(a,b,c,d,e){void 0===d&&(d=a.hasZ);void 0===e&&(e=a.hasM);var h=a.hasZ&&d,l=a.hasM&&e;return c?(a=g.quantizeOptimizedGeometry(J,b,a.hasZ,a.hasM,"esriGeometryPoint",c,d,e),g.convertToPoint(a,h,l)):g.convertToPoint(b,h,l)}function F(b,d,g){return q.__awaiter(this,void 0,void 0,function(){var p,n,r,y,K,t;return q.__generator(this,function(q){switch(q.label){case 0:if(!b)return[2,null];p=b.where;b.where=p=p&&p.trim();if(!p||/^1 *= *1$/.test(p)||d&&d===
p)b.where=null;return b.geometry?[4,G(b)]:[2,b];case 1:return n=q.sent(),b.distance=0,b.units=null,"esriSpatialRelEnvelopeIntersects"===b.spatialRel&&(r=b.geometry.spatialReference,n=l.getGeometryExtent(n),n.spatialReference=r),b.geometry=n,[4,c.checkProjectionSupport(n.spatialReference,g)];case 2:return q.sent(),[4,m.normalizeCentralMeridian(e.fromJSON(n))];case 3:y=q.sent()[0];if(h.isNone(y))throw a.QUERY_ENGINE_EMPTY_RESULT;K=y.toJSON();return[4,c.project(K,K.spatialReference,g)];case 4:t=q.sent();
if(!t)throw a.QUERY_ENGINE_EMPTY_RESULT;t.spatialReference=g;b.geometry=t;return[2,b]}})})}function G(a){return q.__awaiter(this,void 0,void 0,function(){var e,g,h,l,m,p,K,u,x;return q.__generator(this,function(n){switch(n.label){case 0:e=a.geometry;g=a.distance;h=a.units;if(null==g||"vertexAttributes"in e)return[2,e];l=e.spatialReference;m=h?t.fromJSON(h):b.getUnitString(l);p=l&&(r.isGeographic(l)||r.isWebMercator(l));if(!p)return[3,1];u=e;return[3,3];case 1:return[4,c.checkProjectionSupport(l,r.WGS84).then(function(){return c.project(e,
r.WGS84)})];case 2:u=n.sent(),n.label=3;case 3:return K=u,[4,d.getGeodesicBufferOperator()];case 4:return x=n.sent(),[2,x(K.spatialReference,K,g,m)]}})})}Object.defineProperty(a,"__esModule",{value:!0});a.cleanFromGeometryEngine=a.normalizeQueryLike=a.normalizeFilter=a.normalizeQuery=a.getGeometry=a.getCentroid=a.transformCentroid=a.QUERY_ENGINE_EMPTY_RESULT=void 0;var t=new p.default({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",
esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});a.QUERY_ENGINE_EMPTY_RESULT=Object.freeze({});var I=new x.default,L=new x.default,J=new x.default,R={esriGeometryPoint:g.convertToPoint,esriGeometryPolyline:g.convertToPolyline,esriGeometryPolygon:g.convertToPolygon,esriGeometryMultipoint:g.convertToMultipoint};a.transformCentroid=H;a.getCentroid=function(a,b,c){if("esriGeometryPolygon"!==a.geometryType||!b||!b.centroid&&!b.geometry)return null;b.centroid||(b.centroid=
u.getCentroidOptimizedGeometry(new x.default,b.geometry,a.hasZ,a.hasM));return H(a,b.centroid,c)};a.getGeometry=function(a,b,c,d,e,h,l,m){void 0===l&&(l=b);void 0===m&&(m=c);var n=b&&l,p=c&&m;d=d?"coords"in d?d:d.geometry:null;if(!d)return null;if(e)return b=g.generalizeOptimizedGeometry(L,d,b,c,a,e,l,m),h&&(b=g.quantizeOptimizedGeometry(J,b,n,p,a,h)),R[a](b,n,p);if(h)return b=g.quantizeOptimizedGeometry(J,d,b,c,a,h,l,m),R[a](b,n,p);g.removeZMValues(I,d,b,c,l,m);return R[a](I,n,p)};a.normalizeQuery=
function(a,b,c){return q.__awaiter(this,void 0,void 0,function(){var d,e,g,h,l;return q.__generator(this,function(m){d=a.outFields;e=a.orderByFields;g=a.groupByFieldsForStatistics;h=a.outStatistics;if(d)for(l=0;l<d.length;l++)d[l]=d[l].trim();if(e)for(l=0;l<e.length;l++)e[l]=e[l].trim();if(g)for(l=0;l<g.length;l++)g[l]=g[l].trim();if(h)for(l=0;l<h.length;l++)h[l].onStatisticField&&(h[l].onStatisticField=h[l].onStatisticField.trim());a.geometry&&!a.outSR&&(a.outSR=a.geometry.spatialReference);return[2,
F(a,b,c)]})})};a.normalizeFilter=function(a,b,c){return q.__awaiter(this,void 0,void 0,function(){return q.__generator(this,function(d){return[2,F(a,b,c)]})})};a.normalizeQueryLike=F;a.cleanFromGeometryEngine=function(a){return a&&C in a?JSON.parse(JSON.stringify(a,M)):a};var C="_geVersion",M=function(a,b){return a!==C?b:void 0}})},"esri/geometry/support/normalizeUtils":function(){define("require exports tslib ../../config ../../core/Error ../../core/Logger ../../core/maybe ../../core/promiseUtils ../Polygon ../Polyline ../SpatialReference ./spatialReferenceUtils ./webMercatorUtils ../../tasks/geometry/cut ../../tasks/geometry/simplify".split(" "),
function(v,a,q,p,h,b,l,e,m,r,u,g,x,c,d){function H(a){return"polygon"===a.type?a.rings:a.paths}function F(a,b){return Math.ceil((a-b)/(2*b))}function G(a,b){for(var c=0,d=H(a);c<d.length;c++)for(var e=0,g=d[c];e<g.length;e++)g[e][0]+=b;return a}function t(a){for(var b=[],c=0,d=0,e=0;e<a.length;e++){for(var g=a[e],h=null,l=0;l<g.length;l++)h=g[l],b.push(h),0===l?d=c=h[0]:(c=Math.min(c,h[0]),d=Math.max(d,h[0]));h&&b.push([(c+d)/2,0])}return b}function I(a,b){if(!(a instanceof r||a instanceof m))throw M.error("straightLineDensify: the input geometry is neither polyline nor polygon"),
new h("straightLineDensify: the input geometry is neither polyline nor polygon");for(var c=[],d=0,e=H(a);d<e.length;d++){var g=e[d],l=[];c.push(l);l.push([g[0][0],g[0][1]]);for(var p=0;p<g.length-1;p++){var q=g[p][0],y=g[p][1],t=g[p+1][0],u=g[p+1][1],x=Math.sqrt((t-q)*(t-q)+(u-y)*(u-y)),v=(u-y)/x,E=(t-q)/x,C=x/b;if(1<C){for(var I=1;I<=C-1;I++){var F=I*b;l.push([E*F+q,v*F+y])}x=(x+Math.floor(C-1)*b)/2;l.push([E*x+q,v*x+y])}l.push([t,u])}}return"polygon"===a.type?new m({rings:c,spatialReference:a.spatialReference}):
new r({paths:c,spatialReference:a.spatialReference})}function L(a,b,c){b&&(a=I(a,1E6),a=x.webMercatorToGeographic(a,!0));c&&(a=G(a,c));return a}function J(a,b,c){if(Array.isArray(a)){var d=a[0];if(d>b){var e=F(d,b);a[0]=d+-2*e*b}else d<c&&(e=F(d,c),a[0]=d+-2*e*c)}else d=a.x,d>b?(e=F(d,b),a=a.clone().offset(-2*e*b,0)):d<c&&(e=F(d,c),a=a.clone().offset(-2*e*c,0));return a}function R(a,b){for(var c=-1,d=function(d){var e=b.cutIndexes[d],g=b.geometries[d],h=H(g);d=function(a){var b=h[a];b.some(function(c){if(180>
c[0])return!0;for(var d=c=0;d<b.length;d++){var e=b[d][0];c=e>c?e:c}c=Number(c.toFixed(9));c=-360*F(c,180);for(d=0;d<b.length;d++)e=g.getPoint(a,d),g.setPoint(a,d,e.clone().offset(c,0));return!0})};for(var l=0;l<h.length;l++)d(l);if(e===c)if("polygon"===a[0].type)for(d=0,l=H(g);d<l.length;d++)a[e]=a[e].addRing(l[d]);else{if("polyline"===a[0].type)for(d=0,l=H(g);d<l.length;d++)a[e]=a[e].addPath(l[d])}else c=e,a[e]=g},e=0;e<b.cutIndexes.length;e++)d(e);return a}function C(a,b,h){return q.__awaiter(this,
void 0,void 0,function(){var n,w,t,u,y,A,v,E,I,H,M,T,oa,Z,P,da,S,ga,va,ka,ha,Da,Ha,ib,Va,Wa,jb,wa,Aa,pa,aa,ba,ja,ca,fa,B,xa;return q.__generator(this,function(q){switch(q.label){case 0:if(!Array.isArray(a))return[2,C([a],b)];n=b?b.url:p.geometryServiceUrl;H=0;M=[];T=[];oa=0;for(Z=a;oa<Z.length;oa++)P=Z[oa],l.isNone(P)?T.push(P):(w||(w=P.spatialReference,t=g.getInfo(w),v=(u=w.isWebMercator)?102100:4326,y=O[v].maxX,A=O[v].minX,E=O[v].plus180Line,I=O[v].minus180Line),t?"mesh"===P.type?T.push(P):"point"===
P.type?T.push(J(P.clone(),y,A)):"multipoint"===P.type?(da=P.clone(),da.points=da.points.map(function(a){return J(a,y,A)}),T.push(da)):"extent"===P.type?(S=P.clone(),ga=S._normalize(!1,!1,t),T.push(ga.rings?new m(ga):ga)):P.extent?(S=P.extent,va=F(S.xmin,A),ka=2*va*y,ha=0===ka?P.clone():G(P.clone(),ka),S.offset(ka,0),S.intersects(E)&&S.xmax!==y?(H=S.xmax>H?S.xmax:H,ha=L(ha,u),M.push(ha),T.push("cut")):S.intersects(I)&&S.xmin!==A?(H=2*S.xmax*y>H?2*S.xmax*y:H,ha=L(ha,u,360),M.push(ha),T.push("cut")):
T.push(ha)):T.push(P.clone()):T.push(P));Da=F(H,y);Ha=-90;ib=Da;for(Va=new r;0<Da;)Wa=-180+360*Da,Va.addPath([[Wa,Ha],[Wa,-1*Ha]]),Ha*=-1,Da--;return 0<M.length&&0<ib?[4,c.cut(n,M,Va,h)]:[3,3];case 1:jb=q.sent();wa=R(M,jb);Aa=[];pa=[];for(aa=0;aa<T.length;aa++)ba=T[aa],"cut"!==ba?pa.push(ba):(ja=wa.shift(),ca=a[aa],l.isSome(ca)&&"polygon"===ca.type&&ca.rings&&1<ca.rings.length&&ja.rings.length>=ca.rings.length?(Aa.push(ja),pa.push("simplify")):pa.push(u?x.geographicToWebMercator(ja):ja));return Aa.length?
[4,d.simplify(n,Aa,h)]:[2,pa];case 2:fa=q.sent();B=[];for(aa=0;aa<pa.length;aa++)ba=pa[aa],"simplify"!==ba?B.push(ba):B.push(u?x.geographicToWebMercator(fa.shift()):fa.shift());return[2,B];case 3:xa=[];for(aa=0;aa<T.length;aa++)ba=T[aa],"cut"!==ba?xa.push(ba):(ja=M.shift(),xa.push(!0===u?x.geographicToWebMercator(ja):ja));return[2,e.resolve(xa)]}})})}Object.defineProperty(a,"__esModule",{value:!0});a.normalizeMapX=a.getDenormalizedExtent=a.normalizeCentralMeridian=a.straightLineDensify=void 0;var M=
b.getLogger("esri.geometry.support.normalizeUtils"),O={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new r({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:u.WebMercator}),minus180Line:new r({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:u.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new r({paths:[[[180,-180],[180,180]]],spatialReference:u.WGS84}),
minus180Line:new r({paths:[[[-180,-180],[-180,180]]],spatialReference:u.WGS84})}};a.straightLineDensify=I;a.normalizeCentralMeridian=C;a.getDenormalizedExtent=function(a){var b;if(!a)return null;var c=a.extent;if(!c)return null;var d=a.spatialReference&&g.getInfo(a.spatialReference);if(!d)return c;var d=d.valid,e=d[0],d=d[1],h=c.width,l=c.xmin;b=c.xmax;b=[b,l];l=b[0];b=b[1];if("extent"===a.type||0===h||h<=d||h>2*d||l<e||b>d)return c;var m;switch(a.type){case "polygon":if(1<a.rings.length)m=t(a.rings);
else return c;break;case "polyline":if(1<a.paths.length)m=t(a.paths);else return c;break;case "multipoint":m=a.points}a=c.clone();for(e=0;e<m.length;e++){var p=m[e][0];0>p?(p+=d,b=Math.max(p,b)):(p-=d,l=Math.min(p,l))}a.xmin=l;a.xmax=b;return a.width<h?(a.xmin-=d,a.xmax-=d,a):c};a.normalizeMapX=function(a,b){if(b=g.getInfo(b)){var c=b.valid;b=c[0];var c=c[1],d=c-b;if(a<b)for(;a<b;)a+=d;if(a>c)for(;a>c;)a-=d}return a}})},"esri/tasks/geometry/cut":function(){define("require exports tslib ../../geometry ../../request ../../core/urlUtils ../../geometry/support/jsonUtils".split(" "),
function(v,a,q,p,h,b,l){Object.defineProperty(a,"__esModule",{value:!0});a.cut=void 0;a.cut=function(a,m,r,u){return q.__awaiter(this,void 0,void 0,function(){var e,x,c,d,v,F,G,t;return q.__generator(this,function(g){switch(g.label){case 0:return e="string"===typeof a?b.urlToObject(a):a,x=m[0].spatialReference,c=q.__assign(q.__assign({},u),{query:q.__assign(q.__assign({},e.query),{f:"json",sr:JSON.stringify(x),target:JSON.stringify({geometryType:l.getJsonType(m[0]),geometries:m}),cutter:JSON.stringify(r)})}),
[4,h(e.path+"/cut",c)];case 1:return d=g.sent(),v=d.data,F=v.cutIndexes,G=v.geometries,t=void 0===G?[]:G,[2,{cutIndexes:F,geometries:t.map(function(a){a=p.fromJSON(a);a.spatialReference=x;return a})}]}})})}})},"esri/tasks/geometry/simplify":function(){define("require exports tslib ../../request ../../core/urlUtils ../../geometry/support/jsonUtils".split(" "),function(v,a,q,p,h,b){function l(a){return{geometryType:b.getJsonType(a[0]),geometries:a.map(function(a){return a.toJSON()})}}function e(a,e,
h){var g=b.getGeometryType(e);return a.map(function(a){a=g.fromJSON(a);a.spatialReference=h;return a})}Object.defineProperty(a,"__esModule",{value:!0});a.simplify=void 0;a.simplify=function(a,r,u){return q.__awaiter(this,void 0,void 0,function(){var g,m,c,d,v;return q.__generator(this,function(x){switch(x.label){case 0:return g="string"===typeof a?h.urlToObject(a):a,m=r[0].spatialReference,c=b.getJsonType(r[0]),d=q.__assign(q.__assign({},u),{query:q.__assign(q.__assign({},g.query),{f:"json",sr:m.wkid?
m.wkid:JSON.stringify(m),geometries:JSON.stringify(l(r))})}),[4,p(g.path+"/simplify",d)];case 1:return v=x.sent(),[2,e(v.data,c,m)]}})})}})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports tslib ../../../core/Error ../../../core/promiseUtils ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils @dojo/framework/shim/Promise".split(" "),
function(v,a,q,p,h,b,l,e,m,r,u,g,x,c){function d(){return new Promise(function(a,b){v(["../../../geometry/geometryEngineJSON"],a,b)})}Object.defineProperty(a,"__esModule",{value:!0});a.canQueryWithRBush=a.checkSpatialQuerySupport=a.getSpatialQueryOperator=a.getGeodesicBufferOperator=a.importGeometryEngine=void 0;var H={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",
esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},F={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},G={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,
esriGeometryPolygon:!0,esriGeometryEnvelope:!0},t={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};a.importGeometryEngine=d;a.getGeodesicBufferOperator=function(){return d().then(function(a){return a.geodesicBuffer})};a.getSpatialQueryOperator=function(a,m,p,q,t){if(e.isPolygon(m)&&"esriGeometryPoint"===p&&("esriSpatialRelIntersects"===a||"esriSpatialRelContains"===a)){var x=u.convertFromPolygon(new g.default,m,!1,!1);return h.resolve(function(a){return r.polygonContainsPoint(x,
!1,!1,a)})}if(e.isPolygon(m)&&"esriGeometryMultipoint"===p){var v=u.convertFromPolygon(new g.default,m,!1,!1);if("esriSpatialRelContains"===a)return h.resolve(function(a){return r.polygonContainsMultipoint(v,!1,!1,a,q,t)})}if(e.isExtent(m)&&"esriGeometryPoint"===p&&("esriSpatialRelIntersects"===a||"esriSpatialRelContains"===a))return h.resolve(function(a){return b.extentContainsPoint(m,c.getGeometry(p,q,t,a))});if(e.isExtent(m)&&"esriGeometryMultipoint"===p&&"esriSpatialRelContains"===a)return h.resolve(function(a){return b.extentContainsMultipoint(m,
c.getGeometry(p,q,t,a))});if(e.isExtent(m)&&"esriSpatialRelIntersects"===a){var y=l.getExtentIntersector(p);return h.resolve(function(a){return y(m,c.getGeometry(p,q,t,a))})}return d().then(function(b){var d=b[H[a]].bind(null,m.spatialReference,m);return function(a){return d(c.getGeometry(p,q,t,a))}})};a.checkSpatialQuerySupport=function(a,b,c){return q.__awaiter(this,void 0,void 0,function(){var d,g;return q.__generator(this,function(h){d=a.spatialRel;g=a.geometry;if(!g)return[2];if(!0!==F[d])throw new p("feature-store:unsupported-query",
"Unsupported query spatial relationship",{query:a});if(!m.isValid(g.spatialReference)||!m.isValid(c))return[2];if(!0!==G[e.getJsonType(g)])throw new p("feature-store:unsupported-query","Unsupported query geometry type",{query:a});if(!0!==t[b])throw new p("feature-store:unsupported-query","Unsupported layer geometry type",{query:a});return a.outSR?[2,x.checkProjectionSupport(a.geometry&&a.geometry.spatialReference,a.outSR)]:[2]})})};a.canQueryWithRBush=function(a){if(e.isExtent(a))return!0;if(e.isPolygon(a)){var b=
0;for(a=a.rings;b<a.length;b++){var c=a[b];if(5!==c.length||c[0][0]!==c[1][0]||c[0][0]!==c[4][0]||c[2][0]!==c[3][0]||c[0][1]!==c[3][1]||c[0][1]!==c[4][1]||c[1][1]!==c[2][1])return!1}return!0}return!1}})},"esri/layers/graphics/contains":function(){define(["require","exports"],function(v,a){function q(a,h,b,l,e){if(!a)return!1;h=h?b?4:3:b?3:2;b=a.coords;var m=!1,p=0,q=0;for(a=a.lengths;q<a.length;q++){for(var g=a[q],x=p,c=p,d=p+g*h;c<d;c+=h){x=c+h;x===d&&(x=p);var v=b[c],F=b[c+1],G=b[x],x=b[x+1];(F<
e&&x>=e||x<e&&F>=e)&&v+(e-F)/(x-F)*(G-v)<l&&(m=!m)}p+=g*h}return m}Object.defineProperty(a,"__esModule",{value:!0});a.polygonContainsCoords=a.polygonContainsMultipoint=a.polygonContainsPoint=void 0;a.polygonContainsPoint=function(a,h,b,l){return q(a,h,b,l.coords[0],l.coords[1])};a.polygonContainsMultipoint=function(a,h,b,l,e,m){e=e?m?4:3:m?3:2;m=l.coords;l=l.lengths;if(!l)return!1;for(var p=0,u=0;p<l.length;p++,u+=e)if(!q(a,h,b,m[u],m[u+1]))return!1;return!0};a.polygonContainsCoords=q})},"esri/layers/support/FieldsIndex":function(){define(["require",
"exports"],function(v,a){return function(){function a(a){this.fields=a;this._fieldsMap=new Map;this._dateFieldsSet=new Set;this.dateFields=[];if(a){for(var h=[],b=0;b<a.length;b++){var l=a[b],e=l&&l.name;if(e){var m=e.toLowerCase().trim();this._fieldsMap.set(e,l);this._fieldsMap.set(m,l);h.push(m);if("date"===l.type||"esriFieldTypeDate"===l.type)this.dateFields.push(l),this._dateFieldsSet.add(l)}}h.sort();this.uid=h.join(",")}}a.prototype.destroy=function(){this._fieldsMap.clear()};a.prototype.has=
function(a){return null!=this.get(a)};a.prototype.get=function(a){return null!=a?this._fieldsMap.get(a)||this._fieldsMap.get(a.toLowerCase().trim()):void 0};a.prototype.isDateField=function(a){return this._dateFieldsSet.has(this.get(a))};a.prototype.normalizeFieldName=function(a){if(a=this.get(a))return a.name};return a}()})},"esri/layers/graphics/sources/csv/csv":function(){define(["require","exports","tslib"],function(v,a,q){function p(a,b,e){var g,h,c;return q.__generator(this,function(d){switch(d.label){case 0:g=
0,d.label=1;case 1:if(!(g<=a.length))return[3,4];h=a.indexOf(b,g);c=a.substring(g,-1<h?h:void 0);g+=c.length+1;return e&&!c.trim()?[3,3]:[4,c];case 2:d.sent(),d.label=3;case 3:return[3,1];case 4:return[2]}})}function h(a,b){return p(a,b,!1)}Object.defineProperty(a,"__esModule",{value:!0});a.parseRows=a.inferDelimiter=a.readRowParts=a.readRows=void 0;var b=/^\s*"([\S\s]*)"\s*$/,l=/""/g,e=[","," ",";","|","\t"];a.readRows=function(a){return p(a,"\n",!0)};a.readRowParts=h;a.inferDelimiter=function(a){a=
a.trim();for(var b=0,h="",g=0;g<e.length;g++){var l=e[g],c=a.split(l).length;c>b&&(b=c,h=l)}return""===h?null:h};a.parseRows=function(a,e,p){var g,m,c,d,r,u,v,t,I,L,J,R;return q.__generator(this,function(q){switch(q.label){case 0:m=g="",c=0,d=[],q.label=1;case 1:r=a.next();u=r.value;if(v=r.done)return[2];t=h(u,p);a:for(;;){I=t.next();L=I.value;if(J=I.done)break a;g+=m+L;m="";q=c;for(var x=L,C=0,y=void 0,y=x.indexOf('"',0);0<=y;)C++,y=x.indexOf('"',y+1);c=q+C;if(0===c%2){if(0<c)if(R=b.exec(g))d.push(R[1].replace(l,
'"'));else return d=[],g="",c=0,[3,1];else d.push(g);g="";c=0}else m=p}if(0!==c)return[3,3];q=d;x={};C=e.length;for(y=0;y<C;y++)x[e[y]]=q[y];return[4,x];case 2:return q.sent(),d=[],[3,4];case 3:m="\n",q.label=4;case 4:return[3,1];case 5:return[2]}})}})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define("require exports tslib ../../../../core/has ../../../../core/lang ../../../../symbols/support/defaultsJSON".split(" "),function(v,a,q,p,h,b){Object.defineProperty(a,"__esModule",
{value:!0});a.createDefaultTemplate=a.createDefaultAttributesFunction=a.createDrawingInfo=void 0;a.createDrawingInfo=function(a){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===a||"esriGeometryMultipoint"===a?b.defaultPointSymbolJSON:"esriGeometryPolyline"===a?b.defaultPolylineSymbolJSON:b.defaultPolygonSymbolJSON}}};a.createDefaultAttributesFunction=function(a,b){if(p("csp-restrictions"))return function(){var e;return q.__assign((e={},e[b]=null,e),a)};try{var e="this."+b+" \x3d null;",
h;for(h in a)var l=h.indexOf(".")?'["'+h+'"]':"."+h,e=e+("this"+l+" \x3d "+JSON.stringify(a[h])+";");var g=new Function(e);return function(){return new g}}catch(x){return function(){var c;return q.__assign((c={},c[b]=null,c),a)}}};a.createDefaultTemplate=function(a){void 0===a&&(a={});return[{name:"New Feature",description:"",prototype:{attributes:h.clone(a)}}]}})},"esri/symbols/support/defaultsJSON":function(){define(["require","exports"],function(v,a){Object.defineProperty(a,"__esModule",{value:!0});
a.errorPolygonSymbolJSON=a.errorPolylineSymbolJSON=a.errorPointSymbolJSON=a.defaultTextSymbolJSON=a.defaultPolygonSymbolJSON=a.defaultPolylineSymbolJSON=a.defaultPointSymbolJSON=a.defaultOutlineColor=a.defaultColor=void 0;a.defaultColor=[252,146,31,255];a.defaultOutlineColor=[153,153,153,255];a.defaultPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",size:6,color:a.defaultColor,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}};a.defaultPolylineSymbolJSON={type:"esriSLS",
style:"esriSLSSolid",width:.75,color:a.defaultColor};a.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};a.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};a.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",
color:[0,0,0,255],outline:null,size:10.5};a.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5};a.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}})},"*noref":1}});
define("require exports tslib ../../../../geometry ../../../../request ../../../../core/Error ../../../../core/has ../../../../core/lang ../../../../core/number ../../../../core/promiseUtils ../../../../core/urlUtils ../../../../geometry/projection ../../../../geometry/geometryAdapters/json ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/support/webMercatorUtils ../../OptimizedFeature ../../OptimizedGeometry ../../data/FeatureStore ../../data/projectionSupport ../../data/QueryEngine ../csv/csv ./clientSideDefaults ../../../support/FieldsIndex".split(" "),function(v,
a,q,p,h,b,l,e,m,r,u,g,x,c,d,H,F,G,t,I,L,J,R){Object.defineProperty(a,"__esModule",{value:!0});a.csvLongitudeFieldNames=a.csvLatitudeFieldNames=void 0;var C=J.createDrawingInfo("esriGeometryPoint"),M=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong"];a.csvLatitudeFieldNames="lat latitude y ycenter latitude83 latdecdeg point-y".split(" ");a.csvLongitudeFieldNames="lon lng long longitude x xcenter longitude83 longdecdeg point-x".split(" ");
var O=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,y=[0,0],E=function(){return function(a,b){this.x=a;this.y=b}}(),A=function(){var a=m._parseInfo(),b=new RegExp("^"+a.regexp+"$"),c=new RegExp("["+a.group+"\\s\\xa0]","g"),d=a.factor;return function(e){e=b.exec(e);a.factor=d;if(!e)return NaN;var g=e[1];if(!e[1]){if(!e[2])return NaN;g=e[2];a.factor*=-1}g=g.replace(c,"").replace(a.decimal,
".");return+g*a.factor}}(),n=function(){return"isInteger"in Number?Number.isInteger:function(a){return"number"===typeof a&&isFinite(a)&&Math.floor(a)===a}}();v=function(){function m(){this._queryEngine=this._fieldsIndex=null}m.prototype.destroy=function(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy();this._fieldsIndex=this._queryEngine=null};m.prototype.load=function(a,b){void 0===b&&(b={});return q.__awaiter(this,void 0,void 0,function(){var c,d,e,g,h;return q.__generator(this,
function(l){switch(l.label){case 0:return[4,r.all([this._fetch(a.url,b),this._checkProjection(b&&a.parsing&&a.parsing.spatialReference)])];case 1:return c=l.sent()[0],d=this._parse(c,a.parsing),this._queryEngine=this._createQueryEngine(c,d),d.layerDefinition.extent=this._queryEngine.fullExtent,d.layerDefinition.timeInfo&&(e=this._queryEngine.timeExtent,g=e.start,h=e.end,d.layerDefinition.timeInfo.timeExtent=[g,h]),[2,d]}})})};m.prototype.applyEdits=function(){return q.__awaiter(this,void 0,void 0,
function(){return q.__generator(this,function(a){throw new b("csv-source:editing-not-supported","applyEdits() is not supported on CSVLayer");})})};m.prototype.queryFeatures=function(a,b){void 0===a&&(a={});void 0===b&&(b={});return q.__awaiter(this,void 0,void 0,function(){return q.__generator(this,function(c){return[2,this._queryEngine.executeQuery(a,b.signal)]})})};m.prototype.queryFeatureCount=function(a,b){void 0===a&&(a={});void 0===b&&(b={});return q.__awaiter(this,void 0,void 0,function(){return q.__generator(this,
function(c){return[2,this._queryEngine.executeQueryForCount(a,b.signal)]})})};m.prototype.queryObjectIds=function(a,b){void 0===a&&(a={});void 0===b&&(b={});return q.__awaiter(this,void 0,void 0,function(){return q.__generator(this,function(c){return[2,this._queryEngine.executeQueryForIds(a,b.signal)]})})};m.prototype.queryExtent=function(a,b){void 0===a&&(a={});void 0===b&&(b={});return q.__awaiter(this,void 0,void 0,function(){return q.__generator(this,function(c){return[2,this._queryEngine.executeQueryForExtent(a,
b.signal)]})})};m.prototype._fetch=function(a,c){return q.__awaiter(this,void 0,void 0,function(){var d,e;return q.__generator(this,function(g){switch(g.label){case 0:if(!a)throw new b("csv-source:invalid-source","url not defined");d=u.urlToObject(a);return[4,h(d.path,{query:d.query,responseType:"text",signal:c.signal})];case 1:return e=g.sent(),[2,e.data]}})})};m.prototype._parse=function(a,c){void 0===c&&(c={});var d={columnDelimiter:c.columnDelimiter,layerDefinition:null,locationInfo:{latitudeFieldName:c.latitudeField,
longitudeFieldName:c.longitudeField}},g=L.readRows(a),h=g.next().value;if(!h)throw new b("csv","CSV is empty",{csv:a});h=h.trim();if(!c.columnDelimiter){a=L.inferDelimiter(h);if(!a)throw new b("csv-source:invalid-delimiter","Unable to detect the delimiter from CSV");d.columnDelimiter=a}var h=h.split(d.columnDelimiter),l=d.layerDefinition={name:"csv",drawingInfo:C,geometryType:"esriGeometryPoint",objectIdField:null,fields:[],timeInfo:c.timeInfo,extent:{xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,
xmax:Number.NEGATIVE_INFINITY,ymax:Number.NEGATIVE_INFINITY,spatialReference:c.spatialReference||{wkid:102100}}};if(!c.latitudeField||!c.longitudeField){a=this._inferLocationInfo(h);if(!c.longitudeField&&!a.longitudeFieldName||!c.latitudeField&&!a.latitudeFieldName)throw new b("csv","Unable to identify latitudeField and/or longitudeField from CSV");d.locationInfo={longitudeFieldName:c.longitudeField||a.longitudeFieldName,latitudeFieldName:c.latitudeField||a.latitudeFieldName}}g=this._inferFields(g,
d.columnDelimiter,h,d.locationInfo);if(c.fields&&c.fields.length){h=new Map;a=0;for(var m=c.fields;a<m.length;a++)c=m[a],h.set(c.name.toLowerCase(),c);for(a=0;a<g.length;a++)if(c=g[a],m=h.get(c.name.toLowerCase())){var n=c.name;e.mixin(c,m);c.name=n}}l.fields=g;l.fields.some(function(a){return"esriFieldTypeOID"===a.type?(l.objectIdField=a.name,!0):!1})||(c={name:"__OBJECTID",alias:"__OBJECTID",type:"esriFieldTypeOID",editable:!1,nullable:!1},l.objectIdField=c.name,l.fields.unshift(c));this._fieldsIndex=
new R(l.fields);l.timeInfo&&(c=l.timeInfo,c.startTimeField&&((g=this._fieldsIndex.get(c.startTimeField))?(c.startTimeField=g.name,g.type="esriFieldTypeDate"):c.startTimeField=null),c.endTimeField&&((g=this._fieldsIndex.get(c.endTimeField))?(c.endTimeField=g.name,g.type="esriFieldTypeDate"):c.endTimeField=null),c.trackIdField&&(g=this._fieldsIndex.get(c.trackIdField),c.trackIdField=g?g.name:null),c.startTimeField||c.endTimeField||(l.timeInfo=null));return d};m.prototype._inferLocationInfo=function(b){var c=
null,d=null;b.forEach(function(b){var e=b.toLowerCase(),g;g=a.csvLatitudeFieldNames.indexOf(e);-1===g||d||(d=b);g=a.csvLongitudeFieldNames.indexOf(e);-1===g||c||(c=b)});return{longitudeFieldName:c,latitudeFieldName:d}};m.prototype._inferFields=function(a,b,c,d){var e=[];a=L.parseRows(a,c,b);var g=[];a:for(;10>g.length;){b=a.next();if(b.done)break a;g.push(b.value)}a=function(a){if(a===d.longitudeFieldName||a===d.latitudeFieldName)e.push({name:a,type:"esriFieldTypeDouble",alias:a});else{var b=g.map(function(b){return b[a]}),
b=h._inferFieldType(b),c={name:a,type:null,alias:a};switch(b){case "integer":c.type="esriFieldTypeInteger";break;case "double":c.type="esriFieldTypeDouble";break;case "date":c.type="esriFieldTypeDate";c.length=36;break;default:c.type="esriFieldTypeString",c.length=255}e.push(c)}};var h=this;for(b=0;b<c.length;b++)a(c[b]);return e};m.prototype._inferFieldType=function(a){var b=this;if(!a.length)return"string";var c=/[^+-.,0-9]/;return a.map(function(a){var d=!1;if(""!==a){if(c.test(a))d=!0;else{d=
A(a);if(!isNaN(d))return/[.,]/.test(a)||!n(d)||214783647<d||-214783648>d?"double":"integer";if(-1===a.indexOf("E"))d=!0;else if(d=Number(a),isNaN(d))if(-1===a.indexOf(","))d=!0;else if(a=a.replace(",","."),d=Number(a),isNaN(d))d=!0;else return"double";else return"double"}return d&&!/^[-]?\d*[.,]?\d*$/.test(a)&&b._isValidDate(new Date(a),a)?"date":"string"}}).reduce(function(a,b){if(void 0===a||a===b)return b;if("string"===a||"string"===b)return"string";if("double"===a||"double"===b)return"double"})};
m.prototype._isValidDate=function(a,b){if(!a||"[object Date]"!==Object.prototype.toString.call(a)||isNaN(a.getTime()))return!1;a=!0;if(l("chrome")&&/\d+\W*$/.test(b)&&(b=b.match(/[a-zA-Z]{2,}/))){a=!1;for(var c=0;!a&&c<=b.length;)a=!O.test(b[c]),c++;a=!a}return a};m.prototype._createQueryEngine=function(a,b){var e,h=b.locationInfo;e=h.latitudeFieldName;for(var l=h.longitudeFieldName,m=b.layerDefinition,h=m.objectIdField,n=m.fields,q=m.extent,r=m.timeInfo,m=[],t=[],u=new Set,w=new Set,v=[],C=0;C<n.length;C++){var D=
n[C],K=D.name,D=D.type;"esriFieldTypeDate"===D?u.add(K):-1<M.indexOf(D)&&w.add(K);K!==h&&v.push(K)}n=0;a=L.readRows(a);a.next();a=L.parseRows(a,v,b.columnDelimiter);a:for(;;){C=a.next();v=C.value;if(C.done)break a;C=this._parseCoordinateValue(v[e]);K=this._parseCoordinateValue(v[l]);if(null!=K&&null!=C&&!isNaN(C)&&!isNaN(K)){v[e]=C;v[l]=K;for(var J in v)J!==e&&J!==l&&(u.has(J)?(D=new Date(v[J]),v[J]=this._isValidDate(D,v[J])?D.getTime():null):w.has(J)&&(D=A(v[J]),isNaN(D)?v[J]=null:v[J]=D));v[h]=
n;n++;m.push(new E(K,C));t.push(v)}}if(!c.equals({wkid:4326},q.spatialReference))if(c.isWebMercator(q.spatialReference))for(J=0,l=m;J<l.length;J++)u=l[J],e=d.lngLatToXY(u.x,u.y,y),u.x=e[0],u.y=e[1];else m=g.projectMany(x.jsonAdapter,m,p.SpatialReference.WGS84,q.spatialReference,null);e=new G.default({geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1});b=new I.default({fields:b.layerDefinition.fields,geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1,timeInfo:r,objectIdField:h,spatialReference:q.spatialReference||
{wkid:4326},cacheSpatialQueries:!0,featureStore:e});q=[];for(r=0;r<m.length;r++)l=m[r],J=l.x,l=l.y,u=t[r],u[h]=r+1,q.push(new H.default(new F.default([],[J,l]),u,null,u[h]));e.addMany(q);return b};m.prototype._parseCoordinateValue=function(a){if(null==a||""===a)return null;var b=A(a);if(isNaN(b)||181<Math.abs(b))b=parseFloat(a);return b};m.prototype._checkProjection=function(a){return q.__awaiter(this,void 0,void 0,function(){return q.__generator(this,function(d){switch(d.label){case 0:return d.trys.push([0,
2,,3]),[4,t.checkProjectionSupport(c.WGS84,a)];case 1:return d.sent(),[3,3];case 2:throw d.sent(),new b("csv-layer","Projection not supported");case 3:return[2]}})})};return m}();a.default=v});