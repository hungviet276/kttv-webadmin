// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/mixins/ArcGISCachedService":function(){define("require exports tslib ../../geometry ../../core/accessorSupport/decorators ../support/serviceTileInfoProperty ../support/TilemapCache".split(" "),function(h,a,g,k,b,e,d){Object.defineProperty(a,"__esModule",{value:!0});a.ArcGISCachedService=void 0;a.ArcGISCachedService=function(a){return function(a){function f(){var d=null!==a&&a.apply(this,arguments)||this;d.copyright=null;d.minScale=0;d.maxScale=0;d.spatialReference=null;
d.tileInfo=null;d.tilemapCache=null;return d}g.__extends(f,a);f.prototype.readMinScale=function(a,c){return null!=c.minLOD&&null!=c.maxLOD?a:0};f.prototype.readMaxScale=function(a,c){return null!=c.minLOD&&null!=c.maxLOD?a:0};Object.defineProperty(f.prototype,"supportsBlankTile",{get:function(){return 10.2<=this.version},enumerable:!1,configurable:!0});f.prototype.readTilemapCache=function(a,c){return c.capabilities&&-1<c.capabilities.indexOf("Tilemap")?new d.TilemapCache({layer:this}):null};g.__decorate([b.property({json:{read:{source:"copyrightText"}}})],
f.prototype,"copyright",void 0);g.__decorate([b.property()],f.prototype,"minScale",void 0);g.__decorate([b.reader("service","minScale")],f.prototype,"readMinScale",null);g.__decorate([b.property()],f.prototype,"maxScale",void 0);g.__decorate([b.reader("service","maxScale")],f.prototype,"readMaxScale",null);g.__decorate([b.property({type:k.SpatialReference})],f.prototype,"spatialReference",void 0);g.__decorate([b.property({readOnly:!0,dependsOn:["version"]})],f.prototype,"supportsBlankTile",null);
g.__decorate([b.property(e.serviceTileInfoProperty)],f.prototype,"tileInfo",void 0);g.__decorate([b.property()],f.prototype,"tilemapCache",void 0);g.__decorate([b.reader("service","tilemapCache",["capabilities"])],f.prototype,"readTilemapCache",null);g.__decorate([b.property()],f.prototype,"version",void 0);return f=g.__decorate([b.subclass("esri.layers.mixins.ArcGISCachedService")],f)}(a)}})},"esri/layers/support/serviceTileInfoProperty":function(){define(["require","exports","tslib","./TileInfo"],
function(h,a,g,k){function b(a,d,b,m){if(!a)return null;b=d.minScale;var e=d.maxScale,l=d.minLOD,c=d.maxLOD;if(null!=l&&null!=c)return m&&m.ignoreMinMaxLOD?k.fromJSON(a):k.fromJSON(g.__assign(g.__assign({},a),{lods:a.lods.filter(function(a){a=a.level;return null!=a&&a>=l&&a<=c})}));if(0!==b&&0!==e){var f=b?Math.round(1E4*b)/1E4:Infinity,q=e?Math.round(1E4*e)/1E4:-Infinity;return k.fromJSON(g.__assign(g.__assign({},a),{lods:a.lods.filter(function(c){c=Math.round(1E4*c.scale)/1E4;return c<=f&&c>=q})}))}return k.fromJSON(a)}
Object.defineProperty(a,"__esModule",{value:!0});a.readServiceTileInfo=a.serviceTileInfoProperty=void 0;a.serviceTileInfoProperty={type:k,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:b}}}}};a.readServiceTileInfo=b})},"esri/layers/support/TileInfo":function(){define("require exports tslib ../../geometry ../../core/jsonMap ../../core/JSONSupport ../../core/unitUtils ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(h,a,g,k,b,e,d,f,m,n,l,c,p){var q=new b.default({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});return function(a){function b(c){c=a.call(this,c)||this;c.dpi=96;c.format=null;c.origin=null;c.minScale=0;c.maxScale=0;c.size=null;c.spatialReference=null;return c}g.__extends(b,a);e=b;b.create=function(c){void 0===
c&&(c={size:256,spatialReference:k.SpatialReference.WebMercator});var a=c.resolutionFactor||1,b=c.scales,f=c.size||256,m=c.spatialReference||k.SpatialReference.WebMercator;if(!l.isValid(m)){a=[];if(b)for(c=0;c<b.length;c++){var p=b[c];a.push({level:c,scale:p,resolution:p})}else{var n=5E-4;for(c=23;0<=c;c--)a.unshift({level:c,scale:n,resolution:n}),n*=2}return new e({dpi:96,lods:a,origin:new k.Point(0,0,m),size:[f,f],spatialReference:m})}var p=l.getInfo(m),g=c.origin?new k.Point({x:c.origin.x,y:c.origin.y,
spatialReference:m}):p?new k.Point({x:p.origin[0],y:p.origin[1],spatialReference:m}):new k.Point({x:0,y:0,spatialReference:m}),q=1/(39.37*d.getMetersPerUnitForSR(m)*96),x=[];if(b)for(c=0;c<b.length;c++)p=b[c],n=p*q,x.push({level:c,scale:p,resolution:n});else for(p=l.isGeographic(m)?512/f*5.916575275917094E8:256/f*5.91657527591555E8,b=Math.ceil(24/a),x.push({level:0,scale:p,resolution:p*q}),c=1;c<b;c++)p/=Math.pow(2,a),n=p*q,x.push({level:c,scale:p,resolution:n});return new e({dpi:96,lods:x,origin:g,
size:[f,f],spatialReference:m})};Object.defineProperty(b.prototype,"isWrappable",{get:function(){var c=this.spatialReference,a=this.origin;if(c&&a){var b=l.getInfo(c);return c.isWrappable&&Math.abs(b.origin[0]-a.x)<=b.dx}return!1},enumerable:!1,configurable:!0});b.prototype.readOrigin=function(c,a){return k.Point.fromJSON(g.__assign({spatialReference:a.spatialReference},c))};Object.defineProperty(b.prototype,"lods",{set:function(c){var a=this,b=0,d=0,e=[];this._levelToLOD={};c&&(b=-Infinity,d=Infinity,
c.forEach(function(c){e.push(c.scale);b=c.scale>b?c.scale:b;d=c.scale<d?c.scale:d;a._levelToLOD[c.level]=c}));this._set("scales",e);this._set("minScale",b);this._set("maxScale",d);this._set("lods",c);this._initializeUpsampleLevels()},enumerable:!1,configurable:!0});b.prototype.readSize=function(c,a){return[a.cols,a.rows]};b.prototype.writeSize=function(c,a){a.cols=c[0];a.rows=c[0]};b.prototype.zoomToScale=function(c){var a=this.scales;if(0>=c)return a[0];if(c>=a.length)return a[a.length-1];var b=
Math.round(c);return a[b]+(b-c)*(a[Math.round(c-.5)]-a[b])};b.prototype.scaleToZoom=function(c){for(var a=this.scales,b=a.length-1,d=0;d<b;d++){var e=a[d],l=a[d+1];if(e<=c)break;if(l===c)return d+1;if(e>c&&l<c)return d+1-(c-l)/(e-l)}return d};b.prototype.snapScale=function(c,a){void 0===a&&(a=.95);c=this.scaleToZoom(c);return c%Math.floor(c)>=a?this.zoomToScale(Math.ceil(c)):this.zoomToScale(Math.floor(c))};b.prototype.tileAt=function(a,b,d,e){var f=this.lodAt(a);if(!f)return null;var m;if("number"===
typeof b)m=b,b=d;else{if(l.equals(b.spatialReference,this.spatialReference))m=b.x,b=b.y;else{e=c.project(b,this.spatialReference);if(!e)return null;m=e.x;b=e.y}e=d}d=f.resolution*this.size[0];f=f.resolution*this.size[1];e||(e={id:null,level:0,row:0,col:0,extent:n.create()});e.level=a;e.row=Math.floor((this.origin.y-b)/f+.001);e.col=Math.floor((m-this.origin.x)/d+.001);this.updateTileInfo(e);return e};b.prototype.updateTileInfo=function(c){var a=this.lodAt(c.level);if(a){var b=a.resolution*this.size[0],
a=a.resolution*this.size[1];c.id=c.level+"/"+c.row+"/"+c.col;c.extent||(c.extent=n.create());c.extent[0]=this.origin.x+c.col*b;c.extent[1]=this.origin.y-(c.row+1)*a;c.extent[2]=c.extent[0]+b;c.extent[3]=c.extent[1]+a}};b.prototype.upsampleTile=function(c){var a=this._upsampleLevels[c.level];if(!a||-1===a.parentLevel)return!1;c.level=a.parentLevel;c.row=Math.floor(c.row/a.factor+.001);c.col=Math.floor(c.col/a.factor+.001);this.updateTileInfo(c);return!0};b.prototype.getTileBounds=function(c,a){var b=
this.lodAt(a.level).resolution,d=b*this.size[0],b=b*this.size[1];c[0]=this.origin.x+a.col*d;c[1]=this.origin.y-(a.row+1)*b;c[2]=c[0]+d;c[3]=c[1]+b;return c};b.prototype.lodAt=function(c){return this._levelToLOD&&this._levelToLOD[c]||null};b.prototype.clone=function(){return e.fromJSON(this.write({}))};b.prototype._initializeUpsampleLevels=function(){var c=this.lods;this._upsampleLevels=[];for(var a=null,b=0;b<c.length;b++){var d=c[b];this._upsampleLevels[d.level]={parentLevel:a?a.level:-1,factor:a?
a.resolution/d.resolution:0};a=d}};var e;g.__decorate([f.property({type:Number,json:{write:!0}})],b.prototype,"compressionQuality",void 0);g.__decorate([f.property({type:Number,json:{write:!0}})],b.prototype,"dpi",void 0);g.__decorate([f.property({type:String,json:{read:q.read,write:q.write,origins:{"web-scene":{read:!1,write:!1}}}})],b.prototype,"format",void 0);g.__decorate([f.property({readOnly:!0,dependsOn:["spatialReference","origin"]})],b.prototype,"isWrappable",null);g.__decorate([f.property({type:k.Point,
json:{write:!0}})],b.prototype,"origin",void 0);g.__decorate([f.reader("origin")],b.prototype,"readOrigin",null);g.__decorate([f.property({type:[p],value:null,json:{write:!0}})],b.prototype,"lods",null);g.__decorate([f.property({readOnly:!0})],b.prototype,"minScale",void 0);g.__decorate([f.property({readOnly:!0})],b.prototype,"maxScale",void 0);g.__decorate([f.property({readOnly:!0})],b.prototype,"scales",void 0);g.__decorate([f.property({cast:function(c){return Array.isArray(c)?c:"number"===typeof c?
[c,c]:[256,256]}})],b.prototype,"size",void 0);g.__decorate([f.reader("size",["rows","cols"])],b.prototype,"readSize",null);g.__decorate([f.writer("size",{cols:{type:m.Integer},rows:{type:m.Integer}})],b.prototype,"writeSize",null);g.__decorate([f.property({type:k.SpatialReference,json:{write:!0}})],b.prototype,"spatialReference",void 0);return b=e=g.__decorate([f.subclass("esri.layers.support.TileInfo")],b)}(e.JSONSupport)})},"esri/geometry/support/aaBoundingRect":function(){define(["require","exports",
"../../core/compilerUtils","../Extent"],function(h,a,g,k){function b(c){void 0===c&&(c=a.ZERO);return[c[0],c[1],c[2],c[3]]}function e(c){return c[0]>=c[2]?0:c[2]-c[0]}function d(c){return c[1]>=c[3]?0:c[3]-c[1]}function f(c,a,b){return a>=c[0]&&b>=c[1]&&a<=c[2]&&b<=c[3]}function m(c,a){c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];return c}function n(c){return 4===c.length}function l(c,a,b){return c<a?a:c>b?b:c}Object.defineProperty(a,"__esModule",{value:!0});a.UNIT=a.ZERO=a.NEGATIVE_INFINITY=a.POSITIVE_INFINITY=
a.equals=a.isPoint=a.is=a.empty=a.set=a.setMax=a.setMin=a.pad=a.offset=a.size=a.distance=a.intersection=a.contains=a.intersects=a.containsPointWithMargin=a.containsXY=a.containsPointObject=a.containsPoint=a.center=a.area=a.diameter=a.height=a.width=a.allFinite=a.expandWithNestedArray=a.expand=a.expandPointInPlace=a.toExtent=a.fromExtent=a.fromValues=a.clone=a.create=void 0;a.create=b;a.clone=function(c){return[c[0],c[1],c[2],c[3]]};a.fromValues=function(c,a,d,e,l){void 0===l&&(l=b());l[0]=c;l[1]=
a;l[2]=d;l[3]=e;return l};a.fromExtent=function(c,a){void 0===a&&(a=b());a[0]=c.xmin;a[1]=c.ymin;a[2]=c.xmax;a[3]=c.ymax;return a};a.toExtent=function(c,a){return new k({xmin:c[0],ymin:c[1],xmax:c[2],ymax:c[3],spatialReference:a})};a.expandPointInPlace=function(c,a){a[0]<c[0]&&(c[0]=a[0]);a[0]>c[2]&&(c[2]=a[0]);a[1]<c[1]&&(c[1]=a[1]);a[1]>c[3]&&(c[3]=a[1])};a.expand=function(c,a,b){void 0===b&&(b=c);if("length"in a)if(n(a))b[0]=Math.min(c[0],a[0]),b[1]=Math.min(c[1],a[1]),b[2]=Math.max(c[2],a[2]),
b[3]=Math.max(c[3],a[3]);else{if(2===a.length||3===a.length)b[0]=Math.min(c[0],a[0]),b[1]=Math.min(c[1],a[1]),b[2]=Math.max(c[2],a[0]),b[3]=Math.max(c[3],a[1])}else switch(a.type){case "extent":b[0]=Math.min(c[0],a.xmin);b[1]=Math.min(c[1],a.ymin);b[2]=Math.max(c[2],a.xmax);b[3]=Math.max(c[3],a.ymax);break;case "point":b[0]=Math.min(c[0],a.x);b[1]=Math.min(c[1],a.y);b[2]=Math.max(c[2],a.x);b[3]=Math.max(c[3],a.y);break;default:g.neverReached(a)}return b};a.expandWithNestedArray=function(c,a,b){void 0===
b&&(b=c);var d=a.length,e=c[0],l=c[1],f=c[2];c=c[3];for(var m=0;m<d;m++){var n=a[m],e=Math.min(e,n[0]),l=Math.min(l,n[1]),f=Math.max(f,n[0]);c=Math.max(c,n[1])}b[0]=e;b[1]=l;b[2]=f;b[3]=c;return b};a.allFinite=function(c){for(var a=0;4>a;a++)if(!isFinite(c[a]))return!1;return!0};a.width=e;a.height=d;a.diameter=function(c){var a=e(c);c=d(c);return Math.sqrt(a*a+c*c)};a.area=function(c){return e(c)*d(c)};a.center=function(c,a){void 0===a&&(a=[0,0]);a[0]=(c[0]+c[2])/2;a[1]=(c[1]+c[3])/2;return a};a.containsPoint=
function(a,b){return f(a,b[0],b[1])};a.containsPointObject=function(a,b){return f(a,b.x,b.y)};a.containsXY=f;a.containsPointWithMargin=function(a,b,d){return b[0]>=a[0]-d&&b[1]>=a[1]-d&&b[0]<=a[2]+d&&b[1]<=a[3]+d};a.intersects=function(a,b){return Math.max(b[0],a[0])<=Math.min(b[2],a[2])&&Math.max(b[1],a[1])<=Math.min(b[3],a[3])};a.contains=function(a,b){return b[0]>=a[0]&&b[2]<=a[2]&&b[1]>=a[1]&&b[3]<=a[3]};a.intersection=function(a,b,d){void 0===d&&(d=a);var c=b[0],e=b[1],f=b[2];b=b[3];d[0]=l(a[0],
c,f);d[1]=l(a[1],e,b);d[2]=l(a[2],c,f);d[3]=l(a[3],e,b);return d};a.distance=function(a,b){var c=(a[1]+a[3])/2,l=Math.max(Math.abs(b[0]-(a[0]+a[2])/2)-e(a)/2,0);a=Math.max(Math.abs(b[1]-c)-d(a)/2,0);return Math.sqrt(l*l+a*a)};a.size=function(a,b){b[0]=a[2]-a[0];b[1]=a[3]-a[1]};a.offset=function(a,b,d,e){void 0===e&&(e=a);e[0]=a[0]+b;e[1]=a[1]+d;e[2]=a[2]+b;e[3]=a[3]+d;return e};a.pad=function(a,b,d){void 0===d&&(d=a);d[0]=a[0]-b;d[1]=a[1]-b;d[2]=a[2]+b;d[3]=a[3]+b;return d};a.setMin=function(a,b,
d){void 0===d&&(d=a);d[0]=b[0];d[1]=b[1];d!==a&&(d[2]=a[2],d[3]=a[3]);return d};a.setMax=function(a,b,d){void 0===d&&(d=a);d[2]=b[0];d[3]=b[1];d!==a&&(d[0]=a[0],d[1]=a[1]);return a};a.set=m;a.empty=function(c){return c?m(c,a.NEGATIVE_INFINITY):b(a.NEGATIVE_INFINITY)};a.is=n;a.isPoint=function(a){return(0===e(a)||!isFinite(a[0]))&&(0===d(a)||!isFinite(a[1]))};a.equals=function(a,b,d){if(null==a||null==b)return a===b;if(!n(a)||!n(b))return!1;if(d)for(var c=0;c<a.length;c++){if(!d(a[c],b[c]))return!1}else for(c=
0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0};a.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];a.NEGATIVE_INFINITY=[Infinity,Infinity,-Infinity,-Infinity];a.ZERO=[0,0,0,0];a.UNIT=[0,0,1,1]})},"esri/layers/support/LOD":function(){define("require exports tslib ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),function(h,a,g,k,b,e){return function(a){function d(b){b=a.call(this,b)||this;b.level=0;b.levelValue=null;b.resolution=
0;b.scale=0;return b}g.__extends(d,a);m=d;d.prototype.clone=function(){return new m({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};var m;g.__decorate([b.property({type:e.Integer,json:{write:!0}})],d.prototype,"level",void 0);g.__decorate([b.property({type:String,json:{write:!0}})],d.prototype,"levelValue",void 0);g.__decorate([b.property({type:Number,json:{write:!0}})],d.prototype,"resolution",void 0);g.__decorate([b.property({type:Number,json:{write:!0}})],
d.prototype,"scale",void 0);return d=m=g.__decorate([b.subclass("esri.layers.support.LOD")],d)}(k.JSONSupport)})},"esri/layers/support/TilemapCache":function(){define("require exports tslib ../../request ../../core/Accessor ../../core/Error ../../core/Handles ../../core/Logger ../../core/LRUCache ../../core/PooledArray ../../core/promiseUtils ../../core/scheduling ../../core/urlUtils ../../core/watchUtils ../../core/accessorSupport/decorators ./Tilemap".split(" "),function(h,a,g,k,b,e,d,f,m,n,l,c,
p,q,r,t){Object.defineProperty(a,"__esModule",{value:!0});a.TilemapCache=void 0;var y=f.getLogger("esri.layers.support.TilemapCache");h=function(a){function b(b){b=a.call(this,b)||this;b._handles=new d;b._pendingTilemapRequests={};b._availableLevels={};b.levels=5;b.cacheByteSize=2097152;b.request=k;b._prefetchingEnabled=!0;return b}g.__extends(b,a);f=b;b.prototype.initialize=function(){var a=this;this._tilemapCache=new m(this.cacheByteSize);this._handles.add([this.watch(["layer.parsedUrl","layer.tileServers?"],
function(){return a._initializeTilemapDefinition()}),q.init(this,"layer.tileInfo.lods",function(b){return a._initializeAvailableLevels(b)},!0)]);this._initializeTilemapDefinition()};b.prototype.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null)};b.prototype.castLevels=function(a){return 2>=a?(y.error("Minimum levels for Tilemap is 3, but got ",a),3):a};Object.defineProperty(b.prototype,"size",{get:function(){return 1<<this.levels},enumerable:!1,configurable:!0});b.prototype.fetchTilemap=
function(a,b,c,d){var f=this;if(!this._availableLevels[a])return l.reject(new e("tilemap-cache:level-unavailable","Level "+a+" is unavailable in the service"));var m=this._tmpTilemapDefinition;if(a=this._tilemapFromCache(a,b,c,m))return l.resolve(a);var n=d&&d.signal;d=g.__assign(g.__assign({},d),{signal:null});return l.create(function(a,b){l.onAbort(n,function(){return b(l.createAbortError())});var c=t.tilemapDefinitionId(m),e=f._pendingTilemapRequests[c];if(!e){var e=t.Tilemap.fromDefinition(m,
d).then(function(a){f._tilemapCache.put(c,a,a.byteSize);return a}),k=function(){return delete f._pendingTilemapRequests[c]};f._pendingTilemapRequests[c]=e;e.then(k,k)}e.then(a,b)})};b.prototype.getAvailability=function(a,b,c){return this._availableLevels[a]?(a=this._tilemapFromCache(a,b,c,this._tmpTilemapDefinition))?a.getAvailability(b,c):"unknown":"unavailable"};b.prototype.getAvailabilityUpsample=function(a,b,c,d){d.level=a;d.row=b;d.col=c;a=this.layer.tileInfo;for(a.updateTileInfo(d);;)if(b=this.getAvailability(d.level,
d.row,d.col),"unavailable"===b){if(!a.upsampleTile(d))return"unavailable"}else return b};b.prototype.fetchAvailability=function(a,b,c,d){return this._availableLevels[a]?this.fetchTilemap(a,b,c,d).catch(function(a){return a}).then(function(d){if(d instanceof t.Tilemap)return d=d.getAvailability(b,c),"unavailable"===d?l.reject(new e("tile-map:tile-unavailable","Tile is not available",{level:a,row:b,col:c})):d;if(l.isAbortError(d))throw d;return"unknown"}):l.reject(new e("tilemap-cache:level-unavailable",
"Level "+a+" is unavailable in the service"))};b.prototype.fetchAvailabilityUpsample=function(a,b,c,d,e){var f=this;d.level=a;d.row=b;d.col=c;var m=this.layer.tileInfo;m.updateTileInfo(d);var n=this.fetchAvailability(a,b,c,e).catch(function(a){if(l.isAbortError(a))throw a;if(m.upsampleTile(d))return f.fetchAvailabilityUpsample(d.level,d.row,d.col,d);throw a;});this._fetchAvailabilityUpsamplePrefetch(d.id,a,b,c,e,n);return n};b.prototype._fetchAvailabilityUpsamplePrefetch=function(a,b,d,e,m,n){return g.__awaiter(this,
void 0,void 0,function(){var k,p,h,r,t,u,q,w,y,v;return g.__generator(this,function(z){switch(z.label){case 0:if(!this._prefetchingEnabled)return[2];k="prefetch-"+a;if(this._handles.has(k))return[2];p=l.createAbortController();n.then(function(){return p.abort()},function(){return p.abort()});h=!1;r={remove:function(){h||(h=!0,p.abort())}};this._handles.add(r,k);z.label=1;case 1:return z.trys.push([1,3,,4]),[4,c.waitTicks(10,p.signal)];case 2:return z.sent(),[3,4];case 3:return z.sent(),[3,4];case 4:h||
(h=!0,this._handles.remove(k));if(l.isAborted(p))return[2];t={id:a,level:b,row:d,col:e};u=g.__assign(g.__assign({},m),{signal:p.signal});q=this.layer.tileInfo;w=function(a){var b=y.fetchAvailability(t.level,t.row,t.col,u);f._prefetches.push(b);a=function(){f._prefetches.removeUnordered(b)};b.then(a,a)};y=this;for(v=0;f._prefetches.length<f._maxPrefetch&&q.upsampleTile(t);++v)w(v);return[2]}})})};b.prototype._initializeTilemapDefinition=function(){if(this.layer.parsedUrl){var a=this.layer.parsedUrl,
b=a.query;this._tilemapCache.clear();this._tmpTilemapDefinition={service:{url:a.path,query:b?p.objectToQuery(b):null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}};b.prototype._tilemapFromCache=function(a,b,c,d){d.level=a;d.row=b-b%this.size;d.col=c-c%this.size;a=t.tilemapDefinitionId(d);return this._tilemapCache.get(a)};b.prototype._initializeAvailableLevels=function(a){var b=this;this._availableLevels={};a&&a.forEach(function(a){return b._availableLevels[a.level]=
!0})};Object.defineProperty(b.prototype,"test",{get:function(){var a=this;return{get prefetchingEnabled(){return a._prefetchingEnabled},set prefetchingEnabled(b){a._prefetchingEnabled=b},hasTilemap:function(b,c,d){return!!a._tilemapFromCache(b,c,d,a._tmpTilemapDefinition)}}},enumerable:!1,configurable:!0});var f;b._maxPrefetch=4;b._prefetches=new n({initialSize:f._maxPrefetch});g.__decorate([r.property({constructOnly:!0,type:Number})],b.prototype,"levels",void 0);g.__decorate([r.cast("levels")],b.prototype,
"castLevels",null);g.__decorate([r.property({readOnly:!0,dependsOn:["levels"],type:Number})],b.prototype,"size",null);g.__decorate([r.property({constructOnly:!0,type:Number})],b.prototype,"cacheByteSize",void 0);g.__decorate([r.property({constructOnly:!0})],b.prototype,"layer",void 0);g.__decorate([r.property({constructOnly:!0})],b.prototype,"request",void 0);return b=f=g.__decorate([r.subclass("esri.layers.support.TilemapCache")],b)}(b);a.TilemapCache=h})},"esri/layers/support/Tilemap":function(){define("require exports tslib ../../request ../../core/arrayUtils ../../core/Error ../../core/lang".split(" "),
function(h,a,g,k,b,e,d){function f(a){var b;"vector-tile"===a.service.type?b=a.service.url+"/tilemap/"+a.level+"/"+a.row+"/"+a.col+"/"+a.width+"/"+a.height:(b=a.service.tileServers,b=(b&&b.length?b[a.row%b.length]:a.service.url)+"/tilemap/"+a.level+"/"+a.row+"/"+a.col+"/"+a.width+"/"+a.height);(a=a.service.query)&&(b=b+"?"+a);return b}Object.defineProperty(a,"__esModule",{value:!0});a.tilemapDefinitionUrl=a.tilemapDefinitionId=a.Tilemap=void 0;h=function(){function a(){this.location={left:0,top:0,
width:0,height:0};this._allAvailability="unknown";this.byteSize=40}a.prototype.getAvailability=function(a,b){if("unknown"!==this._allAvailability)return this._allAvailability;a=(a-this.location.top)*this.location.width+(b-this.location.left);b=a>>3;var c=this._tileAvailabilityBitSet;return 0>b||b>c.length?"unknown":c[b]&1<<a%8?"available":"unavailable"};a.prototype._updateFromData=function(a){for(var b=!0,c=!0,d=new Uint8Array(Math.ceil(this.location.width*this.location.height/8)),e=0,f=0;f<a.length;f++){var m=
f%8;a[f]?(c=!1,d[e]|=1<<m):b=!1;7===m&&++e}c?this._allAvailability="unavailable":b?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=d,this.byteSize+=d.length)};a.fromDefinition=function(d,l){var c=d.service.request||k,m=d.row,n=d.col,h=d.width,t=d.height,y={query:{f:"json"}};l=l?g.__assign(g.__assign({},y),l):y;return c(f(d),l).then(function(a){return a.data}).catch(function(a){if(a&&a.details&&422===a.details.httpStatus)return{location:{top:m,left:n,
width:h,height:t},valid:!0,data:b.constant(h*t,0)};throw a;}).then(function(b){if(b.location&&(b.location.top!==m||b.location.left!==n||b.location.width!==h||b.location.height!==t))throw new e("tilemap:location-mismatch","Tilemap response for different location than requested",{response:b,definition:{top:m,left:n,width:h,height:t}});return a.fromJSON(b)})};a.fromJSON=function(b){a.validateJSON(b);var e=new a;e.location=Object.freeze(d.clone(b.location));e._updateFromData(b.data);return Object.freeze(e)};
a.validateJSON=function(a){if(!a||!a.location)throw new e("tilemap:missing-location","Location missing from tilemap response");if(!1===a.valid)throw new e("tilemap:invalid","Tilemap response was marked as invalid");if(!a.data)throw new e("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(a.data))throw new e("tilemap:data-mismatch","Data must be an array of numbers");if(a.data.length!==a.location.width*a.location.height)throw new e("tilemap:data-mismatch","Number of data items does not match width/height of tilemap");
};return a}();a.Tilemap=h;a.tilemapDefinitionId=function(a){return a.level+"/"+a.row+"/"+a.col+"/"+a.width+"/"+a.height};a.tilemapDefinitionUrl=f;a.default=h})},"esri/layers/support/SpriteSource":function(){define("require exports tslib ../../request ../../core/Error ../../core/has ../../core/Logger ../../core/promiseUtils".split(" "),function(h,a,g,k,b,e,d,f){Object.defineProperty(a,"__esModule",{value:!0});var m=d.getLogger("esri.layers.support.SpriteSource");h=function(){function a(a,b){this.baseURL=
a;this.devicePixelRatio=b;this._isRetina=!1;this._spritesData={};this.height=this.width=this.image=null;this.loadStatus="not-loaded"}Object.defineProperty(a.prototype,"spriteNames",{get:function(){var a=[],b;for(b in this._spritesData)a.push(b);a.sort();return a},enumerable:!1,configurable:!0});a.prototype.getSpriteInfo=function(a){return this._spritesData[a]};a.prototype.load=function(a){return g.__awaiter(this,void 0,void 0,function(){return g.__generator(this,function(b){switch(b.label){case 0:if(!this.baseURL)return this.loadStatus=
"failed",[2];this.loadStatus="loading";b.label=1;case 1:return b.trys.push([1,3,,4]),[4,this._loadSprites(a)];case 2:return b.sent(),this.loadStatus="loaded",[3,4];case 3:return b.sent(),this.loadStatus="failed",[3,4];case 4:return[2]}})})};a.prototype._loadSprites=function(a){var d=this;this._isRetina=1.15<this.devicePixelRatio?!0:!1;var l=this.baseURL,n=this._isRetina?"@2x":"",h=""+l+n+".png";return f.all([k(l+n+".json",a),k(h,g.__assign({responseType:"image"},a))]).then(function(a){var c=a[0];
a=a[1];var k=Object.keys(c.data);if(!k||0===k.length||1===k.length&&"_ssl"===k[0]||!a||!a.data)return d._spritesData=d.image=null,d.width=d.height=0,f.resolve(null);d._spritesData=c.data;c=a.data;a=Math.max(e("esri-webgl-max-texture-size"),4096);if(c.width>a||c.height>a)throw c="Sprite resource for style "+l+" is bigger than the maximum allowed of "+a+" pixels}",m.error(c),new b("SpriteSource",c);d.width=c.width;d.height=c.height;a=document.createElement("canvas");k=a.getContext("2d");a.width=c.width;
a.height=c.height;k.drawImage(c,0,0,c.width,c.height);c=k.getImageData(0,0,c.width,c.height);c=new Uint8Array(c.data);for(k=0;k<c.length;k+=4)a=c[k+3]/255,c[k]*=a,c[k+1]*=a,c[k+2]*=a;d.image=c})};return a}();a.default=h})},"esri/layers/support/vectorTileLayerLoader":function(){define("require exports tslib ../../config ../../request ../../core/promiseUtils ../../core/urlUtils ../../views/2d/engine/vectorTiles/style/VectorTileSource".split(" "),function(h,a,g,k,b,e,d,f){function m(a){a&&(a=d.getOrigin(a),
q&&-1===q.indexOf(a)&&q.push(a))}function n(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];for(var b=void 0,c=0;c<a.length;++c)d.isProtocolRelative(a[c])?b&&(b=b.split("://")[0]+":"+a[c].trim()):b=d.isAbsolute(a[c])?a[c]:d.join(b,a[c]);return d.removeTrailingSlash(b)}function l(a,f,l,k,n){return g.__awaiter(this,void 0,void 0,function(){var h,r,t,q,u,v;return g.__generator(this,function(w){switch(w.label){case 0:e.throwIfAborted(n);if("string"!==typeof l)return[3,2];q=d.normalize(l);
m(q);u=d.urlToObject(q);return[4,b(u.path,g.__assign({query:{f:"json"},responseType:"json"},n))];case 1:return t=w.sent(),r=h=q,[3,3];case 2:t={data:l},h=l.jsonUrl||null,r=k,w.label=3;case 3:return v=t.data,t.ssl&&(h&&(h=h.replace(/^http:/i,"https:")),r&&(r=r.replace(/^http:/i,"https:"))),v.sources?(a.styleUrl=h||null,[2,c(a,v,r,n)]):v.sources?[2,e.reject("You must specify the URL or the JSON for a service or for a style.")]:a.sourceUrl?[2,p(a,v,r,!1,f,n)]:(a.sourceUrl=h||null,[2,p(a,v,r,!0,f,n)])}})})}
function c(a,b,c,f){return g.__awaiter(this,void 0,void 0,function(){var k,p,h,r,q,u;return g.__generator(this,function(g){switch(g.label){case 0:k=c?d.removeFile(c):d.appBaseUrl;a.styleBase=k;a.style=b;a.styleUrl&&m(a.styleUrl);p=[];if(!b.sources||!b.sources.esri)return[3,3];h=b.sources.esri;return h.url?[4,l(a,"esri",n(k,h.url),void 0,f)]:[3,2];case 1:return g.sent(),[3,3];case 2:p.push(l(a,"esri",h,k,f)),g.label=3;case 3:r=0;for(q=Object.keys(b.sources);r<q.length;r++)u=q[r],"esri"!==u&&"vector"===
b.sources[u].type&&(b.sources[u].url?p.push(l(a,u,n(k,b.sources[u].url),void 0,f)):p.push(l(a,u,b.sources[u],k,f)));return[4,e.all(p)];case 4:return g.sent(),[2]}})})}function p(a,b,c,k,p,h){return g.__awaiter(this,void 0,void 0,function(){var q,r,w,u;return g.__generator(this,function(g){q=c?d.removeTrailingSlash(c)+"/":d.appBaseUrl;g=q;if(b.hasOwnProperty("tileInfo"))r=b;else{for(var t={xmin:-2.0037507067161843E7,ymin:-2.0037507067161843E7,xmax:2.0037507067161843E7,ymax:2.0037507067161843E7,spatialReference:{wkid:102100}},
v=78271.51696400007,A=2.958287637957775E8,y=[],x=b.hasOwnProperty("minzoom")?parseFloat(b.minzoom):0,I=b.hasOwnProperty("maxzoom")?parseFloat(b.maxzoom):22,z=0;z<=I;z++)z>=x&&y.push({level:z,scale:A,resolution:v}),v/=2,A/=2;v=0;for(A=b.tiles;v<A.length;v++)m(n(g,A[v]));r={capabilities:"TilesOnly",initialExtent:t,fullExtent:t,minScale:0,maxScale:0,tiles:b.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-2.0037508342787E7,y:2.0037508342787E7},lods:y,spatialReference:{wkid:102100}}}}w=
new f(p,q,r);if(!k&&a.primarySourceName in a.sourceNameToSource){u=a.sourceNameToSource[a.primarySourceName];if(!u.isCompatibleWith(w))return[2,e.resolve()];null!=w.fullExtent&&(null!=u.fullExtent?u.fullExtent.union(w.fullExtent):u.fullExtent=w.fullExtent.clone());u.tileInfo.lods.length<w.tileInfo.lods.length&&(u.tileInfo=w.tileInfo)}k?(a.sourceBase=q,a.source=b,a.validatedSource=r,a.primarySourceName=p,a.sourceUrl&&m(a.sourceUrl)):m(q);a.sourceNameToSource[p]=w;return a.style?[2]:null==b.defaultStyles?
[2,e.reject()]:"string"===typeof b.defaultStyles?[2,l(a,"",n(q,b.defaultStyles,"root.json"),void 0,h)]:[2,l(a,"",b.defaultStyles,n(q,"root.json"),h)]})})}Object.defineProperty(a,"__esModule",{value:!0});a.loadMetadata=void 0;var q=k.defaults&&k.defaults.io.corsEnabledServers;a.loadMetadata=function(a,b){return g.__awaiter(this,void 0,void 0,function(){var c,e,f,k,p,h;return g.__generator(this,function(g){switch(g.label){case 0:return c={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,
style:null,styleBase:null,styleUrl:null,sourceNameToSource:{},primarySourceName:""},e="string"===typeof a?[a,null]:[null,a.jsonUrl],f=e[0],k=e[1],p=f?d.urlToObject(f):null,[4,l(c,"esri",a,k,b)];case 1:return g.sent(),h={layerDefinition:c.validatedSource,url:f,parsedUrl:p,serviceUrl:c.sourceUrl,style:c.style,styleUrl:c.styleUrl,spriteUrl:c.style.sprite&&n(c.styleBase,c.style.sprite),glyphsUrl:c.style.glyphs&&n(c.styleBase,c.style.glyphs),sourceNameToSource:c.sourceNameToSource,primarySourceName:c.primarySourceName},
m(h.spriteUrl),m(h.glyphsUrl),[2,h]}})})}})},"esri/views/2d/engine/vectorTiles/style/VectorTileSource":function(){define("require exports ../../../../../core/lang ../../../../../core/promiseUtils ../../../../../core/urlUtils ../../../../../geometry/Extent ../../../../../layers/support/serviceTileInfoProperty ../../../../../layers/support/TilemapCache ../TileIndex".split(" "),function(h,a,g,k,b,e,d,f,m){return function(){function a(a,c,k){this.tileMapURL="";this.fullExtent=this.tileIndex=this.capabilities=
this.tileInfo=this.parsedUrl=this.tilemapCache=null;this.name=a;if(this.sourceUrl=c)this.parsedUrl=b.urlToObject(this.sourceUrl);a=g.clone(k);var l=a.tiles;c&&l.forEach(function(a,d){b.isAbsolute(a)||(l[d]=b.join(c,a))});this.tileServers=l;k.tileMap&&(this.tileMapURL=b.join(c,k.tileMap));var n=k.capabilities&&k.capabilities.split(",").map(function(a){return a.toLowerCase().trim()}),p=!!k.exportTilesAllowed,n=!!n&&-1!==n.indexOf("tilemap"),h=p&&k.hasOwnProperty("maxExportTilesCount")?k.maxExportTilesCount:
0;this.capabilities={operations:{supportsExportTiles:p,supportsTileMap:n},exportTiles:p?{maxExportTilesCount:+h}:null};this.tileInfo=d.readServiceTileInfo(a.tileInfo,a,null,{ignoreMinMaxLOD:!0});n&&(this.type="vector-tile",this.tilemapCache=new f.TilemapCache({layer:this}),this.tileIndex=new m(this.tilemapCache));this.fullExtent=e.fromJSON(k.fullExtent)}a.prototype.getRefKey=function(a,b){return this.tileIndex?this.tileIndex.dataKey(a,b):k.resolve(a)};a.prototype.getSourceTileUrl=function(a,b,d){var c=
this.tileServers[b%this.tileServers.length];return c=c.replace(/\{z\}/gi,a.toString()).replace(/\{y\}/gi,b.toString()).replace(/\{x\}/gi,d.toString())};a.prototype.isCompatibleWith=function(a){var b=this.tileInfo;a=a.tileInfo;if(!b.spatialReference.equals(a.spatialReference)||!b.origin.equals(a.origin)||Math.round(b.dpi)!==Math.round(a.dpi))return!1;b=b.lods;a=a.lods;for(var d=Math.min(b.length,a.length),e=0;e<d;e++){var f=b[e],l=a[e];if(f.level!==l.level||Math.round(f.scale)!==Math.round(l.scale))return!1}return!0};
return a}()})},"esri/views/2d/engine/vectorTiles/TileIndex":function(){define(["require","exports","../../../../core/promiseUtils","../../../../layers/support/TilemapCache","../../tiling/TileKey"],function(h,a,g,k,b){return function(){function a(a){if(a instanceof k.TilemapCache)this._tilemapCache=a;else if(a&&"index"in a)this._tilemap=a.index;else throw Error("Invalid tilemap!");}a.prototype.dataKey=function(a,e){if(this._tilemapCache){var d=a.level,f=a.row,l=a.col,c=new b(a);return this._tilemapCache.fetchAvailabilityUpsample(d,
f,l,c,e).then(function(){return c}).catch(function(a){if(g.isAbortError(a))throw a;return null})}return this._getIndexedDataKey(a)};a.prototype.forEach=function(a,b,e,k,l){this._callback=l;this._maxLevel=b+a;this._forEach(this._tilemap,b,e,k)};a.prototype._forEach=function(a,b,e,k){0!==a&&(this._callback(b,e,k),b!==this._maxLevel&&"object"===typeof a&&(this._forEach(a[0],b+1,2*e,2*k),this._forEach(a[1],b+1,2*e,2*k+1),this._forEach(a[2],b+1,2*e+1,2*k),this._forEach(a[3],b+1,2*e+1,2*k+1)))};a.prototype._getIndexedDataKey=
function(a){var d=[a];if(0>a.level||0>a.row||0>a.col||0<a.row>>a.level||0<a.col>>a.level)return g.resolve(null);for(;0!==a.level;)a=new b(a.level-1,a.row>>1,a.col>>1,a.world),d.push(a);a=this._tilemap;var e=d.pop(),k,l;if(1===a)return g.resolve(e);for(;d.length;)if(k=d.pop(),l=(k.col&1)+((k.row&1)<<1),a){if(0===a[l]){e=null;break}if(1===a[l]){e=k;break}e=k;a=a[l]}return g.resolve(e)};return a}()})},"esri/views/2d/tiling/TileKey":function(){define(["require","exports","../../../core/ObjectPool"],function(h,
a,g){return function(){function a(a,e,d,f){this.set(a,e,d,f)}a.getId=function(a,e,d,f){return"object"===typeof a?a.level+"/"+a.row+"/"+a.col+"/"+a.world:a+"/"+e+"/"+d+"/"+f};Object.defineProperty(a.prototype,"key",{get:function(){return this},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"id",{get:function(){return this.toString()},set:function(a){this.set(a)},enumerable:!1,configurable:!0});a.prototype.acquire=function(a,e,d,f){this.set(a,e,d,f)};a.prototype.contains=function(a){var b=
a.level-this.level;return this.row===a.row>>b&&this.col===a.col>>b&&this.world===a.world};a.prototype.equals=function(a){return this.level===a.level&&this.row===a.row&&this.col===a.col&&this.world===a.world};a.prototype.clone=function(){return new a(this)};a.prototype.release=function(){this.world=this.col=this.row=this.level=0};a.prototype.set=function(a,e,d,f){null==a?this.world=this.col=this.row=this.level=0:"object"===typeof a?(this.level=a.level||0,this.row=a.row||0,this.col=a.col||0,this.world=
a.world||0):"string"===typeof a?(a=a.split("/"),e=a[1],d=a[2],f=a[3],this.level=parseFloat(a[0]),this.row=parseFloat(e),this.col=parseFloat(d),this.world=parseFloat(f)):(this.level=+a,this.row=+e,this.col=+d,this.world=+f||0);return this};a.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world};a.prototype.getParentKey=function(){return 0>=this.level?null:new a(this.level-1,this.row>>1,this.col>>1,this.world)};a.prototype.getChildKeys=function(){var b=this.level+
1,e=this.row<<1,d=this.col<<1,f=this.world;return[new a(b,e,d,f),new a(b,e,d+1,f),new a(b,e+1,d,f),new a(b,e+1,d+1,f)]};a.prototype.compareRowMajor=function(a){return this.row<a.row?-1:this.row>a.row?1:this.col<a.col?-1:this.col>a.col?1:0};a.pool=new g(a,null,null,25,50);return a}()})},"esri/portal/support/jsonContext":function(){define(["require","exports","../../core/urlUtils","../Portal"],function(h,a,g,k){Object.defineProperty(a,"__esModule",{value:!0});a.createForItem=void 0;a.createForItem=
function(a){return{origin:"portal-item",url:g.urlToObject(a.itemUrl),portal:a.portal||k.getDefault(),portalItem:a,readResourcePaths:[]}}})},"esri/views/2d/engine/vectorTiles/SchemaHelper":function(){define(["require","exports","../../../../layers/support/LOD","../../../../layers/support/TileInfo"],function(h,a,g,k){return function(){function a(a,b){this.lockedSchemaPixelSize=a;this.isGCS=b}a.prototype.getLevelRowColumn=function(a){return this.isGCS?[a[0],a[1]>>1,a[2]>>1]:256===this.lockedSchemaPixelSize&&
0<a[0]?[a[0]-1,a[1]>>1,a[2]>>1]:a};a.prototype.adjustLevel=function(a){return this.isGCS?a:256===this.lockedSchemaPixelSize?0<a?a-1:0:a};a.prototype.getShift=function(a,b){var d=0,e=0;if(256===this.lockedSchemaPixelSize||this.isGCS)a[2]%2&&(d=b),a[1]%2&&(e=b);return[d,e]};a.prototype.getScale=function(a){if(this.isGCS){if(512===this.lockedSchemaPixelSize)return 4}else if(256===this.lockedSchemaPixelSize&&0===a)return 1;return 2};a.create256x256CompatibleTileInfo=function(a){if(!a)return null;if(256===
a.size[0]&&256===a.size[1])return a;for(var b=a.spatialReference.isGeographic,e=[],m=a.lods.length,n=0;n<m;n++){var l=a.lods[n];e.push(new g({level:l.level,scale:l.scale,resolution:b?l.resolution:2*l.resolution}))}return new k({size:[256,256],dpi:a.dpi,format:a.format,compressionQuality:a.compressionQuality,origin:a.origin,spatialReference:a.spatialReference,lods:e})};a.create512x512CompatibleTileInfo=function(a){if(!a||256===a.size[0]||256===a.size[1])return null;for(var b=[],e=a.lods.length,m=0;m<
e;m++){var n=a.lods[m];b.push(new g({level:n.level,scale:n.scale,resolution:.5*n.resolution}))}return new k({size:[512,512],dpi:a.dpi,format:a.format,compressionQuality:a.compressionQuality,origin:a.origin,spatialReference:a.spatialReference,lods:b})};return a}()})},"esri/views/2d/engine/vectorTiles/tileInfoUtils":function(){define(["require","exports","../../../../layers/support/TileInfo"],function(h,a,g){Object.defineProperty(a,"__esModule",{value:!0});a.unionTileInfos=a.areSchemasOverlapping=void 0;
a.areSchemasOverlapping=function(a,b){if(a===b)return!0;if(!a&&null!=b||null!=a&&!b||!a.spatialReference.equals(b.spatialReference)||a.dpi!==b.dpi)return!1;var e=a.origin,d=b.origin;if(1E-6<=Math.abs(e.x-d.x)||1E-6<=Math.abs(e.y-d.y))return!1;a.lods[0].scale>b.lods[0].scale?(e=a,a=b):e=b;for(b=e.lods[0].scale;b>=a.lods[a.lods.length-1].scale-1E-6;b/=2)if(1E-6>Math.abs(b-a.lods[0].scale))return!0;return!1};a.unionTileInfos=function(a,b){if(a===b)return a;if(!a&&null!=b)return b;if(null!=a&&!b)return a;
var e=a.size[0],d=a.format,f=a.dpi,m={x:a.origin.x,y:a.origin.y},k=a.spatialReference.toJSON(),l=a.lods[0].scale>b.lods[0].scale?a.lods[0]:b.lods[0];a=(a.lods[a.lods.length-1].scale<=b.lods[b.lods.length-1].scale?a.lods[a.lods.length-1]:b.lods[b.lods.length-1]).scale;b=[];for(var c=l.scale,l=l.resolution,p=0;c>a;)b.push({level:p,resolution:l,scale:c}),p++,c/=2,l/=2;return new g({size:[e,e],dpi:f,format:d||"pbf",origin:m,lods:b,spatialReference:k})}})},"esri/views/2d/engine/vectorTiles/style/StyleRepository":function(){define(["require",
"exports","../../../../../core/has","./StyleLayer"],function(h,a,g,k){return function(){function a(b,d){this.backgroundBucketIds=[];this._layerByName={};this.styleJSON=b;this.version=parseFloat(b.version);this.sprite=d?d.spriteUrl:b.sprite;this.glyphs=d?d.glyphsUrl:b.glyphs;if(this.layers=(b.layers||[]).map(a._create))for(b=void 0,d=0;d<this.layers.length;d++)b=this.layers[d],this._layerByName[b.id.toLowerCase()]=b,0===b.type&&this.backgroundBucketIds.push(d);this._identifyRefLayers()}a.prototype.isPainterDataDriven=
function(a){return(a=this._layerByName[a.toLowerCase()])?a.isPainterDataDriven():!1};a.prototype.getStyleLayerId=function(a){return a>=this.layers.length?null:this.layers[a].id};a.prototype.getLayoutProperties=function(a){return(a=this._layerByName[a.toLowerCase()])?a.layout:null};a.prototype.getPaintProperties=function(a){return(a=this._layerByName[a.toLowerCase()])?a.paint:null};a.prototype.setPaintProperties=function(b,d){b=this._layerByName[b.toLowerCase()];if(!b)return"";var e=this.layers.indexOf(b);
this.styleJSON.layers[e].paint=d;d=a._recreateLayer({id:b.id,type:b.typeName,source:b.source,sourceLayer:b["source-layer"],minzoom:b.minzoom,maxzoom:b.maxzoom,filter:b.filter,layout:b.layout,paint:d},b);this.layers[e]=d;this._layerByName[b.id.toLowerCase()]=d;return b.id};a.prototype.setLayoutProperties=function(b,d){b=this._layerByName[b.toLowerCase()];if(!b)return"";var e=this.layers.indexOf(b);this.styleJSON.layers[e].layout=d;d=a._recreateLayer({id:b.id,type:b.typeName,source:b.source,sourceLayer:b["source-layer"],
minzoom:b.minzoom,maxzoom:b.maxzoom,filter:b.filter,layout:d,paint:b.paint},b);this.layers[e]=d;this._layerByName[b.id.toLowerCase()]=d;return b.id};a.prototype._identifyRefLayers=function(){for(var a=[],b=[],f=0,m=0,k=this.layers;m<k.length;m++){var l=k[m];if(1===l.type){var c=l,g=l.source+"|"+l.sourceLayer,g=g+("|"+JSON.stringify(l.layout&&l.layout.visibility)),g=g+("|"+JSON.stringify(l.minzoom)),g=g+("|"+JSON.stringify(l.maxzoom)),g=g+("|"+JSON.stringify(l.filter));if(c.hasDataDrivenFill||c.hasDataDrivenOutline)g+=
"|"+JSON.stringify(f);a.push({key:g,layer:l})}2===l.type&&(c=l,g=l.source+"|"+l.sourceLayer,g+="|"+JSON.stringify(l.layout&&l.layout.visibility),g+="|"+JSON.stringify(l.minzoom),g+="|"+JSON.stringify(l.maxzoom),g+="|"+JSON.stringify(l.filter),g+="|"+JSON.stringify(l.layout&&l.layout["line-cap"]),g+="|"+JSON.stringify(l.layout&&l.layout["line-join"]),c.hasDataDrivenLine&&(g+="|"+JSON.stringify(f)),b.push({key:g,layer:l}));++f}this._assignRefLayers(a);this._assignRefLayers(b)};a.prototype._assignRefLayers=
function(a){a.sort(function(a,b){return a.key<b.key?-1:a.key>b.key?1:0});for(var b,e,m=a.length,g=0;g<m;g++){var l=a[g];if(l.key===b)l.layer.refLayerId=e;else if(b=l.key,e=l.layer.id,1===l.layer.type&&!l.layer.getPaintProperty("fill-outline-color"))for(var c=g+1;c<m;c++){var k=a[c];if(k.key===b){if(k.layer.getPaintProperty("fill-outline-color")){a[g]=k;a[c]=l;e=k.layer.id;break}}else break}}};a._create=function(a,b,f){b=1-1/(f.length+1)*(1+b);switch(a.type){case "background":return new k.BackgroundStyleLayer(0,
a,b);case "fill":return new k.FillStyleLayer(1,a,b);case "line":return new k.LineStyleLayer(2,a,b);case "symbol":return new k.SymbolStyleLayer(3,a,b);case "raster":throw Error("Unsupported vector tile raster layer");case "circle":return new k.CircleStyleLayer(4,a,b)}throw Error("Unknown vector tile layer");};a._recreateLayer=function(a,b){switch(a.type){case "background":return new k.BackgroundStyleLayer(0,a,b.z);case "fill":return new k.FillStyleLayer(1,a,b.z);case "line":return new k.LineStyleLayer(2,
a,b.z);case "symbol":return new k.SymbolStyleLayer(3,a,b.z);case "raster":throw Error("Unsupported vector tile raster layer");case "circle":return new k.CircleStyleLayer(4,a,b.z)}};return a}()})},"esri/views/2d/engine/vectorTiles/style/StyleLayer":function(){define("require exports tslib ./Filter ./StyleDefinition ./StyleProperty ../../webgl/definitions".split(" "),function(h,a,g,k,b,e,d){Object.defineProperty(a,"__esModule",{value:!0});a.TextLayout=a.IconLayout=a.CircleStyleLayer=a.SymbolStyleLayer=
a.LineStyleLayer=a.FillStyleLayer=a.BackgroundStyleLayer=a.StyleLayer=void 0;h=function(){function a(a,d,c){this.type=a;this.typeName=d.type;this.id=d.id;this.source=d.source;this.sourceLayer=d["source-layer"];this.minzoom=d.minzoom;this.maxzoom=d.maxzoom;this.filter=d.filter;this.layout=d.layout;this.paint=d.paint;this.z=c;switch(a){case 0:this._layoutDefinition=b.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=b.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=
b.StyleDefinition.fillLayoutDefinition;this._paintDefinition=b.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=b.StyleDefinition.lineLayoutDefinition;this._paintDefinition=b.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=b.StyleDefinition.symbolLayoutDefinition;this._paintDefinition=b.StyleDefinition.symbolPaintDefinition;break;case 4:this._layoutDefinition=b.StyleDefinition.circleLayoutDefinition,this._paintDefinition=b.StyleDefinition.circlePaintDefinition}this._layoutProperties=
this._parseLayout(this.layout);this._paintProperties=this._parsePaint(this.paint)}a.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=k.createFilter(this.filter)};a.prototype.getLayoutProperty=function(a){return this._layoutProperties[a]};a.prototype.getPaintProperty=function(a){return this._paintProperties[a]};a.prototype.getLayoutValue=function(a,b,c){var d,e=this._layoutProperties[a];e&&(d=e.getValue(b,c));var f=this._layoutDefinition[a];
void 0===d&&(d=f["default"]);"enum"===f.type?d=f.values.indexOf(d):"array"===f.type&&"enum"===f.value&&(d=d.map(function(a){return f.values.indexOf(a)}));return d};a.prototype.getPaintValue=function(a,b,c){var d,e=this._paintProperties[a];e&&(d=e.getValue(b,c));a=this._paintDefinition[a];void 0===d&&(d=a["default"]);"enum"===a.type&&(d=a.values.indexOf(d));return d};a.prototype.isPainterDataDriven=function(){var a=this._paintProperties;if(a)for(var b in a)if(a[b].isDataDriven)return!0;return!1};a.prototype._parseLayout=
function(a){var b={},c;for(c in a){var d=this._layoutDefinition[c];d&&(b[c]=new e(d,a[c]))}return b};a.prototype._parsePaint=function(a){var b={},c;for(c in a){var d=this._paintDefinition[c];d&&(b[c]=new e(d,a[c]))}return b};return a}();a.StyleLayer=h;var f=function(a){function b(b,c,d){return a.call(this,b,c,d)||this}g.__extends(b,a);return b}(h);a.BackgroundStyleLayer=f;f=function(a){function b(b,c,d){b=a.call(this,b,c,d)||this;c=b.getPaintProperty("fill-color");b.hasDataDrivenColor=c?c.isDataDriven:
!1;c=b.getPaintProperty("fill-opacity");b.hasDataDrivenOpacity=c?c.isDataDriven:!1;b.hasDataDrivenFill=b.hasDataDrivenColor||b.hasDataDrivenOpacity;c=b.getPaintProperty("fill-outline-color");b.outlineUsesFillColor=!c;b.hasDataDrivenOutlineColor=c?c.isDataDriven:!1;b.hasDataDrivenOutline=(c?b.hasDataDrivenOutlineColor:b.hasDataDrivenColor)||b.hasDataDrivenOpacity;return b}g.__extends(b,a);return b}(h);a.FillStyleLayer=f;f=function(a){function e(e,c,f){e=a.call(this,e,c,f)||this;f=e.getPaintProperty("line-color");
e.hasDataDrivenColor=f?f.isDataDriven:!1;f=e.getPaintProperty("line-opacity");e.hasDataDrivenOpacity=f?f.isDataDriven:!1;f=e.getPaintProperty("line-width");e.hasDataDrivenWidth=f?f.isDataDriven:!1;e.hasDataDrivenLine=e.hasDataDrivenColor||e.hasDataDrivenOpacity||e.hasDataDrivenWidth;c=c.paint["line-width"];c||(c=b.StyleDefinition.linePaintDefinition["line-width"].default);e.isThinLine=!e.hasDataDrivenWidth&&"number"===typeof c&&c<d.THIN_LINE_THRESHOLD;return e}g.__extends(e,a);return e}(h);a.LineStyleLayer=
f;f=function(a){function b(b,c,d){b=a.call(this,b,c,d)||this;c=b.getPaintProperty("icon-color");b.hasDataDrivenIconColor=c?c.isDataDriven:!1;c=b.getPaintProperty("icon-opacity");b.hasDataDrivenIconOpacity=c?c.isDataDriven:!1;c=b.getLayoutProperty("icon-size");b.hasDataDrivenIconSize=c?c.isDataDriven:!1;b.hasDataDrivenIcon=b.hasDataDrivenIconColor||b.hasDataDrivenIconOpacity||b.hasDataDrivenIconSize;c=b.getPaintProperty("text-color");b.hasDataDrivenTextColor=c?c.isDataDriven:!1;c=b.getPaintProperty("text-opacity");
b.hasDataDrivenTextOpacity=c?c.isDataDriven:!1;c=b.getLayoutProperty("text-size");b.hasDataDrivenTextSize=c?c.isDataDriven:!1;b.hasDataDrivenText=b.hasDataDrivenTextColor||b.hasDataDrivenTextOpacity||b.hasDataDrivenTextSize;return b}g.__extends(b,a);return b}(h);a.SymbolStyleLayer=f;h=function(a){function b(b,c,d){b=a.call(this,b,c,d)||this;c=b.getPaintProperty("circle-radius");b.hasDataDrivenRadius=c?c.isDataDriven:!1;c=b.getPaintProperty("circle-color");b.hasDataDrivenColor=c?c.isDataDriven:!1;
c=b.getPaintProperty("circle-opacity");b.hasDataDrivenOpacity=c?c.isDataDriven:!1;c=b.getPaintProperty("circle-stroke-width");b.hasDataDrivenStrokeWidth=c?c.isDataDriven:!1;c=b.getPaintProperty("circle-stroke-color");b.hasDataDrivenStrokeColor=c?c.isDataDriven:!1;c=b.getPaintProperty("circle-stroke-opacity");b.hasDataDrivenStrokeOpacity=c?c.isDataDriven:!1;c=b.getPaintProperty("circle-blur");b.hasDataDrivenBlur=c?c.isDataDriven:!1;return b}g.__extends(b,a);return b}(h);a.CircleStyleLayer=h;h=function(){return function(a,
b,d,c){this.allowOverlap=a.getLayoutValue("icon-allow-overlap",b,c);this.ignorePlacement=a.getLayoutValue("icon-ignore-placement",b,c);this.keepUpright=a.getLayoutValue("icon-keep-upright",b,c);this.offset=a.getLayoutValue("icon-offset",b,c);this.optional=a.getLayoutValue("icon-optional",b,c);this.padding=a.getLayoutValue("icon-padding",b,c);this.rotate=a.getLayoutValue("icon-rotate",b,c);this.rotationAlignment=a.getLayoutValue("icon-rotation-alignment",b,c);this.size=a.getLayoutValue("icon-size",
b,c);2===this.rotationAlignment&&(this.rotationAlignment=d?0:1)}}();a.IconLayout=h;h=function(){return function(a,b,d,c){this.allowOverlap=a.getLayoutValue("text-allow-overlap",b,c);this.anchor=a.getLayoutValue("text-anchor",b,c);this.fontArray=a.getLayoutValue("text-font",b,c);this.ignorePlacement=a.getLayoutValue("text-ignore-placement",b,c);this.justify=a.getLayoutValue("text-justify",b,c);this.keepUpright=a.getLayoutValue("text-keep-upright",b,c);this.letterSpacing=a.getLayoutValue("text-letter-spacing",
b,c);this.lineHeight=a.getLayoutValue("text-line-height",b,c);this.maxAngle=a.getLayoutValue("text-max-angle",b,c);this.maxWidth=a.getLayoutValue("text-max-width",b,c);this.offset=a.getLayoutValue("text-offset",b,c);this.optional=a.getLayoutValue("text-optional",b,c);this.padding=a.getLayoutValue("text-padding",b,c);this.rotate=a.getLayoutValue("text-rotate",b,c);this.rotationAlignment=a.getLayoutValue("text-rotation-alignment",b,c);this.size=a.getLayoutValue("text-size",b,c);this.transform=a.getLayoutValue("text-transform",
b,c);this.writingMode=a.getLayoutValue("text-writing-mode",b,c);2===this.rotationAlignment&&(this.rotationAlignment=d?0:1)}}();a.TextLayout=h})},"esri/views/2d/engine/vectorTiles/style/Filter":function(){define(["require","exports","../expression/expression"],function(h,a,g){return function(){function a(a){this._expression=a}a.prototype.filter=function(a,e){if(!this._expression)return!0;try{return this._expression.evaluate(a,e)}catch(d){return console.log(d.message),!0}};a.createFilter=function(b){if(!b)return null;
this.isLegacyFilter(b)&&(b=this.convertLegacyFilter(b));try{var e=g.createExpression(b);return new a(e)}catch(d){return console.log(d.message),null}};a.isLegacyFilter=function(a){if(!Array.isArray(a)||0===a.length)return!0;switch(a[0]){case "\x3d\x3d":case "!\x3d":case "\x3e":case "\x3c":case "\x3e\x3d":case "\x3c\x3d":return 3===a.length&&"string"===typeof a[1]&&!Array.isArray(a[2]);case "in":return 3<=a.length&&"string"===typeof a[1]&&!Array.isArray(a[2]);case "!in":return!0;case "any":case "all":for(var b=
1;b<a.length;b++)if(!this.isLegacyFilter(a[1]))return!1;return!0;case "none":return!0;case "has":return 2===a.length&&("$id"===a[1]||"$type"===a[1]);case "!has":return!0;default:return!1}};a.convertLegacyFilter=function(b){if(!Array.isArray(b)||0===b.length)return!0;var e=b[0];if(1===b.length)return"any"!==e;switch(e){case "\x3d\x3d":return a.convertComparison("\x3d\x3d",b[1],b[2]);case "!\x3d":return a.negate(a.convertComparison("\x3d\x3d",b[1],b[2]));case "\x3e":case "\x3c":case "\x3e\x3d":case "\x3c\x3d":return a.convertComparison(e,
b[1],b[2]);case "in":return a.convertIn(b[1],b.slice(2));case "!in":return a.negate(a.convertIn(b[1],b.slice(2)));case "any":case "all":case "none":return a.convertCombining(e,b.slice(1));case "has":return a.convertHas(b[1]);case "!has":return a.negate(a.convertHas(b[1]));default:throw Error("Unexpected legacy filter.");}};a.convertComparison=function(a,e,d){switch(e){case "$type":return[a,["geometry-type"],d];case "$id":return[a,["id"],d];default:return[a,["get",e],d]}};a.convertIn=function(a,e){switch(a){case "$type":return["in",
["geometry-type"],["literal",e]];case "$id":return["in",["id"],["literal",e]];default:return["in",["get",a],["literal",e]]}};a.convertHas=function(a){switch(a){case "$type":return!0;case "$id":return["has-id"];default:return["has",a]}};a.convertCombining=function(a,e){return[a].concat(e.map(this.convertLegacyFilter))};a.negate=function(a){return["!",a]};return a}()})},"esri/views/2d/engine/vectorTiles/expression/expression":function(){define(["require","exports","./definition"],function(h,a,g){Object.defineProperty(a,
"__esModule",{value:!0});a.createExpression=void 0;a.createExpression=function(a){if(null===a||"string"===typeof a||"boolean"===typeof a||"number"===typeof a)a=["literal",a];if(!Array.isArray(a)||0===a.length)throw Error("Expression must be a non empty array");var b=a[0];if("string"!==typeof b)throw Error("First element of expression must be a string");var e=g.ops[b];if(void 0===e)throw Error('Invalid expression operator "'+b+'"');if(!e)throw Error('Unimplemented expression operator "'+b+'"');return e.parse(a)}})},
"esri/views/2d/engine/vectorTiles/expression/definition":function(){define("require exports ./color ./data ./decision ./interpolate ./lookup ./math ./string ./types".split(" "),function(h,a,g,k,b,e,d,f,m,n){Object.defineProperty(a,"__esModule",{value:!0});a.ops=void 0;a.ops={array:n.Assert,"boolean":n.Assert,collator:null,format:null,literal:n.Literal,image:null,number:n.Assert,"number-format":null,object:n.Assert,string:n.Assert,"to-boolean":n.Coerce,"to-color":n.Coerce,"to-number":n.Coerce,"to-string":n.Coerce,
"typeof":n.TypeOf,accumulated:null,"feature-state":null,"geometry-type":k.GeomType,id:k.ID,"line-progress":null,properties:k.Properties,at:d.At,get:d.Get,has:d.Has,"in":d.In,"index-of":d.IndexOf,length:d.Length,slice:d.Slice,"!":b.NOT,"!\x3d":b.NE,"\x3c":b.LT,"\x3c\x3d":b.LE,"\x3d\x3d":b.EQ,"\x3e":b.GT,"\x3e\x3d":b.GE,all:b.ALL,any:b.ANY,"case":b.Case,coalesce:b.Coalesce,match:b.Match,within:null,interpolate:e.Interpolate,"interpolate-hcl":e.Interpolate,"interpolate-lab":e.Interpolate,step:e.Step,
let:null,"var":null,concat:m.Concat,downcase:m.String,"is-supported-script":null,"resolved-locale":null,upcase:m.String,rgb:g.Rgb,rgba:g.Rgba,"to-rgba":g.ToRgba,"-":f.Sub,"*":f.Mul,"/":f.Div,"%":f.Mod,"^":f.Pow,"+":f.Add,abs:f.Calculate,acos:f.Calculate,asin:f.Calculate,atan:f.Calculate,ceil:f.Calculate,cos:f.Calculate,e:f.Calculate,floor:f.Calculate,ln:f.Calculate,ln2:f.Calculate,log10:f.Calculate,log2:f.Calculate,max:f.Calculate,min:f.Calculate,pi:f.Calculate,round:f.Calculate,sin:f.Calculate,sqrt:f.Calculate,
tan:f.Calculate,zoom:k.Zoom,"heatmap-density":null,"has-id":d.HasID,none:b.NONE}})},"esri/views/2d/engine/vectorTiles/expression/color":function(){define(["require","exports","../../../../../Color","./expression"],function(h,a,g,k){Object.defineProperty(a,"__esModule",{value:!0});a.ToRgba=a.Rgba=a.Rgb=void 0;var b=function(){function a(a){this.args=a}a.parse=function(b){if(4!==b.length)throw Error('"rgb" expects 3 arguments.');b=b.slice(1).map(function(a){return k.createExpression(a)});return new a(b)};
a.prototype.evaluate=function(a,b){var d=this.args[1].evaluate(a,b),e=this.args[2].evaluate(a,b);a=this.args[3].evaluate(a,b);return"rgb("+Math.round(d)+","+Math.round(e)+","+Math.round(a)+")"};return a}();a.Rgb=b;h=function(){function a(a){this.args=a}a.parse=function(a){if(5!==a.length)throw Error('"rgba" expects 4 arguments.');a=a.slice(1).map(function(a){return k.createExpression(a)});return new b(a)};a.prototype.evaluate=function(a,b){var d=this.args[1].evaluate(a,b),e=this.args[2].evaluate(a,
b),f=this.args[3].evaluate(a,b);a=this.args[4].evaluate(a,b);return"rgb("+Math.round(d)+","+Math.round(e)+","+Math.round(f)+","+a+")"};return a}();a.Rgba=h;h=function(){function a(a){this.color=a}a.parse=function(b){if(2!==b.length)throw Error('"to-rgba" expects 1 argument.');b=k.createExpression(b[1]);return new a(b)};a.prototype.evaluate=function(a,b){return(new g(this.color.evaluate(a,b))).toRgba()};return a}();a.ToRgba=h})},"esri/views/2d/engine/vectorTiles/expression/data":function(){define(["require",
"exports"],function(h,a){Object.defineProperty(a,"__esModule",{value:!0});a.Zoom=a.Properties=a.GeomType=a.ID=void 0;h=function(){function a(){}a.parse=function(g){if(1<g.length)throw Error('"id" does not expect arguments');return new a};a.prototype.evaluate=function(a,b){return a.id};return a}();a.ID=h;h=function(){function a(){}a.parse=function(g){if(1<g.length)throw Error('"geometry-type" does not expect arguments');return new a};a.prototype.evaluate=function(a,b){switch(a.type){case 0:return"Unknown";
case 1:return"Point";case 2:return"LineString";case 3:return"Polygon"}};return a}();a.GeomType=h;h=function(){function a(){}a.parse=function(g){if(1<g.length)throw Error('"properties" does not expect arguments');return new a};a.prototype.evaluate=function(a,b){return a.values};return a}();a.Properties=h;h=function(){function a(){}a.parse=function(g){if(1<g.length)throw Error('"zoom" does not expect arguments');return new a};a.prototype.evaluate=function(a,b){return b};return a}();a.Zoom=h})},"esri/views/2d/engine/vectorTiles/expression/decision":function(){define(["require",
"exports","tslib","./expression"],function(h,a,g,k){Object.defineProperty(a,"__esModule",{value:!0});a.Match=a.Coalesce=a.Case=a.NONE=a.ANY=a.ALL=a.NOT=a.GE=a.GT=a.LE=a.LT=a.NE=a.EQ=void 0;var b=function(){function a(a,b,e){this.lhs=a;this.rhs=b;this.compare=e}a.parse=function(b,e){if(3!==b.length&&4!==b.length)throw Error('"'+b[0]+'" expects 2 or 3 arguments');if(4===b.length)throw Error('"'+b[0]+'" collator not supported');return new a(k.createExpression(b[1]),k.createExpression(b[2]),e)};a.prototype.evaluate=
function(a,b){return this.compare(this.lhs.evaluate(a,b),this.rhs.evaluate(a,b))};return a}();h=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}g.__extends(d,a);d.parse=function(a){return b.parse(a,function(a,b){return a===b})};return d}(b);a.EQ=h;h=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}g.__extends(d,a);d.parse=function(a){return b.parse(a,function(a,b){return a!==b})};return d}(b);a.NE=h;h=function(a){function d(){return null!==a&&a.apply(this,
arguments)||this}g.__extends(d,a);d.parse=function(a){return b.parse(a,function(a,b){return a<b})};return d}(b);a.LT=h;h=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}g.__extends(d,a);d.parse=function(a){return b.parse(a,function(a,b){return a<=b})};return d}(b);a.LE=h;h=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}g.__extends(d,a);d.parse=function(a){return b.parse(a,function(a,b){return a>b})};return d}(b);a.GT=h;h=function(a){function d(){return null!==
a&&a.apply(this,arguments)||this}g.__extends(d,a);d.parse=function(a){return b.parse(a,function(a,b){return a>=b})};return d}(b);a.GE=h;h=function(){function a(a){this.arg=a}a.parse=function(b){if(2!==b.length)throw Error('"!" expects 1 argument');return new a(k.createExpression(b[1]))};a.prototype.evaluate=function(a,b){return!this.arg.evaluate(a,b)};return a}();a.NOT=h;h=function(){function a(a){this.args=a}a.parse=function(b){for(var d=[],e=1;e<b.length;e++)d.push(k.createExpression(b[e]));return new a(d)};
a.prototype.evaluate=function(a,b){for(var d=0,e=this.args;d<e.length;d++)if(!e[d].evaluate(a,b))return!1;return!0};return a}();a.ALL=h;h=function(){function a(a){this.args=a}a.parse=function(b){for(var d=[],e=1;e<b.length;e++)d.push(k.createExpression(b[e]));return new a(d)};a.prototype.evaluate=function(a,b){for(var d=0,e=this.args;d<e.length;d++)if(e[d].evaluate(a,b))return!0;return!1};return a}();a.ANY=h;h=function(){function a(a){this.args=a}a.parse=function(b){for(var d=[],e=1;e<b.length;e++)d.push(k.createExpression(b[e]));
return new a(d)};a.prototype.evaluate=function(a,b){for(var d=0,e=this.args;d<e.length;d++)if(e[d].evaluate(a,b))return!1;return!0};return a}();a.NONE=h;h=function(){function a(a,b){this.args=a;this.fallback=b}a.parse=function(b){if(4>b.length)throw Error('"case" expects at least 3 arguments');if(1===b.length%2)throw Error('"case" expects an odd number of arguments');for(var d=[],e=1;e<b.length-1;e+=2)d.push({condition:k.createExpression(b[e]),output:k.createExpression(b[e+1])});return new a(d,k.createExpression(b[b.length-
1]))};a.prototype.evaluate=function(a,b){for(var d=0,e=this.args;d<e.length;d++){var f=e[d];if(f.condition.evaluate(a,b))return f.output.evaluate(a,b)}return this.fallback.evaluate(a,b)};return a}();a.Case=h;h=function(){function a(a){this.args=a}a.parse=function(b){if(2>b.length)throw Error('"coalesce" expects at least 1 argument');for(var d=[],e=1;e<b.length;e++)d.push(k.createExpression(b[e]));return new a(d)};a.prototype.evaluate=function(a,b){for(var d=0,e=this.args;d<e.length;d++){var f=e[d].evaluate(a,
b);if(null!==f)return f}return null};return a}();a.Coalesce=h;h=function(){function a(a,b,e,g){this.input=a;this.labels=b;this.outputs=e;this.fallback=g}a.parse=function(b){if(3>b.length)throw Error('"match" expects at least 3 arguments');if(0===b.length%2)throw Error('"case" expects an even number of arguments');for(var d=k.createExpression(b[1]),e=[],g={},l,c=2;c<b.length-1;c+=2){var h=b[c];Array.isArray(h)||(h=[h]);for(var q=0;q<h.length;q++){var r=h[q],t=typeof r;if("string"!==t&&"number"!==t)throw Error('"match" requires string or number literal as labels');
if(!l)l=t;else if(t!==l)throw Error('"match" requires labels to have the same type');g[r]=e.length}e.push(k.createExpression(b[c+1]))}return new a(d,g,e,k.createExpression(b[b.length-1]))};a.prototype.evaluate=function(a,b){var d=this.input.evaluate(a,b);return(this.outputs[this.labels[d]]||this.fallback).evaluate(a,b)};return a}();a.Match=h})},"esri/views/2d/engine/vectorTiles/expression/interpolate":function(){define("require exports ../../../../../Color ../../../unitBezier ../GeometryUtils ./expression".split(" "),
function(h,a,g,k,b,e){function d(a){return a>C?Math.pow(a,1/3):a/B+y}function f(a){return a>x?a*a*a:B*(a-y)}function m(a){return 255*(.0031308>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function n(a){a/=255;return.04045>=a?a/12.92:Math.pow((a+.055)/1.055,2.4)}function l(a){var b=n(a.r),c=n(a.g),e=n(a.b),f=d((.4124564*b+.3575761*c+.1804375*e)/.95047),g=d((.2126729*b+.7151522*c+.072175*e)/1),b=d((.0193339*b+.119192*c+.9503041*e)/1.08883);return{l:116*g-16,a:500*(f-g),b:200*(g-b),alpha:a.a}}function c(a){var b=
(a.l+16)/116,c=isNaN(a.a)?b:b+a.a/500,d=isNaN(a.b)?b:b-a.b/200,b=1*f(b),c=.95047*f(c),d=1.08883*f(d);return new g([m(3.2404542*c-1.5371385*b-.4985314*d),m(-.969266*c+1.8760108*b+.041556*d),m(.0556434*c-.2040259*b+1.0572252*d),a.alpha])}function p(a,c,d){return{l:b.interpolate(a.l,c.l,d),a:b.interpolate(a.a,c.a,d),b:b.interpolate(a.b,c.b,d),alpha:b.interpolate(a.alpha,c.alpha,d)}}function q(a){var b=l(a),c=b.a,d=b.b,e=Math.atan2(d,c)*E;return{h:0>e?e+360:e,c:Math.sqrt(c*c+d*d),l:b.l,alpha:a.a}}function r(a){var b=
a.h*D,d=a.c;return c({l:a.l,a:Math.cos(b)*d,b:Math.sin(b)*d,alpha:a.alpha})}function t(a,c,d){var e=a.h,f=c.h-e;return{h:e+d*(180<f||-180>f?f-360*Math.round(f/360):f),c:b.interpolate(a.c,c.c,d),l:b.interpolate(a.l,c.l,d),alpha:b.interpolate(a.alpha,c.alpha,d)}}Object.defineProperty(a,"__esModule",{value:!0});a.Step=a.Interpolate=void 0;var y=4/29,x=6/29,B=3*x*x,C=x*x*x,D=Math.PI/180,E=180/Math.PI;h=function(){function a(a,b,c,d){this.operator=a;this.input=b;this.stops=c;this.interpolation=d}a.parse=
function(b){if(5>b.length)throw Error('"'+b[0]+'" expects at least 4 arguments.');var c=b[1];if(!Array.isArray(c)||0===c.length)throw Error('"'+b[0]+'" expects an interpolation type expression.');switch(c[0]){case "linear":break;case "exponential":if("number"!==typeof c[1])throw Error('"'+b[0]+'" expects a numeric base for exponential interpolation.');break;case "cubic-bezier":if(5!==c.length)throw Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.");for(var d=
1;5>d;d++){var f=c[d];if("number"!==typeof f||0>f||1<f)throw Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.");}break;default:throw Error('"'+b[0]+'" unknown interpolation type "'+c[0]+'".');}if(1!==b.length%2)throw Error('"'+b[0]+'" expects an even number of arguments.');for(var f=e.createExpression(b[2]),g=[],d=3;d<b.length;d+=2){var l=b[d];if("number"!==typeof l)throw Error('"'+b[0]+'" requires stop inputs as literal numbers.');if(g.length&&g[g.length-
1][0]>=l)throw Error('"'+b[0]+'" requires strictly ascending stop inputs.');g.push([l,e.createExpression(b[d+1])])}return new a(b[0],f,g,c)};a.prototype.evaluate=function(d,e){var f=this.stops;if(1===f.length)return f[0][1].evaluate(d,e);var g=this.input.evaluate(d,e);if(g<=f[0][0])return f[0][1].evaluate(d,e);if(g>=f[f.length-1][0])return f[f.length-1][1].evaluate(d,e);for(var k=0;++k<f.length&&!(g<f[k][0]););var m=a.interpolationRatio(this.interpolation,g,f[k-1][0],f[k][0]),g=f[k-1][1].evaluate(d,
e),h=f[k][1].evaluate(d,e);return"interpolate"===this.operator?Array.isArray(g)?g.map(function(a,c){return b.interpolate(a,h[c],m)}):b.interpolate(g,h,m):"interpolate-hcl"===this.operator?r(t(q(g),q(h),m)):c(p(l(g),l(h),m))};a.interpolationRatio=function(b,c,d,e){var f=0;"exponential"===b[0]?f=a.exponentialInterpolationRatio(c,b[1],d,e):"linear"===b[0]?f=a.exponentialInterpolationRatio(c,1,d,e):"cubic-bezier"===b[0]&&(f=k.unitBezier(b[1],b[2],b[3],b[4])(a.exponentialInterpolationRatio(c,1,d,e),1E-5));
return f};a.exponentialInterpolationRatio=function(a,b,c,d){d-=c;if(0===d)return 0;a-=c;return 1===b?a/d:(Math.pow(b,a)-1)/(Math.pow(b,d)-1)};return a}();a.Interpolate=h;h=function(){function a(a,b){this.input=a;this.stops=b}a.parse=function(b){if(5>b.length)throw Error('"step" expects at least 4 arguments.');if(1!==b.length%2)throw Error('"step" expects an even number of arguments.');var c=e.createExpression(b[1]),d=[];d.push([-Infinity,e.createExpression(b[2])]);for(var f=3;f<b.length;f+=2){var g=
b[f];if("number"!==typeof g)throw Error('"step" requires stop inputs as literal numbers.');if(d.length&&d[d.length-1][0]>=g)throw Error('"step" requires strictly ascending stop inputs.');d.push([g,e.createExpression(b[f+1])])}return new a(c,d)};a.prototype.evaluate=function(a,b){var c=this.stops;if(1===c.length)return c[0][1].evaluate(a,b);for(var d=this.input.evaluate(a,b),e=0;++e<c.length&&!(d<c[e][0]););return this.stops[e-1][1].evaluate(a,b)};return a}();a.Step=h})},"esri/views/2d/unitBezier":function(){define(["require",
"exports"],function(h,a){function g(a,e,d,f){function b(a,b){var d,e,f,k;f=a;for(e=0;8>e;e++){k=((c*f+l)*f+g)*f-a;if(Math.abs(k)<b)return f;d=(3*c*f+2*l)*f+g;if(1E-6>Math.abs(d))break;f-=k/d}d=0;e=1;f=a;if(f<d)return d;if(f>e)return e;for(;d<e;){k=((c*f+l)*f+g)*f;if(Math.abs(k-a)<b)break;a>k?d=f:e=f;f=.5*(e-d)+d}return f}var g=3*a,l=3*(d-a)-g,c=1-g-l,k=3*e,h=3*(f-e)-k,r=1-k-h;return function(a,c){void 0===c&&(c=1E-6);a=b(a,c);return((r*a+h)*a+k)*a}}Object.defineProperty(a,"__esModule",{value:!0});
a.parse=a.easingFunctions=a.unitBezier=void 0;a.unitBezier=g;var k=/^cubic-bezier\((.*)\)/;a.easingFunctions={};a.parse=function(b){var e=a.easingFunctions[b]||null;!e&&(b=k.exec(b))&&(b=b[1].split(",").map(function(a){return parseFloat(a.trim())}),4!==b.length||b.some(function(a){return isNaN(a)})||(e=g.apply(g,b)));return e};a.easingFunctions.ease=g(.25,.1,.25,1);a.easingFunctions.linear=g(0,0,1,1);a.easingFunctions.easeIn=a.easingFunctions["ease-in"]=g(.42,0,1,1);a.easingFunctions.easeOut=a.easingFunctions["ease-out"]=
g(0,0,.58,1);a.easingFunctions.easeInOut=a.easingFunctions["ease-in-out"]=g(.42,0,.58,1)})},"esri/views/2d/engine/vectorTiles/GeometryUtils":function(){define(["require","exports"],function(h,a){function g(a,e){a%=e;return 0<=a?a:a+e}Object.defineProperty(a,"__esModule",{value:!0});a.between=a.interpolate=a.sqr=a.log2=a.degToByte=a.radToByte=a.positiveMod=a.C_SQRT2_INV=a.C_SQRT2=a.C_DEG_TO_RAD=a.C_DEG_TO_256=a.C_256_TO_RAD=a.C_RAD_TO_256=a.C_PI_BY_2=a.C_2PI=a.C_PI=a.C_INFINITY=void 0;a.C_INFINITY=
Number.POSITIVE_INFINITY;a.C_PI=Math.PI;a.C_2PI=2*a.C_PI;a.C_PI_BY_2=a.C_PI/2;a.C_RAD_TO_256=128/a.C_PI;a.C_256_TO_RAD=a.C_PI/128;a.C_DEG_TO_256=256/360;a.C_DEG_TO_RAD=a.C_PI/180;a.C_SQRT2=1.414213562;a.C_SQRT2_INV=1/a.C_SQRT2;var k=1/Math.LN2;a.positiveMod=g;a.radToByte=function(b){return g(b*a.C_RAD_TO_256,256)};a.degToByte=function(b){return g(b*a.C_DEG_TO_256,256)};a.log2=function(a){return Math.log(a)*k};a.sqr=function(a){return a*a};a.interpolate=function(a,e,d){return a*(1-d)+e*d};a.between=
function(a,e,d){return a>=e&&a<=d||a>=d&&a<=e}})},"esri/views/2d/engine/vectorTiles/expression/lookup":function(){define(["require","exports","./expression"],function(h,a,g){Object.defineProperty(a,"__esModule",{value:!0});a.HasID=a.Slice=a.Length=a.IndexOf=a.In=a.Has=a.Get=a.At=void 0;h=function(){function a(a,e){this.index=a;this.array=e}a.parse=function(b){if(3!==b.length)throw Error('"at" expects 2 arguments.');var e=g.createExpression(b[1]);b=g.createExpression(b[2]);return new a(e,b)};a.prototype.evaluate=
function(a,e){var b=this.index.evaluate(a,e);a=this.array.evaluate(a,e);if(0>b||b>=a.length)throw Error('"at" index out of bounds.');if(b!==Math.floor(b))throw Error('"at" index must be an integer.');return a[b]};return a}();a.At=h;h=function(){function a(a,e){this.key=a;this.obj=e}a.parse=function(b){var e;switch(b.length){case 2:return e=g.createExpression(b[1]),new a(e);case 3:return e=g.createExpression(b[1]),b=g.createExpression(b[2]),new a(e,b);default:throw Error('"get" expects 1 or 2 arguments');
}};a.prototype.evaluate=function(a,e){var b=this.key.evaluate(a,e);return this.obj?this.obj.evaluate(a,e)[b]:a.values[b]};return a}();a.Get=h;h=function(){function a(a,e){this.key=a;this.obj=e}a.parse=function(b){var e;switch(b.length){case 2:return e=g.createExpression(b[1]),new a(e);case 3:return e=g.createExpression(b[1]),b=g.createExpression(b[2]),new a(e,b);default:throw Error('"has" expects 1 or 2 arguments');}};a.prototype.evaluate=function(a,e){var b=this.key.evaluate(a,e);return this.obj?
(a=this.obj.evaluate(a,e),b in a):void 0!==a.values[b]};return a}();a.Has=h;h=function(){function a(a,e){this.key=a;this.vals=e}a.parse=function(b){if(3!==b.length)throw Error('"in" expects 2 arguments');return new a(g.createExpression(b[1]),g.createExpression(b[2]))};a.prototype.evaluate=function(a,e){var b=this.key.evaluate(a,e);return-1!==this.vals.evaluate(a,e).indexOf(b)};return a}();a.In=h;h=function(){function a(a,e,d){this.item=a;this.array=e;this.from=d}a.parse=function(b){if(3>b.length||
4<b.length)throw Error('"index-of" expects 3 or 4 arguments.');var e=g.createExpression(b[1]),d=g.createExpression(b[2]);return 4===b.length?(b=g.createExpression(b[3]),new a(e,d,b)):new a(e,d)};a.prototype.evaluate=function(a,e){var b=this.item.evaluate(a,e),f=this.array.evaluate(a,e);if(this.from){a=this.from.evaluate(a,e);if(a!==Math.floor(a))throw Error('"index-of" index must be an integer.');return f.indexOf(b,a)}return f.indexOf(b)};return a}();a.IndexOf=h;h=function(){function a(a){this.arg=
a}a.parse=function(b){if(2!==b.length)throw Error('"length" expects 2 arguments.');b=g.createExpression(b[1]);return new a(b)};a.prototype.evaluate=function(a,e){a=this.arg.evaluate(a,e);if("string"===typeof a||Array.isArray(a))return a.length;throw Error('"length" expects string or array.');};return a}();a.Length=h;h=function(){function a(a,e,d){this.array=a;this.from=e;this.to=d}a.parse=function(b){if(3>b.length||4<b.length)throw Error('"slice" expects 2 or 3 arguments.');var e=g.createExpression(b[1]),
d=g.createExpression(b[2]);return 4===b.length?(b=g.createExpression(b[3]),new a(e,d,b)):new a(e,d)};a.prototype.evaluate=function(a,e){var b=this.array.evaluate(a,e),f=this.from.evaluate(a,e);if(0>f||f>=b.length)throw Error('"slice" index out of bounds.');if(f!==Math.floor(f))throw Error('"slice" index must be an integer.');if(this.to){a=this.to.evaluate(a,e);if(0>a||a>=b.length)throw Error('"slice" index out of bounds.');if(a!==Math.floor(a))throw Error('"slice" index must be an integer.');return b.slice(f,
a)}return b.slice(f)};return a}();a.Slice=h;h=function(){function a(){}a.parse=function(b){if(1!==b.length)throw Error('"has-id" expects no arguments');return new a};a.prototype.evaluate=function(a,e){return void 0!==a.id};return a}();a.HasID=h})},"esri/views/2d/engine/vectorTiles/expression/math":function(){define(["require","exports","tslib","./expression"],function(h,a,g,k){Object.defineProperty(a,"__esModule",{value:!0});a.Calculate=a.Add=a.Pow=a.Mod=a.Div=a.Mul=a.Sub=void 0;var b=function(){function a(a,
b){this.args=a;this.calculate=b}a.parse=function(b,e){b=b.slice(1).map(function(a){return k.createExpression(a)});return new a(b,e)};a.prototype.evaluate=function(a,b){var d;this.args&&(d=this.args.map(function(d){return d.evaluate(a,b)}));return this.calculate(d)};return a}();h=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}g.__extends(d,a);d.parse=function(a){switch(a.length){case 2:return b.parse(a,function(a){return-a[0]});case 3:return b.parse(a,function(a){return a[0]-
a[1]});default:throw Error('"-" expects 1 or 2 arguments');}};return d}(b);a.Sub=h;h=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}g.__extends(d,a);d.parse=function(a){return b.parse(a,function(a){for(var b=1,d=0;d<a.length;d++)b*=a[d];return b})};return d}(b);a.Mul=h;h=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}g.__extends(d,a);d.parse=function(a){if(3===a.length)return b.parse(a,function(a){return a[0]/a[1]});throw Error('"/" expects 2 arguments');
};return d}(b);a.Div=h;h=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}g.__extends(d,a);d.parse=function(a){if(3===a.length)return b.parse(a,function(a){return a[0]%a[1]});throw Error('"%" expects 2 arguments');};return d}(b);a.Mod=h;h=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}g.__extends(d,a);d.parse=function(a){if(3===a.length)return b.parse(a,function(a){return Math.pow(a[0],a[1])});throw Error('"^" expects 1 or 2 arguments');};return d}(b);
a.Pow=h;h=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}g.__extends(d,a);d.parse=function(a){return b.parse(a,function(a){for(var b=0,d=0;d<a.length;d++)b+=a[d];return b})};return d}(b);a.Add=h;h=function(){function a(a,b){this.args=a;this.calculate=b}a.parse=function(b){var d=b.slice(1).map(function(a){return k.createExpression(a)});return new a(d,a.ops[b[0]])};a.prototype.evaluate=function(a,b){var d;this.args&&(d=this.args.map(function(d){return d.evaluate(a,b)}));return this.calculate(d)};
a.ops={abs:function(a){return Math.abs(a[0])},acos:function(a){return Math.acos(a[0])},asin:function(a){return Math.asin(a[0])},atan:function(a){return Math.atan(a[0])},ceil:function(a){return Math.ceil(a[0])},cos:function(a){return Math.cos(a[0])},e:function(){return Math.E},floor:function(a){return Math.floor(a[0])},ln:function(a){return Math.log(a[0])},ln2:function(){return Math.LN2},log10:function(a){return Math.log(a[0])/Math.LN10},log2:function(a){return Math.log(a[0])/Math.LN2},max:function(a){return Math.max.apply(Math,
a)},min:function(a){return Math.min.apply(Math,a)},pi:function(){return Math.PI},round:function(a){return Math.round(a[0])},sin:function(a){return Math.sin(a[0])},sqrt:function(a){return Math.sqrt(a[0])},tan:function(a){return Math.tan(a[0])}};return a}();a.Calculate=h})},"esri/views/2d/engine/vectorTiles/expression/string":function(){define(["require","exports","./expression"],function(h,a,g){Object.defineProperty(a,"__esModule",{value:!0});a.String=a.Concat=void 0;h=function(){function a(a){this.args=
a}a.parse=function(b){return new a(b.slice(1).map(function(a){return g.createExpression(a)}))};a.prototype.evaluate=function(a,e){return this.args.map(function(b){return b.evaluate(a,e)}).join("")};return a}();a.Concat=h;h=function(){function a(a,e){this.arg=a;this.calculate=e}a.parse=function(b){if(2!==b.length)throw Error(b[0]+" expects 1 argument.");var e=g.createExpression(b[1]);return new a(e,a.ops[b[0]])};a.prototype.evaluate=function(a,e){return this.calculate(this.arg.evaluate(a,e))};a.ops=
{downcase:function(a){return a.toLowerCase()},upcase:function(a){return a.toUpperCase()}};return a}();a.String=h})},"esri/views/2d/engine/vectorTiles/expression/types":function(){define(["require","exports","../../../../../Color","./expression"],function(h,a,g,k){function b(a,b){return{kind:"array",itemType:a,n:b}}function e(a){if("array"===a.kind){var b=e(a.itemType);return"number"===typeof a.n?"array\x3c"+b+", "+a.n+"\x3e":"value"===a.itemType.kind?"array":"array\x3c"+b+"\x3e"}return a.kind}function d(e){if(null===
e)return a.NullType;if("string"===typeof e)return a.StringType;if("boolean"===typeof e)return a.BooleanType;if("number"===typeof e)return a.NumberType;if(e instanceof g)return a.ColorType;if(Array.isArray(e)){for(var c=void 0,f=0;f<e.length;f++){var l=d(e[f]);if(c){if(c!==l){c=a.ValueType;break}}else c=l}return b(c||a.ValueType,e.length)}return a.ObjectType}function f(a,b){if("error"===a.kind)return null;if("array"===b.kind){if("array"===a.kind&&(0===a.n&&"value"===a.itemType.kind||!f(a.itemType,
b.itemType))&&("number"!==typeof b.n||b.n===a.n))return null}else{if(b.kind===a.kind)return null;if("value"===b.kind)for(var c=0,d=n;c<d.length;c++)if(!f(d[c],a))return null}return"Expected "+e(b)+" but found "+e(a)+" instead."}function m(a){var b=typeof a;return null===a?"":"string"===b||"number"===b||"boolean"===b?String(a):a instanceof g?a.toString():JSON.stringify(a)}Object.defineProperty(a,"__esModule",{value:!0});a.TypeOf=a.Literal=a.Coerce=a.Assert=a.valueToString=a.typeToString=a.array=a.ErrorType=
a.ValueType=a.ObjectType=a.ColorType=a.BooleanType=a.StringType=a.NumberType=a.NullType=void 0;a.NullType={kind:"null"};a.NumberType={kind:"number"};a.StringType={kind:"string"};a.BooleanType={kind:"boolean"};a.ColorType={kind:"color"};a.ObjectType={kind:"object"};a.ValueType={kind:"value"};a.ErrorType={kind:"error"};a.array=b;var n=[a.NullType,a.NumberType,a.StringType,a.BooleanType,a.ColorType,a.ObjectType,b(a.ValueType)];a.typeToString=e;a.valueToString=m;h=function(){function e(a,b){this.type=
a;this.args=b}e.parse=function(c){var d=c[0];if(2>c.length)throw Error(d+" expects at least one argument.");var f=1,g;if("array"===d){if(2<c.length){switch(c[1]){case "string":g=a.StringType;break;case "number":g=a.NumberType;break;case "boolean":g=a.BooleanType;break;default:throw Error('"array" type argument must be string, number or boolean');}f++}else g=a.ValueType;d=void 0;if(3<c.length){d=c[2];if(null!==d&&("number"!==typeof d||0>d||d!==Math.floor(d)))throw Error('"array" length argument must be a positive integer literal');
f++}g=b(g,d)}else switch(d){case "string":g=a.StringType;break;case "number":g=a.NumberType;break;case "boolean":g=a.BooleanType;break;case "object":g=a.ObjectType}for(d=[];f<c.length;f++){var l=k.createExpression(c[f]);d.push(l)}return new e(g,d)};e.prototype.evaluate=function(a,b){for(var c=0,e=this.args;c<e.length;c++){var g=e[c].evaluate(a,b);if(!f(d(g),this.type))return g}return null};return e}();a.Assert=h;h=function(){function b(a,b){this.type=a;this.args=b}b.parse=function(a){var c=a[0];if("to-boolean"===
c||"to-string"===c){if(2!==a.length)throw Error(c+" expects one argument.");}else if(2>a.length)throw Error(c+" expects at least one argument.");for(var c=b.types[c],d=[],e=1;e<a.length;e++){var f=k.createExpression(a[e]);d.push(f)}return new b(c,d)};b.prototype.evaluate=function(b,d){if(this.type===a.BooleanType)return!!this.args[0].evaluate(b,d);if(this.type===a.StringType)return m(this.args[0].evaluate(b,d));if(this.type===a.NumberType){for(var c=0,e=this.args;c<e.length;c++){var f=e[c],f=f.evaluate(b,
d);if(null===f)return 0;f=Number(f);if(!isNaN(f))return f}return null}if(this.type===a.ColorType){c=0;for(e=this.args;c<e.length;c++){f=e[c];f=f.evaluate(b,d);if(f instanceof g)return f;if("string"===typeof f)return g.fromString(f);if(Array.isArray(f)&&(3===f.length||4===f.length))return g.fromArray(f)}return null}};b.types={"to-boolean":a.BooleanType,"to-color":a.ColorType,"to-number":a.NumberType,"to-string":a.StringType};return b}();a.Coerce=h;h=function(){function a(a){this.val=a}a.parse=function(b){if(2!==
b.length)throw Error('"literal" expects 1 argument');return new a(b[1])};a.prototype.evaluate=function(a,b){return this.val};return a}();a.Literal=h;h=function(){function a(a){this.arg=a}a.parse=function(b){if(2!==b.length)throw Error('"typeof" expects 1 argument');return new a(k.createExpression(b[1]))};a.prototype.evaluate=function(a,b){return e(d(this.arg.evaluate(a,b)))};return a}();a.TypeOf=h})},"esri/views/2d/engine/vectorTiles/style/StyleDefinition":function(){define(["require","exports"],
function(h,a){Object.defineProperty(a,"__esModule",{value:!0});a.StyleDefinition=void 0;h=function(){function a(){}a.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}};a.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}};a.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"},"line-cap":{type:"enum",values:["butt","round","square"],default:"butt"},"line-join":{type:"enum",values:["bevel",
"round","miter"],default:"miter"},"line-miter-limit":{type:"number",default:2},"line-round-limit":{type:"number",default:1.05}};a.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"},"symbol-avoid-edges":{type:"boolean",default:!1},"symbol-placement":{type:"enum",values:["point","line"],default:"point"},"symbol-sort-key":{type:"number",default:-1},"symbol-spacing":{type:"number",minimum:1,default:250},"icon-allow-overlap":{type:"boolean",default:!1},"icon-ignore-placement":{type:"boolean",
default:!1},"icon-image":{type:"string"},"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",length:2,default:[0,0]},"icon-optional":{type:"boolean",default:!1},"icon-padding":{type:"number",minimum:0,default:2},"icon-rotate":{type:"number",default:0},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:"auto"},"icon-size":{type:"number",minimum:0,default:1},"text-allow-overlap":{type:"boolean",default:!1},"text-anchor":{type:"enum",
values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),default:"center"},"text-field":{type:"string"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},"text-ignore-placement":{type:"boolean",default:!1},"text-justify":{type:"enum",values:["auto","left","center","right"],default:"center"},"text-keep-upright":{type:"boolean",default:!0},"text-letter-spacing":{type:"number",default:0},"text-line-height":{type:"number",
default:1.2},"text-max-angle":{type:"number",minimum:0,default:45},"text-max-width":{type:"number",minimum:0,default:10},"text-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-optional":{type:"boolean",default:!1},"text-padding":{type:"number",minimum:0,default:2},"text-rotate":{type:"number",default:0},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:"auto"},"text-size":{type:"number",minimum:0,default:16},"text-transform":{type:"enum",values:["none",
"uppercase","lowercase"],default:"none"},"text-writing-mode":{type:"array",value:"enum",values:["horizontal","vertical"],default:["horizontal"]}};a.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}};a.backgroundPaintDefinition={"background-color":{type:"color",default:[0,0,0,1]},"background-opacity":{type:"number",minimum:0,maximum:1,default:1},"background-pattern":{type:"string"}};a.fillPaintDefinition={"fill-antialias":{type:"boolean",default:!0},"fill-color":{type:"color",
default:[0,0,0,1]},"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-pattern":{type:"string"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"}};a.linePaintDefinition={"line-blur":{type:"number",minimum:0,default:0},"line-color":{type:"color",default:[0,0,0,1]},"line-dasharray":{type:"array",value:"number",default:[]},"line-gap-width":{type:"number",
minimum:0,default:0},"line-offset":{type:"number",default:0},"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-pattern":{type:"string"},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"line-width":{type:"number",minimum:0,default:1}};a.symbolPaintDefinition={"icon-color":{type:"color",default:[0,0,0,1]},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-halo-color":{type:"color",
default:[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,default:0},"icon-opacity":{type:"number",minimum:0,maximum:1,default:1},"icon-translate":{type:"array",value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"text-color":{type:"color",default:[0,0,0,1]},"text-halo-blur":{type:"number",minimum:0,default:0},"text-halo-color":{type:"color",default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-opacity":{type:"number",
minimum:0,maximum:1,default:1},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"}};a.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,
default:0},"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}};a.circlePaintDefinition={"circle-blur":{type:"number",minimum:0,default:0},"circle-color":{type:"color",default:[0,0,0,1]},"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",minimum:0,default:5},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,default:1},
"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"}};return a}();a.StyleDefinition=h})},"esri/views/2d/engine/vectorTiles/style/StyleProperty":function(){define("require exports ../../../../../Color ../GeometryUtils ../expression/definition ../expression/expression".split(" "),function(h,a,g,k,b,e){return function(){function a(d,g){this.isDataDriven=
!1;var f;switch(d.type){case "number":f=!0;break;case "color":f=!0;g=a._parseColor(g);break;case "array":f="number"===d.value;break;default:f=!1}null==g&&(g=d.default);if(Array.isArray(g)&&0<g.length&&b.ops[g[0]])try{var h=e.createExpression(g);this.getValue=this._buildExpression(h,d);this.isDataDriven=!0}catch(r){console.log(r.message),this.getValue=this._buildSimple(d.default)}else{f&&"interval"===g.type&&(f=!1);if(h=g&&g.stops&&0<g.stops.length)for(var c=0,k=g.stops;c<k.length;c++){var m=k[c];
m[1]=this._validate(m[1],d)}if(this.isDataDriven=g?!!g.property:!1)if(void 0!==g.default&&(g.default=this._validate(g.default,d)),h)switch(g.type){case "identity":this.getValue=this._buildIdentity(g,d);break;case "categorical":this.getValue=this._buildCategorical(g,d);break;default:this.getValue=f?this._buildInterpolate(g,d):this._buildInterval(g,d)}else this.getValue=this._buildIdentity(g,d);else h?this.getValue=f?this._buildZoomInterpolate(g):this._buildZoomInterval(g):(g=this._validate(g,d),this.getValue=
this._buildSimple(g))}}a.prototype._validate=function(a,b){if("number"===b.type){if(a<b.minimum)return b.minimum;if(a>b.maximum)return b.maximum}return a};a.prototype._buildSimple=function(a){return function(){return a}};a.prototype._buildExpression=function(a,b){return function(d,e){try{return a.evaluate(e,d)}catch(c){return console.log(c.message),b.default}}};a.prototype._buildIdentity=function(b,d){var e=this;return function(f,c){var g;c&&(g=c.values[b.property],"color"===d.type&&(g=a._parseColor(g)));
void 0===g&&(g=b.default);return void 0!==g?e._validate(g,d):d.default}};a.prototype._buildCategorical=function(a,b){var d=this;return function(e,c){var f;c&&(f=c.values[a.property]);f=d._categorical(f,a.stops);return void 0!==f?f:void 0!==a.default?a.default:b.default}};a.prototype._buildInterval=function(a,b){var d=this;return function(e,c){var f;c&&(f=c.values[a.property]);return"number"===typeof f?d._interval(f,a.stops):void 0!==a.default?a.default:b.default}};a.prototype._buildInterpolate=function(a,
b){var d=this;return function(e,c){var f;c&&(f=c.values[a.property]);return"number"===typeof f?d._interpolate(f,a.stops,a.base||1):void 0!==a.default?a.default:b.default}};a.prototype._buildZoomInterpolate=function(a){var b=this;return function(d){return b._interpolate(d,a.stops,a.base||1)}};a.prototype._buildZoomInterval=function(a){var b=this;return function(d){return b._interval(d,a.stops)}};a.prototype._categorical=function(a,b){for(var d=b.length,e=0;e<d;e++)if(b[e][0]===a)return b[e][1]};a.prototype._interval=
function(a,b){for(var d=b.length,e=0,c=0;c<d;c++)if(b[c][0]<=a)e=c;else break;return b[e][1]};a.prototype._interpolate=function(a,b,d){for(var e,c,g=b.length,f=0;f<g;f++){var h=b[f];if(h[0]<=a)e=h;else{c=h;break}}if(e&&c){f=c[0]-e[0];a-=e[0];d=1===d?a/f:(Math.pow(d,a)-1)/(Math.pow(d,f)-1);if(Array.isArray(e[1])){e=e[1];c=c[1];a=[];for(f=0;f<e.length;f++)a.push(k.interpolate(e[f],c[f],d));return a}return k.interpolate(e[1],c[1],d)}if(e)return e[1];if(c)return c[1]};a._isEmpty=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;
return!0};a._parseColor=function(b){if(Array.isArray(b))return b;if("string"===typeof b){if(b=new g(b),!this._isEmpty(b))return g.toUnitRGBA(b)}else return b&&b.default&&(b.default=a._parseColor(b.default)),b&&b.stops&&(b.stops=b.stops.map(function(b){return[b[0],a._parseColor(b[1])]})),b};return a}()})},"esri/views/2d/engine/webgl/definitions":function(){define(["require","exports"],function(h,a){Object.defineProperty(a,"__esModule",{value:!0});a.SPRITE_PADDING=a.MAX_GPU_UPLOADS_PER_FRAME=a.VTL_HIGH_RES_CUTOFF=
a.VTL_TEXTURE_BINDING_UNIT_GLYPHS=a.VTL_TEXTURE_BINDING_UNIT_SPRITES=a.HITTEST_SEARCH_SIZE=a.THIN_LINE_THRESHOLD=a.EFFECT_FLAG_0=a.FILTER_FLAG_0=a.HIGHLIGHT_FLAG=a.MAX_FILTERS=a.ATTRIBUTE_DATA_DD1=a.ATTRIBUTE_DATA_DD0=a.ATTRIBUTE_DATA_VV=a.ATTRIBUTE_DATA_ANIMATION=a.ATTRIBUTE_DATA_FILTER_FLAGS=a.TEXTURE_BINDING_RENDERER_1=a.TEXTURE_BINDING_RENDERER_0=a.TEXTURE_BINDING_HIGHLIGHT_1=a.TEXTURE_BINDING_HIGHLIGHT_0=a.TEXTURE_BINDING_ATTRIBUTE_DATA_3=a.TEXTURE_BINDING_ATTRIBUTE_DATA_2=a.TEXTURE_BINDING_ATTRIBUTE_DATA_1=
a.TEXTURE_BINDING_ATTRIBUTE_DATA_0=a.TEXTURE_BINDING_BITMAP=a.TEXTURE_BINDING_GLYPH_ATLAS=a.TEXTURE_BINDING_SPRITE_ATLAS=a.ATTRIBUTE_STORE_TEXTURE_SIZE=a.AVERAGE_GLYPH_MOSAIC_ITEM=a.TEXT_PLACEMENT_PADDING=a.GLYPH_SIZE=a.HEURISTIC_GLYPHS_PER_FEATURE=a.HEURISTIC_GLYPHS_PER_LINE=a.COLLISION_PLACEMENT_PADDING=a.COLLISION_TILE_BOX_SIZE=a.COLLISION_BOX_PADDING=a.COLLISION_EARLY_REJECT_BUCKET_SIZE=a.COLLISION_MAX_ZOOM_DELTA=a.MAGIC_LABEL_LINE_HEIGHT=a.DOT_DENSITY_MAX_FIELDS=a.COLLISION_BUCKET_SIZE=a.DEBUG_LABELS=
a.ANGLE_FACTOR_256=a.RASTER_TILE_SIZE=a.TILE_SIZE=a.PICTURE_FILL_COLOR=a.EXTRUDE_SCALE=a.NAN_MAGIC_NUMBER=a.WEBGL_MAX_INNER_STOPS=a.WEBGL_MAX_STOPS=void 0;a.WEBGL_MAX_STOPS=8;a.WEBGL_MAX_INNER_STOPS=a.WEBGL_MAX_STOPS-2;a.NAN_MAGIC_NUMBER=1E-30;a.EXTRUDE_SCALE=64;a.PICTURE_FILL_COLOR=4294967295;a.TILE_SIZE=512;a.RASTER_TILE_SIZE=256;a.ANGLE_FACTOR_256=256/360;a.DEBUG_LABELS=!1;a.COLLISION_BUCKET_SIZE=128;a.DOT_DENSITY_MAX_FIELDS=8;a.MAGIC_LABEL_LINE_HEIGHT=29;a.COLLISION_MAX_ZOOM_DELTA=1;a.COLLISION_EARLY_REJECT_BUCKET_SIZE=
16;a.COLLISION_BOX_PADDING=16;a.COLLISION_TILE_BOX_SIZE=a.TILE_SIZE/a.COLLISION_BUCKET_SIZE;a.COLLISION_PLACEMENT_PADDING=8;a.HEURISTIC_GLYPHS_PER_LINE=50;a.HEURISTIC_GLYPHS_PER_FEATURE=10;a.GLYPH_SIZE=24;a.TEXT_PLACEMENT_PADDING=8;a.AVERAGE_GLYPH_MOSAIC_ITEM={metrics:{width:15,height:17,left:0,top:-7,advance:14}};a.ATTRIBUTE_STORE_TEXTURE_SIZE=1024;a.TEXTURE_BINDING_SPRITE_ATLAS=0;a.TEXTURE_BINDING_GLYPH_ATLAS=0;a.TEXTURE_BINDING_BITMAP=0;a.TEXTURE_BINDING_ATTRIBUTE_DATA_0=1;a.TEXTURE_BINDING_ATTRIBUTE_DATA_1=
2;a.TEXTURE_BINDING_ATTRIBUTE_DATA_2=3;a.TEXTURE_BINDING_ATTRIBUTE_DATA_3=4;a.TEXTURE_BINDING_HIGHLIGHT_0=5;a.TEXTURE_BINDING_HIGHLIGHT_1=6;a.TEXTURE_BINDING_RENDERER_0=5;a.TEXTURE_BINDING_RENDERER_1=6;a.ATTRIBUTE_DATA_FILTER_FLAGS=0;a.ATTRIBUTE_DATA_ANIMATION=1;a.ATTRIBUTE_DATA_VV=2;a.ATTRIBUTE_DATA_DD0=3;a.ATTRIBUTE_DATA_DD1=3;a.MAX_FILTERS=2;a.HIGHLIGHT_FLAG=1;a.FILTER_FLAG_0=2;a.EFFECT_FLAG_0=4;a.THIN_LINE_THRESHOLD=2.5;a.HITTEST_SEARCH_SIZE=24;a.VTL_TEXTURE_BINDING_UNIT_SPRITES=5;a.VTL_TEXTURE_BINDING_UNIT_GLYPHS=
6;a.VTL_HIGH_RES_CUTOFF=1.15;a.MAX_GPU_UPLOADS_PER_FRAME=2;a.SPRITE_PADDING=2})},"*noref":1}});
define("require exports tslib ../request ../core/Error ../core/global ../core/lang ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/urlUtils ../core/urlUtils ../core/accessorSupport/decorators ../geometry/Extent ../geometry/SpatialReference ./Layer ./mixins/ArcGISCachedService ./mixins/ArcGISService ./mixins/BlendLayer ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/ScaleRangeLayer ./support/SpriteSource ./support/TileInfo ./support/TilemapCache ./support/vectorTileLayerLoader ../portal/support/jsonContext ../views/2d/engine/vectorTiles/SchemaHelper ../views/2d/engine/vectorTiles/tileInfoUtils ../views/2d/engine/vectorTiles/style/StyleRepository".split(" "),function(h,
a,g,k,b,e,d,f,m,n,l,c,p,q,r,t,y,x,B,C,D,E,w,u,v,G,F,A,H){return function(a){function f(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];b=a.apply(this,b)||this;b._spriteSourceMap=new Map;b.currentStyleInfo=null;b.style=null;b.isReference=null;b.operationalLayerType="VectorTileLayer";b.type="vector-tile";b.url=null;return b}g.__extends(f,a);f.prototype.normalizeCtorArgs=function(a,b){return"string"===typeof a?g.__assign({url:a},b):a};f.prototype.destroy=function(){this._spriteSourceMap.clear()};
f.prototype.prefetchResources=function(a){return g.__awaiter(this,void 0,void 0,function(){return g.__generator(this,function(b){switch(b.label){case 0:return[4,this.loadSpriteSource(e.devicePixelRatio||1,a)];case 1:return b.sent(),[2]}})})};f.prototype.load=function(a){var b=this,c=this.loadFromPortal({supportedTypes:["Vector Tile Service"],supportsData:!1},a).then(function(){return g.__awaiter(b,void 0,void 0,function(){var b,c;return g.__generator(this,function(d){switch(d.label){case 0:if(!this.portalItem||
!this.portalItem.id)return[2];b=this.portalItem.itemUrl+"/resources/styles/root.json";return[4,k(b,g.__assign(g.__assign({},a),{query:{f:"json"}}))];case 1:return c=d.sent(),c.data&&this.read({url:b},G.createForItem(this.portalItem)),[2]}})})}).then(function(){return b._loadStyle(a)},function(){return b._loadStyle(a)});this.addResolvingPromise(c);return m.resolve(this)};Object.defineProperty(f.prototype,"attributionDataUrl",{get:function(){var a=this.currentStyleInfo;return(a=a&&a.serviceUrl&&l.urlToObject(a.serviceUrl))?
this._getDefaultAttribution(a.path):null},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"capabilities",{get:function(){var a=this._getPrimarySource();return a?a.capabilities:{operations:{supportsExportTiles:!1,supportsTileMap:!1},exportTiles:null}},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"fullExtent",{get:function(){var a=this._getPrimarySource();return a?a.fullExtent:null},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"parsedUrl",
{get:function(){return this.serviceUrl?n.urlToObject(this.serviceUrl):null},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"serviceUrl",{get:function(){return this.currentStyleInfo&&this.currentStyleInfo.serviceUrl||null},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"spatialReference",{get:function(){return this.tileInfo&&this.tileInfo.spatialReference||null},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"styleUrl",{get:function(){return this.currentStyleInfo&&
this.currentStyleInfo.styleUrl||null},enumerable:!1,configurable:!0});f.prototype.writeStyleUrl=function(a,b){a&&l.isProtocolRelative(a)&&(a="https:"+a);b.styleUrl=a};Object.defineProperty(f.prototype,"tileIndexType",{get:function(){var a=this._getPrimarySource();return a?a.type:""},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"tileIndexUrl",{get:function(){var a=this._getPrimarySource();return a?a.tileMapURL:""},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,
"tileInfo",{get:function(){var a=[],b;for(b in this.sourceNameToSource)a.push(this.sourceNameToSource[b]);b=this._getPrimarySource().tileInfo;if(1<a.length)for(var c=0;c<a.length;c++)A.areSchemasOverlapping(b,a[c].tileInfo)&&(b=A.unionTileInfos(b,a[c].tileInfo));return b},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"tilemapCache",{get:function(){var a=this._getPrimarySource();return a?a.capabilities.operations.supportsTileMap?a.tilemapCache:null:null},enumerable:!1,configurable:!0});
Object.defineProperty(f.prototype,"tileServers",{get:function(){var a=this._getPrimarySource();return a?a.tileServers:[]},enumerable:!1,configurable:!0});f.prototype.readVersion=function(a,b){return b.version?parseFloat(b.version):parseFloat(b.currentVersion)};Object.defineProperty(f.prototype,"compatibleTileInfo256",{get:function(){return F.create256x256CompatibleTileInfo(this.tileInfo)},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"compatibleTileInfo512",{get:function(){return F.create512x512CompatibleTileInfo(this.tileInfo)},
enumerable:!1,configurable:!0});f.prototype.loadSpriteSource=function(a,b){void 0===a&&(a=1);return g.__awaiter(this,void 0,void 0,function(){var c;return g.__generator(this,function(d){switch(d.label){case 0:if(this._spriteSourceMap.has(a))return[3,2];c=new E.default(this.styleRepository.sprite,a);return[4,c.load(b)];case 1:d.sent(),this._spriteSourceMap.set(a,c),d.label=2;case 2:return[2,m.resolve(this._spriteSourceMap.get(a))]}})})};f.prototype.loadStyle=function(a,b){return g.__awaiter(this,void 0,
void 0,function(){var c,d,e,f=this;return g.__generator(this,function(g){c=a||this.style||this.url;if(this._loadingPromise&&"string"===typeof c&&this.url===c&&!m.isAborted(this._abortController))return[2,this._loadingPromise];(d=this._abortController)&&d.abort();e=m.createAbortController();this._loadingPromise=m.create(function(a,d){var g={signal:e.signal};f._spriteSourceMap.clear();f._getSourceAndStyle(c,g).then(a,d);m.onAbort(b,function(){e.abort()})});this._abortController=e;return[2,this._loadingPromise]})})};
f.prototype.getStyleLayerId=function(a){return this.styleRepository.getStyleLayerId(a)};f.prototype.getPaintProperties=function(a){return d.clone(this.styleRepository.getPaintProperties(a))};f.prototype.setPaintProperties=function(a,b){var c=this.styleRepository.isPainterDataDriven(a),d=this.styleRepository.setPaintProperties(a,b),e=this.styleRepository.isPainterDataDriven(a);this.emit("paint-change",{layer:d,paint:b});(c||e)&&this.emit("layout-change",{layer:d,layout:this.styleRepository.getLayoutProperties(a),
symbols:!1})};f.prototype.getLayoutProperties=function(a){return d.clone(this.styleRepository.getLayoutProperties(a))};f.prototype.setLayoutProperties=function(a,b){a=this.styleRepository.setLayoutProperties(a,b);this.emit("layout-change",{layer:a,layout:b})};f.prototype.getTileUrl=function(a,b,c){var d=this.tileServers[b%this.tileServers.length];return d=d.replace(/\{z\}/gi,a.toString()).replace(/\{y\}/gi,b.toString()).replace(/\{x\}/gi,c.toString())};f.prototype.write=function(c,d){return d&&d.origin&&
!this.styleUrl?(d.messages&&d.messages.push(new b("vectortilelayer:unsupported","VectorTileLayer ("+this.title+", "+this.id+") with style defined by JSON only are not supported",{layer:this})),null):a.prototype.write.call(this,c,d)};f.prototype._getSourceAndStyle=function(a,b){return g.__awaiter(this,void 0,void 0,function(){var c;return g.__generator(this,function(d){switch(d.label){case 0:if(!a)throw Error("invalid style!");return[4,v.loadMetadata(a,b)];case 1:return c=d.sent(),this._set("currentStyleInfo",
{serviceUrl:c.serviceUrl,styleUrl:c.styleUrl,spriteUrl:c.spriteUrl,glyphsUrl:c.glyphsUrl,style:c.style,layerDefinition:c.layerDefinition}),"string"===typeof a?(this.url=a,this.style=null):(this.url=null,this.style=a),this._set("sourceNameToSource",c.sourceNameToSource),this._set("primarySourceName",c.primarySourceName),this._set("styleRepository",new H(c.style,c)),this.read(c.layerDefinition,{origin:"service"}),[2]}})})};f.prototype._getDefaultAttribution=function(a){var b=a.match(/^https?:\/\/(basemaps|basemapsbeta|basemapsdev)\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i);
if(b&&(a=b[3]&&b[3].toLowerCase()))for(var b=b[2]||"",c=0,d="OpenStreetMap_v2 OpenStreetMap_Export_v2 OpenStreetMap_FTS_v2 OpenStreetMap_GCS_v2 World_Basemap World_Basemap_v2 World_Basemap_Export_v2 World_Basemap_GCS_v2 World_Basemap_WGS84".split(" ");c<d.length;c++){var e=d[c];if(-1<e.toLowerCase().indexOf(a))return l.normalize("//static.arcgis.com/attribution/Vector"+b+"/"+e)}};f.prototype._getPrimarySource=function(){return this.sourceNameToSource&&this.primarySourceName in this.sourceNameToSource?
this.sourceNameToSource[this.primarySourceName]:null};f.prototype._loadStyle=function(a){return g.__awaiter(this,void 0,void 0,function(){return g.__generator(this,function(b){return this._loadingPromise?[2,this._loadingPromise]:[2,this.loadStyle(null,a)]})})};g.__decorate([c.property({readOnly:!0,dependsOn:["currentStyleInfo"]})],f.prototype,"attributionDataUrl",null);g.__decorate([c.property({type:["show","hide"]})],f.prototype,"listMode",void 0);g.__decorate([c.property({json:{read:!1},readOnly:!0,
dependsOn:["sourceNameToSource","primarySourceName"]})],f.prototype,"capabilities",null);g.__decorate([c.property({readOnly:!0})],f.prototype,"currentStyleInfo",void 0);g.__decorate([c.property({json:{read:!1},readOnly:!0,type:p,dependsOn:["sourceNameToSource","primarySourceName"]})],f.prototype,"fullExtent",null);g.__decorate([c.property()],f.prototype,"style",void 0);g.__decorate([c.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}}})],f.prototype,
"isReference",void 0);g.__decorate([c.property({type:["VectorTileLayer"]})],f.prototype,"operationalLayerType",void 0);g.__decorate([c.property({readOnly:!0,dependsOn:["serviceUrl"]})],f.prototype,"parsedUrl",null);g.__decorate([c.property({readOnly:!0,dependsOn:["currentStyleInfo"]})],f.prototype,"serviceUrl",null);g.__decorate([c.property({type:q,dependsOn:["tileInfo"],readOnly:!0})],f.prototype,"spatialReference",null);g.__decorate([c.property({readOnly:!0})],f.prototype,"styleRepository",void 0);
g.__decorate([c.property({readOnly:!0})],f.prototype,"sourceNameToSource",void 0);g.__decorate([c.property({readOnly:!0})],f.prototype,"primarySourceName",void 0);g.__decorate([c.property({type:String,readOnly:!0,dependsOn:["currentStyleInfo"],json:{write:{ignoreOrigin:!0},origins:{"web-document":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],f.prototype,"styleUrl",null);g.__decorate([c.writer(["portal-item","web-document"],"styleUrl")],f.prototype,"writeStyleUrl",null);g.__decorate([c.property({json:{read:!1},
readOnly:!0,dependsOn:["sourceNameToSource","primarySourceName"]})],f.prototype,"tileIndexType",null);g.__decorate([c.property({json:{read:!1},readOnly:!0,dependsOn:["sourceNameToSource","primarySourceName"]})],f.prototype,"tileIndexUrl",null);g.__decorate([c.property({json:{read:!1,origins:{service:{read:!1}}},readOnly:!0,type:w,dependsOn:["sourceNameToSource","primarySourceName"]})],f.prototype,"tileInfo",null);g.__decorate([c.property({json:{read:!1},readOnly:!0,type:u.TilemapCache,dependsOn:["sourceNameToSource",
"primarySourceName"]})],f.prototype,"tilemapCache",null);g.__decorate([c.property({json:{read:!1},readOnly:!0,dependsOn:["sourceNameToSource","primarySourceName"]})],f.prototype,"tileServers",null);g.__decorate([c.property({json:{read:!1},readOnly:!0,value:"vector-tile"})],f.prototype,"type",void 0);g.__decorate([c.property({json:{origins:{"web-document":{read:{source:"styleUrl"}},"portal-item":{read:{source:"url"}}},write:!1,read:!1}})],f.prototype,"url",void 0);g.__decorate([c.property({readOnly:!0})],
f.prototype,"version",void 0);g.__decorate([c.reader("version",["version","currentVersion"])],f.prototype,"readVersion",null);g.__decorate([c.property({readOnly:!0,dependsOn:["tileInfo"]})],f.prototype,"compatibleTileInfo256",null);g.__decorate([c.property({readOnly:!0,dependsOn:["tileInfo"]})],f.prototype,"compatibleTileInfo512",null);return f=g.__decorate([c.subclass("esri.layers.VectorTileLayer")],f)}(x.BlendLayer(D.ScaleRangeLayer(t.ArcGISCachedService(y.ArcGISService(B.OperationalLayer(C.PortalLayer(f.MultiOriginJSONMixin(r))))))))});