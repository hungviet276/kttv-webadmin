// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../symbols ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ./LabelExpressionInfo ./labelUtils ../../symbols/support/defaults ../../symbols/support/jsonUtils".split(" "),function(w,x,c,l,r,t,m,d,n,f,u,p){function h(c){return c?"service"===c.origin?!1:!c.layer||"map-image"!==c.layer.type:!0}var g=new r.default({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",
esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",
esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",
esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});return function(q){function a(b){b=q.call(this,b)||this;b.type="label";b.name=null;b.deconflictionStrategy="static";b.labelExpression=null;b.labelExpressionInfo=null;b.labelPlacement=null;b.maxScale=0;b.minScale=0;b.symbol=u.defaultTextSymbol2D;b.useCodedValues=void 0;b.where=null;return b}c.__extends(a,q);k=a;a.evaluateWhere=function(b,a){var c=function(b,a,c){switch(a){case "\x3d":return b==c?!0:!1;case "\x3c\x3e":return b!=
c?!0:!1;case "\x3e":return b>c?!0:!1;case "\x3e\x3d":return b>=c?!0:!1;case "\x3c":return b<c?!0:!1;case "\x3c\x3d":return b<=c?!0:!1}return!1};try{if(null==b)return!0;var e=b.split(" ");if(3===e.length)return c(a[e[0]],e[1],e[2]);if(7===e.length){var d=c(a[e[0]],e[1],e[2]),v=e[3],f=c(a[e[4]],e[5],e[6]);switch(v){case "AND":return d&&f;case "OR":return d||f}}return!1}catch(y){console.log("Error.: can't parse \x3d "+b)}};a.prototype.readLabelExpression=function(b,a){a=a.labelExpressionInfo;if(!a||
!a.value&&!a.expression)return b};a.prototype.writeLabelExpression=function(b,a,c,e){this.labelExpressionInfo&&(h(e)||e&&"service"===e.origin)&&(null!=this.labelExpressionInfo.value?b=f.templateStringToSql(this.labelExpressionInfo.value):null!=this.labelExpressionInfo.expression&&(e=f.getSingleFieldArcadeExpression(this.labelExpressionInfo.expression))&&(b="["+e+"]"));null!=b&&(a[c]=b)};a.prototype.writeLabelExpressionInfo=function(b,a,c,e){if(null==b&&null!=this.labelExpression&&h(e))b=new n({expression:this.getLabelExpressionArcade()});
else if(!b)return;b=b.toJSON(e);b.expression&&(a[c]=b)};a.prototype.writeMaxScale=function(b,a){if(b||this.minScale)a.maxScale=b};a.prototype.writeMinScale=function(a,c){if(a||this.maxScale)c.minScale=a};a.prototype.getLabelExpression=function(){return f.getLabelExpression(this)};a.prototype.getLabelExpressionArcade=function(){return f.getLabelExpressionArcade(this)};a.prototype.getLabelExpressionSingleField=function(){return f.getLabelExpressionSingleField(this)};a.prototype.hash=function(){return JSON.stringify(this)};
a.prototype.clone=function(){return new k({deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:m.clone(this.labelExpressionInfo),labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,symbol:m.clone(this.symbol),where:this.where,useCodedValues:this.useCodedValues})};var k;c.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"name",void 0);c.__decorate([d.property({type:String,json:{write:!0,
default:"static",origins:{"web-scene":{write:!1}}}})],a.prototype,"deconflictionStrategy",void 0);c.__decorate([d.property({type:String,json:{write:{allowNull:!0}}})],a.prototype,"labelExpression",void 0);c.__decorate([d.reader("labelExpression")],a.prototype,"readLabelExpression",null);c.__decorate([d.writer("labelExpression")],a.prototype,"writeLabelExpression",null);c.__decorate([d.property({type:n,json:{write:{overridePolicy:function(a,c,d){return h(d)?{allowNull:!0}:{enabled:!1}}}}})],a.prototype,
"labelExpressionInfo",void 0);c.__decorate([d.writer("labelExpressionInfo")],a.prototype,"writeLabelExpressionInfo",null);c.__decorate([d.property({type:g.apiValues,json:{type:g.jsonValues,read:g.read,write:g.write}})],a.prototype,"labelPlacement",void 0);c.__decorate([d.property({type:Number})],a.prototype,"maxScale",void 0);c.__decorate([d.writer("maxScale")],a.prototype,"writeMaxScale",null);c.__decorate([d.property({type:Number})],a.prototype,"minScale",void 0);c.__decorate([d.writer("minScale")],
a.prototype,"writeMinScale",null);c.__decorate([d.property({types:l.symbolTypesLabel,json:{origins:{"web-scene":{types:l.symbolTypesLabel3D,write:p.write,default:null}},write:p.write,default:null}})],a.prototype,"symbol",void 0);c.__decorate([d.property({type:Boolean,json:{write:!0}})],a.prototype,"useCodedValues",void 0);c.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"where",void 0);return a=k=c.__decorate([d.subclass("esri.layers.support.LabelClass")],a)}(t.JSONSupport)});