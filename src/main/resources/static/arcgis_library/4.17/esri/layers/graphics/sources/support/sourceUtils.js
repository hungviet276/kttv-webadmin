// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../../../geometry/support/spatialReferenceUtils ../../../support/fieldUtils @dojo/framework/shim/Promise".split(" "),function(u,b,f,h,k){function n(a){return new v(a)}function r(){return f.__awaiter(this,void 0,void 0,function(){return f.__generator(this,function(a){switch(a.label){case 0:return c?[2,c]:[4,new Promise(function(a,b){u(["../../../../geometry/geometryEngineJSON"],a,b)})];case 1:return c=a.sent(),[2,c]}})})}Object.defineProperty(b,"__esModule",{value:!0});
b.loadGeometryEngineForSimplify=b.loadGeometryEngine=b.simplify=b.mixAttributes=b.createFeatureEditSuccessResult=b.createFeatureEditErrorResult=void 0;var w=function(){return function(){this.description=this.code=null}}(),v=function(){return function(a){this.error=new w;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;this.error.description=a}}();b.createFeatureEditErrorResult=n;var x=function(){return function(a){this.globalId=null;this.success=!0;this.objectId=this.uniqueId=a}}();
b.createFeatureEditSuccessResult=function(a){return new x(a)};var p=new Set;b.mixAttributes=function(a,b,m,c,f,h){void 0===f&&(f=!1);p.clear();for(var t in c){var d=a.get(t);if(d){var l=c[t],e;e=d;var g=l,q=g;"string"===typeof g&&k.isNumericField(e)?q=parseFloat(g):null!=g&&k.isStringField(e)&&"string"!==typeof g&&(q=String(g));e=k.sanitizeNullFieldValue(q);e!==l&&h&&h.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:d,originalValue:l,
sanitizedValue:e}});p.add(d.name);if(d&&(f||d.editable)){if(l=k.validateFieldValue(d,e))return n(k.validationErrorToString(l,d,e));m[d.name]=e}}}for(a=0;a<b.length;a++)if(m=b[a],!p.has(m.name))return n('missing required field "'+m.name+'"');return null};var c;b.simplify=function(a,b){if(!a||!h.isValid(b))return a;if("rings"in a||"paths"in a){if(!c)throw new TypeError("geometry engine not loaded");return c.simplify(b,a)}return a};b.loadGeometryEngine=r;b.loadGeometryEngineForSimplify=function(a,b){return f.__awaiter(this,
void 0,void 0,function(){return f.__generator(this,function(c){switch(c.label){case 0:return!h.isValid(a)||"esriGeometryPolygon"!==b&&"esriGeometryPolyline"!==b?[3,2]:[4,r()];case 1:c.sent(),c.label=2;case 2:return[2]}})})}});