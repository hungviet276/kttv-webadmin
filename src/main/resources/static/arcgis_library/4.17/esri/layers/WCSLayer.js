// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../core/Error ../core/maybe ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/accessorSupport/decorators ./Layer ./mixins/ImageryTileMixin ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./support/commonProperties ./support/Field ./support/rasterDatasets/WCSRaster ../support/popupUtils".split(" "),function(x,y,c,f,g,h,k,d,l,m,n,p,q,r,t,u,v,w){return function(e){function a(){for(var b=[],a=0;a<arguments.length;a++)b[a]=
arguments[a];b=e.apply(this,b)||this;b.coverageId=null;b.customParameters=null;b.version=null;b.isReference=null;b.type="wcs";b.popupEnabled=!0;b.popupTemplate=null;return b}c.__extends(a,e);a.prototype.normalizeCtorArgs=function(b,a){return"string"===typeof b?c.__assign({url:b},a):b};a.prototype.load=function(a){a=g.isSome(a)?a.signal:null;this.addResolvingPromise(this._openRaster(a));return k.resolve(this)};Object.defineProperty(a.prototype,"defaultPopupTemplate",{get:function(){return this.createPopupTemplate()},
enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"fields",{get:function(){return[new u({name:"Raster.ServicePixelValue",alias:"Pixel Value",domain:null,editable:!1,length:50,type:"string"})]},enumerable:!1,configurable:!0});a.prototype.createPopupTemplate=function(a){return w.createPopupTemplate(this,a)};a.prototype._openRaster=function(a){return c.__awaiter(this,void 0,void 0,function(){var b;return c.__generator(this,function(c){switch(c.label){case 0:return b=new v({url:this.url,
version:this.version,coverageId:this.coverageId,ioConfig:{sampling:"closest",customFetchParameters:this.customParameters}}),[4,b.open({signal:a})];case 1:c.sent();if(!b.rasterInfo)throw b.destroy(),new f("wcs-layer:load","cannot load resources on "+this.url);null==this.title&&this.setAtOrigin("title",this.raster.datasetName,"service");this.raster=b;this._configDefaultSettings();return[2]}})})};c.__decorate([d.property()],a.prototype,"coverageId",void 0);c.__decorate([d.property({json:{type:Object,
write:!0}})],a.prototype,"customParameters",void 0);c.__decorate([d.property()],a.prototype,"version",void 0);c.__decorate([d.property()],a.prototype,"isReference",void 0);c.__decorate([d.property({readOnly:!0})],a.prototype,"type",void 0);c.__decorate([d.property(t.popupEnabled)],a.prototype,"popupEnabled",void 0);c.__decorate([d.property()],a.prototype,"popupTemplate",void 0);c.__decorate([d.property({readOnly:!0,dependsOn:["title"]})],a.prototype,"defaultPopupTemplate",null);c.__decorate([d.property({readOnly:!0,
dependsOn:["rasterInfo"]})],a.prototype,"fields",null);return a=c.__decorate([d.subclass("esri.layers.WCSLayer")],a)}(r.ScaleRangeLayer(q.RefreshableLayer(n.OperationalLayer(p.PortalLayer(m.ImageryTileMixin(h.MultiOriginJSONMixin(l)))))))});