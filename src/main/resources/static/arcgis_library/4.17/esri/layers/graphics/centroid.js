// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define(["require","exports"],function(B,m){function A(a,c,h,p,b,l,f){void 0===f&&(f=1);l=b?l?4:3:l?3:2;var d=h,q=h+l,x=0,n=0,r=h=0,v=0,e=0;for(--p;e<p;e++,d+=l,q+=l){var k=c[d],w=c[d+1],u=c[d+2],y=c[q],m=c[q+1],g=c[q+2],t=k*m-y*w,r=r+t,x=x+(k+y)*t,n=n+(w+m)*t;b&&(t=k*g-y*u,h+=(u+g)*t,v+=t);k<a[0]&&(a[0]=k);k>a[1]&&(a[1]=k);w<a[2]&&(a[2]=w);w>a[3]&&(a[3]=w);b&&(u<a[4]&&(a[4]=u),u>a[5]&&(a[5]=u))}0<r*f&&(r*=-1);0<v*f&&(v*=-1);if(!r)return null;a=[x,n,.5*r];b&&(a[3]=h,a[4]=.5*v);return a}function z(a,
c,h,p,b){b=p?b?4:3:b?3:2;for(var l=c,f=c+b,d=0,q=0,x=0,n=0,r=0,v=h-1;r<v;r++,l+=b,f+=b){var e=a[l],k=a[l+1],w=a[l+2],u=a[f],y=a[f+1],m=a[f+2],g;if(p){g=u-e;var t=y-k,z=m-w;g=Math.sqrt(g*g+t*t+z*z)}else g=u-e,t=y-k,g=Math.sqrt(g*g+t*t);g&&(d+=g,p?(e=[e+.5*(u-e),k+.5*(y-k),w+.5*(m-w)],q+=g*e[0],x+=g*e[1],n+=g*e[2]):(e=[e+.5*(u-e),k+.5*(y-k)],q+=g*e[0],x+=g*e[1]))}return 0<d?p?[q/d,x/d,n/d]:[q/d,x/d]:0<h?p?[a[c],a[c+1],a[c+2]]:[a[c],a[c+1]]:null}Object.defineProperty(m,"__esModule",{value:!0});m.lineCentroid=
m.getCentroidOptimizedGeometry=void 0;m.getCentroidOptimizedGeometry=function(a,c,h,p,b){if(!c||!c.lengths.length)return null;var l="upperLeft"===(null===b||void 0===b?void 0:b.originPosition)?-1:1;a.lengths.length&&(a.lengths.length=0);a.coords.length&&(a.coords.length=0);b=a.coords;for(var f=[],d=h?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,
Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],q=c.lengths,m=c.coords,n=h?p?4:3:p?3:2,r=0,v=0;v<q.length;v++){var e=q[v],k=A(d,m,r,e,h,p,l);k&&f.push(k);r+=e*n}f.sort(function(a,b){var c=l*a[2]-l*b[2];0===c&&h&&(c=a[4]-b[4]);return c});f.length&&(n=6*f[0][2],b[0]=f[0][0]/n,b[1]=f[0][1]/n,h&&(n=6*f[0][4],b[2]=0!==n?f[0][3]/n:0),b[0]<d[0]||b[0]>d[1]||b[1]<d[2]||b[1]>d[3]||h&&(b[2]<d[4]||b[2]>d[5]))&&(b.length=0);if(!b.length)if(c=c.lengths[0]?z(m,0,q[0],h,p):null)b[0]=c[0],b[1]=c[1],h&&2<c.length&&
(b[2]=c[2]);else return null;return a};m.lineCentroid=z});