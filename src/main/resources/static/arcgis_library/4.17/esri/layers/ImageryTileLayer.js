// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
require({cache:{"esri/rasterRenderers":function(){define("require exports ./core/Warning ./renderers/ClassBreaksRenderer ./renderers/RasterColormapRenderer ./renderers/RasterShadedReliefRenderer ./renderers/RasterStretchRenderer ./renderers/UniqueValueRenderer ./renderers/VectorFieldRenderer".split(" "),function(D,b,g,q,e,r,l,f,c){function m(a,d){if(!a)return null;var x;x=a?A[a.type]||null:null;if(x)return x=new x,x.read(a,d),x;d&&d.messages&&a&&d.messages.push(new g("renderer:unsupported","Renderers of type '"+
(a.type||"unknown")+"' are not supported",{definition:a,context:d}));return null}Object.defineProperty(b,"__esModule",{value:!0});b.fromJSON=b.read=b.rasterRendererTypes=b.VectorFieldRenderer=b.RasterShadedReliefRenderer=b.UniqueValueRenderer=b.RasterStretchRenderer=b.RasterColormapRenderer=b.ClassBreaksRenderer=void 0;b.ClassBreaksRenderer=q;b.RasterColormapRenderer=e;b.RasterShadedReliefRenderer=r;b.RasterStretchRenderer=l;b.UniqueValueRenderer=f;b.VectorFieldRenderer=c;b.rasterRendererTypes={key:"type",
base:null,typeMap:{"unique-value":f,"class-breaks":q,"raster-colormap":e,"raster-stretch":l,"vector-field":c,"raster-shaded-relief":r}};var A={uniqueValue:f,classBreaks:q,rasterStretch:l,rasterColormap:e,vectorField:c,rasterShadedRelief:r};b.read=m;b.fromJSON=function(a,d){return m(a,d)}})},"esri/renderers/RasterColormapRenderer":function(){define("require exports tslib ../core/JSONSupport ../core/accessorSupport/decorators ./support/ColormapInfo ./support/colorRampUtils".split(" "),function(D,b,
g,q,e,r,l){return function(f){function c(c){c=f.call(this,c)||this;c.colormapInfos=null;c.type="raster-colormap";return c}g.__extends(c,f);b=c;c.createFromColormap=function(c,a){function d(d){return a?a[d]||"":String(d[0])}if(!c)return null;var x=5===c[0].length;c=c.sort(function(a){return a[0][0]-a[1][0]});x=x?c.map(function(a){return r.fromJSON({value:a[0],color:a.slice(1,5),label:d(a[0])})}):c.map(function(a){return r.fromJSON({value:a[0],color:a.slice(1,4).concat([255]),label:d(a[0])})});return new b({colormapInfos:x})};
c.createFromColorramp=function(c){c=l.convertColorRampToColormap(c,256);return b.createFromColormap(c)};c.prototype.clone=function(){return new b({colormapInfos:this.colormapInfos.map(function(c){return c.toJSON()})})};c.prototype.extractColormap=function(){return this.colormapInfos.map(function(c){return[c.value,c.color.r,c.color.g,c.color.b,1<c.color.a?c.color.a:255*c.color.a&255]}).sort(function(c,a){return c[0]-a[0]})};var b;g.__decorate([e.property({type:[r],json:{write:!0}})],c.prototype,"colormapInfos",
void 0);g.__decorate([e.enumeration({rasterColormap:"raster-colormap"})],c.prototype,"type",void 0);return c=b=g.__decorate([e.subclass("esri.renderers.RasterColormapRenderer")],c)}(q.JSONSupport)})},"esri/renderers/support/ColormapInfo":function(){define("require exports tslib ../../Color ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),function(D,b,g,q,e,r,l){return function(e){function c(){var c=null!==e&&e.apply(this,arguments)||this;
c.value=null;c.label=null;c.color=null;return c}g.__extends(c,e);g.__decorate([r.property({type:Number,json:{write:!0}})],c.prototype,"value",void 0);g.__decorate([r.property({type:String,json:{write:!0}})],c.prototype,"label",void 0);g.__decorate([r.property({type:q,json:{type:[l.Integer],write:!0}})],c.prototype,"color",void 0);return c=g.__decorate([r.subclass("esri.renderers.support.ColormapInfo")],c)}(e.JSONSupport)})},"esri/renderers/support/colorRampUtils":function(){define(["require","exports",
"../../Color","../../core/colorUtils"],function(D,b,g,q){function e(e,f){if(!e||!f||e.length!==f.length)return!1;for(var c=0;c<e.length;c++)if(e[c]>f[c]+2||e[c]<f[c]-2)return!1;return!0}function r(l,f){if(l){f=f?f:b.PREDEFINED_JSON_COLOR_RAMPS;var c=null,m;"algorithmic"===l.type?f.some(function(A){if(e(l.fromColor.toRgb(),A.fromColor)&&e(l.toColor.toRgb(),A.toColor))return c=A.id,!0}):"multipart"===l.type&&f.some(function(A){if(l.colorRamps&&A.colorRamps&&l.colorRamps.length===A.colorRamps.length&&
(m=l.colorRamps,!A.colorRamps.some(function(a,d){if(!e(m[d].fromColor.toRgb(),(new g(a.fromColor)).toRgb())||!e(m[d].toColor.toRgb(),(new g(a.toColor)).toRgb()))return!0}))){if(c)return!0;c=A.id}});return c}}Object.defineProperty(b,"__esModule",{value:!0});b.convertColorRampToColormap=b.getColorRampName=b.getColorRampId=b.PREDEFINED_COLOR_RAMP_NAME_MAP=b.PREDEFINED_JSON_COLOR_RAMPS=void 0;b.PREDEFINED_JSON_COLOR_RAMPS=[{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],
toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,
0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",
type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,
0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,
179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,
96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,
16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",
type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",
type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,
0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",
type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,
0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,
245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,
0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,
153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,
0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,
255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}];b.PREDEFINED_COLOR_RAMP_NAME_MAP={aspect_predefined:"Aspect",blackToWhite_predefined:"Black to White",blueBright_predefined:"Blue Bright",blueLightToDark_predefined:"Blue Light to Dark",
blueGreenBright_predefined:"Blue-Green Bright",blueGreenLightToDark_predefined:"Blue-Green Light to Dark",brownLightToDark_predefined:"Brown Light to Dark",brownToBlueGreenDivergingBright_predefined:"Brown to Blue Green Diverging, Bright",brownToBlueGreenDivergingDark_predefined:"Brown to Blue Green Diverging, Dark",coefficientBias_predefined:"Coefficient Bias",coldToHotDiverging_predefined:"Cold to Hot Diverging",conditionNumber_predefined:"Condition Number",cyanToPurple_predefined:"Cyan to Purple",
cyanLightToBlueDark_predefined:"Cyan-Light to Blue-Dark",distance_predefined:"Distance",elevation1_predefined:"Elevation #1",elevation2_predefined:"Elevation #2",errors_predefined:"Errors",grayLightToDark_predefined:"Gray Light to Dark",greenBright_predefined:"Green Bright",greenLightToDark_predefined:"Green Light to Dark",greenToBlue_predefined:"Green to Blue",orangeBright_predefined:"Orange Bright",orangeLightToDark_predefined:"Orange Light to Dark",partialSpectrum_predefined:"Partial Spectrum",
partialSpectrum1Diverging_predefined:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging_predefined:"Partial Spectrum 2 Diverging",pinkToYellowGreenDivergingBright_predefined:"Pink to YellowGreen Diverging, Bright",pinkToYellowGreenDivergingDark_predefined:"Pink to YellowGreen Diverging, Dark",precipitation_predefined:"Precipitation",prediction_predefined:"Prediction",purpleBright_predefined:"Purple Bright",purpleToGreenDivergingBright_predefined:"Purple to Green Diverging, Bright",purpleToGreenDivergingDark_predefined:"Purple to Green Diverging, Dark",
purpleBlueBright_predefined:"Purple-Blue Bright",purpleBlueLightToDark_predefined:"Purple-Blue Light to Dark",purpleRedBright_predefined:"Purple-Red Bright",purpleRedLightToDark_predefined:"Purple-Red Light to Dark",redBright_predefined:"Red Bright",redLightToDark_predefined:"Red Light to Dark",redToBlueDivergingBright_predefined:"Red to Blue Diverging, Bright",redToBlueDivergingDark_predefined:"Red to Blue Diverging, Dark",redToGreen_predefined:"Red to Green",redToGreenDivergingBright_predefined:"Red to Green Diverging, Bright",
redToGreenDivergingDark_predefined:"Red to Green Diverging, Dark",slope_predefined:"Slope",spectrumFullBright_predefined:"Spectrum-Full Bright",spectrumFullDark_predefined:"Spectrum-Full Dark",spectrumFullLight_predefined:"Spectrum-Full Light",surface_predefined:"Surface",temperature_predefined:"Temperature",whiteToBlack_predefined:"White to Black",yellowToDarkRed_predefined:"Yellow to Dark Red",yellowToGreenToDarkBlue_predefined:"Yellow to Green to Dark Blue",yellowToRed_predefined:"Yellow to Red",
yellowGreenBright_predefined:"Yellow-Green Bright",yellowGreenLightToDark_predefined:"Yellow-Green Light to Dark"};b.getColorRampId=r;b.getColorRampName=function(e){return(e=r(e))?b.PREDEFINED_COLOR_RAMP_NAME_MAP[e]:null};b.convertColorRampToColormap=function(e,f,c){void 0===c&&(c=!1);if(e&&f&&!(2>f)){for(var b="multipart"===e.type?e.colorRamps.length:1,A=[],a=[],d,x,p,u,z,h=0,v=0;v<b;v++)A[v]={start:null,end:null},A[v].start=h,A[v].end=h+1/b,h=A[v].end;h=function(h){u=h/(f-1);A.forEach(function(k,
v){if(u>=k.start&&(u<k.end||h===f-1&&v===b-1)){z=(u-k.start)/(k.end-k.start);"multipart"===e.type?(d=new g(e.colorRamps[v].fromColor),x=new g(e.colorRamps[v].toColor)):(d=new g(e.fromColor),x=new g(e.toColor));if(0===h)a.push([h,d.r,d.g,d.b]);else if(h===f-1)a.push([h,x.r,x.g,x.b]);else{var t=x;k=z;v=q.toLAB(d);t=q.toLAB(t);p=q.toRGB({l:v.l*(1-k)+k*t.l,a:v.a*(1-k)+k*t.a,b:v.b*(1-k)+k*t.b});a.push([h,p.r,p.g,p.b])}c&&a[h].push(Math.min(255,Math.round(255*(d.a*(1-z)+x.a*z))))}})};for(v=0;v<f;v++)h(v);
return a}}})},"esri/core/colorUtils":function(){define(["require","exports"],function(D,b){function g(c,a){var d=[],x,p;if(c[0].length!==a.length)throw"dimensions do not match";var u=c.length,e=c[0].length,h=0;for(x=0;x<u;x++){for(p=h=0;p<e;p++)h+=c[x][p]*a[p];d.push(h)}return d}function q(e){e=[e.r/255,e.g/255,e.b/255].map(function(a){return.04045>=a?a/12.92:Math.pow((a+.055)/1.055,2.4)});e=g(c,e);return{x:100*e[0],y:100*e[1],z:100*e[2]}}function e(c){c=g(m,[c.x/100,c.y/100,c.z/100]).map(function(a){return Math.min(1,
Math.max(.0031308>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055,0))});return{r:Math.round(255*c[0]),g:Math.round(255*c[1]),b:Math.round(255*c[2])}}function r(c){c=[c.x/95.047,c.y/100,c.z/108.883].map(function(a){return a>Math.pow(6/29,3)?Math.pow(a,1/3):1/3*Math.pow(29/6,2)*a+4/29});return{l:116*c[1]-16,a:500*(c[0]-c[1]),b:200*(c[1]-c[2])}}function l(c){var a=c.l;c=[(a+16)/116+c.a/500,(a+16)/116,(a+16)/116-c.b/200].map(function(a){return a>6/29?Math.pow(a,3):3*Math.pow(6/29,2)*(a-4/29)});return{x:95.047*
c[0],y:100*c[1],z:108.883*c[2]}}function f(c){if("r"in c&&"g"in c&&"b"in c)return c;if("l"in c&&"c"in c&&"h"in c){var a=c.c,d=c.h;return e(l({l:c.l,a:a*Math.cos(d),b:a*Math.sin(d)}))}if("l"in c&&"a"in c&&"b"in c)return e(l(c));if("x"in c&&"y"in c&&"z"in c)return e(c);if("h"in c&&"s"in c&&"v"in c){d=(c.h+360)%360/60;a=c.v/100*255;c=c.s/100*a;var x=c*(1-Math.abs(d%2-1));switch(Math.floor(d)){case 0:d={r:c,g:x,b:0};break;case 1:d={r:x,g:c,b:0};break;case 2:d={r:0,g:c,b:x};break;case 3:d={r:0,g:x,b:c};
break;case 4:d={r:x,g:0,b:c};break;case 5:case 6:d={r:c,g:0,b:x};break;default:d={r:0,g:0,b:0}}d.r=Math.round(d.r+a-c);d.g=Math.round(d.g+a-c);d.b=Math.round(d.b+a-c);return d}return c}Object.defineProperty(b,"__esModule",{value:!0});b.darken=b.toXYZ=b.toLCH=b.toLAB=b.toHSV=b.toRGB=void 0;var c=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],m=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];b.toRGB=f;b.toHSV=function(c){if("h"in c&&"s"in c&&"v"in c)return c;var a=
f(c);c=a.r;var d=a.g,e=a.b,a=Math.max(c,d,e),p=a-Math.min(c,d,e);c=0===p?0:a===c?(d-e)/p%6:a===d?(e-c)/p+2:(c-d)/p+4;0>c&&(c+=6);return{h:60*c,s:100*(0===p?0:p/a),v:100/255*a}};b.toLAB=function(c){return"l"in c&&"a"in c&&"b"in c?c:r(q(f(c)))};b.toLCH=function(c){if(!("l"in c&&"c"in c&&"h"in c)){var a=r(q(f(c)));c=a.l;var d=a.a,e=a.b,a=Math.sqrt(d*d+e*e),d=Math.atan2(e,d),d=0<d?d:d+2*Math.PI;c={l:c,c:a,h:d}}return c};b.toXYZ=function(c){return"x"in c&&"y"in c&&"z"in c?c:q(f(c))};b.darken=function(c,
a){c=r(q(c));c.l*=1-a;return e(l(c))}})},"esri/renderers/RasterShadedReliefRenderer":function(){define("require exports tslib ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators ../tasks/support/colorRamps".split(" "),function(D,b,g,q,e,r,l){return function(f){function c(c){c=f.call(this,c)||this;c.altitude=45;c.azimuth=315;c.colorRamp=null;c.hillshadeType="multi-directional";c.pixelSizePower=.664;c.pixelSizeFactor=.024;c.scalingType="none";c.type="raster-shaded-relief";c.zFactor=
1;return c}g.__extends(c,f);b=c;c.prototype.readColorRamp=function(c){return l.fromJSON(c)};c.prototype.clone=function(){return new b({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,scalingType:this.scalingType,pixelSizeFactor:this.pixelSizeFactor,pixelSizePower:this.pixelSizePower,colorRamp:e.clone(this.colorRamp)})};var b;g.__decorate([r.property({type:Number,json:{write:!0}})],c.prototype,"altitude",void 0);g.__decorate([r.property({type:Number,
json:{write:!0}})],c.prototype,"azimuth",void 0);g.__decorate([r.property({types:l.types,json:{write:!0}})],c.prototype,"colorRamp",void 0);g.__decorate([r.reader("colorRamp")],c.prototype,"readColorRamp",null);g.__decorate([r.property({type:["traditional","multi-directional"],json:{write:!0}})],c.prototype,"hillshadeType",void 0);g.__decorate([r.property({type:Number,json:{write:!0}})],c.prototype,"pixelSizePower",void 0);g.__decorate([r.property({type:Number,json:{write:!0}})],c.prototype,"pixelSizeFactor",
void 0);g.__decorate([r.property({type:["none","adjusted"],json:{write:!0}})],c.prototype,"scalingType",void 0);g.__decorate([r.enumeration({rasterShadedRelief:"raster-shaded-relief"})],c.prototype,"type",void 0);g.__decorate([r.property({type:Number,json:{write:!0}})],c.prototype,"zFactor",void 0);return c=b=g.__decorate([r.subclass("esri.renderers.RasterShadedReliefRenderer")],c)}(q.JSONSupport)})},"esri/renderers/RasterStretchRenderer":function(){define("require exports tslib ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ./support/stretchRendererUtils ../tasks/support/colorRamps".split(" "),
function(D,b,g,q,e,r,l,f,c){return function(b){function m(a){a=b.call(this,a)||this;a.colorRamp=null;a.computeGamma=!1;a.dynamicRangeAdjustment=!1;a.gamma=[];a.maxPercent=null;a.minPercent=null;a.numberOfStandardDeviations=null;a.outputMax=null;a.outputMin=null;a.sigmoidStrengthLevel=null;a.statistics=[];a.histograms=null;a.useGamma=!1;a.stretchType="none";a.type="raster-stretch";return a}g.__extends(m,b);a=m;m.prototype.readColorRamp=function(a){if(a)return c.fromJSON(a)};m.prototype.writeStatistics=
function(a,c,p){null!==a&&void 0!==a&&a.length&&(Array.isArray(a[0])||(a=a.map(function(a){return[a.min,a.max,a.avg,a.stddev]})),c[p]=a)};m.prototype.readStretchType=function(a,c){a=c.stretchType;"number"===typeof a&&(a=f.stretchTypeFunctionEnum[a]);return f.stretchTypeJSONDict.read(a)};m.prototype.clone=function(){return new a({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:e.clone(this.statistics),gamma:e.clone(this.gamma),
sigmoidStrengthLevel:this.sigmoidStrengthLevel,numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:e.clone(this.colorRamp),histograms:e.clone(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})};var a;g.__decorate([r.property({types:c.types,json:{write:!0}})],m.prototype,"colorRamp",void 0);g.__decorate([r.reader("colorRamp")],m.prototype,"readColorRamp",null);g.__decorate([r.property({type:Boolean,json:{write:!0}})],
m.prototype,"computeGamma",void 0);g.__decorate([r.property({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],m.prototype,"dynamicRangeAdjustment",void 0);g.__decorate([r.property({type:[Number],json:{write:!0}})],m.prototype,"gamma",void 0);g.__decorate([r.property({type:Number,json:{write:!0}})],m.prototype,"maxPercent",void 0);g.__decorate([r.property({type:Number,json:{write:!0}})],m.prototype,"minPercent",void 0);g.__decorate([r.property({type:l.Integer,json:{write:!0}})],m.prototype,
"numberOfStandardDeviations",void 0);g.__decorate([r.property({type:Number,json:{read:{source:"max"},write:{target:"max"}}})],m.prototype,"outputMax",void 0);g.__decorate([r.property({type:Number,json:{read:{source:"min"},write:{target:"min"}}})],m.prototype,"outputMin",void 0);g.__decorate([r.property({type:Number,json:{write:!0}})],m.prototype,"sigmoidStrengthLevel",void 0);g.__decorate([r.property({json:{type:[[Number]],write:!0}})],m.prototype,"statistics",void 0);g.__decorate([r.property()],
m.prototype,"histograms",void 0);g.__decorate([r.writer("statistics")],m.prototype,"writeStatistics",null);g.__decorate([r.property({type:Boolean,json:{write:!0}})],m.prototype,"useGamma",void 0);g.__decorate([r.property({type:f.stretchTypeJSONDict.apiValues,json:{type:f.stretchTypeJSONDict.jsonValues,write:f.stretchTypeJSONDict.write}})],m.prototype,"stretchType",void 0);g.__decorate([r.reader("stretchType",["stretchType"])],m.prototype,"readStretchType",null);g.__decorate([r.enumeration({rasterStretch:"raster-stretch"})],
m.prototype,"type",void 0);return m=a=g.__decorate([r.subclass("esri.renderers.RasterStretchRenderer")],m)}(q.JSONSupport)})},"esri/renderers/support/stretchRendererUtils":function(){define(["require","exports","../../core/jsonMap"],function(D,b,g){Object.defineProperty(b,"__esModule",{value:!0});b.stretchTypeFunctionEnum=b.stretchTypeJSONDict=void 0;b.stretchTypeJSONDict=new g.default({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",
percentClip:"percent-clip",sigmoid:"sigmoid"});b.stretchTypeFunctionEnum={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"}})},"esri/renderers/VectorFieldRenderer":function(){define("require exports tslib ../Color ../geometry ../Graphic ../symbols ../core/jsonMap ../core/JSONSupport ../core/lang ../core/SetUtils ../core/accessorSupport/decorators ../geometry/support/normalizeUtils ../layers/support/rasterFunctions/vectorFieldUtils ./ClassBreaksRenderer ./mixins/VisualVariablesMixin ./support/ClassBreakInfo ./visualVariables/RotationVariable ./visualVariables/SizeVariable ./visualVariables/support/visualVariableUtils ../symbols/SimpleLineSymbol ../symbols/SimpleMarkerSymbol ../symbols/support/utils".split(" "),
function(D,b,g,q,e,r,l,f,c,m,A,a,d,x,p,u,z,h,v,t,k,B,y){var w=A.SetFromValues(["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"]),n=new f.default({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"}),C=new f.default({beaufort_ft:"beaufort-ft",beaufort_km:"beaufort-km",beaufort_kn:"beaufort-kn",beaufort_m:"beaufort-m",beaufort_mi:"beaufort-mi",
classified_arrow:"classified-arrow",ocean_current_kn:"ocean-current-kn",ocean_current_m:"ocean-current-m",simple_scalar:"simple-scalar",single_arrow:"single-arrow",wind_speed:"wind-speed"}),F=new f.default({flow_from:"flow-from",flow_to:"flow-to"});return function(c){function u(a){a=c.call(this,a)||this;a.attributeField="Magnitude";a.flowRepresentation="flow-from";a.rotationType="arithmetic";a.style="single-arrow";a.symbolTileSize=50;a.type="vector-field";return a}g.__extends(u,c);b=u;u.prototype.readInputUnit=
function(a,d){return w.has(a)?n.fromJSON(a):null};u.prototype.readOutputUnit=function(a,d){return w.has(a)?n.fromJSON(a):null};Object.defineProperty(u.prototype,"styleRenderer",{get:function(){var a=this.attributeField,d=this._createStyleRenderer(this.style);d.field=a;return d},enumerable:!1,configurable:!0});Object.defineProperty(u.prototype,"sizeVariables",{get:function(){var a=[];if(this.visualVariables)for(var d=0,n=this.visualVariables;d<n.length;d++){var c=n[d];"size"===c.type&&a.push(c)}0===
a.length&&(c=new v({minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize}),this.visualVariables?this.visualVariables.push(c):this._set("visualVariables",[c]),a.push(c));return a},enumerable:!1,configurable:!0});Object.defineProperty(u.prototype,"rotationVariables",{get:function(){var a=[];if(this.visualVariables)for(var d=0,n=this.visualVariables;d<n.length;d++){var c=n[d];"rotation"===c.type&&a.push(c)}0===a.length&&(c=new h({field:"Direction",rotationType:this.rotationType}),this.visualVariables?
this.visualVariables.push(c):this._set("visualVariables",[c]),a.push(c));return a},enumerable:!1,configurable:!0});u.prototype.clone=function(){return new b({attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,style:this.style,visualVariables:m.clone(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})};u.prototype.getGraphicsFromPixelData=function(a,n){void 0===n&&(n=!1);return g.__awaiter(this,void 0,void 0,function(){var c,
u,h,k,w,p,v,t,y,B,b,f,z,m;return g.__generator(this,function(C){switch(C.label){case 0:c=[],u=x.getUnitConversionFactor(this.inputUnit,this.outputUnit),h=n?x.convertVectorFieldData(a.pixelBlock,"vector-uv",this.rotationType,u):x.convertVectorFieldUnit(a.pixelBlock,"vector-magdir",u),k=a.extent,w=h.mask&&0<h.mask.length,p=0,t=(k.xmax-k.xmin)/h.width,y=(k.ymax-k.ymin)/h.height,B=0,C.label=1;case 1:if(!(B<h.height))return[3,6];b=0;C.label=2;case 2:if(!(b<h.width))return[3,5];v=[k.xmin+b*t+t/2,k.ymax-
B*y-y/2];if(w&&!h.mask[p]||!v||2!==v.length)return[3,4];f={Magnitude:h.pixels[0][p],Direction:h.pixels[1][p]};z=new e.Point({x:v[0],y:v[1],spatialReference:k.spatialReference});return[4,d.normalizeCentralMeridian(z)];case 3:z=C.sent()[0],m=new r({geometry:{type:"point",x:z.x,y:z.y,spatialReference:k.spatialReference},attributes:f}),m.symbol=this._getVisualVariablesAppliedSymbol(m),c.push(m),C.label=4;case 4:return b++,p++,[3,2];case 5:return B++,[3,1];case 6:return[2,c]}})})};u.prototype.getSymbol=
function(a,d){};u.prototype.getSymbolAsync=function(a,d){return g.__awaiter(this,void 0,void 0,function(){return g.__generator(this,function(a){return[2]})})};u.prototype.getSymbols=function(){return[]};u.prototype.getClassBreakInfos=function(){var a;return null===(a=this.styleRenderer)||void 0===a?void 0:a.classBreakInfos};u.prototype.getDefaultSymbol=function(){var a;return null===(a=this.styleRenderer)||void 0===a?void 0:a.defaultSymbol};u.prototype._getDefaultSymbol=function(a){return new B({path:"M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z",
outline:new k({width:0}),size:20,color:a||new q([0,92,230])})};u.prototype._getVisualVariablesAppliedSymbol=function(a){if(a){var d=this.styleRenderer&&this.styleRenderer.getSymbol(a),d=d.clone(),n=this.sizeVariables,c=this.rotationVariables;n&&n.length&&this.sizeVariables.forEach(function(n){return y.applySizesToSymbol(d,t.getAllSizes([n],a))});c&&c.length&&(n=a.attributes.Direction,a.attributes.Direction="flow-from"===this.flowRepresentation?n:n+180,this.rotationVariables.forEach(function(n){return y.applyRotationToSymbol(d,
t.getRotationAngle(n,a),n.axis)}));return d}};u.prototype._createStyleRenderer=function(a){var d={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(a){case "single-arrow":d=this._createSingleArrowRenderer();break;case "beaufort-kn":d=this._createBeaufortKnotsRenderer();break;case "beaufort-m":d=this._createBeaufortMeterRenderer();break;case "beaufort-ft":d=this._createBeaufortFeetRenderer();break;case "beaufort-mi":d=this._createBeaufortMilesRenderer();break;case "beaufort-km":d=this._createBeaufortKilometersRenderer();
break;case "ocean-current-m":d=this._createCurrentMeterRenderer();break;case "ocean-current-kn":d=this._createCurrentKnotsRenderer();break;case "simple-scalar":d=this._createSimpleScalarRenderer();break;case "wind-speed":d=this._createWindBarbsRenderer();break;case "classified-arrow":d=this._createClassifiedArrowRenderer()}return new p(d)};u.prototype._createSingleArrowRenderer=function(){return{defaultSymbol:this._getDefaultSymbol()}};u.prototype._createBeaufortKnotsRenderer=function(){var a=this._getDefaultSymbol(new q([214,
47,39])),d=this._getClassBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]]);return{defaultSymbol:a,classBreakInfos:d}};u.prototype._createBeaufortMeterRenderer=function(){var a=this._getDefaultSymbol(new q([214,47,39])),d=this._getClassBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,
180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:a,classBreakInfos:d}};u.prototype._createBeaufortFeetRenderer=function(){var a=this._getDefaultSymbol(new q([214,47,39])),d=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],d=d.map(function(a){return 3.28084*a}),d=this._getClassBreaks(d,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,
185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:a,classBreakInfos:d}};u.prototype._createBeaufortMilesRenderer=function(){var a=this._getDefaultSymbol(new q([214,47,39])),d=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],d=d.map(function(a){return 2.23694*a}),d=this._getClassBreaks(d,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:a,
classBreakInfos:d}};u.prototype._createBeaufortKilometersRenderer=function(){var a=this._getDefaultSymbol(new q([214,47,39])),d=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],d=d.map(function(a){return 3.6*a}),d=this._getClassBreaks(d,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:a,classBreakInfos:d}};u.prototype._createCurrentMeterRenderer=function(){var a=
this._getDefaultSymbol(new q([177,177,177])),d=this._getClassBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]]);return{defaultSymbol:a,classBreakInfos:d}};u.prototype._createCurrentKnotsRenderer=function(){var a=this._getDefaultSymbol(new q([177,177,177])),d=this._getClassBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]]);return{defaultSymbol:a,classBreakInfos:d}};u.prototype._createClassifiedArrowRenderer=
function(){var a,d=this._getDefaultSymbol(new q([56,168,0])),n=[0,1E-6,3.5,7,10.5,14];if(null===(a=this.sizeVariables)||void 0===a?0:a.length){var c=this.sizeVariables[0].minDataValue;a=this.sizeVariables[0].maxDataValue;if(c&&a)var u=(a-c)/5,n=Array.from(Array(6).keys()).map(function(a){return c+u*a})}n=this._getClassBreaks(n,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]]);return{defaultSymbol:d,classBreakInfos:n}};u.prototype._createSimpleScalarRenderer=function(){return{defaultSymbol:l.PictureMarkerSymbol.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII\x3d",
height:20,width:20,type:"esriPMS",angle:0})}};u.prototype._createWindBarbsRenderer=function(){var a=Array.from(Array(31).keys()).map(function(a){return 5*a}),d=[{range:"0-5",path:"M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"5-10",path:"M25 0 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjE1IDIwIDIwIDIwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxwYXRoIGQ9Ik0yNSAwIEwyNSA0MCBNMjUgMzUgTDE3LjUgMzcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"10-15",path:"M25 0 L25 40 L10 45 L25 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"15-20",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"20-25",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"25-30",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"30-35",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"35-40",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"40-45",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"45-50",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"50-55",path:"M25 0 L25 40 L10 40 L25 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"55-60",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"60-65",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"65-70",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"70-75",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"75-80",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"80-85",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"85-90",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"90-95",
path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"95-100",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"100-105",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"105-110",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"110-115",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"115-120",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"120-125",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"125-130",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"130-135",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"135-140",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"140-145",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"145-150",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"}],n=l.PictureMarkerSymbol.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC",
height:20,width:20,type:"esriPMS",angle:0}),c=a.map(function(c,u){var h;u!==a.length-1&&(0===u?h={minValue:c,maxValue:a[u+1],symbol:n}:(h=l.PictureMarkerSymbol.fromJSON({type:"esriPMS",imageData:d[u].imageData,contentType:"image/svg+xml",height:32,width:32,angle:0}),h={minValue:c,maxValue:a[u+1],symbol:h}));return new z(h)});return{defaultSymbol:n,classBreakInfos:c}};u.prototype._getClassBreaks=function(a,d){var n=this;return d.map(function(d,c){return new z({minValue:a[c],maxValue:a[c+1],symbol:n._getDefaultSymbol(new q(d))})})};
var b;g.__decorate([a.property({type:String,json:{write:!0}})],u.prototype,"attributeField",void 0);g.__decorate([a.property({type:F.apiValues,json:{type:F.jsonValues,read:{reader:F.read},write:{writer:F.write}}})],u.prototype,"flowRepresentation",void 0);g.__decorate([a.property({type:["geographic","arithmetic"],json:{write:!0}})],u.prototype,"rotationType",void 0);g.__decorate([a.property({type:C.apiValues,json:{type:C.jsonValues,read:{reader:C.read},write:{writer:C.write}}})],u.prototype,"style",
void 0);g.__decorate([a.property({json:{write:!0}})],u.prototype,"symbolTileSize",void 0);g.__decorate([a.property({type:n.apiValues,json:{type:n.jsonValues,write:{writer:n.write}}})],u.prototype,"inputUnit",void 0);g.__decorate([a.reader("inputUnit")],u.prototype,"readInputUnit",null);g.__decorate([a.property({type:n.apiValues,json:{type:n.jsonValues,read:{reader:n.read},write:{writer:n.write}}})],u.prototype,"outputUnit",void 0);g.__decorate([a.reader("outputUnit")],u.prototype,"readOutputUnit",
null);g.__decorate([a.enumeration({vectorField:"vector-field"})],u.prototype,"type",void 0);g.__decorate([a.property({type:p,dependsOn:["style","attributeField"]})],u.prototype,"styleRenderer",null);g.__decorate([a.property({type:v,dependsOn:["visualVariables","symbolTileSize"]})],u.prototype,"sizeVariables",null);g.__decorate([a.property({type:h,dependsOn:["visualVariables","rotationType"]})],u.prototype,"rotationVariables",null);return u=b=g.__decorate([a.subclass("esri.renderers.VectorFieldRenderer")],
u)}(u.VisualVariablesMixin(c.JSONSupport))})},"esri/layers/support/rasterFunctions/vectorFieldUtils":function(){define(["require","exports","../PixelBlock"],function(D,b,g){Object.defineProperty(b,"__esModule",{value:!0});b.convertVectorFieldUnit=b.convertVectorFieldData=b.getUnitConversionFactor=b.isValidPixelBlock=void 0;var q=180/Math.PI;b.isValidPixelBlock=function(e){return e&&"esri.layers.support.PixelBlock"===e.declaredClass&&e.pixels&&0<e.pixels.length};var e=new Map;e.set("meter-per-second",
1);e.set("kilometer-per-hour",.277778);e.set("knots",.514444);e.set("feet-per-second",.3048);e.set("mile-per-hour",.44704);b.getUnitConversionFactor=function(b,l){return e.get(l)/e.get(b)||1};b.convertVectorFieldData=function(e,l,f,c){var m;void 0===f&&(f="geographic");void 0===c&&(c=1);if(!b.isValidPixelBlock(e))return e;for(var A=e.pixels,a=e.width,d=e.height,x=a*d,p=A[0],A=A[1],u=g.createEmptyBand(e.pixelType,x),x=g.createEmptyBand(e.pixelType,x),z=0,h=0;h<d;h++)for(var v=0;v<a;v++){if("vector-uv"===
l){var t=[p[z],A[z]];m=f;void 0===m&&(m="geographic");var k=t[0],B=t[1],t=Math.sqrt(k*k+B*B),k=Math.atan2(B,k)*q,k=(360+k)%360;"geographic"===m&&(k=(450-k)%360);m=[t,k];u[z]=m[0];x[z]=m[1];u[z]*=c}else k=[p[z],A[z]],t=f,void 0===t&&(t="geographic"),m=k[1],"geographic"===t&&(m=(450-m)%360),m%=360,k=k[0],m=[k*Math.cos(m/q),k*Math.sin(m/q)],u[z]=m[0],x[z]=m[1],u[z]*=c,x[z]*=c;z++}e=new g({pixelType:e.pixelType,width:e.width,height:e.height,mask:e.mask,validPixelCount:e.validPixelCount,maskIsAlpha:e.maskIsAlpha,
pixels:[u,x]});e.updateStatistics();return e};b.convertVectorFieldUnit=function(e,l,f){void 0===f&&(f=1);if(1===f||!b.isValidPixelBlock(e))return e;e=e.clone();for(var c=e.pixels,m=e.width,A=e.height,a=c[0],c=c[1],d=0,x=0;x<A;x++)for(var p=0;p<m;p++)"vector-uv"===l?(a[d]*=f,c[d]*=f):a[d]*=f,d++;e.updateStatistics();return e}})},"esri/layers/support/PixelBlock":function(){define("require exports tslib ../../core/compilerUtils ../../core/Error ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators".split(" "),
function(D,b,g,q,e,r,l,f,c,m){var A=f.getLogger("esri.layers.support.PixelBlock");return function(a){function d(d){d=a.call(this,d)||this;d.width=null;d.height=null;d.pixelType="f32";d.validPixelCount=null;d.mask=null;d.maskIsAlpha=!1;d.pixels=null;d.statistics=null;return d}g.__extends(d,a);x=d;d.createEmptyBand=function(a,d){return new (x.getPixelArrayConstructor(a))(d)};d.getPixelArrayConstructor=function(a){var d;switch(a){case "u1":case "u2":case "u4":case "u8":d=Uint8Array;break;case "u16":d=
Uint16Array;break;case "u32":d=Uint32Array;break;case "s8":d=Int8Array;break;case "s16":d=Int16Array;break;case "s32":d=Int32Array;break;case "u32":d=Uint32Array;break;case "f32":d=Float32Array;break;case "f64":d=Float64Array;break;case "c64":case "c128":case "unknown":d=Float32Array;break;default:q.neverReached(a)}return d};d.prototype.castPixelType=function(a){if(!a)return"f32";a=a.toLowerCase();-1<["u1","u2","u4"].indexOf(a)?a="u8":-1==="unknown u8 s8 u16 s16 u32 s32 f32 f64".split(" ").indexOf(a)&&
(a="f32");return a};d.prototype.getPlaneCount=function(){return this.pixels&&this.pixels.length};d.prototype.addData=function(a){if(!a.pixels||a.pixels.length!==this.width*this.height)throw new e("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]);this.statistics||(this.statistics=[]);this.pixels.push(a.pixels);this.statistics.push(a.statistics||{minValue:null,maxValue:null})};d.prototype.getAsRGBA=
function(){var a=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case "s8":case "s16":case "u16":case "s32":case "u32":case "f32":case "f64":this._fillFromNon8Bit(a);break;default:this._fillFrom8Bit(a)}return new Uint8ClampedArray(a)};d.prototype.getAsRGBAFloat=function(){var a=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(a);return a};d.prototype.updateStatistics=function(){var a=this;this.statistics=this.pixels.map(function(d){return a._calculateBandStatistics(d,
a.mask)});var d=this.mask,c=0;if(d)for(var h=0;h<d.length;h++)d[h]&&c++;else c=this.width*this.height;this.validPixelCount=c};d.prototype.clamp=function(a){if(a&&"f64"!==a&&"f32"!==a){var d;switch(a){case "u8":d=[0,255];break;case "u16":d=[0,65535];break;case "u32":d=[0,4294967295];break;case "s8":d=[-128,127];break;case "s16":d=[-32768,32767];break;case "s32":d=[-2147483648,2147483647];break;default:d=[-3.4*1E39,3.4*1E39]}var c=d[0];d=d[1];for(var h=this.pixels,v=this.width*this.height,t=h.length,
k,e,y,w=[],n=0;n<t;n++){y=x.createEmptyBand(a,v);k=h[n];for(var p=0;p<v;p++)e=k[p],y[p]=e>d?d:e<c?c:e;w.push(y)}this.pixels=w;this.pixelType=a}};d.prototype.extractBands=function(a){var d=this;if(c.isNone(a)||0===a.length||null==this.pixels||0===this.pixels.length)return this;var e=this.pixels.length,h=a.some(function(a){return a>=d.pixels.length}),e=e===a.length&&!a.some(function(a,d){return a!==d});return h||e?this:new x({pixelType:this.pixelType,width:this.width,height:this.height,mask:this.mask,
validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:a.map(function(a){return d.pixels[a]}),statistics:this.statistics&&a.map(function(a){return d.statistics[a]})})};d.prototype.clone=function(){var a=new x({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});this.mask&&(a.mask=this.mask instanceof Uint8Array?new Uint8Array(this.mask):this.mask.slice(0));var d,c=x.getPixelArrayConstructor(this.pixelType);
if(this.pixels&&0<this.pixels.length){a.pixels=[];var h=this.pixels[0].slice;for(d=0;d<this.pixels.length;d++)a.pixels[d]=h?this.pixels[d].slice(0,this.pixels[d].length):new c(this.pixels[d])}if(this.statistics)for(a.statistics=[],d=0;d<this.statistics.length;d++)a.statistics[d]=l.clone(this.statistics[d]);return a};d.prototype._fillFrom8Bit=function(a){var d=this.mask,c=this.maskIsAlpha,h=this.pixels;if(a&&h&&h.length){var v,t,k;v=t=k=h[0];3<=h.length?(t=h[1],k=h[2]):2===h.length&&(t=h[1]);a=new Uint32Array(a);
h=this.width*this.height;if(v.length!==h)A.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");else if(d&&d.length===h)if(c)for(c=0;c<h;c++)d[c]&&(a[c]=d[c]<<24|k[c]<<16|t[c]<<8|v[c]);else for(c=0;c<h;c++)d[c]&&(a[c]=-16777216|k[c]<<16|t[c]<<8|v[c]);else for(c=0;c<h;c++)a[c]=-16777216|k[c]<<16|t[c]<<8|v[c]}else A.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};d.prototype._fillFromNon8Bit=function(a){var d=this.pixels,c=this.mask,h=this.statistics;
if(a&&d&&d.length){var v=this.pixelType,t=1,k=0,t=1;h&&0<h.length?(k=h.map(function(a){return a.minValue}).reduce(function(a,d){return Math.min(a,d)}),t=h.map(function(a){return a.maxValue-a.minValue}).reduce(function(a,d){return Math.max(a,d)}),t=255/t):(t=255,"s8"===v?(k=-128,t=127):"u16"===v?t=65535:"s16"===v?(k=-32768,t=32767):"u32"===v?t=4294967295:"s32"===v?(k=-2147483648,t=2147483647):"f32"===v?(k=-3.4*1E39,t=3.4*1E39):"f64"===v&&(k=-Number.MAX_VALUE,t=Number.MAX_VALUE),t=255/(t-k));a=new Uint32Array(a);
var v=this.width*this.height,e,y,h=e=y=d[0];if(h.length!==v)return A.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(2<=d.length)if(e=d[1],3<=d.length&&(y=d[2]),c&&c.length===v)for(d=0;d<v;d++)c[d]&&(a[d]=-16777216|(y[d]-k)*t<<16|(e[d]-k)*t<<8|(h[d]-k)*t);else for(d=0;d<v;d++)a[d]=-16777216|(y[d]-k)*t<<16|(e[d]-k)*t<<8|(h[d]-k)*t;else if(c&&c.length===v)for(d=0;d<v;d++)e=(h[d]-k)*t,c[d]&&(a[d]=-16777216|e<<16|e<<8|e);else for(d=0;d<v;d++)e=(h[d]-k)*t,a[d]=-16777216|
e<<16|e<<8|e}else A.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};d.prototype._fillFrom32Bit=function(a){var d=this.pixels,c=this.mask;if(!a||!d||!d.length)return A.error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");var h,v,t;h=v=t=d[0];3<=d.length?(v=d[1],t=d[2]):2===d.length&&(v=d[1]);var k=this.width*this.height;if(h.length!==k)return A.error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");var e=
0;if(c&&c.length===k)for(d=0;d<k;d++)a[e++]=h[d],a[e++]=v[d],a[e++]=t[d],a[e++]=c[d]&1;else for(d=0;d<k;d++)a[e++]=h[d],a[e++]=v[d],a[e++]=t[d],a[e++]=1};d.prototype._calculateBandStatistics=function(a,d){var c=Infinity,h=-Infinity,v=a.length,t,k=0;if(d)for(t=0;t<v;t++)d[t]&&(k=a[t],c=k<c?k:c,h=k>h?k:h);else for(t=0;t<v;t++)k=a[t],c=k<c?k:c,h=k>h?k:h;return{minValue:c,maxValue:h}};var x;g.__decorate([m.property({json:{write:!0}})],d.prototype,"width",void 0);g.__decorate([m.property({json:{write:!0}})],
d.prototype,"height",void 0);g.__decorate([m.property({json:{write:!0}})],d.prototype,"pixelType",void 0);g.__decorate([m.cast("pixelType")],d.prototype,"castPixelType",null);g.__decorate([m.property({json:{write:!0}})],d.prototype,"validPixelCount",void 0);g.__decorate([m.property({json:{write:!0}})],d.prototype,"mask",void 0);g.__decorate([m.property({json:{write:!0}})],d.prototype,"maskIsAlpha",void 0);g.__decorate([m.property({json:{write:!0}})],d.prototype,"pixels",void 0);g.__decorate([m.property({json:{write:!0}})],
d.prototype,"statistics",void 0);return d=x=g.__decorate([m.subclass("esri.layers.support.PixelBlock")],d)}(r.JSONSupport)})},"esri/symbols/support/utils":function(){define("require exports tslib ../../Color ../../symbols ../../core/asyncUtils ../../core/compilerUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../core/libs/gl-matrix-2/vec3f64 ./gfxUtils ./Symbol3DMaterial @dojo/framework/shim/Promise".split(" "),function(D,b,g,q,e,r,l,f,c,m,A,a,d){function x(a,d){if(null==d)return a;
a=a.toRgba();a[3]*=d;return new q(a)}function p(a,h,k){if(a=a.symbolLayers){var n=function(a){a=c.isSome(a)?a:null;h=h||a||null!=k&&w;return x(h,k)};a.forEach(function(a){if("object"!==a.type||null==a.resource.href||h)if("water"===a.type)a.color=n(a.color);else{var w=c.isSome(a.material)?a.material.color:null,w=n(w);c.isNone(a.material)?a.material=new d.default({color:w}):a.material.color=w;null!=k&&"outline"in a&&c.isSome(a.outline)&&c.isSome(a.outline.color)&&(a.outline.color=x(a.outline.color,
k))}})}}function u(a,d){return g.__awaiter(this,void 0,void 0,function(){var c,n=this;return g.__generator(this,function(h){switch(h.label){case 0:return(c=a.symbolLayers)?[4,r.forEach(c,function(a){return g.__awaiter(n,void 0,void 0,function(){return g.__generator(this,function(c){return[2,z(a,d)]})})})]:[2];case 1:return h.sent(),[2]}})})}function z(a,d){return g.__awaiter(this,void 0,void 0,function(){var n;return g.__generator(this,function(k){switch(k.label){case 0:n=a.type;switch(n){case "extrude":return[3,
1];case "icon":return[3,2];case "line":return[3,2];case "text":return[3,2];case "path":return[3,3];case "object":return[3,4];case "fill":return[3,6];case "water":return[3,6]}return[3,7];case 1:return a.size="number"===typeof d[2]?d[2]:0,[3,8];case 2:return k=h(d),c.isSome(k)&&(a.size=k),[3,8];case 3:return k=t(d,A.vec3f64.ONES,[a.width,void 0,a.height]),a.width=B(d[0],a.width,1,k),a.height=B(d[2],a.height,1,k),[3,8];case 4:return[4,v(a,d)];case 5:return k.sent(),[3,8];case 6:return[3,8];case 7:l.neverReached(a),
k.label=8;case 8:return[2]}})})}function h(a){for(var d=0;d<a.length;d++){var c=a[d];if("number"===typeof c)return c}return null}function v(a,d){return g.__awaiter(this,void 0,void 0,function(){var c,n,h,w;return g.__generator(this,function(v){switch(v.label){case 0:return[4,k(a)];case 1:return c=v.sent(),n=c.resourceSize,h=c.symbolSize,w=t(d,n,h),a.width=B(d[0],h[0],n[0],w),a.depth=B(d[1],h[1],n[1],w),a.height=B(d[2],h[2],n[2],w),[2]}})})}function t(a,d,c){for(var n=0;3>n;n++){var h=a[n];switch(h){case "symbol-value":return null!=
c[n]?c[n]/d[n]:1;case "proportional":break;default:if(h&&d[n])return h/d[n]}}return 1}function k(a){return g.__awaiter(this,void 0,void 0,function(){var d,c,n,h,k,w,v,t;return g.__generator(this,function(e){switch(e.label){case 0:return[4,new Promise(function(a,d){D(["./symbolLayerUtils"],a,d)})];case 1:return d=e.sent(),[4,d.computeObjectLayerResourceSize(a,10)];case 2:c=e.sent();n=a.width;h=a.height;k=a.depth;w=[n,k,h];v=1;for(t=0;3>t;t++)if(null!=w[t]){v=w[t]/c[t];break}for(t=0;3>t;t++)null==w[t]&&
(w[t]=c[t]*v);return[2,{resourceSize:c,symbolSize:w}]}})})}function B(a,d,c,h){switch(a){case "proportional":return c*h;case "symbol-value":return null!=d?d:c;default:return a}}Object.defineProperty(b,"__esModule",{value:!0});b.applyRotationToSymbol=b.applySizesToSymbol=b.applyColorToSymbol=b.applyOpacityToColor=b.getIconHref=b.isVolumetricSymbol=b.getSymbolOutlineSize=void 0;var y=/\/resource\/(.*?)\.svg$/,w=new q("white");b.getSymbolOutlineSize=function(d){if(!d)return 0;if(e.isSymbol3D(d)){var n=
d.symbolLayers&&d.symbolLayers.length;n?(d=d.symbolLayers.getItemAt(n-1),d="outline"in d?c.get(d,"outline","size"):void 0):d=void 0;return c.isSome(d)?d:0}return(d=a.getStroke(d))&&m.px2pt(d.width)||0};b.isVolumetricSymbol=function(a){if(!a||!a.symbolLayers)return!1;switch(a.type){case "point-3d":return a.symbolLayers.some(function(a){return"object"===a.type});case "line-3d":return a.symbolLayers.some(function(a){return"path"===a.type});case "polygon-3d":return a.symbolLayers.some(function(a){return"object"===
a.type||"extrude"===a.type});default:return!1}};b.getIconHref=function(a,d){d=d.resource.href;return!f("esri-canvas-svg-support")&&a.styleOrigin&&y.test(d)?d.replace(y,"/resource/png/$1.png"):d};b.applyOpacityToColor=x;b.applyColorToSymbol=function(a,d,c){if(a&&(d||null!=c))if(d&&(d=new q(d)),e.isSymbol3D(a))p(a,d,c);else if(e.isSymbol2D(a)){if(d=d||a.color)a.color=x(d,c);null!=c&&"outline"in a&&a.outline&&a.outline.color&&(a.outline.color=x(a.outline.color,c))}};b.applySizesToSymbol=function(a,d){return g.__awaiter(this,
void 0,void 0,function(){return g.__generator(this,function(n){if(!a||!d)return[2];if(e.isSymbol3D(a))return[2,u(a,d)];if(e.isSymbol2D(a)&&(n=h(d),!c.isNone(n)))switch(a.type){case "simple-marker":a.size=n;break;case "picture-marker":var k=a.width/a.height;1<k?(a.width=n,a.height=n*k):(a.width=n*k,a.height=n);break;case "simple-line":a.width=n;break;case "text":a.font.size=n;break;case "simple-fill":case "picture-fill":break;case "cim":break;default:l.neverReached(a)}return[2]})})};b.applyRotationToSymbol=
function(a,d,c){a&&null!=d&&(e.isSymbol3D(a)?(a=a.symbolLayers)&&a.forEach(function(a){if(a&&"object"===a.type)switch(c){case "tilt":a.tilt=d;break;case "roll":a.roll=d;break;default:a.heading=d}}):!e.isSymbol2D(a)||"simple-marker"!==a.type&&"picture-marker"!==a.type&&"text"!==a.type||(a.angle=d))}})},"esri/symbols/support/gfxUtils":function(){define("require exports ../../assets ../../Color ../../request ../../core/ItemCache ../../core/promiseUtils ../../core/screenUtils ./cimSymbolUtils".split(" "),
function(D,b,g,q,e,r,l,f,c){function m(a){if(!a)return null;var d;switch(a.type){case "simple-fill":case "picture-fill":case "simple-marker":d=m(a.outline);break;case "simple-line":var c=f.pt2px(a.width);"none"!==a.style&&0!==c&&(d={color:a.color,style:p(a.style),width:c,cap:a.cap,join:"miter"===a.join?f.pt2px(a.miterLimit):a.join});break;default:d=null}return d}Object.defineProperty(b,"__esModule",{value:!0});b.defaultThematicColor=b.getStroke=b.getPatternUrlWithColor=b.getFill=b.getSVGBaselineShift=
b.getSVGBaseline=b.getSVGAlign=void 0;var A=g.getAssetUrl("esri/symbols/patterns/"),a={left:"start",center:"middle",right:"end",justify:"start"},d={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},x=new r(1E3);b.getSVGAlign=function(d){return d=(d=d.horizontalAlignment)&&a[d.toLowerCase()]||"middle"};b.getSVGBaseline=function(a){return(a=a.verticalAlignment)&&d[a.toLowerCase()]||"alphabetic"};b.getSVGBaselineShift=function(a){return"bottom"===a.verticalAlignment?
"super":null};b.getFill=function(a){var d=a.style,h=null;if(a)switch(a.type){case "simple-marker":"cross"!==d&&"x"!==d&&(h=a.color);break;case "simple-fill":"solid"===d?h=a.color:"none"!==d&&(h={type:"pattern",x:0,y:0,src:A+d+".png",width:5,height:5});break;case "picture-fill":h={type:"pattern",src:a.url,width:f.pt2px(a.width)*a.xscale,height:f.pt2px(a.height)*a.yscale,x:f.pt2px(a.xoffset),y:f.pt2px(a.yoffset)};break;case "text":h=a.color;break;case "cim":h=c.getCIMSymbolColor(a)}return h};b.getPatternUrlWithColor=
function(a,d){var c=a+"-"+d;return void 0!==x.get(c)?l.resolve(x.get(c)):e(a,{responseType:"image"}).then(function(a){a=a.data;var h=a.naturalWidth,k=a.naturalHeight,e=document.createElement("canvas");e.width=h;e.height=k;var v=e.getContext("2d");v.fillStyle=d;v.fillRect(0,0,h,k);v.globalCompositeOperation="destination-in";v.drawImage(a,0,0);a=e.toDataURL();x.put(c,a);return a})};b.getStroke=m;var p=function(){var a={};return function(d){if(a[d])return a[d];var c=d.replace(/-/g,"");return a[d]=c}}();
b.defaultThematicColor=new q([128,128,128])})},"esri/core/ItemCache":function(){define(["require","exports","./MemCache"],function(D,b,g){return function(){function b(e,b){this._storage=new g.MemCacheStorage;this._storage.maxSize=e;b&&this._storage.registerRemoveFunc("",b)}b.prototype.put=function(e,b){this._storage.put(e,b,1,1)};b.prototype.pop=function(e){return this._storage.pop(e)};b.prototype.get=function(e){return this._storage.get(e)};b.prototype.clear=function(){this._storage.clearAll()};
b.prototype.destroy=function(){this._storage.clearAll()};return b}()})},"esri/symbols/support/cimSymbolUtils":function(){define(["require","exports","../../Color","../cim/utils"],function(D,b,g,q){function e(a){var d=q.toCIMSymbolJSON(a);if("CIMTextSymbol"===d.type)return d.height;a=0;if(d.symbolLayers)for(var c=0,d=d.symbolLayers;c<d.length;c++){var e=d[c];q.isCIMMarker(e)&&e.size>a?a=e.size:q.isCIMStroke(e)&&e.width>a?a=e.width:q.isCIMFill(e)}return a}function r(a,e,p){if("CIMTextSymbol"===a.type)a.height*=
e;else{if(p&&a.effects){p=0;for(var d=a.effects;p<d.length;p++)c(d[p],e)}if(a.symbolLayers)for(p=0,a=a.symbolLayers;p<a.length;p++)switch(d=a[p],d.type){case "CIMPictureMarker":case "CIMVectorMarker":l(d,e);break;case "CIMPictureStroke":case "CIMSolidStroke":d.width*=e;break;case "CIMPictureFill":d.height*=e;d.offsetX*=e;d.offsetY*=e;break;case "CIMHatchFill":r(d.lineSymbol,e,!0),d.offsetX*=e,d.offsetY*=e,d.separation*=e}}}function l(a,c){a.markerPlacement&&f(a.markerPlacement,c);a.offsetX*=c;a.offsetY*=
c;a.anchorPoint&&"Absolute"===a.anchorPointUnits&&(a.anchorPoint={x:a.anchorPoint.x*c,y:a.anchorPoint.y*c});a.size*=c;if("CIMVectorMarker"===a.type&&a.markerGraphics)for(var d=0,e=a.markerGraphics;d<e.length;d++){var x=e[d];a.scaleSymbolsProportionally||r(x.symbol,c,!0)}}function f(a,c){q.isCIMMarkerStrokePlacement(a)&&(a.offset*=c);switch(a.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":a.customEndingOffset*=c;a.offsetAlongLine*=c;if(a.placementTemplate&&
a.placementTemplate.length){var d=a.placementTemplate.map(function(a){return a*c});a.placementTemplate=d}break;case "CIMMarkerPlacementAlongLineVariableSize":a.maxRandomOffset*=c;a.placementTemplate&&a.placementTemplate.length&&(d=a.placementTemplate.map(function(a){return a*c}),a.placementTemplate=d);break;case "CIMMarkerPlacementOnLine":a.startPointOffset*=c;break;case "CIMMarkerPlacementAtExtremities":a.offsetAlongLine*=c;break;case "CIMMarkerPlacementAtRatioPositions":a.beginPosition*=c;a.endPosition*=
c;break;case "CIMMarkerPlacementPolygonCenter":a.offsetX*=c;a.offsetY*=c;break;case "CIMMarkerPlacementInsidePolygon":a.offsetX*=c,a.offsetY*=c,a.stepX*=c,a.stepY*=c}}function c(a,c){switch(a.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":a.width*=c;break;case "CIMGeometricEffectBuffer":a.size*=c;break;case "CIMGeometricEffectCut":a.beginCut*=c;a.endCut*=c;a.middleCut*=c;break;case "CIMGeometricEffectDashes":a.customEndingOffset*=c;a.offsetAlongLine*=c;if(a.dashTemplate&&a.dashTemplate.length){var d=
a.dashTemplate.map(function(a){return a*c});a.dashTemplate=d}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":a.length*=c;break;case "CIMGeometricEffectMove":a.offsetX*=c;a.offsetY*=c;break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":a.offset*=c;break;case "CIMGeometricEffectRegularPolygon":a.radius*=c;break;case "CIMGeometricEffectTaperedPolygon":a.fromWidth*=c;a.length*=c;a.toWidth*=c;break;case "CIMGeometricEffectWave":a.amplitude*=
c,a.period*=c}}function m(a,c){var d;d="CIMTextSymbol"===a.type?a.symbol:a;a="CIMPolygonSymbol"===a.type;if(d.symbolLayers){var e=0;for(d=d.symbolLayers;e<d.length;e++){var b=d[e];if(!(b.colorLocked||a&&(q.isCIMStroke(b)||q.isCIMMarker(b)&&b.markerPlacement&&q.isCIMMarkerStrokePlacement(b.markerPlacement))))switch(b.type){case "CIMVectorMarker":b.markerGraphics.forEach(function(a){m(a.symbol,c)});break;case "CIMSolidStroke":case "CIMSolidFill":A(c,b.color);break;case "CIMHatchFill":m(b.lineSymbol,
c)}}}}function A(a,c){for(var d=0;d<a.length;d++)if(a[d].join(".")===c.join("."))return;a.push(c)}function a(d,c){var e;e="CIMTextSymbol"===d.type?d.symbol:d;d="CIMPolygonSymbol"===d.type?!0:!1;if(e.symbolLayers){var u=0;for(e=e.symbolLayers;u<e.length;u++){var b=e[u];if(!(b.colorLocked||d&&(q.isCIMStroke(b)||q.isCIMMarker(b)&&b.markerPlacement&&q.isCIMMarkerStrokePlacement(b.markerPlacement)))){var h=c.toArray(0);switch(b.type){case "CIMVectorMarker":b.markerGraphics.forEach(function(d){a(d.symbol,
c)});break;case "CIMSolidStroke":case "CIMSolidFill":b.color=h;break;case "CIMHatchFill":a(b.lineSymbol,c)}}}}}Object.defineProperty(b,"__esModule",{value:!0});b.applyCIMSymbolRotation=b.getCIMSymbolRotation=b.applyCIMSymbolColor=b.getCIMSymbolColor=b.scaleCIMMarker=b.scaleCIMSymbolTo=b.getCIMSymbolSize=void 0;b.getCIMSymbolSize=e;b.scaleCIMSymbolTo=function(a,c){var d=q.toCIMSymbolJSON(a);a=e(a);if(0===a)if("CIMTextSymbol"===d.type)d.height=c;else{if(d.symbolLayers)for(a=0,d=d.symbolLayers;a<d.length;a++){var u=
d[a];switch(u.type){case "CIMPictureMarker":case "CIMVectorMarker":u.size=c;break;case "CIMPictureStroke":case "CIMSolidStroke":u.width=c}}}else r(d,c/a,!1)};b.scaleCIMMarker=l;b.getCIMSymbolColor=function(a){a=q.toCIMSymbolJSON(a);var d=[];m(a,d);return d.length?new g(q.fromCIMColor(d[0])):null};b.applyCIMSymbolColor=function(d,c){c instanceof g||(c=new g(c));d=q.toCIMSymbolJSON(d);a(d,c)};b.getCIMSymbolRotation=function(a){a=q.toCIMSymbolJSON(a);return"CIMTextSymbol"===a.type||"CIMPointSymbol"===
a.type?a.angle||0:0};b.applyCIMSymbolRotation=function(a,c){a=q.toCIMSymbolJSON(a);if("CIMTextSymbol"===a.type)a.angle=c;else if("CIMPointSymbol"===a.type&&a.symbolLayers)for(var d=c-(a.angle||0),e=0,b=a.symbolLayers;e<b.length;e++){var h=b[e];if(q.isCIMMarker(h)){var v=h.rotation||0,v=h.rotateClockwise?v-d:v+d;h.rotation=v}a.angle=c}}})},"esri/symbols/cim/utils":function(){define(["require","exports"],function(D,b){function g(b,e){"string"!==typeof b&&(b=String(b));switch(e){case "LowerCase":return b.toLowerCase();
case "Allcaps":return b.toUpperCase();default:return b}}Object.defineProperty(b,"__esModule",{value:!0});b.isCIMMarkerStrokePlacement=b.isCIMFill=b.isCIMStroke=b.isCIMMarker=b.toCIMSymbolJSON=b.fromCIMColor=b.resampleHermite=b._adjustTextCase=b.createLabelOverrideFunction=b.colorToArray=b.evaluateValueOrFunction=void 0;b.evaluateValueOrFunction=function(b,e,g,l){return"function"===typeof b?b(e,g,l):b};b.colorToArray=function(b){return[b.r,b.g,b.b,b.a]};b.createLabelOverrideFunction=function(b,e,r){var l=
function(c){for(var a=c.length;a--;)if(-1===" /-,\n".indexOf(c.charAt(a)))return!1;return!0},f=[],c=0,m=-1;do m=e.indexOf("[",c),m>=c&&(m>c&&(c=e.substr(c,m-c),f.push([c,null,l(c)])),c=m+1,m=e.indexOf("]",c),m>=c&&(m>c&&(c=e.substr(c,m-c),(c=b[c])&&f.push([null,c,!1])),c=m+1));while(-1!==m);c<e.length-1&&(c=e.substr(c),f.push([c,null,l(c)]));return function(c){for(var a="",d=null,e=0;e<f.length;e++){var b=f[e],u=b[0],m=b[1],b=b[2];if(u)b?d=u:(d&&(a+=d,d=null),a+=u);else if(u=c.attributes[m])d&&(a+=
d,d=null),a+=u}return g(a,r)}};b._adjustTextCase=g;b.resampleHermite=function(b,e,g,l,f,c,m){void 0===m&&(m=!0);var A=e/f;g/=c;for(var a=Math.ceil(A/2),d=Math.ceil(g/2),x=0;x<c;x++)for(var p=0;p<f;p++){for(var u=4*(p+(m?c-x-1:x)*f),z=0,h=0,v=0,t=0,k=0,B=0,y=0,w=(x+.5)*g,n=Math.floor(x*g);n<(x+1)*g;n++)for(var C=Math.abs(w-(n+.5))/d,F=(p+.5)*A,C=C*C,q=Math.floor(p*A);q<(p+1)*A;q++){var r=Math.abs(F-(q+.5))/a,z=Math.sqrt(C+r*r);-1<=z&&1>=z&&(z=2*z*z*z-3*z*z+1,0<z&&(r=4*(q+n*e),y+=z*b[r+3],v+=z,255>
b[r+3]&&(z=z*b[r+3]/250),t+=z*b[r],k+=z*b[r+1],B+=z*b[r+2],h+=z))}l[u]=t/h;l[u+1]=k/h;l[u+2]=B/h;l[u+3]=y/v}};b.fromCIMColor=function(b){return b?{r:b[0],g:b[1],b:b[2],a:b[3]/255}:{r:0,g:0,b:0,a:0}};b.toCIMSymbolJSON=function(b){var e;return null===(e=b.data)||void 0===e?void 0:e.symbol};b.isCIMMarker=function(b){return"CIMVectorMarker"===b.type||"CIMPictureMarker"===b.type||"CIMBarChartMarker"===b.type||"CIMCharacterMarker"===b.type||"CIMPieChartMarker"===b.type||"CIMStackedBarChartMarker"===b.type};
b.isCIMStroke=function(b){return"CIMGradientStroke"===b.type||"CIMPictureStroke"===b.type||"CIMSolidStroke"===b.type};b.isCIMFill=function(b){return"CIMGradientFill"===b.type||"CIMHatchFill"===b.type||"CIMPictureFill"===b.type||"CIMSolidFill"===b.type||"CIMWaterFill"===b.type};b.isCIMMarkerStrokePlacement=function(b){return"CIMMarkerPlacementAlongLineRandomSize"===b.type||"CIMMarkerPlacementAlongLineSameSize"===b.type||"CIMMarkerPlacementAlongLineVariableSize"===b.type||"CIMMarkerPlacementAtExtremities"===
b.type||"CIMMarkerPlacementAtMeasuredUnits"===b.type||"CIMMarkerPlacementAtRatioPositions"===b.type||"CIMMarkerPlacementOnLine"===b.type||"CIMMarkerPlacementOnVertices"===b.type}})},"esri/layers/mixins/ImageryTileMixin":function(){define("require exports tslib ../../geometry ../../rasterRenderers ../../request ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators ../../geometry/support/spatialReferenceUtils ../support/arcgisLayerUrl ../support/commonProperties ../support/DimensionalDefinition ../support/RasterJobHandler ../support/TileInfo ../../renderers/support/rasterRendererHelper ../../renderers/support/RasterSymbolizer".split(" "),
function(D,b,g,q,e,r,l,f,c,m,A,a,d,x,p,u,z){Object.defineProperty(b,"__esModule",{value:!0});b.ImageryTileMixin=void 0;var h=l.getLogger("esri.layers.mixins.ImageryTileMixin");b.ImageryTileMixin=function(v){return function(t){function k(){var a=null!==t&&t.apply(this,arguments)||this;a._rasterJobHandler={instance:null,refCount:0,connectionPromise:null};a.bandIds=null;a.copyright=null;a.fullExtent=null;a.interpolation="nearest";a.raster=null;a.rasterInfo=null;a.sourceJSON=null;a.spatialReference=null;
a.tileInfo=null;a.symbolizer=null;return a}g.__extends(k,t);Object.defineProperty(k.prototype,"multidimensionalDefinition",{set:function(a){this.raster&&(this._sliceId=this.raster.getSliceIndex(a));this._set("multidimensionalDefinition",a)},enumerable:!1,configurable:!0});Object.defineProperty(k.prototype,"url",{set:function(a){this._set("url",A.sanitizeUrl(a,h))},enumerable:!1,configurable:!0});Object.defineProperty(k.prototype,"renderer",{set:function(a){this._set("renderer",a);this.updateRenderer()},
enumerable:!1,configurable:!0});k.prototype.updateRenderer=function(){return g.__awaiter(this,void 0,void 0,function(){var a;return g.__generator(this,function(d){switch(d.label){case 0:if(!this.loaded||JSON.stringify(this._cachedRendererJson)===JSON.stringify(this.renderer))return[2];a=this._rasterJobHandler.instance;if(!a)return[2];this.symbolizer.renderer=this.renderer;this.symbolizer.bind();return[4,a.updateSymbolizer(this.symbolizer)];case 1:return d.sent(),this._cachedRendererJson=this.renderer.toJSON(),
[2]}})})};k.prototype.applyRenderer=function(a,d){return g.__awaiter(this,void 0,void 0,function(){var c,h,k,e;return g.__generator(this,function(n){switch(n.label){case 0:c=a&&a.pixelBlock;if(!(c&&c.pixels&&0<c.pixels.length))return[2,null];this.updateRenderer();k=this._rasterJobHandler.instance;e=this.bandIds;return k?[4,k.symbolize(g.__assign(g.__assign({},a),{simpleStretchParams:d,bandIds:e}))]:[3,2];case 1:return h=n.sent(),[3,3];case 2:h=this.symbolizer.symbolize(g.__assign(g.__assign({},a),
{simpleStretchParams:d,bandIds:e})),n.label=3;case 3:return[2,h]}})})};k.prototype.getTileUrl=function(a,d,c){return"RasterTileServer"===this.raster.datasetFormat?this.url+"/tile/"+a+"/"+d+"/"+c:""};k.prototype.getCompatibleTileInfo=function(a,d){if(!this.loaded)return null;var c=m.getInfo(a);return p.create({size:256,spatialReference:a,origin:c?{x:c.origin[0],y:c.origin[1]}:{x:d.xmin,y:d.ymax}})};k.prototype.getCompatibleFullExtent=function(a){return this.loaded?this._compatibleFullExtent&&this._compatibleFullExtent.spatialReference.equals(a)?
this._compatibleFullExtent:this._compatibleFullExtent=this.raster.computeExtent(a):null};k.prototype.fetchTile=function(a,d,c,h){void 0===h&&(h={});return g.__awaiter(this,void 0,void 0,function(){var k,e;return g.__generator(this,function(n){switch(n.label){case 0:return h.requestAsImageElement?(k=this.getTileUrl(a,d,c),[2,r(k,{responseType:"image",query:{sliceId:this._sliceId,_ts:h.timestamp},signal:h.signal}).then(function(a){return a.data})]):[4,this._initJobHandler()];case 1:return n.sent(),
this.multidimensionalDefinition&&(e=this._sliceId,h=g.__assign({multidimensionalDefinition:this.multidimensionalDefinition,sliceId:e},h)),"raster-shaded-relief"===this.renderer.type&&(h=g.__assign({buffer:{cols:1,rows:1}},h)),[2,this.raster.fetchTile(a,d,c,h)]}})})};k.prototype.fetchPixels=function(a,d,c,h){return g.__awaiter(this,void 0,void 0,function(){var k;return g.__generator(this,function(e){switch(e.label){case 0:return[4,this._initJobHandler()];case 1:return e.sent(),this.multidimensionalDefinition&&
(k=this._sliceId,h=g.__assign({multidimensionalDefinition:this.multidimensionalDefinition,sliceId:k},h)),[2,this.raster.fetchPixels(a,d,c,h)]}})})};k.prototype.identify=function(a,d){void 0===d&&(d={});this.multidimensionalDefinition&&!d.multidimensionalDefinition&&(d=g.__assign(g.__assign({},d),{multidimensionalDefinition:this.multidimensionalDefinition}));return this.raster.identify(a,d)};k.prototype.increaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount++};k.prototype.decreaseRasterJobHandlerUsage=
function(){this._rasterJobHandler.refCount--;0>=this._rasterJobHandler.refCount&&this._shutdownJobHandler()};k.prototype._configDefaultSettings=function(){this._configDefaultInterpolation();this._configDefaultSlice();this._configDefaultRenderer()};k.prototype._initJobHandler=function(){var a=this;if(null!=this._rasterJobHandler.connectionPromise)return this._rasterJobHandler.connectionPromise;var d=new x;this._rasterJobHandler.connectionPromise=d.initialize().then(function(){a._rasterJobHandler.instance=
d;a.raster.rasterJobHandler=d;a.renderer&&a.updateRenderer()}).catch(function(){return null});return this._rasterJobHandler.connectionPromise};k.prototype._shutdownJobHandler=function(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy();this._rasterJobHandler.instance=null;this._rasterJobHandler.connectionPromise=null;this._rasterJobHandler.refCount=0;this.raster.rasterJobHandler=null};k.prototype._configDefaultInterpolation=function(){var a;if(null==this.interpolation){var d=
u.getDefaultInterpolation(this.rasterInfo,this.raster.tileType,null===(a=this.sourceJSON)||void 0===a?void 0:a.defaultResamplingMethod);this._set("interpolation",d)}};k.prototype._configDefaultSlice=function(){var a=this.raster.rasterInfo.multidimensionalInfo;if(f.isSome(a)){if(!this.multidimensionalDefinition){var c=a.variables[0],h=[];c.dimensions.forEach(function(a){h.push(new d({variableName:c.name,dimensionName:a.name,values:a.hasRegularIntervals?a.extent[0]:a.values[0],isSlice:!0}))});this.multidimensionalDefinition=
h}this._sliceId=this.raster.getSliceIndex(this.multidimensionalDefinition)}};k.prototype._configDefaultRenderer=function(){var a,d=this.raster.rasterInfo;this.bandIds||(this.bandIds=u.getDefaultBandCombination(d));this.renderer||(this.renderer=u.createDefaultRenderer(d,{bandIds:this.bandIds,variableName:null===(a=this.multidimensionalDefinition)||void 0===a?void 0:a[0].variableName}));this.symbolizer?(this.symbolizer.renderer=this.renderer,this.symbolizer.rasterInfo=d):this.symbolizer=new z({renderer:this.renderer,
rasterInfo:d});this.symbolizer.bind()||h.warn("imagery-tile-mixin","The given renderer is not supported by the layer.")};g.__decorate([c.property()],k.prototype,"_cachedRendererJson",void 0);g.__decorate([c.property()],k.prototype,"_sliceId",void 0);g.__decorate([c.property()],k.prototype,"_compatibleFullExtent",void 0);g.__decorate([c.property()],k.prototype,"_rasterJobHandler",void 0);g.__decorate([c.property()],k.prototype,"bandIds",void 0);g.__decorate([c.property()],k.prototype,"copyright",void 0);
g.__decorate([c.property({type:q.Extent}),c.aliasOf("rasterInfo.extent")],k.prototype,"fullExtent",void 0);g.__decorate([c.property()],k.prototype,"interpolation",void 0);g.__decorate([c.property({type:[d]})],k.prototype,"multidimensionalDefinition",null);g.__decorate([c.property()],k.prototype,"raster",void 0);g.__decorate([c.property({readOnly:!0}),c.aliasOf("raster.rasterInfo")],k.prototype,"rasterInfo",void 0);g.__decorate([c.property()],k.prototype,"sourceJSON",void 0);g.__decorate([c.property({type:q.SpatialReference}),
c.aliasOf("rasterInfo.spatialReference")],k.prototype,"spatialReference",void 0);g.__decorate([c.property({type:p,dependsOn:["rasterInfo"]}),c.aliasOf("rasterInfo.storageInfo.tileInfo")],k.prototype,"tileInfo",void 0);g.__decorate([c.property(a.url)],k.prototype,"url",null);g.__decorate([c.property({types:e.rasterRendererTypes})],k.prototype,"renderer",null);g.__decorate([c.property()],k.prototype,"symbolizer",void 0);return k=g.__decorate([c.subclass("esri.layers.ImageryTileMixin")],k)}(v)}})},"esri/layers/support/DimensionalDefinition":function(){define("require exports tslib ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),
function(D,b,g,q,e,r,l){return function(b){function c(c){c=b.call(this,c)||this;c.variableName=null;c.dimensionName=null;c.values=[];c.isSlice=!1;return c}g.__extends(c,b);f=c;c.prototype.clone=function(){return new f({variableName:this.variableName,dimensionName:this.dimensionName,values:e.clone(this.values),isSlice:this.isSlice})};var f;g.__decorate([r.property({type:String,json:{write:!0}})],c.prototype,"variableName",void 0);g.__decorate([r.property({type:String,json:{write:!0}})],c.prototype,
"dimensionName",void 0);g.__decorate([r.property({type:l.types.array(l.types.oneOf([l.types.native(Number),l.types.array(l.types.native(Number))])),json:{write:!0}})],c.prototype,"values",void 0);g.__decorate([r.property({type:Boolean,json:{write:!0}})],c.prototype,"isSlice",void 0);return c=f=g.__decorate([r.subclass("esri.layers.support.DimensionalDefinition")],c)}(q.JSONSupport)})},"esri/layers/support/RasterJobHandler":function(){define("require exports tslib ../../core/Error ../../core/promiseUtils ../../core/workers ./PixelBlock".split(" "),
function(D,b,g,q,e,r,l){return function(){function b(){this._workerThread=null;this._destroyed=!1}b.prototype.initialize=function(){return g.__awaiter(this,void 0,void 0,function(){var c;return g.__generator(this,function(e){switch(e.label){case 0:return[4,r.open("RasterWorker")];case 1:return c=e.sent(),this._destroyed?c.close():this._workerThread=c,[2]}})})};b.prototype.destroy=function(){this._destroyed=!0;this._workerThread&&(this._workerThread.close(),this._workerThread=null)};b.prototype.decode=
function(c,e){return g.__awaiter(this,void 0,void 0,function(){var b;return g.__generator(this,function(a){switch(a.label){case 0:if(!this._workerThread)throw new q("raster-jobhandler:no-connection","no available worker connection");return[4,this._workerThread.invoke("decode",c,e)];case 1:return b=a.sent(),[2,b?new l(b):null]}})})};b.prototype.symbolize=function(c,e){return g.__awaiter(this,void 0,void 0,function(){var b,a;return g.__generator(this,function(d){switch(d.label){case 0:if(!this._workerThread)throw new q("raster-jobhandler:no-connection",
"no available worker connection");b={extent:c.extent&&c.extent.toJSON(),pixelBlock:c.pixelBlock.toJSON(),simpleStretchParams:c.simpleStretchParams,bandIds:c.bandIds};return[4,this._workerThread.invoke("symbolize",b,e)];case 1:return a=d.sent(),[2,a?new l(a):null]}})})};b.prototype.updateSymbolizer=function(c,b){return g.__awaiter(this,void 0,void 0,function(){var f;return g.__generator(this,function(a){switch(a.label){case 0:if(!this._workerThread)throw new q("raster-jobhandler:no-connection","no available worker connection");
f=c&&c.renderer&&"raster-stretch"===c.renderer.type&&c.renderer.histograms;return[4,e.all(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:c.toJSON(),histograms:f},b))];case 1:return a.sent(),[2]}})})};b.prototype.stretch=function(c,e){return g.__awaiter(this,void 0,void 0,function(){var b,a;return g.__generator(this,function(d){switch(d.label){case 0:if(!this._workerThread)throw new q("raster-jobhandler:no-connection","no available worker connection");if(!c||!c.pixelBlock)return[2,
null];b={srcPixelBlock:c.pixelBlock.toJSON(),stretchParams:c.stretchParams};return[4,this._workerThread.invoke("stretch",b,e)];case 1:return a=d.sent(),[2,a?new l(a):null]}})})};b.prototype.mosaicAndTransform=function(c,e){return g.__awaiter(this,void 0,void 0,function(){var b,a;return g.__generator(this,function(d){switch(d.label){case 0:if(!this._workerThread)throw new q("raster-jobhandler:no-connection","no available worker connection");if(!(c&&c.srcPixelBlocks&&0<c.srcPixelBlocks.length))return[2,
null];b=g.__assign(g.__assign({},c),{srcPixelBlocks:c.srcPixelBlocks.map(function(a){return a?a.toJSON():null})});return[4,this._workerThread.invoke("mosaicAndTransform",b,e)];case 1:return a=d.sent(),[2,a?new l(a):null]}})})};return b}()})},"esri/layers/support/TileInfo":function(){define("require exports tslib ../../geometry ../../core/jsonMap ../../core/JSONSupport ../../core/unitUtils ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(D,b,g,q,e,r,l,f,c,m,A,a,d){var x=new e.default({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});return function(e){function b(a){a=e.call(this,a)||this;a.dpi=96;a.format=null;a.origin=null;a.minScale=0;a.maxScale=0;a.size=null;a.spatialReference=null;return a}g.__extends(b,e);p=b;b.create=function(a){void 0===
a&&(a={size:256,spatialReference:q.SpatialReference.WebMercator});var d=a.resolutionFactor||1,c=a.scales,k=a.size||256,e=a.spatialReference||q.SpatialReference.WebMercator;if(!A.isValid(e)){d=[];if(c)for(a=0;a<c.length;a++){var h=c[a];d.push({level:a,scale:h,resolution:h})}else{var w=5E-4;for(a=23;0<=a;a--)d.unshift({level:a,scale:w,resolution:w}),w*=2}return new p({dpi:96,lods:d,origin:new q.Point(0,0,e),size:[k,k],spatialReference:e})}var h=A.getInfo(e),n=a.origin?new q.Point({x:a.origin.x,y:a.origin.y,
spatialReference:e}):h?new q.Point({x:h.origin[0],y:h.origin[1],spatialReference:e}):new q.Point({x:0,y:0,spatialReference:e}),b=1/(39.37*l.getMetersPerUnitForSR(e)*96),u=[];if(c)for(a=0;a<c.length;a++)h=c[a],w=h*b,u.push({level:a,scale:h,resolution:w});else for(h=A.isGeographic(e)?512/k*5.916575275917094E8:256/k*5.91657527591555E8,c=Math.ceil(24/d),u.push({level:0,scale:h,resolution:h*b}),a=1;a<c;a++)h/=Math.pow(2,d),w=h*b,u.push({level:a,scale:h,resolution:w});return new p({dpi:96,lods:u,origin:n,
size:[k,k],spatialReference:e})};Object.defineProperty(b.prototype,"isWrappable",{get:function(){var a=this.spatialReference,d=this.origin;if(a&&d){var c=A.getInfo(a);return a.isWrappable&&Math.abs(c.origin[0]-d.x)<=c.dx}return!1},enumerable:!1,configurable:!0});b.prototype.readOrigin=function(a,d){return q.Point.fromJSON(g.__assign({spatialReference:d.spatialReference},a))};Object.defineProperty(b.prototype,"lods",{set:function(a){var d=this,c=0,e=0,h=[];this._levelToLOD={};a&&(c=-Infinity,e=Infinity,
a.forEach(function(a){h.push(a.scale);c=a.scale>c?a.scale:c;e=a.scale<e?a.scale:e;d._levelToLOD[a.level]=a}));this._set("scales",h);this._set("minScale",c);this._set("maxScale",e);this._set("lods",a);this._initializeUpsampleLevels()},enumerable:!1,configurable:!0});b.prototype.readSize=function(a,d){return[d.cols,d.rows]};b.prototype.writeSize=function(a,d){d.cols=a[0];d.rows=a[0]};b.prototype.zoomToScale=function(a){var d=this.scales;if(0>=a)return d[0];if(a>=d.length)return d[d.length-1];var c=
Math.round(a);return d[c]+(c-a)*(d[Math.round(a-.5)]-d[c])};b.prototype.scaleToZoom=function(a){for(var d=this.scales,c=d.length-1,e=0;e<c;e++){var h=d[e],b=d[e+1];if(h<=a)break;if(b===a)return e+1;if(h>a&&b<a)return e+1-(a-b)/(h-b)}return e};b.prototype.snapScale=function(a,d){void 0===d&&(d=.95);a=this.scaleToZoom(a);return a%Math.floor(a)>=d?this.zoomToScale(Math.ceil(a)):this.zoomToScale(Math.floor(a))};b.prototype.tileAt=function(d,c,e,k){var h=this.lodAt(d);if(!h)return null;var b;if("number"===
typeof c)b=c,c=e;else{if(A.equals(c.spatialReference,this.spatialReference))b=c.x,c=c.y;else{k=a.project(c,this.spatialReference);if(!k)return null;b=k.x;c=k.y}k=e}e=h.resolution*this.size[0];h=h.resolution*this.size[1];k||(k={id:null,level:0,row:0,col:0,extent:m.create()});k.level=d;k.row=Math.floor((this.origin.y-c)/h+.001);k.col=Math.floor((b-this.origin.x)/e+.001);this.updateTileInfo(k);return k};b.prototype.updateTileInfo=function(a){var d=this.lodAt(a.level);if(d){var c=d.resolution*this.size[0],
d=d.resolution*this.size[1];a.id=a.level+"/"+a.row+"/"+a.col;a.extent||(a.extent=m.create());a.extent[0]=this.origin.x+a.col*c;a.extent[1]=this.origin.y-(a.row+1)*d;a.extent[2]=a.extent[0]+c;a.extent[3]=a.extent[1]+d}};b.prototype.upsampleTile=function(a){var d=this._upsampleLevels[a.level];if(!d||-1===d.parentLevel)return!1;a.level=d.parentLevel;a.row=Math.floor(a.row/d.factor+.001);a.col=Math.floor(a.col/d.factor+.001);this.updateTileInfo(a);return!0};b.prototype.getTileBounds=function(a,d){var c=
this.lodAt(d.level).resolution,e=c*this.size[0],c=c*this.size[1];a[0]=this.origin.x+d.col*e;a[1]=this.origin.y-(d.row+1)*c;a[2]=a[0]+e;a[3]=a[1]+c;return a};b.prototype.lodAt=function(a){return this._levelToLOD&&this._levelToLOD[a]||null};b.prototype.clone=function(){return p.fromJSON(this.write({}))};b.prototype._initializeUpsampleLevels=function(){var a=this.lods;this._upsampleLevels=[];for(var d=null,c=0;c<a.length;c++){var e=a[c];this._upsampleLevels[e.level]={parentLevel:d?d.level:-1,factor:d?
d.resolution/e.resolution:0};d=e}};var p;g.__decorate([f.property({type:Number,json:{write:!0}})],b.prototype,"compressionQuality",void 0);g.__decorate([f.property({type:Number,json:{write:!0}})],b.prototype,"dpi",void 0);g.__decorate([f.property({type:String,json:{read:x.read,write:x.write,origins:{"web-scene":{read:!1,write:!1}}}})],b.prototype,"format",void 0);g.__decorate([f.property({readOnly:!0,dependsOn:["spatialReference","origin"]})],b.prototype,"isWrappable",null);g.__decorate([f.property({type:q.Point,
json:{write:!0}})],b.prototype,"origin",void 0);g.__decorate([f.reader("origin")],b.prototype,"readOrigin",null);g.__decorate([f.property({type:[d],value:null,json:{write:!0}})],b.prototype,"lods",null);g.__decorate([f.property({readOnly:!0})],b.prototype,"minScale",void 0);g.__decorate([f.property({readOnly:!0})],b.prototype,"maxScale",void 0);g.__decorate([f.property({readOnly:!0})],b.prototype,"scales",void 0);g.__decorate([f.property({cast:function(a){return Array.isArray(a)?a:"number"===typeof a?
[a,a]:[256,256]}})],b.prototype,"size",void 0);g.__decorate([f.reader("size",["rows","cols"])],b.prototype,"readSize",null);g.__decorate([f.writer("size",{cols:{type:c.Integer},rows:{type:c.Integer}})],b.prototype,"writeSize",null);g.__decorate([f.property({type:q.SpatialReference,json:{write:!0}})],b.prototype,"spatialReference",void 0);return b=p=g.__decorate([f.subclass("esri.layers.support.TileInfo")],b)}(r.JSONSupport)})},"esri/geometry/support/aaBoundingRect":function(){define(["require","exports",
"../../core/compilerUtils","../Extent"],function(D,b,g,q){function e(a){void 0===a&&(a=b.ZERO);return[a[0],a[1],a[2],a[3]]}function r(a){return a[0]>=a[2]?0:a[2]-a[0]}function l(a){return a[1]>=a[3]?0:a[3]-a[1]}function f(a,d,c){return d>=a[0]&&c>=a[1]&&d<=a[2]&&c<=a[3]}function c(a,d){a[0]=d[0];a[1]=d[1];a[2]=d[2];a[3]=d[3];return a}function m(a){return 4===a.length}function A(a,d,c){return a<d?d:a>c?c:a}Object.defineProperty(b,"__esModule",{value:!0});b.UNIT=b.ZERO=b.NEGATIVE_INFINITY=b.POSITIVE_INFINITY=
b.equals=b.isPoint=b.is=b.empty=b.set=b.setMax=b.setMin=b.pad=b.offset=b.size=b.distance=b.intersection=b.contains=b.intersects=b.containsPointWithMargin=b.containsXY=b.containsPointObject=b.containsPoint=b.center=b.area=b.diameter=b.height=b.width=b.allFinite=b.expandWithNestedArray=b.expand=b.expandPointInPlace=b.toExtent=b.fromExtent=b.fromValues=b.clone=b.create=void 0;b.create=e;b.clone=function(a){return[a[0],a[1],a[2],a[3]]};b.fromValues=function(a,d,c,b,u){void 0===u&&(u=e());u[0]=a;u[1]=
d;u[2]=c;u[3]=b;return u};b.fromExtent=function(a,d){void 0===d&&(d=e());d[0]=a.xmin;d[1]=a.ymin;d[2]=a.xmax;d[3]=a.ymax;return d};b.toExtent=function(a,d){return new q({xmin:a[0],ymin:a[1],xmax:a[2],ymax:a[3],spatialReference:d})};b.expandPointInPlace=function(a,d){d[0]<a[0]&&(a[0]=d[0]);d[0]>a[2]&&(a[2]=d[0]);d[1]<a[1]&&(a[1]=d[1]);d[1]>a[3]&&(a[3]=d[1])};b.expand=function(a,d,c){void 0===c&&(c=a);if("length"in d)if(m(d))c[0]=Math.min(a[0],d[0]),c[1]=Math.min(a[1],d[1]),c[2]=Math.max(a[2],d[2]),
c[3]=Math.max(a[3],d[3]);else{if(2===d.length||3===d.length)c[0]=Math.min(a[0],d[0]),c[1]=Math.min(a[1],d[1]),c[2]=Math.max(a[2],d[0]),c[3]=Math.max(a[3],d[1])}else switch(d.type){case "extent":c[0]=Math.min(a[0],d.xmin);c[1]=Math.min(a[1],d.ymin);c[2]=Math.max(a[2],d.xmax);c[3]=Math.max(a[3],d.ymax);break;case "point":c[0]=Math.min(a[0],d.x);c[1]=Math.min(a[1],d.y);c[2]=Math.max(a[2],d.x);c[3]=Math.max(a[3],d.y);break;default:g.neverReached(d)}return c};b.expandWithNestedArray=function(a,d,c){void 0===
c&&(c=a);var e=d.length,b=a[0],f=a[1],h=a[2];a=a[3];for(var v=0;v<e;v++){var t=d[v],b=Math.min(b,t[0]),f=Math.min(f,t[1]),h=Math.max(h,t[0]);a=Math.max(a,t[1])}c[0]=b;c[1]=f;c[2]=h;c[3]=a;return c};b.allFinite=function(a){for(var d=0;4>d;d++)if(!isFinite(a[d]))return!1;return!0};b.width=r;b.height=l;b.diameter=function(a){var d=r(a);a=l(a);return Math.sqrt(d*d+a*a)};b.area=function(a){return r(a)*l(a)};b.center=function(a,d){void 0===d&&(d=[0,0]);d[0]=(a[0]+a[2])/2;d[1]=(a[1]+a[3])/2;return d};b.containsPoint=
function(a,d){return f(a,d[0],d[1])};b.containsPointObject=function(a,d){return f(a,d.x,d.y)};b.containsXY=f;b.containsPointWithMargin=function(a,d,c){return d[0]>=a[0]-c&&d[1]>=a[1]-c&&d[0]<=a[2]+c&&d[1]<=a[3]+c};b.intersects=function(a,d){return Math.max(d[0],a[0])<=Math.min(d[2],a[2])&&Math.max(d[1],a[1])<=Math.min(d[3],a[3])};b.contains=function(a,d){return d[0]>=a[0]&&d[2]<=a[2]&&d[1]>=a[1]&&d[3]<=a[3]};b.intersection=function(a,d,c){void 0===c&&(c=a);var e=d[0],b=d[1],f=d[2];d=d[3];c[0]=A(a[0],
e,f);c[1]=A(a[1],b,d);c[2]=A(a[2],e,f);c[3]=A(a[3],b,d);return c};b.distance=function(a,d){var c=(a[1]+a[3])/2,e=Math.max(Math.abs(d[0]-(a[0]+a[2])/2)-r(a)/2,0);a=Math.max(Math.abs(d[1]-c)-l(a)/2,0);return Math.sqrt(e*e+a*a)};b.size=function(a,d){d[0]=a[2]-a[0];d[1]=a[3]-a[1]};b.offset=function(a,d,c,e){void 0===e&&(e=a);e[0]=a[0]+d;e[1]=a[1]+c;e[2]=a[2]+d;e[3]=a[3]+c;return e};b.pad=function(a,d,c){void 0===c&&(c=a);c[0]=a[0]-d;c[1]=a[1]-d;c[2]=a[2]+d;c[3]=a[3]+d;return c};b.setMin=function(a,c,
e){void 0===e&&(e=a);e[0]=c[0];e[1]=c[1];e!==a&&(e[2]=a[2],e[3]=a[3]);return e};b.setMax=function(a,c,e){void 0===e&&(e=a);e[2]=c[0];e[3]=c[1];e!==a&&(e[0]=a[0],e[1]=a[1]);return a};b.set=c;b.empty=function(a){return a?c(a,b.NEGATIVE_INFINITY):e(b.NEGATIVE_INFINITY)};b.is=m;b.isPoint=function(a){return(0===r(a)||!isFinite(a[0]))&&(0===l(a)||!isFinite(a[1]))};b.equals=function(a,c,e){if(null==a||null==c)return a===c;if(!m(a)||!m(c))return!1;if(e)for(var d=0;d<a.length;d++){if(!e(a[d],c[d]))return!1}else for(d=
0;d<a.length;d++)if(a[d]!==c[d])return!1;return!0};b.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];b.NEGATIVE_INFINITY=[Infinity,Infinity,-Infinity,-Infinity];b.ZERO=[0,0,0,0];b.UNIT=[0,0,1,1]})},"esri/layers/support/LOD":function(){define("require exports tslib ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),function(D,b,g,q,e,r){return function(b){function f(c){c=b.call(this,c)||this;c.level=0;c.levelValue=null;c.resolution=
0;c.scale=0;return c}g.__extends(f,b);c=f;f.prototype.clone=function(){return new c({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};var c;g.__decorate([e.property({type:r.Integer,json:{write:!0}})],f.prototype,"level",void 0);g.__decorate([e.property({type:String,json:{write:!0}})],f.prototype,"levelValue",void 0);g.__decorate([e.property({type:Number,json:{write:!0}})],f.prototype,"resolution",void 0);g.__decorate([e.property({type:Number,json:{write:!0}})],
f.prototype,"scale",void 0);return f=c=g.__decorate([e.subclass("esri.layers.support.LOD")],f)}(q.JSONSupport)})},"esri/renderers/support/rasterRendererHelper":function(){define("require exports tslib ../../Color ../../rasterRenderers ../../core/arrayUtils ../../core/maybe ../../core/unitUtils ../../layers/support/RasterInfo ../../renderers/support/ClassBreakInfo ../../renderers/support/colorRampUtils ../../renderers/support/UniqueValueInfo ../../tasks/support/ClassBreaksDefinition ../../tasks/support/generateRendererUtils ../../tasks/support/MultipartColorRamp".split(" "),
function(D,b,g,q,e,r,l,f,c,m,A,a,d,x,p){function u(a,c){a=z(a,null===c||void 0===c?void 0:c.variableName);var d=a.bandCount,k=c||{};c=k.bandIds;k=k.stretchType;if(null===c||void 0===c?0:c.some(function(a){return a>=d}))c=null;var n=l.unwrap(a.statistics),b=l.unwrap(a.histograms);1<d?(c=(null===c||void 0===c?0:c.length)?c:h(a),n=null==n?null:c.map(function(a){return n[a]}),b=null==b?null:c.map(function(a){return b[a]})):c=[0];null==k&&(k=t(a));var w=!1;switch(k){case "none":w=!1;break;case "percent-clip":w=
!(null===b||void 0===b?0:b.length);break;default:w=!(null===n||void 0===n?0:n.length)}a=new e.RasterStretchRenderer({stretchType:k,dynamicRangeAdjustment:w,colorRamp:1===(null===c||void 0===c?void 0:c.length)&&"scientific"===a.dataType?J:null,outputMin:0,outputMax:255,gamma:1===c.length?[1]:[1,1,1],useGamma:!1});"percent-clip"===k?a.maxPercent=a.minPercent=.25:"standard-deviation"===k&&(a.numberOfStandardDeviations=2);if(!w)if("percent-clip"===k)a.histograms=b;else if("min-max"===k||"standard-deviation"===
k)a.statistics=n;return a}function z(a,d){if(null==d)return a;var e=l.unwrap(a.statistics),k=l.unwrap(a.histograms),n=a.multidimensionalInfo;if(d&&l.isSome(n)){var b=r.find(n.variables,function(a){return a.name===d}),n=b.statistics,b=b.histograms;if(null===n||void 0===n?0:n.length)e=n;if(null===b||void 0===b?0:b.length)k=b}return c.fromJSON(g.__assign(g.__assign({},a.toJSON()),{statistics:e,histograms:k}))}function h(a){var c=a.bandCount;if(1===c)return null;if(2===c)return[0];a=a.keyProperties&&
a.keyProperties.BandProperties;var d;if(a&&a.length===c){var e=v(a);a=e.red;var k=e.green,n=e.blue,e=e.nir;null!=a&&null!=k&&null!=n?d=[a,k,n]:null!=e&&null!=a&&null!=k&&(d=[e,a,k])}!d&&3<=c&&(d=[0,1,2]);return d}function v(a){for(var c,d={},e=0;e<a.length;e++){var k=a[e],n=null===(c=k.BandName)||void 0===c?void 0:c.toLowerCase();"red"===n?d.red=e:"green"===n?d.green=e:"blue"===n?d.blue=e:"nearinfrared"===n||"nearinfrared_1"===n||"nir"===n?d.nir=e:k.WavelengthMax&&k.WavelengthMin&&(n=k.WavelengthMin,
k=k.WavelengthMax,null==d.blue&&410<=n&&480>=n&&480<=k&&540>=k?d.blue=e:null==d.green&&490<=n&&560>=n&&560<=k&&610>=k?d.green=e:null==d.red&&595<=n&&670>=n&&660<=k&&730>=k?d.red=e:null==d.nir&&700<=n&&860>=n&&800<=k&&950>=k&&(d.nir=e))}return d}function t(a){var c="percent-clip",d=a.pixelType,e=a.dataType,k=a.histograms;a=a.statistics;"u8"!==d||"processed"!==e&&l.isSome(k)&&l.isSome(a)?"u8"===d||"elevation"===e||"scientific"===e?c="min-max":l.isSome(k)?c="percent-clip":l.isSome(a)&&(c=c="min-max"):
c="none";return c}function k(c,d){if(!w(c,d))return null;c=c.attributeTable;var k=B(c,d),n=y(c,"red"),b=y(c,"green"),h=y(c,"blue"),t=[],v=new Set,p=!!(n&&b&&h);c.features.forEach(function(c){var d=c.attributes[k.name];v.has(c.attributes[k.name])||null==d||(v.add(d),t.push(new a({value:c.attributes[k.name],label:c.attributes[k.name],symbol:{type:"simple-fill",style:"solid",outline:null,color:p?new q([c.attributes[n.name],c.attributes[b.name],c.attributes[h.name],1]):new q([0,0,0,0])}})))});if(!p){var u=
A.convertColorRampToColormap(I,t.length);t.forEach(function(a,c){return a.symbol.color=new q(u[c].slice(1,4))})}return new e.UniqueValueRenderer({field:k.name,uniqueValueInfos:t})}function B(a,c){var d=r.find(a.fields,function(a){return"string"===a.type&&(c===a.name.toLowerCase()||-1<a.name.toLowerCase().indexOf("class"))});d||(d=r.find(a.fields,function(a){return"string"===a.type}))||(d=y(a,"value"));return d}function y(a,c){return r.find(a.fields,function(a){return a.name.toLowerCase()===c})}function w(a,
c){var d=a.attributeTable;a=a.bandCount;return!l.isSome(d)||1<a||c&&null==r.find(d.fields,function(a){return a.name.toLowerCase()===c.toLowerCase()})?!1:!0}function n(a){var c=a.bandCount;a=a.colormap;return l.isSome(a)&&a.length&&1===c}function C(a){if(!n(a))return null;var c,d=a.attributeTable;a=a.colormap;if(l.isSome(d)){var k=y(d,"value"),b=B(d);"string"===b.type&&(c={},d.features.forEach(function(a){a=a.attributes;c[a[k.name]]=b?a[b.name]:a[k.name]}))}return e.RasterColormapRenderer.createFromColormap(l.unwrap(a),
c)}function F(a){return"elevation"===a.dataType}function G(a){var c=a.attributeTable;return 1===a.bandCount&&(l.isSome(c)||l.isSome(a.histograms))}Object.defineProperty(b,"__esModule",{value:!0});b.createClassBreaksRenderer=b.isClassBreaksSupported=b.createShadedReliefRenderer=b.isShadedReliefRendererSupported=b.createColormapRenderer=b.isColormapRendererSupported=b.isUVRendererSupported=b.getClassField=b.createUVRenderer=b.getWellKnownBandIndexes=b.getDefaultBandCombination=b.createStretchRenderer=
b.getDefaultInterpolation=b.getSupportedRendererTypes=b.createDefaultRenderer=void 0;var J=p.fromJSON({type:"multipart",colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]}),I=p.fromJSON(A.PREDEFINED_JSON_COLOR_RAMPS[0]);b.createDefaultRenderer=function(a,c){var d=a.attributeTable,n=a.colormap,b=a.dataType;return"vector-uv"===b||"vector-magdir"===b?new e.VectorFieldRenderer:l.isSome(n)&&(n=C(a),l.isSome(n))||
l.isSome(d)&&(n=k(a),l.isSome(n))?n:u(a,c)};b.getSupportedRendererTypes=function(a){var c=["raster-stretch"];n(a)&&c.push("raster-colormap");w(a)&&c.push("unique-value");G(a)&&c.push("class-breaks");F(a)&&c.push("raster-shaded-relief");return c};b.getDefaultInterpolation=function(a,c,d){var e=r.find(["nearest","bilinear","cubic","majority"],function(a){return a===(null===d||void 0===d?void 0:d.toLowerCase())});return"Map"===c?null!==e&&void 0!==e?e:"bilinear":"thematic"===a.dataType||a.attributeTable||
a.colormap?"nearest"===e||"majority"===e?e:"nearest":null!==e&&void 0!==e?e:"bilinear"};b.createStretchRenderer=u;b.getDefaultBandCombination=h;b.getWellKnownBandIndexes=v;b.createUVRenderer=k;b.getClassField=B;b.isUVRendererSupported=w;b.isColormapRendererSupported=n;b.createColormapRenderer=C;b.isShadedReliefRendererSupported=F;b.createShadedReliefRenderer=function(a,c){if(!F(a))return null;a=a.extent;a=a.width*f.getMetersPerUnitForSR(a.spatialReference);return new e.RasterShadedReliefRenderer({hillshadeType:null!==
c&&void 0!==c?c:"multi-directional",scalingType:5E6<a?"adjusted":"none"})};b.isClassBreaksSupported=G;b.createClassBreaksRenderer=function(a,c){a=z(a,null===c||void 0===c?void 0:c.variableName);var k=a.attributeTable;if(!G(a))return null;var n=l.isSome(a.histograms)?a.histograms[0]:null,b=(null===c||void 0===c?void 0:c.numClasses)||4,h=null===c||void 0===c?void 0:c.colors;if(h&&h.length!==b)return null;var w=(null===c||void 0===c?void 0:c.field)||"value",t=[];if(l.isSome(k)){var v=r.find(k.fields,
function(a){return"count"===a.name.toLowerCase()}),y=r.find(k.fields,function(a){return a.name.toLowerCase()===w.toLowerCase()}),w=y.name,p=k.features.length,u=0;k.features.forEach(function(a){return u+=a.attributes[v.name]/p});k.features.forEach(function(a){var c=a.attributes[y.name];a=a.attributes[v.name];if(0<a){a=Math.max(1,Math.round(a/p/u*1E3));for(var d=0;d<a;d++)t.push(c)}})}else{a=a.pixelType;var f=(n.max-n.min)/n.size,B=(a=-1<a.indexOf("s")||-1<a.indexOf("u"))&&1===f?Math.floor(n.min+.5):
n.min,C=a&&1===f?Math.floor(n.max-.5):n.max,g=n.size,F=0;n.counts.forEach(function(a){return F+=a/g});n.counts.forEach(function(a,c){if(0<a){a=Math.max(1,Math.round(a/g/F*1E3));c=0===c?B:c===g-1?C:n.min+f*(c+.5);for(var d=0;d<a;d++)t.push(c)}})}a=x.createGenerateRendererClassBreaks({values:t,normalizationTotal:null,definition:new d({classificationMethod:(null===c||void 0===c?void 0:c.classificationMethod)||"equal-interval",breakCount:b})});h||(h=A.convertColorRampToColormap((null===c||void 0===c?
void 0:c.colorRamp)||J,b,!0).map(function(a){return a.slice(1)}));c=a.classBreaks.map(function(a,c){return new m({minValue:a.minValue,maxValue:a.maxValue,label:a.label,symbol:{type:"simple-fill",color:h[c]}})});return new e.ClassBreaksRenderer({field:w,classBreakInfos:c})}})},"esri/layers/support/RasterInfo":function(){define("require exports tslib ../../core/JSONSupport ../../core/accessorSupport/decorators ../../geometry/Extent ../../tasks/support/FeatureSet".split(" "),function(D,b,g,q,e,r,l){return function(b){function c(c){c=
b.call(this,c)||this;c.attributeTable=null;c.bandCount=null;c.colormap=null;c.extent=null;c.format=void 0;c.height=null;c.width=null;c.histograms=null;c.keyProperties={};c.multidimensionalInfo=null;c.noDataValue=null;c.pixelSize=null;c.pixelType=null;c.spatialReference=null;c.statistics=null;c.storageInfo=null;return c}g.__extends(c,b);Object.defineProperty(c.prototype,"dataType",{get:function(){var c=this.keyProperties&&this.keyProperties.DataType;return c?c.toLowerCase():"generic"},enumerable:!1,
configurable:!0});g.__decorate([e.property({type:l,json:{write:!0}})],c.prototype,"attributeTable",void 0);g.__decorate([e.property({json:{write:!0}})],c.prototype,"bandCount",void 0);g.__decorate([e.property({json:{write:!0}})],c.prototype,"colormap",void 0);g.__decorate([e.property({type:String,readOnly:!0})],c.prototype,"dataType",null);g.__decorate([e.property({type:r,json:{write:!0}})],c.prototype,"extent",void 0);g.__decorate([e.property({json:{write:!0}})],c.prototype,"format",void 0);g.__decorate([e.property({json:{write:!0}})],
c.prototype,"height",void 0);g.__decorate([e.property({json:{write:!0}})],c.prototype,"width",void 0);g.__decorate([e.property({json:{write:!0}})],c.prototype,"histograms",void 0);g.__decorate([e.property({json:{write:!0}})],c.prototype,"keyProperties",void 0);g.__decorate([e.property({json:{write:!0}})],c.prototype,"multidimensionalInfo",void 0);g.__decorate([e.property()],c.prototype,"noDataValue",void 0);g.__decorate([e.property({json:{write:!0}})],c.prototype,"pixelSize",void 0);g.__decorate([e.property({json:{write:!0}})],
c.prototype,"pixelType",void 0);g.__decorate([e.property({json:{write:!0}})],c.prototype,"spatialReference",void 0);g.__decorate([e.property({json:{write:!0}})],c.prototype,"statistics",void 0);g.__decorate([e.property({json:{write:!0}})],c.prototype,"storageInfo",void 0);return c=g.__decorate([e.subclass("esri.layers.support.RasterInfo")],c)}(q.JSONSupport)})},"esri/tasks/support/ClassBreaksDefinition":function(){define("require exports tslib ../../core/jsonMap ../../core/accessorSupport/decorators ./ClassificationDefinition".split(" "),
function(D,b,g,q,e,r){var l=new q.default({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),f=new q.default({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});return function(c){function b(){var e=null!==c&&c.apply(this,arguments)||this;e.breakCount=null;e.classificationField=null;e.classificationMethod=
null;e.normalizationField=null;e.normalizationType=null;e.type="class-breaks-definition";return e}g.__extends(b,c);Object.defineProperty(b.prototype,"standardDeviationInterval",{set:function(c){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",c)},enumerable:!1,configurable:!0});g.__decorate([e.property({json:{write:!0}})],b.prototype,"breakCount",void 0);g.__decorate([e.property({json:{write:!0}})],b.prototype,"classificationField",void 0);g.__decorate([e.property({type:String,
json:{read:l.read,write:l.write}})],b.prototype,"classificationMethod",void 0);g.__decorate([e.property({json:{write:!0}})],b.prototype,"normalizationField",void 0);g.__decorate([e.property({json:{read:f.read,write:f.write}})],b.prototype,"normalizationType",void 0);g.__decorate([e.property({value:null,json:{write:!0}})],b.prototype,"standardDeviationInterval",null);g.__decorate([e.property()],b.prototype,"type",void 0);return b=g.__decorate([e.subclass("esri.tasks.support.ClassBreaksDefinition")],
b)}(r)})},"esri/tasks/support/ClassificationDefinition":function(){define("require exports tslib ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators ../../symbols/Symbol ./colorRamps".split(" "),function(D,b,g,q,e,r,l,f){var c=new q.default({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});return function(e){function b(){var a=null!==e&&e.apply(this,arguments)||this;a.baseSymbol=null;a.colorRamp=null;a.type=null;return a}g.__extends(b,
e);g.__decorate([r.property({type:l,json:{write:!0}})],b.prototype,"baseSymbol",void 0);g.__decorate([r.property({types:f.types,json:{read:{reader:f.fromJSON},write:!0}})],b.prototype,"colorRamp",void 0);g.__decorate([r.property({json:{read:c.read,write:c.write}})],b.prototype,"type",void 0);return b=g.__decorate([r.subclass("esri.tasks.support.ClassificationDefinition")],b)}(e.JSONSupport)})},"esri/tasks/support/generateRendererUtils":function(){define(["require","exports"],function(D,b){function g(a){var d=
a.definition,b=d.classificationMethod,p=d.breakCount,u=d.normalizationType,l=[],h=a.values;if(0===h.length)return[];var h=h.sort(function(a,c){return a-c}),v=h[0];a=h[h.length-1];if("equal-interval"===b)if(h.length>=p){h=(a-v)/p;b=v;for(d=1;d<p;d++){var t=Number((v+d*h).toFixed(6));l.push({minValue:b,maxValue:t,label:q(b,t,u)});b=t}l.push({minValue:b,maxValue:a,label:q(b,a,u)})}else h.forEach(function(a){l.push({minValue:a,maxValue:a,label:q(a,a,u)})});else if("natural-breaks"===b){for(var h=e(h),
k=r(h.uniqueValues,h.valueFrequency,p),b=v,d=1;d<p;d++)h.uniqueValues.length>d&&(t=Number(h.uniqueValues[k[d]].toFixed(6)),l.push({minValue:b,maxValue:t,label:q(b,t,u)}),b=t);l.push({minValue:b,maxValue:a,label:q(b,a,u)})}else if("quantile"===b)if(h.length>=p&&v!==a){b=v;v=Math.ceil(h.length/p);t=0;for(d=1;d<p;d++)k=v+t-1,k>h.length&&(k=h.length-1),0>k&&(k=0),l.push({minValue:b,maxValue:h[k],label:q(b,h[k],u)}),b=h[k],t+=v,v=Math.ceil((h.length-t)/(p-d));l.push({minValue:b,maxValue:a,label:q(b,a,
u)})}else for(b=-1,d=0;d<h.length;d++)t=h[d],t!==b&&(b=t,l.push({minValue:b,maxValue:t,label:q(b,t,u)}),b=t);else if("standard-deviation"===b)if(k=c(h),b=m(h,k),0===b)l.push({minValue:h[0],maxValue:h[0],label:q(h[0],h[0],u)});else{for(var h=f(v,a,p,k,b),h=h*b,B=0,b=v,d=p;1<=d;d--)v=Number((k-(d-.5)*h).toFixed(6)),l.push({minValue:b,maxValue:v,label:q(b,v,u)}),b=v,B++;t=Number((k+.5*h).toFixed(6));l.push({minValue:b,maxValue:t,label:q(b,t,u)});b=t;B++;for(d=1;d<=p;d++)t=B===2*p?a:Number((k+(d+.5)*
h).toFixed(6)),l.push({minValue:b,maxValue:t,label:q(b,t,u)}),b=t,B++}return l}function q(a,c,e){var d=null;return d=a===c?e&&"percent-of-total"===e?a+"%":a.toString():e&&"percent-of-total"===e?a+"% - "+c+"%":a+" - "+c}function e(a){for(var c=[],e=[],b=Number.MIN_VALUE,u=1,f=-1,h=0;h<a.length;h++){var v=a[h];v===b?(u++,e[f]=u):null!==v&&(c.push(v),b=v,u=1,e.push(u),f++)}return{uniqueValues:c,valueFrequency:e}}function r(a,c,e){var d=a.length,b=[];e>d&&(e=d);for(var f=0;f<e;f++)b.push(Math.round(f*
d/e-1));b.push(d-1);for(var f=l(b,a,c,e),d=f.mean,f=f.sdcm,h=e,v=0,t=0,k=0,B=0,y=!0,w=0;2>w&&y;w++){0===w&&(y=!1);for(var n=0;n<h-1;n++)for(;b[n+1]+1!==b[n+2];)if(b[n+1]+=1,v=A(n,b,a,c),k=v.sbMean,v=v.sbSdcm,t=A(n+1,b,a,c),B=t.sbMean,t=t.sbSdcm,v+t<f[n]+f[n+1])f[n]=v,f[n+1]=t,d[n]=k,d[n+1]=B,y=!0;else{--b[n+1];break}for(n=h-1;0<n;n--)for(;b[n]!==b[n-1]+1;)if(--b[n],v=A(n-1,b,a,c),k=v.sbMean,v=v.sbSdcm,t=A(n,b,a,c),B=t.sbMean,t=t.sbSdcm,v+t<f[n-1]+f[n])f[n-1]=v,f[n]=t,d[n-1]=k,d[n]=B,y=!0;else{b[n]+=
1;break}}y&&(f=l(b,a,c,e));return b}function l(a,c,e,b){for(var d=[],f=[],h=[],v=0,t=[],k=[],p=0;p<b;p++){var y=A(p,a,c,e);t.push(y.sbMean);k.push(y.sbSdcm);v+=k[p]}for(var w=v,n=!0;n||v<w;){n=!1;d=[];for(p=0;p<b;p++)d.push(a[p]);for(p=0;p<b;p++)for(h=a[p]+1;h<=a[p+1];h++)if(f=c[h],0<p&&h!==a[p+1]&&Math.abs(f-t[p])>Math.abs(f-t[p-1]))a[p]=h;else if(p<b-1&&a[p]!==h-1&&Math.abs(f-t[p])>Math.abs(f-t[p+1])){a[p+1]=h-1;break}w=v;v=0;f=[];h=[];for(p=0;p<b;p++)f.push(t[p]),h.push(k[p]),y=A(p,a,c,e),t[p]=
y.sbMean,k[p]=y.sbSdcm,v+=k[p]}if(v>w){for(p=0;p<b;p++)a[p]=d[p],t[p]=f[p],k[p]=h[p];v=w}return{mean:t,sdcm:k}}function f(a,c,e,b,f){a=Math.max(b-a,c-b)/f/e;return 1<=a?1:.5<=a?.5:.25}function c(a){for(var c=0,e=0;e<a.length;e++)c+=a[e];return c/=a.length}function m(a,c){for(var d=0,e=0;e<a.length;e++)var b=a[e],d=d+(b-c)*(b-c);d/=a.length;return Math.sqrt(d)}function A(a,c,e,b){for(var d=0,f=0,h=c[a]+1;h<=c[a+1];h++)var v=b[h],d=d+e[h]*v,f=f+v;0>=f&&console.log("Exception in Natural Breaks calculation");
d/=f;f=0;for(h=c[a]+1;h<=c[a+1];h++)f+=b[h]*Math.pow(e[h]-d,2);return{sbMean:d,sbSdcm:f}}Object.defineProperty(b,"__esModule",{value:!0});b.createGenerateRendererClassBreaks=b.createGenerateRendererUniqueValues=void 0;b.createGenerateRendererUniqueValues=function(a){a=e(a);for(var c=[],b=a.uniqueValues.length,f=0;f<b;f++){var u=a.uniqueValues[f];c.push({value:u,count:a.valueFrequency[f],label:u.toString()})}return{uniqueValues:c}};b.createGenerateRendererClassBreaks=function(a){var c=a.normalizationTotal;
return{classBreaks:g(a),normalizationTotal:c}}})},"esri/renderers/support/RasterSymbolizer":function(){define("require exports tslib ../../rasterRenderers ../../core/colorUtils ../../core/JSONSupport ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators ../../layers/support/imageryRendererUtils ../../layers/support/RasterInfo ../../layers/support/rasterFunctions/pixelUtils ../../layers/support/rasterFunctions/surfaceUtils ../support/colorRampUtils ./rasterRendererHelper".split(" "),
function(D,b,g,q,e,r,l,f,c,m,A,a,d,x,p){var u=l.getLogger("esri.renderers.support.RasterSymbolizer");return function(b){function h(a){return b.call(this,a)||this}g.__extends(h,b);h.prototype.readRenderer=function(a,c,d){return q.read(a,d)};h.prototype.bind=function(){if(!this.renderer)return!1;this.lookup={rendererJson:{}};var a;switch(this.renderer.type){case "unique-value":a=this._updateUVRenderer(this.renderer);break;case "raster-colormap":a=this._updateColormapRenderer(this.renderer);break;case "raster-stretch":a=
this._updateStretchRenderer(this.renderer);break;case "class-breaks":a=this._updateClassBreaksRenderer(this.renderer);break;case "raster-shaded-relief":a=this._updateShadedReliefRenderer(this.renderer)}return a};h.prototype.symbolize=function(c){var d=c&&c.pixelBlock;if(!this.isValidPixelBlock(d))return d;if(c.simpleStretchParams&&"raster-stretch"===this.renderer.type)return this.simpleStretch(d,c.simpleStretchParams);try{3<d.pixels.length&&(d=a.extractBands(d,[0,1,2]));var e=void 0;switch(this.renderer.type){case "unique-value":case "raster-colormap":e=
this._symbolize_colormap(d);break;case "class-breaks":e=this._symbolize_classBreaks(d);break;case "raster-stretch":e=this._symbolize_stretch(d,c.bandIds);break;case "raster-shaded-relief":var b=c.extent,e=this._symbolize_shadedRelief(d,{isGCS:b.spatialReference.isGeographic,resolution:{x:(b.xmax-b.xmin)/d.width,y:(b.ymax-b.ymin)/d.height}})}return e}catch(y){return u.error("symbolize",y.message),d}};h.prototype.simpleStretch=function(c,d){if(!this.isValidPixelBlock(c))return c;try{return 3<c.pixels.length&&
(c=a.extractBands(c,[0,1,2])),a.stretch(c,d)}catch(k){return u.error("symbolize",k.message),c}};h.prototype.generateWebGLParameters=function(a){if(-1<["unique-value","raster-colormap","class-breaks"].indexOf(this.renderer.type)){var c=this.lookup.colormapLut;return{colormap:c.indexedColormap,colormapOffset:c.offset,type:"lut"}}var c=a.pixelBlock,d=a.isGCS,e=a.resolution;a=a.bandIds;return"raster-stretch"===this.renderer.type?this.generateStretchWebGLParams(c,this.renderer,a):"raster-shaded-relief"===
this.renderer.type?this.generateShadedReliefWebGLParams(this.renderer,d,e):null};h.prototype._isLUTChanged=function(a){if(!this.lookup||!this.lookup.rendererJson)return!0;if("colorRamp"in this.renderer){var c=this.renderer.colorRamp;if(a)return JSON.stringify(c.toJSON())!==JSON.stringify(this.lookup.rendererJson.colorRamp);a=g.__assign({},this.renderer.toJSON());c=g.__assign({},this.lookup.rendererJson);a.colorRamp=null;c.colorRamp=null}return JSON.stringify(this.renderer.toJSON())!==JSON.stringify(this.lookup.rendererJson)};
h.prototype._symbolize_colormap=function(c){return this._isLUTChanged()&&!this.bind()?c:a.colorize(c,this.lookup.colormapLut)};h.prototype._symbolize_classBreaks=function(c){var d=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType);return this._isLUTChanged()&&!this.bind()?c:d?a.colorize(c,this.lookup.colormapLut):a.remapColor(c,this.lookup.remapLut)};h.prototype._symbolize_stretch=function(c,d){var e=this.rasterInfo,b=e.pixelType,h=e.bandCount,e=this.renderer,w=-1<["u8","u16","s8","s16"].indexOf(b),
n,t=e.gamma,v=e.useGamma;if(w){if(e.dynamicRangeAdjustment)w=this.getStretchCutoff(e,c,d),n=a.createStretchLUT(g.__assign(g.__assign({pixelType:b},w),{gamma:v?t:null}));else{if(this._isLUTChanged()&&(b=this.bind(),!b))return c;n=this.lookup?this.lookup.stretchLut:null}if(!n)return c;1<h&&(null===d||void 0===d?void 0:d.length)===c.pixels.length&&(null===n||void 0===n?void 0:n.lut.length)===h&&(n={lut:d.map(function(a){return n.lut[a]}),offset:n.offset});d=a.lookupPixels(c,n)}else w=this.getStretchCutoff(e,
c,d),d=a.stretch(c,g.__assign(g.__assign({},w),{gamma:v?t:null}));if(e.colorRamp){if(this._isLUTChanged(!0)&&(b=this.bind(),!b))return c;d=a.colorize(d,this.lookup.colormapLut)}return d};h.prototype._symbolize_shadedRelief=function(a,c){var e,b,h=this.renderer;c=g.__assign(g.__assign({},h.toJSON()),c);c=d.hillshade(a,c);if(!h.colorRamp||this._isLUTChanged(!0)&&!this.bind())return c;h=this.lookup?this.lookup.hsvMap:null;if(!h)return c;var w=null!==(b=null===(e=f.unwrap(this.rasterInfo.statistics))||
void 0===e?void 0:e[0])&&void 0!==b?b:{min:0,max:8E3};d.tintHillshade(c,a,h,w);return c};h.prototype._updateUVRenderer=function(c){var d=this.rasterInfo,e=d.bandCount,b=d.attributeTable,h=d.statistics,w=c.field;if(!w)return!1;d=-1<["u8","s8"].indexOf(d.pixelType)&&h&&null!=h[0].min&&null!=h[0].max;if(!(p.isUVRendererSupported(this.rasterInfo,w)||1===e&&d))return!1;var n=[];if(b){var f=b.fields.filter(function(a){return"value"===a.name.toLowerCase()})[0];if(!f)return!1;b.features.forEach(function(a){var d=
c.uniqueValueInfos.filter(function(c){return String(c.value)===String(a.attributes[w])})[0];(d=d&&d.symbol&&d.symbol.color)&&n.push([a.attributes[f.name],d.r,d.g,d.b,1<d.a?d.a:Math.round(255*d.a)])})}else{if("value"!==w.toLowerCase())return!1;c.uniqueValueInfos.forEach(function(a){var c=a&&a.symbol&&a.symbol.color;c&&n.push([parseInt(""+a.value,10),c.r,c.g,c.b,1<c.a?c.a:Math.round(255*c.a)])})}if(0===n.length)return!1;e=a.createColormapLUT({colormap:n});this.lookup={rendererJson:c.toJSON(),colormapLut:e};
return this.canRenderInWebGL=!0};h.prototype._updateColormapRenderer=function(c){var d=c.extractColormap();if(!d||0===d.length)return!1;d=a.createColormapLUT({colormap:d});this.lookup={rendererJson:c.toJSON(),colormapLut:d};return this.canRenderInWebGL=!0};h.prototype._updateShadedReliefRenderer=function(c){if(!p.isShadedReliefRendererSupported(this.rasterInfo))return!1;if(c.colorRamp){for(var d=x.convertColorRampToColormap(c.colorRamp,256,!0),d=a.createColormapLUT({colormap:d}),b=[],h=d.indexedColormap,
y=0;y<h.length;y+=4){var w=e.toHSV({r:h[y],g:h[y+1],b:h[y+2]});b.push([w.h/60,w.s/100,255*w.v/100])}this.lookup={rendererJson:c.toJSON(),colormapLut:d,hsvMap:b}}else this.lookup=null;return this.canRenderInWebGL=!0};h.prototype._updateClassBreaksRenderer=function(c){var d=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType),e=c.classBreakInfos;if(!e||0===e.length)return!1;var b=e.sort(function(a,c){return a.minValue-c.minValue}),e=b[b.length-1];if(!d)return d=b.map(function(a){return{value:a.minValue,
mappedColor:[a.symbol.color.r,a.symbol.color.g,a.symbol.color.b,1<a.symbol.color.a?a.symbol.color.a:Math.round(255*a.symbol.color.a)]}}),d.push({value:e.maxValue,mappedColor:[e.symbol.color.g,e.symbol.color.b,1<e.symbol.color.a?e.symbol.color.a:Math.round(255*e.symbol.color.a)]}),this.lookup={rendererJson:c.toJSON(),remapLut:d},this.canRenderInWebGL=!1,!0;var h=[],w,n=0;b.forEach(function(a){w=Math.ceil(a.minValue);n=Math.floor(a.maxValue);for(var c=w;c<n;c++)h.push([c,a.symbol.color.r,a.symbol.color.g,
a.symbol.color.b,1<a.symbol.color.a?a.symbol.color.a:Math.round(255*a.symbol.color.a)])});h.push([e.maxValue,e.symbol.color.r,e.symbol.color.g,e.symbol.color.b,1<e.symbol.color.a?e.symbol.color.a:Math.round(255*e.symbol.color.a)]);d=a.createColormapLUT({colormap:h,fillUnspecified:!1});this.lookup={rendererJson:c.toJSON(),colormapLut:d};return this.canRenderInWebGL=!0};h.prototype._updateStretchRenderer=function(c){if(!(c.statistics||this.rasterInfo.statistics||c.dynamicRangeAdjustment))return!1;var d=
c.histograms||this.rasterInfo.histograms;if(!c.dynamicRangeAdjustment&&"percent-clip"===c.stretchType&&!d)return!1;var e=c.gamma,b=c.useGamma,d=c.colorRamp,h=this.rasterInfo.pixelType;if(!c.dynamicRangeAdjustment&&-1<["u8","u16","s8","s16"].indexOf(h)){var w=this.getStretchCutoff(c),e=a.createStretchLUT(g.__assign(g.__assign({pixelType:h},w),{gamma:b?e:null}));this.lookup={rendererJson:c.toJSON(),stretchLut:e}}d&&(d=x.convertColorRampToColormap(d,256,!0),this.lookup||(this.lookup={rendererJson:c.toJSON()}),
this.lookup.colormapLut=a.createColormapLUT({colormap:d}),this.lookup.rendererJson=c.toJSON());return this.canRenderInWebGL=!0};h.prototype.getStretchCutoff=function(c,d,e){var b,h,k,n=c.stretchType;c.dynamicRangeAdjustment?"min-max"===n&&d.statistics?h=d.statistics.map(function(a){return[a.minValue,a.maxValue,0,0]}):(k=a.estimateStatisticsHistograms(d),h=k.statistics,k=k.histograms):(h=0<(null===(b=c.statistics)||void 0===b?void 0:b.length)?c.statistics:f.unwrap(this.rasterInfo.statistics),k=c.histograms||
f.unwrap(this.rasterInfo.histograms));var t=h||k?(h||k).length:this.rasterInfo.bandCount;b=[];d=[];var p,v,u,l,g;h&&!Array.isArray(h[0])&&(h=h.map(function(a){return[a.min,a.max,a.avg,a.stddev]}));switch(n){case "none":k=m.pixelTypeRanges[this.rasterInfo.pixelType]||m.pixelTypeRanges.f32;for(n=0;n<t;n++)b[n]=k[0],d[n]=k[1];break;case "min-max":for(n=0;n<t;n++)b[n]=h[n][0],d[n]=h[n][1];break;case "standard-deviation":for(n=0;n<t;n++)b[n]=h[n][2]-c.numberOfStandardDeviations*h[n][3],d[n]=h[n][2]+c.numberOfStandardDeviations*
h[n][3],b[n]<h[n][0]&&(b[n]=h[n][0]),d[n]>h[n][1]&&(d[n]=h[n][1]);break;case "percent-clip":for(n=0;n<k.length;n++){h=k[n];u=new Uint32Array(h.size);v=h.counts;p=0;t=(h.max-h.min)/h.size;l=-.5===h.min&&1===t?.5:0;for(g=0;g<h.size;g++)p+=v[g],u[g]=p;v=c.minPercent*p/100;for(g=0;g<h.size;g++)if(u[g]>v){b[n]=h.min+t*(g+l);break}v=(1-c.maxPercent/100)*p;for(g=h.size-2;0<=g;g--)if(u[g]<v){d[n]=h.min+t*(g+2-l);break}}break;default:for(n=0;n<t;n++)b[n]=h[n][0],d[n]=h[n][1]}return this.getSelectedBandCutoffs({minCutOff:b,
maxCutOff:d,outMax:c.outputMax||255,outMin:c.outputMin||0},e)};h.prototype.getSelectedBandCutoffs=function(a,c){if(null==c||0===c.length)return a;var d=Math.max.apply(null,c),e=a.minCutOff,b=a.maxCutOff,h=a.outMin,n=a.outMax;return e.length===c.length||e.length<=d?a:{minCutOff:c.map(function(a){return e[a]}),maxCutOff:c.map(function(a){return b[a]}),outMin:h,outMax:n}};h.prototype.generateStretchWebGLParams=function(a,c,d){var e=null,b=null,h=this.lookup&&this.lookup.colormapLut;c.colorRamp&&h&&(e=
h.indexedColormap,b=h.offset);var h=c.gamma,n=!!(c.useGamma&&h&&h.some(function(a){return 1!==a})),k=this.getStretchCutoff(c,a,d);c=k.minCutOff;var f=k.maxCutOff,t=k.outMin,k=k.outMax;a&&a.pixels&&2===a.pixels.length&&(a=a.clone(),a.statistics=[a.statistics[0]],a.pixels=[a.pixels[0]]);a=Math.min(3,d&&d.length||a&&a.getPlaneCount()||this.rasterInfo.bandCount);d=new Float32Array(a);var p=e||n?1:255,u;for(u=0;u<a;u++)d[u]=(k-t)/(f[u]-c[u])/p;var v=new Float32Array(a);if(n)for(u=0;u<a;u++)v[u]=1<h[u]?
2<h[u]?6.5+Math.pow(h[u]-2,2.5):6.5+100*Math.pow(2-h[u],4):1;return{bandCount:a,outMin:t/p,outMax:k/p,minCutOff:c,maxCutOff:f,factor:d,useGamma:n,gamma:n?h:[1,1,1],gammaCorrection:n?v:[1,1,1],colormap:e,colormapOffset:b,type:"stretch"}};h.prototype.generateShadedReliefWebGLParams=function(a,c,e){var b,h,k,n=null,t=null,p=this.lookup&&this.lookup.colormapLut;a.colorRamp&&p&&(n=p.indexedColormap,t=p.offset);c=g.__assign(g.__assign({},a.toJSON()),{isGCS:c,resolution:e});c=d.calculateHillshadeParams(c);
e=null===(b=f.unwrap(this.rasterInfo.statistics))||void 0===b?void 0:b[0];return g.__assign(g.__assign({},c),{minValue:null!==(h=e.min)&&void 0!==h?h:0,maxValue:null!==(k=e.max)&&void 0!==k?k:8E3,hillshadeType:"traditional"===a.hillshadeType?0:1,type:"hillshade",colormap:n,colormapOffset:t})};h.prototype.isValidPixelBlock=function(a){return!!(a&&a.pixels&&0<a.pixels.length&&0!==a.validPixelCount)};g.__decorate([c.property({types:q.rasterRendererTypes,json:{write:!0}})],h.prototype,"renderer",void 0);
g.__decorate([c.reader("renderer")],h.prototype,"readRenderer",null);g.__decorate([c.property({type:A,json:{write:!0}})],h.prototype,"rasterInfo",void 0);g.__decorate([c.property({json:{write:!0}})],h.prototype,"lookup",void 0);g.__decorate([c.property({})],h.prototype,"canRenderInWebGL",void 0);return h=g.__decorate([c.subclass("esri.renderers.support.RasterSymbolizer")],h)}(r.JSONSupport)})},"esri/layers/support/imageryRendererUtils":function(){define("require exports ../../core/arrayUtils ../../core/lang ../../core/SetUtils ./RasterFunction ../../renderers/support/colorRampUtils ../../renderers/support/stretchRendererUtils ../../renderers/visualVariables/SizeVariable".split(" "),
function(D,b,g,q,e,r,l,f,c){function m(a){var c=a.Raster;return c&&"esri.layers.support.RasterFunction"===c.declaredClass?m(c.functionArguments):a}function A(a,d){var e=new r;e.functionName="VectorFieldRenderer";var b=d.bandProperties;d="vector-uv"===d.dataType?!0:!1;var h,n;b&&2===b.length&&(h=b.map(function(a){return a.BandName.toLowerCase()}).indexOf("magnitude"),n=b.map(function(a){return a.BandName.toLowerCase()}).indexOf("direction"));if(-1===h||null===h)h=0,n=1;var b="arithmetic"===a.rotationType?
1:2,k="flow-from"===a.flowRepresentation?0:1,f=a.visualVariables?a.visualVariables.filter(function(a){return"Magnitude"===a.field})[0]:new c;a={magnitudeBandID:h,directionBandID:n,isUVComponents:d,referenceSystem:b,massFlowAngleRepresentation:k,symbolTileSize:50,symbolTileSizeUnits:100,calculationMethod:"Vector Average",symbologyName:z[a.style.toLowerCase()],minimumMagnitude:f.minDataValue,maximumMagnitude:f.maxDataValue,minimumSymbolSize:f.minSize,maximumSymbolSize:f.maxSize};e.functionArguments=
a;return e}function a(a,c){var e=[],b=[],h=[],n=[],k=c.pixelType,f=(c=c.rasterAttributeTable)&&c.features,p=x(c);if(f&&Array.isArray(f)&&a.classBreakInfos)return a.classBreakInfos.forEach(function(c,d){var e=c.symbol.color,b;e.a&&f.forEach(function(h){b=h.attributes[a.field];(b>=c.minValue&&b<c.maxValue||d===a.classBreakInfos.length-1&&b>=c.minValue)&&n.push([h.attributes[p],e.r,e.g,e.b])})}),k=k?d(n,k):n,c=new r,c.functionName="Colormap",c.functionArguments={},c.functionArguments.Colormap=k,c.variableName=
"Raster",c;a.classBreakInfos.forEach(function(a,c){var d=a.symbol&&a.symbol.color;d.a?(0===c?e.push(a.minValue,a.maxValue+1E-6):e.push(a.minValue+1E-6,a.maxValue+1E-6),b.push(c),n.push([c,d.r,d.g,d.b])):h.push(a.minValue,a.maxValue)});k=k?d(n,k):n;c=new r;c.functionName="Remap";c.functionArguments={InputRanges:e,OutputValues:b,NoDataRanges:h};c.variableName="Raster";var t=new r;t.functionName="Colormap";t.functionArguments={Colormap:k,Raster:c};return t}function d(a,c){(c=b.pixelTypeRanges[String(c).toLowerCase()])&&
a.push([Math.floor(c[0]-1),0,0,0],[Math.ceil(c[1]+1),0,0,0]);return a}function x(a){if(a)return(a=(a=a.fields)&&g.find(a,function(a){return a&&a.name&&"value"===a.name.toLowerCase()}))&&a.name}function p(a,c){var e=[],b=c.pixelType,h=(c=c.rasterAttributeTable)&&c.features,n=x(c),k=!1;a.uniqueValueInfos&&a.uniqueValueInfos.forEach(function(c){var d=c.symbol.color;d.a&&(a.field!==n&&h?h&&h.forEach(function(b){String(b.attributes[a.field])===String(c.value)&&e.push([b.attributes[n],d.r,d.g,d.b])}):isNaN(+c.value)?
k=!0:e.push([+c.value,d.r,d.g,d.b]))});if(k)return null;b=b&&0<e.length?d(e,b):e;c=new r;c.functionName="Colormap";c.functionArguments={};c.functionArguments.Colormap=b;c.variableName="Raster";return c}function u(a){var c=[];a.forEach(function(a){Array.isArray(a)?c.push(a):null!=a.min&&null!=a.max&&c.push([a.min,a.max,a.avg||0,a.stddev||0])});return c}Object.defineProperty(b,"__esModule",{value:!0});b.convertRendererToRenderingRule=b.combineRenderingRules=b.isSupportedRendererType=b.pixelTypeRanges=
void 0;b.pixelTypeRanges={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-3.4*1E39,3.4*1E39],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]};var z={simple_scalar:"Simple Scalar",wind_speed:"Wind Barb",single_arrow:"Single Arrow",beaufort_kn:"Beaufort Wind (Knots)",beaufort_m:"Beaufort Wind (MetersPerSecond)",ocean_current_m:"Ocean Current (MetersPerSecond)",ocean_current_kn:"Ocean Current (Knots)"},h=e.SetFromValues(["raster-stretch",
"unique-value","class-breaks","raster-shaded-relief","vector-field"]);b.isSupportedRendererType=function(a){return h.has(a.type)};b.combineRenderingRules=function(a,c){if(!a||!c)return q.clone(a||c);a=q.clone(a);"none"!==c.functionName.toLowerCase()&&(m(a.functionArguments).Raster=c);return a};b.convertRendererToRenderingRule=function(c,e){e=e||{};switch(c.type){case "raster-stretch":var b=new r;b.functionName="Stretch";var h=v[f.stretchTypeJSONDict.toJSON(c.stretchType)],k=u(c.statistics),k={StretchType:h,
Statistics:k,DRA:c.dynamicRangeAdjustment,UseGamma:c.useGamma,Gamma:c.gamma,ComputeGamma:c.computeGamma};null!=c.outputMin&&(k.Min=c.outputMin);null!=c.outputMax&&(k.Max=c.outputMax);h===v.standardDeviation?(k.NumberOfStandardDeviations=c.numberOfStandardDeviations,b.outputPixelType="u8"):h===v.percentClip?(k.MinPercent=c.minPercent,k.MaxPercent=c.maxPercent,b.outputPixelType="u8"):h===v.minMax?b.outputPixelType="u8":h===v.sigmoid&&(k.SigmoidStrengthLevel=c.sigmoidStrengthLevel);b.functionArguments=
k;b.variableName="Raster";if(c.colorRamp){var h=c.colorRamp,k=new r,n=l.getColorRampName(h);k.functionArguments=n?{colorRamp:n}:!e.convertColorRampToColormap||"algorithmic"!==h.type&&"multipart"!==h.type?{colorRamp:c.colorRamp.toJSON()}:{Colormap:l.convertColorRampToColormap(h,256)};k.variableName="Raster";k.functionName="Colormap";k.functionArguments.Raster=b;c=k}else c=b;return c;case "class-breaks":return a(c,e);case "unique-value":return p(c,e);case "raster-colormap":return(c=c.extractColormap())&&
0!==c.length?(c=(e=e.pixelType)?d(c,e):c,e=new r,e.functionName="Colormap",e.functionArguments={},e.functionArguments.Colormap=c,c=e):c=void 0,c;case "vector-field":return A(c,e);case "raster-shaded-relief":return"elevation"!==e.dataType?c=new r:(e=new r,e.functionName="Hillshade",b="traditional"===c.hillshadeType?0:1,h="none"===c.scalingType?1:3,k={HillshadeType:b,SlopeType:h,ZFactor:c.zFactor},0===b&&(k.Azimuth=c.azimuth,k.Altitude=c.altitude),3===h&&(k.PSPower=c.pixelSizePower,k.PSZFactor=c.pixelSizeFactor),
e.functionArguments=k,e.variableName="Raster",c.colorRamp&&(e.functionName="ShadedRelief",k.Colormap=l.convertColorRampToColormap(c.colorRamp,256)),c=e),c}};var v={none:0,standardDeviation:3,histogramEqualization:4,minMax:5,percentClip:6,sigmoid:9}})},"esri/layers/support/RasterFunction":function(){define("require exports tslib ../../core/JSONSupport ../../core/lang ../../core/SetUtils ../../core/accessorSupport/decorators".split(" "),function(D,b,g,q,e,r,l){var f=r.SetFromValues(["Raster","Raster2",
"DEM","FillRaster"]),c=r.SetFromValues(["Rasters"]),m=function(a){return a&&a.rasterFunction?d.fromJSON(a):a},A=function(a){return a&&a instanceof d?a.toJSON():a},a;(function(a){a[a.MOSAIC=0]="MOSAIC";a[a.GROUP=1]="GROUP";a[a.ITEM=2]="ITEM"})(a||(a={}));var d=function(d){function b(a){a=d.call(this,a)||this;a.functionArguments=null;a.functionName=null;a.outputPixelType="unknown";a.variableName=null;a.description=null;a.functionDefinition=null;a.thumbnail=null;return a}g.__extends(b,d);u=b;b.prototype.readFunctionArguments=
function(a,d){a=d.arguments||d.rasterFunctionArguments;if(null==a)a=null;else{d={};for(var e=0,b=Object.keys(a);e<b.length;e++){var h=b[e];f.has(h)?d[h]=m(a[h]):c.has(h)&&Array.isArray(a[h])?d[h]=a[h].map(m):d[h]=a[h]}a=d}return a};b.prototype.writeFunctionArguments=function(a,d,e){for(var b={},h=0,p=Object.keys(a);h<p.length;h++){var u=p[h];f.has(u)?b[u]=A(a[u]):c.has(u)&&Array.isArray(a[u])?b[u]=a[u].map(A):b[u]=A(a[u])}this.functionDefinition?d.arguments=b:d[e]=b};b.prototype.readFunctionName=
function(a,c){a=c.rasterFunctionInfos;var d=c.name;return d?d:a&&a.length&&"None"!==a[0].name?a[0].name:c.rasterFunction};b.prototype.writeFunctionName=function(a,c,d){this.functionDefinition?c.name=a:c[d]=a};b.prototype.readFunctionType=function(c){return a[c]};b.prototype.writeFunctionType=function(c,d,e){d[e]=a[c]};b.prototype.clone=function(){return new u({functionName:this.functionName,functionArguments:e.clone(this.functionArguments),outputPixelType:this.outputPixelType,variableName:this.variableName,
description:this.description,functionType:this.functionType,functionDefinition:this.functionDefinition,thumbnail:this.thumbnail})};var u;g.__decorate([l.property({json:{type:Object,write:{target:"rasterFunctionArguments"}}})],b.prototype,"functionArguments",void 0);g.__decorate([l.reader("functionArguments",["rasterFunctionArguments","arguments"])],b.prototype,"readFunctionArguments",null);g.__decorate([l.writer("functionArguments")],b.prototype,"writeFunctionArguments",null);g.__decorate([l.property({json:{type:String,
write:{target:"rasterFunction"}}})],b.prototype,"functionName",void 0);g.__decorate([l.reader("functionName",["rasterFunction","rasterFunctionInfos","name"])],b.prototype,"readFunctionName",null);g.__decorate([l.writer("functionName")],b.prototype,"writeFunctionName",null);g.__decorate([l.enumeration({C128:"c128",C64:"c64",F32:"f32",F64:"f64",S16:"s16",S32:"s32",S8:"s8",U1:"u1",U16:"u16",U2:"u2",U32:"u32",U4:"u4",U8:"u8",UNKNOWN:"unknown"},{ignoreUnknown:!1}),l.property({json:{default:"unknown"}})],
b.prototype,"outputPixelType",void 0);g.__decorate([l.property({type:String,json:{read:!0,write:!0}})],b.prototype,"variableName",void 0);g.__decorate([l.property({type:String,json:{read:!0,write:!0,origins:{"web-document":{read:!1,write:!1}}}})],b.prototype,"description",void 0);g.__decorate([l.property({json:{origins:{"web-document":{read:!1,write:!1}}}})],b.prototype,"functionType",void 0);g.__decorate([l.reader("functionType")],b.prototype,"readFunctionType",null);g.__decorate([l.writer("functionType")],
b.prototype,"writeFunctionType",null);g.__decorate([l.property({type:Object,json:{read:{source:"function"},write:{target:"function"},origins:{"web-document":{read:!1,write:!1}}}})],b.prototype,"functionDefinition",void 0);g.__decorate([l.property({type:String,json:{read:!0,write:!0,origins:{"web-document":{read:!1,write:!1}}}})],b.prototype,"thumbnail",void 0);return b=u=g.__decorate([l.subclass("esri.layers.support.RasterFunction")],b)}(q.JSONSupport);return d})},"esri/layers/support/rasterFunctions/pixelUtils":function(){define(["require",
"exports","../PixelBlock"],function(D,b,g){function q(a,c){a=Math.min(Math.max(a,-100),100);c=Math.min(Math.max(c,-100),100);var d,e,b=new Uint8Array(256);for(d=0;256>d;d++)0<a&&100>a?e=(200*d-25500+510*c)/(2*(100-a))+128:0>=a&&-100<a?e=(200*d-25500+510*c)*(100+a)/2E4+128:100===a?(e=200*d-25500+256*(100-a)+510*c,e=0<e?255:0):-100===a&&(e=128),b[d]=255<e?255:0>e?0:e;return b}function e(a,c,e,b,f,l,h,v){return{xmin:f<=e*a?0:f<e*a+a?f-e*a:a,ymin:l<=b*c?0:l<b*c+c?l-b*c:c,xmax:f+h<=e*a?0:f+h<e*a+a?f+h-
e*a:a,ymax:l+v<=b*c?0:l+v<b*c+c?l+v-b*c:c}}function r(a,c,b,f){var d=a.filter(function(a){return A(a)})[0];if(null==d)return null;var p=f?f.width:c.width;f=f?f.height:c.height;var h=d.width,v=d.height,t=c.width/h;c=c.height/v;var k=b?b.x:0;b=b?b.y:0;var l=d.pixelType,y=g.getPixelArrayConstructor(l),w=d.pixels.length,d=[],n,m,q,x,r,I,M,H,E,L;for(r=0;r<w;r++){m=new y(p*f);for(I=0;I<c;I++)for(M=0;M<t;M++)if(q=a[I*t+M])for(n=q.pixels[r],L=e(h,v,M,I,k,b,p,f),H=L.ymin;H<L.ymax;H++)for(q=(I*v+H-b)*p+(M*
h-k),x=H*h,E=L.xmin;E<L.xmax;E++)m[q+E]=n[x+E];d.push(m)}var K;if(a.some(function(a){return null==a||a.mask&&0<a.mask.length}))for(K=new Uint8Array(p*f),I=0;I<c;I++)for(M=0;M<t;M++)if(y=(q=a[I*t+M])?q.mask:null,L=e(h,v,M,I,k,b,p,f),y)for(H=L.ymin;H<L.ymax;H++)for(q=(I*v+H-b)*p+(M*h-k),x=H*h,E=L.xmin;E<L.xmax;E++)K[q+E]=y[x+E];else if(q)for(H=L.ymin;H<L.ymax;H++)for(q=(I*v+H-b)*p+(M*h-k),x=H*h,E=L.xmin;E<L.xmax;E++)K[q+E]=1;else for(H=L.ymin;H<L.ymax;H++)for(q=(I*v+H-b)*p+(M*h-k),x=H*h,E=L.xmin;E<
L.xmax;E++)K[q+E]=0;a=new g({width:p,height:f,pixels:d,pixelType:l,mask:K});a.updateStatistics();return a}function l(a){if(!A(a))return null;var d=a.clone(),e=a.width,b=a.height,u=a.mask;a=a.pixels[0];for(var l=d.pixels[0],h=2;h<b-1;h++){for(var v=new Map,t=h-2;t<h+2;t++)for(var k=0;4>k;k++){var B=t*e+k;m(v,a[B],u?u[B]:1)}l[h*e]=f(v);l[h*e+1]=l[h*e+2]=l[h*e];for(t=3;t<e-1;t++)B=(h-2)*e+t+1,m(v,a[B],u?u[B]:1),B=(h-1)*e+t+1,m(v,a[B],u?u[B]:1),B=h*e+t+1,m(v,a[B],u?u[B]:1),B=(h+1)*e+t+1,m(v,a[B],u?u[B]:
1),B=(h-2)*e+t-3,c(v,a[B],u?u[B]:1),B=(h-1)*e+t-3,c(v,a[B],u?u[B]:1),B=h*e+t-3,c(v,a[B],u?u[B]:1),B=(h+1)*e+t-3,c(v,a[B],u?u[B]:1),l[h*e+t]=f(v);l[h*e+t+1]=l[h*e+t]}for(t=0;t<e;t++)l[t]=l[e+t]=l[2*e+t],l[(b-1)*e+t]=l[(b-2)*e+t];d.updateStatistics();return d}function f(a){if(0===a.size)return 0;for(var c=0,e=-1,b=0,f=a.keys(),l=f.next();!l.done;)b=a.get(l.value),b>c&&(e=l.value,c=b),l=f.next();return e}function c(a,c,e){0!==e&&(e=a.get(c),1===e?a.delete(c):a.set(c,e-1))}function m(a,c,e){0!==e&&a.set(c,
a.has(c)?a.get(c)+1:1)}Object.defineProperty(b,"__esModule",{value:!0});b.approximateTransform=b.clip=b.resampleByMajority=b.setValidBoundary=b.mosaic=b.mosaicPixelData=b.getClipBounds=b.remapColor=b.lookupPixels=b.stretch=b.createContrastBrightnessLUT=b.createStretchLUT=b.estimateStatisticsFromHistograms=b.estimateStatisticsHistograms=b.colorize=b.createColormapLUT=b.extractBands=void 0;var A=function(a){return a&&"esri.layers.support.PixelBlock"===a.declaredClass&&a.pixels&&0<a.pixels.length};b.extractBands=
function(a,c){if(!c||!A(a))return a;var d=a.pixels.length;return c&&c.some(function(a){return a>=d})||1===d&&1===c.length&&0===c[0]||d===c.length&&!c.some(function(a,c){return a!==c})?a:new g({pixelType:a.pixelType,width:a.width,height:a.height,mask:a.mask,validPixelCount:a.validPixelCount,maskIsAlpha:a.maskIsAlpha,pixels:c.map(function(c){return a.pixels[c]}),statistics:a.statistics&&c.map(function(c){return a.statistics[c]})})};b.createColormapLUT=function(a){if(a){var c=a.colormap;if(c&&0!==c.length){var c=
c.sort(function(a,c){return a[0]-c[0]}),e=0;0>c[0][0]&&(e=c[0][0]);var b=Math.max(256,c[c.length-1][0]-e+1),f=new Uint8Array(4*b),l=[],h=0,v=0,t=5===c[0].length;if(65536<b)return c.forEach(function(a){l[a[0]-e]=t?a.slice(1):a.slice(1).concat([255])}),{indexed2DColormap:l,offset:e,alphaSpecified:t};if(a.fillUnspecified)for(a=c[v],h=a[0]-e;h<b;h++)f[4*h]=a[1],f[4*h+1]=a[2],f[4*h+2]=a[3],f[4*h+3]=t?a[4]:255,h===a[0]-e&&(a=v===c.length-1?a:c[++v]);else for(h=0;h<c.length;h++)a=c[h],v=4*(a[0]-e),f[v]=
a[1],f[v+1]=a[2],f[v+2]=a[3],f[v+3]=t?a[4]:255;return{indexedColormap:f,offset:e,alphaSpecified:t}}}};b.colorize=function(a,c){if(!A(a)||!c&&(c.indexedColormap||c.indexed2DColormap))return a;var d=a.clone(),e=d.pixels,b=d.mask,f=d.width*d.height;if(1!==e.length)return a;var h=c.indexedColormap;a=c.indexed2DColormap;var v=c.offset;c=c.alphaSpecified;var t=h.length-1,k=0,e=e[0],l=new Uint8Array(e.length),y=new Uint8Array(e.length),w=new Uint8Array(e.length),n=0;if(h)if(b)for(k=0;k<f;k++)b[k]&&(n=4*
(e[k]-v),n<v||n>t?b[k]=0:(l[k]=h[n],y[k]=h[n+1],w[k]=h[n+2],b[k]=h[n+3]));else{b=new Uint8Array(f);for(k=0;k<f;k++)n=4*(e[k]-v),n<v||n>t?b[k]=0:(l[k]=h[n],y[k]=h[n+1],w[k]=h[n+2],b[k]=h[n+3]);d.mask=b}else if(b)for(k=0;k<f;k++)b[k]&&(h=a[e[k]],l[k]=h[0],y[k]=h[1],w[k]=h[2],b[k]=h[3]);else{b=new Uint8Array(f);for(k=0;k<f;k++)h=a[e[k]],l[k]=h[0],y[k]=h[1],w[k]=h[2],b[k]=h[3];d.mask=b}d.pixels=[l,y,w];d.statistics=null;d.pixelType="u8";d.maskIsAlpha=c;return d};b.estimateStatisticsHistograms=function(a){if(!A(a))return null;
a.statistics||a.updateStatistics();var c=a.pixels,e=a.mask,b=a.pixelType,f=a.statistics;a=a.width*a.height;var l=c.length,h,v,t,k,m,y=[],w=[],n,g,q;for(k=0;k<l;k++){n=new Uint32Array(256);q=c[k];if("u8"===b)if(h=-.5,v=255.5,e)for(m=0;m<a;m++)e[m]&&n[q[m]]++;else for(m=0;m<a;m++)n[q[m]]++;else{h=f[k].minValue;v=f[k].maxValue;t=(v-h)/256;g=new Uint32Array(257);if(e)for(m=0;m<a;m++)e[m]&&g[Math.floor((q[m]-h)/t)]++;else for(m=0;m<a;m++)g[Math.floor((q[m]-h)/t)]++;for(m=0;255>m;m++)n[m]=g[m];n[255]=g[255]+
g[256]}y.push({min:h,max:v,size:256,counts:n});for(m=q=g=t=0;256>m;m++)t+=n[m],g+=m*n[m];g/=t;for(m=0;256>m;m++)q+=n[m]*Math.pow(m-g,2);n=Math.sqrt(q/(t-1));t=(v-h)/256;m=(g+.5)*t+h;n*=t;w.push({min:h,max:v,avg:m,stddev:n})}return{statistics:w,histograms:y}};b.estimateStatisticsFromHistograms=function(a){for(var c=[],e=0;e<a.length;e++){for(var b=a[e],f=b.min,m=b.max,h=b.size,v=b.counts,t=b=0,k=0;k<h;k++)b+=v[k],t+=k*v[k];for(var t=t/b,l=0,k=0;k<h;k++)l+=v[k]*Math.pow(k-t,2);h=(m-f)/h;c.push({min:f,
max:m,avg:(t+.5)*h+f,stddev:Math.sqrt(l/(b-1))*h})}return c};b.createStretchLUT=function(a){var c=a.minCutOff,e=a.maxCutOff,b=a.gamma,f=a.pixelType,m=a.outMin||0,h=a.outMax||255;if(-1===["u8","u16","s8","s16"].indexOf(f))return null;var v=c.length,t,k=0;"s8"===f?k=-127:"s16"===f&&(k=-32767);var l=256;-1<["u16","s16"].indexOf(f)&&(l=65536);for(var y=[],w=h-m,f=0;f<v;f++)y[f]=e[f]-c[f];t=b&&b.length>=v;var n=[];if(t)for(f=0;f<v;f++)n[f]=1<b[f]?2<b[f]?6.5+Math.pow(b[f]-2,2.5):6.5+100*Math.pow(2-b[f],
4):1;var g,A=[],r,J,I;if(t)for(f=0;f<v;f++){I=[];for(t=0;t<l;t++)r=t+k,g=(r-c[f])/y[f],J=1,1<b[f]&&(J-=Math.pow(1/w,g*n[f])),I[t]=r<e[f]&&r>c[f]?Math.floor(J*w*Math.pow(g,1/b[f]))+m:r>=e[f]?h:m;A[f]=I}else for(f=0;f<v;f++){I=[];for(t=0;t<l;t++)r=t+k,I[t]=r<=c[f]?m:r>=e[f]?h:Math.floor((r-c[f])/y[f]*w)+m;A[f]=I}if(null!=a.contrastOffset)for(a=q(a.contrastOffset,a.brightnessOffset),f=0;f<v;f++)for(I=A[f],t=0;t<l;t++)I[t]=a[I[t]];return{lut:A,offset:k}};b.createContrastBrightnessLUT=q;b.stretch=function(a,
c){if(!A(a))return null;a=a.clone();var d=a.pixels,e=a.mask,b=c.minCutOff,f=c.maxCutOff,h=c.gamma,v=c.outMin||0;c=c.outMax||255;var t=a.width*a.height,k=d.length,m,y,w,n,l,g=c-v,q=[];for(m=0;m<k;m++)q[m]=f[m]-b[m];y=h&&h.length>=k;var r=[];if(y)for(m=0;m<k;m++)r[m]=1<h[m]?2<h[m]?6.5+Math.pow(h[m]-2,2.5):6.5+100*Math.pow(2-h[m],4):1;if(y)if(null!=e)for(y=0;y<t;y++){if(e[y])for(m=0;m<k;m++)w=d[m][y],l=(w-b[m])/q[m],n=1,1<h[m]&&(n-=Math.pow(1/g,l*r[m])),d[m][y]=w<f[m]&&w>b[m]?Math.floor(n*g*Math.pow(l,
1/h[m]))+v:w>=f[m]?c:v}else for(y=0;y<t;y++)for(m=0;m<k;m++)w=d[m][y],l=(w-b[m])/q[m],n=1,1<h[m]&&(n-=Math.pow(1/g,l*r[m])),d[m][y]=w<f[m]&&w>b[m]?Math.floor(n*g*Math.pow(l,1/h[m]))+v:w>=f[m]?c:v;else if(null!=e)for(y=0;y<t;y++){if(e[y])for(m=0;m<k;m++)w=d[m][y],d[m][y]=w<f[m]&&w>b[m]?Math.floor((w-b[m])/q[m]*g)+v:w>=f[m]?c:v}else for(y=0;y<t;y++)for(m=0;m<k;m++)w=d[m][y],d[m][y]=w<f[m]&&w>b[m]?Math.floor((w-b[m])/q[m]*g)+v:w>=f[m]?c:v;a.pixelType="u8";a.updateStatistics();return a};b.lookupPixels=
function(a,c){if(!A(a))return null;var d=a.pixels,e=a.mask,b=a.width*a.height,f=d.length,h=c.lut;c=c.offset;var m,l;h&&1===h[0].length&&(h=d.map(function(){return h}));var k=[],q,y,w;if(c)if(null==e)for(m=0;m<f;m++){q=d[m];y=h[m];w=new Uint8Array(b);for(l=0;l<b;l++)w[l]=y[q[l]-c];k.push(w)}else for(m=0;m<f;m++){q=d[m];y=h[m];w=new Uint8Array(b);for(l=0;l<b;l++)e[l]&&(w[l]=y[q[l]-c]);k.push(w)}else if(null==e)for(m=0;m<f;m++){q=d[m];y=h[m];w=new Uint8Array(b);for(l=0;l<b;l++)w[l]=y[q[l]];k.push(w)}else for(m=
0;m<f;m++){q=d[m];y=h[m];w=new Uint8Array(b);for(l=0;l<b;l++)e[l]&&(w[l]=y[q[l]]);k.push(w)}a=new g({width:a.width,height:a.height,pixels:k,mask:e,pixelType:"u8"});a.updateStatistics();return a};b.remapColor=function(a,c){if(!A(a))return null;a=a.clone();var d=a.width*a.height,e=c.length,b=Math.floor(e/2),f=c[Math.floor(b)],h=a.pixels[0],m,l,k,g,y,w,n=!1,q=new Uint8Array(d),r=new Uint8Array(d),G=new Uint8Array(d),J=a.mask,I=4===c[0].mappedColor.length;J||(J=new Uint8Array(d),J.fill(I?255:1),a.mask=
J);for(y=0;y<d;y++)if(J[y]){m=h[y];n=!1;w=b;l=f;k=0;for(g=e-1;1<g-k;){if(m===l.value){n=!0;break}m>l.value?k=w:g=w;w=Math.floor((k+g)/2);l=c[Math.floor(w)]}n||(m===c[k].value?(l=c[k],n=!0):m===c[g].value?(l=c[g],n=!0):m<c[k].value?(n=!1,l=null):m>c[k].value&&(m<c[g].value?(l=c[k],n=!0):g===e-1?(n=!1,l=null):(l=c[g],n=!0)));n?(q[y]=l.mappedColor[0],r[y]=l.mappedColor[1],G[y]=l.mappedColor[2],J[y]=l.mappedColor[3]):q[y]=r[y]=G[y]=J[y]=0}a.pixels=[q,r,G];a.mask=J;a.pixelType="u8";a.maskIsAlpha=I;return a};
b.getClipBounds=e;b.mosaicPixelData=function(a,c){if(!a||0===a.length)return null;var d=a.filter(function(a){return a.pixelBlock})[0];if(!d)return null;var e=(d.extent.xmax-d.extent.xmin)/d.pixelBlock.width,b=(d.extent.ymax-d.extent.ymin)/d.pixelBlock.height,f=.01*Math.min(e,b),h=a.sort(function(a,c){return Math.abs(a.extent.ymax-c.extent.ymax)>f?c.extent.ymax-a.extent.ymax:Math.abs(a.extent.xmin-c.extent.xmin)>f?a.extent.xmin-c.extent.xmin:0}),m=Math.min.apply(null,h.map(function(a){return a.extent.xmin})),
l=Math.min.apply(null,h.map(function(a){return a.extent.ymin})),k=Math.max.apply(null,h.map(function(a){return a.extent.xmax})),g=Math.max.apply(null,h.map(function(a){return a.extent.ymax}));a={x:Math.round((c.xmin-m)/e),y:Math.round((g-c.ymax)/b)};m={width:Math.round((k-m)/e),height:Math.round((g-l)/b)};e={width:Math.round((c.xmax-c.xmin)/e),height:Math.round((c.ymax-c.ymin)/b)};if(Math.round(m.width/d.pixelBlock.width)*Math.round(m.height/d.pixelBlock.height)!==h.length||0>a.x||0>a.y||m.width<
e.width||m.height<e.height)return null;d=h.map(function(a){return a.pixelBlock});d=r(d,m,a,e);return{extent:c,pixelBlock:d}};b.mosaic=r;b.setValidBoundary=function(a,c,e){if(!A(a))return null;var d=a.width,b=a.height,f=c.x;c=c.y;var h=e.width+f;e=e.height+c;if(0>f||0>c||h>d||e>b||0===f&&0===c&&h===d&&e===b)return a;a.mask||(a.mask=new Uint8Array(d*b));for(var m=a.mask,l=0;l<b;l++)for(var k=l*d,g=0;g<d;g++)m[k+g]=l<c||l>=e||g<f||g>=h?0:1;a.updateStatistics();return a};b.resampleByMajority=l;b.clip=
function(a,c,e){var d=c.x;c=c.y;var b=e.width,f=e.height;if(0===d&&0===c&&f===a.height&&b===a.width)return a;var h=a.width,m=Math.max(0,c),l=Math.max(0,d),k=Math.min(d+b,h),q=Math.min(c+f,a.height);if(0>k||0>q||!A(a))return null;d=Math.max(0,-d);c=Math.max(0,-c);for(var y=a.pixels,w=a.mask,n=b*f,C=y.length,f=[],r=0;r<C;r++){for(var G=y[r],J=g.createEmptyBand(a.pixelType,n),x=m;x<q;x++)for(var M=x*h,H=(x+c)*b+d,E=l;E<k;E++)J[H++]=G[M+E];f.push(J)}a=new Uint8Array(n);for(x=m;x<q;x++)for(M=x*h,H=(x+
c)*b+d,E=l;E<k;E++)a[H++]=w?w[M+E]:1;e=new g({width:e.width,height:e.height,pixels:f,mask:a});e.updateStatistics();return e};b.approximateTransform=function(a,c,e,b,f){void 0===f&&(f="nearest");if(!A(a))return null;"majority"===f&&(a=l(a));var d=a.pixels,h=a.mask,m=a.pixelType,p=a.width,k=a.height;a=g.getPixelArrayConstructor(m);var u=d.length,y=c.width,w=c.height;c=b.cols;var n=b.rows,q=Math.ceil(y/c),r=Math.ceil(w/n);b=!1;for(var G=0;G<e.length;G+=3)-1===e[G]&&-1===e[G+1]&&-1===e[G+2]&&(b=!0);for(var J,
x,M,H,E,L,K=new Float32Array(y*w),P=new Float32Array(y*w),V=0,U,R,O="majority"===f?0:.5,G=0;G<r;G++)for(var S=0;S<q;S++){J=12*(G*q+S);f=e[J];x=e[J+1];M=e[J+2];H=e[J+3];E=e[J+4];L=e[J+5];for(var N=0;N<n;N++){V=(G*n+N)*y+S*c;R=(N+.5)/n;for(var T=0;T<N;T++)U=(T+.5)/c,K[V+T]=Math.round((f*U+x*R+M)*p-O),P[V+T]=Math.round((H*U+E*R+L)*k-O)}J+=6;f=e[J];x=e[J+1];M=e[J+2];H=e[J+3];E=e[J+4];L=e[J+5];for(N=0;N<n;N++)for(V=(G*n+N)*y+S*c,R=(N+.5)/n,T=N;T<c;T++)U=(T+.5)/c,K[V+T]=Math.round((f*U+x*R+M)*p-O),P[V+
T]=Math.round((H*U+E*R+L)*k-O)}e=function(a,c){for(var d=0;d<w;d++){J=d*y;for(var e=0;e<y;e++)a[J]=0>K[J]||0>P[J]?0:c[K[J]+P[J]*p],J++}};k=[];for(G=0;G<u;G++)c=new a(y*w),e(c,d[G]),k.push(c);d=new g({width:y,height:w,pixelType:m,pixels:k});if(h)d.mask=new Uint8Array(y*w),e(d.mask,h);else if(b)for(d.mask=new Uint8Array(y*w),G=0;G<y*w;G++)d.mask[G]=0>K[G]||0>P[G]?0:1;d.updateStatistics();return d}})},"esri/layers/support/rasterFunctions/surfaceUtils":function(){define(["require","exports","../PixelBlock"],
function(D,b,g){function q(e){var b=e.altitude,f=e.azimuth,c=e.hillshadeType,m=e.pixelSizePower,g=e.pixelSizeFactor,a=e.scalingType,d=e.isGCS,q=e.resolution,p="multi-directional"===c?2*e.zFactor:e.zFactor,u=q.x,r=q.y;e=p/(8*u);var h=p/(8*r);d&&.001<p&&(e/=111E3,h/=111E3);"adjusted"===a&&(d?(e=111E3*u,h=111E3*r,e=(p+Math.pow(e,m)*g)/(8*e),h=(p+Math.pow(h,m)*g)/(8*h)):(e=(p+Math.pow(u,m)*g)/(8*u),h=(p+Math.pow(r,m)*g)/(8*r)));var v=(90-b)*Math.PI/180,b=Math.cos(v),t=(360-f+90)*Math.PI/180,f=Math.sin(v)*
Math.cos(t),v=Math.sin(v)*Math.sin(t),m=[315,270,225,360,180,0],g=[60,60,60,60,60,90],p=new Float32Array([3,5,3,2,1,4]),k=p.reduce(function(a,c){return a+c}),p=p.map(function(a){return a/k}),a="multi-directional"===c?m.length:1,d=new Float32Array(6),r=new Float32Array(6),u=new Float32Array(6);if("multi-directional"===c)for(var B=0;B<a;B++)b=g[B],f=m[B],v=(90-b)*Math.PI/180,b=Math.cos(v),t=(360-f+90)*Math.PI/180,f=Math.sin(v)*Math.cos(t),v=Math.sin(v)*Math.sin(t),d[B]=b,r[B]=f,u[B]=v;else d.fill(b),
r.fill(f),u.fill(v);return{resolution:q,factor:[e,h],sinZcosA:f,sinZsinA:v,cosZ:b,sinZcosAs:r,sinZsinAs:u,cosZs:d,weights:p,hillshadeType:["traditional","multi-directional"].indexOf(c)}}Object.defineProperty(b,"__esModule",{value:!0});b.tintHillshade=b.hillshade=b.calculateHillshadeParams=void 0;var e=function(e){return e&&"esri.layers.support.PixelBlock"===e.declaredClass&&e.pixels&&0<e.pixels.length};b.calculateHillshadeParams=q;b.hillshade=function(b,l){if(!e(b))return b;var f=b.width,c=b.height,
m=b.mask,A=new Uint8Array(f*c);m&&A.set(m);var a=q(l),d=a.factor,r=a.sinZcosA,p=a.sinZsinA,u=a.cosZ,z=a.sinZcosAs,h=a.sinZsinAs,v=a.cosZs,a=a.weights,t=d[0],d=d[1];l=l.hillshadeType;for(var k=b.pixels[0],B=new Uint8Array(f*c),y,w,n,C,F,G,J,I,M=1;M<c-1;M++)for(var H=M*f,E=1;E<f-1;E++)if(m&&!m[H+E])B[H+E]=0;else{C=8;if(m&&(C=m[H-f+E-1]+m[H-f+E]+m[H-f+E+1]+m[H+E-1]+m[H+E+1]+m[H+f+E-1]+m[H+f+E]+m[H+f+E+1],7>C)){B[H+E]=0;A[H+E]=0;continue}7===C?(y=m[H-f+E-1]?k[H-f+E-1]:k[H+E],w=m[H-f+E]?k[H-f+E]:k[H+E],
n=m[H-f+E+1]?k[H-f+E+1]:k[H+E],C=m[H+E-1]?k[H+E-1]:k[H+E],F=m[H+E+1]?k[H+E+1]:k[H+E],G=m[H+f+E-1]?k[H+f+E-1]:k[H+E],J=m[H+f+E]?k[H+f+E]:k[H+E],I=m[H+f+E+1]?k[H+f+E+1]:k[H+E]):(y=k[H-f+E-1],w=k[H-f+E],n=k[H-f+E+1],C=k[H+E-1],F=k[H+E+1],G=k[H+f+E-1],J=k[H+f+E],I=k[H+f+E+1]);C=(n+F+F+I-(y+C+C+G))*t;y=(G+J+J+I-(y+w+w+n))*d;w=Math.sqrt(1+C*C+y*y);n=0;if("traditional"===l)G=255*(u+p*y-r*C)/w,0>G&&(G=0),n=G;else for(J=h.length,I=0;I<J;I++)G=255*(v[I]+h[I]*y-z[I]*C)/w,0>G&&(G=0),n+=G*a[I];B[H+E]=n&255}for(M=
0;M<c;M++)B[M*f]=B[M*f+1],B[(M+1)*f-1]=B[(M+1)*f-2];for(M=1;M<f-1;M++)B[M]=B[M+f],B[M+(c-1)*f]=B[M+(c-2)*f];return new g({width:f,height:c,pixels:[B],mask:m?A:null,pixelType:"u8",validPixelCount:b.validPixelCount,statistics:[{minValue:0,maxValue:255}]})};b.tintHillshade=function(b,l,f,c){if(e(b)&&e(l)){var m=c.min,g=b.pixels[0],a=l.mask;l=l.pixels[0];c=255.00001/(c.max-m);for(var d=new Uint8ClampedArray(l.length),q=new Uint8ClampedArray(l.length),p=new Uint8ClampedArray(l.length),u=f.length-1,r=0;r<
l.length;r++)if(!a||0!==a[r]){var h=Math.floor((l[r]-m)*c),v=f[0>h?0:h>u?u:h],h=v[0],t=g[r],v=t*v[1],k=v*(1-Math.abs(h%2-1)),t=t-v;switch(Math.floor(h)){case 0:d[r]=v+t;q[r]=k+t;p[r]=t;break;case 1:d[r]=k+t;q[r]=v+t;p[r]=t;break;case 2:d[r]=t;q[r]=v+t;p[r]=k+t;break;case 3:d[r]=t;q[r]=k+t;p[r]=v+t;break;case 4:d[r]=k+t;q[r]=t;p[r]=v+t;break;case 5:case 6:d[r]=v+t,q[r]=t,p[r]=k+t}}b.pixels=[d,q,p];b.updateStatistics()}}})},"esri/layers/support/rasterDatasets/RasterFactory":function(){define("require exports tslib ../../../core/Error ../../../core/MapUtils ./CloudRaster ./ImageServerRaster ./MRFRaster ./TIFFRaster".split(" "),
function(D,b,g,q,e,r,l,f,c){var m=new Map;m.set("CRF",{desc:"Cloud Raster Format",constructor:r});m.set("MRF",{desc:"Meta Raster Format",constructor:f});m.set("TIFF",{desc:"GeoTIFF",constructor:c});m.set("RasterTileServer",{desc:"Raster Tile Server",constructor:l});return function(){function c(){}Object.defineProperty(c,"supportedFormats",{get:function(){var a=new Set;m.forEach(function(c,e){return a.add(e)});return a},enumerable:!1,configurable:!0});c.open=function(a){return g.__awaiter(this,void 0,
void 0,function(){var c,b,f,l,A,h,v,t,k,r,y;return g.__generator(this,function(d){switch(d.label){case 0:c=a.url;b=a.ioConfig;f=a.sourceJSON;l=a.datasetFormat;null==l&&c.lastIndexOf(".")&&(l=c.slice(c.lastIndexOf(".")+1).toUpperCase());"OVR"===l||"TIF"===l?l="TIFF":-1<c.toLowerCase().indexOf("/imageserver")&&(l="RasterTileServer");A={bandIds:null,sampling:null};h={url:c,sourceJSON:f,datasetFormat:l,ioConfig:b||A};if(!this.supportedFormats.has(l))return[3,2];v=m.get(l).constructor;t=new v(h);return[4,
t.open({signal:a.signal})];case 1:return d.sent(),[2,t];case 2:if(l)throw new q("rasterfactory:open","not a supported format "+l);k=e.keysOfMap(m);r=0;y=function(){l=k[r++];if(!l)return null;v=m.get(l).constructor;t=new v(h);return t.open({signal:a.signal}).then(function(){return t}).catch(function(){return y()})};return[2,y()]}})})};c.register=function(a,c,e){m.has(a.toUpperCase())||m.set(a.toUpperCase(),{desc:c,constructor:e})};return c}()})},"esri/layers/support/rasterDatasets/CloudRaster":function(){define("require exports tslib ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/promiseUtils ../../../core/accessorSupport/decorators ../RasterInfo ../RasterStorageInfo ../TileInfo ./BaseRaster ./DBFParser ../../../tasks/support/FeatureSet".split(" "),
function(D,b,g,q,e,r,l,f,c,m,A,a,d,x){var p=new Map;p.set("int16","esriFieldTypeSmallInteger");p.set("int32","esriFieldTypeInteger");p.set("int64","esriFieldTypeInteger");p.set("float32","esriFieldTypeSingle");p.set("float64","esriFieldTypeDouble");p.set("text","esriFieldTypeString");return function(a){function b(){var c=null!==a&&a.apply(this,arguments)||this;c.storageInfo=null;c.datasetFormat="CRF";return c}g.__extends(b,a);b.prototype.open=function(a){return g.__awaiter(this,void 0,void 0,function(){var c,
d,b,h,f;return g.__generator(this,function(k){switch(k.label){case 0:return[4,this.init()];case 1:return k.sent(),[4,this.request(this.url+"/conf.json",{signal:null===a||void 0===a?void 0:a.signal})];case 2:c=k.sent().data;if(!this._validateHeader(c))throw new e("cloudraster:open","Invalid or unsupported conf.json.");this.datasetName=this.url.slice(this.url.lastIndexOf("/")+1);d=this._parseHeader(c);b=d.storageInfo;h=d.rasterInfo;return"thematic"!==h.dataType?[3,4]:[4,this._fetchAuxiliaryInformation()];
case 3:f=k.sent(),h.attributeTable=f,k.label=4;case 4:return this._set("storageInfo",b),this._set("rasterInfo",h),this.ioConfig.retryCount=this.ioConfig.retryCount||0,[2]}})})};b.prototype.fetchRawTile=function(a,c,d,e){void 0===e&&(e={});return g.__awaiter(this,void 0,void 0,function(){var b,h,f,n,k,m,l;return g.__generator(this,function(w){switch(w.label){case 0:b=this.rasterInfo.storageInfo.maximumPyramidLevel-a;if(0>b)return[2,null];h=this._buildCacheFilePath(b,c,d,e.multidimensionalDefinition);
f=this._getIndexRecordFromBundle(c,d);return[4,this.request(h,{range:{from:0,to:this.storageInfo.headerSize-1},responseType:"array-buffer",signal:e.signal})];case 1:n=w.sent();if(!n)return[2,null];k=new Uint8Array(n.data);m=this._getTileEndAndContentType(k,f);return 0===m.recordSize?[2,null]:[4,this.request(h,{range:{from:m.position,to:m.position+m.recordSize},responseType:"array-buffer",signal:e.signal})];case 2:return(l=w.sent())?[2,this.decodePixelBlock(l.data,{width:this.rasterInfo.storageInfo.tileInfo.size[0],
height:this.rasterInfo.storageInfo.tileInfo.size[1],planes:null,pixelType:null})]:[2,null]}})})};b.prototype._validateHeader=function(a){var c="origin extent geodataXform LODInfos blockWidth blockHeight bandCount pixelType pixelSizeX pixelSizeY format packetSize".split(" ");return a&&"RasterInfo"===a.type&&!c.some(function(c){return!a[c]})};b.prototype._parseHeader=function(a){var d,e="u1 u2 u4 u8 s8 u16 s16 u32 s32 f32 f64".split(" ")[a.pixelType],b=a.bandCount,h=a.histograms,f=a.colormap,w=a.blockWidth,
n=a.blockHeight,l=a.firstPyramidLevel,p=a.maximumPyramidLevel,g=a.statistics&&a.statistics.map(function(a){return{min:a.min,max:a.max,avg:a.mean,stddev:a.standardDeviation,median:a.median,mode:a.mode}}),u=new q.SpatialReference(a.extent.spatialReference||a.geodataXform.spatialReference),r=new q.Extent({xmin:a.extent.xmin,ymin:a.extent.ymin,xmax:a.extent.xmax,ymax:a.extent.ymax,spatialReference:u}),x=new q.Point({x:a.pixelSizeX,y:a.pixelSizeY,spatialReference:u}),z=null!==(d=a.properties)&&void 0!==
d?d:{},E=a.format.toLowerCase().replace("cache/","");d=new q.Point(a.origin.x,a.origin.y,u);var L,K,P,V;if(f&&f.colors)for(L=[],K=0;K<f.colors.length;K++)P=f.colors[K],V=f.values?f.values[K]:K,L.push([V,P&255,P<<16>>>24,P<<8>>>24,P>>>24]);f=a.LODInfos;P=[];for(K=0;K<f.levels.length;K++)P.push({level:f.levels[K],resolution:f.resolutions[K],scale:96/.0254*f.resolutions[K]});f=new A({dpi:96,lods:P,format:E,origin:d,size:[w,n],spatialReference:u});E={recordSize:8,packetSize:a.packetSize,headerSize:a.packetSize*
a.packetSize*8+64};P=Math.round((r.xmax-r.xmin)/x.x);V=Math.round((r.ymax-r.ymin)/x.y);var U=[{maxCol:Math.ceil(P/w)-1,maxRow:Math.ceil(V/n)-1,minCol:0,minRow:0}],R=2;if(0<p)for(K=0;K<p;K++)U.push({maxCol:Math.ceil(P/R/w)-1,maxRow:Math.ceil(V/R/n)-1,minCol:0,minRow:0}),R*=2;a=new c({width:P,height:V,pixelType:e,bandCount:b,extent:r,spatialReference:u,pixelSize:x,keyProperties:z,statistics:g,histograms:h,multidimensionalInfo:a.mdInfo,colormap:L,storageInfo:new m({blockWidth:w,blockHeight:n,pyramidBlockWidth:w,
pyramidBlockHeight:n,origin:d,tileInfo:f,firstPyramidLevel:l,maximumPyramidLevel:p,blockBoundary:U})});return{storageInfo:E,rasterInfo:a}};b.prototype._fetchAuxiliaryInformation=function(a){return g.__awaiter(this,void 0,void 0,function(){var c,e,b,h,f,w,n,m;return g.__generator(this,function(k){switch(k.label){case 0:return c=this.request(this.url+"/conf.vat.json",{signal:a}).then(function(a){return a.data}).catch(function(){return null}),e=this.request(this.url+"/conf.vat.dbf",{responseType:"array-buffer",
signal:a}).then(function(a){return a.data}).catch(function(){return null}),[4,l.all([c,e])];case 1:return b=k.sent(),b[0]&&(f=b[0].fields,w=b[0].values,f&&w&&(f=f.map(function(a){return{type:"OID"===a.name?"esriFieldTypeOID":p.get(a.type),name:a.name,alias:a.alias||a.name}}),n=w.map(function(a){return{attributes:a}}),f&&w&&(h={fields:f,features:n}))),!h&&b[1]&&(m=d.parse(b[1]),h=m.recordSet),[2,x.fromJSON(h)]}})})};b.prototype._buildCacheFilePath=function(a,c,d,e){var b=this.storageInfo.packetSize;
d=Math.floor(d/b)*b;c="R"+this._toHexString4(Math.floor(c/b)*b)+"C"+this._toHexString4(d);b="L";b=10<=a?b+a.toString():b+("0"+a.toString());a=this.rasterInfo.multidimensionalInfo;var h=null===e||void 0===e?void 0:e[0];if(!r.isSome(a)||!h)return this.url+"/_alllayers/"+b+"/"+c+".bundle";e=a.variables.filter(function(a){return a.name===h.variableName})[0].dimensions[0].values.indexOf(h.values[0]).toString(16);a=4-e.length;for(d=0;d<a;d++)e="0"+e;return this.url+"/_alllayers/"+h.variableName+"/"+("S"+
e)+"/"+b+"/"+c+".bundle"};b.prototype._getIndexRecordFromBundle=function(a,c){var d=this.storageInfo.packetSize;a=a%d*d+c%d;if(0>a)throw"Invalid level / row / col";return a*this.storageInfo.recordSize+64};b.prototype._getTileEndAndContentType=function(a,c){a=a.subarray(c,c+8);c=0;var d;for(d=0;5>d;d++)c|=(a[d]&255)<<8*d;var e=c&0xffffffffff;c=0;for(d=5;8>d;d++)c|=(a[d]&255)<<8*(d-5);return{position:e,recordSize:c&0xffffffffff}};b.prototype._toHexString4=function(a){a=a.toString(16);if(4!==a.length)for(var c=
4-a.length;0<c--;)a="0"+a;return a};g.__decorate([f.property({readOnly:!0})],b.prototype,"storageInfo",void 0);g.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"datasetFormat",void 0);return b=g.__decorate([f.subclass("esri.layers.support.rasterDatasets.CloudRaster")],b)}(a)})},"esri/layers/support/RasterStorageInfo":function(){define("require exports tslib ../../core/JSONSupport ../../core/accessorSupport/decorators ../../geometry/Point".split(" "),function(D,b,g,q,e,r){return function(b){function f(){var c=
null!==b&&b.apply(this,arguments)||this;c.blockWidth=void 0;c.blockHeight=void 0;c.compression=null;c.origin=null;c.firstPyramidLevel=null;c.maximumPyramidLevel=null;c.pyramidScalingFactor=2;c.pyramidBlockWidth=null;c.pyramidBlockHeight=null;c.isVirtualTileInfo=!1;c.tileInfo=null;c.blockBoundary=null;return c}g.__extends(f,b);g.__decorate([e.property({type:Number,json:{write:!0}})],f.prototype,"blockWidth",void 0);g.__decorate([e.property({type:Number,json:{write:!0}})],f.prototype,"blockHeight",
void 0);g.__decorate([e.property({type:String,json:{write:!0}})],f.prototype,"compression",void 0);g.__decorate([e.property({type:r,json:{write:!0}})],f.prototype,"origin",void 0);g.__decorate([e.property({type:Number,json:{write:!0}})],f.prototype,"firstPyramidLevel",void 0);g.__decorate([e.property({type:Number,json:{write:!0}})],f.prototype,"maximumPyramidLevel",void 0);g.__decorate([e.property()],f.prototype,"pyramidScalingFactor",void 0);g.__decorate([e.property({type:Number,json:{write:!0}})],
f.prototype,"pyramidBlockWidth",void 0);g.__decorate([e.property({type:Number,json:{write:!0}})],f.prototype,"pyramidBlockHeight",void 0);g.__decorate([e.property({type:Boolean,json:{write:!0}})],f.prototype,"isVirtualTileInfo",void 0);g.__decorate([e.property({json:{write:!0}})],f.prototype,"tileInfo",void 0);g.__decorate([e.property()],f.prototype,"blockBoundary",void 0);return f=g.__decorate([e.subclass("esri.layers.support.RasterStorageInfo")],f)}(q.JSONSupport)})},"esri/layers/support/rasterDatasets/BaseRaster":function(){define("require exports tslib ../../../geometry ../../../request ../../../core/arrayUtils ../../../core/Error ../../../core/JSONSupport ../../../core/Logger ../../../core/maybe ../../../core/Promise ../../../core/promiseUtils ../../../core/accessorSupport/decorators ../arcgisLayerUrl ../commonProperties ../RasterStorageInfo ../TileInfo ./RawBlockCache ../rasterFormats/RasterCodec ../rasterFunctions/pixelUtils ../rasterFunctions/rasterProjectionHelper".split(" "),
function(D,b,g,q,e,r,l,f,c,m,A,a,d,x,p,u,z,h,v,t,k){return function(b){function f(){var a=null!==b&&b.apply(this,arguments)||this;a.rasterJobHandler=null;a.datasetName=null;a.datasetFormat=null;a.rasterInfo=null;a.ioConfig={sampling:"closest"};return a}g.__extends(f,b);f.prototype.init=function(){return g.__awaiter(this,void 0,void 0,function(){var a;return g.__generator(this,function(c){switch(c.label){case 0:return a=k.load(),this.addResolvingPromise(a),[4,this.when()];case 1:return c.sent(),[2]}})})};
f.prototype.normalizeCtorArgs=function(a){a&&a.ioConfig&&(a=g.__assign(g.__assign({},a),{ioConfig:g.__assign({resolution:null,bandIds:null,sampling:"closest",tileInfo:z.create()},a.ioConfig)}));return a};Object.defineProperty(f.prototype,"url",{set:function(a){this._set("url",x.sanitizeUrl(a,c.getLogger(this.declaredClass)))},enumerable:!1,configurable:!0});f.prototype.open=function(a){return g.__awaiter(this,void 0,void 0,function(){return g.__generator(this,function(a){throw new l("BaseRaster:open-not-implemented",
"open() is not implemented");})})};f.prototype.fetchTile=function(a,c,d,e){var b;void 0===e&&(e={});return g.__awaiter(this,void 0,void 0,function(){var n,f,h,k;return g.__generator(this,function(w){n=e.tileInfo;f=n.lodAt(a);h=new q.Point({x:f.resolution,y:f.resolution,spatialReference:n.spatialReference});k=this.getTileExtent(h,c,d,n);(null===(b=e.multidimensionalDefinition)||void 0===b?0:b.length)&&m.isSome(this.rasterInfo.multidimensionalInfo)&&null==e.sliceId&&(e=g.__assign(g.__assign({},e),{sliceId:this.getSliceIndex(e.multidimensionalDefinition)||
0}));return[2,this.fetchPixels(k,n.size[0],n.size[1],e)]})})};f.prototype.identify=function(a,c){void 0===c&&(c={});return g.__awaiter(this,void 0,void 0,function(){var d,e,b,n,f,w,l,p,y,v,t,u,q,A,r,B,x,z;return g.__generator(this,function(g){switch(g.label){case 0:d=this.rasterInfo;e=d.spatialReference;b=d.extent;n=c.datumTransformation;f=k.projectPoint(a,e,n);if(!b.intersects(f))return[2,{location:f,value:null}];w=0;if(!c.srcResolution)return[3,1];l=k.snapPyramid(c.srcResolution,this.rasterInfo,
this.ioConfig.sampling);w=l.pyramidLevel;return[3,3];case 1:return[4,this.computeBestPyramidLevelForLocation(a,c)];case 2:w=g.sent();if(null==w)return[2,{location:f,value:null}];g.label=3;case 3:p=this.identifyPixelLocation(f,w,null);if(null===p)return[2,{location:f,value:null}];y=p.row;v=p.col;t=p.rowOffset;u=p.colOffset;q=h.getRasterId(this.url,c.sliceId);A=w+"/"+y+"/"+v;r=h.getBlock(q,null,A);m.isSome(r)||(r=this.fetchRawTile(w,y,v,c),h.putBlock(q,null,A,r));return[4,r];case 4:B=g.sent();if(!(B&&
B.pixels&&0<B.pixels.length))return[2,{location:f,value:null}];x=t*this.rasterInfo.storageInfo.blockHeight+u;z=!B.mask||B.mask[x]?B.pixels.map(function(a){return a[x]}):null;return[2,{location:f,value:z,pyramidLevel:w}]}})})};f.prototype.fetchPixels=function(a,c,d,e){void 0===e&&(e={});return g.__awaiter(this,void 0,void 0,function(){var b,f,n,h,m,w,l,p,y,v,u,A,r,C,F,B,x,z,D,Y,Z,aa,da,ea,ba,ca,fa;return g.__generator(this,function(g){switch(g.label){case 0:b=a.clone().normalize();a=b[0];f=this.rasterInfo.spatialReference;
n=!a.spatialReference.equals(f);h=e.datumTransformation;m=new q.Point({x:(a.xmax-a.xmin)/c,y:(a.ymax-a.ymin)/d,spatialReference:a.spatialReference});w=e.srcResolution||(n?k.projectResolution(m,f,a,h):m);if(!w)return[2,null];l=k.snapPyramid(w,this.rasterInfo,this.ioConfig.sampling);p=l.pyramidLevel;y=l.pyramidResolution;if(v=l.excessiveReading)return[2,null];u=this.rasterInfo.storageInfo;A=n?k.projectExtent(a,f,h):a;if(null==A)return[2,null];r={x:Math.floor((A.xmin-u.origin.x)/y.x+.1),y:Math.floor((u.origin.y-
A.ymax)/y.y+.1)};C=Math.ceil((A.xmax-A.xmin)/y.x-.1);F=Math.ceil((A.ymax-A.ymin)/y.y-.1);return 8<C/c||8<F/d?[2,null]:[4,this.fetchRawPixels(p,r,{width:C,height:F},e)];case 1:B=g.sent();if(!B)return[2,null];x=0<p?u.pyramidBlockWidth:u.blockWidth;z=0<p?u.pyramidBlockHeight:u.blockHeight;if(D=!n&&1===B.pixelBlocks.length&&x===c&&z===d&&w.x===m.x&&w.y===m.y)return[2,{extent:a,srcExtent:A,pixelBlock:B.pixelBlocks[0],transformGrid:null}];Y=k.getProjectionOffsetGrid(a,B.extent,m,h);aa=!e.requestRawData;
da={rows:Y.spacing[0],cols:Y.spacing[1]};ea=B.pixelBlocks;ba=B.mosaicSize;ca=B.isPartiallyFilled;return this.rasterJobHandler?[4,this.rasterJobHandler.mosaicAndTransform({srcPixelBlocks:ea,srcMosaicSize:ba,destDimension:aa?{width:c,height:d}:null,coefs:aa?Y.coefficients:null,sampleSpacing:aa?da:null,interpolation:e.interpolation},e)]:[3,3];case 2:return Z=g.sent(),[3,4];case 3:fa=t.mosaic(ea,ba),Z=aa?t.approximateTransform(fa,{width:c,height:d},Y.coefficients,da,e.interpolation):fa,g.label=4;case 4:return[2,
{srcExtent:A,pixelBlock:Z,transformGrid:Y,extent:a,isPartiallyFilled:ca}]}})})};f.prototype.fetchRawPixels=function(c,d,e,b){return g.__awaiter(this,void 0,void 0,function(){var f,n,h,k,m,w,l,p,y,v,u,t,A,r,C,B,F,x,z,D,Z,aa,da,ea,ba,ca,fa,ia,ga,ha,ja;return g.__generator(this,function(g){switch(g.label){case 0:f=this.rasterInfo.storageInfo;n=f.origin;h=f.blockBoundary;k=0<c?this.rasterInfo.storageInfo.pyramidBlockWidth:this.rasterInfo.storageInfo.blockWidth;m=0<c?this.rasterInfo.storageInfo.pyramidBlockHeight:
this.rasterInfo.storageInfo.blockHeight;w=d.x;l=d.y;p=e.width;y=e.height;b.buffer&&(w-=b.buffer.cols,l-=b.buffer.rows,p+=2*b.buffer.cols,y+=2*b.buffer.rows);v=Math.floor(w/k);u=Math.floor(l/m);t=Math.floor((w+p-1)/k);A=Math.floor((l+y-1)/m);r=this.rasterInfo;C=r.pixelSize;B=r.spatialReference;F=h[c];if(!F)return[2,null];x=F.minRow;z=F.minCol;D=F.maxCol;Z=F.maxRow;if(A<x||t<z||u>Z||v>D)return[2,null];aa=[];ea=!1;for(ba=u;ba<=A;ba++)for(ca=v;ca<=t;ca++)ba>=x&&ca>=z&&Z>=ba&&D>=ca?(da=this._fetchRawTile(c,
ba,ca,b),this.ioConfig.allowPartialFill&&(da=a.create(function(a){da.then(function(c){return a(c)}).catch(function(){ea=!0;a(null)})})),aa.push(da)):aa.push(null);return 0===aa.length?[2,null]:[4,a.all(aa)];case 1:return fa=g.sent(),ia={height:(A-u+1)*k,width:(t-v+1)*m},ga=C.x*Math.pow(2,c),ha=C.y*Math.pow(2,c),ja=new q.Extent({xmin:n.x+v*k*ga,xmax:n.x+(t+1)*k*ga,ymin:n.y-(A+1)*m*ha,ymax:n.y-u*m*ha,spatialReference:B}),[2,{extent:ja,pixelBlocks:fa,mosaicSize:ia,isPartiallyFilled:ea}]}})})};f.prototype.fetchRawTile=
function(a,c,d,e){return g.__awaiter(this,void 0,void 0,function(){return g.__generator(this,function(a){throw new l("BaseRaster:read-not-implemented","fetchRawTile() is not implemented");})})};f.prototype.computeExtent=function(a){return k.projectExtent(this.rasterInfo.extent,a)};f.prototype.decodePixelBlock=function(a,c){return this.rasterJobHandler?this.rasterJobHandler.decode({data:a,options:c}):v.decode(a,c)};f.prototype.request=function(a,c,d){var b;return g.__awaiter(this,void 0,void 0,function(){var f,
n,h,k,m,w,l;return g.__generator(this,function(p){switch(p.label){case 0:f=this.ioConfig.customFetchParameters,n=c.range,h=c.query,k=c.headers,d=null!==(b=null!==d&&void 0!==d?d:c.retryCount)&&void 0!==b?b:this.ioConfig.retryCount,m=n?{Range:"bytes\x3d"+n.from+"-"+n.to}:null,p.label=1;case 1:return p.trys.push([1,3,,4]),[4,e(a,g.__assign(g.__assign({},c),{query:g.__assign(g.__assign({},h),f),headers:g.__assign(g.__assign({},k),m)}))];case 2:return w=p.sent(),[2,w];case 3:l=p.sent();if(0<d)return d--,
[2,this.request(a,c,d)];throw l;case 4:return[2]}})})};f.prototype.getSliceIndex=function(a){var c=this,d=this.rasterInfo.multidimensionalInfo;if(!m.isSome(d)||null===a||void 0===a||!a.length)return null;for(var e=0,b=a[0].variableName,f=function(f){f=d.variables[f];var n=f.dimensions;if(f.name!==b)return e+=n.map(function(a){return c._getDimensionValuesCount(a)}).reduce(function(a,c){return a+c}),"break";var k=n.map(function(a){return c._getDimensionValuesCount(a)}),m=n.length;f=function(c){var d=
a.filter(function(a){return a.dimensionName===n[c].name})[0];if(null==d)return{value:null};d=Array.isArray(d.values[0])?d.values[0][0]:d.values[0];d=h._getIndexFromDimensions(d,n[c]);if(-1===d)return{value:null};k.shift();e=c===m-1?e+d:e+d*k.reduce(function(a,c){return a+c})};for(var w=0;w<m;w++){var l=f(w);if("object"===typeof l)return l}},h=this,k=0;k<d.variables.length;k++){var w=f(k);if("object"===typeof w)return w.value;if("break"===w)break}return e};f.prototype.updateTileInfo=function(){var a=
this.rasterInfo,c=a.storageInfo,d=a.spatialReference,e=a.pixelSize;if(!c.tileInfo){for(var a=[],b=c.maximumPyramidLevel||0,e=Math.max(e.x,e.y),f=1/.0254*96*e,h=0;h<=b;h++)a.push({level:b-h,resolution:e,scale:f}),e*=2,f*=2;c.tileInfo=new z({origin:c.origin,size:[c.blockWidth,c.blockHeight],spatialReference:d,lods:a});c.isVirtualTileInfo=!0}};f.prototype.createRemoteDatasetStorageInfo=function(a,c,d){void 0===c&&(c=512);void 0===d&&(d=512);var e=a.width,b=a.height,f=a.extent,h=a.pixelSize,n=new q.Point({x:f.xmin,
y:f.ymax,spatialReference:a.spatialReference}),e=Math.max(0,Math.round(Math.log(Math.max(e,b))/Math.LN2-8)),f=this._computeBlockBoundary(f,h,e,512,512);a.storageInfo=new u({blockWidth:c,blockHeight:d,pyramidBlockWidth:c,pyramidBlockHeight:d,origin:n,firstPyramidLevel:1,maximumPyramidLevel:e,blockBoundary:f})};f.prototype.computeBestPyramidLevelForLocation=function(a,c){void 0===c&&(c={});return g.__awaiter(this,void 0,void 0,function(){return g.__generator(this,function(a){return[2,0]})})};f.prototype.identifyPixelLocation=
function(a,c,d){var e=this.rasterInfo,b=e.pixelSize,f=e.extent,h=this.rasterInfo.storageInfo,n=h.blockWidth,m=h.blockHeight,w=h.maximumPyramidLevel,l=h.pyramidScalingFactor,h=h.origin;a=k.projectPoint(a,e.spatialReference,d);if(!f.intersects(a)||0>c||c>w)return null;w=Math.pow(l,c);f=(h.y-a.y)/(w*b.y)/m;b=(a.x-h.x)/(w*b.x)/n;return{pyramidLevel:c,row:Math.floor(f),col:Math.floor(b),rowOffset:Math.min(m-1,Math.floor((f-Math.floor(f))*m)),colOffset:Math.min(n-1,Math.floor((b-Math.floor(b))*n)),srcLocation:a}};
f.prototype.getTileExtent=function(a,c,d,e){var b=e.origin,f=e.size[0],h=e.size[1];d=b.x+d*f*a.x;c=b.y-c*h*a.y;return new q.Extent({xmin:d,xmax:d+f*a.x,ymin:c-h*a.y,ymax:c,spatialReference:e.spatialReference})};f.prototype._computeBlockBoundary=function(a,c,d,e,b){var f=c.x;c=c.y;var h=a.xmin,n=a.ymax,k=[{minCol:Math.floor((a.xmin-h+.1*f)/e/f),maxCol:Math.floor((a.xmax-h-.1*f)/e/f),minRow:Math.floor((n-a.ymax+.1*c)/b/c),maxRow:Math.floor((n-a.ymin-.1*c)/b/c)}];if(0<d)for(var m=0;m<d;m++)f*=2,c*=2,
k.push({minCol:Math.floor((a.xmin-h+.1*f)/e/f),maxCol:Math.floor((a.xmax-h-.1*f)/e/f),minRow:Math.floor((n-a.ymax+.1*c)/b/f),maxRow:Math.floor((n-a.ymin-.1*c)/b/f)});return k};f.prototype._fetchRawTile=function(c,d,e,b){var f=this.rasterInfo.storageInfo.blockBoundary[c];if(!f)return a.resolve(null);var n=f.minCol,k=f.maxCol,l=f.maxRow;if(d<f.minRow||e<n||d>l||e>k)return a.resolve(null);var w=h.getRasterId(this.url,b.sliceId),p=c+"/"+d+"/"+e,f=h.getBlock(w,b.registryId,p);m.isSome(f)||(n=a.createAbortController(),
f=this.fetchRawTile(c,d,e,g.__assign(g.__assign({},b),{signal:n.signal})),h.putBlock(w,b.registryId,p,f,n),f.catch(function(){h.deleteBlock(w,b.registryId,p)}));if(b.signal)a.onAbort(b,function(){h.decreaseRefCount(w,b.registryId,p)});return f};f.prototype._getIndexFromDimensions=function(a,c){var d,e=c.extent,b=c.interval,f=c.unit,h=c.values;if(null===h||void 0===h?0:h.length)return Array.isArray(h[0])?r.findIndex(h,function(c){return c[0]<=a&&c[1]>=a}):h.indexOf(a);if(a>e[1])return-1;e=e[0];h=-1;
if("ISO8601"===f){switch((null===(d=c.intervalUnit)||void 0===d?void 0:d.toLowerCase())||"seconds"){case "seconds":h=Math.round((a-e)/1E3/b);break;case "minutes":h=Math.round((a-e)/6E4/b);break;case "hours":h=Math.round((a-e)/36E5/b);break;case "days":h=Math.round((a-e)/864E5/b);break;case "years":h=Math.round(((new Date(a)).getUTCFullYear()-(new Date(e)).getUTCFullYear())/b);break;case "decades":h=Math.round(((new Date(a)).getUTCFullYear()-(new Date(e)).getUTCFullYear())/10/b)}return h}return Math.round((a-
e)/b)};f.prototype._getDimensionValuesCount=function(a){var c,d=a.extent,e=a.interval,b=a.unit,f=a.values;if(f=(null===f||void 0===f?void 0:f.length)||0)return f;var h=d[0];if(0===f&&"ISO8601"===b){switch((null===(c=a.intervalUnit)||void 0===c?void 0:c.toLowerCase())||"seconds"){case "seconds":f=Math.round((d[1]-d[0])/1E3/e);break;case "minutes":f=Math.round((d[1]-d[0])/6E4/e);break;case "hours":f=Math.round((d[1]-d[0])/36E5/e);break;case "days":f=Math.round((d[1]-d[0])/864E5/e);break;case "years":f=
Math.round(((new Date(d[1])).getUTCFullYear()-(new Date(h)).getUTCFullYear())/e);break;case "decades":f=Math.round(((new Date(d[1])).getUTCFullYear()-(new Date(h)).getUTCFullYear())/10/e)}return f}return Math.round((d[1]-d[0])/e)};g.__decorate([d.property(p.url)],f.prototype,"url",null);g.__decorate([d.property({type:String,json:{write:!0}})],f.prototype,"datasetName",void 0);g.__decorate([d.property({type:String,json:{write:!0}})],f.prototype,"datasetFormat",void 0);g.__decorate([d.property()],f.prototype,
"rasterInfo",void 0);g.__decorate([d.property()],f.prototype,"ioConfig",void 0);g.__decorate([d.property()],f.prototype,"sourceJSON",void 0);return f=g.__decorate([d.subclass("esri.layers.support.rasterDatasets.BaseRaster")],f)}(A.EsriPromiseMixin(f.JSONSupport))})},"esri/layers/support/rasterDatasets/RawBlockCache":function(){define(["require","exports","../../../geometry","./EphemeralBlockCache","../rasterFunctions/rasterProjectionHelper"],function(D,b,g,q,e){function r(c,e){if(!l.has(c))return null;
c=l.get(c);return null==c[e]?null:c[e]}Object.defineProperty(b,"__esModule",{value:!0});b.update=b.deleteBlock=b.putBlock=b.getBlock=b.decreaseRefCount=b.deleteRaster=b.unregister=b.register=b.getRasterId=void 0;var l=new Map,f=new q;b.getRasterId=function(c,e){return null==e?c:c+"?sliceId\x3d"+e};b.register=function(c,e){e={extent:null,rasterInfo:e,cache:new Map};if(l.has(c))return c=l.get(c),c.push(e),c.length-1;l.set(c,[e]);return 0};b.unregister=function(c,e){l.has(c)&&(l.get(c)[e]=null)};b.deleteRaster=
function(c){l.delete(c)};b.decreaseRefCount=function(c,e,b){if(!l.has(c))return null==e?f.decreaseRefCount(c,b):0;var a=l.get(c);if(null==a[e])return f.decreaseRefCount(c,b);e=a[e].cache;if(e.has(b)){c=e.get(b);c.refCount--;if(0===c.refCount){e.delete(b);for(e=0;e<a.length;e++)a[e]&&a[e].cache.has(b)&&a[e].cache.delete(b);c.controller&&c.controller.abort()}return c.refCount}return 0};b.getBlock=function(c,e,b){if(!l.has(c))return null==e?f.getBlock(c,b):null;var a=l.get(c);if(null==a[e]){for(var d=
0;d<a.length;d++)if(a[d]&&a[d].cache.has(b))return b=a[d].cache.get(b),b.refCount++,b.block;return f.getBlock(c,b)}c=a[e].cache;if(c.has(b))return b=c.get(b),b.refCount++,b.block;for(d=0;d<a.length;d++)if(d!==e&&a[d]&&a[d]&&a[d].cache.has(b))return e=a[d].cache.get(b),e.refCount++,c.set(b,e),e.block;return null};b.putBlock=function(c,e,b,a,d){void 0===d&&(d=null);if(l.has(c)){var m=l.get(c);if(null==m[e])f.putBlock(c,b,a,d);else{var p={refCount:1,block:a,isResolved:!1,isRejected:!1,controller:d};
a.then(function(){return p.isResolved=!0}).catch(function(){return p.isRejected=!0});m[e].cache.set(b,p)}}else null==e&&f.putBlock(c,b,a,d)};b.deleteBlock=function(c,e,b){if(l.has(c)){var a=l.get(c);null==a[e]?f.deleteBlock(c,b):a[e].cache.delete(b)}else null==e&&f.deleteBlock(c,b)};b.update=function(c,b,f,a,d,l,p){void 0===p&&(p=null);c=r(c,b);var m=c.extent,q=c.cache;b=c.rasterInfo;if(!m||m.xmin!==f.xmin||m.xmax!==f.xmax||m.ymin!==f.ymin||m.ymax!==f.ymax){for(var m=f.clone().normalize(),h=b.spatialReference,
v=new Set,t=0;t<m.length;t++){var k=m[t];if(!(k.xmax-k.xmin<=a||k.ymax-k.ymin<=a)){var A=e.projectExtent(k,h,p),y=new g.Point({x:a,y:a,spatialReference:k.spatialReference});if(null===d&&(d=e.projectResolution(y,h,k,p),!d))return;var y=e.snapPyramid(d,b,l||"closest"),k=y.pyramidLevel,w=y.pyramidResolution;if(y.excessiveReading)return;for(var n=Math.max(0,Math.floor((A.xmin-b.storageInfo.origin.x)/w.x)),C=Math.max(0,Math.floor((b.storageInfo.origin.y-A.ymax)/w.y)),x=0<k?b.storageInfo.pyramidBlockWidth:
b.storageInfo.blockWidth,G=0<k?b.storageInfo.pyramidBlockHeight:b.storageInfo.blockHeight,y=Math.max(0,Math.floor(n/x)-1),n=Math.floor((n+Math.ceil((A.xmax-A.xmin)/w.x-.1)-1)/x)+1,A=Math.floor((C+Math.ceil((A.ymax-A.ymin)/w.y-.1)-1)/G)+1,w=Math.max(0,Math.floor(C/G)-1);w<=A;w++)for(C=y;C<=n;C++)v.add(k+"/"+w+"/"+C)}}q.forEach(function(a,c){v.has(c)||(a=q.get(c),(null==a||a.isResolved||a.isRejected)&&q.delete(c))});c.extent={xmin:f.xmin,ymin:f.ymin,xmax:f.xmax,ymax:f.ymax}}}})},"esri/layers/support/rasterDatasets/EphemeralBlockCache":function(){define(["require",
"exports","../../../core/MapUtils"],function(D,b,g){return function(){function b(e,b){void 0===e&&(e=15E3);void 0===b&&(b=5E3);this._timer=null;this._cachedBlocks=new Map;this._size=-1;this._duration=e;this._interval=Math.min(e,b)}b.prototype.decreaseRefCount=function(e,b){e=e+"/"+b;b=this._cachedBlocks;if(b.has(e)){var l=b.get(e);l.refCount--;0>=l.refCount&&(b.delete(e),l.controller&&l.controller.abort());return l.refCount}return 0};b.prototype.getBlock=function(e,b){e=e+"/"+b;b=this._cachedBlocks;
if(b.has(e)){var l=b.get(e);l.ts=Date.now();l.refCount++;b.delete(e);b.set(e,l);return l.block}return null};b.prototype.putBlock=function(e,b,l,f){void 0===f&&(f=null);var c=this._cachedBlocks;e=e+"/"+b;c.has(e)?(l=c.get(e),l.ts=Date.now(),l.refCount++):c.set(e,{block:l,ts:Date.now(),refCount:1,controller:f});this.trim();this.updateTimer()};b.prototype.deleteBlock=function(e,b){var l=this._cachedBlocks;e=e+"/"+b;l.has(e)&&l.delete(e)};b.prototype.updateMaxSize=function(e){this._size=e;this.trim()};
b.prototype.empty=function(){this._cachedBlocks.clear();this.clearTimer()};b.prototype.getCurrentSize=function(){return this._cachedBlocks.size};b.prototype.updateTimer=function(){var e=this;if(null==this._timer){var b=this._cachedBlocks;this._timer=setInterval(function(){for(var l=g.pairsOfMap(b),f=Date.now(),c=0;c<l.length;c++)if(l[c][1].ts<=f-e._duration)b.delete(l[c][0]);else break;0===b.size&&e.clearTimer()},this._interval)}};b.prototype.trim=function(){var e=this._cachedBlocks;if(!(-1===this._size||
this._size>=e.size))for(var b=g.pairsOfMap(e),l=0;l<b.length-this._size;l++)e.delete(b[l][0])};b.prototype.clearTimer=function(){null!=this._timer&&(clearInterval(this._timer),this._timer=null)};return b}()})},"esri/layers/support/rasterFunctions/rasterProjectionHelper":function(){define("require exports tslib ../../../geometry ../../../core/Error ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(D,b,g,q,e,r,l,f,c){function m(a,d,b,f){void 0===f&&(f=null);if(a.spatialReference.equals(d))return a;var h=x(a.spatialReference,d);if(h&&!l.isLoaded())throw new e("rasterprojectionhelper-projectResolution","projection engine is not loaded");b=b.center;a=new q.Extent({xmin:b.x-a.x/2,xmax:b.x+a.x/2,ymin:b.y-a.y/2,ymax:b.y+a.y/2,spatialReference:a.spatialReference});d=h?l.project(a,d,f):c.project(a,d);return null==d?null:{x:d.xmax-d.xmin,y:d.ymax-d.ymin}}function A(a,c){void 0===c&&(c=.01);
return r.getMetersPerUnitForSR(a)?c/r.getMetersPerUnitForSR(a):0}function a(a,d,b,h){var m,p;void 0===b&&(b=null);void 0===h&&(h=!0);var k=a.spatialReference;if(k.equals(d))return a;var g=x(k,d);if(g&&!l.isLoaded())throw new e("rasterprojectionhelper-projectResolution","projection engine is not loaded");(b=g?l.project(a,d,b):c.project(a,d))&&h&&d.isGeographic&&(d=k.isWebMercator?f.getInfo(k).origin:null!==(p=null===(m=f.getInfo(k))||void 0===m?void 0:m.valid)&&void 0!==p?p:[],m=d[0],p=d[1],(k=A(k))&&
null!=m&&null!=p&&(Math.abs(a.x-m)<k&&5E-4>Math.abs(180-b.x)?b.x-=360:Math.abs(a.x-p)<k&&5E-4>Math.abs(180+b.x)&&(b.x+=360)));return b}function d(d,b,m,h){var g,p,k,u;void 0===m&&(m=null);void 0===h&&(h=!0);var y=d.spatialReference;if(y.equals(b))return d;var w=x(y,b);if(w&&!l.isLoaded())throw new e("rasterprojectionhelper-projectExtent","projection engine is not loaded");var w=w?l.project(d,b,m):c.project(d,b),n=null!==(p=null===(g=f.getInfo(y))||void 0===g?void 0:g.origin)&&void 0!==p?p:[];g=n[0];
p=n[1];w&&h&&y.isWebMercator&&b.isGeographic&&null!=g&&null!=p&&(.001>Math.abs(d.xmin-g)&&1E3<Math.abs(p-d.xmax)&&5E-4>Math.abs(180-w.xmax)&&(w.xmin=-180,h=[],h.push(new q.Point(d.xmax,d.ymin,y)),h.push(new q.Point(d.xmax,(d.ymin+d.ymax)/2,y)),h.push(new q.Point(d.xmax,d.ymax,y)),h=h.map(function(c){return a(c,b,m)}).filter(function(a){return!isNaN(null===a||void 0===a?void 0:a.x)}).map(function(a){return a.x}),w.xmax=Math.max.apply(null,h)),.001>Math.abs(d.xmax-p)&&1E3<Math.abs(g-d.xmin)&&5E-4>Math.abs(180+
w.xmin)&&(w.xmax=180,h=[],h.push(new q.Point(d.xmin,d.ymin,y)),h.push(new q.Point(d.xmin,(d.ymin+d.ymax)/2,y)),h.push(new q.Point(d.xmin,d.ymax,y)),h=h.map(function(c){return a(c,b,m)}).filter(function(a){return!isNaN(null===a||void 0===a?void 0:a.x)}).map(function(a){return a.x}),w.xmin=Math.min.apply(null,h)));d=b.isWebMercator?f.getInfo(b).origin:null!==(u=null===(k=f.getInfo(b))||void 0===k?void 0:k.valid)&&void 0!==u?u:[];g=d[0];p=d[1];(k=A(b))&&null!=g&&null!=p&&(Math.abs(w.xmin-g)<k&&(w.xmin=
g),Math.abs(w.xmax-p)<k&&(w.xmax=p));return w}Object.defineProperty(b,"__esModule",{value:!0});b.computeProjectedScales=b.snapPyramid=b.getProjectionOffsetGrid=b.projectExtent=b.projectPoint=b.projectResolution=b.load=b.defaultGridSpacing=void 0;var x=function(a,c){var d=(a.isWGS84||a.isWebMercator)&&(c.isWGS84||c.isWebMercator);return!(a.equals(c)||d)};b.defaultGridSpacing=32;b.load=function(){return g.__awaiter(this,void 0,void 0,function(){return g.__generator(this,function(a){switch(a.label){case 0:return l.isLoaded()||
!l.isSupported()?[2,null]:[4,l.load()];case 1:return a.sent(),[2]}})})};b.projectResolution=m;b.projectPoint=a;b.projectExtent=d;b.getProjectionOffsetGrid=function(c,d,m,h,g,t){var k,p;void 0===h&&(h=null);void 0===g&&(g=!1);void 0===t&&(t=[b.defaultGridSpacing,b.defaultGridSpacing]);if(x(c.spatialReference,d.spatialReference)&&!l.isLoaded())throw new e("rasterprojectionhelper-projectResolution","projection engine is not loaded");if(!(c&&d&&m))return null;var y=c.xmin,w=c.ymin,n=c.xmax,v=c.ymax,u=
c.spatialReference,A=d.spatialReference;c=null!==(p=null===(k=f.getInfo(u))||void 0===k?void 0:k.valid)&&void 0!==p?p:[];var r=c[0],z=c[1],M=t[0]*m.x,H=t[1]*m.y,n=Math.ceil((n-y)/M-.1)+1,w=Math.ceil((v-w)/H-.1)+1,E;m=[];var L;k=!1;for(p=0;p<n;p++){var K=[];for(c=0;c<w;c++)E=new q.Point({x:y+M*p,y:v-H*c,spatialReference:u}),E=a(E,A,h),K.push(E),0<p&&g&&E&&L[c]&&null!=r&&E.x<L[c].x&&(E.x+=z-r),E?(m.push((E.x-d.xmin)/(d.xmax-d.xmin)),m.push((d.ymax-E.y)/(d.ymax-d.ymin))):(m.push(NaN),m.push(NaN),k=!0);
L=K}d=[Math.abs((m[0]+m[4]+m[4*n]+m[4*n+4])/4-m[2*w+2]),Math.abs((m[1]+m[5]+m[4*w+1]+m[4*w+5])/4-m[2*w+3])];h=new Float32Array((n-1)*(w-1)*12);g=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]);y=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(p=0;p<n-1;p++){for(c=0;c<w-1;c++){H=p*w*2+2*c;v=m[H];L=m[H+1];u=m[H+2];A=m[H+3];H+=2*w;r=m[H];z=m[H+1];M=m[H+2];H=m[H+3];K=0;E=12*(c*(n-1)+p);for(var P=0;3>P;P++)h[E++]=g[K++]*v+g[K++]*u+g[K++]*M;for(P=K=0;3>P;P++)h[E++]=g[K++]*L+g[K++]*A+g[K++]*H;for(P=K=0;3>P;P++)h[E++]=
y[K++]*v+y[K++]*r+y[K++]*M;for(P=K=0;3>P;P++)h[E++]=y[K++]*L+y[K++]*z+y[K++]*H}if(k)for(c=0;c<h.length;c++)isNaN(h[c])&&(h[c]=-1)}return{offsets:m,error:d,coefficients:h,spacing:t,size:[n-1,w-1]}};b.snapPyramid=function(a,c,d){var e=Math.log(a.x/c.pixelSize.x)/Math.LN2,b=Math.log(a.y/c.pixelSize.y)/Math.LN2;a=c.storageInfo.maximumPyramidLevel||0;d="down"===d?Math.floor(Math.min(e,b)):"up"===d?Math.ceil(Math.max(e,b)):Math.round((e+b)/2);e=!1;0>d?d=0:d>a&&(e=d>a+3,d=a);a=Math.pow(2,d);c=new q.Point({x:a*
c.pixelSize.x,y:a*c.pixelSize.y,spatialReference:c.spatialReference});return{pyramidLevel:d,pyramidResolution:c,excessiveReading:e}};b.computeProjectedScales=function(a,c,e,b){void 0===e&&(e=512);void 0===b&&(b=!0);var f=a.extent,h=a.spatialReference,k=a.pixelSize,l=m(new q.Point({x:k.x,y:k.y,spatialReference:h}),c,f);if(null==l)return{projectedPixelSize:null,scales:null,srcResolutions:null};var g=(l.x+l.y)/2,w=r.getMetersPerUnitForSR(c),g=g*w*96*39.37;e=c.isGeographic?512/e*2.958287637958547E8:512/
e*5.91657527591555E8;var n=!1;b&&(c.isGeographic||c.isWebMercator)&&(b=d(f,c),n=0>b.xmin*b.xmax);b=g;if(n)b=e,a=b/(96*w*39.37),c=m(new q.Point({x:a,y:a,spatialReference:c}),h,f);else{c={x:k.x,y:k.y};a=Math.ceil(Math.log(Math.min(a.width,a.height)/32)/Math.LN2);for(f=0;b<.5005*e&&f<a;)f++,b*=2,c.x*=2,c.y*=2;1.001>=Math.max(b,e)/Math.min(b,e)&&(b=e)}a=[];f=[];for(g=Math.min(70.5310735,g)/1.001;b>=g;)a.push(b),f.push({x:c.x,y:c.y}),b/=2,c.x/=2,c.y/=2;return{projectedPixelSize:l,scales:a,srcResolutions:f}}})},
"esri/geometry/projection":function(){define("require exports ../core/promiseUtils ./pe ./support/GeographicTransformation @dojo/framework/shim/Promise".split(" "),function(D,b,g,q,e){function r(a,c,b,m,g){void 0===g&&(g=null);if(null===g){var d=e.cacheKey(b,m);void 0!==A[d]?g=A[d]:(g=l(b,m,null),null===g&&(g=new e),A[d]=g)}return f._project(a,c,b,m,g)}function l(a,d,b){void 0===b&&(b=null);a=f._getTransformation(c,a,d,b,null===b||void 0===b?void 0:b.spatialReference);return null!==a?e.fromGE(a):
null}Object.defineProperty(b,"__esModule",{value:!0});b.getTransformations=b.getTransformation=b.projectMany=b.project=b.load=b.isSupported=b.isLoaded=void 0;var f=null,c=null;b.isLoaded=function(){return!!f&&q.isLoaded()};b.isSupported=function(){return q.isSupported()};var m=null;b.load=function(){return m?m:m=g.all([q.load(),new Promise(function(a,c){D(["./geometryEngineBase"],a,c)}),new Promise(function(a,c){D(["./geometryAdapters/hydrated"],a,c)})]).then(function(a){var d=a[1];c=a[2].hydratedAdapter;
f=d;f._enableProjection(q)})};b.project=function(a,d,b){void 0===b&&(b=null);return a instanceof Array?0===a.length?[]:r(c,a,a[0].spatialReference,d,b):r(c,[a],a.spatialReference,d,b)[0]};var A={};b.projectMany=r;b.getTransformation=l;b.getTransformations=function(a,d,b){void 0===b&&(b=null);a=f._getTransformationBySuitability(c,a,d,b,null===b||void 0===b?void 0:b.spatialReference);if(null!==a){d=[];for(b=0;b<a.length;b++)d.push(e.fromGE(a[b]));return d}return[]}})},"esri/geometry/pe":function(){define("require exports tslib ../assets ../core/has ../core/promiseUtils @dojo/framework/shim/Promise".split(" "),
function(D,b,g,q,e,r){function l(a){function c(a,c,d){a[c]=d(a[c])}b._pe=a;d.init();x.init();p.init();u.init();z.init();b.PeGCSExtent=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}g.__extends(c,a);c.prototype.destroy=function(){b._pe.destroy(this)};return c}(b._pe.PeGCSExtent);for(var e=0,f=[b._pe.PeDatum,b._pe.PeGeogcs,b._pe.PeGeogtran,b._pe.PeObject,b._pe.PeParameter,b._pe.PePrimem,b._pe.PeProjcs,b._pe.PeSpheroid,b._pe.PeUnit];e<f.length;e++)a=f[e],c(a.prototype,"getName",
function(a){return function(){return a.call(this,Array(d.PE_NAME_MAX))}});e=0;for(f=[b._pe.PeGeogtran,b._pe.PeProjcs];e<f.length;e++)a=f[e],c(a.prototype,"getParameters",function(a){return function(){for(var c=Array(d.PE_PARM_MAX),e=a.call(this),f=0;f<c.length;f++){var h=b._pe.getValue(e,"*");c[f]=h?b._pe.wrapPointer(h,b._pe.PeParameter):null;e+=Int32Array.BYTES_PER_ELEMENT}return c}});c(b._pe.PeHorizon.prototype,"getCoord",function(a){return function(){var c=this.getSize();if(!c)return null;var d=
[],b=a.call(this);A(d,c,b);return d}});c(b._pe.PeGTlistExtendedEntry.prototype,"getEntries",function(a){var c=b._pe._pe_getPeGTlistExtendedGTsSize();return function(){var d=null,e=a.call(this);if(!b._pe.compare(e,b._pe.NULL)){var d=[e],f=this.getSteps();if(1<f)for(var e=b._pe.getPointer(e),h=1;h<f;h++)d.push(b._pe.wrapPointer(e+c*h,b._pe.PeGTlistExtendedGTs))}return d}});var h=b._pe._pe_getPeHorizonSize();a=function(a){return function(){var c=this._cache;c||(this._cache=c=new Map);if(c.has(a))return c.get(a);
var d=null,e=a.call(this);if(!b._pe.compare(e,b._pe.NULL)){var d=[e],f=e.getNump();if(1<f)for(var e=b._pe.getPointer(e),k=1;k<f;k++)d.push(b._pe.wrapPointer(e+h*k,b._pe.PeHorizon))}c.set(a,d);return d}};c(b._pe.PeProjcs.prototype,"horizonGcsGenerate",a);c(b._pe.PeProjcs.prototype,"horizonPcsGenerate",a);b._pe.PeObject.prototype.toString=function(a){void 0===a&&(a=d.PE_STR_OPTS_NONE);b._pe.ensureCache.prepare();var c=b._pe.getPointer(this),e=b._pe.ensureInt8(Array(d.PE_BUFFER_MAX));return b._pe.UTF8ToString(b._pe._pe_object_to_string_ext(c,
a,e))}}function f(a){if(a){var c=b._pe.getClass(a);c&&(c=b._pe.getCache(c))&&(a=b._pe.getPointer(a))&&delete c[a]}}function c(a,c){var d=[];c=Array(c);for(var e=0;e<a;e++)d.push(b._pe.ensureInt8(c));return d}function m(a){var c;Array.isArray(a[0])?(c=[],a.forEach(function(a){c.push(a[0],a[1])})):c=a;return c}function A(a,c,d,e){void 0===e&&(e=!1);if(e)for(e=0;e<2*c;e++)a[e]=b._pe.getValue(d+e*Float64Array.BYTES_PER_ELEMENT,"double");else{var f=0===a.length;for(e=0;e<c;e++)f&&(a[e]=Array(2)),a[e][0]=
b._pe.getValue(d,"double"),a[e][1]=b._pe.getValue(d+Float64Array.BYTES_PER_ELEMENT,"double"),d+=2*Float64Array.BYTES_PER_ELEMENT}}Object.defineProperty(b,"__esModule",{value:!0});b._init=b.PeVersion=b.PePCSInfo=b.PeNotationUtm=b.PeNotationUsng=b.PeNotationMgrs=b.PeNotationDms=b.PeGTTransformations=b.PeGTlistExtendedEntry=b.PeGTlistExtended=b.PeGCSExtent=b.PeFactory=b.PeDefs=b.PeCSTransformations=b.load=b.isSupported=b.isLoaded=b._pe=void 0;var a;b._pe=null;b.isLoaded=function(){return!!b._pe};b.isSupported=
function(){return!!e("esri-wasm")};b.load=function(){return a?a:a=r.create(function(a,c){(new Promise(function(a,c){D(["./support/pe-wasm"],a,c)})).then(function(d){d({locateFile:function(a){return q.getAssetUrl("esri/geometry/support/"+a)},onAbort:function(a){c(Error(a))}}).then(function(c){l(c);a()})})})};(function(a){function c(a,c,d){b._pe.ensureCache.prepare();var e=m(d),f=d===e,e=b._pe.ensureFloat64(e);(a=b._pe._pe_geog_to_proj(b._pe.getPointer(a),c,e))&&A(d,c,e,f);return a}function e(a,c,d){return f(a,
c,d,0)}function f(a,c,d,e){b._pe.ensureCache.prepare();var f=m(d),h=d===f,f=b._pe.ensureFloat64(f);(a=b._pe._pe_proj_to_geog_center(b._pe.getPointer(a),c,f,e))&&A(d,c,f,h);return a}a.geogToProj=c;a.projGeog=function(a,b,f,h){switch(h){case d.PE_TRANSFORM_P_TO_G:return e(a,b,f);case d.PE_TRANSFORM_G_TO_P:return c(a,b,f)}return 0};a.projToGeog=e;a.projToGeogCenter=f})(b.PeCSTransformations||(b.PeCSTransformations={}));var d;(function(a){a.init=function(){a.PE_BUFFER_MAX=b._pe.PeDefs.prototype.PE_BUFFER_MAX;
a.PE_NAME_MAX=b._pe.PeDefs.prototype.PE_NAME_MAX;a.PE_MGRS_MAX=b._pe.PeDefs.prototype.PE_MGRS_MAX;a.PE_USNG_MAX=b._pe.PeDefs.prototype.PE_USNG_MAX;a.PE_DD_MAX=b._pe.PeDefs.prototype.PE_DD_MAX;a.PE_DDM_MAX=b._pe.PeDefs.prototype.PE_DDM_MAX;a.PE_DMS_MAX=b._pe.PeDefs.prototype.PE_DMS_MAX;a.PE_UTM_MAX=b._pe.PeDefs.prototype.PE_UTM_MAX;a.PE_PARM_MAX=b._pe.PeDefs.prototype.PE_PARM_MAX;a.PE_TYPE_NONE=b._pe.PeDefs.prototype.PE_TYPE_NONE;a.PE_TYPE_GEOGCS=b._pe.PeDefs.prototype.PE_TYPE_GEOGCS;a.PE_TYPE_PROJCS=
b._pe.PeDefs.prototype.PE_TYPE_PROJCS;a.PE_TYPE_GEOGTRAN=b._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;a.PE_TYPE_COORDSYS=b._pe.PeDefs.prototype.PE_TYPE_COORDSYS;a.PE_TYPE_UNIT=b._pe.PeDefs.prototype.PE_TYPE_UNIT;a.PE_STR_OPTS_NONE=b._pe.PeDefs.prototype.PE_STR_OPTS_NONE;a.PE_STR_AUTH_NONE=b._pe.PeDefs.prototype.PE_STR_AUTH_NONE;a.PE_STR_AUTH_TOP=b._pe.PeDefs.prototype.PE_STR_AUTH_TOP;a.PE_STR_NAME_CANON=b._pe.PeDefs.prototype.PE_STR_NAME_CANON;a.PE_PARM_X0=b._pe.PeDefs.prototype.PE_PARM_X0;a.PE_PARM_ND=
b._pe.PeDefs.prototype.PE_PARM_ND;a.PE_TRANSFORM_1_TO_2=b._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;a.PE_TRANSFORM_2_TO_1=b._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;a.PE_TRANSFORM_P_TO_G=b._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;a.PE_TRANSFORM_G_TO_P=b._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;a.PE_HORIZON_RECT=b._pe.PeDefs.prototype.PE_HORIZON_RECT;a.PE_HORIZON_POLY=b._pe.PeDefs.prototype.PE_HORIZON_POLY;a.PE_HORIZON_LINE=b._pe.PeDefs.prototype.PE_HORIZON_LINE;a.PE_HORIZON_DELTA=b._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(d=
b.PeDefs||(b.PeDefs={}));(function(a){function c(a,c){var d=null,h=f[a];h||(h={},f[a]=h);h.hasOwnProperty(String(c))?d=h[c]:(a=b._pe.PeFactory.prototype.factoryByType(a,c),b._pe.compare(a,b._pe.NULL)||(d=a,h[c]=d));return d=e(d)}function e(a){if(a){var c=a.getType();switch(c){case d.PE_TYPE_GEOGCS:a=b._pe.castObject(a,b._pe.PeGeogcs);break;case d.PE_TYPE_PROJCS:a=b._pe.castObject(a,b._pe.PeProjcs);break;case d.PE_TYPE_GEOGTRAN:a=b._pe.castObject(a,b._pe.PeGeogtran);break;default:c&d.PE_TYPE_UNIT&&
(a=b._pe.castObject(a,b._pe.PeUnit))}}return a}var f={},h={};a.initialize=function(){b._pe.PeFactory.prototype.initialize(null)};a.coordsys=function(a){return c(d.PE_TYPE_COORDSYS,a)};a.factoryByType=c;a.fromString=function(a,c){var d=null,f=h[a];f||(f={},h[a]=f);f.hasOwnProperty(c)?d=f[c]:(a=b._pe.PeFactory.prototype.fromString(a,c),b._pe.compare(a,b._pe.NULL)||(d=a,f[c]=d));return d=e(d)};a.geogcs=function(a){return c(d.PE_TYPE_GEOGCS,a)};a.geogtran=function(a){return c(d.PE_TYPE_GEOGTRAN,a)};a.getCode=
function(a){return b._pe.PeFactory.prototype.getCode(a)};a.projcs=function(a){return c(d.PE_TYPE_PROJCS,a)};a.unit=function(a){return c(d.PE_TYPE_UNIT,a)}})(b.PeFactory||(b.PeFactory={}));b.PeGCSExtent=null;var x;(function(a){var c;a.init=function(){a.PE_GTLIST_OPTS_COMMON=b._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;c=b._pe._pe_getPeGTlistExtendedEntrySize()};a.getGTlist=function(a,d,e,f,h,n){var k=null,m=new b._pe.PeInteger(n);try{var l=b._pe.PeGTlistExtended.prototype.getGTlist(a,d,e,
f,h,m);if(n=m.val)if(k=[l],1<n){var w=b._pe.getPointer(l);for(a=1;a<n;a++)k.push(b._pe.wrapPointer(w+c*a,b._pe.PeGTlistExtendedEntry))}}finally{b._pe.destroy(m)}return k}})(x=b.PeGTlistExtended||(b.PeGTlistExtended={}));(function(a){a.destroy=function(a){if(a&&a.length){for(var c=0;c<a.length;c++){var d=a[c];f(d);d.getEntries().forEach(function(a){f(a);a=a.getGeogtran();f(a);a.getParameters().forEach(f);[a.getGeogcs1(),a.getGeogcs2()].forEach(function(a){f(a);var c=a.getDatum();f(c);f(c.getSpheroid());
f(a.getPrimem());f(a.getUnit())})})}b._pe.PeGTlistExtendedEntry.prototype.Delete(a[0])}}})(b.PeGTlistExtendedEntry||(b.PeGTlistExtendedEntry={}));(function(a){a.geogToGeog=function(a,c,d,e,f){b._pe.ensureCache.prepare();var h=m(d),n=d===h,h=b._pe.ensureFloat64(h),k=0;e&&(k=b._pe.ensureFloat64(e));(a=b._pe._pe_geog_to_geog(b._pe.getPointer(a),c,h,k,f))&&A(d,c,h,n);return a}})(b.PeGTTransformations||(b.PeGTTransformations={}));(function(a){function e(a,e,f,h,n,l){b._pe.ensureCache.prepare();var k,w;
switch(a){case "dd":k=b._pe._pe_geog_to_dd;w=d.PE_DD_MAX;break;case "ddm":k=b._pe._pe_geog_to_ddm;w=d.PE_DDM_MAX;break;case "dms":k=b._pe._pe_geog_to_dms,w=d.PE_DMS_MAX}a=0;e&&(a=b._pe.getPointer(e));e=m(h);e=b._pe.ensureFloat64(e);w=c(f,w);h=b._pe.ensureInt32(w);if(n=k(a,f,e,n,h))for(k=0;k<f;k++)l[k]=b._pe.UTF8ToString(w[k]);return n}function f(a,c,d,e,f){b._pe.ensureCache.prepare();var h;switch(a){case "dd":h=b._pe._pe_dd_to_geog;break;case "ddm":h=b._pe._pe_ddm_to_geog;break;case "dms":h=b._pe._pe_dms_to_geog}a=
0;c&&(a=b._pe.getPointer(c));c=e.map(function(a){return b._pe.ensureString(a)});e=b._pe.ensureInt32(c);c=b._pe.ensureFloat64(Array(2*d));(h=h(a,d,e,c))&&A(f,d,c);return h}a.geog_to_dms=function(a,c,d,b,f){return e("dms",a,c,d,b,f)};a.dms_to_geog=function(a,c,d,e){return f("dms",a,c,d,e)};a.geog_to_ddm=function(a,c,d,b,f){return e("ddm",a,c,d,b,f)};a.ddm_to_geog=function(a,c,d,e){return f("ddm",a,c,d,e)};a.geog_to_dd=function(a,c,d,b,f){return e("dd",a,c,d,b,f)};a.dd_to_geog=function(a,c,d,e){return f("dd",
a,c,d,e)}})(b.PeNotationDms||(b.PeNotationDms={}));var p;(function(a){a.init=function(){a.PE_MGRS_STYLE_NEW=b._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;a.PE_MGRS_STYLE_OLD=b._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;a.PE_MGRS_STYLE_AUTO=b._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;a.PE_MGRS_180_ZONE_1_PLUS=b._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;a.PE_MGRS_ADD_SPACES=b._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};a.geog_to_mgrs_extended=function(a,e,f,h,l,g,n){b._pe.ensureCache.prepare();
var k=0;a&&(k=b._pe.getPointer(a));a=m(f);f=b._pe.ensureFloat64(a);a=c(e,d.PE_MGRS_MAX);var w=b._pe.ensureInt32(a);if(h=b._pe._pe_geog_to_mgrs_extended(k,e,f,h,l,g,w))for(l=0;l<e;l++)n[l]=b._pe.UTF8ToString(a[l]);return h};a.mgrs_to_geog_extended=function(a,c,d,e,f){b._pe.ensureCache.prepare();var h=0;a&&(h=b._pe.getPointer(a));a=d.map(function(a){return b._pe.ensureString(a)});d=b._pe.ensureInt32(a);a=b._pe.ensureFloat64(Array(2*c));(e=b._pe._pe_mgrs_to_geog_extended(h,c,d,e,a))&&A(f,c,a);return e}})(p=
b.PeNotationMgrs||(b.PeNotationMgrs={}));(function(a){a.geog_to_usng=function(a,e,f,h,l,g,n){b._pe.ensureCache.prepare();var k=0;a&&(k=b._pe.getPointer(a));a=m(f);f=b._pe.ensureFloat64(a);a=c(e,d.PE_MGRS_MAX);var w=b._pe.ensureInt32(a);if(h=b._pe._pe_geog_to_usng(k,e,f,h,l,g,w))for(l=0;l<e;l++)n[l]=b._pe.UTF8ToString(a[l]);return h};a.usng_to_geog=function(a,c,d,e){b._pe.ensureCache.prepare();var f=0;a&&(f=b._pe.getPointer(a));a=d.map(function(a){return b._pe.ensureString(a)});d=b._pe.ensureInt32(a);
a=b._pe.ensureFloat64(Array(2*c));(f=b._pe._pe_usng_to_geog(f,c,d,a))&&A(e,c,a);return f}})(b.PeNotationUsng||(b.PeNotationUsng={}));var u;(function(a){a.init=function(){a.PE_UTM_OPTS_NONE=b._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;a.PE_UTM_OPTS_ADD_SPACES=b._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;a.PE_UTM_OPTS_NS=b._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};a.geog_to_utm=function(a,e,f,h,l){b._pe.ensureCache.prepare();var k=0;a&&(k=b._pe.getPointer(a));a=m(f);f=b._pe.ensureFloat64(a);
a=c(e,d.PE_UTM_MAX);var n=b._pe.ensureInt32(a);if(h=b._pe._pe_geog_to_utm(k,e,f,h,n))for(k=0;k<e;k++)l[k]=b._pe.UTF8ToString(a[k]);return h};a.utm_to_geog=function(a,c,d,e,f){b._pe.ensureCache.prepare();var h=0;a&&(h=b._pe.getPointer(a));a=d.map(function(a){return b._pe.ensureString(a)});d=b._pe.ensureInt32(a);a=b._pe.ensureFloat64(Array(2*c));(e=b._pe._pe_utm_to_geog(h,c,d,e,a))&&A(f,c,a);return e}})(u=b.PeNotationUtm||(b.PeNotationUtm={}));var z;(function(a){var c=new Map;a.init=function(){a.PE_PCSINFO_OPTION_NONE=
b._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;a.PE_PCSINFO_OPTION_DOMAIN=b._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;a.PE_POLE_OUTSIDE_BOUNDARY=b._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;a.PE_POLE_POINT=b._pe.PePCSInfo.prototype.PE_POLE_POINT};a.generate=function(d,e){void 0===e&&(e=a.PE_PCSINFO_OPTION_DOMAIN);var f,h;c.has(d)&&(h=c.get(d),h[e]&&(f=h[e]));f||(f=b._pe.PePCSInfo.prototype.generate(d,e),h||(h=[],c.set(d,h)),h[e]=f);return f}})(z=b.PePCSInfo||(b.PePCSInfo={}));(function(a){a.version_string=
function(){return b._pe.PeVersion.prototype.version_string()}})(b.PeVersion||(b.PeVersion={}));b._init=l})},"esri/geometry/support/GeographicTransformation":function(){define(["require","exports","./GeographicTransformationStep"],function(D,b,g){return function(){function b(e){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(e&&e.steps){var b=0;for(e=e.steps;b<e.length;b++){var l=e[b];l instanceof g?this.steps.push(l):this.steps.push(new g({wkid:l.wkid,wkt:l.wkt,isInverse:l.isInverse}))}}}
b.cacheKey=function(e,b){return[void 0!==e.wkid&&null!==e.wkid?e.wkid.toString():"-1",void 0!==e.wkt&&null!==e.wkt?e.wkt.toString():"",void 0!==b.wkid&&null!==b.wkid?b.wkid.toString():"-1",void 0!==b.wkt&&null!==b.wkt?b.wkt.toString():""].join()};b.fromGE=function(e){var q=new b,l="",f=0;for(e=e.steps;f<e.length;f++){var c=g.fromGE(e[f]);q.steps.push(c);l+=c.uid.toString()+","}q._cached_projection={};q._gtlistentry=null;q._chain=l;return q};b.prototype.getInverse=function(){var e=new b;e.steps=[];
for(var g=this.steps.length-1;0<=g;g--)e.steps.push(this.steps[g].getInverse());return e};b.prototype.getGTListEntry=function(){for(var e="",b=0,l=this.steps;b<l.length;b++)e+=l[b].uid.toString()+",";e!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=e);return this._gtlistentry};b.prototype.assignCachedGe=function(e,g,l){this._cached_projection[b.cacheKey(e,g)]=l};b.prototype.getCachedGeTransformation=function(e,g){for(var l="",f=0,c=this.steps;f<c.length;f++)l+=c[f].uid.toString()+
",";l!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=l);e=this._cached_projection[b.cacheKey(e,g)];return void 0===e?null:e};return b}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["require","exports"],function(D,b){var g=0;return function(){function b(e){void 0===e&&(e=null);this.uid=g++;e?(this._wkt=void 0!==e.wkt?e.wkt:null,this._wkid=void 0!==e.wkid?e.wkid:-1,this._isInverse=void 0!==e.isInverse?!0===e.isInverse:!1):(this._wkt=null,
this._wkid=-1,this._isInverse=!1)}b.fromGE=function(e){var g=new b;g._wkt=e.wkt;g._wkid=e.wkid;g._isInverse=e.isInverse;return g};Object.defineProperty(b.prototype,"wkt",{get:function(){return this._wkt},set:function(e){this._wkt=e;this.uid=g++},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"wkid",{get:function(){return this._wkid},set:function(e){this._wkid=e;this.uid=g++},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"isInverse",{get:function(){return this._isInverse},
set:function(e){this._isInverse=e;this.uid=g++},enumerable:!1,configurable:!0});b.prototype.getInverse=function(){var e=new b;e._wkt=this.wkt;e._wkid=this._wkid;e._isInverse=!this.isInverse;return e};return b}()})},"esri/layers/support/rasterFormats/RasterCodec":function(){define("require exports tslib ../../../core/Error ../../../core/SetUtils ../PixelBlock ./ImageCanvasDecoder ./JpgPlus ./Lerc2Codec ./LercCodec ./Png ./Raw ./TiffDecoder".split(" "),function(D,b,g,q,e,r,l,f,c,m,A,a,d){function x(a,
c){if(!w)throw new q("rasterCoded:decode","lerc decoder is not supported on big endian platform");var d=c.width,e=c.height,b=c.pixelType,f=B(b),h=f.pixelTypeCtor;c=null==c.noDataValue?f.noDataValue:c.noDataValue;for(var f=0,n,k=0,l,g=a.byteLength-10;k<g;){var p=m.decode(a,{inputOffset:k,encodedMaskData:n,returnMask:0===f?!0:!1,returnEncodedMask:0===f?!0:!1,returnFileInfo:!0,pixelType:h,noDataValue:c});if(d&&e&&(p.width!==d||p.height!==e))throw new q("rasterCoded:decode","lerc decoded result has width or height different from specified in options");
k=p.fileInfo.eofOffset;0===f&&(n=p.encodedMaskData,l=new r({width:p.width,height:p.height,pixels:[],pixelType:b,mask:p.maskData,statistics:[]}));f++;l.addData({pixels:p.pixelData,statistics:{minValue:p.minValue,maxValue:p.maxValue,noDataValue:p.noDataValue}});10<g-k&&(p=String.fromCharCode.apply(null,new Uint8Array(a,k,10)),k=-1<k+p.indexOf("CntZ")?p.indexOf("CntZ"):0)}return l}function p(a,d){if(!w)throw new q("rasterCoded:decode","lerc decoder is not supported on big endian platform");var e=0,b=
0,f=0,h,n,k,m=a.byteLength-10,l=[],g=d.width;for(d=d.height;b<m;){n=c.decode(a,{inputOffset:b,maskData:h,returnFileInfo:!0});if(g&&d&&(n.width!==g||n.height!==d))throw new q("rasterCoded:decode","lerc2 decoded result has width or height different from what's specified in options");b=n.fileInfo.eofOffset;0===e&&(f=n.fileInfo.numValidPixel,h=n.maskData,k=new r({width:n.width,height:n.height,pixels:[],pixelType:n.fileInfo.pixelType,mask:n.maskData,statistics:[]}));n.fileInfo.mask&&0<n.fileInfo.mask.numBytes&&
l.push(n.maskData);e++;k.addData({pixels:n.pixelData,statistics:{minValue:n.minValue,maxValue:n.maxValue}});10<m-b&&(n=String.fromCharCode.apply(null,new Uint8Array(a,b,10)),b+=-1<n.indexOf("Lerc")?n.indexOf("Lerc"):0)}b=e=a=0;if(1<l.length){b=k.width*k.height;h=new Uint8Array(b);h.set(l[0]);for(a=1;a<l.length;a++)for(f=l[a],e=0;e<b;e++)h[e]&=f[e];for(e=f=0;e<b;e++)f+=h[e];k.mask=h}k.validPixelCount=f;return k}function u(a){a=d.decode(a);a=new r({width:a.width,height:a.height,pixels:a.pixels,pixelType:a.pixelType.toLowerCase(),
mask:a.mask,statistics:null});a.updateStatistics();return a}function z(a){a=f.decode(a);a=new r({width:a.width,height:a.height,pixels:a.pixels,pixelType:"U8",mask:a.mask,statistics:null});a.updateStatistics();return a}function h(a,c){a=new Uint8Array(a);var d=new A(a);a=c.width;var e=c.height;c=a*e;for(var d=d.decode(),b=0,f=0,f=new Uint8Array(c),b=0;b<c;b++)f[b]=d[4*b+3];e=new r({width:a,height:e,pixels:[],pixelType:"U8",mask:f,statistics:[]});for(b=0;3>b;b++){a=new Uint8Array(c);for(f=0;f<c;f++)a[f]=
d[4*f+b];e.addData({pixels:a})}e.updateStatistics();return e}function v(a,c,d,e){return g.__awaiter(this,void 0,void 0,function(){var b,f,h,n;return g.__generator(this,function(k){switch(k.label){case 0:return b=new l,f=g.__assign({applyJpegMask:!1,format:c},d),[4,b.decode(a,f,e)];case 1:return h=k.sent(),n=new r(h),n.updateStatistics(),[2,n]}})})}function t(a){if(null==a)throw new q("rasterCodec:decode","parameter encodeddata is required.");a=new Uint8Array(a,0,10);var c="";255===a[0]&&216===a[1]?
c="jpg":137===a[0]&&80===a[1]&&78===a[2]&&71===a[3]?c="png":67===a[0]&&110===a[1]&&116===a[2]&&90===a[3]&&73===a[4]&&109===a[5]&&97===a[6]&&103===a[7]&&101===a[8]&&32===a[9]?c="lerc":76===a[0]&&101===a[1]&&114===a[2]&&99===a[3]&&50===a[4]&&32===a[5]?c="lerc2":73===a[0]&&73===a[1]&&42===a[2]&&0===a[3]||77===a[0]&&77===a[1]&&0===a[2]&&42===a[3]?c="tiff":71===a[0]&&73===a[1]&&70===a[2]?c="gif":66===a[0]&&77===a[1]?c="bmp":-1<String.fromCharCode.apply(null,a).toLowerCase().indexOf("error")&&(c="error");
return c}function k(c){var d=null;switch(c){case "lerc":d=x;break;case "lerc2":d=p;break;case "jpg":d=z;break;case "png":d=h;break;case "bsq":case "bip":d=function(d,e){var b=B(e.pixelType).pixelTypeCtor,f=a.decode;d=f(d,{width:e.width,height:e.height,pixelType:b,format:c});e=new r({width:e.width,height:e.height,pixels:d.pixels,pixelType:e.pixelType,mask:d.mask,statistics:null});e.updateStatistics();return e};break;case "tiff":d=u;break;case "error":d=function(){throw new q("rasterCodec:decode","input data contains error");
};break;default:d=function(){throw new q("rasterCodec:decode","unsupported raster format");}}return d}function B(a){var c=null,d=null;switch(a?a.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":d=Math.pow(2,8)-1;c=Uint8Array;break;case "u16":d=d||Math.pow(2,16)-1;c=Uint16Array;break;case "u32":d=d||Math.pow(2,32)-1;c=Uint32Array;break;case "s8":d=d||0-Math.pow(2,7);c=Int8Array;break;case "s16":d=d||0-Math.pow(2,15);c=Int16Array;break;case "s32":d=d||0-Math.pow(2,31);c=Int32Array;break;
default:c=Float32Array}return{pixelTypeCtor:c,noDataValue:d}}Object.defineProperty(b,"__esModule",{value:!0});b.decode=b.getFormat=void 0;var y=e.SetFromValues(["jpg","png","bmp","gif"]),w=function(){var a=new ArrayBuffer(4),c=new Uint8Array(a);(new Uint32Array(a))[0]=1;return 1===c[0]}();b.getFormat=function(a){a=t(a);"lerc2"===a?a="lerc":"error"===a&&(a="");return a};b.decode=function(a,c,e){return g.__awaiter(this,void 0,void 0,function(){var b,f,h;return g.__generator(this,function(m){switch(m.label){case 0:if(null==
a)throw new q("rasterCodec:decode","missing encodeddata parameter.");if(null==c||null==c.width||null==c.height)throw new q("rasterCodec:decode","requires width and height in options parameter.");b=c.format&&c.format.toLowerCase();if("tiff"===b&&c.customOptions)return m=d.decodeTileOrStrip(a,c.customOptions),m=new r({width:m.width,height:m.height,pixels:m.pixels,pixelType:m.pixelType.toLowerCase(),mask:m.mask,statistics:null}),m.updateStatistics(),[2,m];if(!b||"bsq"!==b&&"bip"!==b)b=t(a);return c.useCanvas&&
y.has(b)?[4,v(a,b,c,e)]:[3,2];case 1:return h=m.sent(),[3,3];case 2:f=k(b);c.isPoint&&(c=g.__assign({},c),c.width++,c.height++);h=f(a,c);if(c.isPoint){var n=h,l=void 0;void 0===l&&(l=1);if(n){var w=n.pixels,p=n.width,A=n.mask;if(w&&0!==w.length){var u=w.length,x=p-1,G=n.height-1,B=[],z,C,J,F,I,M,D=r.getPixelArrayConstructor(n.pixelType);if(0===l){for(l=0;l<u;l++){F=w[l];I=new D(x*G);for(z=0;z<G;z++)for(J=z*p,C=0;C<x;C++)I[z*x+C]=F[J+C];B.push(I)}if(A)for(M=new Uint8Array(x*G),z=0;z<G;z++)for(J=z*
p,C=0;C<x;C++)M[z*x+C]=A[J+C]}else{for(l=0;l<u;l++){F=w[l];I=new D(x*G);for(z=0;z<G;z++)for(J=z*p,C=0;C<x;C++)I[z*x+C]=(F[J+C]+F[J+C+1]+F[J+p+C]+F[J+p+C+1])/4;B.push(I)}if(A)for(M=new Uint8Array(x*G),z=0;z<G;z++)for(J=z*p,C=0;C<x;C++)M[z*x+C]=Math.min.apply(null,[A[J+C],A[J+C+1],A[J+p+C],A[J+p+C+1]])}n.width=x;n.height=G;n.mask=M;n.pixels=B}}}m.label=3;case 3:return[2,h]}})})}})},"esri/layers/support/rasterFormats/ImageCanvasDecoder":function(){define("require exports ../../../core/Error ../../../core/promiseUtils ../../../core/promiseUtils ./Zlib".split(" "),
function(D,b,g,q,e,r){return function(){function b(e){e&&(this.canvas=e.canvas,this.ctx=e.ctx||e.canvas&&e.canvas.getContext("2d"))}b.prototype.decode=function(f,c,m){var l=this;if(!f||10>f.byteLength)throw new g("imagecanvasdecoder: decode","required a valid encoded data as input.");var a=c.width,d=c.height,r=c.format,p=c.applyJpegMask;if(p&&(!a||!d))throw new g("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return q.create(function(g,A){var h=
null;"jpg"===r&&p&&(h=b.getMask(f,c));var u=new Blob([new Uint8Array(f)],{type:"jpg"==="image/"+r?"jpeg":r}),t=URL.createObjectURL(u),k=new Image,x;k.src=t;k.onload=function(){URL.revokeObjectURL(t);if(q.isAborted(m))A(e.createAbortError());else{a=k.width;d=k.height;if(l.canvas){if(l.canvas.width!==a||l.canvas.height!==d)l.canvas.width=a,l.canvas.height=d;l.ctx.clearRect(0,0,a,d)}else l.canvas=document.createElement("canvas"),l.canvas.width=a,l.canvas.height=d,l.ctx=l.canvas.getContext("2d");l.ctx.drawImage(k,
0,0);var b=l.ctx.getImageData(0,0,a,d);x=b.data;var f;if(c.renderOnCanvas){if(h)for(f=0;f<h.length;f++)x[4*f+3]=h[f]?255:0;l.ctx.putImageData(b,0,0);g(null)}else{var b=a*d,n=new Uint8Array(b),p=new Uint8Array(b),u=new Uint8Array(b);if(h)for(f=0;f<b;f++)n[f]=x[4*f],p[f]=x[4*f+1],u[f]=x[4*f+2];else for(h=new Uint8Array(b),f=0;f<b;f++)n[f]=x[4*f],p[f]=x[4*f+1],u[f]=x[4*f+2],h[f]=x[4*f+3];g({width:a,height:d,pixels:[n,p,u],mask:h,pixelType:"u8"})}}};k.onerror=function(){URL.revokeObjectURL(t);A("cannot load image")}})};
b.getMask=function(e,c){var b=null;try{var f=new Uint8Array(e);e=0;var a=f.length-2;for(e=Math.ceil(f.length/2);e<a&&(255!==f[e]||217!==f[e+1]);e++);e+=2;if(e<f.length-1)for(var d=(new r(f.subarray(e))).getBytes(),b=new Uint8Array(c.width*c.height),f=c=0;f<d.length;f++)for(a=7;0<=a;a--)b[c++]=d[f]>>a&1}catch(x){}return b};return b}()})},"esri/layers/support/rasterFormats/Zlib":function(){define([],function(){var D=function(){function b(){this.bufferLength=this.pos=0;this.eof=!1;this.buffer=null}b.prototype=
{ensureBuffer:function(b){var g=this.buffer,e=g?g.byteLength:0;if(b<e)return g;for(var r=512;r<b;)r<<=1;b=new Uint8Array(r);for(r=0;r<e;++r)b[r]=g[r];return this.buffer=b},getByte:function(){for(var b=this.pos;this.bufferLength<=b;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(b){var g=this.pos;if(b){this.ensureBuffer(g+b);for(b=g+b;!this.eof&&this.bufferLength<b;)this.readBlock();var e=this.bufferLength;b>e&&(b=e)}else{for(;!this.eof;)this.readBlock();
b=this.bufferLength}this.pos=b;return this.buffer.subarray(g,b)},lookChar:function(){for(var b=this.pos;this.bufferLength<=b;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var b=this.pos;this.bufferLength<=b;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(b,q,e){for(var g=b+q;this.bufferLength<=g&&!this.eof;)this.readBlock();return new Stream(this.buffer,b,q,
e)},skip:function(b){b||(b=1);this.pos+=b},reset:function(){this.pos=0}};return b}();return function(){function b(c){throw Error(c);}function g(c){var e=0,f=c[e++],a=c[e++];-1!=f&&-1!=a||b("Invalid header in flate stream");8!=(f&15)&&b("Unknown compression method in flate stream");0!=((f<<8)+a)%31&&b("Bad FCHECK in flate stream");a&32&&b("FDICT bit set in flate stream");this.bytes=c;this.bytesPos=e;this.codeBuf=this.codeSize=0;D.call(this)}if(!self||!self.Uint32Array)return null;var q=new Uint32Array([16,
17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),e=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),r=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),l=[new Uint32Array([459008,524368,524304,524568,459024,524400,
524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,
524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,
524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,
524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,
524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,
524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,
524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,
524367,590079]),9],f=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];g.prototype=Object.create(D.prototype);g.prototype.getBits=function(c){for(var e=this.codeSize,f=this.codeBuf,a=this.bytes,d=this.bytesPos,l;e<c;)"undefined"==typeof(l=a[d++])&&b("Bad encoding in flate stream"),f|=l<<e,e+=8;this.codeBuf=f>>c;this.codeSize=
e-=c;this.bytesPos=d;return f&(1<<c)-1};g.prototype.getCode=function(c){var e=c[0],f=c[1];c=this.codeSize;for(var a=this.codeBuf,d=this.bytes,l=this.bytesPos;c<f;){var g;"undefined"==typeof(g=d[l++])&&b("Bad encoding in flate stream");a|=g<<c;c+=8}f=e[a&(1<<f)-1];e=f>>16;f&=65535;(0==c||c<e||0==e)&&b("Bad encoding in flate stream");this.codeBuf=a>>e;this.codeSize=c-e;this.bytesPos=l;return f};g.prototype.generateHuffmanTable=function(c){for(var e=c.length,b=0,a=0;a<e;++a)c[a]>b&&(b=c[a]);for(var d=
1<<b,f=new Uint32Array(d),l=1,g=0,q=2;l<=b;++l,g<<=1,q<<=1)for(var h=0;h<e;++h)if(c[h]==l){for(var v=0,t=g,a=0;a<l;++a)v=v<<1|t&1,t>>=1;for(a=v;a<d;a+=q)f[a]=l<<16|h;++g}return[f,b]};g.prototype.readBlock=function(){function c(a,c,e,d,b){for(a=a.getBits(e)+d;0<a--;)c[u++]=b}var m=this.getBits(3);m&1&&(this.eof=!0);m>>=1;if(0==m){var g=this.bytes,a=this.bytesPos,d;"undefined"==typeof(d=g[a++])&&b("Bad block header in flate stream");var x=d;"undefined"==typeof(d=g[a++])&&b("Bad block header in flate stream");
x|=d<<8;"undefined"==typeof(d=g[a++])&&b("Bad block header in flate stream");m=d;"undefined"==typeof(d=g[a++])&&b("Bad block header in flate stream");(m|d<<8)!=(~x&65535)&&b("Bad uncompressed block length in flate stream");this.codeSize=this.codeBuf=0;d=this.bufferLength;m=this.ensureBuffer(d+x);this.bufferLength=x=d+x;for(var p=d;p<x;++p){if("undefined"==typeof(d=g[a++])){this.eof=!0;break}m[p]=d}this.bytesPos=a}else{if(1==m)a=l,d=f;else if(2==m){m=this.getBits(5)+257;d=this.getBits(5)+1;for(var g=
this.getBits(4)+4,a=Array(q.length),u=0;u<g;)a[q[u++]]=this.getBits(3);a=this.generateHuffmanTable(a);u=g=0;d=m+d;for(x=Array(d);u<d;)p=this.getCode(a),16==p?c(this,x,2,3,g):17==p?c(this,x,3,3,g=0):18==p?c(this,x,7,11,g=0):x[u++]=g=p;a=this.generateHuffmanTable(x.slice(0,m));d=this.generateHuffmanTable(x.slice(m,d))}else b("Unknown block type in flate stream");x=(m=this.buffer)?m.length:0;for(p=this.bufferLength;;){var z=this.getCode(a);if(256>z)p+1>=x&&(m=this.ensureBuffer(p+1),x=m.length),m[p++]=
z;else{if(256==z){this.bufferLength=p;break}var z=z-257,z=e[z],h=z>>16;0<h&&(h=this.getBits(h));g=(z&65535)+h;z=this.getCode(d);z=r[z];h=z>>16;0<h&&(h=this.getBits(h));z=(z&65535)+h;p+g>=x&&(m=this.ensureBuffer(p+g),x=m.length);for(h=0;h<g;++h,++p)m[p]=m[p-z]}}}};return g}()})},"esri/layers/support/rasterFormats/JpgPlus":function(){define(["require","exports","./Jpg","./Zlib"],function(D,b,g,q){return function(){function e(){}e.decode=function(e){var b=new Uint8Array(e),f=new g;f.parse(b);e=f.width;
var c=f.height,m=f.numComponents,A=f.eof,f=f.getData(e,c,!0),a,d=e*c,r=0,p=0,u=0;if(A<b.length-1)for(b=(new q(b.subarray(A))).getBytes(),a=new Uint8Array(d),r=A=0;r<b.length;r++)for(u=7;0<=u;u--)a[A++]=b[r]>>u&1;b=null;if(1===m)b=[f,f,f];else{b=[];for(r=0;3>r;r++)m=new Uint8Array(d),b.push(m);for(p=u=0;p<d;p++)for(r=0;3>r;r++)b[r][p]=f[u++]}return{width:e,height:c,pixels:b,mask:a}};return e}()})},"esri/layers/support/rasterFormats/Jpg":function(){define([],function(){var D=function(){function b(b){this.message=
"JPEG error: "+b}b.prototype=Error();b.prototype.name="JpegError";return b.constructor=b}();return function(){function b(){this.decodeTransform=null;this.colorTransform=-1}function g(e,c){for(var b=0,f=[],a,d,l=16;0<l&&!e[l-1];)l--;f.push({children:[],index:0});var g=f[0],q;for(a=0;a<l;a++){for(d=0;d<e[a];d++){g=f.pop();for(g.children[g.index]=c[b];0<g.index;)g=f.pop();g.index++;for(f.push(g);f.length<=a;)f.push(q={children:[],index:0}),g.children[g.index]=q.children,g=q;b++}a+1<l&&(f.push(q={children:[],
index:0}),g.children[g.index]=q.children,g=q)}return f[0].children}function q(e,c,b,g,a,d,q,p,u){function f(){if(0<J)return J--,G>>J&1;G=e[c++];if(255===G){var a=e[c++];if(a)throw new D("unexpected marker "+(G<<8|a).toString(16));}J=7;return G>>>7}function h(a){for(;;){a=a[f()];if("number"===typeof a)return a;if("object"!==typeof a)throw new D("invalid huffman sequence");}}function m(a){for(var c=0;0<a;)c=c<<1|f(),a--;return c}function t(a){if(1===a)return 1===f()?1:-1;var c=m(a);return c>=1<<a-1?
c:c+(-1<<a)+1}function k(a,c){var e=h(a.huffmanTableDC),e=0===e?0:t(e);a.blockData[c]=a.pred+=e;for(e=1;64>e;){var b=h(a.huffmanTableAC),d=b&15,b=b>>4;if(0===d){if(15>b)break;e+=16}else e+=b,a.blockData[c+l[e]]=t(d),e++}}function A(a,c){var e=h(a.huffmanTableDC),e=0===e?0:t(e)<<u;a.blockData[c]=a.pred+=e}function y(a,c){a.blockData[c]|=f()<<u}function w(a,c){if(0<I)I--;else for(var e=d;e<=q;){var b=h(a.huffmanTableAC),f=b&15,b=b>>4;if(0===f){if(15>b){I=m(b)+(1<<b)-1;break}e+=16}else e+=b,a.blockData[c+
l[e]]=t(f)*(1<<u),e++}}function n(a,c){for(var e=d,b=0,k;e<=q;){k=l[e];switch(M){case 0:b=h(a.huffmanTableAC);k=b&15;b>>=4;if(0===k)15>b?(I=m(b)+(1<<b),M=4):(b=16,M=1);else{if(1!==k)throw new D("invalid ACn encoding");H=t(k);M=b?2:3}continue;case 1:case 2:a.blockData[c+k]?a.blockData[c+k]+=f()<<u:(b--,0===b&&(M=2===M?3:0));break;case 3:a.blockData[c+k]?a.blockData[c+k]+=f()<<u:(a.blockData[c+k]=H<<u,M=0);break;case 4:a.blockData[c+k]&&(a.blockData[c+k]+=f()<<u)}e++}4===M&&(I--,0===I&&(M=0))}var x=
b.mcusPerLine,F=c,G=0,J=0,I=0,M=0,H,E=g.length,L,K,P,V,U;p=b.progressive?0===d?0===p?A:y:0===p?w:n:k;var R=0;b=1===E?g[0].blocksPerLine*g[0].blocksPerColumn:x*b.mcusPerColumn;for(var O,S;R<b;){var N=a?Math.min(b-R,a):b;for(K=0;K<E;K++)g[K].pred=0;I=0;if(1===E)for(L=g[0],U=0;U<N;U++)p(L,64*((L.blocksPerLine+1)*(R/L.blocksPerLine|0)+R%L.blocksPerLine)),R++;else for(U=0;U<N;U++){for(K=0;K<E;K++)for(L=g[K],O=L.h,S=L.v,P=0;P<S;P++)for(V=0;V<O;V++)p(L,64*((L.blocksPerLine+1)*((R/x|0)*L.v+P)+(R%x*L.h+V)));
R++}J=0;(L=r(e,c))&&L.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+L.invalid),c=L.offset);L=L&&L.marker;if(!L||65280>=L)throw new D("marker was not found");if(65488<=L&&65495>=L)c+=2;else break}(L=r(e,c))&&L.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+L.invalid),c=L.offset);return c-F}function e(e,c){e=c.blocksPerLine;for(var b=c.blocksPerColumn,f=new Int16Array(64),a=0;a<b;a++)for(var d=0;d<e;d++){var l=64*((c.blocksPerLine+1)*a+d),g=
f,q=c.quantizationTable,r=c.blockData,h=void 0,v=void 0,t=void 0,k=void 0,B=void 0,y=void 0,w=void 0,n=void 0,C=void 0,F=n=void 0,G=w=v=y=void 0,J=void 0,C=void 0;if(!q)throw new D("missing required Quantization Table.");for(var I=0;64>I;I+=8)C=r[l+I],n=r[l+I+1],F=r[l+I+2],y=r[l+I+3],v=r[l+I+4],w=r[l+I+5],G=r[l+I+6],J=r[l+I+7],C*=q[I],0===(n|F|y|v|w|G|J)?(C=5793*C+512>>10,g[I]=C,g[I+1]=C,g[I+2]=C,g[I+3]=C,g[I+4]=C,g[I+5]=C,g[I+6]=C,g[I+7]=C):(n*=q[I+1],F*=q[I+2],y*=q[I+3],v*=q[I+4],w*=q[I+5],G*=q[I+
6],J*=q[I+7],h=5793*C+128>>8,v=5793*v+128>>8,t=F,k=G,B=2896*(n-J)+128>>8,n=2896*(n+J)+128>>8,y<<=4,w<<=4,h=h+v+1>>1,v=h-v,C=3784*t+1567*k+128>>8,t=1567*t-3784*k+128>>8,k=C,B=B+w+1>>1,w=B-w,n=n+y+1>>1,y=n-y,h=h+k+1>>1,k=h-k,v=v+t+1>>1,t=v-t,C=2276*B+3406*n+2048>>12,B=3406*B-2276*n+2048>>12,n=C,C=799*y+4017*w+2048>>12,y=4017*y-799*w+2048>>12,w=C,g[I]=h+n,g[I+7]=h-n,g[I+1]=v+w,g[I+6]=v-w,g[I+2]=t+y,g[I+5]=t-y,g[I+3]=k+B,g[I+4]=k-B);for(q=0;8>q;++q)C=g[q],n=g[q+8],F=g[q+16],y=g[q+24],v=g[q+32],w=g[q+
40],G=g[q+48],J=g[q+56],0===(n|F|y|v|w|G|J)?(C=5793*C+8192>>14,C=-2040>C?0:2024<=C?255:C+2056>>4,r[l+q]=C,r[l+q+8]=C,r[l+q+16]=C,r[l+q+24]=C,r[l+q+32]=C,r[l+q+40]=C,r[l+q+48]=C,r[l+q+56]=C):(h=5793*C+2048>>12,v=5793*v+2048>>12,t=F,k=G,B=2896*(n-J)+2048>>12,n=2896*(n+J)+2048>>12,h=(h+v+1>>1)+4112,v=h-v,C=3784*t+1567*k+2048>>12,t=1567*t-3784*k+2048>>12,k=C,B=B+w+1>>1,w=B-w,n=n+y+1>>1,y=n-y,h=h+k+1>>1,k=h-k,v=v+t+1>>1,t=v-t,C=2276*B+3406*n+2048>>12,B=3406*B-2276*n+2048>>12,n=C,C=799*y+4017*w+2048>>12,
y=4017*y-799*w+2048>>12,w=C,C=h+n,J=h-n,n=v+w,G=v-w,F=t+y,w=t-y,y=k+B,v=k-B,C=16>C?0:4080<=C?255:C>>4,n=16>n?0:4080<=n?255:n>>4,F=16>F?0:4080<=F?255:F>>4,y=16>y?0:4080<=y?255:y>>4,v=16>v?0:4080<=v?255:v>>4,w=16>w?0:4080<=w?255:w>>4,G=16>G?0:4080<=G?255:G>>4,J=16>J?0:4080<=J?255:J>>4,r[l+q]=C,r[l+q+8]=n,r[l+q+16]=F,r[l+q+24]=y,r[l+q+32]=v,r[l+q+40]=w,r[l+q+48]=G,r[l+q+56]=J)}return c.blockData}function r(e,c,b){var f=e.length-1;b=b<c?b:c;if(c>=f)return null;var a=e[c]<<8|e[c+1];if(65472<=a&&65534>=
a)return{invalid:null,marker:a,offset:c};for(c=e[b]<<8|e[b+1];!(65472<=c&&65534>=c);){if(++b>=f)return null;c=e[b]<<8|e[b+1]}return{invalid:a.toString(16),marker:c,offset:b}}if(!self||!self.Uint8ClampedArray)return null;var l=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);b.prototype={parse:function(b){function c(){var c=b[a]<<8|b[a+1];a+=2;return c}
function f(){var e=c(),e=a+e-2,d=r(b,e,a);d&&d.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+d.invalid),e=d.offset);e=b.subarray(a,e);a+=e.length;return e}function A(a){for(var c=Math.ceil(a.samplesPerLine/8/a.maxH),b=Math.ceil(a.scanLines/8/a.maxV),e=0;e<a.components.length;e++){F=a.components[e];var d=Math.ceil(Math.ceil(a.samplesPerLine/8)*F.h/a.maxH),f=Math.ceil(Math.ceil(a.scanLines/8)*F.v/a.maxV);F.blockData=new Int16Array(64*b*F.v*(c*F.h+1));F.blocksPerLine=d;F.blocksPerColumn=
f}a.mcusPerLine=c;a.mcusPerColumn=b}var a=0,d=null,x=null,p,u,z=[],h=[],v=[],t=c();if(65496!==t)throw new D("SOI not found");for(t=c();65497!==t;){var k,B;switch(t){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:k=f();65504===t&&74===k[0]&&70===k[1]&&73===k[2]&&70===k[3]&&0===k[4]&&(d={version:{major:k[5],minor:k[6]},densityUnits:k[7],xDensity:k[8]<<8|k[9],yDensity:k[10]<<
8|k[11],thumbWidth:k[12],thumbHeight:k[13],thumbData:k.subarray(14,14+3*k[12]*k[13])});65518===t&&65===k[0]&&100===k[1]&&111===k[2]&&98===k[3]&&101===k[4]&&(x={version:k[5]<<8|k[6],flags0:k[7]<<8|k[8],flags1:k[9]<<8|k[10],transformCode:k[11]});break;case 65499:for(var t=c()+a-2,y;a<t;){var w=b[a++],n=new Uint16Array(64);if(0===w>>4)for(k=0;64>k;k++)y=l[k],n[y]=b[a++];else if(1===w>>4)for(k=0;64>k;k++)y=l[k],n[y]=c();else throw new D("DQT - invalid table spec");z[w&15]=n}break;case 65472:case 65473:case 65474:if(p)throw new D("Only single frame JPEGs supported");
c();p={};p.extended=65473===t;p.progressive=65474===t;p.precision=b[a++];p.scanLines=c();p.samplesPerLine=c();p.components=[];p.componentIds={};k=b[a++];for(t=n=w=0;t<k;t++){y=b[a];B=b[a+1]>>4;var C=b[a+1]&15;w<B&&(w=B);n<C&&(n=C);B=p.components.push({h:B,v:C,quantizationId:b[a+2],quantizationTable:null});p.componentIds[y]=B-1;a+=3}p.maxH=w;p.maxV=n;A(p);break;case 65476:y=c();for(t=2;t<y;){w=b[a++];n=new Uint8Array(16);for(k=B=0;16>k;k++,a++)B+=n[k]=b[a];C=new Uint8Array(B);for(k=0;k<B;k++,a++)C[k]=
b[a];t+=17+B;(0===w>>4?v:h)[w&15]=g(n,C)}break;case 65501:c();u=c();break;case 65498:c();y=b[a++];k=[];for(var F,t=0;t<y;t++)w=p.componentIds[b[a++]],F=p.components[w],w=b[a++],F.huffmanTableDC=v[w>>4],F.huffmanTableAC=h[w&15],k.push(F);t=b[a++];y=b[a++];w=b[a++];t=q(b,a,p,k,u,t,y,w>>4,w&15);a+=t;break;case 65535:255!==b[a]&&a--;break;default:if(255===b[a-3]&&192<=b[a-2]&&254>=b[a-2])a-=3;else throw new D("unknown marker "+t.toString(16));}t=c()}this.width=p.samplesPerLine;this.height=p.scanLines;
this.jfif=d;this.eof=a;this.adobe=x;this.components=[];for(t=0;t<p.components.length;t++){F=p.components[t];if(d=z[F.quantizationId])F.quantizationTable=d;this.components.push({output:e(p,F),scaleX:F.h/p.maxH,scaleY:F.v/p.maxV,blocksPerLine:F.blocksPerLine,blocksPerColumn:F.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(b,c){var e=this.width/b,f=this.height/c,a,d,l,g,q,r,h=0,v,t=this.components.length,k=b*c*t,B=new Uint8ClampedArray(k),y=new Uint32Array(b);
for(r=0;r<t;r++){a=this.components[r];d=a.scaleX*e;l=a.scaleY*f;h=r;v=a.output;g=a.blocksPerLine+1<<3;for(q=0;q<b;q++)a=0|q*d,y[q]=(a&4294967288)<<3|a&7;for(d=0;d<c;d++)for(a=0|d*l,a=g*(a&4294967288)|(a&7)<<3,q=0;q<b;q++)B[h]=v[a+y[q]],h+=t}if(c=this.decodeTransform)for(r=0;r<k;)for(b=a=0;a<t;a++,r++,b+=2)B[r]=(B[r]*c[b]>>8)+c[b+1];return B},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0===this.colorTransform?!1:!0:1===this.colorTransform?
!0:!1},_convertYccToRgb:function(b){for(var c,e,f,a=0,d=b.length;a<d;a+=3)c=b[a],e=b[a+1],f=b[a+2],b[a]=c-179.456+1.402*f,b[a+1]=c+135.459-.344*e-.714*f,b[a+2]=c-226.816+1.772*e;return b},_convertYcckToRgb:function(b){for(var c,e,f,a,d=0,l=0,g=b.length;l<g;l+=4)c=b[l],e=b[l+1],f=b[l+2],a=b[l+3],b[d++]=-122.67195406894+e*(-6.60635669420364E-5*e+4.37130475926232E-4*f-5.4080610064599E-5*c+4.8449797120281E-4*a-.154362151871126)+f*(-9.57964378445773E-4*f+8.17076911346625E-4*c-.00477271405408747*a+1.53380253221734)+
c*(9.61250184130688E-4*c-.00266257332283933*a+.48357088451265)+a*(-3.36197177618394E-4*a+.484791561490776),b[d++]=107.268039397724+e*(2.19927104525741E-5*e-6.40992018297945E-4*f+6.59397001245577E-4*c+4.26105652938837E-4*a-.176491792462875)+f*(-7.78269941513683E-4*f+.00130872261408275*c+7.70482631801132E-4*a-.151051492775562)+c*(.00126935368114843*c-.00265090189010898*a+.25802910206845)+a*(-3.18913117588328E-4*a-.213742400323665),b[d++]=-20.810012546947+e*(-5.70115196973677E-4*e-2.63409051004589E-5*
f+.0020741088115012*c-.00288260236853442*a+.814272968359295)+f*(-1.53496057440975E-5*f-1.32689043961446E-4*c+5.60833691242812E-4*a-.195152027534049)+c*(.00174418132927582*c-.00255243321439347*a+.116935020465145)+a*(-3.43531996510555E-4*a+.24165260232407);return b},_convertYcckToCmyk:function(b){for(var c,e,f,a=0,d=b.length;a<d;a+=4)c=b[a],e=b[a+1],f=b[a+2],b[a]=434.456-c-1.402*f,b[a+1]=119.541-c+.344*e+.714*f,b[a+2]=481.816-c-1.772*e;return b},_convertCmykToRgb:function(b){for(var c,e,f,a,d=0,l=1/
255,g=0,q=b.length;g<q;g+=4)c=b[g]*l,e=b[g+1]*l,f=b[g+2]*l,a=b[g+3]*l,b[d++]=255+c*(-4.387332384609988*c+54.48615194189176*e+18.82290502165302*f+212.25662451639585*a-285.2331026137004)+e*(1.7149763477362134*e-5.6096736904047315*f-17.873870861415444*a-5.497006427196366)+f*(-2.5217340131683033*f-21.248923337353073*a+17.5119270841813)-a*(21.86122147463605*a+189.48180835922747),b[d++]=255+c*(8.841041422036149*c+60.118027045597366*e+6.871425592049007*f+31.159100130055922*a-79.2970844816548)+e*(-15.310361306967817*
e+17.575251261109482*f+131.35250912493976*a-190.9453302588951)+f*(4.444339102852739*f+9.8632861493405*a-24.86741582555878)-a*(20.737325471181034*a+187.80453709719578),b[d++]=255+c*(.8842522430003296*c+8.078677503112928*e+30.89978309703729*f-.23883238689178934*a-14.183576799673286)+e*(10.49593273432072*e+63.02378494754052*f+50.606957656360734*a-112.23884253719248)+f*(.03296041114873217*f+115.60384449646641*a-193.58209356861505)-a*(22.33816807309886*a+180.12613974708367);return b},getData:function(b,
c,e){if(4<this.numComponents)throw new D("Unsupported color mode");b=this._getLinearizedBlockData(b,c);if(1===this.numComponents&&e){e=b.length;c=new Uint8ClampedArray(3*e);for(var f=0,a=0;a<e;a++){var d=b[a];c[f++]=d;c[f++]=d;c[f++]=d}return c}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(b);if(4===this.numComponents){if(this._isColorConversionNeeded())return e?this._convertYcckToRgb(b):this._convertYcckToCmyk(b);if(e)return this._convertCmykToRgb(b)}return b}};
return b}()})},"esri/layers/support/rasterFormats/Lerc2Codec":function(){define([],function(){var D={unstuff:function(b,e,g,l,f,c,m,A){var a=(1<<g)-1,d=0,q,p=0,r,z;b[b.length-1]<<=8*(4*b.length-Math.ceil(g*l/8));if(f)for(q=0;q<l;q++)0===p&&(z=b[d++],p=32),p>=g?(r=z>>>p-g&a,p-=g):(p=g-p,r=(z&a)<<p&a,z=b[d++],p=32-p,r+=z>>>p),e[q]=f[r];else for(f=Math.ceil((A-c)/m),q=0;q<l;q++)0===p&&(z=b[d++],p=32),p>=g?(r=z>>>p-g&a,p-=g):(p=g-p,r=(z&a)<<p&a,z=b[d++],p=32-p,r+=z>>>p),e[q]=r<f?c+r*m:A},unstuffLUT:function(b,
e,g,l,f,c){var m=(1<<e)-1,q=0,a=0,d=0,r=d=0,p,u=[];b[b.length-1]<<=8*(4*b.length-Math.ceil(e*g/8));for(var z=Math.ceil((c-l)/f),a=0;a<g;a++)0===d&&(p=b[q++],d=32),d>=e?(r=p>>>d-e&m,d-=e):(d=e-d,r=(p&m)<<d&m,p=b[q++],d=32-d,r+=p>>>d),u[a]=r<z?l+r*f:c;u.unshift(l);return u},unstuff2:function(b,e,g,l,f,c,m,A){var a=(1<<g)-1,d=0,q,p=0,r=0,z,h,v;if(f)for(q=0;q<l;q++)0===p&&(h=b[d++],p=32,r=0),p>=g?(z=h>>>r&a,p-=g,r+=g):(v=g-p,z=h>>>r&a,h=b[d++],p=32-v,z|=(h&(1<<v)-1)<<g-v,r=v),e[q]=f[z];else for(f=Math.ceil((A-
c)/m),q=0;q<l;q++)0===p&&(h=b[d++],p=32,r=0),p>=g?(z=h>>>r&a,p-=g,r+=g):(v=g-p,z=h>>>r&a,h=b[d++],p=32-v,z|=(h&(1<<v)-1)<<g-v,r=v),e[q]=z<f?c+z*m:A;return e},unstuffLUT2:function(b,e,g,l,f,c){for(var m=(1<<e)-1,q=0,a=0,d=0,r=0,p=0,u=0,z,h=[],v=Math.ceil((c-l)/f),a=0;a<g;a++)0===r&&(z=b[q++],r=32,u=0),r>=e?(p=z>>>u&m,r-=e,u+=e):(d=e-r,p=z>>>u&m,z=b[q++],r=32-d,p|=(z&(1<<d)-1)<<e-d,u=d),h[a]=p<v?l+p*f:c;h.unshift(l);return h},originalUnstuff:function(b,e,g,l){var f=(1<<g)-1,c=0,m,q=0,a,d;b[b.length-
1]<<=8*(4*b.length-Math.ceil(g*l/8));for(m=0;m<l;m++)0===q&&(d=b[c++],q=32),q>=g?(a=d>>>q-g&f,q-=g):(q=g-q,a=(d&f)<<q&f,d=b[c++],q=32-q,a+=d>>>q),e[m]=a;return e},originalUnstuff2:function(b,e,g,l){var f=(1<<g)-1,c=0,m,q=0,a=0,d,r,p;for(m=0;m<l;m++)0===q&&(r=b[c++],q=32,a=0),q>=g?(d=r>>>a&f,q-=g,a+=g):(p=g-q,d=r>>>a&f,r=b[c++],q=32-p,d|=(r&(1<<p)-1)<<g-p,a=p),e[m]=d;return e}},b={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(b){for(var e=65535,g=65535,l=b.length,f=Math.floor(l/2),c=0;f;){var m=
359<=f?359:f,f=f-m;do e+=b[c++]<<8,g+=e+=b[c++];while(--m);e=(e&65535)+(e>>>16);g=(g&65535)+(g>>>16)}l&1&&(g+=e+=b[c]<<8);return((g&65535)+(g>>>16)<<16|(e&65535)+(e>>>16))>>>0},readHeaderInfo:function(b,e){var g=e.ptr,l=new Uint8Array(b,g,6),f={};f.fileIdentifierString=String.fromCharCode.apply(null,l);if(0!==f.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+f.fileIdentifierString;var g=g+6,l=new DataView(b,g,8),c=l.getInt32(0,!0);f.fileVersion=
c;g+=4;3<=c&&(f.checksum=l.getUint32(4,!0),g+=4);l=new DataView(b,g,12);f.height=l.getUint32(0,!0);f.width=l.getUint32(4,!0);g+=8;4<=c?(f.numDims=l.getUint32(8,!0),g+=4):f.numDims=1;l=new DataView(b,g,40);f.numValidPixel=l.getUint32(0,!0);f.microBlockSize=l.getInt32(4,!0);f.blobSize=l.getInt32(8,!0);f.imageType=l.getInt32(12,!0);f.maxZError=l.getFloat64(16,!0);f.zMin=l.getFloat64(24,!0);f.zMax=l.getFloat64(32,!0);g+=40;e.headerInfo=f;e.ptr=g;if(3<=c&&(b=this.computeChecksumFletcher32(new Uint8Array(b,
g-(4<=c?52:48),f.blobSize-14)),b!==f.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(b,e){var g=e.headerInfo,l=this.getDataTypeArray(g.imageType),f=g.numDims*this.getDataTypeSize(g.imageType),c=this.readSubArray(b,e.ptr,l,f);b=this.readSubArray(b,e.ptr+f,l,f);e.ptr+=2*f;f=!0;for(e=0;e<g.numDims;e++)if(c[e]!==b[e]){f=!1;break}g.minValues=c;g.maxValues=b;return f},readSubArray:function(b,e,g,l){if(g===Uint8Array)b=new Uint8Array(b,e,l);else{var f=new ArrayBuffer(l);(new Uint8Array(f)).set(new Uint8Array(b,
e,l));b=new g(f)}return b},readMask:function(b,e){var g=e.ptr,l=e.headerInfo,f=l.width*l.height,c=l.numValidPixel,m=new DataView(b,g,4),l={};l.numBytes=m.getUint32(0,!0);g+=4;if((0===c||f===c)&&0!==l.numBytes)throw"invalid mask";if(0===c)c=new Uint8Array(Math.ceil(f/8)),l.bitset=c,m=new Uint8Array(f),e.pixels.resultMask=m,g+=l.numBytes;else if(0<l.numBytes){c=new Uint8Array(Math.ceil(f/8));m=new DataView(b,g,l.numBytes);b=m.getInt16(0,!0);var q=2,a=0,d=0;do{if(0<b)for(;b--;)c[a++]=m.getUint8(q++);
else for(d=m.getUint8(q++),b=-b;b--;)c[a++]=d;b=m.getInt16(q,!0);q+=2}while(q<l.numBytes);if(-32768!==b||a<c.length)throw"Unexpected end of mask RLE encoding";m=new Uint8Array(f);for(q=q=b=0;q<f;q++)q&7?(b=c[q>>3],b<<=q&7):b=c[q>>3],b&128&&(m[q]=1);e.pixels.resultMask=m;l.bitset=c;g+=l.numBytes}e.ptr=g;e.mask=l;return!0},readDataOneSweep:function(g,e,r){var l=e.ptr,f=e.headerInfo,c=f.numDims,m=f.width*f.height,f=f.numValidPixel*b.getDataTypeSize(f.imageType)*c,q=e.pixels.resultMask;if(r===Uint8Array)g=
new Uint8Array(g,l,f);else{var a=new ArrayBuffer(f);(new Uint8Array(a)).set(new Uint8Array(g,l,f));g=new r(a)}if(g.length===m*c)e.pixels.resultPixels=g;else{e.pixels.resultPixels=new r(m*c);var d=a=r=0,x=0;if(1<c)for(d=0;d<c;d++)for(x=d*m,a=0;a<m;a++)q[a]&&(e.pixels.resultPixels[x+a]=g[r++]);else for(a=0;a<m;a++)q[a]&&(e.pixels.resultPixels[a]=g[r++])}e.ptr=l+f;return!0},readHuffmanTree:function(q,e){var r=this.HUFFMAN_LUT_BITS_MAX,l=new DataView(q,e.ptr,16);e.ptr+=16;if(2>l.getInt32(0,!0))throw"unsupported Huffman version";
var f=l.getInt32(4,!0),c=l.getInt32(8,!0),l=l.getInt32(12,!0);if(c>=l)return!1;var m=new Uint32Array(l-c);b.decodeBits(q,e,m);var A=[],a,d,x;for(a=c;a<l;a++)d=a-(a<f?0:f),A[d]={first:m[a-c],second:null};a=q.byteLength-e.ptr;m=new ArrayBuffer(4*Math.ceil(a/4));(new Uint8Array(m)).set(new Uint8Array(q,e.ptr,a));q=new Uint32Array(m);e=0;var p,m=0;p=q[0];for(a=c;a<l;a++)d=a-(a<f?0:f),x=A[d].first,0<x&&(A[d].second=p<<e>>>32-x,32-e>=x?(e+=x,32===e&&(e=0,m++,p=q[m])):(e+=x-32,m++,p=q[m],A[d].second|=p>>>
32-e));var u=p=0,z=new g;for(a=0;a<A.length;a++)void 0!==A[a]&&(p=Math.max(p,A[a].first));var u=p>=r?r:p,r=[],h,v;for(a=c;a<l;a++)if(d=a-(a<f?0:f),x=A[d].first,0<x)if(c=[x,d],x<=u)for(d=A[d].second<<u-x,h=1<<u-x,x=0;x<h;x++)r[d|x]=c;else for(d=A[d].second,h=z,--x;0<=x;x--)(v=d>>>x&1)?(h.right||(h.right=new g),h=h.right):(h.left||(h.left=new g),h=h.left),0!==x||h.val||(h.val=c[1]);return{decodeLut:r,numBitsLUTQick:u,numBitsLUT:p,tree:z,stuffedData:q,srcPtr:m,bitPos:e}},readHuffman:function(b,e,g){var l=
e.headerInfo,f=l.numDims,c=e.headerInfo.height,m=e.headerInfo.width,q=m*c,a=this.readHuffmanTree(b,e);b=a.decodeLut;var d=a.tree,r=a.stuffedData,p=a.srcPtr,u=a.bitPos,z=a.numBitsLUTQick,a=a.numBitsLUT,h=0===e.headerInfo.imageType?128:0,v,t,k=e.pixels.resultMask,B,y,w,n,C,F,G=0;0<u&&(p++,u=0);var J=r[p],I=1===e.encodeMode,M=new g(q*f),H=M,E;for(E=0;E<l.numDims;E++){1<f&&(H=new g(M.buffer,q*E,q),G=0);if(e.headerInfo.numValidPixel===m*c)for(w=C=0;w<c;w++)for(n=0;n<m;n++,C++){t=0;v=B=J<<u>>>32-z;32-u<
z&&(v=B|=r[p+1]>>>64-u-z);if(b[v])t=b[v][1],u+=b[v][0];else for(v=B=J<<u>>>32-a,32-u<a&&(v=B|=r[p+1]>>>64-u-a),v=d,F=0;F<a;F++)if(v=(y=B>>>a-F-1&1)?v.right:v.left,!v.left&&!v.right){t=v.val;u=u+F+1;break}32<=u&&(u-=32,p++,J=r[p]);t-=h;I?(t=0<n?t+G:0<w?t+H[C-m]:t+G,t&=255,G=H[C]=t):H[C]=t}else for(w=C=0;w<c;w++)for(n=0;n<m;n++,C++)if(k[C]){t=0;v=B=J<<u>>>32-z;32-u<z&&(v=B|=r[p+1]>>>64-u-z);if(b[v])t=b[v][1],u+=b[v][0];else for(v=B=J<<u>>>32-a,32-u<a&&(v=B|=r[p+1]>>>64-u-a),v=d,F=0;F<a;F++)if(v=(y=
B>>>a-F-1&1)?v.right:v.left,!v.left&&!v.right){t=v.val;u=u+F+1;break}32<=u&&(u-=32,p++,J=r[p]);t-=h;I?(t=0<n&&k[C-1]?t+G:0<w&&k[C-m]?t+H[C-m]:t+G,t&=255,G=H[C]=t):H[C]=t}e.ptr=e.ptr+4*(p+1)+(0<u?4:0)}e.pixels.resultPixels=M},decodeBits:function(b,e,g,l,f){var c=e.headerInfo,m=c.fileVersion,q=0,a=new DataView(b,e.ptr,5<=b.byteLength-e.ptr?5:b.byteLength-e.ptr),d=a.getUint8(0);q++;var r=d>>6,p=0===r?4:3-r,u=0<(d&32)?!0:!1,r=d&31,d=0;if(1===p)d=a.getUint8(q),q++;else if(2===p)d=a.getUint16(q,!0),q+=
2;else if(4===p)d=a.getUint32(q,!0),q+=4;else throw"Invalid valid pixel count type";var p=2*c.maxZError,z,h;f=1<c.numDims?c.maxValues[f]:c.zMax;if(u){e.counter.lut++;u=a.getUint8(q);q++;c=Math.ceil((u-1)*r/8);z=Math.ceil(c/4);z=new ArrayBuffer(4*z);h=new Uint8Array(z);e.ptr+=q;h.set(new Uint8Array(b,e.ptr,c));q=new Uint32Array(z);e.ptr+=c;for(a=0;u-1>>>a;)a++;c=Math.ceil(d*a/8);z=Math.ceil(c/4);z=new ArrayBuffer(4*z);h=new Uint8Array(z);h.set(new Uint8Array(b,e.ptr,c));b=new Uint32Array(z);e.ptr+=
c;e=3<=m?D.unstuffLUT2(q,r,u-1,l,p,f):D.unstuffLUT(q,r,u-1,l,p,f);3<=m?D.unstuff2(b,g,a,d,e):D.unstuff(b,g,a,d,e)}else e.counter.bitstuffer++,a=r,e.ptr+=q,0<a&&(c=Math.ceil(d*a/8),z=Math.ceil(c/4),z=new ArrayBuffer(4*z),h=new Uint8Array(z),h.set(new Uint8Array(b,e.ptr,c)),b=new Uint32Array(z),e.ptr+=c,3<=m?null==l?D.originalUnstuff2(b,g,a,d):D.unstuff2(b,g,a,d,!1,l,p,f):null==l?D.originalUnstuff(b,g,a,d):D.unstuff(b,g,a,d,!1,l,p,f))},readTiles:function(g,e,r){var l=e.headerInfo,f=l.width,c=l.height,
m=l.microBlockSize,q=l.imageType,a=b.getDataTypeSize(q),d=Math.ceil(f/m),x=Math.ceil(c/m);e.pixels.numBlocksY=x;e.pixels.numBlocksX=d;for(var p=e.pixels.ptr=0,u=0,z=0,h=0,v=0,t=0,k=0,B=0,y=0,w=0,n=0,C=0,F=0,k=F=k=0,G,J=new r(m*m),I=c%m||m,M=f%m||m,H=l.numDims,E,L=e.pixels.resultMask,K=e.pixels.resultPixels,P=5<=l.fileVersion?14:15,D=l.zMax,z=0;z<x;z++)for(v=z!==x-1?m:I,h=0;h<d;h++)for(t=h!==d-1?m:M,n=z*f*m+h*m,C=f-t,E=0;E<H;E++){1<H?(F=K,n=z*f*m+h*m,K=new r(e.pixels.resultPixels.buffer,f*c*E*a,f*
c),D=l.maxValues[E]):F=null;k=g.byteLength-e.ptr;p=new DataView(g,e.ptr,Math.min(10,k));u={};k=0;B=p.getUint8(0);k++;G=5<=l.fileVersion?B&4:0;y=B>>6&255;w=B>>2&P;if(w!==(h*m>>3&P))throw"integrity issue";if(G&&0===E)throw"integrity issue";B&=3;if(3<B)throw e.ptr+=k,"Invalid block encoding ("+B+")";if(2===B){if(G)if(L)for(p=0;p<v;p++)for(u=0;u<t;u++)L[n]&&(K[n]=F[n]),n++;else for(p=0;p<v;p++)for(u=0;u<t;u++)K[n]=F[n],n++;e.counter.constant++;e.ptr+=k}else if(0===B){if(G)throw"integrity issue";e.counter.uncompressed++;
e.ptr+=k;F=v*t*a;k=g.byteLength-e.ptr;F=F<k?F:k;k=new ArrayBuffer(0===F%a?F:F+a-F%a);G=new Uint8Array(k);G.set(new Uint8Array(g,e.ptr,F));k=new r(k);F=0;if(L)for(p=0;p<v;p++){for(u=0;u<t;u++)L[n]&&(K[n]=k[F++]),n++;n+=C}else for(p=0;p<v;p++){for(u=0;u<t;u++)K[n++]=k[F++];n+=C}e.ptr+=F*a}else if(y=b.getDataTypeUsed(G&&6>q?4:q,y),w=b.getOnePixel(u,k,y,p),k+=b.getDataTypeSize(y),3===B)if(e.ptr+=k,e.counter.constantoffset++,L)for(p=0;p<v;p++){for(u=0;u<t;u++)L[n]&&(K[n]=G?Math.min(D,F[n]+w):w),n++;n+=
C}else for(p=0;p<v;p++){for(u=0;u<t;u++)K[n]=G?Math.min(D,F[n]+w):w,n++;n+=C}else if(e.ptr+=k,b.decodeBits(g,e,J,w,E),k=0,G)if(L)for(p=0;p<v;p++){for(u=0;u<t;u++)L[n]&&(K[n]=J[k++]+F[n]),n++;n+=C}else for(p=0;p<v;p++){for(u=0;u<t;u++)K[n]=J[k++]+F[n],n++;n+=C}else if(L)for(p=0;p<v;p++){for(u=0;u<t;u++)L[n]&&(K[n]=J[k++]),n++;n+=C}else for(p=0;p<v;p++){for(u=0;u<t;u++)K[n++]=J[k++];n+=C}}},formatFileInfo:function(g){return{fileIdentifierString:g.headerInfo.fileIdentifierString,fileVersion:g.headerInfo.fileVersion,
imageType:g.headerInfo.imageType,height:g.headerInfo.height,width:g.headerInfo.width,numValidPixel:g.headerInfo.numValidPixel,microBlockSize:g.headerInfo.microBlockSize,blobSize:g.headerInfo.blobSize,maxZError:g.headerInfo.maxZError,pixelType:b.getPixelType(g.headerInfo.imageType),eofOffset:g.eofOffset,mask:g.mask?{numBytes:g.mask.numBytes}:null,pixels:{numBlocksX:g.pixels.numBlocksX,numBlocksY:g.pixels.numBlocksY,maxValue:g.headerInfo.zMax,minValue:g.headerInfo.zMin,noDataValue:g.noDataValue}}},
constructConstantSurface:function(b){var e=b.headerInfo.zMax,g=b.headerInfo.numDims,l=b.headerInfo.height*b.headerInfo.width,f=0,c=0,m=0,q=b.pixels.resultMask,a=b.pixels.resultPixels;if(q)if(1<g)for(f=0;f<g;f++)for(m=f*l,e=b.headerInfo.maxValues[f],c=0;c<l;c++)q[c]&&(a[m+c]=e);else for(c=0;c<l;c++)q[c]&&(a[c]=e);else if(1<g)for(f=0;f<g;f++)for(m=f*l,e=b.headerInfo.maxValues[f],c=0;c<l;c++)a[m+c]=e;else for(c=0;c<l;c++)a[c]=e},getDataTypeArray:function(b){switch(b){case 0:b=Int8Array;break;case 1:b=
Uint8Array;break;case 2:b=Int16Array;break;case 3:b=Uint16Array;break;case 4:b=Int32Array;break;case 5:b=Uint32Array;break;case 6:b=Float32Array;break;case 7:b=Float64Array;break;default:b=Float32Array}return b},getPixelType:function(b){switch(b){case 0:b="S8";break;case 1:b="U8";break;case 2:b="S16";break;case 3:b="U16";break;case 4:b="S32";break;case 5:b="U32";break;case 6:b="F32";break;case 7:b="F64";break;default:b="F32"}return b},isValidPixelValue:function(b,e){if(null==e)return!1;switch(b){case 0:b=
-128<=e&&127>=e;break;case 1:b=0<=e&&255>=e;break;case 2:b=-32768<=e&&32767>=e;break;case 3:b=0<=e&&65536>=e;break;case 4:b=-2147483648<=e&&2147483647>=e;break;case 5:b=0<=e&&4294967296>=e;break;case 6:b=-3.4027999387901484E38<=e&&3.4027999387901484E38>=e;break;case 7:b=4.9E-324<=e&&1.7976931348623157E308>=e;break;default:b=!1}return b},getDataTypeSize:function(b){var e=0;switch(b){case 0:case 1:e=1;break;case 2:case 3:e=2;break;case 4:case 5:case 6:e=4;break;case 7:e=8;break;default:e=b}return e},
getDataTypeUsed:function(b,e){var g=b;switch(b){case 2:case 4:g=b-e;break;case 3:case 5:g=b-2*e;break;case 6:g=0===e?b:1===e?2:1;break;case 7:g=0===e?b:b-2*e+1;break;default:g=b}return g},getOnePixel:function(b,e,g,l){b=0;switch(g){case 0:b=l.getInt8(e);break;case 1:b=l.getUint8(e);break;case 2:b=l.getInt16(e,!0);break;case 3:b=l.getUint16(e,!0);break;case 4:b=l.getInt32(e,!0);break;case 5:b=l.getUInt32(e,!0);break;case 6:b=l.getFloat32(e,!0);break;case 7:b=l.getFloat64(e,!0);break;default:throw"the decoder does not understand this pixel type";
}return b}},g=function(b,e,g){this.val=b;this.left=e;this.right=g};return{decode:function(g,e){e=e||{};var q=e.noDataValue,l=0,f={};f.ptr=e.inputOffset||0;f.pixels={};if(b.readHeaderInfo(g,f)){var l=f.headerInfo,c=l.fileVersion,m=b.getDataTypeArray(l.imageType);if(5<c)throw"unsupported lerc version 2."+c;b.readMask(g,f);l.numValidPixel===l.width*l.height||f.pixels.resultMask||(f.pixels.resultMask=e.maskData);var A=l.width*l.height;f.pixels.resultPixels=new m(A*l.numDims);f.counter={onesweep:0,uncompressed:0,
lut:0,bitstuffer:0,constant:0,constantoffset:0};if(0!==l.numValidPixel)if(l.zMax===l.zMin)b.constructConstantSurface(f);else if(4<=c&&b.checkMinMaxRanges(g,f))b.constructConstantSurface(f);else{var a=new DataView(g,f.ptr,2),d=a.getUint8(0);f.ptr++;if(d)b.readDataOneSweep(g,f,m);else if(1<c&&1>=l.imageType&&1E-5>Math.abs(l.maxZError-.5)){a=a.getUint8(1);f.ptr++;f.encodeMode=a;if(2<a||4>c&&1<a)throw"Invalid Huffman flag "+a;a?b.readHuffman(g,f,m):b.readTiles(g,f,m)}else b.readTiles(g,f,m)}f.eofOffset=
f.ptr;e.inputOffset?(g=f.headerInfo.blobSize+e.inputOffset-f.ptr,1<=Math.abs(g)&&(f.eofOffset=e.inputOffset+f.headerInfo.blobSize)):(g=f.headerInfo.blobSize-f.ptr,1<=Math.abs(g)&&(f.eofOffset=f.headerInfo.blobSize));g={width:l.width,height:l.height,pixelData:f.pixels.resultPixels,minValue:l.zMin,maxValue:l.zMax,validPixelCount:l.numValidPixel,dimCount:l.numDims,dimStats:{minValues:l.minValues,maxValues:l.maxValues},maskData:f.pixels.resultMask};if(f.pixels.resultMask&&b.isValidPixelValue(l.imageType,
q)){c=f.pixels.resultMask;for(l=0;l<A;l++)c[l]||(g.pixelData[l]=q);g.noDataValue=q}f.noDataValue=q;e.returnFileInfo&&(g.fileInfo=b.formatFileInfo(f));return g}},getBandCount:function(g){for(var e=0,q=0,l={ptr:0,pixels:{}};q<g.byteLength-58;)b.readHeaderInfo(g,l),q+=l.headerInfo.blobSize,e++,l.ptr=q;return e}}})},"esri/layers/support/rasterFormats/LercCodec":function(){define(["../../../core/mathUtils"],function(D){var b={};b.defaultNoDataValue=D.clampFloat32(-Infinity);b.decode=function(q,e){var r;
e=e||{};var l=e.inputOffset||0,f=e.encodedMaskData||null===e.encodedMaskData,c={},m=new Uint8Array(q,l,10);c.fileIdentifierString=String.fromCharCode.apply(null,m);if("CntZImage"!=c.fileIdentifierString.trim())throw"Unexpected file identifier string: "+c.fileIdentifierString;l+=10;m=new DataView(q,l,24);c.fileVersion=m.getInt32(0,!0);c.imageType=m.getInt32(4,!0);c.height=m.getUint32(8,!0);c.width=m.getUint32(12,!0);c.maxZError=m.getFloat64(16,!0);l+=24;if(!f)if(m=new DataView(q,l,16),c.mask={},c.mask.numBlocksY=
m.getUint32(0,!0),c.mask.numBlocksX=m.getUint32(4,!0),c.mask.numBytes=m.getUint32(8,!0),c.mask.maxValue=m.getFloat32(12,!0),l+=16,0<c.mask.numBytes){var f=new Uint8Array(Math.ceil(c.width*c.height/8)),m=new DataView(q,l,c.mask.numBytes),A=m.getInt16(0,!0),a=2,d=0;do{if(0<A)for(;A--;)f[d++]=m.getUint8(a++);else for(var x=m.getUint8(a++),A=-A;A--;)f[d++]=x;A=m.getInt16(a,!0);a+=2}while(a<c.mask.numBytes);if(-32768!==A||d<f.length)throw"Unexpected end of mask RLE encoding";c.mask.bitset=f;l+=c.mask.numBytes}else 0===
(c.mask.numBytes|c.mask.numBlocksY|c.mask.maxValue)&&(f=new Uint8Array(Math.ceil(c.width*c.height/8)),c.mask.bitset=f);m=new DataView(q,l,16);c.pixels={};c.pixels.numBlocksY=m.getUint32(0,!0);c.pixels.numBlocksX=m.getUint32(4,!0);c.pixels.numBytes=m.getUint32(8,!0);c.pixels.maxValue=m.getFloat32(12,!0);l+=16;f=c.pixels.numBlocksX;m=c.pixels.numBlocksY;f+=0<c.width%f?1:0;A=m+(0<c.height%m?1:0);c.pixels.blocks=Array(f*A);a=1E9;for(x=d=0;x<A;x++)for(var p=0;p<f;p++){var u=0,m=new DataView(q,l,Math.min(10,
q.byteLength-l)),z={};c.pixels.blocks[d++]=z;var h=m.getUint8(0);u++;z.encoding=h&63;if(3<z.encoding)throw"Invalid block encoding ("+z.encoding+")";if(2===z.encoding)l++,a=Math.min(a,0);else{if(0!==h&&2!==h){h>>=6;z.offsetType=h;if(2===h)z.offset=m.getInt8(1),u++;else if(1===h)z.offset=m.getInt16(1,!0),u+=2;else if(0===h)z.offset=m.getFloat32(1,!0),u+=4;else throw"Invalid block offset type";a=Math.min(z.offset,a);if(1===z.encoding)if(h=m.getUint8(u),u++,z.bitsPerPixel=h&63,h>>=6,z.numValidPixelsType=
h,2===h)z.numValidPixels=m.getUint8(u),u++;else if(1===h)z.numValidPixels=m.getUint16(u,!0),u+=2;else if(0===h)z.numValidPixels=m.getUint32(u,!0),u+=4;else throw"Invalid valid pixel count type";}l+=u;if(3!=z.encoding)if(0===z.encoding){m=(c.pixels.numBytes-1)/4;if(m!==Math.floor(m))throw"uncompressed block has invalid length";u=new ArrayBuffer(4*m);h=new Uint8Array(u);h.set(new Uint8Array(q,l,4*m));u=new Float32Array(u);for(h=0;h<u.length;h++)a=Math.min(a,u[h]);z.rawData=u;l+=4*m}else 1===z.encoding&&
(m=Math.ceil(z.numValidPixels*z.bitsPerPixel/8),u=new ArrayBuffer(4*Math.ceil(m/4)),h=new Uint8Array(u),h.set(new Uint8Array(q,l,m)),z.stuffedData=new Uint32Array(u),l+=m)}}c.pixels.minValue=a;c.eofOffset=l;q=null!=e.noDataValue?D.clampFloat32(e.noDataValue):b.defaultNoDataValue;var f=e.encodedMaskData,z=e.returnMask,m=0,A=c.pixels.numBlocksX,a=c.pixels.numBlocksY,d=Math.floor(c.width/A),x=Math.floor(c.height/a),p=2*c.maxZError,f=f||(c.mask?c.mask.bitset:null),v,l=new (e.pixelType||Float32Array)(c.width*
c.height);z&&f&&(v=new Uint8Array(c.width*c.height));for(var z=new Float32Array(d*x),t,k,u=0;u<=a;u++)if(h=u!==a?x:c.height%a,0!==h)for(var B=0;B<=A;B++){var y=B!==A?d:c.width%A;if(0!==y){var w=u*c.width*x+B*d,n=c.width-y,C=c.pixels.blocks[m],F,G;if(2>C.encoding){if(0===C.encoding)F=C.rawData;else{F=C.stuffedData;G=C.bitsPerPixel;t=C.numValidPixels;k=C.offset;var J=p,I=z,M=c.pixels.maxValue,H=(1<<G)-1,E=0,L=void 0,K=0,P=void 0,V=void 0,U=Math.ceil((M-k)/J);F[F.length-1]<<=8*(4*F.length-Math.ceil(G*
t/8));for(L=0;L<t;L++)0===K&&(V=F[E++],K=32),K>=G?(P=V>>>K-G&H,K-=G):(K=G-K,P=(V&H)<<K&H,V=F[E++],K=32-K,P+=V>>>K),I[L]=P<U?k+P*J:M;F=z}G=0}else r=2===C.encoding?0:C.offset;var R;if(f)for(k=0;k<h;k++){w&7&&(R=f[w>>3],R<<=w&7);for(t=0;t<y;t++)w&7||(R=f[w>>3]),R&128?(v&&(v[w]=1),l[w++]=2>C.encoding?F[G++]:r):(v&&(v[w]=0),l[w++]=q),R<<=1;w+=n}else if(2>C.encoding)for(k=0;k<h;k++){for(t=0;t<y;t++)l[w++]=F[G++];w+=n}else for(k=0;k<h;k++)if(l.fill)l.fill(r,w,w+y),w+=y+n;else{for(t=0;t<y;t++)l[w++]=r;w+=
n}if(1===C.encoding&&G!==C.numValidPixels)throw"Block and Mask do not match";m++}}r=v;v={width:c.width,height:c.height,pixelData:l,minValue:c.pixels.minValue,maxValue:c.pixels.maxValue,noDataValue:q};r&&(v.maskData=r);e.returnEncodedMask&&c.mask&&(v.encodedMaskData=c.mask.bitset?c.mask.bitset:null);if(e.returnFileInfo&&(v.fileInfo=g(c),e.computeUsedBitDepths)){e=v.fileInfo;r=c.pixels.numBlocksX*c.pixels.numBlocksY;R={};for(F=0;F<r;F++)G=c.pixels.blocks[F],0===G.encoding?R.float32=!0:1===G.encoding?
R[G.bitsPerPixel]=!0:R[0]=!0;c=Object.keys(R);e.bitDepths=c}return v};var g=function(b){return{fileIdentifierString:b.fileIdentifierString,fileVersion:b.fileVersion,imageType:b.imageType,height:b.height,width:b.width,maxZError:b.maxZError,eofOffset:b.eofOffset,mask:b.mask?{numBlocksX:b.mask.numBlocksX,numBlocksY:b.mask.numBlocksY,numBytes:b.mask.numBytes,maxValue:b.mask.maxValue}:null,pixels:{numBlocksX:b.pixels.numBlocksX,numBlocksY:b.pixels.numBlocksY,numBytes:b.pixels.numBytes,maxValue:b.pixels.maxValue,
minValue:b.pixels.minValue,noDataValue:this.noDataValue}}};return b})},"esri/layers/support/rasterFormats/Png":function(){define(["./Zlib"],function(D){return function(b){function g(b){var e,c,g,l;this.data=b;this.pos=8;this.palette=[];this.imgData=[];this.transparency={};this.animation=null;this.text={};for(g=null;;){e=this.readUInt32();l=b=void 0;l=[];for(b=0;4>b;++b)l.push(String.fromCharCode(this.data[this.pos++]));b=l.join("");switch(b){case "IHDR":this.width=this.readUInt32();this.height=this.readUInt32();
this.bits=this.data[this.pos++];this.colorType=this.data[this.pos++];this.compressionMethod=this.data[this.pos++];this.filterMethod=this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||Infinity,frames:[]};break;case "PLTE":this.palette=this.read(e);break;case "fcTL":g&&this.animation.frames.push(g);this.pos+=4;g={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};
b=this.readUInt16();e=this.readUInt16()||100;g.delay=1E3*b/e;g.disposeOp=this.data[this.pos++];g.blendOp=this.data[this.pos++];g.data=[];break;case "IDAT":case "fdAT":"fdAT"===b&&(this.pos+=4,e-=4);b=(null!=g?g.data:void 0)||this.imgData;for(l=0;0<=e?l<e:l>e;0<=e?++l:--l)b.push(this.data[this.pos++]);break;case "tRNS":this.transparency={};switch(this.colorType){case 3:this.transparency.indexed=this.read(e);e=255-this.transparency.indexed.length;if(0<e)for(b=0;0<=e?b<e:b>e;0<=e?++b:--b)this.transparency.indexed.push(255);
break;case 0:this.transparency.grayscale=this.read(e)[0];break;case 2:this.transparency.rgb=this.read(e)}break;case "tEXt":l=this.read(e);e=l.indexOf(0);b=String.fromCharCode.apply(String,l.slice(0,e));this.text[b]=String.fromCharCode.apply(String,l.slice(e+1));break;case "IEND":g&&this.animation.frames.push(g);a:{switch(this.colorType){case 0:case 3:case 4:g=1;break a;case 2:case 6:g=3;break a}g=void 0}this.colors=g;this.hasAlphaChannel=4===(c=this.colorType)||6===c;c=this.colors+(this.hasAlphaChannel?
1:0);this.pixelBitlength=this.bits*c;a:{switch(this.colors){case 1:c="DeviceGray";break a;case 3:c="DeviceRGB";break a}c=void 0}this.colorSpace=c;this.imgData=new Uint8Array(this.imgData);return;default:this.pos+=e}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");}}var q,e,r;g.load=function(b,e,c){var f;"function"===typeof e&&(c=e);f=new XMLHttpRequest;f.open("GET",b,!0);f.responseType="arraybuffer";f.onload=function(){var b;b=new Uint8Array(f.response||f.mozResponseArrayBuffer);
b=new g(b);"function"===typeof(null!=e?e.getContext:void 0)&&b.render(e);return"function"===typeof c?c(b):void 0};return f.send(null)};g.prototype.read=function(b){var e,c;c=[];for(e=0;0<=b?e<b:e>b;0<=b?++e:--e)c.push(this.data[this.pos++]);return c};g.prototype.readUInt32=function(){var b,e,c,g;b=this.data[this.pos++]<<24;e=this.data[this.pos++]<<16;c=this.data[this.pos++]<<8;g=this.data[this.pos++];return b|e|c|g};g.prototype.readUInt16=function(){var b,e;b=this.data[this.pos++]<<8;e=this.data[this.pos++];
return b|e};g.prototype.decodePixels=function(b){var e,c,g,l,a,d,q,p,r,z,h,v,t,k,B;null==b&&(b=this.imgData);if(0===b.length)return new Uint8Array(0);b=new D(b);b=b.getBytes();p=this.pixelBitlength/8;v=p*this.width;r=new Uint8Array(v*this.height);d=b.length;for(c=z=h=0;z<d;){switch(b[z++]){case 0:for(l=e=0;e<v;l=e+=1)r[c++]=b[z++];break;case 1:for(l=t=0;t<v;l=t+=1)e=b[z++],a=l<p?0:r[c-p],r[c++]=(e+a)%256;break;case 2:for(l=a=0;a<v;l=a+=1)e=b[z++],g=(l-l%p)/p,t=h&&r[(h-1)*v+g*p+l%p],r[c++]=(t+e)%256;
break;case 3:for(l=B=0;B<v;l=B+=1)e=b[z++],g=(l-l%p)/p,a=l<p?0:r[c-p],t=h&&r[(h-1)*v+g*p+l%p],r[c++]=(e+Math.floor((a+t)/2))%256;break;case 4:for(l=B=0;B<v;l=B+=1)e=b[z++],g=(l-l%p)/p,a=l<p?0:r[c-p],0===h?t=k=0:(t=r[(h-1)*v+g*p+l%p],k=g&&r[(h-1)*v+(g-1)*p+l%p]),q=a+t-k,l=Math.abs(q-a),g=Math.abs(q-t),q=Math.abs(q-k),a=l<=g&&l<=q?a:g<=q?t:k,r[c++]=(e+a)%256;break;default:throw Error("Invalid filter algorithm: "+b[z-1]);}h++}return r};g.prototype.decodePalette=function(){var b,e,c,g,r,a,d,q,p;c=this.palette;
a=this.transparency.indexed||[];r=new Uint8Array((a.length||0)+c.length);e=d=b=g=0;for(q=c.length;d<q;e=d+=3)r[g++]=c[e],r[g++]=c[e+1],r[g++]=c[e+2],r[g++]=null!=(p=a[b++])?p:255;return r};g.prototype.copyToImageData=function(b,e){var c,f,g,a,d,l,p;f=this.colors;p=null;c=this.hasAlphaChannel;this.palette.length&&(p=null!=(g=this._decodedPalette)?g:this._decodedPalette=this.decodePalette(),f=4,c=!0);b=b.data||b;l=b.length;a=p||e;g=d=0;if(1===f)for(;g<l;)f=p?4*e[g/4]:d,d=a[f++],b[g++]=d,b[g++]=d,b[g++]=
d,b[g++]=c?a[f++]:this.transparency.grayscale&&this.transparency.grayscale===d?0:255,d=f;else for(;g<l;)f=p?4*e[g/4]:d,b[g++]=a[f++],b[g++]=a[f++],b[g++]=a[f++],b[g++]=c?a[f++]:this.transparency.rgb&&this.transparency.rgb[1]===a[f-3]&&this.transparency.rgb[3]===a[f-2]&&this.transparency.rgb[5]===a[f-1]?0:255,d=f};g.prototype.decode=function(){var b;b=new Uint8Array(this.width*this.height*4);this.copyToImageData(b,this.decodePixels());return b};r=(e=b.document&&b.document.createElement("canvas"))&&
e.getContext("2d");q=function(b){r.width=b.width;r.height=b.height;r.clearRect(0,0,b.width,b.height);r.putImageData(b,0,0);b=new Image;b.src=e.toDataURL();return b};g.prototype.decodeFrames=function(b){var e,c,g,l,a,d,r;if(this.animation){d=this.animation.frames;r=[];e=l=0;for(a=d.length;l<a;e=++l)e=d[e],c=b.createImageData(e.width,e.height),g=this.decodePixels(new Uint8Array(e.data)),this.copyToImageData(c,g),e.imageData=c,r.push(e.image=q(c));return r}};g.prototype.renderFrame=function(b,e){var c,
f;f=this.animation.frames;c=f[e];f=f[e-1];0===e&&b.clearRect(0,0,this.width,this.height);1===(null!=f?f.disposeOp:void 0)?b.clearRect(f.xOffset,f.yOffset,f.width,f.height):2===(null!=f?f.disposeOp:void 0)&&b.putImageData(f.imageData,f.xOffset,f.yOffset);0===c.blendOp&&b.clearRect(c.xOffset,c.yOffset,c.width,c.height);return b.drawImage(c.image,c.xOffset,c.yOffset)};g.prototype.animate=function(b){var e,c,g,l,a,d,r=this;c=0;d=this.animation;l=d.numFrames;g=d.frames;a=d.numPlays;return(e=function(){var d,
f;d=c++%l;f=g[d];r.renderFrame(b,d);if(1<l&&c/l<a)return r.animation._timeout=setTimeout(e,f.delay)})()};g.prototype.stopAnimation=function(){var b;return clearTimeout(null!=(b=this.animation)?b._timeout:void 0)};g.prototype.render=function(b){var e;b._png&&b._png.stopAnimation();b._png=this;b.width=this.width;b.height=this.height;b=b.getContext("2d");if(this.animation)return this.decodeFrames(b),this.animate(b);e=b.createImageData(this.width,this.height);this.copyToImageData(e,this.decodePixels());
return b.putImageData(e,0,0)};return g}(this)})},"esri/layers/support/rasterFormats/Raw":function(){define(["require","exports"],function(D,b){var g=function(b){var e=1;switch(b){case Uint8Array:case Int8Array:e=1;break;case Uint16Array:case Int16Array:e=2;break;case Uint32Array:case Int32Array:case Float32Array:e=4;break;case Float64Array:e=8}return e};return function(){function b(){}b.decode=function(b,r){var e=r.pixelType,f=[],c=r.width*r.height,m=Math.floor(b.byteLength/(r.width*r.height*g(r.pixelType))),
q=r.bandIds,a=r.format;r=q&&q.length||Math.floor(b.byteLength/(r.width*r.height*g(r.pixelType)));var d=b.byteLength-b.byteLength%(c*g(e)),x=new e(b,0,c*m),p,u,z,h;if("bip"===a)for(a=0;a<r;a++){z=new e(c);h=q?q[a]:a;for(p=0;p<c;p++)z[p]=x[p*m+h];f.push(z)}else if("bsq"===a)for(a=0;a<r;a++)h=q?q[a]:a,f.push(x.subarray(h*c,(h+1)*c));if(d<b.byteLength-1)if(b=b.slice(d),8*b.byteLength<c)u=null;else{b=new Uint8Array(b,0,Math.ceil(c/8));e=new Uint8Array(c);for(u=r=u=q=m=0;u<b.length-1;u++)for(q=b[u],r=7;0<=
r;r--)e[m++]=q>>r&1;for(r=7;m<c-1;)q=b[b.length-1],e[m++]=q>>r&1,r--;u=e}return{pixels:f,mask:u}};return b}()})},"esri/layers/support/rasterFormats/TiffDecoder":function(){define("require exports tslib ../rasterDatasets/byteStreamUtils ./Jpg ./TiffTags ./Zlib".split(" "),function(D,b,g,q,e,r,l){function f(a,c){var b="unknown";3===a?b="f32":1===a?1===c?b="u1":2===c?b="u2":4===c?b="u4":8>=c?b="u8":16>=c?b="u16":32>=c&&(b="u32"):2===a&&(8>=c?b="s8":16>=c?b="s16":32>=c&&(b="s32"));return b}function c(a){var c=
null;switch(a?a.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":c=Uint8Array;break;case "u16":c=Uint16Array;break;case "u32":c=Uint32Array;break;case "s8":c=Int8Array;break;case "s16":c=Int16Array;break;case "s32":c=Int32Array;break;default:c=Float32Array}return c}function m(a,c){return{x:c[0]*a.x+c[1]*a.y+c[2],y:c[3]*a.x+c[4]*a.y+c[5]}}function A(a,c){return(a=a.get(c))&&a.values}function a(a,c){return(a=a.get(c))&&a.values[0]}function d(a,c,b,e,d,f){void 0===e&&(e=0);void 0===d&&(d=
r.TIFF_TAGS);void 0===f&&(f=4);var g=(new DataView(a,b,2)).getUint16(0,c),h=4+2*f,k=2+g*h;if(b+k>a.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:k};var n=b+k+4<=a.byteLength?(new DataView(a,b+k,4)).getUint32(0,c):null;b+=2;for(var l=new Map,m,w,p,t,q,v,y=0;y<g;y++){m=new DataView(a,b+h*y,h);w=m.getUint16(0,c);t=m.getUint16(2,c);p=r.getTagName(w,d);if(2===f)q=m.getUint16(4,c),v=m.getUint16(6,c);else if(4===f)q=m.getUint32(4,c),v=m.getUint32(8,c);else if(8===f)if(v=q=0,c)for(var u=
0;8>u;u++)q+=m.getUint8(4+u)*Math.pow(2,8*u),v+=m.getUint8(12+u)*Math.pow(2,8*u);else for(u=0;8>u;u++)q+=m.getUint8(4+u)*Math.pow(2,8*(7-u)),v+=m.getUint8(12+u)*Math.pow(2,8*(7-u));m={id:w,type:t,valueCount:q,valueOffset:v,values:null};x(a,c,m,e);l.set(p,m)}return{success:!0,ifd:l,nextIFD:n,requiredBufferSize:k}}function x(a,c,b,e,d){void 0===e&&(e=0);if(b.values)return!0;var f=b.type,g=b.valueCount,h=b.valueOffset,k=[],l=v[f],n=8*l,m=g*l,w=g*v[f]*8;if(32<w&&m>(d?a.byteLength:a?a.byteLength-h+e:0))return b.offlineOffsetSize=
[h,m],b.values=null,!1;if(32>=w)if(c||(h>>>=32-w),1===g)k=[h];else for(a=0;a<g;a++)k.push(h<<n*a>>>32-n);else for(h-=e,d&&(h=0),n=h;n<h+m;n+=l){switch(f){case 1:g=(new DataView(a,n,1)).getUint8(0);break;case 2:g=(new DataView(a,n,1)).getUint8(0);break;case 3:g=(new DataView(a,n,2)).getUint16(0,c);break;case 4:g=(new DataView(a,n,4)).getUint32(0,c);break;case 5:g=(new DataView(a,n,4)).getUint32(0,c)/(new DataView(a,n+4,4)).getUint32(0,c);break;case 6:g=(new DataView(a,n,1)).getInt8(0);break;case 7:g=
(new DataView(a,n,1)).getUint8(0);break;case 8:g=(new DataView(a,n,2)).getInt16(0,c);break;case 9:g=(new DataView(a,n,4)).getInt32(0,c);break;case 10:g=(new DataView(a,n,4)).getInt32(0,c)/(new DataView(a,n+4,4)).getInt32(0,c);break;case 11:g=(new DataView(a,n,4)).getFloat32(0,c);break;case 12:g=(new DataView(a,n,8)).getFloat64(0,c);break;default:g=null}k.push(g)}if(2===f){f="";h=k;k=[];for(a=0;a<h.length;a++)0===h[a]&&""!==f?(k.push(f),f=""):f+=String.fromCharCode(h[a]);""===f&&0!==k.length||k.push(f)}b.values=
k;return!0}function p(c){var b=c[0],e=a(b,"TILEWIDTH"),d=a(b,"TILELENGTH"),g=a(b,"IMAGEWIDTH"),h=a(b,"IMAGELENGTH"),k=a(b,"BITSPERSAMPLE"),l=a(b,"SAMPLESPERPIXEL"),p=a(b,"SAMPLEFORMAT")||1,t=f(p,k),r=A(b,"PLANARCONFIGURATION")?2===A(b,"PLANARCONFIGURATION")[0]:!1,q=A(b,"GDAL_NODATA"),v;null!=q&&("string"===typeof q[0]?(v=q.map(function(a){return parseFloat(a)}),v.some(function(a){return isNaN(a)})&&(v=null)):"number"===typeof q[0]&&(v=q));var u=a(b,"COMPRESSION")||1;switch(u){case 1:q="NONE";break;
case 2:case 3:case 4:case 32771:q="CCITT";break;case 5:q="LZW";break;case 6:case 7:q="JPEG";break;case 32773:q="PACKBITS";break;case 8:case 32946:q="DEFLATE";break;case 34712:q="JPEG2000";break;default:q=String(u)}var y=!0,z="";1!==u&&6!==u&&8!==u&&32946!==u&&(y=!1,z+="unsupported tag compression "+u);3<p&&(y=!1,z+="unsupported tag sampleFormat "+p);0!==k%8&&(y=!1,z+="unsupported tag bitsPerSample "+k);var k=a(b,"GEOASCIIPARAMS"),x;k&&(x=(x=k.split("|").filter(function(a){return-1<a.indexOf("ESRI PE String \x3d ")})[0])?
x.replace("ESRI PE String \x3d ",""):"",x=0===x.indexOf("PROJCS")||0===x.indexOf("GEOGCS")?{wkid:null,wkt:x}:null);var k=A(b,"GEOTIEPOINTS"),p=A(b,"GEOPIXELSCALE"),u=A(b,"GEOTRANSMATRIX"),D=b.has("GEOKEYDIRECTORY")?b.get("GEOKEYDIRECTORY").data:null,b=!1;if(D){var b=2===a(D,"GTRasterTypeGeoKey"),S=a(D,"GTModelTypeGeoKey");2===S?(D=a(D,"GeographicTypeGeoKey"),1024<D&&32766>D&&(x={wkid:D})):1===S&&(D=a(D,"ProjectedCSTypeGeoKey"),1024<D&&32766>D&&(x={wkid:D}))}var N,T;p&&k&&6<=k.length?(N=[p[0],0,k[3]-
k[0]*p[0],0,-Math.abs(p[1]),k[4]-k[1]*p[1]],b&&(N[2]-=.5*N[0]+.5*N[1],N[5]-=.5*N[3]+.5*N[4])):u&&16===u.length&&(N=[u[0],u[1],u[3],u[4],u[5],u[7]]);if(N){T=[{x:0,y:h},{x:0,y:0},{x:g,y:h},{x:g,y:0}];b=void 0;p=k=Number.POSITIVE_INFINITY;D=u=Number.NEGATIVE_INFINITY;for(S=0;S<T.length;S++)b=m(T[S],N),k=b.x>k?k:b.x,u=b.x<u?u:b.x,p=b.y>p?p:b.y,D=b.y<D?D:b.y;T={xmin:k,xmax:u,ymin:p,ymax:D,spatialReference:x}}N=c.filter(function(c){return 1===a(c,"NEWSUBFILETYPE")});var Q,W,X,Y;0<N.length&&(Q=Math.round(Math.log(g/
a(N[0],"IMAGEWIDTH"))/Math.LN2),W=Math.round(Math.log(g/a(N[N.length-1],"IMAGEWIDTH"))/Math.LN2),X=a(N[N.length-1],"TILEWIDTH"),Y=a(N[N.length-1],"TILEHEIGHT"));X=0<W?X||e:null;Y=0<W?Y||d:null;var Z;e&&(Z=[{maxCol:Math.ceil(g/e)-1,maxRow:Math.ceil(h/d)-1,minRow:0,minCol:0}],N.forEach(function(c){Z.push({maxCol:Math.ceil(a(c,"IMAGEWIDTH")/a(c,"TILEWIDTH"))-1,maxRow:Math.ceil(a(c,"IMAGELENGTH")/a(c,"TILELENGTH"))-1,minRow:0,minCol:0})}));c=a(c[0],"GDAL_METADATA");c=B(c);return{width:g,height:h,tileWidth:e,
tileHeight:d,planes:l,isBSQ:r,pixelType:t,compression:q,noData:v,isSupported:y,message:z,extent:T,firstPyramidLevel:Q,maximumPyramidLevel:W,pyramidBlockWidth:X,pyramidBlockHeight:Y,tileBoundary:Z,metadata:c}}function u(a){var c=new DataView(a,0,8),b=c.getUint16(0,!1),e=null;if(18761===b)e=!0;else if(19789===b)e=!1;else throw"unexpected endianess byte";if(42!==c.getUint16(2,e))throw"unexpected tiff identifier";b=c.getUint32(4,e);c=[];do if(b=z(a,e,b),b.success)c.push(b.ifd),b=b.nextIFD;else break;
while(0<b);a=p(c);return g.__assign(g.__assign({},a),{littleEndian:e,ifds:c})}function z(a,c,b,e,f,g){void 0===e&&(e=0);void 0===f&&(f=r.TIFF_TAGS);void 0===g&&(g=4);b=d(a,c,b,e,f,g);var h,k=b.ifd;k&&(r.ifdTags.forEach(function(b,f){k.has(f)&&(h=k.get(f),h.data=d(a,c,h.valueOffset-e,e,b).ifd)}),k.has("GEOKEYDIRECTORY")&&(h=k.get("GEOKEYDIRECTORY"),(f=h.values)&&4<f.length&&(f=f[0]+"."+f[1]+"."+f[2],h.data=d(a,c,h.valueOffset+6-e,e,r.GEO_KEYS,2).ifd,h.data&&h.data.set("GEOTIFFVersion",{id:0,type:2,
valueCount:1,valueOffset:null,values:[f]}))),k.has("XMP")&&(h=k.get("XMP"),f=h.values,"number"===typeof f[0]&&7===h.type&&(h.values=[q.bytesToUTF8(new Uint8Array(f))])));return b}Object.defineProperty(b,"__esModule",{value:!0});b.decode=b.decodeTileOrStrip=b.parseIFD=b.parseSignature=b.parseHeader=b.getImageInfo=b.parseFieldValues=void 0;var h=function(){var a=new ArrayBuffer(4),c=new Uint8Array(a);(new Uint32Array(a))[0]=1;return 1===c[0]}(),v=[0,1,1,2,4,8,1,1,2,4,8,4,8],t=function(b,d,g,k,m){d=
h===d;var n=a(g,"BITSPERSAMPLE"),p=a(g,"SAMPLEFORMAT")||1,n=f(p,n),p=a(g,"COMPRESSION")[0]||1;g=c(n);var w,t;1===p?(w=b.slice(k,k+m),t=new Uint8Array(w)):8===p||32946===p?(t=new Uint8Array(b,k,m),t=new l(t),b=t.getBytes(),w=new ArrayBuffer(b.length),t=new Uint8Array(w),t.set(b)):6===p&&(t=new Uint8Array(b,k,m),w=new e,w.parse(t),b=w.getData(w.width,w.height,!0),w=new ArrayBuffer(b.length),t=new Uint8Array(w),t.set(b));if("u8"!==n&&"s8"!==n&&!d)switch(w=new ArrayBuffer(t.length),d=new Uint8Array(w),
n){case "u16":case "s16":for(n=0;n<t.length;n+=2)d[n]=t[n+1],d[n+1]=t[n];break;case "u32":case "s32":case "f32":for(n=0;n<t.length;n+=4)d[n]=t[n+3],d[n+1]=t[n+2],d[n+2]=t[n+1],d[n+3]=t[n]}return new g(w)},k=function(a,c,b){if(!(a&&0<a.length&&c&&b))return null;for(var e,d,f,g=a[0].length,h=a.length,k=new Uint8Array(g),n=0;n<h;n++)if(e=a[n],d=c[n],f=b[n],0===n)for(var l=0;l<g;l++)k[l]=e[l]<d||e[l]>f?0:1;else for(l=0;l<g;l++)k[l]&&(k[l]=e[l]<d||e[l]>f?0:1);return k},B=function(a){if(!a)return null;
var c=a.match(/<Item(.*?)Item>/gi);if(!c||0===c.length)return null;a=new Map;for(var b,e,d,f,g=0;g<c.length;g++)b=c[g],e=b.slice(6,b.indexOf("\x3e")),d=b.indexOf("sample\x3d"),-1<d&&(f=b.slice(d+8,b.indexOf('"',d+8))),d=b.indexOf("name\x3d"),-1<d&&(e=b.slice(d+6,b.indexOf('"',d+6))),e&&(b=b.slice(b.indexOf("\x3e")+1,b.indexOf("\x3c/Item\x3e")).trim(),null!=f?a.has(e)?a.get(e)[f]=b:a.set(e,[b]):a.set(e,b)),f=null;c=a.get("STATISTICS_MINIMUM");e=a.get("STATISTICS_MAXIMUM");b=a.get("STATISTICS_MEAN");
d=a.get("STATISTICS_STDDEV");f=null;if(c&&e)for(f=[],g=0;g<c.length;g++)f.push({min:parseFloat(c[g]),max:parseFloat(e[g]),avg:b&&parseFloat(b[g]),stddev:d&&parseFloat(d[g])});e=a.get("BandName");b=a.get("WavelengthMin");d=a.get("WavelengthMax");c=null;if(e)for(c=[],g=0;g<e.length;g++)c.push({BandName:e[g],WavelengthMin:b&&parseFloat(b[g]),WavelengthMax:d&&parseFloat(d[g])});g=a.get("DataType");return{statistics:f,bandProperties:c,dataType:g,rawMetadata:a}};b.parseFieldValues=x;b.getImageInfo=p;b.parseHeader=
u;b.parseSignature=function(a){var c=new DataView(a,0,8),b=c.getUint16(0,!1);a=null;if(18761===b)a=!0;else if(19789===b)a=!1;else throw"unexpected endianess byte";if(42!==c.getUint16(2,a))throw"unexpected tiff identifier";c=c.getUint32(4,a);return{littleEndian:a,firstIFD:c}};b.parseIFD=z;b.decodeTileOrStrip=function(b,e){var d=e.headerInfo,f=e.ifd,g=t(b,d.littleEndian,f,e.offset||0,e.size||b.byteLength);b=d.pixelType;for(var h=d.isBSQ,l=d.planes,m=c(b),p=g.length/l,w,q=[],r=0;r<l;r++){w=new m(p);
if(h)w=g.slice(p*r,p*(r+1));else for(var v=0;v<p;v++)w[v]=g[v*l+r];q.push(w)}var g=a(f,"TILEWIDTH"),f=a(f,"TILELENGTH"),h=d.noData?d.noData[0]:null,d=(l=d.metadata?d.metadata.statistics:null)?l.map(function(a){return a.min}):null,l=l?l.map(function(a){return a.max}):null,u;if(null!=h)if(u=new Uint8Array(p),1E24<Math.abs(h))for(e=0;e<p;e++)u[e]=1E-6>Math.abs((q[0][e]-h)/h)?0:1;else for(e=0;e<p;e++)u[e]=q[0][e]===h?0:1;else d&&l&&e.applyMinMaxConstraint&&(u=k(q,d,l));return{pixelType:b,width:g,height:f,
pixels:q,mask:u,noDataValue:h}};b.decode=function(a,b){b=b||u(a);var d=b.ifds,f=b.noData;if(0===d.length)throw"no valid image file directory";d=d[0];f=f?f[0]:null;if(b.tileWidth){var g=A(d,"TILEOFFSETS");if(void 0===g)d=null;else{for(var k=A(d,"TILEBYTECOUNTS"),m=b.tileWidth,p=b.tileHeight,q=b.width,w=b.height,r=b.pixelType,v=b.isBSQ,y=b.planes,B=q*w,z=A(d,"BITSPERSAMPLE")[0],x=c(r),D=[],O=0;O<y;O++)D.push(new x(B));var S,N,T,Q,W,X,Y,Z,B=Math.ceil(q/m);if(0===z%8)for(z=0;z<g.length;z++)for(S=Math.floor(z/
B)*p,Q=z%B*m,O=S*q+Q,x=t(a,b.littleEndian,d,g[z],k[z]),X=0,W=O,Q=Math.min(m,q-Q),Y=Math.min(p,w-S),S=0;S<y;S++)if(Z=D[S],v)for(N=0;N<Y;N++)for(W=O+N*q,X=m*p*S+N*m,T=0;T<Q;T++,W++,X++)Z[W]=x[X];else for(N=0;N<Y;N++)for(W=O+N*q,X=N*m*y+S,T=0;T<Q;T++,W++,X+=y)Z[W]=x[X];d={width:q,height:w,pixelType:r,pixels:D}}}else if(p=b,D=h===p.littleEndian,B=A(d,"STRIPOFFSETS"),void 0===B)d=null;else{b=p.width;g=p.height;k=p.pixelType;p=p.planes;q=b*g;z=A(d,"BITSPERSAMPLE")[0];w=c(k);r=new w(q*p);x=A(d,"STRIPBYTECOUNTS");
O=A(d,"ROWSPERSTRIP")[0];W=A(d,"COMPRESSION")?A(d,"COMPRESSION")[0]:1;Q=O;if(0===z%8)for(d=0;d<B.length;d++){X=d*O*b*p;Q=(d+1)*O>g?g-d*O:O;if("u8"===k||"s8"===k||D)8===W||32946===W?(v=new Uint8Array(a,B[d],x[d]),v=new l(v),S=v.getBytes(),y=new ArrayBuffer(S.length),v=new Uint8Array(y),v.set(S),v.length!==Q*b*p*z/8&&console.log("strip byte counts is different than expected")):6===W?(v=new Uint8Array(a,B[d],x[d]),y=new e,y.parse(v),Q=y.getData(y.width,y.height,!0),y=new ArrayBuffer(Q.length),v=new Uint8Array(y),
v.set(Q)):1===W&&(x[d]!==Q*b*p*z/8&&console.log("strip byte counts is different than expected"),y=a.slice(B[d],B[d]+x[d]));else switch(6===W||8===W||32946===W?(v=new Uint8Array(a,B[d],x[d]),v=new l(v),v=v.getBytes(),y=new ArrayBuffer(v.length),m=new Uint8Array(y),v.length!==Q*b*p*z/8&&console.log("strip byte counts is different than expected")):1===W&&(x[d]!==Q*b*p*z/8&&console.log("strip byte counts is different than expected"),y=new ArrayBuffer(x[d]),v=new Uint8Array(a,B[d],x[d]),m=new Uint8Array(y)),
k){case "u16":case "s16":for(Q=0;Q<v.length;Q+=2)m[Q]=v[Q+1],m[Q+1]=v[Q];break;case "u32":case "s32":case "f32":for(Q=0;Q<v.length;Q+=4)m[Q]=v[Q+3],m[Q+1]=v[Q+2],m[Q+2]=v[Q+1],m[Q+3]=v[Q]}Q=new w(y);r.set(Q,X)}v=[];if(1===p)v.push(r);else for(d=0;d<p;d++){m=new w(q);for(a=0;a<q;a++)m[a]=r[a*p+d];v.push(m)}d={width:b,height:g,pixelType:k,pixels:v}}if(null!==f){d.mask=new Uint8Array(d.width*d.height);if(1E24<Math.abs(f))for(a=0;a<d.width*d.height;a++)d.mask[a]=1E-6>Math.abs((d.pixels[0][a]-f)/f)?0:
1;else for(a=0;a<d.width*d.height;a++)d.mask[a]=d.pixels[0][a]===f?0:1;d.noDataValue=f}return d}})},"esri/layers/support/rasterDatasets/byteStreamUtils":function(){define(["require","exports"],function(D,b){Object.defineProperty(b,"__esModule",{value:!0});b.bytesToUTF8=void 0;b.bytesToUTF8=function(b,q){for(var e=0,g="",l=0,f=0,c=b.length;e<c;)if(f=b[e++],l=f>>4,8>l?l=1:15===l?(l=4,f=(f&7)<<18|(b[e++]&63)<<12|(b[e++]&63)<<6|b[e++]&63):14===l?(l=3,f=(f&15)<<12|(b[e++]&63)<<6|b[e++]&63):(l=2,f=(f&31)<<
6|b[e++]&63),0!==f||q)g+=String.fromCharCode(f);return g}})},"esri/layers/support/rasterFormats/TiffTags":function(){define(["require","exports"],function(D,b){var g=function(){var b=[];b[254]="NEWSUBFILETYPE";b[255]="SUBFILETYPE";b[256]="IMAGEWIDTH";b[257]="IMAGELENGTH";b[258]="BITSPERSAMPLE";b[259]="COMPRESSION";b[262]="PHOTOMETRICINTERPRETATION";b[263]="THRESHHOLDING";b[264]="CELLWIDTH";b[265]="CELLLENGTH";b[266]="FILLORDER";b[269]="DOCUMENTNAME";b[270]="IMAGEDESCRIPTION";b[271]="MAKE";b[272]=
"MODEL";b[273]="STRIPOFFSETS";b[274]="ORIENTATION";b[277]="SAMPLESPERPIXEL";b[278]="ROWSPERSTRIP";b[279]="STRIPBYTECOUNTS";b[280]="MINSAMPLEVALUE";b[281]="MAXSAMPLEVALUE";b[282]="XRESOLUTION";b[283]="YRESOLUTION";b[284]="PLANARCONFIGURATION";b[285]="PAGENAME";b[286]="XPOSITION";b[287]="YPOSITION";b[288]="FREEOFFSETS";b[289]="FREEBYTECOUNTS";b[290]="GRAYRESPONSEUNIT";b[291]="GRAYRESPONSECURVE";b[292]="T4OPTIONS";b[293]="T6OPTIONS";b[296]="RESOLUTIONUNIT";b[297]="PAGENUMBER";b[300]="COLORRESPONSEUNIT";
b[301]="TRANSFERFUNCTION";b[305]="SOFTWARE";b[306]="DATETIME";b[315]="ARTIST";b[316]="HOSTCOMPUTER";b[317]="PREDICTOR";b[318]="WHITEPOINT";b[319]="PRIMARYCHROMATICITIES";b[320]="COLORMAP";b[321]="HALFTONEHINTS";b[322]="TILEWIDTH";b[323]="TILELENGTH";b[324]="TILEOFFSETS";b[325]="TILEBYTECOUNTS";b[326]="BADFAXLINES";b[327]="CLEANFAXDATA";b[328]="CONSECUTIVEBADFAXLINES";b[330]="SUBIFD";b[332]="INKSET";b[333]="INKNAMES";b[334]="NUMBEROFINKS";b[336]="DOTRANGE";b[337]="TARGETPRINTER";b[338]="EXTRASAMPLES";
b[339]="SAMPLEFORMAT";b[340]="SMINSAMPLEVALUE";b[341]="SMAXSAMPLEVALUE";b[342]="TRANSFERRANGE";b[347]="JPEGTABLES";b[512]="JPEGPROC";b[513]="JPEGIFOFFSET";b[514]="JPEGIFBYTECOUNT";b[515]="JPEGRESTARTINTERVAL";b[517]="JPEGLOSSLESSPREDICTORS";b[518]="JPEGPOINTTRANSFORM";b[519]="JPEGQTABLES";b[520]="JPEGDCTABLES";b[521]="JPEGACTABLES";b[529]="YCBCRCOEFFICIENTS";b[530]="YCBCRSUBSAMPLING";b[531]="YCBCRPOSITIONING";b[532]="REFERENCEBLACKWHITE";b[700]="XMP";b[33550]="GEOPIXELSCALE";b[33922]="GEOTIEPOINTS";
b[33432]="COPYRIGHT";b[42112]="GDAL_METADATA";b[42113]="GDAL_NODATA";b[50844]="RPCCOEFFICIENT";b[34264]="GEOTRANSMATRIX";b[34735]="GEOKEYDIRECTORY";b[34736]="GEODOUBLEPARAMS";b[34737]="GEOASCIIPARAMS";b[34665]="EXIFIFD";b[34853]="GPSIFD";b[40965]="INTEROPERABILITYIFD";return b}();D=function(){var b=[].concat(g);b[36864]="ExifVersion";b[40960]="FlashpixVersion";b[40961]="ColorSpace";b[42240]="Gamma";b[37121]="ComponentsConfiguration";b[37122]="CompressedBitsPerPixel";b[40962]="PixelXDimension";b[40963]=
"PixelYDimension";b[37500]="MakerNote";b[37510]="UserComment";b[40964]="RelatedSoundFile";b[36867]="DateTimeOriginal";b[36868]="DateTimeDigitized";b[36880]="OffsetTime";b[36881]="OffsetTimeOriginal";b[36882]="OffsetTimeDigitized";b[37520]="SubSecTime";b[37521]="SubSecTimeOriginal";b[37522]="SubSecTimeDigitized";b[37888]="Temperature";b[37889]="Humidity";b[37890]="Pressure";b[37891]="WaterDepth";b[37892]="Acceleration";b[37893]="CameraElevationAngle";b[42016]="ImageUniqueID";b[42032]="CameraOwnerName";
b[42033]="BodySerialNumber";b[42034]="LensSpecification";b[42035]="LensMake";b[42036]="LensModel";b[42037]="LensSerialNumber";b[33434]="ExposureTime";b[33437]="FNumber";b[34850]="ExposureProgram";b[34852]="SpectralSensitivity";b[34855]="PhotographicSensitivity";b[34856]="OECF";b[34864]="SensitivityType";b[34865]="StandardOutputSensitivity";b[34866]="RecommendedExposureIndex";b[34867]="ISOSpeed";b[34868]="ISOSpeedLatitudeyyy";b[34869]="ISOSpeedLatitudezzz";b[37377]="ShutterSpeedValue";b[37378]="ApertureValue";
b[37379]="BrightnessValue";b[37380]="ExposureBiasValue";b[37381]="MaxApertureValue";b[37382]="SubjectDistance";b[37383]="MeteringMode";b[37384]="LightSource";b[37385]="Flash";b[37386]="FocalLength";b[37396]="SubjectArea";b[41483]="FlashEnergy";b[41484]="SpatialFrequencyResponse";b[41486]="FocalPlaneXResolution";b[41487]="FocalPlaneYResolution";b[41488]="FocalPlaneResolutionUnit";b[41492]="SubjectLocation";b[41493]="ExposureIndex";b[41495]="SensingMethod";b[41728]="FileSource";b[41729]="SceneType";
b[41730]="CFAPattern";b[41985]="CustomRendered";b[41986]="ExposureMode";b[41987]="WhiteBalance";b[41988]="DigitalZoomRatio";b[41989]="FocalLengthIn35mmFilm";b[41990]="SceneCaptureType";b[41991]="GainControl";b[41992]="Contrast";b[41993]="Saturation";b[41994]="Sharpness";b[41995]="DeviceSettingDescription";b[41996]="SubjectDistanceRange";return b}();b=function(){var b=[];b[1024]="GTModelTypeGeoKey";b[1025]="GTRasterTypeGeoKey";b[1026]="GTCitationGeoKey";b[2048]="GeographicTypeGeoKey";b[2049]="GeogCitationGeoKey";
b[2050]="GeogGeodeticDatumGeoKey";b[2051]="GeogPrimeMeridianGeoKey";b[2052]="GeogLinearUnitsGeoKey";b[2053]="GeogLinearUnitSizeGeoKey";b[2054]="GeogAngularUnitsGeoKey";b[2055]="GeogAngularUnitSizeGeoKey";b[2056]="GeogEllipsoidGeoKey";b[2057]="GeogSemiMajorAxisGeoKey";b[2058]="GeogSemiMinorAxisGeoKey";b[2059]="GeogInvFlatteningGeoKey";b[2061]="GeogPrimeMeridianLongGeoKey";b[2060]="GeogAzimuthUnitsGeoKey";b[3072]="ProjectedCSTypeGeoKey";b[3073]="PCSCitationGeoKey";b[3074]="ProjectionGeoKey";b[3075]=
"ProjCoordTransGeoKey";b[3076]="ProjLinearUnitsGeoKey";b[3077]="ProjLinearUnitSizeGeoKey";b[3078]="ProjStdParallel1GeoKey";b[3079]="ProjStdParallel2GeoKey";b[3080]="ProjNatOriginLongGeoKey";b[3081]="ProjNatOriginLatGeoKey";b[3082]="ProjFalseEastingGeoKey";b[3083]="ProjFalseNorthingGeoKey";b[3084]="ProjFalseOriginLongGeoKey";b[3085]="ProjFalseOriginLatGeoKey";b[3086]="ProjFalseOriginEastingGeoKey";b[3087]="ProjFalseOriginNorthingGeoKey";b[3088]="ProjCenterLongGeoKey";b[3090]="ProjCenterEastingGeoKey";
b[3091]="ProjCenterNorthingGeoKey";b[3092]="ProjScaleAtNatOriginGeoKey";b[3093]="ProjScaleAtCenterGeoKey";b[3094]="ProjAzimuthAngleGeoKey";b[3095]="ProjStraightVertPoleLongGeoKey";b[4096]="VerticalCSTypeGeoKey";b[4097]="VerticalCitationGeoKey";b[4098]="VerticalDatumGeoKey";b[4099]="VerticalUnitsGeoKey";return b}();var q=new Map;q.set("EXIFIFD",D);q.set("GPSIFD","GPSVersionID GPSLatitudeRef GPSLatitude GPSLongitudeRef GPSLongitude GPSAltitudeRef GPSAltitude GPSTimeStamp GPSSatellites GPSStatus GPSMeasureMode GPSDOP GPSSpeedRef GPSSpeed GPSTrackRef GPSTrack GPSImgDirectionRef GPSImgDirection GPSMapDatum GPSDestLatitudeRef GPSDestLatitude GPSDestLongitudeRef GPSDestLongitude GPSDestBearingRef GPSDestBearing GPSDestDistanceRef GPSDestDistance GPSProcessingMethod GPSAreaInformation GPSDateStamp GPSDifferential GPSHPositioningError".split(" "));
return{TIFF_TAGS:g,ifdTags:q,GEO_KEYS:b,getTagName:function(b,q){q=(q||g)[b];void 0===q&&(q="unknown"+String(b));return q}}})},"esri/layers/support/rasterDatasets/DBFParser":function(){define(["require","exports","./byteStreamUtils"],function(D,b,g){function q(b){var e=b.fields;b=b.records;var g=e.some(function(a){return"oid"===a.name.toLowerCase()})?"OBJECTID":"OID",e=[{name:g,type:"esriFieldTypeOID",alias:"OID"}].concat(e.map(function(a){return{name:a.name,type:"esriFieldType"+a.typeName,alias:a.name}})),
f=e.map(function(a){return a.name}),c=[],m=0,q=0;b.forEach(function(a){var b={};b[g]=m++;for(q=1;q<f.length;q++)b[f[q]]=a[q-1];c.push({attributes:b})});return{displayFieldName:"",fields:e,features:c}}return function(){function b(){}Object.defineProperty(b,"supportedVersions",{get:function(){return[5]},enumerable:!1,configurable:!0});b.parse=function(b){var e=new DataView(b),f=e.getUint8(0)&3;if(3!==f)return{header:{version:f},recordSet:null};var c=e.getUint32(4,!0),m=e.getUint16(8,!0),r=e.getUint16(10,
!0),m={version:f,recordCount:c,headerByteCount:m,recordByteCount:r},a=32,d=[],x=[];if(3===f){for(;13!==e.getUint8(a);)f=String.fromCharCode(e.getUint8(a+11)).trim(),d.push({name:g.bytesToUTF8(new Uint8Array(b,a,11)),type:f,typeName:"String Date Double Boolean String Integer".split(" ")["CDFLMN".split("").indexOf(f)],length:e.getUint8(a+16)}),a+=32;a+=1;if(0<d.length)for(f=function(){var c=[];32===e.getUint8(a)?(a+=1,d.forEach(function(d){if("C"===d.type)c.push(g.bytesToUTF8(new Uint8Array(b,a,d.length)).trim());
else if("N"===d.type)c.push(parseInt(String.fromCharCode.apply(null,new Uint8Array(b,a,d.length)).trim(),10));else if("F"===d.type)c.push(parseFloat(String.fromCharCode.apply(null,new Uint8Array(b,a,d.length)).trim()));else if("D"===d.type){var e=String.fromCharCode.apply(null,new Uint8Array(b,a,d.length)).trim();c.push(new Date(parseInt(e.substring(0,4),10),parseInt(e.substring(4,6),10)-1,parseInt(e.substring(6,8),10)))}a+=d.length}),x.push(c)):a+=r};x.length<c&&b.byteLength-a>r;)f()}c=q({fields:d,
records:x});return{header:m,fields:d,records:x,recordSet:c}};return b}()})},"esri/layers/support/rasterDatasets/ImageServerRaster":function(){define("require exports tslib ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/promiseUtils ../../../core/promiseUtils ../../../core/urlUtils ../../../core/accessorSupport/decorators ../RasterInfo ../RasterStorageInfo ../serviceTileInfoProperty ../TileInfo ../TilemapCache ./BaseRaster ../rasterFunctions/pixelUtils ../../../tasks/support/FeatureSet".split(" "),
function(D,b,g,q,e,r,l,f,c,m,A,a,d,x,p,u,z,h){return function(b){function t(){var a=null!==b&&b.apply(this,arguments)||this;a._levelOffset=0;a._slices=null;a._tilemapCache=null;a.datasetFormat="RasterTileServer";return a}g.__extends(t,b);t.prototype.open=function(b){return g.__awaiter(this,void 0,void 0,function(){var f,h,k,l,m,t,q,v,u,z,A,E,D,K,P,V,U,R,O,S,N,T,Q,W,X;return g.__generator(this,function(g){switch(g.label){case 0:return[4,this.init()];case 1:g.sent();f=b&&b.signal;if(!this.sourceJSON)return[3,
2];k={data:this.sourceJSON};return[3,4];case 2:return[4,this.request(this.url,{query:{f:"json"},signal:f})];case 3:k=g.sent(),g.label=4;case 4:h=k;h.ssl&&(this.url=this.url.replace(/^http:/i,"https:"));this.sourceJSON=l=h.data;m="jpg jpeg png png8 png24 png32 mixed".split(" ");this.tileType=l.cacheType;null==this.tileType&&(-1<m.indexOf(l.tileInfo.format.toLowerCase())?this.tileType="Map":"lerc"===l.tileInfo.format.toLowerCase()?this.tileType="Elevation":this.tileType="Raster");if(!l)throw new e("imageserverraster:open",
"cannot initialize tiled image service, missing service info");if(!l.tileInfo)throw new e("imageserverraster:open","use ImageryLayer to open non-tiled image services");this.datasetName=l.name.slice(l.name.indexOf("/")+1);return[4,this._fetchRasterInfo({signal:f})];case 5:t=g.sent();if(r.isSome(t)){q="Map"===this.tileType?d.readServiceTileInfo(l.tileInfo,l,null):x.fromJSON(l.tileInfo);v=t.extent;u=t.pixelSize;z=.5/t.width*u.x;E=A=void 0;D=q.lodAt(Math.max.apply(null,q.lods.map(function(a){return a.level})));
"Map"!==this.tileType&&0!==l.maxScale&&("Raster"===this.tileType?(A=q.lods.filter(function(a){return a.resolution===u.x})[0])||(A=q.lods[q.lods.length-1]):(A=q.lods.filter(function(a){return Math.abs(a.scale-l.maxScale)<z})[0])||(A=q.lods.filter(function(a){return a.scale>l.maxScale}).sort(function(a,b){return a.scale>b.scale?1:-1})[0]),u.x=u.y=A.resolution,t.width=Math.ceil((v.xmax-v.xmin)/u.x-.1),t.height=Math.ceil((v.ymax-v.ymin)/u.y-.1));A||(A=D);K=q.lodAt(Math.min.apply(null,q.lods.map(function(a){return a.level})));
"Map"===this.tileType?this._levelOffset=q.lods[0].level:0!==l.minScale&&"Elevation"===this.tileType&&(E=q.lods.filter(function(a){return Math.abs(a.scale-l.minScale)<z})[0],this._levelOffset=E.level-K.level);E||(E=K);P=Math.max(u.x,u.y);if(Math.abs(u.x-u.y)>z||!q.lods.some(function(a){return Math.abs(a.resolution-P)<z}))u.x=u.y=A.resolution,t.width=Math.ceil((v.xmax-v.xmin)/u.x-.1),t.height=Math.ceil((v.ymax-v.ymin)/u.y-.1);V=A.level-E.level;U=q.size;R=U[0];O=U[1];S=q.origin;N=u.x;T=u.y;Q=[{minCol:Math.floor((v.xmin-
S.x+.1*N)/R/N),maxCol:Math.floor((v.xmax-S.x-.1*N)/R/N),minRow:Math.floor((S.y-v.ymax+.1*T)/O/T),maxRow:Math.floor((S.y-v.ymin-.1*T)/O/T)}];if(0<V)for(W=0;W<V;W++)N*=2,T*=2,Q.push({minCol:Math.floor((v.xmin-S.x+.1*N)/R/N),maxCol:Math.floor((v.xmax-S.x-.1*N)/R/N),minRow:Math.floor((S.y-v.ymax+.1*T)/O/N),maxRow:Math.floor((S.y-v.ymin-.1*T)/O/N)});t.storageInfo=new a({blockWidth:q.size[0],blockHeight:q.size[1],pyramidBlockWidth:q.size[0],pyramidBlockHeight:q.size[1],compression:q.format,origin:q.origin,
firstPyramidLevel:1,maximumPyramidLevel:V,tileInfo:q,blockBoundary:Q});this._set("rasterInfo",t)}else throw new e("image-server-raster:open","cannot initialize image service");-1<l.capabilities.toLowerCase().indexOf("tilemap")&&(X={tileInfo:t.storageInfo.tileInfo,parsedUrl:c.urlToObject(this.url),url:this.url,tileServers:[],type:"tile"},this._tilemapCache=new p.TilemapCache({layer:X}));return[2]}})})};t.prototype.fetchRawTile=function(a,b,c,d){void 0===d&&(d={});return g.__awaiter(this,void 0,void 0,
function(){var e,f,h,k,l,m,p,q,t,v,w,r,u,y,B,A,x,D,T,Q,W,X;return g.__generator(this,function(g){switch(g.label){case 0:return e=this.rasterInfo,f=e.storageInfo,h=e.extent,k=e.pixelSize,l=f.maximumPyramidLevel-a+this._levelOffset,m=this.url+"/tile/"+l+"/"+b+"/"+c,p=this._slices?{sliceId:d.sliceId||0}:null,[4,this.request(m,{query:p,responseType:"array-buffer",signal:d.signal})];case 1:return(q=g.sent().data)?[4,this.decodePixelBlock(q,{width:f.tileInfo.size[0],height:f.tileInfo.size[1],planes:null,
pixelType:null,isPoint:"Elevation"===this.tileType})]:[2,null];case 2:t=g.sent();v=f.blockBoundary[a];if("jpg"!==f.compression||c>v.minCol&&c<v.maxCol&&b>v.minRow&&b<v.maxRow)return[2,t];w=f.origin;r=f.blockWidth;u=f.blockHeight;y=Math.pow(2,a);B=Math.round((h.xmin-w.x)/(k.x*y))%r;A=Math.round((h.xmax-w.x)/(k.x*y))%r;x=Math.round((w.y-h.ymax)/(k.x*y))%u;D=Math.round((w.y-h.ymin)/(k.x*y))%u;T=c===v.minCol?B:0;Q=b===v.minRow?x:0;W=c===v.maxCol?A:r;X=b===v.maxRow?D:u;z.setValidBoundary(t,{x:T,y:Q},{width:W-
T,height:X-Q});return[2,t]}})})};t.prototype.getSliceIndex=function(a){if(null===a||void 0===a||!a.length||!this._slices)return null;for(var b=0;b<this._slices.length;b++){var c=this._slices[b].multidimensionalDefinition;if(c.length===a.length&&!c.some(function(b){var c=a.filter(function(a){return b.variableName===a.variableName&&a.dimensionName===b.dimensionName})[0];if(!c)return!0;var d=Array.isArray(b.values[0])?b.values[0][0]:b.values[0],c=Array.isArray(c.values[0])?c.values[0][0]:c.values[0];
return d!==c}))return b}return null};t.prototype.fetchVariableStatisticsHistograms=function(a,b){return g.__awaiter(this,void 0,void 0,function(){var c,d,e;return g.__generator(this,function(g){switch(g.label){case 0:return c=this.request(this.url+"/statistics",{query:{variable:a,f:"json"},signal:b}).then(function(a){var b;return null===(b=a.data)||void 0===b?void 0:b.statistics}),d=this.request(this.url+"/histograms",{query:{variable:a,f:"json"},signal:b}).then(function(a){var b;return null===(b=
a.data)||void 0===b?void 0:b.histograms}),[4,f.all([c,d])];case 1:return e=g.sent(),e[0]&&e[0].forEach(function(a){a.avg=a.mean;a.stddev=a.standardDeviation}),[2,{statistics:e[0]||null,histograms:e[1]||null}]}})})};t.prototype.computeBestPyramidLevelForLocation=function(a,b){void 0===b&&(b={});return g.__awaiter(this,void 0,void 0,function(){var c,d,e,f,h,k;return g.__generator(this,function(g){switch(g.label){case 0:if(!this._tilemapCache)return[2,0];c=this.identifyPixelLocation(a,0,b.datumTransformation);
if(null===c)return[2,null];d=0;e=this.rasterInfo.storageInfo.maximumPyramidLevel;f=e-d+this._levelOffset;h=c.srcLocation;g.label=1;case 1:if(!(0<=f))return[3,6];g.label=2;case 2:return g.trys.push([2,4,,5]),[4,this._tilemapCache.fetchAvailability(f,c.row,c.col,b)];case 3:return k=g.sent(),"available"===k?[3,6]:[3,5];case 4:return g.sent(),[3,5];case 5:return f--,d++,c=this.identifyPixelLocation(h,d,b.datumTransformation),null===c?[2,null]:[3,1];case 6:return-1===f||null==c?[2,null]:[2,d]}})})};t.prototype._fetchRasterInfo=
function(a){return g.__awaiter(this,void 0,void 0,function(){var b,c,d,e,f,k,m,p,v,t,r,u,z=this;return g.__generator(this,function(g){b=this.sourceJSON;c=Math.ceil((b.extent.xmax-b.extent.xmin)/b.pixelSizeX-.1);d=Math.ceil((b.extent.ymax-b.extent.ymin)/b.pixelSizeY-.1);e=q.SpatialReference.fromJSON(b.spatialReference||b.extent.spatialReference);if("Map"===this.tileType)return[2,new A({width:c,height:d,bandCount:3,extent:q.Extent.fromJSON(b.extent),spatialReference:e,pixelSize:new q.Point({x:b.pixelSizeX,
y:b.pixelSizeY,spatialReference:e}),pixelType:"u8",statistics:null,keyProperties:{DataType:"processed"}})];f=a.slice;k=a.signal;m=b.hasRasterAttributeTable?this.request(this.url+"/rasterAttributeTable",{query:{slice:f,f:"json"},signal:k}).then(function(a){return h.fromJSON(a.data)}).catch(function(){return null}):!1;p=b.hasColormap?this.request(this.url+"/colormap",{query:{slice:f,f:"json"},signal:k}).then(function(a){var b;return null===(b=a.data)||void 0===b?void 0:b.colormap}):!1;v=b.hasHistograms?
this.request(this.url+"/histograms",{query:{slice:f,f:"json"},signal:k}).then(function(a){var b;return null===(b=a.data)||void 0===b?void 0:b.histograms}):!1;t=this.request(this.url+"/keyProperties",{query:{f:"json"},signal:k}).then(function(a){return a.data}).catch(function(){});r=b.hasMultidimensions?this._fetchMultidimensionalInfo():!1;u=b.hasMultidimensions?this.request(this.url+"/slices",{query:{f:"json"},signal:k}).then(function(a){return a.data&&a.data.slices}).catch(function(){}):!1;return[2,
l.all([m,p,v,t,r,u]).then(function(a){var f=null;if(b.minValues&&b.minValues.length===b.bandCount)for(var f=[],g=0;g<b.minValues.length;g++)f.push({min:b.minValues[g],max:b.maxValues[g],avg:b.meanValues[g],stddev:b.stdvValues[g]});z._slices=a[5]||null;return new A({width:c,height:d,bandCount:b.bandCount,extent:q.Extent.fromJSON(b.extent),spatialReference:e,pixelSize:new q.Point({x:b.pixelSizeX,y:b.pixelSizeY,spatialReference:e}),pixelType:b.pixelType.toLowerCase(),statistics:f,attributeTable:a[0]||
null,colormap:a[1]||null,histograms:a[2]||null,keyProperties:a[3]||{},multidimensionalInfo:a[4]||null})})]})})};t.prototype._fetchMultidimensionalInfo=function(a){var b;return g.__awaiter(this,void 0,void 0,function(){var c;return g.__generator(this,function(d){switch(d.label){case 0:return[4,this.request(this.url+"/multidimensionalInfo",{query:{f:"json"},signal:a}).then(function(a){var b;return null===(b=a.data)||void 0===b?void 0:b.multidimensionalInfo})];case 1:return c=d.sent(),(null===(b=c.variables)||
void 0===b?0:b.length)&&c.variables.forEach(function(a){var b;(null===(b=a.statistics)||void 0===b?0:b.length)&&a.statistics.forEach(function(a){a.avg=a.mean;a.stddev=a.standardDeviation})}),[2,c]}})})};g.__decorate([m.property({type:String,json:{write:!0}})],t.prototype,"datasetFormat",void 0);g.__decorate([m.property()],t.prototype,"tileType",void 0);return t=g.__decorate([m.subclass("esri.layers.support.rasterDatasets.ImageServerRaster")],t)}(u)})},"esri/layers/support/serviceTileInfoProperty":function(){define(["require",
"exports","tslib","./TileInfo"],function(D,b,g,q){function e(b,e,f,c){if(!b)return null;f=e.minScale;var l=e.maxScale,r=e.minLOD,a=e.maxLOD;if(null!=r&&null!=a)return c&&c.ignoreMinMaxLOD?q.fromJSON(b):q.fromJSON(g.__assign(g.__assign({},b),{lods:b.lods.filter(function(b){b=b.level;return null!=b&&b>=r&&b<=a})}));if(0!==f&&0!==l){var d=f?Math.round(1E4*f)/1E4:Infinity,x=l?Math.round(1E4*l)/1E4:-Infinity;return q.fromJSON(g.__assign(g.__assign({},b),{lods:b.lods.filter(function(a){a=Math.round(1E4*
a.scale)/1E4;return a<=d&&a>=x})}))}return q.fromJSON(b)}Object.defineProperty(b,"__esModule",{value:!0});b.readServiceTileInfo=b.serviceTileInfoProperty=void 0;b.serviceTileInfoProperty={type:q,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:e}}}}};b.readServiceTileInfo=e})},"esri/layers/support/TilemapCache":function(){define("require exports tslib ../../request ../../core/Accessor ../../core/Error ../../core/Handles ../../core/Logger ../../core/LRUCache ../../core/PooledArray ../../core/promiseUtils ../../core/scheduling ../../core/urlUtils ../../core/watchUtils ../../core/accessorSupport/decorators ./Tilemap".split(" "),
function(D,b,g,q,e,r,l,f,c,m,A,a,d,x,p,u){Object.defineProperty(b,"__esModule",{value:!0});b.TilemapCache=void 0;var z=f.getLogger("esri.layers.support.TilemapCache");D=function(b){function e(a){a=b.call(this,a)||this;a._handles=new l;a._pendingTilemapRequests={};a._availableLevels={};a.levels=5;a.cacheByteSize=2097152;a.request=q;a._prefetchingEnabled=!0;return a}g.__extends(e,b);f=e;e.prototype.initialize=function(){var a=this;this._tilemapCache=new c(this.cacheByteSize);this._handles.add([this.watch(["layer.parsedUrl",
"layer.tileServers?"],function(){return a._initializeTilemapDefinition()}),x.init(this,"layer.tileInfo.lods",function(b){return a._initializeAvailableLevels(b)},!0)]);this._initializeTilemapDefinition()};e.prototype.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null)};e.prototype.castLevels=function(a){return 2>=a?(z.error("Minimum levels for Tilemap is 3, but got ",a),3):a};Object.defineProperty(e.prototype,"size",{get:function(){return 1<<this.levels},enumerable:!1,configurable:!0});
e.prototype.fetchTilemap=function(a,b,c,d){var e=this;if(!this._availableLevels[a])return A.reject(new r("tilemap-cache:level-unavailable","Level "+a+" is unavailable in the service"));var f=this._tmpTilemapDefinition;if(a=this._tilemapFromCache(a,b,c,f))return A.resolve(a);var h=d&&d.signal;d=g.__assign(g.__assign({},d),{signal:null});return A.create(function(a,b){A.onAbort(h,function(){return b(A.createAbortError())});var c=u.tilemapDefinitionId(f),g=e._pendingTilemapRequests[c];if(!g){var g=u.Tilemap.fromDefinition(f,
d).then(function(a){e._tilemapCache.put(c,a,a.byteSize);return a}),k=function(){return delete e._pendingTilemapRequests[c]};e._pendingTilemapRequests[c]=g;g.then(k,k)}g.then(a,b)})};e.prototype.getAvailability=function(a,b,c){return this._availableLevels[a]?(a=this._tilemapFromCache(a,b,c,this._tmpTilemapDefinition))?a.getAvailability(b,c):"unknown":"unavailable"};e.prototype.getAvailabilityUpsample=function(a,b,c,d){d.level=a;d.row=b;d.col=c;a=this.layer.tileInfo;for(a.updateTileInfo(d);;)if(b=this.getAvailability(d.level,
d.row,d.col),"unavailable"===b){if(!a.upsampleTile(d))return"unavailable"}else return b};e.prototype.fetchAvailability=function(a,b,c,d){return this._availableLevels[a]?this.fetchTilemap(a,b,c,d).catch(function(a){return a}).then(function(d){if(d instanceof u.Tilemap)return d=d.getAvailability(b,c),"unavailable"===d?A.reject(new r("tile-map:tile-unavailable","Tile is not available",{level:a,row:b,col:c})):d;if(A.isAbortError(d))throw d;return"unknown"}):A.reject(new r("tilemap-cache:level-unavailable",
"Level "+a+" is unavailable in the service"))};e.prototype.fetchAvailabilityUpsample=function(a,b,c,d,e){var f=this;d.level=a;d.row=b;d.col=c;var g=this.layer.tileInfo;g.updateTileInfo(d);var h=this.fetchAvailability(a,b,c,e).catch(function(a){if(A.isAbortError(a))throw a;if(g.upsampleTile(d))return f.fetchAvailabilityUpsample(d.level,d.row,d.col,d);throw a;});this._fetchAvailabilityUpsamplePrefetch(d.id,a,b,c,e,h);return h};e.prototype._fetchAvailabilityUpsamplePrefetch=function(b,c,d,e,h,l){return g.__awaiter(this,
void 0,void 0,function(){var k,m,n,p,q,t,v,r,u,w;return g.__generator(this,function(y){switch(y.label){case 0:if(!this._prefetchingEnabled)return[2];k="prefetch-"+b;if(this._handles.has(k))return[2];m=A.createAbortController();l.then(function(){return m.abort()},function(){return m.abort()});n=!1;p={remove:function(){n||(n=!0,m.abort())}};this._handles.add(p,k);y.label=1;case 1:return y.trys.push([1,3,,4]),[4,a.waitTicks(10,m.signal)];case 2:return y.sent(),[3,4];case 3:return y.sent(),[3,4];case 4:n||
(n=!0,this._handles.remove(k));if(A.isAborted(m))return[2];q={id:b,level:c,row:d,col:e};t=g.__assign(g.__assign({},h),{signal:m.signal});v=this.layer.tileInfo;r=function(a){var b=u.fetchAvailability(q.level,q.row,q.col,t);f._prefetches.push(b);a=function(){f._prefetches.removeUnordered(b)};b.then(a,a)};u=this;for(w=0;f._prefetches.length<f._maxPrefetch&&v.upsampleTile(q);++w)r(w);return[2]}})})};e.prototype._initializeTilemapDefinition=function(){if(this.layer.parsedUrl){var a=this.layer.parsedUrl,
b=a.query;this._tilemapCache.clear();this._tmpTilemapDefinition={service:{url:a.path,query:b?d.objectToQuery(b):null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}};e.prototype._tilemapFromCache=function(a,b,c,d){d.level=a;d.row=b-b%this.size;d.col=c-c%this.size;a=u.tilemapDefinitionId(d);return this._tilemapCache.get(a)};e.prototype._initializeAvailableLevels=function(a){var b=this;this._availableLevels={};a&&a.forEach(function(a){return b._availableLevels[a.level]=
!0})};Object.defineProperty(e.prototype,"test",{get:function(){var a=this;return{get prefetchingEnabled(){return a._prefetchingEnabled},set prefetchingEnabled(b){a._prefetchingEnabled=b},hasTilemap:function(b,c,d){return!!a._tilemapFromCache(b,c,d,a._tmpTilemapDefinition)}}},enumerable:!1,configurable:!0});var f;e._maxPrefetch=4;e._prefetches=new m({initialSize:f._maxPrefetch});g.__decorate([p.property({constructOnly:!0,type:Number})],e.prototype,"levels",void 0);g.__decorate([p.cast("levels")],e.prototype,
"castLevels",null);g.__decorate([p.property({readOnly:!0,dependsOn:["levels"],type:Number})],e.prototype,"size",null);g.__decorate([p.property({constructOnly:!0,type:Number})],e.prototype,"cacheByteSize",void 0);g.__decorate([p.property({constructOnly:!0})],e.prototype,"layer",void 0);g.__decorate([p.property({constructOnly:!0})],e.prototype,"request",void 0);return e=f=g.__decorate([p.subclass("esri.layers.support.TilemapCache")],e)}(e);b.TilemapCache=D})},"esri/layers/support/Tilemap":function(){define("require exports tslib ../../request ../../core/arrayUtils ../../core/Error ../../core/lang".split(" "),
function(D,b,g,q,e,r,l){function f(b){var c;"vector-tile"===b.service.type?c=b.service.url+"/tilemap/"+b.level+"/"+b.row+"/"+b.col+"/"+b.width+"/"+b.height:(c=b.service.tileServers,c=(c&&c.length?c[b.row%c.length]:b.service.url)+"/tilemap/"+b.level+"/"+b.row+"/"+b.col+"/"+b.width+"/"+b.height);(b=b.service.query)&&(c=c+"?"+b);return c}Object.defineProperty(b,"__esModule",{value:!0});b.tilemapDefinitionUrl=b.tilemapDefinitionId=b.Tilemap=void 0;D=function(){function b(){this.location={left:0,top:0,
width:0,height:0};this._allAvailability="unknown";this.byteSize=40}b.prototype.getAvailability=function(b,c){if("unknown"!==this._allAvailability)return this._allAvailability;b=(b-this.location.top)*this.location.width+(c-this.location.left);c=b>>3;var a=this._tileAvailabilityBitSet;return 0>c||c>a.length?"unknown":a[c]&1<<b%8?"available":"unavailable"};b.prototype._updateFromData=function(b){for(var c=!0,a=!0,d=new Uint8Array(Math.ceil(this.location.width*this.location.height/8)),e=0,f=0;f<b.length;f++){var g=
f%8;b[f]?(a=!1,d[e]|=1<<g):c=!1;7===g&&++e}a?this._allAvailability="unavailable":c?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=d,this.byteSize+=d.length)};b.fromDefinition=function(c,l){var a=c.service.request||q,d=c.row,m=c.col,p=c.width,u=c.height,z={query:{f:"json"}};l=l?g.__assign(g.__assign({},z),l):z;return a(f(c),l).then(function(a){return a.data}).catch(function(a){if(a&&a.details&&422===a.details.httpStatus)return{location:{top:d,left:m,
width:p,height:u},valid:!0,data:e.constant(p*u,0)};throw a;}).then(function(a){if(a.location&&(a.location.top!==d||a.location.left!==m||a.location.width!==p||a.location.height!==u))throw new r("tilemap:location-mismatch","Tilemap response for different location than requested",{response:a,definition:{top:d,left:m,width:p,height:u}});return b.fromJSON(a)})};b.fromJSON=function(c){b.validateJSON(c);var e=new b;e.location=Object.freeze(l.clone(c.location));e._updateFromData(c.data);return Object.freeze(e)};
b.validateJSON=function(b){if(!b||!b.location)throw new r("tilemap:missing-location","Location missing from tilemap response");if(!1===b.valid)throw new r("tilemap:invalid","Tilemap response was marked as invalid");if(!b.data)throw new r("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(b.data))throw new r("tilemap:data-mismatch","Data must be an array of numbers");if(b.data.length!==b.location.width*b.location.height)throw new r("tilemap:data-mismatch","Number of data items does not match width/height of tilemap");
};return b}();b.Tilemap=D;b.tilemapDefinitionId=function(b){return b.level+"/"+b.row+"/"+b.col+"/"+b.width+"/"+b.height};b.tilemapDefinitionUrl=f;b.default=D})},"esri/layers/support/rasterDatasets/MRFRaster":function(){define("require exports tslib ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/promiseUtils ../../../core/accessorSupport/decorators ../PixelBlock ../RasterInfo ../RasterStorageInfo ./BaseRaster ./xmlUtilities".split(" "),function(D,b,g,q,e,r,l,f,c,m,A,a,d){var x=
function(){var a=new ArrayBuffer(4),b=new Uint8Array(a);(new Uint32Array(a))[0]=1;return 1===b[0]}(),p=new Map;p.set("Int8","s8");p.set("UInt8","u8");p.set("Int16","s16");p.set("UInt16","u16");p.set("Int32","s32");p.set("UInt32","u32");p.set("Float32","f32");p.set("Float64","f32");p.set("Double64","f32");var u=new Map;u.set("lerc",".lrc");u.set("none",".til");u.set("deflate",".pzp");u.set("jpeg",".jzp");return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b._files=null;b._storageIndex=
null;b.datasetFormat="MRF";return b}g.__extends(b,a);b.prototype.open=function(a){return g.__awaiter(this,void 0,void 0,function(){var b,c,d,e,f,h,l,m,p,q,v,u,z,A,x,D,P,V,U,R,O;return g.__generator(this,function(g){switch(g.label){case 0:return[4,this.init()];case 1:return g.sent(),this.datasetName=this.url.slice(this.url.lastIndexOf("/")+1),b=a?r.unwrap(a.signal):null,[4,this.request(this.url,{responseType:"xml",signal:b})];case 2:return c=g.sent(),d=this._parseHeader(c.data),e=d.rasterInfo,f=d.files,
this._set("rasterInfo",e),this._files=f,[4,this.request(f.index,{responseType:"array-buffer",signal:b})];case 3:h=g.sent();this._storageIndex=this._parseIndex(h.data);l=0;m=-1;v=this.rasterInfo.storageInfo;u=v.blockWidth;z=v.blockHeight;A=v.compression;x=this.rasterInfo.storageInfo.pyramidScalingFactor;D=this.rasterInfo;P=D.width;V=D.height;U=D.bandCount;R=[];for(O="none"===A?1:U;l<this._storageIndex.length;)m++,p=Math.ceil(P/u/Math.pow(x,m)),q=Math.ceil(V/z/Math.pow(x,m)),l+=p*q*O*4,R.push({maxRow:q,
maxCol:p,minCol:0,minRow:0});this.rasterInfo.storageInfo.blockBoundary=R;0<m&&(this.rasterInfo.storageInfo.firstPyramidLevel=1,this.rasterInfo.storageInfo.maximumPyramidLevel=m);this.updateTileInfo();return[2]}})})};b.prototype.fetchRawTile=function(a,b,d,e){void 0===e&&(e={});return g.__awaiter(this,void 0,void 0,function(){var f,h,k,m,p,q,t,v,r,u,z,x,A,B,D,U,R,O,S,N,T,Q,W,X,Y,Z;return g.__generator(this,function(g){switch(g.label){case 0:f=this.rasterInfo.storageInfo;h=f.blockWidth;k=f.blockHeight;
m=f.blockBoundary;p=f.compression;q=m[a];if(!q||q.maxRow<b||q.maxCol<d||q.minRow>b||q.minCol>d)return[2,null];t=this.rasterInfo;v=t.bandCount;r=t.pixelType;u=this._getTileLocation(a,b,d);z=u.ranges;x=u.actualTileWidth;A=u.actualTileHeight;if(!z||0===z.length)return[2,null];if(0===z[0].from&&0===z[0].to)return B=new Uint8Array(h*k),[2,new c({width:h,height:k,pixels:null,mask:B,validPixelCount:0})];D=this.ioConfig.bandIds;U="none"===p?1:v;R=[];for(O=O=0;O<U;O++)(!D||-1<D.indexOf[O])&&R.push(this.request(this._files.data,
{range:{from:z[O].from,to:z[O].to},responseType:"array-buffer",signal:e.signal}));return[4,l.all(R)];case 1:S=g.sent();N=S.map(function(a){return a.data.byteLength}).reduce(function(a,b){return a+b});T=new Uint8Array(N);for(O=Q=0;O<U;O++)T.set(new Uint8Array(S[O].data),Q),Q+=S[O].data.byteLength;W="lerc"===this.rasterInfo.storageInfo.compression?"lerc":"bip";return[4,this.decodePixelBlock(T.buffer,{width:h,height:k,format:W,pixelType:r})];case 2:X=g.sent();Z=Y=0;if(x!==h||A!==k)if(B=X.mask)for(O=
0;O<k;O++)for(Z=O*h,Y=O<A?x:0;Y<h;Y++)B[Z+Y]=0;else for(B=new Uint8Array(h*k),X.mask=B,O=0;O<A;O++)for(Z=O*h,Y=0;Y<x;Y++)B[Z+Y]=1;return[2,X]}})})};b.prototype._parseIndex=function(a){if(0<a.byteLength%16)throw"invalid array buffer must be multiples of 16";var b,c,d,e,f;if(x){b=new Uint8Array(a);d=new ArrayBuffer(a.byteLength);c=new Uint8Array(d);for(e=0;e<a.byteLength/4;e++)for(f=0;4>f;f++)c[4*e+f]=b[4*e+3-f];a=new Uint32Array(d)}else a=new Uint32Array(a);return a};b.prototype._getTileLocation=function(a,
b,c){var d=this.rasterInfo.storageInfo,e=d.blockWidth,f=d.blockHeight,g=d.pyramidScalingFactor,h=this.rasterInfo,k=h.width,l=h.height,h=h.bandCount,d="none"===d.compression?1:h,m,p,q=0,t=0;for(p=0;p<a;p++)t=Math.pow(g,p),h=Math.ceil(k/e/t),m=Math.ceil(l/f/t),q+=h*m;t=Math.pow(g,a);h=Math.ceil(k/e/t);m=Math.ceil(l/f/t);q=4*(q+(b*h+c))*d;a=this._storageIndex.subarray(q,q+4*d);p=g=0;for(var q=[],v=0;v<d;v++)g=a[4*v+0]*Math.pow(2,32)+a[4*v+1],p=g+a[4*v+2]*Math.pow(2,32)+a[4*v+3],q.push({from:g,to:p});
return{ranges:q,actualTileWidth:c<h-1?e:Math.ceil(k/t)-e*(h-1),actualTileHeight:b<m-1?f:Math.ceil(l/t)-f*(m-1)}};b.prototype._parseHeader=function(a){var b=d.getElement(a,"MRF_META/Raster");if(!b)throw new e("mrf:open","not a valid MRF format");var c=d.getElement(b,"Size"),f=parseInt(c.getAttribute("x"),10),g=parseInt(c.getAttribute("y"),10),h=parseInt(c.getAttribute("c"),10),c=(d.getElementValue(b,"Compression")||"none").toLowerCase(),l=["none","lerc"];if(!c||-1===l.indexOf(c))throw new e("mrf:open",
"currently does not support compression "+c);var v=d.getElementValue(b,"DataType")||"UInt8",l=p.get(v);if(null==l)throw new e("mrf:open","currently does not support pixel type "+v);var r=d.getElement(b,"PageSize"),v=parseInt(r.getAttribute("x"),10),r=parseInt(r.getAttribute("y"),10),b=d.getElement(b,"DataValues"),z;b&&(b=b.getAttribute("NoData"),null!=b&&(z=b.trim().split(" ").map(function(a){return parseFloat(a)})));if(d.getElement(a,"MRF_META/CachedSource"))throw new e("mrf:open","currently does not support MRF referencing other data files");
var x=d.getElement(a,"MRF_META/GeoTags"),D=d.getElement(x,"BoundingBox");if(null==D)throw new e("mrf:open","missing node MRF_META/GeoTags/BoundingBox");var b=parseFloat(D.getAttribute("minx")),M=parseFloat(D.getAttribute("miny")),H=parseFloat(D.getAttribute("maxx")),E=parseFloat(D.getAttribute("maxy")),L=d.getElementValue(x,"Projection"),x=d.getElementValue(a,"datafile"),D=d.getElementValue(a,"IndexFile"),K;"LOCAL_CS[]"!==L&&(K=new q.SpatialReference({wkt:L}));L=new q.Extent(b,M,H,E);L.spatialReference=
K;a=d.getElement(a,"MRF_META/Rsets");a=parseInt(a&&a.getAttribute("scale")||"2",10);a=new A({origin:new q.Point({x:L.xmin,y:L.ymax,spatialReference:K}),blockWidth:v,blockHeight:r,pyramidBlockWidth:v,pyramidBlockHeight:r,compression:c,pyramidScalingFactor:a});v=new q.Point({x:(H-b)/f,y:(E-M)/g,spatialReference:K});f=new m({width:f,height:g,extent:L,spatialReference:K,bandCount:h,pixelType:l,pixelSize:v,noDataValue:z,storageInfo:a});g={mrf:this.url,index:D||this.url.replace(".mrf",".idx"),data:x||this.url.replace(".mrf",
u.get(c))};return{rasterInfo:f,files:g}};g.__decorate([f.property()],b.prototype,"_files",void 0);g.__decorate([f.property()],b.prototype,"_storageIndex",void 0);g.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"datasetFormat",void 0);return b=g.__decorate([f.subclass("esri.layers.support.rasterIO.MRFRaster")],b)}(a)})},"esri/layers/support/rasterDatasets/xmlUtilities":function(){define(["require","exports"],function(D,b){function g(b,e){if(!b||!e)return[];var c=e;-1<e.indexOf("/")?
(c=e.slice(0,e.indexOf("/")),e=e.slice(e.indexOf("/")+1)):e="";b=e?q(b,c).getElementsByTagNameNS("*",e):b.getElementsByTagNameNS("*",c);if(!b||0===b.length)return[];e=[];for(c=0;c<b.length;c++)e.push(b[c]||b.item[c]);return e}function q(b,e){if(!b||!e)return null;var c=e;-1<e.indexOf("/")?(c=e.slice(0,e.indexOf("/")),e=e.slice(e.indexOf("/")+1)):e="";b=g(b,c);return 0<b.length?e?q(b[0],e):b[0]:null}function e(b,e){void 0===e&&(e=null);if(b=e?q(b,e):b)if(b=b.textContent||b.nodeValue)return b.trim();
return null}function r(b,e){b=g(b,e);e=[];for(var c,f=0;f<b.length;f++)if(c=b[f].textContent||b[f].nodeValue)c=c.trim(),""!==c&&e.push(c);return e}Object.defineProperty(b,"__esModule",{value:!0});b.getNodeNameIgnoreNS=b.isSameTagIgnoreNS=b.getElementNumericValues=b.getSpaceDelimitedNumericValues=b.getElementValues=b.getElementValue=b.getElement=b.getElements=void 0;b.getElements=g;b.getElement=q;b.getElementValue=e;b.getElementValues=r;b.getSpaceDelimitedNumericValues=function(b,f){void 0===f&&(f=
null);return e(b,f).split(" ").map(function(b){return Number(b)})};b.getElementNumericValues=function(b,e){return r(b,e).map(function(b){return Number(b)})};b.isSameTagIgnoreNS=function(b,e){var c;b=null===(c=null===b||void 0===b?void 0:b.nodeName)||void 0===c?void 0:c.toLowerCase();e=e.toLowerCase();return b.slice(b.lastIndexOf(":")+1)===e};b.getNodeNameIgnoreNS=function(b){return b.nodeName.slice(b.nodeName.lastIndexOf(":")+1)}})},"esri/layers/support/rasterDatasets/TIFFRaster":function(){define("require exports tslib ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/accessorSupport/decorators ../RasterInfo ../RasterStorageInfo ./BaseRaster ../rasterFormats/TiffDecoder ../rasterFormats/TiffTags".split(" "),
function(D,b,g,q,e,r,l,f,c,m,A,a){var d=function(a,b){return(a=a.get(b))&&a.values},x=function(a,b){return(a=a.get(b))&&a.values[0]};return function(b){function m(){var a=null!==b&&b.apply(this,arguments)||this;a._files=null;a._headerInfo=null;a._bufferSize=1048576;a.datasetFormat="TIFF";return a}g.__extends(m,b);m.prototype.open=function(a){return g.__awaiter(this,void 0,void 0,function(){var b,d,l,k,m,p,u,n,z,x,G,D,I,M,H,E,L,K,P,V,U,R,O,S,N,T,Q;return g.__generator(this,function(h){switch(h.label){case 0:return[4,
this.init()];case 1:return h.sent(),b=a?r.unwrap(a.signal):null,[4,this.request(this.url,{range:{from:0,to:this._bufferSize},responseType:"array-buffer",signal:b})];case 2:d=h.sent().data;if(!d)throw new e("tiffraster:open","failed to open url "+this.url);this.datasetName=this.url.slice(this.url.lastIndexOf("/")+1);l=A.parseSignature(d);k=l.littleEndian;m=l.firstIFD;p=[];return[4,this.readIFDs(p,d,k,m,0,4,b)];case 3:h.sent();u=A.getImageInfo(p);n=u.width;z=u.height;x=u.tileWidth;G=u.tileHeight;D=
u.planes;I=u.pixelType;M=u.compression;H=u.firstPyramidLevel;E=u.maximumPyramidLevel;L=u.pyramidBlockWidth;K=u.pyramidBlockHeight;P=u.tileBoundary;V=u.metadata;U=q.Extent.fromJSON(u.extent);R=U.spatialReference;O=U?new q.Point({x:U.xmin,y:U.ymax,spatialReference:R}):new q.Point({x:0,y:0});S=new c({blockWidth:x,blockHeight:G,pyramidBlockWidth:L,pyramidBlockHeight:K,compression:M,origin:O,firstPyramidLevel:H,maximumPyramidLevel:E,blockBoundary:P});N=new q.Point({x:(U.xmax-U.xmin)/n,y:(U.ymax-U.ymin)/
z,spatialReference:R});T=V?{BandProperties:V.bandProperties,DataType:V.dataType}:{};Q=new f({width:n,height:z,bandCount:D,pixelType:I,compression:M,pixelSize:N,storageInfo:S,spatialReference:R,keyProperties:T,extent:U,statistics:V?V.statistics:null});this._set("rasterInfo",Q);this._headerInfo=g.__assign({littleEndian:k,ifds:p},u);if(!this._headerInfo.isSupported)throw new e("tiffraster:open","this tiff is not supported: "+this._headerInfo.message);this.updateTileInfo();return[2]}})})};m.prototype.fetchRawTile=
function(a,b,c,d){void 0===d&&(d={});return g.__awaiter(this,void 0,void 0,function(){var e,f,h,l,m,p,q,t,v,r,u,z,x,A,D;return g.__generator(this,function(g){switch(g.label){case 0:if(!this._headerInfo&&this._headerInfo.isSupported)return[2,null];e=this.rasterInfo.storageInfo.blockBoundary;f=0<a?this.rasterInfo.storageInfo.pyramidBlockWidth:this.rasterInfo.storageInfo.blockWidth;h=0<a?this.rasterInfo.storageInfo.pyramidBlockHeight:this.rasterInfo.storageInfo.blockHeight;l=e[a];if(!l||l.maxRow<b||
l.maxCol<c||l.minRow>b||l.minCol>c)return[2,null];m=this.getTileLocation(a,b,c);if(!m)return[2,null];p=m.range;q=m.actualTileWidth;t=m.actualTileHeight;v=m.ifd;return[4,this.request(this.url,{range:p,responseType:"array-buffer",signal:d.signal})];case 1:return r=g.sent().data,[4,this.decodePixelBlock(r,{format:"tiff",customOptions:{headerInfo:this._headerInfo,ifd:v,offset:0,size:0},width:f,height:h,planes:null,pixelType:null})];case 2:u=g.sent();if(q!==f||t!==h)if(D=u.mask)for(z=0;z<h;z++)for(A=z*
f,x=z<t?q:0;x<f;x++)D[A+x]=0;else for(D=new Uint8Array(f*h),u.mask=D,z=0;z<t;z++)for(A=z*f,x=0;x<q;x++)D[A+x]=1;return[2,u]}})})};m.prototype.readIFDs=function(b,c,d,e,f,l,m){void 0===l&&(l=4);return g.__awaiter(this,void 0,void 0,function(){var h,k;return g.__generator(this,function(g){switch(g.label){case 0:return e?e>=c.byteLength||0>e?[4,this.request(this.url,{range:{from:e+f,to:e+f+this._bufferSize},responseType:"array-buffer",signal:m})]:[3,2]:[2,null];case 1:h=g.sent(),c=h.data,f=e+f,e=0,g.label=
2;case 2:return[4,this.readIFD(c,d,e,f,a.TIFF_TAGS,l,m)];case 3:return k=g.sent(),b.push(k.ifd),k.nextIFD?[4,this.readIFDs(b,c,d,k.nextIFD-f,f,l,m)]:[2,null];case 4:return g.sent(),[2]}})})};m.prototype.readIFD=function(b,c,d,e,f,l,m){void 0===f&&(f=a.TIFF_TAGS);void 0===l&&(l=4);return g.__awaiter(this,void 0,void 0,function(){var h,k,p,q,t,r,v,u,y,x,z;return g.__generator(this,function(g){switch(g.label){case 0:if(!b)return[2,null];h=A.parseIFD(b,c,d,e,f,l);if(!h.success)return[3,5];k=[];h.ifd.forEach(function(a){a.values||
k.push(a)});if(!(0<k.length))return[3,2];p=k.map(function(a){return a.offlineOffsetSize});q=Math.min.apply(null,p.map(function(a){return a[0]}));t=Math.min.apply(null,p.map(function(a){return a[0]+a[1]}));return t-q<=this._bufferSize?[4,this.request(this.url,{range:{from:q,to:q+this._bufferSize},responseType:"array-buffer",signal:m})]:[3,2];case 1:b=r=g.sent().data,e=q,k.forEach(function(a){return A.parseFieldValues(b,c,a,e)}),g.label=2;case 2:if(!h.ifd.has("GEOKEYDIRECTORY"))return[3,4];v=h.ifd.get("GEOKEYDIRECTORY");
u=v.values;if(!(u&&4<u.length))return[3,4];y=u[0]+"."+u[1]+"."+u[2];return[4,this.readIFD(b,c,v.valueOffset+6-e,e,a.GEO_KEYS,2,m)];case 3:x=g.sent(),v.data=x.ifd,v.data&&v.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[y]}),g.label=4;case 4:return[2,h];case 5:return h.requiredBufferSize&&h.requiredBufferSize!==b.byteLength?[4,this.request(this.url,{range:{from:e,to:e+h.requiredBufferSize+4},responseType:"array-buffer",signal:m})]:[3,7];case 6:return z=g.sent(),b=z.data,
b.byteLength<h.requiredBufferSize?[2,null]:[2,this.readIFD(b,c,0,e,a.TIFF_TAGS,4,m)];case 7:return[2]}})})};m.prototype.getTileLocation=function(a,b,c){var e=this.rasterInfo.storageInfo,f=e.firstPyramidLevel,g=e.blockBoundary,h=0===a?0:a-(f-1);a=this._headerInfo.ifds[h];if(!a)return null;e=d(a,"TILEOFFSETS");if(void 0===e)return null;var f=d(a,"TILEBYTECOUNTS"),h=g[h],l=h.minRow,m=h.minCol,g=h.maxRow,h=h.maxCol;if(b>g||c>h||b<l||c<m)return null;var l=x(a,"IMAGEWIDTH"),m=x(a,"IMAGELENGTH"),p=x(a,"TILEWIDTH"),
q=x(a,"TILELENGTH"),r=b*(h+1)+c,e=e[r],f=f[r];return null==e||null==f?null:{range:{from:e,to:e+f-1},ifd:a,actualTileWidth:c===h?l%p:p,actualTileHeight:b===g?m%q:q}};g.__decorate([l.property()],m.prototype,"_files",void 0);g.__decorate([l.property()],m.prototype,"_headerInfo",void 0);g.__decorate([l.property()],m.prototype,"_bufferSize",void 0);g.__decorate([l.property({type:String,json:{write:!0}})],m.prototype,"datasetFormat",void 0);return m=g.__decorate([l.subclass("esri.layers.support.rasterDatasets.TIFFRaster")],
m)}(m)})},"*noref":1}});
define("require exports tslib ../PopupTemplate ../rasterRenderers ../core/Error ../core/jsonMap ../core/maybe ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ./Layer ./mixins/BlendLayer ./mixins/ImageryTileMixin ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./support/commonProperties ./support/Field ./support/rasterDatasets/RasterFactory ../support/popupUtils".split(" "),function(D,
b,g,q,e,r,l,f,c,m,A,a,d,x,p,u,z,h,v,t,k,B,y){function w(){return{enabled:this.loaded?"RasterTileServer"===this.raster.datasetFormat&&"Raster"===this.raster.tileType:!0}}var n=l.strict()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"});return function(b){function c(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];a=b.apply(this,a)||this;a.bandIds=null;a.interpolation=null;a.legendEnabled=!0;a.isReference=null;a.listMode=
"show";a.sourceJSON=null;a.version=null;a.title=null;a.type="imagery-tile";a.operationalLayerType="ArcGISTiledImageServiceLayer";a.popupEnabled=!0;a.popupTemplate=null;return a}g.__extends(c,b);c.prototype.normalizeCtorArgs=function(a,b){return"string"===typeof a?g.__assign({url:a},b):a};c.prototype.load=function(a){var b=this,c=f.isSome(a)?a.signal:null;this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},a).then(function(){return b._openRaster(c)},function(){return b._openRaster(c)}));
return m.resolve(this)};Object.defineProperty(c.prototype,"defaultPopupTemplate",{get:function(){return this.createPopupTemplate()},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"fields",{get:function(){var a,b,c=[new k({name:"Raster.ServicePixelValue",alias:"Pixel Value",domain:null,editable:!1,length:50,type:"string"})],d=null===(b=null===(a=this.rasterInfo)||void 0===a?void 0:a.attributeTable)||void 0===b?void 0:b.fields;d&&(a=d.filter(function(a){return"oid"!==a.type&&"value"!==
a.name.toLowerCase()}).map(function(a){var b=a.clone();b.name="Raster."+a.name;return b}),c=c.concat(a));return c},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"renderer",{set:function(a){this._set("renderer",a);this.updateRenderer()},enumerable:!1,configurable:!0});c.prototype.readRenderer=function(a,b,c){a=e.read(b&&b.layerDefinition&&b.layerDefinition.drawingInfo&&b.layerDefinition.drawingInfo.renderer,c)||void 0;if(null!=a)return a};c.prototype.createPopupTemplate=function(a){return y.createPopupTemplate(this,
a)};c.prototype.write=function(a,c){var d=this.raster;if(this.loaded?"RasterTileServer"===d.datasetFormat&&("Raster"===d.tileType||"Map"===d.tileType):this.url&&/\/ImageServer(\/|\/?$)/i.test(this.url))return b.prototype.write.call(this,a,c);c&&c.messages&&c.messages.push(new r("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' are not supported in the context of '"+(c.origin+"/"+(c.layerContainerType||"operational-layers"))+"'",{layer:this}));return null};
c.prototype._openRaster=function(a){return g.__awaiter(this,void 0,void 0,function(){var b,c;return g.__generator(this,function(d){switch(d.label){case 0:if(!this.raster)return[3,1];this.url=this.raster.url;return[3,3];case 1:return b=this,[4,B.open({url:this.url,sourceJSON:this.sourceJSON,signal:a})];case 2:b.raster=d.sent(),d.label=3;case 3:c=this.raster.rasterInfo;if(!c)throw new r("imagery-tile-layer:load","cannot load resources on "+this.url);this.sourceJSON=this.sourceJSON||this.raster.sourceJSON;
null!=this.sourceJSON&&(this._set("version",this.sourceJSON.currentVersion),this._set("copyright",this.sourceJSON.copyrightText));null==this.title&&(this.title=this.raster.datasetName);"Map"===this.raster.tileType&&(this.popupEnabled=!1);this._configDefaultSettings();return[2]}})})};g.__decorate([A.property({type:[a.Integer],json:{write:{overridePolicy:w}}})],c.prototype,"bandIds",void 0);g.__decorate([A.property({json:{write:{overridePolicy:w}}}),A.enumeration(n)],c.prototype,"interpolation",void 0);
g.__decorate([A.property({json:{write:!0}})],c.prototype,"multidimensionalDefinition",void 0);g.__decorate([A.property(t.legendEnabled)],c.prototype,"legendEnabled",void 0);g.__decorate([A.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}}})],c.prototype,"isReference",void 0);g.__decorate([A.property({type:["show","hide"]})],c.prototype,"listMode",void 0);g.__decorate([A.property()],c.prototype,"sourceJSON",void 0);g.__decorate([A.property({readOnly:!0})],
c.prototype,"version",void 0);g.__decorate([A.property()],c.prototype,"title",void 0);g.__decorate([A.property({readOnly:!0,json:{read:!1}})],c.prototype,"type",void 0);g.__decorate([A.property({type:["ArcGISTiledImageServiceLayer"]})],c.prototype,"operationalLayerType",void 0);g.__decorate([A.property({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:function(a,b){return!b.disablePopup}},write:{target:"disablePopup",overridePolicy:w,writer:function(a,b,c){b[c]=!a}}}})],c.prototype,
"popupEnabled",void 0);g.__decorate([A.property({type:q,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:w}}})],c.prototype,"popupTemplate",void 0);g.__decorate([A.property({readOnly:!0,dependsOn:["title"]})],c.prototype,"defaultPopupTemplate",null);g.__decorate([A.property({readOnly:!0,type:[k],dependsOn:["rasterInfo"]})],c.prototype,"fields",null);g.__decorate([A.property({types:e.rasterRendererTypes,json:{read:{source:"layerDefinition.drawingInfo.renderer"},write:{target:"layerDefinition.drawingInfo.renderer",
overridePolicy:w}}})],c.prototype,"renderer",null);g.__decorate([A.reader("renderer")],c.prototype,"readRenderer",null);return c=g.__decorate([A.subclass("esri.layers.ImageryTileLayer")],c)}(x.BlendLayer(v.ScaleRangeLayer(h.RefreshableLayer(u.OperationalLayer(z.PortalLayer(p.ImageryTileMixin(c.MultiOriginJSONMixin(d))))))))});