// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/mixins/ArcGISImageService":function(){define("require exports tslib ../../geometry ../../Graphic ../../rasterRenderers ../../request ../../core/Error ../../core/jsonMap ../../core/lang ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/SetUtils ../../core/urlUtils ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../support/commonProperties ../support/DimensionalDefinition ../support/ExportImageServiceParameters ../support/Field ../support/FieldsIndex ../support/imageryRendererUtils ../support/MosaicRule ../support/PixelBlock ../support/RasterFunction ../support/RasterInfo ../support/RasterJobHandler ../support/rasterFormats/RasterCodec ../../renderers/support/rasterRendererHelper ../../renderers/support/RasterSymbolizer ../../tasks/ImageServiceIdentifyTask ../../tasks/QueryTask ../../tasks/support/FeatureSet ../../tasks/support/ImageServiceIdentifyParameters ../../tasks/support/Query".split(" "),
function(A,m,e,r,d,q,n,l,g,p,c,a,b,h,k,f,D,F,v,u,w,y,C,x,t,E,z,B,H,G,K,I,J,L,M,R,V){function W(a){if(!a)return null;a=JSON.stringify(a).match(/"rasterFunction":"(.*?")/gi);return(a=null===a||void 0===a?void 0:a.map(function(a){return a.replace('"rasterFunction":"',"").replace('"',"")}))?a.join("/"):null}Object.defineProperty(m,"__esModule",{value:!0});m.ArcGISImageService=void 0;var S=c.getLogger("esri.layers.mixins.ArcGISImageService"),T=g.strict()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",
RSP_CubicConvolution:"cubic",RSP_Majority:"majority"}),Q=g.strict()({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"}),N=g.strict()({U1:"u1",U2:"u2",U4:"u4",U8:"u8",S8:"s8",U16:"u16",S16:"s16",U32:"u32",S32:"s32",F32:"f32",F64:"f64",C64:"c64",C128:"c128",UNKNOWN:"unknown"}),P=h.SetFromValues("png png8 png24 png32 jpg bmp gif jpgpng lerc tiff".split(" ")),O=F.ensureRange(D.ensureNumber,{min:0,max:255});m.ArcGISImageService=function(h){return function(h){function c(){var a=null!==h&&h.apply(this,
arguments)||this;a._functionRasterInfos={};a._rasterJobHandler={instance:null,refCount:0,connectionPromise:null};a._symbolizer=null;a._defaultServiceMosaicRule=null;a.rasterAttributeTableFieldPrefix="Raster.";a.adjustAspectRatio=null;a.bandCount=null;a.bandIds=void 0;a.capabilities=null;a.compressionQuality=void 0;a.compressionTolerance=.01;a.copyright=null;a.definitionExpression=null;a.exportImageServiceParameters=null;a.rasterInfo=null;a.fields=null;a.fullExtent=null;a.hasMultidimensions=!1;a.imageMaxHeight=
4100;a.imageMaxWidth=4100;a.interpolation=void 0;a.minScale=0;a.maxScale=0;a.multidimensionalInfo=null;a.noData=null;a.noDataInterpretation=void 0;a.objectIdField=null;a.pixelSizeX=null;a.pixelSizeY=null;a.pixelFilter=null;a.raster=void 0;a.viewId=void 0;a.renderer=null;a.rasterAttributeTable=null;a.rasterFunctionInfos=null;a.serviceDataType=null;a.spatialReference=null;a.pixelType=null;a.serviceRasterInfo=null;a.sourceJSON=null;a.url=null;a.version=null;return a}e.__extends(c,h);c.prototype.initialize=
function(){this._set("exportImageServiceParameters",new w.ExportImageServiceParameters({layer:this}))};c.prototype.readDefaultServiceMosaicRule=function(a,b){return t.fromJSON(b)};Object.defineProperty(c.prototype,"rasterFunctionNamesIndex",{get:function(){var a=new Map;if(!this.rasterFunctionInfos||1>this.rasterFunctionInfos.length)return a;this.rasterFunctionInfos.forEach(function(b){a.set(b.name.toLowerCase().replace(/ /gi,"_"),b.name)});return a},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,
"queryTask",{get:function(){return new L({url:this.url})},enumerable:!1,configurable:!0});c.prototype.readBandIds=function(a,b){if(Array.isArray(a)&&0<a.length&&a.every(function(a){return"number"===typeof a}))return a};c.prototype.readCapabilities=function(a,b){return this._readCapabilities(b)};c.prototype.writeCompressionQuality=function(a,b,f){null!=a&&"lerc"!==this.format&&(b[f]=a)};c.prototype.writeCompressionTolerance=function(a,b,f){"lerc"===this.format&&null!=a&&(b[f]=a)};Object.defineProperty(c.prototype,
"fieldsIndex",{get:function(){return this.fields?new C(this.fields):null},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"format",{set:function(a){a&&P.has(a.toLowerCase())&&this._set("format",a.toLowerCase())},enumerable:!1,configurable:!0});c.prototype.readFormat=function(a,b){return"esriImageServiceDataTypeVector-UV"===b.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===b.serviceDataType?"lerc":null!=this.pixelFilter?"lerc":"jpgpng"};c.prototype.readMinScale=function(a,
b){return null!=b.minLOD&&null!=b.maxLOD?a:0};c.prototype.readMaxScale=function(a,b){return null!=b.minLOD&&null!=b.maxLOD?a:0};Object.defineProperty(c.prototype,"mosaicRule",{set:function(a){a&&a.mosaicMethod&&(a=t.fromJSON(e.__assign(e.__assign({},a.toJSON()),{mosaicMethod:a.mosaicMethod,mosaicOperation:a.mosaicOperation})));this._set("mosaicRule",a)},enumerable:!1,configurable:!0});c.prototype.readMosaicRule=function(a,b){return t.fromJSON(a||b.mosaicRule||b)};c.prototype.writeMosaicRule=function(a,
b,f){a=this.mosaicRule;var c=this.definitionExpression;a?c&&c!==a.where&&(a=a.clone(),a.where=c):c&&(a=new t({where:c}));this._isValidCustomizedMosaicRule(a)&&(b[f]=a.toJSON())};c.prototype.writeNoData=function(a,b,f){null!=a&&"number"===typeof a&&(b[f]=O(a))};c.prototype.readObjectIdField=function(a,b){a||(a=(a=b.fields.filter(function(a){return"esriFieldTypeOID"===a.type||"oid"===a.type}))&&a[0]&&a[0].name);return a};Object.defineProperty(c.prototype,"parsedUrl",{get:function(){return this.url?
k.urlToObject(this.url):null},enumerable:!1,configurable:!0});c.prototype.readRenderer=function(a,b,f){a=q.read(b&&b.layerDefinition&&b.layerDefinition.drawingInfo&&b.layerDefinition.drawingInfo.renderer,f)||void 0;if(null!=a)return x.isSupportedRendererType(a)||S.warn("ArcGISImageService","Imagery layer doesn't support given renderer type."),a};Object.defineProperty(c.prototype,"rasterFields",{get:function(){var a=this.rasterAttributeTableFieldPrefix||"Raster.",b=new y({name:"Raster.ItemPixelValue",
alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:"string"}),f=new y({name:"Raster.ServicePixelValue",alias:"Service Pixel Value",domain:null,editable:!1,length:50,type:"string"}),c=new y({name:"Raster.ServicePixelValue.Raw",alias:"Raw Service Pixel Value",domain:null,editable:!1,length:50,type:"string"}),h=this.fields?p.clone(this.fields):[];h.push(f);this.capabilities.operations.supportsQuery&&this.fields&&0<this.fields.length&&h.push(b);10.4<=this.version&&this.rasterFunctionInfos&&
this.rasterFunctionInfos.some(function(a){return"none"===a.name.toLowerCase()})&&h.push(c);this.rasterFunctionInfos&&this.rasterFunctionInfos.filter(function(a){return"none"!==a.name.toLowerCase()}).forEach(function(a){h.push(new y({name:"Raster.ServicePixelValue."+a.name,alias:a.name,domain:null,editable:!1,length:50,type:"string"}))});null==this.pixelFilter||"esriImageServiceDataTypeVector-UV"!==this.serviceDataType&&"esriImageServiceDataTypeVector-MagDir"!==this.serviceDataType||(h.push(new y({name:"Raster.Magnitude",
alias:"Magnitude",domain:null,editable:!1,type:"double"})),h.push(new y({name:"Raster.Direction",alias:"Direction",domain:null,editable:!1,type:"double"})));(b=this.rasterInfo.attributeTable&&this.rasterInfo.attributeTable.fields||null)&&0<b.length&&(b=b.filter(function(a){return"esriFieldTypeOID"!==a.type&&"value"!==a.name.toLowerCase()}).map(function(b){var f=p.clone(b);f.name=a+b.name;return f}),h=h.concat(b));return h},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"renderingRule",
{set:function(a){a&&a.rasterFunction&&(a=z.fromJSON(e.__assign(e.__assign({},a.toJSON()),{rasterFunction:a.rasterFunction,rasterFunctionArguments:a.rasterFunctionArguments})));this._set("renderingRule",a)},enumerable:!1,configurable:!0});c.prototype.readRenderingRule=function(a,b){a=b.rasterFunctionInfos;return b.renderingRule||a&&a.length&&"None"!==a[0].name?z.fromJSON(b.renderingRule||{rasterFunctionInfos:b.rasterFunctionInfos}):null};c.prototype.writeRenderingRule=function(a,b,f){this._isRFTJson(a)||
(b[f]=a.toJSON())};c.prototype.readSpatialReference=function(a,b){return(a=a||b.extent.spatialReference)?r.SpatialReference.fromJSON(a):null};c.prototype.readPixelType=function(a){return N.fromJSON(a)||a};c.prototype.writePixelType=function(b,f,c){if(a.isNone(this.serviceRasterInfo)||this.pixelType!==this.serviceRasterInfo.pixelType)f[c]=N.toJSON(b)};c.prototype.readVersion=function(a,b){(a=b.currentVersion)||(a=b.hasOwnProperty("fields")||b.hasOwnProperty("timeInfo")?10:9.3);return a};c.prototype.applyFilter=
function(a){var b=a;this.pixelFilter&&(b=this._clonePixelData(a),this.pixelFilter(b));return b};c.prototype.applyRenderer=function(a,b){return e.__awaiter(this,void 0,void 0,function(){var f,c,h,k,t;return e.__generator(this,function(d){switch(d.label){case 0:f=a;if(this._isPicture()||!this.renderer||!this._symbolizer||this.pixelFilter)return[3,5];c=JSON.stringify(this._cachedRendererJson)!==JSON.stringify(this.renderer.toJSON());h=this._rasterJobHandler.instance;k=this.bandIds;if(!h)return[3,4];
if(!c)return[3,2];this._symbolizer.bind();return[4,h.updateSymbolizer(this._symbolizer,b)];case 1:d.sent(),this._cachedRendererJson=this.renderer.toJSON(),d.label=2;case 2:return[4,h.symbolize(e.__assign({bandIds:k},a),b)];case 3:return t=d.sent(),f={extent:a.extent,pixelBlock:t},[3,5];case 4:f={extent:a.extent,pixelBlock:this._symbolizer.symbolize(e.__assign({bandIds:k},a))},d.label=5;case 5:return[2,f]}})})};c.prototype.destroy=function(){this._shutdownJobHandler()};c.prototype.increaseRasterJobHandlerUsage=
function(){this._rasterJobHandler.refCount++};c.prototype.decreaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount--;0>=this._rasterJobHandler.refCount&&this._shutdownJobHandler()};c.prototype.fetchImage=function(a,f,c,h){var k=this;void 0===h&&(h={});if(null==a||null==f||null==c)return b.reject(new l("imagery-layer:fetch-image","Insufficient parameters for requesting an image. A valid extent, width and height values are required."));var t=this.renderer||this._symbolizer?this.generateRasterInfo(this.renderingRule,
{signal:h.signal}):null;return b.when(t).then(function(b){b&&(k.rasterInfo=b);b={imageServiceParameters:k.getExportImageServiceParameters(a,f,c,h.timeExtent),imageProps:{extent:a,width:f,height:c,format:k.format},requestAsImageElement:h.requestAsImageElement&&!k.pixelFilter||!1,signal:h.signal};return k._requestArrayBuffer(b)})};c.prototype.fetchKeyProperties=function(a){a=a&&a.renderingRule&&a.renderingRule.toJSON();return n(this.parsedUrl.path+"/keyProperties",{query:this._getQueryParams({renderingRule:10.3<=
this.version&&a?JSON.stringify(a):null})}).then(function(a){return a.data})};c.prototype.fetchRasterAttributeTable=function(a){a=a&&a.renderingRule&&a.renderingRule.toJSON();return 10.1>this.version?b.reject(new l("#fetchRasterAttributeTable()","Failed to get rasterAttributeTable")):n(this.parsedUrl.path+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:10.3<=this.version&&a?JSON.stringify(a):null})}).then(function(a){return M.fromJSON(a.data)})};c.prototype.getCatalogItemRasterInfo=
function(a,f){return e.__awaiter(this,void 0,void 0,function(){var c,h,k,t,d;return e.__generator(this,function(g){switch(g.label){case 0:return c=n(this.parsedUrl.path+"/"+a+"/info",e.__assign({query:this._getQueryParams()},f)).then(function(a){return a.data}),h=n(this.parsedUrl.path+"/"+a+"/info/keyProperties",e.__assign({query:this._getQueryParams()},f)).then(function(a){return a.data}).catch(function(){}),[4,b.all([c,h])];case 1:k=g.sent();if(!k[0])return[2,void 0];t=r.Extent.fromJSON(k[0].extent);
d=k[0].statistics?k[0].statistics.map(function(a){return{min:a[0],max:a[1],avg:a[2],stddev:a[3]}}):null;return[2,new B({bandCount:k[0].bandCount,extent:t,spatialReference:t.sr,pixelSize:new r.Point({x:k[0].pixelSizeX,y:k[0].pixelSizeY,spatialReference:t.sr}),pixelType:k[0].pixelType.toLowerCase(),statistics:d,histograms:k[0].histograms,keyProperties:k[1]||{}})]}})})};c.prototype.getCatalogItemICSInfo=function(a,f){var c,h,k;return e.__awaiter(this,void 0,void 0,function(){var t,d,g,u,l,D,p,w,v,F,
y,C,x,q,E,K,B,z,H,m,I,J,L,G,M,Y,R,aa,ba,ca;return e.__generator(this,function(P){switch(P.label){case 0:return[4,n(this.parsedUrl.path+"/"+a+"/info/ics",e.__assign({query:this._getQueryParams()},f))];case 1:d=(t=P.sent().data)&&t.ics;if(!d)return[2,void 0];g=null;P.label=2;case 2:return P.trys.push([2,4,,5]),[4,n(this.parsedUrl.path+"/"+a+"/info",e.__assign({query:this._getQueryParams()},f))];case 3:return u=P.sent(),g=u.data.extent,[3,5];case 4:return P.sent(),[3,5];case 5:if(!g||!g.spatialReference)return[2,
{ics:d,icsToPixelTransform:null,icsExtent:null,northDirection:null}];l=10.7<=this.version?n(this.parsedUrl.path+"/"+a+"/info/icstopixel",e.__assign({query:this._getQueryParams()},f)).then(function(a){return a.data}).catch(function(){return{}}):{};D=g.spatialReference;p={geometries:JSON.stringify({geometryType:"esriGeometryEnvelope",geometries:[g]}),inSR:D.wkid||JSON.stringify(D),outSR:"0:"+a};w=n(this.parsedUrl.path+"/project",e.__assign({query:this._getQueryParams(p)},f)).then(function(a){return a.data}).catch(function(){return{}});
v=5;F=(g.xmin+g.xmax)/2;y=(g.ymax-g.ymin)/(v+1);C=g.ymin+y;x=[];for(q=0;q<v;q++)x.push({x:F,y:C+y*q});E={geometries:JSON.stringify({geometryType:"esriGeometryPoint",geometries:x}),inSR:D.wkid||JSON.stringify(D),outSR:"0:"+a};K=n(this.parsedUrl.path+"/project",e.__assign({query:this._getQueryParams(E)},f)).then(function(a){return a.data}).catch(function(){return{}});return[4,b.all([l,w,K])];case 6:B=P.sent();z=B[0].ipxf;null==z&&(H=null===(c=d.geodataXform)||void 0===c?void 0:c.xf_0,"topup"===(null===
(h=null===H||void 0===H?void 0:H.name)||void 0===h?void 0:h.toLowerCase())&&6===(null===(k=null===H||void 0===H?void 0:H.coefficients)||void 0===k?void 0:k.length)&&(z={affine:{name:"ics [sensor: Frame] to pixel (column, row) transformation",coefficients:H.coefficients,cellsizeRatio:0,type:"GeometricXform"}}));if(m=r.Extent.fromJSON(B[1]&&B[1].geometries&&B[1].geometries[0]))m.spatialReference=new r.SpatialReference({wkid:0,imageCoordinateSystem:d});I=B[2].geometries?B[2].geometries.filter(function(a){return null!=
a&&null!=a.x&&null!=a.y&&"NaN"!==a.x&&"NaN"!==a.y}):[];J=I.length;if(3>J)return[2,{ics:d,icsToPixelTransform:z,icsExtent:m,northDirection:null}];for(q=Y=M=G=L=0;q<J;q++)L+=I[q].x,G+=I[q].y,M+=I[q].x*I[q].x,Y+=I[q].x*I[q].y;R=(J*Y-L*G)/(J*M-L*L);aa=0;ba=I[v-1].x>I[0].x;ca=I[v-1].y>I[0].y;Infinity===R?aa=ca?90:270:0===R?aa=ba?0:180:0<R?aa=ba?180*Math.atan(R)/Math.PI:180*Math.atan(R)/Math.PI+180:0>R&&(aa=ca?180+180*Math.atan(R)/Math.PI:360+180*Math.atan(R)/Math.PI);return[2,{ics:d,icsToPixelTransform:z,
icsExtent:m,northDirection:aa}]}})})};c.prototype.generateRasterInfo=function(b,f){return e.__awaiter(this,void 0,void 0,function(){var c,h;return e.__generator(this,function(k){switch(k.label){case 0:if((!b||"none"===b.functionName.toLowerCase())&&a.isSome(this.serviceRasterInfo))return[2,this.serviceRasterInfo];c=W(b);if(this._functionRasterInfos[c])return[2,this._functionRasterInfos[c]];h=this._generateRasterInfo(b,f);this._functionRasterInfos[c]=h;k.label=1;case 1:return k.trys.push([1,3,,4]),
[4,h];case 2:return[2,k.sent()];case 3:return k.sent(),this._functionRasterInfos[c]=null,[2,null];case 4:return[2]}})})};c.prototype.getExportImageServiceParameters=function(b,f,c,h){b=b.clone().shiftCentralMeridian();var k=b.spatialReference;if(k.imageCoordinateSystem)var t=k.imageCoordinateSystem,d=t.id,t=t.referenceServiceName,k=null!=d?t?-1<this.parsedUrl.path.toLowerCase().indexOf("/"+t.toLowerCase()+"/")?"0:"+d:JSON.stringify({icsid:d,icsns:t}):"0:"+d:JSON.stringify({ics:k.imageCoordinateSystem});
else k=k.wkid||JSON.stringify(k.toJSON());a.isSome(this.serviceRasterInfo)&&this.pixelType!==this.serviceRasterInfo.pixelType&&(this.exportImageServiceParameters.pixelType=this.pixelType);var d=this.exportImageServiceParameters.toJSON(),t=d.bandIds,g=d.noData,u=d.mosaicRule,l=d.renderingRule;t instanceof Array&&0<t.length&&(d.bandIds=t.join(","));g instanceof Array&&0<g.length&&(d.noData=g.join(","));var D=this.timeInfo;u&&u.multidimensionalDefinition&&h&&D&&D.startField&&(u.multidimensionalDefinition=
u.multidimensionalDefinition.filter(function(a){return a.dimensionName!==D.startField}));d.mosaicRule=u&&JSON.stringify(u);d.renderingRule=l&&JSON.stringify(l);t={};if(h)if(g=h.toJSON(),h=g.start,g=g.end,h&&g&&h===g)t.time=""+h;else if(null!=h||null!=g)t.time=(null==h?"null":h)+","+(null==g?"null":g);return e.__assign(e.__assign({bbox:b.xmin+","+b.ymin+","+b.xmax+","+b.ymax,bboxSR:k,imageSR:k,size:f+","+c},d),t)};c.prototype.queryRasters=function(a){return this.queryTask.execute(a)};c.prototype.queryVisibleRasters=
function(a,f){var c=this;if(!a)return b.reject(new l("imagery-layer: query-visible-rasters","missing query parameter"));var h=f||{pixelSize:null,returnDomainValues:!1,returnTopmostRaster:!1,showNoDataRecords:!1};f=h.pixelSize;var k=h.returnDomainValues,t=h.returnTopmostRaster,d=h.showNoDataRecords,g=!1,u=h=null,D=this.rasterFunctionNamesIndex;if(a.outFields&&(g=a.outFields.some(function(a){return-1===a.toLowerCase().indexOf("raster.servicepixelvalue")}),10.4<=this.version)){var p=a.outFields.filter(function(a){return-1<
a.toLowerCase().indexOf("raster.servicepixelvalue")&&24<a.length}).map(function(a){a=a.slice(25);return[c._updateRenderingRulesFunctionName(a,D),a]}),h=p.map(function(a){return new z({functionName:a[0]})}),u=p.map(function(a){return a[1]});0===h.length?this.renderingRule?(h.push(this.renderingRule),u.push(this.renderingRule.functionName)):h=null:this.renderingRule&&!h.some(function(a){return a.functionName===c.renderingRule.functionName})&&(h.push(this.renderingRule),u.push(this.renderingRule.functionName))}var w=
!a.outSpatialReference||a.outSpatialReference.equals(this.spatialReference);f=this._getQueryParams({geometry:a.geometry,timeExtent:a.timeExtent,mosaicRule:this.exportImageServiceParameters.mosaicRule,renderingRule:10.4>this.version?this.renderingRule:null,renderingRules:h,pixelSize:f,returnCatalogItems:g,returnGeometry:w,maxItemCount:t?1:null});delete f.f;var v=new R(f),n=new J({url:this.url}),e=this.generateRasterInfo(this.renderingRule);return b.create(function(b){e.then(function(){n.execute(v).then(function(f){var h=
a.outFields;if(g&&!w&&f.catalogItems&&f.catalogItems.features&&0<f.catalogItems.features.length){var t=c.objectIdField||"ObjectId",D=f.catalogItems.features,p=D.map(function(a){return a.attributes&&a.attributes[t]}),p=new V({objectIds:p,returnGeometry:!0,outSpatialReference:a.outSpatialReference,outFields:[t]});return c.queryRasters(p).then(function(g){g&&g.features&&0<g.features.length&&g.features.forEach(function(b){D.forEach(function(f){f.attributes[t]===b.attributes[t]&&(f.geometry=new r.Polygon(b.geometry),
f.geometry.spatialReference=a.outSpatialReference)})});b(c._processVisibleRastersResponse(f,{returnDomainValues:k,templateRRFunctionNames:u,showNoDataRecords:d,templateFields:h}))}).catch(function(){throw new l("imagery-layer:query-visible-rasters","encountered error when querying visible rasters geometry");})}b(c._processVisibleRastersResponse(f,{returnDomainValues:k,templateRRFunctionNames:u,showNoDataRecords:d,templateFields:h}))}).catch(function(){throw new l("imagery-layer:query-visible-rasters",
"encountered error when querying visible rasters");})})})};c.prototype.fetchVariableStatisticsHistograms=function(a,f){return e.__awaiter(this,void 0,void 0,function(){var c,h,k;return e.__generator(this,function(t){switch(t.label){case 0:return c=n(this.parsedUrl.path+"/statistics",{query:this._getQueryParams({variable:a}),signal:f}).then(function(a){var b;return null===(b=a.data)||void 0===b?void 0:b.statistics}),h=n(this.parsedUrl.path+"/histograms",{query:this._getQueryParams({variable:a}),signal:f}).then(function(a){var b;
return null===(b=a.data)||void 0===b?void 0:b.histograms}),[4,b.all([c,h])];case 1:return k=t.sent(),k[0]&&k[0].forEach(function(a){a.avg=a.mean;a.stddev=a.standardDeviation}),[2,{statistics:k[0]||null,histograms:k[1]||null}]}})})};c.prototype._fetchService=function(f){var c;return e.__awaiter(this,void 0,void 0,function(){var h,k,t,d,g,u,D,p=this;return e.__generator(this,function(w){switch(w.label){case 0:return(h=this.sourceJSON)?[3,2]:[4,n(this.parsedUrl.path,{query:this._getQueryParams(),signal:f})];
case 1:k=w.sent(),t=k.data,d=k.ssl,this.sourceJSON=h=t,d&&(this.url=this.url.replace(/^http:/i,"https:")),w.label=2;case 2:if(g=-1<(null===(c=h.capabilities)||void 0===c?void 0:c.toLowerCase().split(",").map(function(a){return a.trim()}).indexOf("tilesonly")))throw new l("imagery-layer:fetch-metadata","use ImageryTileLayer to open tiles-only image services");this.read(h,{origin:"service",url:this.parsedUrl});a.isSome(this.serviceRasterInfo)&&!this.rasterInfo&&(this.rasterInfo=this.serviceRasterInfo);
u=a.isSome(this.serviceRasterInfo)?b.resolve(this.serviceRasterInfo):this._fetchAuxiliaryRasterInfo({serviceInfo:h,signal:f}).then(function(a){p._set("serviceRasterInfo",a);return a});D=this.renderingRule&&"none"!==this.renderingRule.functionName.toLowerCase()?this.generateRasterInfo(this.renderingRule,{signal:f}):null;return[2,b.all([u,D]).then(function(b){b[1]?p._set("rasterInfo",b[1]):p._set("rasterInfo",b[0]);p._configDefaultRenderer();p.watch("renderer",function(){return p._configDefaultRenderer()});
p.watch("renderingRule",function(a){(p.renderer||p._symbolizer||p.popupEnabled&&p.popupTemplate)&&p.generateRasterInfo(a).then(function(a){a&&(p.rasterInfo=a)})});(b=a.isSome(p.serviceRasterInfo)&&p.serviceRasterInfo.multidimensionalInfo)&&p._updateMultidimensionalDefinition(b)})]}})})};c.prototype._initJobHandler=function(){return e.__awaiter(this,void 0,void 0,function(){var a,b=this;return e.__generator(this,function(f){switch(f.label){case 0:if(null!=this._rasterJobHandler.connectionPromise)return[2,
this._rasterJobHandler.connectionPromise];a=new H;this._rasterJobHandler.connectionPromise=a.initialize().then(function(){b._rasterJobHandler.instance=a},function(){return null});return[4,this._rasterJobHandler.connectionPromise];case 1:return f.sent(),[2]}})})};c.prototype._shutdownJobHandler=function(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy();this._rasterJobHandler.instance=null;this._rasterJobHandler.connectionPromise=null;this._rasterJobHandler.refCount=0};c.prototype._isPicture=
function(){return!this.format||-1<this.format.indexOf("jpg")||-1<this.format.indexOf("png")};c.prototype._configDefaultRenderer=function(){var a,b;if(!this._isPicture()&&!this.pixelFilter){if(!this.bandIds&&3<=this.rasterInfo.bandCount){var f=K.getDefaultBandCombination(this.rasterInfo);!f||3===this.rasterInfo.bandCount&&0===f[0]&&1===f[1]&&2===f[2]||(this.bandIds=f)}this.renderer||(this.renderer=K.createDefaultRenderer(this.rasterInfo,{bandIds:this.bandIds,variableName:this.renderingRule?null:null===
(b=null===(a=this.mosaicRule)||void 0===a?void 0:a.multidimensionalDefinition)||void 0===b?void 0:b[0].variableName}));this._symbolizer?(this._symbolizer.renderer=this.renderer,this._symbolizer.rasterInfo=this.rasterInfo):this._symbolizer=new I({renderer:this.renderer,rasterInfo:this.rasterInfo});this._symbolizer.bind()||(this._symbolizer=null)}};c.prototype._clonePixelData=function(a){return null==a?a:{extent:a.extent&&a.extent.clone(),pixelBlock:a.pixelBlock&&a.pixelBlock.clone()}};c.prototype._getQueryParams=
function(a){return e.__assign({raster:this.raster,viewId:this.viewId,f:"json"},a)};c.prototype._decodePixelBlock=function(a,b,f){return this._rasterJobHandler.instance?this._rasterJobHandler.instance.decode({data:a,options:b}):G.decode(a,b,f)};c.prototype._fetchMultidimensionalInfo=function(a){var b;return e.__awaiter(this,void 0,void 0,function(){var f;return e.__generator(this,function(c){switch(c.label){case 0:return[4,n(this.parsedUrl.path+"/multidimensionalInfo",{query:this._getQueryParams(),
signal:a}).then(function(a){var b;return null===(b=a.data)||void 0===b?void 0:b.multidimensionalInfo})];case 1:return f=c.sent(),(null===(b=f.variables)||void 0===b?0:b.length)&&f.variables.forEach(function(a){var b;(null===(b=a.statistics)||void 0===b?0:b.length)&&a.statistics.forEach(function(a){a.avg=a.mean;a.stddev=a.standardDeviation})}),[2,f]}})})};c.prototype._fetchAuxiliaryRasterInfo=function(a){var f=a&&a.serviceInfo;if(!f)return b.reject(new l("imagery-layer:fetch-metadata","valid serviceInfo is required"));
var c=a.renderingRule?JSON.stringify(a.renderingRule.toJSON()):null,h=a.signal;a=f.hasRasterAttributeTable&&10.1<=this.version?n(this.parsedUrl.path+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:10.1<=this.version?c:null}),signal:h}).then(function(a){return M.fromJSON(a.data)}).catch(function(){return null}):!1;var k=f.hasColormap&&10.1<=this.version?n(this.parsedUrl.path+"/colormap",{query:this._getQueryParams({renderingRule:10.6<=this.version?c:null}),signal:h}).then(function(a){var b;
return null===(b=a.data)||void 0===b?void 0:b.colormap}):!1,t=f.hasHistograms&&10.1<=this.version?n(this.parsedUrl.path+"/histograms",{query:this._getQueryParams({renderingRule:10.1<=this.version?c:null}),signal:h}).then(function(a){var b;return null===(b=a.data)||void 0===b?void 0:b.histograms}):!1,c=10.3<=this.version?n(this.parsedUrl.path+"/keyProperties",{query:this._getQueryParams({renderingRule:c}),signal:h}).then(function(a){return a.data}).catch(function(){}):!1,h=f.hasMultidimensions&&10.3<=
this.version?this._fetchMultidimensionalInfo():!1;return b.all([a,k,t,c,h]).then(function(a){var b=null;if(f.minValues&&f.minValues.length===f.bandCount)for(var b=[],c=0;c<f.minValues.length;c++)b.push({min:f.minValues[c],max:f.maxValues[c],avg:f.meanValues[c],stddev:f.stdvValues[c]});var c=Math.ceil((f.extent.xmax-f.extent.xmin)/f.pixelSizeX-.1),h=Math.ceil((f.extent.ymax-f.extent.ymin)/f.pixelSizeY-.1),k=r.SpatialReference.fromJSON(f.spatialReference||f.extent.spatialReference);return new B({width:c,
height:h,bandCount:f.bandCount,extent:r.Extent.fromJSON(f.extent),spatialReference:k,pixelSize:new r.Point({x:f.pixelSizeX,y:f.pixelSizeY,spatialReference:k}),pixelType:f.pixelType.toLowerCase(),statistics:b,attributeTable:a[0]||null,colormap:a[1]||null,histograms:a[2]||null,keyProperties:a[3]||{},multidimensionalInfo:a[4]||null})})};c.prototype._requestArrayBuffer=function(a){var f=this,c=a.imageProps,h=a.signal;if(a.requestAsImageElement&&!this.pixelFilter&&c.format&&-1<c.format.indexOf("png"))return n(this.parsedUrl.path+
"/exportImage",{responseType:"image",query:this._getQueryParams(e.__assign({f:"image"},a.imageServiceParameters)),signal:h}).then(function(a){return{imageElement:a.data,params:c}});var k=this._initJobHandler();a=n(this.parsedUrl.path+"/exportImage",{responseType:"array-buffer",query:this._getQueryParams(e.__assign({f:"image"},a.imageServiceParameters)),signal:h});return b.all([a,k]).then(function(a){a=a[0].data;var b=c.format||"jpgpng",k=b;"bsq"!==k&&"bip"!==k&&(k=G.getFormat(a));if(!k)throw new l("imagery-layer:fetch-image",
"unsupported format signature "+String.fromCharCode.apply(null,new Uint8Array(a)));var k="gif"===b||"bmp"===b||-1<b.indexOf("png")&&("png"===k||"jpg"===k),t={signal:h};return k?G.decode(a,e.__assign({useCanvas:!0},c),t).then(function(a){return{pixelData:{pixelBlock:a,extent:c.extent},params:c}}):f._decodePixelBlock(a,{width:c.width,height:c.height,planes:null,pixelType:null,noDataValue:null,format:b},t).then(function(a){return{pixelData:{pixelBlock:a,extent:c.extent},params:c}})})};c.prototype._generateRasterInfo=
function(a,b){return e.__awaiter(this,void 0,void 0,function(){var f,c;return e.__generator(this,function(h){switch(h.label){case 0:return[4,n(this.parsedUrl.path,e.__assign({query:this._getQueryParams({renderingRule:a})},b))];case 1:return f=h.sent().data,[4,this._fetchAuxiliaryRasterInfo(e.__assign({serviceInfo:f,renderingRule:a},b))];case 2:return c=h.sent(),[2,c]}})})};c.prototype._isValidCustomizedMosaicRule=function(a){return a&&JSON.stringify(a.toJSON())!==JSON.stringify(this._defaultServiceMosaicRule&&
this._defaultServiceMosaicRule.toJSON())};c.prototype._updateMultidimensionalDefinition=function(a){if(!this._isValidCustomizedMosaicRule(this.mosaicRule)){var b=a.variables[0].dimensions;a=[];for(var f in b)if(b.hasOwnProperty(f)){var c=b[f],h=c.extent,k=!0,d=[h[0]];c.hasRanges&&!0===c.hasRanges?(k=!1,d=[c.values[0]]):"stdz"===c.name.toLowerCase()&&Math.abs(h[1])<=Math.abs(h[0])&&(d=[h[1]]);a.push(new u({variableName:"",dimensionName:b[f].name,isSlice:k,values:d}))}0<a.length&&(this.mosaicRule=this.mosaicRule||
new t,f=this.mosaicRule.multidimensionalDefinition,!f||f&&0>=f.length)&&(this.mosaicRule.multidimensionalDefinition=a)}};c.prototype._formatAttributeValue=function(a,b){if("string"===typeof a&&(b=(b=this._getFieldInfo(this.popupTemplate&&this.popupTemplate.fieldInfos,b))&&b.format)){var f=void 0,c=void 0;return-1<a.trim().indexOf(",")?(f=",",this._formatDelimitedString(a,f,f+" ",b)):-1<a.trim().indexOf(" ")?(f=c=" ",this._formatDelimitedString(a,f,c,b)):this._formatNumberFromString(a,b)}return a};
c.prototype._getFieldInfo=function(a,b){if(a&&a.length&&b){var f=b.toLowerCase(),c=void 0;a.some(function(a){return!a.fieldName||a.fieldName.toLowerCase()!==f&&a.fieldName.toLowerCase()!==f.replace(/ /g,"_")?!1:(c=a,!0)});return c}};c.prototype._formatDelimitedString=function(a,b,f,c){var h=this;return a&&b&&f&&c?a.trim().split(b).map(function(a){return h._formatNumberFromString(a,c)}).join(f):a};c.prototype._formatNumberFromString=function(a,b){if(!a||!b)return a;var f=Number(a);return isNaN(f)?
a:b.format(f)};c.prototype._processVisibleRastersResponse=function(b,f){f=f||{};var c=b.value,h=f.templateRRFunctionNames,k=f.showNoDataRecords,t=f.returnDomainValues,g=f.templateFields;f=b.processedValues;var u=b.catalogItems&&b.catalogItems.features,l=b.properties&&b.properties.Values&&b.properties.Values.map(function(a){return a.replace(/ /gi,", ")})||[],p=this.objectIdField||"ObjectId";b="string"===typeof c&&-1<c.toLowerCase().indexOf("nodata");var D=[];!c||u||b||(u={},u[p]=0,u=new d(this.fullExtent,
null,u),l=[c],u=[u]);if(!u)return[];this._updateResponseFieldNames(u,g);for(var w,v,p=0;p<u.length;p++){g=u[p];if(null!=c&&!b){w=l[p];v=this.renderingRule&&f&&0<f.length&&h&&0<h.length&&-1<h.indexOf(this.renderingRule.functionName)?f[h.indexOf(this.renderingRule.functionName)]:c;if("nodata"===w.toLowerCase()&&!k)continue;g.attributes["Raster.ItemPixelValue"]=this._formatAttributeValue(w,"Raster.ItemPixelValue");g.attributes["Raster.ServicePixelValue"]=this._formatAttributeValue(v,"Raster.ServicePixelValue");
this._updateFeatureWithMagDirValues(g,w);var n=this.fields&&0<this.fields.length;v=this.renderingRule&&a.isSome(this.serviceRasterInfo)&&this.serviceRasterInfo.attributeTable?n?w:c:v;this.renderingRule||(v=n?w:c);this._updateFeatureWithRasterAttributeTableValues(g,v)}g.sourceLayer=this;t&&this._updateFeatureWithDomainValues(g);if(h&&f&&h.length===f.length)for(w=0;w<h.length;w++)n="Raster.ServicePixelValue."+h[w],g.attributes[n]=this._formatAttributeValue(f[w],n);D.push(u[p])}return D};c.prototype._updateFeatureWithRasterAttributeTableValues=
function(b,f){var c=this,h=this.rasterInfo&&this.rasterInfo.attributeTable||a.isSome(this.serviceRasterInfo)&&this.serviceRasterInfo.attributeTable,k=h&&h.features;if(k){var h=h.fields,t=h.map(function(a){return a.name}).filter(function(a){return"value"===a.toLowerCase()}),d=t&&t[0];if(d){var g=k.filter(function(a){return a.attributes[d]===(null!=f?parseInt(f,10):null)});g&&g[0]&&h.forEach(function(a){var f=c.rasterAttributeTableFieldPrefix+a.name;b.attributes[f]=c._formatAttributeValue(g[0].attributes[a.name],
f)})}}};c.prototype._updateFeatureWithMagDirValues=function(a,b){if(this.pixelFilter&&("esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType)){var f=b.replace(" ",",").split(",").map(function(a){return parseFloat(a)});b=f.map(function(a){return[a]});f=f.map(function(a){return{minValue:a,maxValue:a,noDataValue:null}});b=new E({height:1,width:1,pixelType:"f32",pixels:b,statistics:f});this.pixelFilter({pixelBlock:b,extent:new r.Extent(0,
0,0,0,this.spatialReference)});a.attributes["Raster.Magnitude"]=b.pixels[0][0];a.attributes["Raster.Direction"]=b.pixels[1][0]}};c.prototype._updateFeatureWithDomainValues=function(a){var b=this.fields&&this.fields.filter(function(a){return a.domain&&"coded-value"===a.domain.type});null!=b&&b.forEach(function(b){var f=a.attributes[b.name];if(null!=f){var c=b.domain.codedValues.filter(function(a){return a.code===f})[0];c&&(a.attributes[b.name]=c.name)}})};c.prototype._updateResponseFieldNames=function(a,
b){if(b&&!(1>b.length)){var f=this.fieldsIndex;f&&a.forEach(function(a){if(a&&a.attributes)for(var c=0;c<b.length;c++){var h=b[c];if(f.has(h)){var k=f.get(h).name;k!==h&&(a.attributes[h]=a.attributes[k],delete a.attributes[k])}}})}};c.prototype._updateRenderingRulesFunctionName=function(a,b){if(a&&!(1>a.length)){if("Raw"===a)return a.replace("Raw","None");var f=a.toLowerCase().replace(/ /gi,"_");return b.has(f)?b.get(f):a}};c.prototype._isRFTJson=function(a){return a.name&&a.arguments&&a.function&&
a.hasOwnProperty("functionType")};c.prototype._readCapabilities=function(a){var b=a.capabilities?a.capabilities.toLowerCase().split(",").map(function(a){return a.trim()}):["image","catalog"],f=a.currentVersion,c=a.advancedQueryCapabilities,h=a.maxRecordCount,k=-1<b.indexOf("image"),t="esriImageServiceDataTypeElevation"===a.serviceDataType,g=!!(a.spatialReference||a.extent&&a.extent.spatialReference);return{operations:{supportsComputeHistograms:k,supportsExportImage:k,supportsIdentify:k,supportsMeasure:-1<
b.indexOf("mensuration")&&g,supportsDownload:-1<b.indexOf("download"),supportsQuery:-1<b.indexOf("catalog")&&a.fields&&0<a.fields.length,supportsGetSamples:10.2<=f&&k,supportsProject:10.3<=f&&k,supportsComputeStatisticsHistograms:10.4<=f&&k,supportsQueryBoundary:10.6<=f&&k,supportsCalculateVolume:10.7<=f&&t,supportsComputePixelLocation:10.7<=f&&-1<b.indexOf("catalog")},query:{supportsStatistics:!(!c||!c.supportsStatistics),supportsOrderBy:!(!c||!c.supportsOrderBy),supportsDistinct:!(!c||!c.supportsDistinct),
supportsPagination:!(!c||!c.supportsPagination),supportsStandardizedQueriesOnly:!(!c||!c.useStandardizedQueries),maxRecordCount:h}}};e.__decorate([f.property()],c.prototype,"_functionRasterInfos",void 0);e.__decorate([f.property()],c.prototype,"_rasterJobHandler",void 0);e.__decorate([f.property()],c.prototype,"_symbolizer",void 0);e.__decorate([f.property()],c.prototype,"_defaultServiceMosaicRule",void 0);e.__decorate([f.reader("_defaultServiceMosaicRule",["defaultMosaicMethod"])],c.prototype,"readDefaultServiceMosaicRule",
null);e.__decorate([f.property()],c.prototype,"_cachedRendererJson",void 0);e.__decorate([f.property()],c.prototype,"rasterAttributeTableFieldPrefix",void 0);e.__decorate([f.property({readOnly:!0,dependsOn:["rasterFunctionInfos"]})],c.prototype,"rasterFunctionNamesIndex",null);e.__decorate([f.property({readOnly:!0,dependsOn:["url"]})],c.prototype,"queryTask",null);e.__decorate([f.property()],c.prototype,"adjustAspectRatio",void 0);e.__decorate([f.property({readOnly:!0}),f.aliasOf("serviceRasterInfo.bandCount")],
c.prototype,"bandCount",void 0);e.__decorate([f.property({type:[D.Integer],json:{write:!0}})],c.prototype,"bandIds",void 0);e.__decorate([f.reader("bandIds")],c.prototype,"readBandIds",null);e.__decorate([f.property({readOnly:!0,json:{read:!1}})],c.prototype,"capabilities",void 0);e.__decorate([f.reader("service","capabilities",["capabilities","currentVersion","serviceDataType"])],c.prototype,"readCapabilities",null);e.__decorate([f.property({type:Number})],c.prototype,"compressionQuality",void 0);
e.__decorate([f.writer("compressionQuality")],c.prototype,"writeCompressionQuality",null);e.__decorate([f.property({type:Number})],c.prototype,"compressionTolerance",void 0);e.__decorate([f.writer("compressionTolerance")],c.prototype,"writeCompressionTolerance",null);e.__decorate([f.property({json:{read:{source:"copyrightText"}}})],c.prototype,"copyright",void 0);e.__decorate([f.property({type:String,json:{read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],
c.prototype,"definitionExpression",void 0);e.__decorate([f.property({readOnly:!0,constructOnly:!0})],c.prototype,"exportImageServiceParameters",void 0);e.__decorate([f.property()],c.prototype,"rasterInfo",void 0);e.__decorate([f.property({readOnly:!0,type:[y]})],c.prototype,"fields",void 0);e.__decorate([f.property({readOnly:!0,dependsOn:["fields"]})],c.prototype,"fieldsIndex",null);e.__decorate([f.property({type:"png png8 png24 png32 jpg bmp gif jpgpng lerc tiff".split(" "),json:{write:!0}})],c.prototype,
"format",null);e.__decorate([f.reader("service","format",["serviceDataType"])],c.prototype,"readFormat",null);e.__decorate([f.property({type:r.Extent})],c.prototype,"fullExtent",void 0);e.__decorate([f.property({readOnly:!0})],c.prototype,"hasMultidimensions",void 0);e.__decorate([f.property({json:{read:{source:"maxImageHeight"}}})],c.prototype,"imageMaxHeight",void 0);e.__decorate([f.property({json:{read:{source:"maxImageWidth"}}})],c.prototype,"imageMaxWidth",void 0);e.__decorate([f.property({type:String,
json:{type:T.jsonValues,read:T.read,write:T.write}})],c.prototype,"interpolation",void 0);e.__decorate([f.property()],c.prototype,"minScale",void 0);e.__decorate([f.reader("service","minScale")],c.prototype,"readMinScale",null);e.__decorate([f.property()],c.prototype,"maxScale",void 0);e.__decorate([f.reader("service","maxScale")],c.prototype,"readMaxScale",null);e.__decorate([f.property({type:t})],c.prototype,"mosaicRule",null);e.__decorate([f.reader("mosaicRule",["mosaicRule","defaultMosaicMethod"])],
c.prototype,"readMosaicRule",null);e.__decorate([f.writer("mosaicRule")],c.prototype,"writeMosaicRule",null);e.__decorate([f.property({readOnly:!0}),f.aliasOf("serviceRasterInfo.multidimensionalInfo")],c.prototype,"multidimensionalInfo",void 0);e.__decorate([f.property({json:{type:D.Integer}})],c.prototype,"noData",void 0);e.__decorate([f.writer("noData")],c.prototype,"writeNoData",null);e.__decorate([f.property({type:String,json:{type:Q.jsonValues,read:Q.read,write:Q.write}})],c.prototype,"noDataInterpretation",
void 0);e.__decorate([f.property({type:String,readOnly:!0,json:{read:{source:["fields"]}}})],c.prototype,"objectIdField",void 0);e.__decorate([f.reader("objectIdField")],c.prototype,"readObjectIdField",null);e.__decorate([f.property({readOnly:!0,dependsOn:["url"]})],c.prototype,"parsedUrl",null);e.__decorate([f.property({readOnly:!0}),f.aliasOf("serviceRasterInfo.pixelSize.x")],c.prototype,"pixelSizeX",void 0);e.__decorate([f.property({readOnly:!0}),f.aliasOf("serviceRasterInfo.pixelSize.y")],c.prototype,
"pixelSizeY",void 0);e.__decorate([f.property({type:Function})],c.prototype,"pixelFilter",void 0);e.__decorate([f.property()],c.prototype,"raster",void 0);e.__decorate([f.property()],c.prototype,"viewId",void 0);e.__decorate([f.property({types:q.rasterRendererTypes,json:{read:{source:"layerDefinition.drawingInfo.renderer"},write:{target:"layerDefinition.drawingInfo.renderer"}}})],c.prototype,"renderer",void 0);e.__decorate([f.reader("renderer")],c.prototype,"readRenderer",null);e.__decorate([f.property(v.opacityDrawingInfo)],
c.prototype,"opacity",void 0);e.__decorate([f.property({readOnly:!0}),f.aliasOf("serviceRasterInfo.attributeTable")],c.prototype,"rasterAttributeTable",void 0);e.__decorate([f.property({readOnly:!0,dependsOn:["fields","rasterInfo","capabilities"]})],c.prototype,"rasterFields",null);e.__decorate([f.property({readOnly:!0})],c.prototype,"rasterFunctionInfos",void 0);e.__decorate([f.property({type:z})],c.prototype,"renderingRule",null);e.__decorate([f.reader("renderingRule",["renderingRule","rasterFunctionInfos"])],
c.prototype,"readRenderingRule",null);e.__decorate([f.writer("renderingRule")],c.prototype,"writeRenderingRule",null);e.__decorate([f.property()],c.prototype,"serviceDataType",void 0);e.__decorate([f.property({readOnly:!0,type:r.SpatialReference})],c.prototype,"spatialReference",void 0);e.__decorate([f.reader("spatialReference",["spatialReference","extent"])],c.prototype,"readSpatialReference",null);e.__decorate([f.property({json:{type:N.jsonValues}})],c.prototype,"pixelType",void 0);e.__decorate([f.reader("pixelType")],
c.prototype,"readPixelType",null);e.__decorate([f.writer("pixelType")],c.prototype,"writePixelType",null);e.__decorate([f.property({constructOnly:!0,type:B})],c.prototype,"serviceRasterInfo",void 0);e.__decorate([f.property()],c.prototype,"sourceJSON",void 0);e.__decorate([f.property(v.url)],c.prototype,"url",void 0);e.__decorate([f.property({readOnly:!0})],c.prototype,"version",void 0);e.__decorate([f.reader("version",["currentVersion","fields","timeInfo"])],c.prototype,"readVersion",null);return c=
e.__decorate([f.subclass("esri.layers.mixins.ArcGISImageService")],c)}(h)}})},"esri/rasterRenderers":function(){define("require exports ./core/Warning ./renderers/ClassBreaksRenderer ./renderers/RasterColormapRenderer ./renderers/RasterShadedReliefRenderer ./renderers/RasterStretchRenderer ./renderers/UniqueValueRenderer ./renderers/VectorFieldRenderer".split(" "),function(A,m,e,r,d,q,n,l,g){function p(a,b){if(!a)return null;var h;h=a?c[a.type]||null:null;if(h)return h=new h,h.read(a,b),h;b&&b.messages&&
a&&b.messages.push(new e("renderer:unsupported","Renderers of type '"+(a.type||"unknown")+"' are not supported",{definition:a,context:b}));return null}Object.defineProperty(m,"__esModule",{value:!0});m.fromJSON=m.read=m.rasterRendererTypes=m.VectorFieldRenderer=m.RasterShadedReliefRenderer=m.UniqueValueRenderer=m.RasterStretchRenderer=m.RasterColormapRenderer=m.ClassBreaksRenderer=void 0;m.ClassBreaksRenderer=r;m.RasterColormapRenderer=d;m.RasterShadedReliefRenderer=q;m.RasterStretchRenderer=n;m.UniqueValueRenderer=
l;m.VectorFieldRenderer=g;m.rasterRendererTypes={key:"type",base:null,typeMap:{"unique-value":l,"class-breaks":r,"raster-colormap":d,"raster-stretch":n,"vector-field":g,"raster-shaded-relief":q}};var c={uniqueValue:l,classBreaks:r,rasterStretch:n,rasterColormap:d,vectorField:g,rasterShadedRelief:q};m.read=p;m.fromJSON=function(a,b){return p(a,b)}})},"esri/renderers/RasterColormapRenderer":function(){define("require exports tslib ../core/JSONSupport ../core/accessorSupport/decorators ./support/ColormapInfo ./support/colorRampUtils".split(" "),
function(A,m,e,r,d,q,n){return function(l){function g(c){c=l.call(this,c)||this;c.colormapInfos=null;c.type="raster-colormap";return c}e.__extends(g,l);p=g;g.createFromColormap=function(c,a){function b(b){return a?a[b]||"":String(b[0])}if(!c)return null;var h=5===c[0].length;c=c.sort(function(a){return a[0][0]-a[1][0]});h=h?c.map(function(a){return q.fromJSON({value:a[0],color:a.slice(1,5),label:b(a[0])})}):c.map(function(a){return q.fromJSON({value:a[0],color:a.slice(1,4).concat([255]),label:b(a[0])})});
return new p({colormapInfos:h})};g.createFromColorramp=function(c){c=n.convertColorRampToColormap(c,256);return p.createFromColormap(c)};g.prototype.clone=function(){return new p({colormapInfos:this.colormapInfos.map(function(c){return c.toJSON()})})};g.prototype.extractColormap=function(){return this.colormapInfos.map(function(c){return[c.value,c.color.r,c.color.g,c.color.b,1<c.color.a?c.color.a:255*c.color.a&255]}).sort(function(c,a){return c[0]-a[0]})};var p;e.__decorate([d.property({type:[q],
json:{write:!0}})],g.prototype,"colormapInfos",void 0);e.__decorate([d.enumeration({rasterColormap:"raster-colormap"})],g.prototype,"type",void 0);return g=p=e.__decorate([d.subclass("esri.renderers.RasterColormapRenderer")],g)}(r.JSONSupport)})},"esri/renderers/support/ColormapInfo":function(){define("require exports tslib ../../Color ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),function(A,m,e,r,d,q,n){return function(d){function g(){var g=
null!==d&&d.apply(this,arguments)||this;g.value=null;g.label=null;g.color=null;return g}e.__extends(g,d);e.__decorate([q.property({type:Number,json:{write:!0}})],g.prototype,"value",void 0);e.__decorate([q.property({type:String,json:{write:!0}})],g.prototype,"label",void 0);e.__decorate([q.property({type:r,json:{type:[n.Integer],write:!0}})],g.prototype,"color",void 0);return g=e.__decorate([q.subclass("esri.renderers.support.ColormapInfo")],g)}(d.JSONSupport)})},"esri/renderers/support/colorRampUtils":function(){define(["require",
"exports","../../Color","../../core/colorUtils"],function(A,m,e,r){function d(d,l){if(!d||!l||d.length!==l.length)return!1;for(var g=0;g<d.length;g++)if(d[g]>l[g]+2||d[g]<l[g]-2)return!1;return!0}function q(n,l){if(n){l=l?l:m.PREDEFINED_JSON_COLOR_RAMPS;var g=null,p;"algorithmic"===n.type?l.some(function(c){if(d(n.fromColor.toRgb(),c.fromColor)&&d(n.toColor.toRgb(),c.toColor))return g=c.id,!0}):"multipart"===n.type&&l.some(function(c){if(n.colorRamps&&c.colorRamps&&n.colorRamps.length===c.colorRamps.length&&
(p=n.colorRamps,!c.colorRamps.some(function(a,b){if(!d(p[b].fromColor.toRgb(),(new e(a.fromColor)).toRgb())||!d(p[b].toColor.toRgb(),(new e(a.toColor)).toRgb()))return!0}))){if(g)return!0;g=c.id}});return g}}Object.defineProperty(m,"__esModule",{value:!0});m.convertColorRampToColormap=m.getColorRampName=m.getColorRampId=m.PREDEFINED_COLOR_RAMP_NAME_MAP=m.PREDEFINED_JSON_COLOR_RAMPS=void 0;m.PREDEFINED_JSON_COLOR_RAMPS=[{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],
toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,
0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",
type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,
0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,
179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,
96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,
16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",
type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",
type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,
0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",
type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,
0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,
245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,
0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,
153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,
0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,
255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}];m.PREDEFINED_COLOR_RAMP_NAME_MAP={aspect_predefined:"Aspect",blackToWhite_predefined:"Black to White",blueBright_predefined:"Blue Bright",blueLightToDark_predefined:"Blue Light to Dark",
blueGreenBright_predefined:"Blue-Green Bright",blueGreenLightToDark_predefined:"Blue-Green Light to Dark",brownLightToDark_predefined:"Brown Light to Dark",brownToBlueGreenDivergingBright_predefined:"Brown to Blue Green Diverging, Bright",brownToBlueGreenDivergingDark_predefined:"Brown to Blue Green Diverging, Dark",coefficientBias_predefined:"Coefficient Bias",coldToHotDiverging_predefined:"Cold to Hot Diverging",conditionNumber_predefined:"Condition Number",cyanToPurple_predefined:"Cyan to Purple",
cyanLightToBlueDark_predefined:"Cyan-Light to Blue-Dark",distance_predefined:"Distance",elevation1_predefined:"Elevation #1",elevation2_predefined:"Elevation #2",errors_predefined:"Errors",grayLightToDark_predefined:"Gray Light to Dark",greenBright_predefined:"Green Bright",greenLightToDark_predefined:"Green Light to Dark",greenToBlue_predefined:"Green to Blue",orangeBright_predefined:"Orange Bright",orangeLightToDark_predefined:"Orange Light to Dark",partialSpectrum_predefined:"Partial Spectrum",
partialSpectrum1Diverging_predefined:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging_predefined:"Partial Spectrum 2 Diverging",pinkToYellowGreenDivergingBright_predefined:"Pink to YellowGreen Diverging, Bright",pinkToYellowGreenDivergingDark_predefined:"Pink to YellowGreen Diverging, Dark",precipitation_predefined:"Precipitation",prediction_predefined:"Prediction",purpleBright_predefined:"Purple Bright",purpleToGreenDivergingBright_predefined:"Purple to Green Diverging, Bright",purpleToGreenDivergingDark_predefined:"Purple to Green Diverging, Dark",
purpleBlueBright_predefined:"Purple-Blue Bright",purpleBlueLightToDark_predefined:"Purple-Blue Light to Dark",purpleRedBright_predefined:"Purple-Red Bright",purpleRedLightToDark_predefined:"Purple-Red Light to Dark",redBright_predefined:"Red Bright",redLightToDark_predefined:"Red Light to Dark",redToBlueDivergingBright_predefined:"Red to Blue Diverging, Bright",redToBlueDivergingDark_predefined:"Red to Blue Diverging, Dark",redToGreen_predefined:"Red to Green",redToGreenDivergingBright_predefined:"Red to Green Diverging, Bright",
redToGreenDivergingDark_predefined:"Red to Green Diverging, Dark",slope_predefined:"Slope",spectrumFullBright_predefined:"Spectrum-Full Bright",spectrumFullDark_predefined:"Spectrum-Full Dark",spectrumFullLight_predefined:"Spectrum-Full Light",surface_predefined:"Surface",temperature_predefined:"Temperature",whiteToBlack_predefined:"White to Black",yellowToDarkRed_predefined:"Yellow to Dark Red",yellowToGreenToDarkBlue_predefined:"Yellow to Green to Dark Blue",yellowToRed_predefined:"Yellow to Red",
yellowGreenBright_predefined:"Yellow-Green Bright",yellowGreenLightToDark_predefined:"Yellow-Green Light to Dark"};m.getColorRampId=q;m.getColorRampName=function(d){return(d=q(d))?m.PREDEFINED_COLOR_RAMP_NAME_MAP[d]:null};m.convertColorRampToColormap=function(d,l,g){void 0===g&&(g=!1);if(d&&l&&!(2>l)){for(var p="multipart"===d.type?d.colorRamps.length:1,c=[],a=[],b,h,k,f,D,n=0,v=0;v<p;v++)c[v]={start:null,end:null},c[v].start=n,c[v].end=n+1/p,n=c[v].end;n=function(u){f=u/(l-1);c.forEach(function(c,
v){if(f>=c.start&&(f<c.end||u===l-1&&v===p-1)){D=(f-c.start)/(c.end-c.start);"multipart"===d.type?(b=new e(d.colorRamps[v].fromColor),h=new e(d.colorRamps[v].toColor)):(b=new e(d.fromColor),h=new e(d.toColor));if(0===u)a.push([u,b.r,b.g,b.b]);else if(u===l-1)a.push([u,h.r,h.g,h.b]);else{var w=h;c=D;v=r.toLAB(b);w=r.toLAB(w);k=r.toRGB({l:v.l*(1-c)+c*w.l,a:v.a*(1-c)+c*w.a,b:v.b*(1-c)+c*w.b});a.push([u,k.r,k.g,k.b])}g&&a[u].push(Math.min(255,Math.round(255*(b.a*(1-D)+h.a*D))))}})};for(v=0;v<l;v++)n(v);
return a}}})},"esri/core/colorUtils":function(){define(["require","exports"],function(A,m){function e(c,a){var b=[],h,k;if(c[0].length!==a.length)throw"dimensions do not match";var f=c.length,d=c[0].length,g=0;for(h=0;h<f;h++){for(k=g=0;k<d;k++)g+=c[h][k]*a[k];b.push(g)}return b}function r(c){c=[c.r/255,c.g/255,c.b/255].map(function(a){return.04045>=a?a/12.92:Math.pow((a+.055)/1.055,2.4)});c=e(g,c);return{x:100*c[0],y:100*c[1],z:100*c[2]}}function d(c){c=e(p,[c.x/100,c.y/100,c.z/100]).map(function(a){return Math.min(1,
Math.max(.0031308>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055,0))});return{r:Math.round(255*c[0]),g:Math.round(255*c[1]),b:Math.round(255*c[2])}}function q(c){c=[c.x/95.047,c.y/100,c.z/108.883].map(function(a){return a>Math.pow(6/29,3)?Math.pow(a,1/3):1/3*Math.pow(29/6,2)*a+4/29});return{l:116*c[1]-16,a:500*(c[0]-c[1]),b:200*(c[1]-c[2])}}function n(c){var a=c.l;c=[(a+16)/116+c.a/500,(a+16)/116,(a+16)/116-c.b/200].map(function(a){return a>6/29?Math.pow(a,3):3*Math.pow(6/29,2)*(a-4/29)});return{x:95.047*
c[0],y:100*c[1],z:108.883*c[2]}}function l(c){if("r"in c&&"g"in c&&"b"in c)return c;if("l"in c&&"c"in c&&"h"in c){var a=c.c,b=c.h;return d(n({l:c.l,a:a*Math.cos(b),b:a*Math.sin(b)}))}if("l"in c&&"a"in c&&"b"in c)return d(n(c));if("x"in c&&"y"in c&&"z"in c)return d(c);if("h"in c&&"s"in c&&"v"in c){b=(c.h+360)%360/60;a=c.v/100*255;c=c.s/100*a;var h=c*(1-Math.abs(b%2-1));switch(Math.floor(b)){case 0:b={r:c,g:h,b:0};break;case 1:b={r:h,g:c,b:0};break;case 2:b={r:0,g:c,b:h};break;case 3:b={r:0,g:h,b:c};
break;case 4:b={r:h,g:0,b:c};break;case 5:case 6:b={r:c,g:0,b:h};break;default:b={r:0,g:0,b:0}}b.r=Math.round(b.r+a-c);b.g=Math.round(b.g+a-c);b.b=Math.round(b.b+a-c);return b}return c}Object.defineProperty(m,"__esModule",{value:!0});m.darken=m.toXYZ=m.toLCH=m.toLAB=m.toHSV=m.toRGB=void 0;var g=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],p=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];m.toRGB=l;m.toHSV=function(c){if("h"in c&&"s"in c&&"v"in c)return c;var a=
l(c);c=a.r;var b=a.g,h=a.b,a=Math.max(c,b,h),k=a-Math.min(c,b,h);c=0===k?0:a===c?(b-h)/k%6:a===b?(h-c)/k+2:(c-b)/k+4;0>c&&(c+=6);return{h:60*c,s:100*(0===k?0:k/a),v:100/255*a}};m.toLAB=function(c){return"l"in c&&"a"in c&&"b"in c?c:q(r(l(c)))};m.toLCH=function(c){if(!("l"in c&&"c"in c&&"h"in c)){var a=q(r(l(c)));c=a.l;var b=a.a,h=a.b,a=Math.sqrt(b*b+h*h),b=Math.atan2(h,b),b=0<b?b:b+2*Math.PI;c={l:c,c:a,h:b}}return c};m.toXYZ=function(c){return"x"in c&&"y"in c&&"z"in c?c:r(l(c))};m.darken=function(c,
a){c=q(r(c));c.l*=1-a;return d(n(c))}})},"esri/renderers/RasterShadedReliefRenderer":function(){define("require exports tslib ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators ../tasks/support/colorRamps".split(" "),function(A,m,e,r,d,q,n){return function(l){function g(c){c=l.call(this,c)||this;c.altitude=45;c.azimuth=315;c.colorRamp=null;c.hillshadeType="multi-directional";c.pixelSizePower=.664;c.pixelSizeFactor=.024;c.scalingType="none";c.type="raster-shaded-relief";c.zFactor=
1;return c}e.__extends(g,l);p=g;g.prototype.readColorRamp=function(c){return n.fromJSON(c)};g.prototype.clone=function(){return new p({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,scalingType:this.scalingType,pixelSizeFactor:this.pixelSizeFactor,pixelSizePower:this.pixelSizePower,colorRamp:d.clone(this.colorRamp)})};var p;e.__decorate([q.property({type:Number,json:{write:!0}})],g.prototype,"altitude",void 0);e.__decorate([q.property({type:Number,
json:{write:!0}})],g.prototype,"azimuth",void 0);e.__decorate([q.property({types:n.types,json:{write:!0}})],g.prototype,"colorRamp",void 0);e.__decorate([q.reader("colorRamp")],g.prototype,"readColorRamp",null);e.__decorate([q.property({type:["traditional","multi-directional"],json:{write:!0}})],g.prototype,"hillshadeType",void 0);e.__decorate([q.property({type:Number,json:{write:!0}})],g.prototype,"pixelSizePower",void 0);e.__decorate([q.property({type:Number,json:{write:!0}})],g.prototype,"pixelSizeFactor",
void 0);e.__decorate([q.property({type:["none","adjusted"],json:{write:!0}})],g.prototype,"scalingType",void 0);e.__decorate([q.enumeration({rasterShadedRelief:"raster-shaded-relief"})],g.prototype,"type",void 0);e.__decorate([q.property({type:Number,json:{write:!0}})],g.prototype,"zFactor",void 0);return g=p=e.__decorate([q.subclass("esri.renderers.RasterShadedReliefRenderer")],g)}(r.JSONSupport)})},"esri/renderers/RasterStretchRenderer":function(){define("require exports tslib ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ./support/stretchRendererUtils ../tasks/support/colorRamps".split(" "),
function(A,m,e,r,d,q,n,l,g){return function(p){function c(a){a=p.call(this,a)||this;a.colorRamp=null;a.computeGamma=!1;a.dynamicRangeAdjustment=!1;a.gamma=[];a.maxPercent=null;a.minPercent=null;a.numberOfStandardDeviations=null;a.outputMax=null;a.outputMin=null;a.sigmoidStrengthLevel=null;a.statistics=[];a.histograms=null;a.useGamma=!1;a.stretchType="none";a.type="raster-stretch";return a}e.__extends(c,p);a=c;c.prototype.readColorRamp=function(a){if(a)return g.fromJSON(a)};c.prototype.writeStatistics=
function(a,c,k){null!==a&&void 0!==a&&a.length&&(Array.isArray(a[0])||(a=a.map(function(a){return[a.min,a.max,a.avg,a.stddev]})),c[k]=a)};c.prototype.readStretchType=function(a,c){a=c.stretchType;"number"===typeof a&&(a=l.stretchTypeFunctionEnum[a]);return l.stretchTypeJSONDict.read(a)};c.prototype.clone=function(){return new a({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:d.clone(this.statistics),gamma:d.clone(this.gamma),
sigmoidStrengthLevel:this.sigmoidStrengthLevel,numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:d.clone(this.colorRamp),histograms:d.clone(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})};var a;e.__decorate([q.property({types:g.types,json:{write:!0}})],c.prototype,"colorRamp",void 0);e.__decorate([q.reader("colorRamp")],c.prototype,"readColorRamp",null);e.__decorate([q.property({type:Boolean,json:{write:!0}})],
c.prototype,"computeGamma",void 0);e.__decorate([q.property({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],c.prototype,"dynamicRangeAdjustment",void 0);e.__decorate([q.property({type:[Number],json:{write:!0}})],c.prototype,"gamma",void 0);e.__decorate([q.property({type:Number,json:{write:!0}})],c.prototype,"maxPercent",void 0);e.__decorate([q.property({type:Number,json:{write:!0}})],c.prototype,"minPercent",void 0);e.__decorate([q.property({type:n.Integer,json:{write:!0}})],c.prototype,
"numberOfStandardDeviations",void 0);e.__decorate([q.property({type:Number,json:{read:{source:"max"},write:{target:"max"}}})],c.prototype,"outputMax",void 0);e.__decorate([q.property({type:Number,json:{read:{source:"min"},write:{target:"min"}}})],c.prototype,"outputMin",void 0);e.__decorate([q.property({type:Number,json:{write:!0}})],c.prototype,"sigmoidStrengthLevel",void 0);e.__decorate([q.property({json:{type:[[Number]],write:!0}})],c.prototype,"statistics",void 0);e.__decorate([q.property()],
c.prototype,"histograms",void 0);e.__decorate([q.writer("statistics")],c.prototype,"writeStatistics",null);e.__decorate([q.property({type:Boolean,json:{write:!0}})],c.prototype,"useGamma",void 0);e.__decorate([q.property({type:l.stretchTypeJSONDict.apiValues,json:{type:l.stretchTypeJSONDict.jsonValues,write:l.stretchTypeJSONDict.write}})],c.prototype,"stretchType",void 0);e.__decorate([q.reader("stretchType",["stretchType"])],c.prototype,"readStretchType",null);e.__decorate([q.enumeration({rasterStretch:"raster-stretch"})],
c.prototype,"type",void 0);return c=a=e.__decorate([q.subclass("esri.renderers.RasterStretchRenderer")],c)}(r.JSONSupport)})},"esri/renderers/support/stretchRendererUtils":function(){define(["require","exports","../../core/jsonMap"],function(A,m,e){Object.defineProperty(m,"__esModule",{value:!0});m.stretchTypeFunctionEnum=m.stretchTypeJSONDict=void 0;m.stretchTypeJSONDict=new e.default({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",
percentClip:"percent-clip",sigmoid:"sigmoid"});m.stretchTypeFunctionEnum={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"}})},"esri/renderers/VectorFieldRenderer":function(){define("require exports tslib ../Color ../geometry ../Graphic ../symbols ../core/jsonMap ../core/JSONSupport ../core/lang ../core/SetUtils ../core/accessorSupport/decorators ../geometry/support/normalizeUtils ../layers/support/rasterFunctions/vectorFieldUtils ./ClassBreaksRenderer ./mixins/VisualVariablesMixin ./support/ClassBreakInfo ./visualVariables/RotationVariable ./visualVariables/SizeVariable ./visualVariables/support/visualVariableUtils ../symbols/SimpleLineSymbol ../symbols/SimpleMarkerSymbol ../symbols/support/utils".split(" "),
function(A,m,e,r,d,q,n,l,g,p,c,a,b,h,k,f,D,F,v,u,w,y,C){var x=c.SetFromValues(["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"]),t=new l.default({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"}),E=new l.default({beaufort_ft:"beaufort-ft",beaufort_km:"beaufort-km",beaufort_kn:"beaufort-kn",beaufort_m:"beaufort-m",beaufort_mi:"beaufort-mi",
classified_arrow:"classified-arrow",ocean_current_kn:"ocean-current-kn",ocean_current_m:"ocean-current-m",simple_scalar:"simple-scalar",single_arrow:"single-arrow",wind_speed:"wind-speed"}),z=new l.default({flow_from:"flow-from",flow_to:"flow-to"});return function(f){function c(a){a=f.call(this,a)||this;a.attributeField="Magnitude";a.flowRepresentation="flow-from";a.rotationType="arithmetic";a.style="single-arrow";a.symbolTileSize=50;a.type="vector-field";return a}e.__extends(c,f);g=c;c.prototype.readInputUnit=
function(a,b){return x.has(a)?t.fromJSON(a):null};c.prototype.readOutputUnit=function(a,b){return x.has(a)?t.fromJSON(a):null};Object.defineProperty(c.prototype,"styleRenderer",{get:function(){var a=this.attributeField,b=this._createStyleRenderer(this.style);b.field=a;return b},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"sizeVariables",{get:function(){var a=[];if(this.visualVariables)for(var b=0,f=this.visualVariables;b<f.length;b++){var c=f[b];"size"===c.type&&a.push(c)}0===
a.length&&(c=new v({minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize}),this.visualVariables?this.visualVariables.push(c):this._set("visualVariables",[c]),a.push(c));return a},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"rotationVariables",{get:function(){var a=[];if(this.visualVariables)for(var b=0,f=this.visualVariables;b<f.length;b++){var c=f[b];"rotation"===c.type&&a.push(c)}0===a.length&&(c=new F({field:"Direction",rotationType:this.rotationType}),this.visualVariables?
this.visualVariables.push(c):this._set("visualVariables",[c]),a.push(c));return a},enumerable:!1,configurable:!0});c.prototype.clone=function(){return new g({attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,style:this.style,visualVariables:p.clone(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})};c.prototype.getGraphicsFromPixelData=function(a,f){void 0===f&&(f=!1);return e.__awaiter(this,void 0,void 0,function(){var c,
k,t,g,u,l,p,D,w,v,n,F,y,r;return e.__generator(this,function(e){switch(e.label){case 0:c=[],k=h.getUnitConversionFactor(this.inputUnit,this.outputUnit),t=f?h.convertVectorFieldData(a.pixelBlock,"vector-uv",this.rotationType,k):h.convertVectorFieldUnit(a.pixelBlock,"vector-magdir",k),g=a.extent,u=t.mask&&0<t.mask.length,l=0,D=(g.xmax-g.xmin)/t.width,w=(g.ymax-g.ymin)/t.height,v=0,e.label=1;case 1:if(!(v<t.height))return[3,6];n=0;e.label=2;case 2:if(!(n<t.width))return[3,5];p=[g.xmin+n*D+D/2,g.ymax-
v*w-w/2];if(u&&!t.mask[l]||!p||2!==p.length)return[3,4];F={Magnitude:t.pixels[0][l],Direction:t.pixels[1][l]};y=new d.Point({x:p[0],y:p[1],spatialReference:g.spatialReference});return[4,b.normalizeCentralMeridian(y)];case 3:y=e.sent()[0],r=new q({geometry:{type:"point",x:y.x,y:y.y,spatialReference:g.spatialReference},attributes:F}),r.symbol=this._getVisualVariablesAppliedSymbol(r),c.push(r),e.label=4;case 4:return n++,l++,[3,2];case 5:return v++,[3,1];case 6:return[2,c]}})})};c.prototype.getSymbol=
function(a,b){};c.prototype.getSymbolAsync=function(a,b){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(a){return[2]})})};c.prototype.getSymbols=function(){return[]};c.prototype.getClassBreakInfos=function(){var a;return null===(a=this.styleRenderer)||void 0===a?void 0:a.classBreakInfos};c.prototype.getDefaultSymbol=function(){var a;return null===(a=this.styleRenderer)||void 0===a?void 0:a.defaultSymbol};c.prototype._getDefaultSymbol=function(a){return new y({path:"M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z",
outline:new w({width:0}),size:20,color:a||new r([0,92,230])})};c.prototype._getVisualVariablesAppliedSymbol=function(a){if(a){var b=this.styleRenderer&&this.styleRenderer.getSymbol(a),b=b.clone(),f=this.sizeVariables,c=this.rotationVariables;f&&f.length&&this.sizeVariables.forEach(function(f){return C.applySizesToSymbol(b,u.getAllSizes([f],a))});c&&c.length&&(f=a.attributes.Direction,a.attributes.Direction="flow-from"===this.flowRepresentation?f:f+180,this.rotationVariables.forEach(function(f){return C.applyRotationToSymbol(b,
u.getRotationAngle(f,a),f.axis)}));return b}};c.prototype._createStyleRenderer=function(a){var b={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(a){case "single-arrow":b=this._createSingleArrowRenderer();break;case "beaufort-kn":b=this._createBeaufortKnotsRenderer();break;case "beaufort-m":b=this._createBeaufortMeterRenderer();break;case "beaufort-ft":b=this._createBeaufortFeetRenderer();break;case "beaufort-mi":b=this._createBeaufortMilesRenderer();break;case "beaufort-km":b=this._createBeaufortKilometersRenderer();
break;case "ocean-current-m":b=this._createCurrentMeterRenderer();break;case "ocean-current-kn":b=this._createCurrentKnotsRenderer();break;case "simple-scalar":b=this._createSimpleScalarRenderer();break;case "wind-speed":b=this._createWindBarbsRenderer();break;case "classified-arrow":b=this._createClassifiedArrowRenderer()}return new k(b)};c.prototype._createSingleArrowRenderer=function(){return{defaultSymbol:this._getDefaultSymbol()}};c.prototype._createBeaufortKnotsRenderer=function(){var a=this._getDefaultSymbol(new r([214,
47,39])),b=this._getClassBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]]);return{defaultSymbol:a,classBreakInfos:b}};c.prototype._createBeaufortMeterRenderer=function(){var a=this._getDefaultSymbol(new r([214,47,39])),b=this._getClassBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,
180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:a,classBreakInfos:b}};c.prototype._createBeaufortFeetRenderer=function(){var a=this._getDefaultSymbol(new r([214,47,39])),b=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],b=b.map(function(a){return 3.28084*a}),b=this._getClassBreaks(b,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,
185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:a,classBreakInfos:b}};c.prototype._createBeaufortMilesRenderer=function(){var a=this._getDefaultSymbol(new r([214,47,39])),b=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],b=b.map(function(a){return 2.23694*a}),b=this._getClassBreaks(b,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:a,
classBreakInfos:b}};c.prototype._createBeaufortKilometersRenderer=function(){var a=this._getDefaultSymbol(new r([214,47,39])),b=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],b=b.map(function(a){return 3.6*a}),b=this._getClassBreaks(b,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:a,classBreakInfos:b}};c.prototype._createCurrentMeterRenderer=function(){var a=
this._getDefaultSymbol(new r([177,177,177])),b=this._getClassBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]]);return{defaultSymbol:a,classBreakInfos:b}};c.prototype._createCurrentKnotsRenderer=function(){var a=this._getDefaultSymbol(new r([177,177,177])),b=this._getClassBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]]);return{defaultSymbol:a,classBreakInfos:b}};c.prototype._createClassifiedArrowRenderer=
function(){var a,b=this._getDefaultSymbol(new r([56,168,0])),f=[0,1E-6,3.5,7,10.5,14];if(null===(a=this.sizeVariables)||void 0===a?0:a.length){var c=this.sizeVariables[0].minDataValue;a=this.sizeVariables[0].maxDataValue;if(c&&a)var h=(a-c)/5,f=Array.from(Array(6).keys()).map(function(a){return c+h*a})}f=this._getClassBreaks(f,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]]);return{defaultSymbol:b,classBreakInfos:f}};c.prototype._createSimpleScalarRenderer=function(){return{defaultSymbol:n.PictureMarkerSymbol.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII\x3d",
height:20,width:20,type:"esriPMS",angle:0})}};c.prototype._createWindBarbsRenderer=function(){var a=Array.from(Array(31).keys()).map(function(a){return 5*a}),b=[{range:"0-5",path:"M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"5-10",path:"M25 0 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjE1IDIwIDIwIDIwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxwYXRoIGQ9Ik0yNSAwIEwyNSA0MCBNMjUgMzUgTDE3LjUgMzcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"10-15",path:"M25 0 L25 40 L10 45 L25 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"15-20",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"20-25",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"25-30",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"30-35",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"35-40",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"40-45",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"45-50",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"50-55",path:"M25 0 L25 40 L10 40 L25 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"55-60",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"60-65",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"65-70",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"70-75",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"75-80",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"80-85",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"85-90",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"90-95",
path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"95-100",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"100-105",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"105-110",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"110-115",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"115-120",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"120-125",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"125-130",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"130-135",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"135-140",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"140-145",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"145-150",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"}],f=n.PictureMarkerSymbol.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC",
height:20,width:20,type:"esriPMS",angle:0}),c=a.map(function(c,h){var k;h!==a.length-1&&(0===h?k={minValue:c,maxValue:a[h+1],symbol:f}:(k=n.PictureMarkerSymbol.fromJSON({type:"esriPMS",imageData:b[h].imageData,contentType:"image/svg+xml",height:32,width:32,angle:0}),k={minValue:c,maxValue:a[h+1],symbol:k}));return new D(k)});return{defaultSymbol:f,classBreakInfos:c}};c.prototype._getClassBreaks=function(a,b){var f=this;return b.map(function(b,c){return new D({minValue:a[c],maxValue:a[c+1],symbol:f._getDefaultSymbol(new r(b))})})};
var g;e.__decorate([a.property({type:String,json:{write:!0}})],c.prototype,"attributeField",void 0);e.__decorate([a.property({type:z.apiValues,json:{type:z.jsonValues,read:{reader:z.read},write:{writer:z.write}}})],c.prototype,"flowRepresentation",void 0);e.__decorate([a.property({type:["geographic","arithmetic"],json:{write:!0}})],c.prototype,"rotationType",void 0);e.__decorate([a.property({type:E.apiValues,json:{type:E.jsonValues,read:{reader:E.read},write:{writer:E.write}}})],c.prototype,"style",
void 0);e.__decorate([a.property({json:{write:!0}})],c.prototype,"symbolTileSize",void 0);e.__decorate([a.property({type:t.apiValues,json:{type:t.jsonValues,write:{writer:t.write}}})],c.prototype,"inputUnit",void 0);e.__decorate([a.reader("inputUnit")],c.prototype,"readInputUnit",null);e.__decorate([a.property({type:t.apiValues,json:{type:t.jsonValues,read:{reader:t.read},write:{writer:t.write}}})],c.prototype,"outputUnit",void 0);e.__decorate([a.reader("outputUnit")],c.prototype,"readOutputUnit",
null);e.__decorate([a.enumeration({vectorField:"vector-field"})],c.prototype,"type",void 0);e.__decorate([a.property({type:k,dependsOn:["style","attributeField"]})],c.prototype,"styleRenderer",null);e.__decorate([a.property({type:v,dependsOn:["visualVariables","symbolTileSize"]})],c.prototype,"sizeVariables",null);e.__decorate([a.property({type:F,dependsOn:["visualVariables","rotationType"]})],c.prototype,"rotationVariables",null);return c=g=e.__decorate([a.subclass("esri.renderers.VectorFieldRenderer")],
c)}(f.VisualVariablesMixin(g.JSONSupport))})},"esri/layers/support/rasterFunctions/vectorFieldUtils":function(){define(["require","exports","../PixelBlock"],function(A,m,e){Object.defineProperty(m,"__esModule",{value:!0});m.convertVectorFieldUnit=m.convertVectorFieldData=m.getUnitConversionFactor=m.isValidPixelBlock=void 0;var r=180/Math.PI;m.isValidPixelBlock=function(d){return d&&"esri.layers.support.PixelBlock"===d.declaredClass&&d.pixels&&0<d.pixels.length};var d=new Map;d.set("meter-per-second",
1);d.set("kilometer-per-hour",.277778);d.set("knots",.514444);d.set("feet-per-second",.3048);d.set("mile-per-hour",.44704);m.getUnitConversionFactor=function(e,n){return d.get(n)/d.get(e)||1};m.convertVectorFieldData=function(d,n,l,g){var p;void 0===l&&(l="geographic");void 0===g&&(g=1);if(!m.isValidPixelBlock(d))return d;for(var c=d.pixels,a=d.width,b=d.height,h=a*b,k=c[0],c=c[1],f=e.createEmptyBand(d.pixelType,h),h=e.createEmptyBand(d.pixelType,h),D=0,F=0;F<b;F++)for(var v=0;v<a;v++){if("vector-uv"===
n){var u=[k[D],c[D]];p=l;void 0===p&&(p="geographic");var w=u[0],y=u[1],u=Math.sqrt(w*w+y*y),w=Math.atan2(y,w)*r,w=(360+w)%360;"geographic"===p&&(w=(450-w)%360);p=[u,w];f[D]=p[0];h[D]=p[1];f[D]*=g}else w=[k[D],c[D]],u=l,void 0===u&&(u="geographic"),p=w[1],"geographic"===u&&(p=(450-p)%360),p%=360,w=w[0],p=[w*Math.cos(p/r),w*Math.sin(p/r)],f[D]=p[0],h[D]=p[1],f[D]*=g,h[D]*=g;D++}d=new e({pixelType:d.pixelType,width:d.width,height:d.height,mask:d.mask,validPixelCount:d.validPixelCount,maskIsAlpha:d.maskIsAlpha,
pixels:[f,h]});d.updateStatistics();return d};m.convertVectorFieldUnit=function(d,n,l){void 0===l&&(l=1);if(1===l||!m.isValidPixelBlock(d))return d;d=d.clone();for(var g=d.pixels,p=d.width,c=d.height,a=g[0],g=g[1],b=0,h=0;h<c;h++)for(var k=0;k<p;k++)"vector-uv"===n?(a[b]*=l,g[b]*=l):a[b]*=l,b++;d.updateStatistics();return d}})},"esri/layers/support/PixelBlock":function(){define("require exports tslib ../../core/compilerUtils ../../core/Error ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators".split(" "),
function(A,m,e,r,d,q,n,l,g,p){var c=l.getLogger("esri.layers.support.PixelBlock");return function(a){function b(b){b=a.call(this,b)||this;b.width=null;b.height=null;b.pixelType="f32";b.validPixelCount=null;b.mask=null;b.maskIsAlpha=!1;b.pixels=null;b.statistics=null;return b}e.__extends(b,a);h=b;b.createEmptyBand=function(a,b){return new (h.getPixelArrayConstructor(a))(b)};b.getPixelArrayConstructor=function(a){var b;switch(a){case "u1":case "u2":case "u4":case "u8":b=Uint8Array;break;case "u16":b=
Uint16Array;break;case "u32":b=Uint32Array;break;case "s8":b=Int8Array;break;case "s16":b=Int16Array;break;case "s32":b=Int32Array;break;case "u32":b=Uint32Array;break;case "f32":b=Float32Array;break;case "f64":b=Float64Array;break;case "c64":case "c128":case "unknown":b=Float32Array;break;default:r.neverReached(a)}return b};b.prototype.castPixelType=function(a){if(!a)return"f32";a=a.toLowerCase();-1<["u1","u2","u4"].indexOf(a)?a="u8":-1==="unknown u8 s8 u16 s16 u32 s32 f32 f64".split(" ").indexOf(a)&&
(a="f32");return a};b.prototype.getPlaneCount=function(){return this.pixels&&this.pixels.length};b.prototype.addData=function(a){if(!a.pixels||a.pixels.length!==this.width*this.height)throw new d("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]);this.statistics||(this.statistics=[]);this.pixels.push(a.pixels);this.statistics.push(a.statistics||{minValue:null,maxValue:null})};b.prototype.getAsRGBA=
function(){var a=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case "s8":case "s16":case "u16":case "s32":case "u32":case "f32":case "f64":this._fillFromNon8Bit(a);break;default:this._fillFrom8Bit(a)}return new Uint8ClampedArray(a)};b.prototype.getAsRGBAFloat=function(){var a=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(a);return a};b.prototype.updateStatistics=function(){var a=this;this.statistics=this.pixels.map(function(b){return a._calculateBandStatistics(b,
a.mask)});var b=this.mask,c=0;if(b)for(var h=0;h<b.length;h++)b[h]&&c++;else c=this.width*this.height;this.validPixelCount=c};b.prototype.clamp=function(a){if(a&&"f64"!==a&&"f32"!==a){var b;switch(a){case "u8":b=[0,255];break;case "u16":b=[0,65535];break;case "u32":b=[0,4294967295];break;case "s8":b=[-128,127];break;case "s16":b=[-32768,32767];break;case "s32":b=[-2147483648,2147483647];break;default:b=[-3.4*1E39,3.4*1E39]}var c=b[0];b=b[1];for(var k=this.pixels,d=this.width*this.height,g=k.length,
l,p,n,e=[],t=0;t<g;t++){n=h.createEmptyBand(a,d);l=k[t];for(var r=0;r<d;r++)p=l[r],n[r]=p>b?b:p<c?c:p;e.push(n)}this.pixels=e;this.pixelType=a}};b.prototype.extractBands=function(a){var b=this;if(g.isNone(a)||0===a.length||null==this.pixels||0===this.pixels.length)return this;var c=this.pixels.length,k=a.some(function(a){return a>=b.pixels.length}),c=c===a.length&&!a.some(function(a,b){return a!==b});return k||c?this:new h({pixelType:this.pixelType,width:this.width,height:this.height,mask:this.mask,
validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:a.map(function(a){return b.pixels[a]}),statistics:this.statistics&&a.map(function(a){return b.statistics[a]})})};b.prototype.clone=function(){var a=new h({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});this.mask&&(a.mask=this.mask instanceof Uint8Array?new Uint8Array(this.mask):this.mask.slice(0));var b,c=h.getPixelArrayConstructor(this.pixelType);
if(this.pixels&&0<this.pixels.length){a.pixels=[];var d=this.pixels[0].slice;for(b=0;b<this.pixels.length;b++)a.pixels[b]=d?this.pixels[b].slice(0,this.pixels[b].length):new c(this.pixels[b])}if(this.statistics)for(a.statistics=[],b=0;b<this.statistics.length;b++)a.statistics[b]=n.clone(this.statistics[b]);return a};b.prototype._fillFrom8Bit=function(a){var b=this.mask,h=this.maskIsAlpha,k=this.pixels;if(a&&k&&k.length){var d,g,l;d=g=l=k[0];3<=k.length?(g=k[1],l=k[2]):2===k.length&&(g=k[1]);a=new Uint32Array(a);
k=this.width*this.height;if(d.length!==k)c.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");else if(b&&b.length===k)if(h)for(h=0;h<k;h++)b[h]&&(a[h]=b[h]<<24|l[h]<<16|g[h]<<8|d[h]);else for(h=0;h<k;h++)b[h]&&(a[h]=-16777216|l[h]<<16|g[h]<<8|d[h]);else for(h=0;h<k;h++)a[h]=-16777216|l[h]<<16|g[h]<<8|d[h]}else c.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};b.prototype._fillFromNon8Bit=function(a){var b=this.pixels,h=this.mask,k=this.statistics;
if(a&&b&&b.length){var d=this.pixelType,g=1,l=0,g=1;k&&0<k.length?(l=k.map(function(a){return a.minValue}).reduce(function(a,b){return Math.min(a,b)}),g=k.map(function(a){return a.maxValue-a.minValue}).reduce(function(a,b){return Math.max(a,b)}),g=255/g):(g=255,"s8"===d?(l=-128,g=127):"u16"===d?g=65535:"s16"===d?(l=-32768,g=32767):"u32"===d?g=4294967295:"s32"===d?(l=-2147483648,g=2147483647):"f32"===d?(l=-3.4*1E39,g=3.4*1E39):"f64"===d&&(l=-Number.MAX_VALUE,g=Number.MAX_VALUE),g=255/(g-l));a=new Uint32Array(a);
var d=this.width*this.height,p,n,k=p=n=b[0];if(k.length!==d)return c.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(2<=b.length)if(p=b[1],3<=b.length&&(n=b[2]),h&&h.length===d)for(b=0;b<d;b++)h[b]&&(a[b]=-16777216|(n[b]-l)*g<<16|(p[b]-l)*g<<8|(k[b]-l)*g);else for(b=0;b<d;b++)a[b]=-16777216|(n[b]-l)*g<<16|(p[b]-l)*g<<8|(k[b]-l)*g;else if(h&&h.length===d)for(b=0;b<d;b++)p=(k[b]-l)*g,h[b]&&(a[b]=-16777216|p<<16|p<<8|p);else for(b=0;b<d;b++)p=(k[b]-l)*g,a[b]=-16777216|
p<<16|p<<8|p}else c.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};b.prototype._fillFrom32Bit=function(a){var b=this.pixels,h=this.mask;if(!a||!b||!b.length)return c.error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");var k,d,g;k=d=g=b[0];3<=b.length?(d=b[1],g=b[2]):2===b.length&&(d=b[1]);var l=this.width*this.height;if(k.length!==l)return c.error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");var p=
0;if(h&&h.length===l)for(b=0;b<l;b++)a[p++]=k[b],a[p++]=d[b],a[p++]=g[b],a[p++]=h[b]&1;else for(b=0;b<l;b++)a[p++]=k[b],a[p++]=d[b],a[p++]=g[b],a[p++]=1};b.prototype._calculateBandStatistics=function(a,b){var c=Infinity,f=-Infinity,h=a.length,k,d=0;if(b)for(k=0;k<h;k++)b[k]&&(d=a[k],c=d<c?d:c,f=d>f?d:f);else for(k=0;k<h;k++)d=a[k],c=d<c?d:c,f=d>f?d:f;return{minValue:c,maxValue:f}};var h;e.__decorate([p.property({json:{write:!0}})],b.prototype,"width",void 0);e.__decorate([p.property({json:{write:!0}})],
b.prototype,"height",void 0);e.__decorate([p.property({json:{write:!0}})],b.prototype,"pixelType",void 0);e.__decorate([p.cast("pixelType")],b.prototype,"castPixelType",null);e.__decorate([p.property({json:{write:!0}})],b.prototype,"validPixelCount",void 0);e.__decorate([p.property({json:{write:!0}})],b.prototype,"mask",void 0);e.__decorate([p.property({json:{write:!0}})],b.prototype,"maskIsAlpha",void 0);e.__decorate([p.property({json:{write:!0}})],b.prototype,"pixels",void 0);e.__decorate([p.property({json:{write:!0}})],
b.prototype,"statistics",void 0);return b=h=e.__decorate([p.subclass("esri.layers.support.PixelBlock")],b)}(q.JSONSupport)})},"esri/symbols/support/utils":function(){define("require exports tslib ../../Color ../../symbols ../../core/asyncUtils ../../core/compilerUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../core/libs/gl-matrix-2/vec3f64 ./gfxUtils ./Symbol3DMaterial @dojo/framework/shim/Promise".split(" "),function(A,m,e,r,d,q,n,l,g,p,c,a,b){function h(a,b){if(null==b)return a;
a=a.toRgba();a[3]*=b;return new r(a)}function k(a,c,f){if(a=a.symbolLayers){var k=function(a){a=g.isSome(a)?a:null;c=c||a||null!=f&&x;return h(c,f)};a.forEach(function(a){if("object"!==a.type||null==a.resource.href||c)if("water"===a.type)a.color=k(a.color);else{var d=g.isSome(a.material)?a.material.color:null,d=k(d);g.isNone(a.material)?a.material=new b.default({color:d}):a.material.color=d;null!=f&&"outline"in a&&g.isSome(a.outline)&&g.isSome(a.outline.color)&&(a.outline.color=h(a.outline.color,
f))}})}}function f(a,b){return e.__awaiter(this,void 0,void 0,function(){var c,f=this;return e.__generator(this,function(h){switch(h.label){case 0:return(c=a.symbolLayers)?[4,q.forEach(c,function(a){return e.__awaiter(f,void 0,void 0,function(){return e.__generator(this,function(c){return[2,D(a,b)]})})})]:[2];case 1:return h.sent(),[2]}})})}function D(a,b){return e.__awaiter(this,void 0,void 0,function(){var f;return e.__generator(this,function(h){switch(h.label){case 0:f=a.type;switch(f){case "extrude":return[3,
1];case "icon":return[3,2];case "line":return[3,2];case "text":return[3,2];case "path":return[3,3];case "object":return[3,4];case "fill":return[3,6];case "water":return[3,6]}return[3,7];case 1:return a.size="number"===typeof b[2]?b[2]:0,[3,8];case 2:return h=F(b),g.isSome(h)&&(a.size=h),[3,8];case 3:return h=u(b,c.vec3f64.ONES,[a.width,void 0,a.height]),a.width=y(b[0],a.width,1,h),a.height=y(b[2],a.height,1,h),[3,8];case 4:return[4,v(a,b)];case 5:return h.sent(),[3,8];case 6:return[3,8];case 7:n.neverReached(a),
h.label=8;case 8:return[2]}})})}function F(a){for(var b=0;b<a.length;b++){var c=a[b];if("number"===typeof c)return c}return null}function v(a,b){return e.__awaiter(this,void 0,void 0,function(){var c,f,h,k;return e.__generator(this,function(d){switch(d.label){case 0:return[4,w(a)];case 1:return c=d.sent(),f=c.resourceSize,h=c.symbolSize,k=u(b,f,h),a.width=y(b[0],h[0],f[0],k),a.depth=y(b[1],h[1],f[1],k),a.height=y(b[2],h[2],f[2],k),[2]}})})}function u(a,b,c){for(var f=0;3>f;f++){var h=a[f];switch(h){case "symbol-value":return null!=
c[f]?c[f]/b[f]:1;case "proportional":break;default:if(h&&b[f])return h/b[f]}}return 1}function w(a){return e.__awaiter(this,void 0,void 0,function(){var b,c,f,h,k,d,g,t;return e.__generator(this,function(l){switch(l.label){case 0:return[4,new Promise(function(a,b){A(["./symbolLayerUtils"],a,b)})];case 1:return b=l.sent(),[4,b.computeObjectLayerResourceSize(a,10)];case 2:c=l.sent();f=a.width;h=a.height;k=a.depth;d=[f,k,h];g=1;for(t=0;3>t;t++)if(null!=d[t]){g=d[t]/c[t];break}for(t=0;3>t;t++)null==d[t]&&
(d[t]=c[t]*g);return[2,{resourceSize:c,symbolSize:d}]}})})}function y(a,b,c,f){switch(a){case "proportional":return c*f;case "symbol-value":return null!=b?b:c;default:return a}}Object.defineProperty(m,"__esModule",{value:!0});m.applyRotationToSymbol=m.applySizesToSymbol=m.applyColorToSymbol=m.applyOpacityToColor=m.getIconHref=m.isVolumetricSymbol=m.getSymbolOutlineSize=void 0;var C=/\/resource\/(.*?)\.svg$/,x=new r("white");m.getSymbolOutlineSize=function(b){if(!b)return 0;if(d.isSymbol3D(b)){var c=
b.symbolLayers&&b.symbolLayers.length;c?(b=b.symbolLayers.getItemAt(c-1),b="outline"in b?g.get(b,"outline","size"):void 0):b=void 0;return g.isSome(b)?b:0}return(b=a.getStroke(b))&&p.px2pt(b.width)||0};m.isVolumetricSymbol=function(a){if(!a||!a.symbolLayers)return!1;switch(a.type){case "point-3d":return a.symbolLayers.some(function(a){return"object"===a.type});case "line-3d":return a.symbolLayers.some(function(a){return"path"===a.type});case "polygon-3d":return a.symbolLayers.some(function(a){return"object"===
a.type||"extrude"===a.type});default:return!1}};m.getIconHref=function(a,b){b=b.resource.href;return!l("esri-canvas-svg-support")&&a.styleOrigin&&C.test(b)?b.replace(C,"/resource/png/$1.png"):b};m.applyOpacityToColor=h;m.applyColorToSymbol=function(a,b,c){if(a&&(b||null!=c))if(b&&(b=new r(b)),d.isSymbol3D(a))k(a,b,c);else if(d.isSymbol2D(a)){if(b=b||a.color)a.color=h(b,c);null!=c&&"outline"in a&&a.outline&&a.outline.color&&(a.outline.color=h(a.outline.color,c))}};m.applySizesToSymbol=function(a,b){return e.__awaiter(this,
void 0,void 0,function(){return e.__generator(this,function(c){if(!a||!b)return[2];if(d.isSymbol3D(a))return[2,f(a,b)];if(d.isSymbol2D(a)&&(c=F(b),!g.isNone(c)))switch(a.type){case "simple-marker":a.size=c;break;case "picture-marker":var h=a.width/a.height;1<h?(a.width=c,a.height=c*h):(a.width=c*h,a.height=c);break;case "simple-line":a.width=c;break;case "text":a.font.size=c;break;case "simple-fill":case "picture-fill":break;case "cim":break;default:n.neverReached(a)}return[2]})})};m.applyRotationToSymbol=
function(a,b,c){a&&null!=b&&(d.isSymbol3D(a)?(a=a.symbolLayers)&&a.forEach(function(a){if(a&&"object"===a.type)switch(c){case "tilt":a.tilt=b;break;case "roll":a.roll=b;break;default:a.heading=b}}):!d.isSymbol2D(a)||"simple-marker"!==a.type&&"picture-marker"!==a.type&&"text"!==a.type||(a.angle=b))}})},"esri/symbols/support/gfxUtils":function(){define("require exports ../../assets ../../Color ../../request ../../core/ItemCache ../../core/promiseUtils ../../core/screenUtils ./cimSymbolUtils".split(" "),
function(A,m,e,r,d,q,n,l,g){function p(a){if(!a)return null;var b;switch(a.type){case "simple-fill":case "picture-fill":case "simple-marker":b=p(a.outline);break;case "simple-line":var c=l.pt2px(a.width);"none"!==a.style&&0!==c&&(b={color:a.color,style:k(a.style),width:c,cap:a.cap,join:"miter"===a.join?l.pt2px(a.miterLimit):a.join});break;default:b=null}return b}Object.defineProperty(m,"__esModule",{value:!0});m.defaultThematicColor=m.getStroke=m.getPatternUrlWithColor=m.getFill=m.getSVGBaselineShift=
m.getSVGBaseline=m.getSVGAlign=void 0;var c=e.getAssetUrl("esri/symbols/patterns/"),a={left:"start",center:"middle",right:"end",justify:"start"},b={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},h=new q(1E3);m.getSVGAlign=function(b){return b=(b=b.horizontalAlignment)&&a[b.toLowerCase()]||"middle"};m.getSVGBaseline=function(a){return(a=a.verticalAlignment)&&b[a.toLowerCase()]||"alphabetic"};m.getSVGBaselineShift=function(a){return"bottom"===a.verticalAlignment?
"super":null};m.getFill=function(a){var b=a.style,h=null;if(a)switch(a.type){case "simple-marker":"cross"!==b&&"x"!==b&&(h=a.color);break;case "simple-fill":"solid"===b?h=a.color:"none"!==b&&(h={type:"pattern",x:0,y:0,src:c+b+".png",width:5,height:5});break;case "picture-fill":h={type:"pattern",src:a.url,width:l.pt2px(a.width)*a.xscale,height:l.pt2px(a.height)*a.yscale,x:l.pt2px(a.xoffset),y:l.pt2px(a.yoffset)};break;case "text":h=a.color;break;case "cim":h=g.getCIMSymbolColor(a)}return h};m.getPatternUrlWithColor=
function(a,b){var c=a+"-"+b;return void 0!==h.get(c)?n.resolve(h.get(c)):d(a,{responseType:"image"}).then(function(a){a=a.data;var f=a.naturalWidth,k=a.naturalHeight,d=document.createElement("canvas");d.width=f;d.height=k;var g=d.getContext("2d");g.fillStyle=b;g.fillRect(0,0,f,k);g.globalCompositeOperation="destination-in";g.drawImage(a,0,0);a=d.toDataURL();h.put(c,a);return a})};m.getStroke=p;var k=function(){var a={};return function(b){if(a[b])return a[b];var c=b.replace(/-/g,"");return a[b]=c}}();
m.defaultThematicColor=new r([128,128,128])})},"esri/core/ItemCache":function(){define(["require","exports","./MemCache"],function(A,m,e){return function(){function r(d,r){this._storage=new e.MemCacheStorage;this._storage.maxSize=d;r&&this._storage.registerRemoveFunc("",r)}r.prototype.put=function(d,e){this._storage.put(d,e,1,1)};r.prototype.pop=function(d){return this._storage.pop(d)};r.prototype.get=function(d){return this._storage.get(d)};r.prototype.clear=function(){this._storage.clearAll()};
r.prototype.destroy=function(){this._storage.clearAll()};return r}()})},"esri/symbols/support/cimSymbolUtils":function(){define(["require","exports","../../Color","../cim/utils"],function(A,m,e,r){function d(a){var b=r.toCIMSymbolJSON(a);if("CIMTextSymbol"===b.type)return b.height;a=0;if(b.symbolLayers)for(var c=0,b=b.symbolLayers;c<b.length;c++){var f=b[c];r.isCIMMarker(f)&&f.size>a?a=f.size:r.isCIMStroke(f)&&f.width>a?a=f.width:r.isCIMFill(f)}return a}function q(a,c,k){if("CIMTextSymbol"===a.type)a.height*=
c;else{if(k&&a.effects){k=0;for(var b=a.effects;k<b.length;k++)g(b[k],c)}if(a.symbolLayers)for(k=0,a=a.symbolLayers;k<a.length;k++)switch(b=a[k],b.type){case "CIMPictureMarker":case "CIMVectorMarker":n(b,c);break;case "CIMPictureStroke":case "CIMSolidStroke":b.width*=c;break;case "CIMPictureFill":b.height*=c;b.offsetX*=c;b.offsetY*=c;break;case "CIMHatchFill":q(b.lineSymbol,c,!0),b.offsetX*=c,b.offsetY*=c,b.separation*=c}}}function n(a,c){a.markerPlacement&&l(a.markerPlacement,c);a.offsetX*=c;a.offsetY*=
c;a.anchorPoint&&"Absolute"===a.anchorPointUnits&&(a.anchorPoint={x:a.anchorPoint.x*c,y:a.anchorPoint.y*c});a.size*=c;if("CIMVectorMarker"===a.type&&a.markerGraphics)for(var b=0,h=a.markerGraphics;b<h.length;b++){var d=h[b];a.scaleSymbolsProportionally||q(d.symbol,c,!0)}}function l(a,c){r.isCIMMarkerStrokePlacement(a)&&(a.offset*=c);switch(a.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":a.customEndingOffset*=c;a.offsetAlongLine*=c;if(a.placementTemplate&&
a.placementTemplate.length){var b=a.placementTemplate.map(function(a){return a*c});a.placementTemplate=b}break;case "CIMMarkerPlacementAlongLineVariableSize":a.maxRandomOffset*=c;a.placementTemplate&&a.placementTemplate.length&&(b=a.placementTemplate.map(function(a){return a*c}),a.placementTemplate=b);break;case "CIMMarkerPlacementOnLine":a.startPointOffset*=c;break;case "CIMMarkerPlacementAtExtremities":a.offsetAlongLine*=c;break;case "CIMMarkerPlacementAtRatioPositions":a.beginPosition*=c;a.endPosition*=
c;break;case "CIMMarkerPlacementPolygonCenter":a.offsetX*=c;a.offsetY*=c;break;case "CIMMarkerPlacementInsidePolygon":a.offsetX*=c,a.offsetY*=c,a.stepX*=c,a.stepY*=c}}function g(a,c){switch(a.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":a.width*=c;break;case "CIMGeometricEffectBuffer":a.size*=c;break;case "CIMGeometricEffectCut":a.beginCut*=c;a.endCut*=c;a.middleCut*=c;break;case "CIMGeometricEffectDashes":a.customEndingOffset*=c;a.offsetAlongLine*=c;if(a.dashTemplate&&a.dashTemplate.length){var b=
a.dashTemplate.map(function(a){return a*c});a.dashTemplate=b}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":a.length*=c;break;case "CIMGeometricEffectMove":a.offsetX*=c;a.offsetY*=c;break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":a.offset*=c;break;case "CIMGeometricEffectRegularPolygon":a.radius*=c;break;case "CIMGeometricEffectTaperedPolygon":a.fromWidth*=c;a.length*=c;a.toWidth*=c;break;case "CIMGeometricEffectWave":a.amplitude*=
c,a.period*=c}}function p(a,h){var b;b="CIMTextSymbol"===a.type?a.symbol:a;a="CIMPolygonSymbol"===a.type;if(b.symbolLayers){var f=0;for(b=b.symbolLayers;f<b.length;f++){var d=b[f];if(!(d.colorLocked||a&&(r.isCIMStroke(d)||r.isCIMMarker(d)&&d.markerPlacement&&r.isCIMMarkerStrokePlacement(d.markerPlacement))))switch(d.type){case "CIMVectorMarker":d.markerGraphics.forEach(function(a){p(a.symbol,h)});break;case "CIMSolidStroke":case "CIMSolidFill":c(h,d.color);break;case "CIMHatchFill":p(d.lineSymbol,
h)}}}}function c(a,c){for(var b=0;b<a.length;b++)if(a[b].join(".")===c.join("."))return;a.push(c)}function a(b,c){var h;h="CIMTextSymbol"===b.type?b.symbol:b;b="CIMPolygonSymbol"===b.type?!0:!1;if(h.symbolLayers){var f=0;for(h=h.symbolLayers;f<h.length;f++){var d=h[f];if(!(d.colorLocked||b&&(r.isCIMStroke(d)||r.isCIMMarker(d)&&d.markerPlacement&&r.isCIMMarkerStrokePlacement(d.markerPlacement)))){var g=c.toArray(0);switch(d.type){case "CIMVectorMarker":d.markerGraphics.forEach(function(b){a(b.symbol,
c)});break;case "CIMSolidStroke":case "CIMSolidFill":d.color=g;break;case "CIMHatchFill":a(d.lineSymbol,c)}}}}}Object.defineProperty(m,"__esModule",{value:!0});m.applyCIMSymbolRotation=m.getCIMSymbolRotation=m.applyCIMSymbolColor=m.getCIMSymbolColor=m.scaleCIMMarker=m.scaleCIMSymbolTo=m.getCIMSymbolSize=void 0;m.getCIMSymbolSize=d;m.scaleCIMSymbolTo=function(a,c){var b=r.toCIMSymbolJSON(a);a=d(a);if(0===a)if("CIMTextSymbol"===b.type)b.height=c;else{if(b.symbolLayers)for(a=0,b=b.symbolLayers;a<b.length;a++){var f=
b[a];switch(f.type){case "CIMPictureMarker":case "CIMVectorMarker":f.size=c;break;case "CIMPictureStroke":case "CIMSolidStroke":f.width=c}}}else q(b,c/a,!1)};m.scaleCIMMarker=n;m.getCIMSymbolColor=function(a){a=r.toCIMSymbolJSON(a);var b=[];p(a,b);return b.length?new e(r.fromCIMColor(b[0])):null};m.applyCIMSymbolColor=function(b,c){c instanceof e||(c=new e(c));b=r.toCIMSymbolJSON(b);a(b,c)};m.getCIMSymbolRotation=function(a){a=r.toCIMSymbolJSON(a);return"CIMTextSymbol"===a.type||"CIMPointSymbol"===
a.type?a.angle||0:0};m.applyCIMSymbolRotation=function(a,c){a=r.toCIMSymbolJSON(a);if("CIMTextSymbol"===a.type)a.angle=c;else if("CIMPointSymbol"===a.type&&a.symbolLayers)for(var b=c-(a.angle||0),f=0,h=a.symbolLayers;f<h.length;f++){var d=h[f];if(r.isCIMMarker(d)){var g=d.rotation||0,g=d.rotateClockwise?g-b:g+b;d.rotation=g}a.angle=c}}})},"esri/symbols/cim/utils":function(){define(["require","exports"],function(A,m){function e(e,d){"string"!==typeof e&&(e=String(e));switch(d){case "LowerCase":return e.toLowerCase();
case "Allcaps":return e.toUpperCase();default:return e}}Object.defineProperty(m,"__esModule",{value:!0});m.isCIMMarkerStrokePlacement=m.isCIMFill=m.isCIMStroke=m.isCIMMarker=m.toCIMSymbolJSON=m.fromCIMColor=m.resampleHermite=m._adjustTextCase=m.createLabelOverrideFunction=m.colorToArray=m.evaluateValueOrFunction=void 0;m.evaluateValueOrFunction=function(e,d,q,n){return"function"===typeof e?e(d,q,n):e};m.colorToArray=function(e){return[e.r,e.g,e.b,e.a]};m.createLabelOverrideFunction=function(r,d,q){var n=
function(c){for(var a=c.length;a--;)if(-1===" /-,\n".indexOf(c.charAt(a)))return!1;return!0},l=[],g=0,p=-1;do p=d.indexOf("[",g),p>=g&&(p>g&&(g=d.substr(g,p-g),l.push([g,null,n(g)])),g=p+1,p=d.indexOf("]",g),p>=g&&(p>g&&(g=d.substr(g,p-g),(g=r[g])&&l.push([null,g,!1])),g=p+1));while(-1!==p);g<d.length-1&&(g=d.substr(g),l.push([g,null,n(g)]));return function(c){for(var a="",b=null,h=0;h<l.length;h++){var d=l[h],f=d[0],g=d[1],d=d[2];if(f)d?b=f:(b&&(a+=b,b=null),a+=f);else if(f=c.attributes[g])b&&(a+=
b,b=null),a+=f}return e(a,q)}};m._adjustTextCase=e;m.resampleHermite=function(e,d,q,n,l,g,p){void 0===p&&(p=!0);var c=d/l;q/=g;for(var a=Math.ceil(c/2),b=Math.ceil(q/2),h=0;h<g;h++)for(var k=0;k<l;k++){for(var f=4*(k+(p?g-h-1:h)*l),r=0,F=0,v=0,u=0,w=0,y=0,C=0,x=(h+.5)*q,t=Math.floor(h*q);t<(h+1)*q;t++)for(var E=Math.abs(x-(t+.5))/b,m=(k+.5)*c,E=E*E,B=Math.floor(k*c);B<(k+1)*c;B++){var H=Math.abs(m-(B+.5))/a,r=Math.sqrt(E+H*H);-1<=r&&1>=r&&(r=2*r*r*r-3*r*r+1,0<r&&(H=4*(B+t*d),C+=r*e[H+3],v+=r,255>
e[H+3]&&(r=r*e[H+3]/250),u+=r*e[H],w+=r*e[H+1],y+=r*e[H+2],F+=r))}n[f]=u/F;n[f+1]=w/F;n[f+2]=y/F;n[f+3]=C/v}};m.fromCIMColor=function(e){return e?{r:e[0],g:e[1],b:e[2],a:e[3]/255}:{r:0,g:0,b:0,a:0}};m.toCIMSymbolJSON=function(e){var d;return null===(d=e.data)||void 0===d?void 0:d.symbol};m.isCIMMarker=function(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type};
m.isCIMStroke=function(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type};m.isCIMFill=function(e){return"CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type};m.isCIMMarkerStrokePlacement=function(e){return"CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===
e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type}})},"esri/layers/support/DimensionalDefinition":function(){define("require exports tslib ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),function(A,m,e,r,d,q,n){return function(l){function g(c){c=l.call(this,c)||this;c.variableName=null;c.dimensionName=
null;c.values=[];c.isSlice=!1;return c}e.__extends(g,l);p=g;g.prototype.clone=function(){return new p({variableName:this.variableName,dimensionName:this.dimensionName,values:d.clone(this.values),isSlice:this.isSlice})};var p;e.__decorate([q.property({type:String,json:{write:!0}})],g.prototype,"variableName",void 0);e.__decorate([q.property({type:String,json:{write:!0}})],g.prototype,"dimensionName",void 0);e.__decorate([q.property({type:n.types.array(n.types.oneOf([n.types.native(Number),n.types.array(n.types.native(Number))])),
json:{write:!0}})],g.prototype,"values",void 0);e.__decorate([q.property({type:Boolean,json:{write:!0}})],g.prototype,"isSlice",void 0);return g=p=e.__decorate([q.subclass("esri.layers.support.DimensionalDefinition")],g)}(r.JSONSupport)})},"esri/layers/support/ExportImageServiceParameters":function(){define("require exports tslib ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators ./imageryRendererUtils ./MosaicRule ./RasterFunction".split(" "),function(A,m,e,r,d,q,n,l,
g){Object.defineProperty(m,"__esModule",{value:!0});m.ExportImageServiceParameters=void 0;var p=new r.default({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"}),c=new r.default({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"});A=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.layer=null;b.adjustAspectRatio=void 0;b.bandIds=void 0;b.compression=void 0;b.compressionQuality=void 0;b.compressionTolerance=
.01;b.format=null;b.interpolation=null;b.noData=null;b.noDataInterpretation=void 0;b.pixelType=void 0;b.lercVersion=2;return b}e.__extends(b,a);b.prototype.writeAdjustAspectRatio=function(a,b,c){10.3>this.layer.version||(b[c]=a)};b.prototype.writeCompressionQuality=function(a,b,c){this.format&&-1<this.format.toLowerCase().indexOf("jpg")&&null!=a&&(b[c]=a)};b.prototype.writeCompressionTolerance=function(a,b,c){"lerc"===this.format&&null!=a&&(b[c]=a)};b.prototype.writeLercVersion=function(a,b,c){"lerc"===
this.format&&10.5<=this.layer.version&&(b[c]=a)};Object.defineProperty(b.prototype,"version",{get:function(){var a=this.layer;a.bandIds;a.format;a.compressionQuality;a.compressionTolerance;a.interpolation;a.noData;a.noDataInterpretation;a.mosaicRule;a.renderingRule;a.adjustAspectRatio;a.pixelFilter;a.renderer;a.definitionExpression;return(this._get("version")||0)+1},set:function(a){this._set("version",a)},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"mosaicRule",{get:function(){var a=
this.layer,b=a.mosaicRule,a=a.definitionExpression;b?a&&a!==b.where&&(b=b.clone(),b.where=a):a&&(b=new l({where:a}));return b},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"renderingRule",{get:function(){var a=this.layer,b=a.renderingRule,c=a.pixelFilter,a=!a.format||-1<a.format.indexOf("jpg")||-1<a.format.indexOf("png"),b=this._addResampleRasterFunction(b);a&&!c&&(b=this.combineRendererWithRenderingRule());return b},enumerable:!1,configurable:!0});b.prototype.combineRendererWithRenderingRule=
function(){var a,b=this.layer,c=b.rasterInfo,d=b.renderingRule,g=b.renderer;return g&&n.isSupportedRendererType(g)?n.combineRenderingRules(n.convertRendererToRenderingRule(g,{rasterAttributeTable:c.attributeTable,pixelType:c.pixelType,dataType:c.dataType,bandProperties:null===(a=c.keyProperties)||void 0===a?void 0:a.BandProperties,convertColorRampToColormap:10.6>b.version}),d):d};b.prototype._addResampleRasterFunction=function(a){var b,c=null;"vector-field"===(null===(b=this.layer.renderer)||void 0===
b?void 0:b.type)&&(b={},c=this.layer.renderingRule,c&&"Resample"===c.functionName||(c="esriImageServiceDataTypeVector-UV"===this.layer.serviceDataType?7:10,b.rasterFunction="Resample",b.rasterFunctionArguments={ResamplingType:c,InputCellSize:{x:this.layer.pixelSizeX,y:this.layer.pixelSizeY}}),c=g.fromJSON(b));return n.combineRenderingRules(c,a)};e.__decorate([q.property()],b.prototype,"layer",void 0);e.__decorate([q.property({json:{write:!0}})],b.prototype,"adjustAspectRatio",void 0);e.__decorate([q.writer("adjustAspectRatio")],
b.prototype,"writeAdjustAspectRatio",null);e.__decorate([q.property({json:{write:!0}}),q.aliasOf("layer.bandIds")],b.prototype,"bandIds",void 0);e.__decorate([q.property({json:{write:!0}})],b.prototype,"compression",void 0);e.__decorate([q.property({json:{write:!0}}),q.aliasOf("layer.compressionQuality")],b.prototype,"compressionQuality",void 0);e.__decorate([q.writer("compressionQuality")],b.prototype,"writeCompressionQuality",null);e.__decorate([q.property({json:{write:!0}}),q.aliasOf("layer.compressionTolerance")],
b.prototype,"compressionTolerance",void 0);e.__decorate([q.writer("compressionTolerance")],b.prototype,"writeCompressionTolerance",null);e.__decorate([q.property({json:{write:!0}}),q.aliasOf("layer.format")],b.prototype,"format",void 0);e.__decorate([q.property({type:String,json:{read:{reader:p.read},write:{writer:p.write}}}),q.aliasOf("layer.interpolation")],b.prototype,"interpolation",void 0);e.__decorate([q.property({json:{write:!0}}),q.aliasOf("layer.noData")],b.prototype,"noData",void 0);e.__decorate([q.property({type:String,
json:{read:{reader:c.read},write:{writer:c.write}}}),q.aliasOf("layer.noDataInterpretation")],b.prototype,"noDataInterpretation",void 0);e.__decorate([q.property({json:{write:!0}})],b.prototype,"pixelType",void 0);e.__decorate([q.property({json:{write:!0}})],b.prototype,"lercVersion",void 0);e.__decorate([q.writer("lercVersion")],b.prototype,"writeLercVersion",null);e.__decorate([q.property({type:Number,dependsOn:"layer.adjustAspectRatio layer.bandIds layer.format layer.compressionQuality layer.compressionTolerance layer.definitionExpression layer.interpolation layer.noData layer.noDataInterpretation layer.mosaicRule layer.renderingRule layer.pixelFilter layer.renderer lercVersion pixelType".split(" ")})],
b.prototype,"version",null);e.__decorate([q.property({dependsOn:["layer.mosaicRule","layer.definitionExpression"],json:{write:!0}})],b.prototype,"mosaicRule",null);e.__decorate([q.property({dependsOn:["layer.renderingRule","layer.renderer","layer.rasterInfo","layer.format"],json:{write:!0}})],b.prototype,"renderingRule",null);return b=e.__decorate([q.subclass("esri.layers.mixins.ExportImageServiceParameters")],b)}(d.JSONSupport);m.ExportImageServiceParameters=A})},"esri/layers/support/imageryRendererUtils":function(){define("require exports ../../core/arrayUtils ../../core/lang ../../core/SetUtils ./RasterFunction ../../renderers/support/colorRampUtils ../../renderers/support/stretchRendererUtils ../../renderers/visualVariables/SizeVariable".split(" "),
function(A,m,e,r,d,q,n,l,g){function p(a){var b=a.Raster;return b&&"esri.layers.support.RasterFunction"===b.declaredClass?p(b.functionArguments):a}function c(a,b){var c=new q;c.functionName="VectorFieldRenderer";var f=b.bandProperties;b="vector-uv"===b.dataType?!0:!1;var d,h;f&&2===f.length&&(d=f.map(function(a){return a.BandName.toLowerCase()}).indexOf("magnitude"),h=f.map(function(a){return a.BandName.toLowerCase()}).indexOf("direction"));if(-1===d||null===d)d=0,h=1;var f="arithmetic"===a.rotationType?
1:2,k="flow-from"===a.flowRepresentation?0:1,l=a.visualVariables?a.visualVariables.filter(function(a){return"Magnitude"===a.field})[0]:new g;a={magnitudeBandID:d,directionBandID:h,isUVComponents:b,referenceSystem:f,massFlowAngleRepresentation:k,symbolTileSize:50,symbolTileSizeUnits:100,calculationMethod:"Vector Average",symbologyName:D[a.style.toLowerCase()],minimumMagnitude:l.minDataValue,maximumMagnitude:l.maxDataValue,minimumSymbolSize:l.minSize,maximumSymbolSize:l.maxSize};c.functionArguments=
a;return c}function a(a,c){var f=[],d=[],g=[],k=[],l=c.pixelType,p=(c=c.rasterAttributeTable)&&c.features,e=h(c);if(p&&Array.isArray(p)&&a.classBreakInfos)return a.classBreakInfos.forEach(function(b,c){var f=b.symbol.color,d;f.a&&p.forEach(function(h){d=h.attributes[a.field];(d>=b.minValue&&d<b.maxValue||c===a.classBreakInfos.length-1&&d>=b.minValue)&&k.push([h.attributes[e],f.r,f.g,f.b])})}),l=l?b(k,l):k,c=new q,c.functionName="Colormap",c.functionArguments={},c.functionArguments.Colormap=l,c.variableName=
"Raster",c;a.classBreakInfos.forEach(function(a,b){var c=a.symbol&&a.symbol.color;c.a?(0===b?f.push(a.minValue,a.maxValue+1E-6):f.push(a.minValue+1E-6,a.maxValue+1E-6),d.push(b),k.push([b,c.r,c.g,c.b])):g.push(a.minValue,a.maxValue)});l=l?b(k,l):k;c=new q;c.functionName="Remap";c.functionArguments={InputRanges:f,OutputValues:d,NoDataRanges:g};c.variableName="Raster";var u=new q;u.functionName="Colormap";u.functionArguments={Colormap:l,Raster:c};return u}function b(a,b){(b=m.pixelTypeRanges[String(b).toLowerCase()])&&
a.push([Math.floor(b[0]-1),0,0,0],[Math.ceil(b[1]+1),0,0,0]);return a}function h(a){if(a)return(a=(a=a.fields)&&e.find(a,function(a){return a&&a.name&&"value"===a.name.toLowerCase()}))&&a.name}function k(a,c){var f=[],d=c.pixelType,g=(c=c.rasterAttributeTable)&&c.features,k=h(c),l=!1;a.uniqueValueInfos&&a.uniqueValueInfos.forEach(function(b){var c=b.symbol.color;c.a&&(a.field!==k&&g?g&&g.forEach(function(d){String(d.attributes[a.field])===String(b.value)&&f.push([d.attributes[k],c.r,c.g,c.b])}):isNaN(+b.value)?
l=!0:f.push([+b.value,c.r,c.g,c.b]))});if(l)return null;d=d&&0<f.length?b(f,d):f;c=new q;c.functionName="Colormap";c.functionArguments={};c.functionArguments.Colormap=d;c.variableName="Raster";return c}function f(a){var b=[];a.forEach(function(a){Array.isArray(a)?b.push(a):null!=a.min&&null!=a.max&&b.push([a.min,a.max,a.avg||0,a.stddev||0])});return b}Object.defineProperty(m,"__esModule",{value:!0});m.convertRendererToRenderingRule=m.combineRenderingRules=m.isSupportedRendererType=m.pixelTypeRanges=
void 0;m.pixelTypeRanges={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-3.4*1E39,3.4*1E39],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]};var D={simple_scalar:"Simple Scalar",wind_speed:"Wind Barb",single_arrow:"Single Arrow",beaufort_kn:"Beaufort Wind (Knots)",beaufort_m:"Beaufort Wind (MetersPerSecond)",ocean_current_m:"Ocean Current (MetersPerSecond)",ocean_current_kn:"Ocean Current (Knots)"},F=d.SetFromValues(["raster-stretch",
"unique-value","class-breaks","raster-shaded-relief","vector-field"]);m.isSupportedRendererType=function(a){return F.has(a.type)};m.combineRenderingRules=function(a,b){if(!a||!b)return r.clone(a||b);a=r.clone(a);"none"!==b.functionName.toLowerCase()&&(p(a.functionArguments).Raster=b);return a};m.convertRendererToRenderingRule=function(d,h){h=h||{};switch(d.type){case "raster-stretch":var g=new q;g.functionName="Stretch";var p=v[l.stretchTypeJSONDict.toJSON(d.stretchType)],e=f(d.statistics),e={StretchType:p,
Statistics:e,DRA:d.dynamicRangeAdjustment,UseGamma:d.useGamma,Gamma:d.gamma,ComputeGamma:d.computeGamma};null!=d.outputMin&&(e.Min=d.outputMin);null!=d.outputMax&&(e.Max=d.outputMax);p===v.standardDeviation?(e.NumberOfStandardDeviations=d.numberOfStandardDeviations,g.outputPixelType="u8"):p===v.percentClip?(e.MinPercent=d.minPercent,e.MaxPercent=d.maxPercent,g.outputPixelType="u8"):p===v.minMax?g.outputPixelType="u8":p===v.sigmoid&&(e.SigmoidStrengthLevel=d.sigmoidStrengthLevel);g.functionArguments=
e;g.variableName="Raster";if(d.colorRamp){var p=d.colorRamp,e=new q,t=n.getColorRampName(p);e.functionArguments=t?{colorRamp:t}:!h.convertColorRampToColormap||"algorithmic"!==p.type&&"multipart"!==p.type?{colorRamp:d.colorRamp.toJSON()}:{Colormap:n.convertColorRampToColormap(p,256)};e.variableName="Raster";e.functionName="Colormap";e.functionArguments.Raster=g;d=e}else d=g;return d;case "class-breaks":return a(d,h);case "unique-value":return k(d,h);case "raster-colormap":return(d=d.extractColormap())&&
0!==d.length?(d=(h=h.pixelType)?b(d,h):d,h=new q,h.functionName="Colormap",h.functionArguments={},h.functionArguments.Colormap=d,d=h):d=void 0,d;case "vector-field":return c(d,h);case "raster-shaded-relief":return"elevation"!==h.dataType?d=new q:(h=new q,h.functionName="Hillshade",g="traditional"===d.hillshadeType?0:1,p="none"===d.scalingType?1:3,e={HillshadeType:g,SlopeType:p,ZFactor:d.zFactor},0===g&&(e.Azimuth=d.azimuth,e.Altitude=d.altitude),3===p&&(e.PSPower=d.pixelSizePower,e.PSZFactor=d.pixelSizeFactor),
h.functionArguments=e,h.variableName="Raster",d.colorRamp&&(h.functionName="ShadedRelief",e.Colormap=n.convertColorRampToColormap(d.colorRamp,256)),d=h),d}};var v={none:0,standardDeviation:3,histogramEqualization:4,minMax:5,percentClip:6,sigmoid:9}})},"esri/layers/support/RasterFunction":function(){define("require exports tslib ../../core/JSONSupport ../../core/lang ../../core/SetUtils ../../core/accessorSupport/decorators".split(" "),function(A,m,e,r,d,q,n){var l=q.SetFromValues(["Raster","Raster2",
"DEM","FillRaster"]),g=q.SetFromValues(["Rasters"]),p=function(a){return a&&a.rasterFunction?b.fromJSON(a):a},c=function(a){return a&&a instanceof b?a.toJSON():a},a;(function(a){a[a.MOSAIC=0]="MOSAIC";a[a.GROUP=1]="GROUP";a[a.ITEM=2]="ITEM"})(a||(a={}));var b=function(b){function h(a){a=b.call(this,a)||this;a.functionArguments=null;a.functionName=null;a.outputPixelType="unknown";a.variableName=null;a.description=null;a.functionDefinition=null;a.thumbnail=null;return a}e.__extends(h,b);f=h;h.prototype.readFunctionArguments=
function(a,b){a=b.arguments||b.rasterFunctionArguments;if(null==a)a=null;else{b={};for(var c=0,f=Object.keys(a);c<f.length;c++){var d=f[c];l.has(d)?b[d]=p(a[d]):g.has(d)&&Array.isArray(a[d])?b[d]=a[d].map(p):b[d]=a[d]}a=b}return a};h.prototype.writeFunctionArguments=function(a,b,f){for(var d={},h=0,k=Object.keys(a);h<k.length;h++){var p=k[h];l.has(p)?d[p]=c(a[p]):g.has(p)&&Array.isArray(a[p])?d[p]=a[p].map(c):d[p]=c(a[p])}this.functionDefinition?b.arguments=d:b[f]=d};h.prototype.readFunctionName=
function(a,b){a=b.rasterFunctionInfos;var c=b.name;return c?c:a&&a.length&&"None"!==a[0].name?a[0].name:b.rasterFunction};h.prototype.writeFunctionName=function(a,b,c){this.functionDefinition?b.name=a:b[c]=a};h.prototype.readFunctionType=function(b){return a[b]};h.prototype.writeFunctionType=function(b,c,f){c[f]=a[b]};h.prototype.clone=function(){return new f({functionName:this.functionName,functionArguments:d.clone(this.functionArguments),outputPixelType:this.outputPixelType,variableName:this.variableName,
description:this.description,functionType:this.functionType,functionDefinition:this.functionDefinition,thumbnail:this.thumbnail})};var f;e.__decorate([n.property({json:{type:Object,write:{target:"rasterFunctionArguments"}}})],h.prototype,"functionArguments",void 0);e.__decorate([n.reader("functionArguments",["rasterFunctionArguments","arguments"])],h.prototype,"readFunctionArguments",null);e.__decorate([n.writer("functionArguments")],h.prototype,"writeFunctionArguments",null);e.__decorate([n.property({json:{type:String,
write:{target:"rasterFunction"}}})],h.prototype,"functionName",void 0);e.__decorate([n.reader("functionName",["rasterFunction","rasterFunctionInfos","name"])],h.prototype,"readFunctionName",null);e.__decorate([n.writer("functionName")],h.prototype,"writeFunctionName",null);e.__decorate([n.enumeration({C128:"c128",C64:"c64",F32:"f32",F64:"f64",S16:"s16",S32:"s32",S8:"s8",U1:"u1",U16:"u16",U2:"u2",U32:"u32",U4:"u4",U8:"u8",UNKNOWN:"unknown"},{ignoreUnknown:!1}),n.property({json:{default:"unknown"}})],
h.prototype,"outputPixelType",void 0);e.__decorate([n.property({type:String,json:{read:!0,write:!0}})],h.prototype,"variableName",void 0);e.__decorate([n.property({type:String,json:{read:!0,write:!0,origins:{"web-document":{read:!1,write:!1}}}})],h.prototype,"description",void 0);e.__decorate([n.property({json:{origins:{"web-document":{read:!1,write:!1}}}})],h.prototype,"functionType",void 0);e.__decorate([n.reader("functionType")],h.prototype,"readFunctionType",null);e.__decorate([n.writer("functionType")],
h.prototype,"writeFunctionType",null);e.__decorate([n.property({type:Object,json:{read:{source:"function"},write:{target:"function"},origins:{"web-document":{read:!1,write:!1}}}})],h.prototype,"functionDefinition",void 0);e.__decorate([n.property({type:String,json:{read:!0,write:!0,origins:{"web-document":{read:!1,write:!1}}}})],h.prototype,"thumbnail",void 0);return h=f=e.__decorate([n.subclass("esri.layers.support.RasterFunction")],h)}(r.JSONSupport);return b})},"esri/layers/support/MosaicRule":function(){define("require exports tslib ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ../../geometry/Point ./DimensionalDefinition ./RasterFunction".split(" "),
function(A,m,e,r,d,q,n,l,g,p){var c=r.strict()({MT_FIRST:"first",MT_LAST:"last",MT_MIN:"min",MT_MAX:"max",MT_MEAN:"mean",MT_BLEND:"blend",MT_SUM:"sum"}),a=r.strict()({esriMosaicNone:"none",esriMosaicCenter:"center",esriMosaicNadir:"nadir",esriMosaicViewpoint:"viewpoint",esriMosaicAttribute:"attribute",esriMosaicLockRaster:"lock-raster",esriMosaicNorthwest:"northwest",esriMosaicSeamline:"seamline"});return function(b){function d(a){a=b.call(this,a)||this;a.ascending=!0;a.itemRenderingRule=null;a.lockRasterIds=
null;a.method=null;a.multidimensionalDefinition=null;a.objectIds=null;a.operation=null;a.sortField=null;a.sortValue=null;a.viewpoint=null;a.where=null;return a}e.__extends(d,b);k=d;d.prototype.readAscending=function(a,b){return null!=b.ascending?b.ascending:null!=b.sortAscending?b.sortAscending:!0};d.prototype.readMethod=function(b,c){b=c.mosaicMethod||c.defaultMosaicMethod;switch(b?b.toLowerCase().replace("esrimosaic",""):""){case "byattribute":case "attribute":b="esriMosaicAttribute";break;case "lockraster":b=
"esriMosaicLockRaster";break;case "center":b="esriMosaicCenter";break;case "northwest":b="esriMosaicNorthwest";break;case "nadir":b="esriMosaicNadir";break;case "viewpoint":b="esriMosaicViewpoint";break;case "seamline":b="esriMosaicSeamline";break;case "none":b="esriMosaicNone";break;default:b="esriMosaicNone"}return a.fromJSON(b)};d.prototype.readOperation=function(a,b){a=b.mosaicOperation;b=b.mosaicOperator&&b.mosaicOperator.toLowerCase();b=a||(b?c.toJSON(b):null);return c.fromJSON(b)||"first"};
d.prototype.castSortValue=function(a){return null==a||"string"===typeof a||"number"===typeof a?a:""+a};d.prototype.clone=function(){return new k({ascending:this.ascending,itemRenderingRule:q.clone(this.itemRenderingRule),lockRasterIds:q.clone(this.lockRasterIds),method:this.method,multidimensionalDefinition:q.clone(this.multidimensionalDefinition),objectIds:q.clone(this.objectIds),operation:this.operation,sortField:this.sortField,sortValue:this.sortValue,viewpoint:q.clone(this.viewpoint),where:this.where})};
var k;e.__decorate([n.property({type:Boolean,json:{write:!0}})],d.prototype,"ascending",void 0);e.__decorate([n.reader("ascending",["ascending","sortAscending"])],d.prototype,"readAscending",null);e.__decorate([n.property({type:p,json:{write:!0}})],d.prototype,"itemRenderingRule",void 0);e.__decorate([n.property({type:[Number],json:{write:{overridePolicy:function(){return{enabled:"lock-raster"===this.method}}}}})],d.prototype,"lockRasterIds",void 0);e.__decorate([n.property({type:String,json:{type:a.jsonValues,
write:{target:"mosaicMethod",writer:a.write}}})],d.prototype,"method",void 0);e.__decorate([n.reader("method",["mosaicMethod","defaultMosaicMethod"])],d.prototype,"readMethod",null);e.__decorate([n.property({type:[g],json:{write:!0}})],d.prototype,"multidimensionalDefinition",void 0);e.__decorate([n.property({type:[Number],json:{read:{source:"fids"},write:{target:"fids"}}})],d.prototype,"objectIds",void 0);e.__decorate([n.property({json:{type:c.jsonValues,read:{reader:c.read},write:{target:"mosaicOperation",
writer:c.write}}})],d.prototype,"operation",void 0);e.__decorate([n.reader("operation",["mosaicOperation","mosaicOperator"])],d.prototype,"readOperation",null);e.__decorate([n.property({type:String,json:{write:{overridePolicy:function(){return{enabled:"attribute"===this.method}}}}})],d.prototype,"sortField",void 0);e.__decorate([n.property({type:[String,Number],json:{write:{allowNull:!0,overridePolicy:function(){return{enabled:"attribute"===this.method,allowNull:!0}}}}})],d.prototype,"sortValue",
void 0);e.__decorate([n.cast("sortValue")],d.prototype,"castSortValue",null);e.__decorate([n.property({type:l,json:{write:!0}})],d.prototype,"viewpoint",void 0);e.__decorate([n.property({type:String,json:{write:!0}})],d.prototype,"where",void 0);return d=k=e.__decorate([n.subclass("esri.layers.support.MosaicRule")],d)}(d.JSONSupport)})},"esri/layers/support/RasterInfo":function(){define("require exports tslib ../../core/JSONSupport ../../core/accessorSupport/decorators ../../geometry/Extent ../../tasks/support/FeatureSet".split(" "),
function(A,m,e,r,d,q,n){return function(l){function g(d){d=l.call(this,d)||this;d.attributeTable=null;d.bandCount=null;d.colormap=null;d.extent=null;d.format=void 0;d.height=null;d.width=null;d.histograms=null;d.keyProperties={};d.multidimensionalInfo=null;d.noDataValue=null;d.pixelSize=null;d.pixelType=null;d.spatialReference=null;d.statistics=null;d.storageInfo=null;return d}e.__extends(g,l);Object.defineProperty(g.prototype,"dataType",{get:function(){var d=this.keyProperties&&this.keyProperties.DataType;
return d?d.toLowerCase():"generic"},enumerable:!1,configurable:!0});e.__decorate([d.property({type:n,json:{write:!0}})],g.prototype,"attributeTable",void 0);e.__decorate([d.property({json:{write:!0}})],g.prototype,"bandCount",void 0);e.__decorate([d.property({json:{write:!0}})],g.prototype,"colormap",void 0);e.__decorate([d.property({type:String,readOnly:!0})],g.prototype,"dataType",null);e.__decorate([d.property({type:q,json:{write:!0}})],g.prototype,"extent",void 0);e.__decorate([d.property({json:{write:!0}})],
g.prototype,"format",void 0);e.__decorate([d.property({json:{write:!0}})],g.prototype,"height",void 0);e.__decorate([d.property({json:{write:!0}})],g.prototype,"width",void 0);e.__decorate([d.property({json:{write:!0}})],g.prototype,"histograms",void 0);e.__decorate([d.property({json:{write:!0}})],g.prototype,"keyProperties",void 0);e.__decorate([d.property({json:{write:!0}})],g.prototype,"multidimensionalInfo",void 0);e.__decorate([d.property()],g.prototype,"noDataValue",void 0);e.__decorate([d.property({json:{write:!0}})],
g.prototype,"pixelSize",void 0);e.__decorate([d.property({json:{write:!0}})],g.prototype,"pixelType",void 0);e.__decorate([d.property({json:{write:!0}})],g.prototype,"spatialReference",void 0);e.__decorate([d.property({json:{write:!0}})],g.prototype,"statistics",void 0);e.__decorate([d.property({json:{write:!0}})],g.prototype,"storageInfo",void 0);return g=e.__decorate([d.subclass("esri.layers.support.RasterInfo")],g)}(r.JSONSupport)})},"esri/layers/support/RasterJobHandler":function(){define("require exports tslib ../../core/Error ../../core/promiseUtils ../../core/workers ./PixelBlock".split(" "),
function(A,m,e,r,d,q,n){return function(){function l(){this._workerThread=null;this._destroyed=!1}l.prototype.initialize=function(){return e.__awaiter(this,void 0,void 0,function(){var d;return e.__generator(this,function(g){switch(g.label){case 0:return[4,q.open("RasterWorker")];case 1:return d=g.sent(),this._destroyed?d.close():this._workerThread=d,[2]}})})};l.prototype.destroy=function(){this._destroyed=!0;this._workerThread&&(this._workerThread.close(),this._workerThread=null)};l.prototype.decode=
function(d,l){return e.__awaiter(this,void 0,void 0,function(){var c;return e.__generator(this,function(a){switch(a.label){case 0:if(!this._workerThread)throw new r("raster-jobhandler:no-connection","no available worker connection");return[4,this._workerThread.invoke("decode",d,l)];case 1:return c=a.sent(),[2,c?new n(c):null]}})})};l.prototype.symbolize=function(d,l){return e.__awaiter(this,void 0,void 0,function(){var c,a;return e.__generator(this,function(b){switch(b.label){case 0:if(!this._workerThread)throw new r("raster-jobhandler:no-connection",
"no available worker connection");c={extent:d.extent&&d.extent.toJSON(),pixelBlock:d.pixelBlock.toJSON(),simpleStretchParams:d.simpleStretchParams,bandIds:d.bandIds};return[4,this._workerThread.invoke("symbolize",c,l)];case 1:return a=b.sent(),[2,a?new n(a):null]}})})};l.prototype.updateSymbolizer=function(g,l){return e.__awaiter(this,void 0,void 0,function(){var c;return e.__generator(this,function(a){switch(a.label){case 0:if(!this._workerThread)throw new r("raster-jobhandler:no-connection","no available worker connection");
c=g&&g.renderer&&"raster-stretch"===g.renderer.type&&g.renderer.histograms;return[4,d.all(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:g.toJSON(),histograms:c},l))];case 1:return a.sent(),[2]}})})};l.prototype.stretch=function(d,l){return e.__awaiter(this,void 0,void 0,function(){var c,a;return e.__generator(this,function(b){switch(b.label){case 0:if(!this._workerThread)throw new r("raster-jobhandler:no-connection","no available worker connection");if(!d||!d.pixelBlock)return[2,
null];c={srcPixelBlock:d.pixelBlock.toJSON(),stretchParams:d.stretchParams};return[4,this._workerThread.invoke("stretch",c,l)];case 1:return a=b.sent(),[2,a?new n(a):null]}})})};l.prototype.mosaicAndTransform=function(d,l){return e.__awaiter(this,void 0,void 0,function(){var c,a;return e.__generator(this,function(b){switch(b.label){case 0:if(!this._workerThread)throw new r("raster-jobhandler:no-connection","no available worker connection");if(!(d&&d.srcPixelBlocks&&0<d.srcPixelBlocks.length))return[2,
null];c=e.__assign(e.__assign({},d),{srcPixelBlocks:d.srcPixelBlocks.map(function(a){return a?a.toJSON():null})});return[4,this._workerThread.invoke("mosaicAndTransform",c,l)];case 1:return a=b.sent(),[2,a?new n(a):null]}})})};return l}()})},"esri/layers/support/rasterFormats/RasterCodec":function(){define("require exports tslib ../../../core/Error ../../../core/SetUtils ../PixelBlock ./ImageCanvasDecoder ./JpgPlus ./Lerc2Codec ./LercCodec ./Png ./Raw ./TiffDecoder".split(" "),function(A,m,e,r,d,
q,n,l,g,p,c,a,b){function h(a,b){if(!x)throw new r("rasterCoded:decode","lerc decoder is not supported on big endian platform");var c=b.width,d=b.height,f=b.pixelType,h=y(f),g=h.pixelTypeCtor;b=null==b.noDataValue?h.noDataValue:b.noDataValue;for(var h=0,k,l=0,t,e=a.byteLength-10;l<e;){var n=p.decode(a,{inputOffset:l,encodedMaskData:k,returnMask:0===h?!0:!1,returnEncodedMask:0===h?!0:!1,returnFileInfo:!0,pixelType:g,noDataValue:b});if(c&&d&&(n.width!==c||n.height!==d))throw new r("rasterCoded:decode",
"lerc decoded result has width or height different from specified in options");l=n.fileInfo.eofOffset;0===h&&(k=n.encodedMaskData,t=new q({width:n.width,height:n.height,pixels:[],pixelType:f,mask:n.maskData,statistics:[]}));h++;t.addData({pixels:n.pixelData,statistics:{minValue:n.minValue,maxValue:n.maxValue,noDataValue:n.noDataValue}});10<e-l&&(n=String.fromCharCode.apply(null,new Uint8Array(a,l,10)),l=-1<l+n.indexOf("CntZ")?n.indexOf("CntZ"):0)}return t}function k(a,b){if(!x)throw new r("rasterCoded:decode",
"lerc decoder is not supported on big endian platform");var c=0,d=0,f=0,h,k,l,t=a.byteLength-10,e=[],p=b.width;for(b=b.height;d<t;){k=g.decode(a,{inputOffset:d,maskData:h,returnFileInfo:!0});if(p&&b&&(k.width!==p||k.height!==b))throw new r("rasterCoded:decode","lerc2 decoded result has width or height different from what's specified in options");d=k.fileInfo.eofOffset;0===c&&(f=k.fileInfo.numValidPixel,h=k.maskData,l=new q({width:k.width,height:k.height,pixels:[],pixelType:k.fileInfo.pixelType,mask:k.maskData,
statistics:[]}));k.fileInfo.mask&&0<k.fileInfo.mask.numBytes&&e.push(k.maskData);c++;l.addData({pixels:k.pixelData,statistics:{minValue:k.minValue,maxValue:k.maxValue}});10<t-d&&(k=String.fromCharCode.apply(null,new Uint8Array(a,d,10)),d+=-1<k.indexOf("Lerc")?k.indexOf("Lerc"):0)}d=c=a=0;if(1<e.length){d=l.width*l.height;h=new Uint8Array(d);h.set(e[0]);for(a=1;a<e.length;a++)for(f=e[a],c=0;c<d;c++)h[c]&=f[c];for(c=f=0;c<d;c++)f+=h[c];l.mask=h}l.validPixelCount=f;return l}function f(a){a=b.decode(a);
a=new q({width:a.width,height:a.height,pixels:a.pixels,pixelType:a.pixelType.toLowerCase(),mask:a.mask,statistics:null});a.updateStatistics();return a}function D(a){a=l.decode(a);a=new q({width:a.width,height:a.height,pixels:a.pixels,pixelType:"U8",mask:a.mask,statistics:null});a.updateStatistics();return a}function F(a,b){a=new Uint8Array(a);var d=new c(a);a=b.width;var f=b.height;b=a*f;for(var d=d.decode(),h=0,g=0,g=new Uint8Array(b),h=0;h<b;h++)g[h]=d[4*h+3];f=new q({width:a,height:f,pixels:[],
pixelType:"U8",mask:g,statistics:[]});for(h=0;3>h;h++){a=new Uint8Array(b);for(g=0;g<b;g++)a[g]=d[4*g+h];f.addData({pixels:a})}f.updateStatistics();return f}function v(a,b,c,d){return e.__awaiter(this,void 0,void 0,function(){var f,h,g,k;return e.__generator(this,function(l){switch(l.label){case 0:return f=new n,h=e.__assign({applyJpegMask:!1,format:b},c),[4,f.decode(a,h,d)];case 1:return g=l.sent(),k=new q(g),k.updateStatistics(),[2,k]}})})}function u(a){if(null==a)throw new r("rasterCodec:decode",
"parameter encodeddata is required.");a=new Uint8Array(a,0,10);var b="";255===a[0]&&216===a[1]?b="jpg":137===a[0]&&80===a[1]&&78===a[2]&&71===a[3]?b="png":67===a[0]&&110===a[1]&&116===a[2]&&90===a[3]&&73===a[4]&&109===a[5]&&97===a[6]&&103===a[7]&&101===a[8]&&32===a[9]?b="lerc":76===a[0]&&101===a[1]&&114===a[2]&&99===a[3]&&50===a[4]&&32===a[5]?b="lerc2":73===a[0]&&73===a[1]&&42===a[2]&&0===a[3]||77===a[0]&&77===a[1]&&0===a[2]&&42===a[3]?b="tiff":71===a[0]&&73===a[1]&&70===a[2]?b="gif":66===a[0]&&77===
a[1]?b="bmp":-1<String.fromCharCode.apply(null,a).toLowerCase().indexOf("error")&&(b="error");return b}function w(b){var c=null;switch(b){case "lerc":c=h;break;case "lerc2":c=k;break;case "jpg":c=D;break;case "png":c=F;break;case "bsq":case "bip":c=function(c,d){var f=y(d.pixelType).pixelTypeCtor,h=a.decode;c=h(c,{width:d.width,height:d.height,pixelType:f,format:b});d=new q({width:d.width,height:d.height,pixels:c.pixels,pixelType:d.pixelType,mask:c.mask,statistics:null});d.updateStatistics();return d};
break;case "tiff":c=f;break;case "error":c=function(){throw new r("rasterCodec:decode","input data contains error");};break;default:c=function(){throw new r("rasterCodec:decode","unsupported raster format");}}return c}function y(a){var b=null,c=null;switch(a?a.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":c=Math.pow(2,8)-1;b=Uint8Array;break;case "u16":c=c||Math.pow(2,16)-1;b=Uint16Array;break;case "u32":c=c||Math.pow(2,32)-1;b=Uint32Array;break;case "s8":c=c||0-Math.pow(2,7);b=Int8Array;
break;case "s16":c=c||0-Math.pow(2,15);b=Int16Array;break;case "s32":c=c||0-Math.pow(2,31);b=Int32Array;break;default:b=Float32Array}return{pixelTypeCtor:b,noDataValue:c}}Object.defineProperty(m,"__esModule",{value:!0});m.decode=m.getFormat=void 0;var C=d.SetFromValues(["jpg","png","bmp","gif"]),x=function(){var a=new ArrayBuffer(4),b=new Uint8Array(a);(new Uint32Array(a))[0]=1;return 1===b[0]}();m.getFormat=function(a){a=u(a);"lerc2"===a?a="lerc":"error"===a&&(a="");return a};m.decode=function(a,
c,d){return e.__awaiter(this,void 0,void 0,function(){var f,h,g;return e.__generator(this,function(k){switch(k.label){case 0:if(null==a)throw new r("rasterCodec:decode","missing encodeddata parameter.");if(null==c||null==c.width||null==c.height)throw new r("rasterCodec:decode","requires width and height in options parameter.");f=c.format&&c.format.toLowerCase();if("tiff"===f&&c.customOptions)return k=b.decodeTileOrStrip(a,c.customOptions),k=new q({width:k.width,height:k.height,pixels:k.pixels,pixelType:k.pixelType.toLowerCase(),
mask:k.mask,statistics:null}),k.updateStatistics(),[2,k];if(!f||"bsq"!==f&&"bip"!==f)f=u(a);return c.useCanvas&&C.has(f)?[4,v(a,f,c,d)]:[3,2];case 1:return g=k.sent(),[3,3];case 2:h=w(f);c.isPoint&&(c=e.__assign({},c),c.width++,c.height++);g=h(a,c);if(c.isPoint){var l=g,p=void 0;void 0===p&&(p=1);if(l){var n=l.pixels,t=l.width,y=l.mask;if(n&&0!==n.length){var x=n.length,F=t-1,D=l.height-1,m=[],E,K,B,z,H,G,A=q.getPixelArrayConstructor(l.pixelType);if(0===p){for(p=0;p<x;p++){z=n[p];H=new A(F*D);for(E=
0;E<D;E++)for(B=E*t,K=0;K<F;K++)H[E*F+K]=z[B+K];m.push(H)}if(y)for(G=new Uint8Array(F*D),E=0;E<D;E++)for(B=E*t,K=0;K<F;K++)G[E*F+K]=y[B+K]}else{for(p=0;p<x;p++){z=n[p];H=new A(F*D);for(E=0;E<D;E++)for(B=E*t,K=0;K<F;K++)H[E*F+K]=(z[B+K]+z[B+K+1]+z[B+t+K]+z[B+t+K+1])/4;m.push(H)}if(y)for(G=new Uint8Array(F*D),E=0;E<D;E++)for(B=E*t,K=0;K<F;K++)G[E*F+K]=Math.min.apply(null,[y[B+K],y[B+K+1],y[B+t+K],y[B+t+K+1]])}l.width=F;l.height=D;l.mask=G;l.pixels=m}}}k.label=3;case 3:return[2,g]}})})}})},"esri/layers/support/rasterFormats/ImageCanvasDecoder":function(){define("require exports ../../../core/Error ../../../core/promiseUtils ../../../core/promiseUtils ./Zlib".split(" "),
function(A,m,e,r,d,q){return function(){function n(d){d&&(this.canvas=d.canvas,this.ctx=d.ctx||d.canvas&&d.canvas.getContext("2d"))}n.prototype.decode=function(l,g,p){var c=this;if(!l||10>l.byteLength)throw new e("imagecanvasdecoder: decode","required a valid encoded data as input.");var a=g.width,b=g.height,h=g.format,k=g.applyJpegMask;if(k&&(!a||!b))throw new e("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return r.create(function(f,e){var q=
null;"jpg"===h&&k&&(q=n.getMask(l,g));var v=new Blob([new Uint8Array(l)],{type:"jpg"==="image/"+h?"jpeg":h}),u=URL.createObjectURL(v),w=new Image,y;w.src=u;w.onload=function(){URL.revokeObjectURL(u);if(r.isAborted(p))e(d.createAbortError());else{a=w.width;b=w.height;if(c.canvas){if(c.canvas.width!==a||c.canvas.height!==b)c.canvas.width=a,c.canvas.height=b;c.ctx.clearRect(0,0,a,b)}else c.canvas=document.createElement("canvas"),c.canvas.width=a,c.canvas.height=b,c.ctx=c.canvas.getContext("2d");c.ctx.drawImage(w,
0,0);var h=c.ctx.getImageData(0,0,a,b);y=h.data;var k;if(g.renderOnCanvas){if(q)for(k=0;k<q.length;k++)y[4*k+3]=q[k]?255:0;c.ctx.putImageData(h,0,0);f(null)}else{var h=a*b,l=new Uint8Array(h),n=new Uint8Array(h),v=new Uint8Array(h);if(q)for(k=0;k<h;k++)l[k]=y[4*k],n[k]=y[4*k+1],v[k]=y[4*k+2];else for(q=new Uint8Array(h),k=0;k<h;k++)l[k]=y[4*k],n[k]=y[4*k+1],v[k]=y[4*k+2],q[k]=y[4*k+3];f({width:a,height:b,pixels:[l,n,v],mask:q,pixelType:"u8"})}}};w.onerror=function(){URL.revokeObjectURL(u);e("cannot load image")}})};
n.getMask=function(d,g){var l=null;try{var c=new Uint8Array(d);d=0;var a=c.length-2;for(d=Math.ceil(c.length/2);d<a&&(255!==c[d]||217!==c[d+1]);d++);d+=2;if(d<c.length-1)for(var b=(new q(c.subarray(d))).getBytes(),l=new Uint8Array(g.width*g.height),c=g=0;c<b.length;c++)for(a=7;0<=a;a--)l[g++]=b[c]>>a&1}catch(h){}return l};return n}()})},"esri/layers/support/rasterFormats/Zlib":function(){define([],function(){var A=function(){function m(){this.bufferLength=this.pos=0;this.eof=!1;this.buffer=null}m.prototype=
{ensureBuffer:function(e){var r=this.buffer,d=r?r.byteLength:0;if(e<d)return r;for(var q=512;q<e;)q<<=1;e=new Uint8Array(q);for(q=0;q<d;++q)e[q]=r[q];return this.buffer=e},getByte:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(e){var r=this.pos;if(e){this.ensureBuffer(r+e);for(e=r+e;!this.eof&&this.bufferLength<e;)this.readBlock();var d=this.bufferLength;e>d&&(e=d)}else{for(;!this.eof;)this.readBlock();
e=this.bufferLength}this.pos=e;return this.buffer.subarray(r,e)},lookChar:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(e,r,d){for(var q=e+r;this.bufferLength<=q&&!this.eof;)this.readBlock();return new Stream(this.buffer,e,r,
d)},skip:function(e){e||(e=1);this.pos+=e},reset:function(){this.pos=0}};return m}();return function(){function m(d){throw Error(d);}function e(d){var g=0,c=d[g++],a=d[g++];-1!=c&&-1!=a||m("Invalid header in flate stream");8!=(c&15)&&m("Unknown compression method in flate stream");0!=((c<<8)+a)%31&&m("Bad FCHECK in flate stream");a&32&&m("FDICT bit set in flate stream");this.bytes=d;this.bytesPos=g;this.codeBuf=this.codeSize=0;A.call(this)}if(!self||!self.Uint32Array)return null;var r=new Uint32Array([16,
17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),d=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),q=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),n=[new Uint32Array([459008,524368,524304,524568,459024,524400,
524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,
524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,
524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,
524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,
524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,
524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,
524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,
524367,590079]),9],l=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];e.prototype=Object.create(A.prototype);e.prototype.getBits=function(d){for(var g=this.codeSize,c=this.codeBuf,a=this.bytes,b=this.bytesPos,h;g<d;)"undefined"==typeof(h=a[b++])&&m("Bad encoding in flate stream"),c|=h<<g,g+=8;this.codeBuf=c>>d;this.codeSize=
g-=d;this.bytesPos=b;return c&(1<<d)-1};e.prototype.getCode=function(d){var g=d[0],c=d[1];d=this.codeSize;for(var a=this.codeBuf,b=this.bytes,h=this.bytesPos;d<c;){var k;"undefined"==typeof(k=b[h++])&&m("Bad encoding in flate stream");a|=k<<d;d+=8}c=g[a&(1<<c)-1];g=c>>16;c&=65535;(0==d||d<g||0==g)&&m("Bad encoding in flate stream");this.codeBuf=a>>g;this.codeSize=d-g;this.bytesPos=h;return c};e.prototype.generateHuffmanTable=function(d){for(var g=d.length,c=0,a=0;a<g;++a)d[a]>c&&(c=d[a]);for(var b=
1<<c,h=new Uint32Array(b),k=1,f=0,l=2;k<=c;++k,f<<=1,l<<=1)for(var e=0;e<g;++e)if(d[e]==k){for(var n=0,u=f,a=0;a<k;++a)n=n<<1|u&1,u>>=1;for(a=n;a<b;a+=l)h[a]=k<<16|e;++f}return[h,c]};e.prototype.readBlock=function(){function g(a,b,c,d,h){for(a=a.getBits(c)+d;0<a--;)b[f++]=h}var e=this.getBits(3);e&1&&(this.eof=!0);e>>=1;if(0==e){var c=this.bytes,a=this.bytesPos,b;"undefined"==typeof(b=c[a++])&&m("Bad block header in flate stream");var h=b;"undefined"==typeof(b=c[a++])&&m("Bad block header in flate stream");
h|=b<<8;"undefined"==typeof(b=c[a++])&&m("Bad block header in flate stream");e=b;"undefined"==typeof(b=c[a++])&&m("Bad block header in flate stream");(e|b<<8)!=(~h&65535)&&m("Bad uncompressed block length in flate stream");this.codeSize=this.codeBuf=0;b=this.bufferLength;e=this.ensureBuffer(b+h);this.bufferLength=h=b+h;for(var k=b;k<h;++k){if("undefined"==typeof(b=c[a++])){this.eof=!0;break}e[k]=b}this.bytesPos=a}else{if(1==e)a=n,b=l;else if(2==e){e=this.getBits(5)+257;b=this.getBits(5)+1;for(var c=
this.getBits(4)+4,a=Array(r.length),f=0;f<c;)a[r[f++]]=this.getBits(3);a=this.generateHuffmanTable(a);f=c=0;b=e+b;for(h=Array(b);f<b;)k=this.getCode(a),16==k?g(this,h,2,3,c):17==k?g(this,h,3,3,c=0):18==k?g(this,h,7,11,c=0):h[f++]=c=k;a=this.generateHuffmanTable(h.slice(0,e));b=this.generateHuffmanTable(h.slice(e,b))}else m("Unknown block type in flate stream");h=(e=this.buffer)?e.length:0;for(k=this.bufferLength;;){var D=this.getCode(a);if(256>D)k+1>=h&&(e=this.ensureBuffer(k+1),h=e.length),e[k++]=
D;else{if(256==D){this.bufferLength=k;break}var D=D-257,D=d[D],F=D>>16;0<F&&(F=this.getBits(F));c=(D&65535)+F;D=this.getCode(b);D=q[D];F=D>>16;0<F&&(F=this.getBits(F));D=(D&65535)+F;k+c>=h&&(e=this.ensureBuffer(k+c),h=e.length);for(F=0;F<c;++F,++k)e[k]=e[k-D]}}}};return e}()})},"esri/layers/support/rasterFormats/JpgPlus":function(){define(["require","exports","./Jpg","./Zlib"],function(A,m,e,r){return function(){function d(){}d.decode=function(d){var n=new Uint8Array(d),l=new e;l.parse(n);d=l.width;
var g=l.height,p=l.numComponents,c=l.eof,l=l.getData(d,g,!0),a,b=d*g,h=0,k=0,f=0;if(c<n.length-1)for(n=(new r(n.subarray(c))).getBytes(),a=new Uint8Array(b),h=c=0;h<n.length;h++)for(f=7;0<=f;f--)a[c++]=n[h]>>f&1;n=null;if(1===p)n=[l,l,l];else{n=[];for(h=0;3>h;h++)p=new Uint8Array(b),n.push(p);for(k=f=0;k<b;k++)for(h=0;3>h;h++)n[h][k]=l[f++]}return{width:d,height:g,pixels:n,mask:a}};return d}()})},"esri/layers/support/rasterFormats/Jpg":function(){define([],function(){var A=function(){function m(e){this.message=
"JPEG error: "+e}m.prototype=Error();m.prototype.name="JpegError";return m.constructor=m}();return function(){function m(){this.decodeTransform=null;this.colorTransform=-1}function e(d,g){for(var l=0,c=[],a,b,h=16;0<h&&!d[h-1];)h--;c.push({children:[],index:0});var k=c[0],f;for(a=0;a<h;a++){for(b=0;b<d[a];b++){k=c.pop();for(k.children[k.index]=g[l];0<k.index;)k=c.pop();k.index++;for(c.push(k);c.length<=a;)c.push(f={children:[],index:0}),k.children[k.index]=f.children,k=f;l++}a+1<h&&(c.push(f={children:[],
index:0}),k.children[k.index]=f.children,k=f)}return c[0].children}function r(d,g,e,c,a,b,h,k,f){function l(){if(0<H)return H--,B>>H&1;B=d[g++];if(255===B){var a=d[g++];if(a)throw new A("unexpected marker "+(B<<8|a).toString(16));}H=7;return B>>>7}function p(a){for(;;){a=a[l()];if("number"===typeof a)return a;if("object"!==typeof a)throw new A("invalid huffman sequence");}}function v(a){for(var b=0;0<a;)b=b<<1|l(),a--;return b}function u(a){if(1===a)return 1===l()?1:-1;var b=v(a);return b>=1<<a-1?
b:b+(-1<<a)+1}function r(a,b){var c=p(a.huffmanTableDC),c=0===c?0:u(c);a.blockData[b]=a.pred+=c;for(c=1;64>c;){var d=p(a.huffmanTableAC),f=d&15,d=d>>4;if(0===f){if(15>d)break;c+=16}else c+=d,a.blockData[b+n[c]]=u(f),c++}}function y(a,b){var c=p(a.huffmanTableDC),c=0===c?0:u(c)<<f;a.blockData[b]=a.pred+=c}function C(a,b){a.blockData[b]|=l()<<f}function x(a,c){if(0<G)G--;else for(var d=b;d<=h;){var k=p(a.huffmanTableAC),g=k&15,k=k>>4;if(0===g){if(15>k){G=v(k)+(1<<k)-1;break}d+=16}else d+=k,a.blockData[c+
n[d]]=u(g)*(1<<f),d++}}function t(a,c){for(var d=b,k=0,g;d<=h;){g=n[d];switch(K){case 0:k=p(a.huffmanTableAC);g=k&15;k>>=4;if(0===g)15>k?(G=v(k)+(1<<k),K=4):(k=16,K=1);else{if(1!==g)throw new A("invalid ACn encoding");I=u(g);K=k?2:3}continue;case 1:case 2:a.blockData[c+g]?a.blockData[c+g]+=l()<<f:(k--,0===k&&(K=2===K?3:0));break;case 3:a.blockData[c+g]?a.blockData[c+g]+=l()<<f:(a.blockData[c+g]=I<<f,K=0);break;case 4:a.blockData[c+g]&&(a.blockData[c+g]+=l()<<f)}d++}4===K&&(G--,0===G&&(K=0))}var m=
e.mcusPerLine,z=g,B=0,H=0,G=0,K=0,I,J=c.length,L,M,R,V,W;k=e.progressive?0===b?0===k?y:C:0===k?x:t:r;var S=0;e=1===J?c[0].blocksPerLine*c[0].blocksPerColumn:m*e.mcusPerColumn;for(var T,Q;S<e;){var N=a?Math.min(e-S,a):e;for(M=0;M<J;M++)c[M].pred=0;G=0;if(1===J)for(L=c[0],W=0;W<N;W++)k(L,64*((L.blocksPerLine+1)*(S/L.blocksPerLine|0)+S%L.blocksPerLine)),S++;else for(W=0;W<N;W++){for(M=0;M<J;M++)for(L=c[M],T=L.h,Q=L.v,R=0;R<Q;R++)for(V=0;V<T;V++)k(L,64*((L.blocksPerLine+1)*((S/m|0)*L.v+R)+(S%m*L.h+V)));
S++}H=0;(L=q(d,g))&&L.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+L.invalid),g=L.offset);L=L&&L.marker;if(!L||65280>=L)throw new A("marker was not found");if(65488<=L&&65495>=L)g+=2;else break}(L=q(d,g))&&L.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+L.invalid),g=L.offset);return g-z}function d(d,g){d=g.blocksPerLine;for(var l=g.blocksPerColumn,c=new Int16Array(64),a=0;a<l;a++)for(var b=0;b<d;b++){var h=64*((g.blocksPerLine+1)*a+b),k=
c,f=g.quantizationTable,e=g.blockData,n=void 0,v=void 0,u=void 0,r=void 0,q=void 0,C=void 0,x=void 0,t=void 0,m=void 0,z=t=void 0,B=x=v=C=void 0,H=void 0,m=void 0;if(!f)throw new A("missing required Quantization Table.");for(var G=0;64>G;G+=8)m=e[h+G],t=e[h+G+1],z=e[h+G+2],C=e[h+G+3],v=e[h+G+4],x=e[h+G+5],B=e[h+G+6],H=e[h+G+7],m*=f[G],0===(t|z|C|v|x|B|H)?(m=5793*m+512>>10,k[G]=m,k[G+1]=m,k[G+2]=m,k[G+3]=m,k[G+4]=m,k[G+5]=m,k[G+6]=m,k[G+7]=m):(t*=f[G+1],z*=f[G+2],C*=f[G+3],v*=f[G+4],x*=f[G+5],B*=f[G+
6],H*=f[G+7],n=5793*m+128>>8,v=5793*v+128>>8,u=z,r=B,q=2896*(t-H)+128>>8,t=2896*(t+H)+128>>8,C<<=4,x<<=4,n=n+v+1>>1,v=n-v,m=3784*u+1567*r+128>>8,u=1567*u-3784*r+128>>8,r=m,q=q+x+1>>1,x=q-x,t=t+C+1>>1,C=t-C,n=n+r+1>>1,r=n-r,v=v+u+1>>1,u=v-u,m=2276*q+3406*t+2048>>12,q=3406*q-2276*t+2048>>12,t=m,m=799*C+4017*x+2048>>12,C=4017*C-799*x+2048>>12,x=m,k[G]=n+t,k[G+7]=n-t,k[G+1]=v+x,k[G+6]=v-x,k[G+2]=u+C,k[G+5]=u-C,k[G+3]=r+q,k[G+4]=r-q);for(f=0;8>f;++f)m=k[f],t=k[f+8],z=k[f+16],C=k[f+24],v=k[f+32],x=k[f+
40],B=k[f+48],H=k[f+56],0===(t|z|C|v|x|B|H)?(m=5793*m+8192>>14,m=-2040>m?0:2024<=m?255:m+2056>>4,e[h+f]=m,e[h+f+8]=m,e[h+f+16]=m,e[h+f+24]=m,e[h+f+32]=m,e[h+f+40]=m,e[h+f+48]=m,e[h+f+56]=m):(n=5793*m+2048>>12,v=5793*v+2048>>12,u=z,r=B,q=2896*(t-H)+2048>>12,t=2896*(t+H)+2048>>12,n=(n+v+1>>1)+4112,v=n-v,m=3784*u+1567*r+2048>>12,u=1567*u-3784*r+2048>>12,r=m,q=q+x+1>>1,x=q-x,t=t+C+1>>1,C=t-C,n=n+r+1>>1,r=n-r,v=v+u+1>>1,u=v-u,m=2276*q+3406*t+2048>>12,q=3406*q-2276*t+2048>>12,t=m,m=799*C+4017*x+2048>>12,
C=4017*C-799*x+2048>>12,x=m,m=n+t,H=n-t,t=v+x,B=v-x,z=u+C,x=u-C,C=r+q,v=r-q,m=16>m?0:4080<=m?255:m>>4,t=16>t?0:4080<=t?255:t>>4,z=16>z?0:4080<=z?255:z>>4,C=16>C?0:4080<=C?255:C>>4,v=16>v?0:4080<=v?255:v>>4,x=16>x?0:4080<=x?255:x>>4,B=16>B?0:4080<=B?255:B>>4,H=16>H?0:4080<=H?255:H>>4,e[h+f]=m,e[h+f+8]=t,e[h+f+16]=z,e[h+f+24]=C,e[h+f+32]=v,e[h+f+40]=x,e[h+f+48]=B,e[h+f+56]=H)}return g.blockData}function q(d,g,e){var c=d.length-1;e=e<g?e:g;if(g>=c)return null;var a=d[g]<<8|d[g+1];if(65472<=a&&65534>=
a)return{invalid:null,marker:a,offset:g};for(g=d[e]<<8|d[e+1];!(65472<=g&&65534>=g);){if(++e>=c)return null;g=d[e]<<8|d[e+1]}return{invalid:a.toString(16),marker:g,offset:e}}if(!self||!self.Uint8ClampedArray)return null;var n=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);m.prototype={parse:function(l){function g(){var b=l[a]<<8|l[a+1];a+=2;return b}
function p(){var b=g(),b=a+b-2,c=q(l,b,a);c&&c.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+c.invalid),b=c.offset);b=l.subarray(a,b);a+=b.length;return b}function c(a){for(var b=Math.ceil(a.samplesPerLine/8/a.maxH),c=Math.ceil(a.scanLines/8/a.maxV),d=0;d<a.components.length;d++){z=a.components[d];var f=Math.ceil(Math.ceil(a.samplesPerLine/8)*z.h/a.maxH),h=Math.ceil(Math.ceil(a.scanLines/8)*z.v/a.maxV);z.blockData=new Int16Array(64*c*z.v*(b*z.h+1));z.blocksPerLine=f;z.blocksPerColumn=
h}a.mcusPerLine=b;a.mcusPerColumn=c}var a=0,b=null,h=null,k,f,m=[],F=[],v=[],u=g();if(65496!==u)throw new A("SOI not found");for(u=g();65497!==u;){var w,y;switch(u){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:w=p();65504===u&&74===w[0]&&70===w[1]&&73===w[2]&&70===w[3]&&0===w[4]&&(b={version:{major:w[5],minor:w[6]},densityUnits:w[7],xDensity:w[8]<<8|w[9],yDensity:w[10]<<
8|w[11],thumbWidth:w[12],thumbHeight:w[13],thumbData:w.subarray(14,14+3*w[12]*w[13])});65518===u&&65===w[0]&&100===w[1]&&111===w[2]&&98===w[3]&&101===w[4]&&(h={version:w[5]<<8|w[6],flags0:w[7]<<8|w[8],flags1:w[9]<<8|w[10],transformCode:w[11]});break;case 65499:for(var u=g()+a-2,C;a<u;){var x=l[a++],t=new Uint16Array(64);if(0===x>>4)for(w=0;64>w;w++)C=n[w],t[C]=l[a++];else if(1===x>>4)for(w=0;64>w;w++)C=n[w],t[C]=g();else throw new A("DQT - invalid table spec");m[x&15]=t}break;case 65472:case 65473:case 65474:if(k)throw new A("Only single frame JPEGs supported");
g();k={};k.extended=65473===u;k.progressive=65474===u;k.precision=l[a++];k.scanLines=g();k.samplesPerLine=g();k.components=[];k.componentIds={};w=l[a++];for(u=t=x=0;u<w;u++){C=l[a];y=l[a+1]>>4;var E=l[a+1]&15;x<y&&(x=y);t<E&&(t=E);y=k.components.push({h:y,v:E,quantizationId:l[a+2],quantizationTable:null});k.componentIds[C]=y-1;a+=3}k.maxH=x;k.maxV=t;c(k);break;case 65476:C=g();for(u=2;u<C;){x=l[a++];t=new Uint8Array(16);for(w=y=0;16>w;w++,a++)y+=t[w]=l[a];E=new Uint8Array(y);for(w=0;w<y;w++,a++)E[w]=
l[a];u+=17+y;(0===x>>4?v:F)[x&15]=e(t,E)}break;case 65501:g();f=g();break;case 65498:g();C=l[a++];w=[];for(var z,u=0;u<C;u++)x=k.componentIds[l[a++]],z=k.components[x],x=l[a++],z.huffmanTableDC=v[x>>4],z.huffmanTableAC=F[x&15],w.push(z);u=l[a++];C=l[a++];x=l[a++];u=r(l,a,k,w,f,u,C,x>>4,x&15);a+=u;break;case 65535:255!==l[a]&&a--;break;default:if(255===l[a-3]&&192<=l[a-2]&&254>=l[a-2])a-=3;else throw new A("unknown marker "+u.toString(16));}u=g()}this.width=k.samplesPerLine;this.height=k.scanLines;
this.jfif=b;this.eof=a;this.adobe=h;this.components=[];for(u=0;u<k.components.length;u++){z=k.components[u];if(b=m[z.quantizationId])z.quantizationTable=b;this.components.push({output:d(k,z),scaleX:z.h/k.maxH,scaleY:z.v/k.maxV,blocksPerLine:z.blocksPerLine,blocksPerColumn:z.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(d,g){var e=this.width/d,c=this.height/g,a,b,h,k,f,l,n=0,v,u=this.components.length,r=d*g*u,q=new Uint8ClampedArray(r),C=new Uint32Array(d);
for(l=0;l<u;l++){a=this.components[l];b=a.scaleX*e;h=a.scaleY*c;n=l;v=a.output;k=a.blocksPerLine+1<<3;for(f=0;f<d;f++)a=0|f*b,C[f]=(a&4294967288)<<3|a&7;for(b=0;b<g;b++)for(a=0|b*h,a=k*(a&4294967288)|(a&7)<<3,f=0;f<d;f++)q[n]=v[a+C[f]],n+=u}if(g=this.decodeTransform)for(l=0;l<r;)for(d=a=0;a<u;a++,l++,d+=2)q[l]=(q[l]*g[d]>>8)+g[d+1];return q},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0===this.colorTransform?!1:!0:1===this.colorTransform?
!0:!1},_convertYccToRgb:function(d){for(var g,e,c,a=0,b=d.length;a<b;a+=3)g=d[a],e=d[a+1],c=d[a+2],d[a]=g-179.456+1.402*c,d[a+1]=g+135.459-.344*e-.714*c,d[a+2]=g-226.816+1.772*e;return d},_convertYcckToRgb:function(d){for(var g,e,c,a,b=0,h=0,k=d.length;h<k;h+=4)g=d[h],e=d[h+1],c=d[h+2],a=d[h+3],d[b++]=-122.67195406894+e*(-6.60635669420364E-5*e+4.37130475926232E-4*c-5.4080610064599E-5*g+4.8449797120281E-4*a-.154362151871126)+c*(-9.57964378445773E-4*c+8.17076911346625E-4*g-.00477271405408747*a+1.53380253221734)+
g*(9.61250184130688E-4*g-.00266257332283933*a+.48357088451265)+a*(-3.36197177618394E-4*a+.484791561490776),d[b++]=107.268039397724+e*(2.19927104525741E-5*e-6.40992018297945E-4*c+6.59397001245577E-4*g+4.26105652938837E-4*a-.176491792462875)+c*(-7.78269941513683E-4*c+.00130872261408275*g+7.70482631801132E-4*a-.151051492775562)+g*(.00126935368114843*g-.00265090189010898*a+.25802910206845)+a*(-3.18913117588328E-4*a-.213742400323665),d[b++]=-20.810012546947+e*(-5.70115196973677E-4*e-2.63409051004589E-5*
c+.0020741088115012*g-.00288260236853442*a+.814272968359295)+c*(-1.53496057440975E-5*c-1.32689043961446E-4*g+5.60833691242812E-4*a-.195152027534049)+g*(.00174418132927582*g-.00255243321439347*a+.116935020465145)+a*(-3.43531996510555E-4*a+.24165260232407);return d},_convertYcckToCmyk:function(d){for(var g,e,c,a=0,b=d.length;a<b;a+=4)g=d[a],e=d[a+1],c=d[a+2],d[a]=434.456-g-1.402*c,d[a+1]=119.541-g+.344*e+.714*c,d[a+2]=481.816-g-1.772*e;return d},_convertCmykToRgb:function(d){for(var g,e,c,a,b=0,h=1/
255,k=0,f=d.length;k<f;k+=4)g=d[k]*h,e=d[k+1]*h,c=d[k+2]*h,a=d[k+3]*h,d[b++]=255+g*(-4.387332384609988*g+54.48615194189176*e+18.82290502165302*c+212.25662451639585*a-285.2331026137004)+e*(1.7149763477362134*e-5.6096736904047315*c-17.873870861415444*a-5.497006427196366)+c*(-2.5217340131683033*c-21.248923337353073*a+17.5119270841813)-a*(21.86122147463605*a+189.48180835922747),d[b++]=255+g*(8.841041422036149*g+60.118027045597366*e+6.871425592049007*c+31.159100130055922*a-79.2970844816548)+e*(-15.310361306967817*
e+17.575251261109482*c+131.35250912493976*a-190.9453302588951)+c*(4.444339102852739*c+9.8632861493405*a-24.86741582555878)-a*(20.737325471181034*a+187.80453709719578),d[b++]=255+g*(.8842522430003296*g+8.078677503112928*e+30.89978309703729*c-.23883238689178934*a-14.183576799673286)+e*(10.49593273432072*e+63.02378494754052*c+50.606957656360734*a-112.23884253719248)+c*(.03296041114873217*c+115.60384449646641*a-193.58209356861505)-a*(22.33816807309886*a+180.12613974708367);return d},getData:function(d,
g,e){if(4<this.numComponents)throw new A("Unsupported color mode");d=this._getLinearizedBlockData(d,g);if(1===this.numComponents&&e){e=d.length;g=new Uint8ClampedArray(3*e);for(var c=0,a=0;a<e;a++){var b=d[a];g[c++]=b;g[c++]=b;g[c++]=b}return g}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(d);if(4===this.numComponents){if(this._isColorConversionNeeded())return e?this._convertYcckToRgb(d):this._convertYcckToCmyk(d);if(e)return this._convertCmykToRgb(d)}return d}};
return m}()})},"esri/layers/support/rasterFormats/Lerc2Codec":function(){define([],function(){var A={unstuff:function(e,d,q,n,l,g,p,c){var a=(1<<q)-1,b=0,h,k=0,f,r;e[e.length-1]<<=8*(4*e.length-Math.ceil(q*n/8));if(l)for(h=0;h<n;h++)0===k&&(r=e[b++],k=32),k>=q?(f=r>>>k-q&a,k-=q):(k=q-k,f=(r&a)<<k&a,r=e[b++],k=32-k,f+=r>>>k),d[h]=l[f];else for(l=Math.ceil((c-g)/p),h=0;h<n;h++)0===k&&(r=e[b++],k=32),k>=q?(f=r>>>k-q&a,k-=q):(k=q-k,f=(r&a)<<k&a,r=e[b++],k=32-k,f+=r>>>k),d[h]=f<l?g+f*p:c},unstuffLUT:function(e,
d,q,n,l,g){var p=(1<<d)-1,c=0,a=0,b=0,h=b=0,k,f=[];e[e.length-1]<<=8*(4*e.length-Math.ceil(d*q/8));for(var r=Math.ceil((g-n)/l),a=0;a<q;a++)0===b&&(k=e[c++],b=32),b>=d?(h=k>>>b-d&p,b-=d):(b=d-b,h=(k&p)<<b&p,k=e[c++],b=32-b,h+=k>>>b),f[a]=h<r?n+h*l:g;f.unshift(n);return f},unstuff2:function(e,d,q,n,l,g,p,c){var a=(1<<q)-1,b=0,h,k=0,f=0,r,m,v;if(l)for(h=0;h<n;h++)0===k&&(m=e[b++],k=32,f=0),k>=q?(r=m>>>f&a,k-=q,f+=q):(v=q-k,r=m>>>f&a,m=e[b++],k=32-v,r|=(m&(1<<v)-1)<<q-v,f=v),d[h]=l[r];else for(l=Math.ceil((c-
g)/p),h=0;h<n;h++)0===k&&(m=e[b++],k=32,f=0),k>=q?(r=m>>>f&a,k-=q,f+=q):(v=q-k,r=m>>>f&a,m=e[b++],k=32-v,r|=(m&(1<<v)-1)<<q-v,f=v),d[h]=r<l?g+r*p:c;return d},unstuffLUT2:function(e,d,q,n,l,g){for(var p=(1<<d)-1,c=0,a=0,b=0,h=0,k=0,f=0,r,m=[],v=Math.ceil((g-n)/l),a=0;a<q;a++)0===h&&(r=e[c++],h=32,f=0),h>=d?(k=r>>>f&p,h-=d,f+=d):(b=d-h,k=r>>>f&p,r=e[c++],h=32-b,k|=(r&(1<<b)-1)<<d-b,f=b),m[a]=k<v?n+k*l:g;m.unshift(n);return m},originalUnstuff:function(e,d,q,n){var l=(1<<q)-1,g=0,p,c=0,a,b;e[e.length-
1]<<=8*(4*e.length-Math.ceil(q*n/8));for(p=0;p<n;p++)0===c&&(b=e[g++],c=32),c>=q?(a=b>>>c-q&l,c-=q):(c=q-c,a=(b&l)<<c&l,b=e[g++],c=32-c,a+=b>>>c),d[p]=a;return d},originalUnstuff2:function(e,d,q,n){var l=(1<<q)-1,g=0,p,c=0,a=0,b,h,k;for(p=0;p<n;p++)0===c&&(h=e[g++],c=32,a=0),c>=q?(b=h>>>a&l,c-=q,a+=q):(k=q-c,b=h>>>a&l,h=e[g++],c=32-k,b|=(h&(1<<k)-1)<<q-k,a=k),d[p]=b;return d}},m={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(e){for(var d=65535,r=65535,n=e.length,l=Math.floor(n/2),g=0;l;){var p=
359<=l?359:l,l=l-p;do d+=e[g++]<<8,r+=d+=e[g++];while(--p);d=(d&65535)+(d>>>16);r=(r&65535)+(r>>>16)}n&1&&(r+=d+=e[g]<<8);return((r&65535)+(r>>>16)<<16|(d&65535)+(d>>>16))>>>0},readHeaderInfo:function(e,d){var r=d.ptr,n=new Uint8Array(e,r,6),l={};l.fileIdentifierString=String.fromCharCode.apply(null,n);if(0!==l.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+l.fileIdentifierString;var r=r+6,n=new DataView(e,r,8),g=n.getInt32(0,!0);l.fileVersion=
g;r+=4;3<=g&&(l.checksum=n.getUint32(4,!0),r+=4);n=new DataView(e,r,12);l.height=n.getUint32(0,!0);l.width=n.getUint32(4,!0);r+=8;4<=g?(l.numDims=n.getUint32(8,!0),r+=4):l.numDims=1;n=new DataView(e,r,40);l.numValidPixel=n.getUint32(0,!0);l.microBlockSize=n.getInt32(4,!0);l.blobSize=n.getInt32(8,!0);l.imageType=n.getInt32(12,!0);l.maxZError=n.getFloat64(16,!0);l.zMin=n.getFloat64(24,!0);l.zMax=n.getFloat64(32,!0);r+=40;d.headerInfo=l;d.ptr=r;if(3<=g&&(e=this.computeChecksumFletcher32(new Uint8Array(e,
r-(4<=g?52:48),l.blobSize-14)),e!==l.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(e,d){var r=d.headerInfo,n=this.getDataTypeArray(r.imageType),l=r.numDims*this.getDataTypeSize(r.imageType),g=this.readSubArray(e,d.ptr,n,l);e=this.readSubArray(e,d.ptr+l,n,l);d.ptr+=2*l;l=!0;for(d=0;d<r.numDims;d++)if(g[d]!==e[d]){l=!1;break}r.minValues=g;r.maxValues=e;return l},readSubArray:function(e,d,q,n){if(q===Uint8Array)e=new Uint8Array(e,d,n);else{var l=new ArrayBuffer(n);(new Uint8Array(l)).set(new Uint8Array(e,
d,n));e=new q(l)}return e},readMask:function(e,d){var r=d.ptr,n=d.headerInfo,l=n.width*n.height,g=n.numValidPixel,p=new DataView(e,r,4),n={};n.numBytes=p.getUint32(0,!0);r+=4;if((0===g||l===g)&&0!==n.numBytes)throw"invalid mask";if(0===g)g=new Uint8Array(Math.ceil(l/8)),n.bitset=g,p=new Uint8Array(l),d.pixels.resultMask=p,r+=n.numBytes;else if(0<n.numBytes){g=new Uint8Array(Math.ceil(l/8));p=new DataView(e,r,n.numBytes);e=p.getInt16(0,!0);var c=2,a=0,b=0;do{if(0<e)for(;e--;)g[a++]=p.getUint8(c++);
else for(b=p.getUint8(c++),e=-e;e--;)g[a++]=b;e=p.getInt16(c,!0);c+=2}while(c<n.numBytes);if(-32768!==e||a<g.length)throw"Unexpected end of mask RLE encoding";p=new Uint8Array(l);for(c=c=e=0;c<l;c++)c&7?(e=g[c>>3],e<<=c&7):e=g[c>>3],e&128&&(p[c]=1);d.pixels.resultMask=p;n.bitset=g;r+=n.numBytes}d.ptr=r;d.mask=n;return!0},readDataOneSweep:function(e,d,q){var n=d.ptr,l=d.headerInfo,g=l.numDims,p=l.width*l.height,l=l.numValidPixel*m.getDataTypeSize(l.imageType)*g,c=d.pixels.resultMask;if(q===Uint8Array)e=
new Uint8Array(e,n,l);else{var a=new ArrayBuffer(l);(new Uint8Array(a)).set(new Uint8Array(e,n,l));e=new q(a)}if(e.length===p*g)d.pixels.resultPixels=e;else{d.pixels.resultPixels=new q(p*g);var b=a=q=0,h=0;if(1<g)for(b=0;b<g;b++)for(h=b*p,a=0;a<p;a++)c[a]&&(d.pixels.resultPixels[h+a]=e[q++]);else for(a=0;a<p;a++)c[a]&&(d.pixels.resultPixels[a]=e[q++])}d.ptr=n+l;return!0},readHuffmanTree:function(r,d){var q=this.HUFFMAN_LUT_BITS_MAX,n=new DataView(r,d.ptr,16);d.ptr+=16;if(2>n.getInt32(0,!0))throw"unsupported Huffman version";
var l=n.getInt32(4,!0),g=n.getInt32(8,!0),n=n.getInt32(12,!0);if(g>=n)return!1;var p=new Uint32Array(n-g);m.decodeBits(r,d,p);var c=[],a,b,h;for(a=g;a<n;a++)b=a-(a<l?0:l),c[b]={first:p[a-g],second:null};a=r.byteLength-d.ptr;p=new ArrayBuffer(4*Math.ceil(a/4));(new Uint8Array(p)).set(new Uint8Array(r,d.ptr,a));r=new Uint32Array(p);d=0;var k,p=0;k=r[0];for(a=g;a<n;a++)b=a-(a<l?0:l),h=c[b].first,0<h&&(c[b].second=k<<d>>>32-h,32-d>=h?(d+=h,32===d&&(d=0,p++,k=r[p])):(d+=h-32,p++,k=r[p],c[b].second|=k>>>
32-d));var f=k=0,D=new e;for(a=0;a<c.length;a++)void 0!==c[a]&&(k=Math.max(k,c[a].first));var f=k>=q?q:k,q=[],F,v;for(a=g;a<n;a++)if(b=a-(a<l?0:l),h=c[b].first,0<h)if(g=[h,b],h<=f)for(b=c[b].second<<f-h,F=1<<f-h,h=0;h<F;h++)q[b|h]=g;else for(b=c[b].second,F=D,--h;0<=h;h--)(v=b>>>h&1)?(F.right||(F.right=new e),F=F.right):(F.left||(F.left=new e),F=F.left),0!==h||F.val||(F.val=g[1]);return{decodeLut:q,numBitsLUTQick:f,numBitsLUT:k,tree:D,stuffedData:r,srcPtr:p,bitPos:d}},readHuffman:function(e,d,q){var n=
d.headerInfo,l=n.numDims,g=d.headerInfo.height,p=d.headerInfo.width,c=p*g,a=this.readHuffmanTree(e,d);e=a.decodeLut;var b=a.tree,h=a.stuffedData,k=a.srcPtr,f=a.bitPos,r=a.numBitsLUTQick,a=a.numBitsLUT,m=0===d.headerInfo.imageType?128:0,v,u,w=d.pixels.resultMask,y,C,x,t,E,z,B=0;0<f&&(k++,f=0);var H=h[k],G=1===d.encodeMode,K=new q(c*l),I=K,J;for(J=0;J<n.numDims;J++){1<l&&(I=new q(K.buffer,c*J,c),B=0);if(d.headerInfo.numValidPixel===p*g)for(x=E=0;x<g;x++)for(t=0;t<p;t++,E++){u=0;v=y=H<<f>>>32-r;32-f<
r&&(v=y|=h[k+1]>>>64-f-r);if(e[v])u=e[v][1],f+=e[v][0];else for(v=y=H<<f>>>32-a,32-f<a&&(v=y|=h[k+1]>>>64-f-a),v=b,z=0;z<a;z++)if(v=(C=y>>>a-z-1&1)?v.right:v.left,!v.left&&!v.right){u=v.val;f=f+z+1;break}32<=f&&(f-=32,k++,H=h[k]);u-=m;G?(u=0<t?u+B:0<x?u+I[E-p]:u+B,u&=255,B=I[E]=u):I[E]=u}else for(x=E=0;x<g;x++)for(t=0;t<p;t++,E++)if(w[E]){u=0;v=y=H<<f>>>32-r;32-f<r&&(v=y|=h[k+1]>>>64-f-r);if(e[v])u=e[v][1],f+=e[v][0];else for(v=y=H<<f>>>32-a,32-f<a&&(v=y|=h[k+1]>>>64-f-a),v=b,z=0;z<a;z++)if(v=(C=
y>>>a-z-1&1)?v.right:v.left,!v.left&&!v.right){u=v.val;f=f+z+1;break}32<=f&&(f-=32,k++,H=h[k]);u-=m;G?(u=0<t&&w[E-1]?u+B:0<x&&w[E-p]?u+I[E-p]:u+B,u&=255,B=I[E]=u):I[E]=u}d.ptr=d.ptr+4*(k+1)+(0<f?4:0)}d.pixels.resultPixels=K},decodeBits:function(e,d,q,n,l){var g=d.headerInfo,p=g.fileVersion,c=0,a=new DataView(e,d.ptr,5<=e.byteLength-d.ptr?5:e.byteLength-d.ptr),b=a.getUint8(0);c++;var h=b>>6,k=0===h?4:3-h,f=0<(b&32)?!0:!1,h=b&31,b=0;if(1===k)b=a.getUint8(c),c++;else if(2===k)b=a.getUint16(c,!0),c+=
2;else if(4===k)b=a.getUint32(c,!0),c+=4;else throw"Invalid valid pixel count type";var k=2*g.maxZError,r,m;l=1<g.numDims?g.maxValues[l]:g.zMax;if(f){d.counter.lut++;f=a.getUint8(c);c++;g=Math.ceil((f-1)*h/8);r=Math.ceil(g/4);r=new ArrayBuffer(4*r);m=new Uint8Array(r);d.ptr+=c;m.set(new Uint8Array(e,d.ptr,g));c=new Uint32Array(r);d.ptr+=g;for(a=0;f-1>>>a;)a++;g=Math.ceil(b*a/8);r=Math.ceil(g/4);r=new ArrayBuffer(4*r);m=new Uint8Array(r);m.set(new Uint8Array(e,d.ptr,g));e=new Uint32Array(r);d.ptr+=
g;d=3<=p?A.unstuffLUT2(c,h,f-1,n,k,l):A.unstuffLUT(c,h,f-1,n,k,l);3<=p?A.unstuff2(e,q,a,b,d):A.unstuff(e,q,a,b,d)}else d.counter.bitstuffer++,a=h,d.ptr+=c,0<a&&(g=Math.ceil(b*a/8),r=Math.ceil(g/4),r=new ArrayBuffer(4*r),m=new Uint8Array(r),m.set(new Uint8Array(e,d.ptr,g)),e=new Uint32Array(r),d.ptr+=g,3<=p?null==n?A.originalUnstuff2(e,q,a,b):A.unstuff2(e,q,a,b,!1,n,k,l):null==n?A.originalUnstuff(e,q,a,b):A.unstuff(e,q,a,b,!1,n,k,l))},readTiles:function(e,d,q){var n=d.headerInfo,l=n.width,g=n.height,
p=n.microBlockSize,c=n.imageType,a=m.getDataTypeSize(c),b=Math.ceil(l/p),h=Math.ceil(g/p);d.pixels.numBlocksY=h;d.pixels.numBlocksX=b;for(var k=d.pixels.ptr=0,f=0,r=0,F=0,v=0,u=0,w=0,y=0,C=0,x=0,t=0,E=0,z=0,w=z=w=0,B,H=new q(p*p),G=g%p||p,K=l%p||p,I=n.numDims,J,L=d.pixels.resultMask,M=d.pixels.resultPixels,R=5<=n.fileVersion?14:15,A=n.zMax,r=0;r<h;r++)for(v=r!==h-1?p:G,F=0;F<b;F++)for(u=F!==b-1?p:K,t=r*l*p+F*p,E=l-u,J=0;J<I;J++){1<I?(z=M,t=r*l*p+F*p,M=new q(d.pixels.resultPixels.buffer,l*g*J*a,l*
g),A=n.maxValues[J]):z=null;w=e.byteLength-d.ptr;k=new DataView(e,d.ptr,Math.min(10,w));f={};w=0;y=k.getUint8(0);w++;B=5<=n.fileVersion?y&4:0;C=y>>6&255;x=y>>2&R;if(x!==(F*p>>3&R))throw"integrity issue";if(B&&0===J)throw"integrity issue";y&=3;if(3<y)throw d.ptr+=w,"Invalid block encoding ("+y+")";if(2===y){if(B)if(L)for(k=0;k<v;k++)for(f=0;f<u;f++)L[t]&&(M[t]=z[t]),t++;else for(k=0;k<v;k++)for(f=0;f<u;f++)M[t]=z[t],t++;d.counter.constant++;d.ptr+=w}else if(0===y){if(B)throw"integrity issue";d.counter.uncompressed++;
d.ptr+=w;z=v*u*a;w=e.byteLength-d.ptr;z=z<w?z:w;w=new ArrayBuffer(0===z%a?z:z+a-z%a);B=new Uint8Array(w);B.set(new Uint8Array(e,d.ptr,z));w=new q(w);z=0;if(L)for(k=0;k<v;k++){for(f=0;f<u;f++)L[t]&&(M[t]=w[z++]),t++;t+=E}else for(k=0;k<v;k++){for(f=0;f<u;f++)M[t++]=w[z++];t+=E}d.ptr+=z*a}else if(C=m.getDataTypeUsed(B&&6>c?4:c,C),x=m.getOnePixel(f,w,C,k),w+=m.getDataTypeSize(C),3===y)if(d.ptr+=w,d.counter.constantoffset++,L)for(k=0;k<v;k++){for(f=0;f<u;f++)L[t]&&(M[t]=B?Math.min(A,z[t]+x):x),t++;t+=
E}else for(k=0;k<v;k++){for(f=0;f<u;f++)M[t]=B?Math.min(A,z[t]+x):x,t++;t+=E}else if(d.ptr+=w,m.decodeBits(e,d,H,x,J),w=0,B)if(L)for(k=0;k<v;k++){for(f=0;f<u;f++)L[t]&&(M[t]=H[w++]+z[t]),t++;t+=E}else for(k=0;k<v;k++){for(f=0;f<u;f++)M[t]=H[w++]+z[t],t++;t+=E}else if(L)for(k=0;k<v;k++){for(f=0;f<u;f++)L[t]&&(M[t]=H[w++]),t++;t+=E}else for(k=0;k<v;k++){for(f=0;f<u;f++)M[t++]=H[w++];t+=E}}},formatFileInfo:function(e){return{fileIdentifierString:e.headerInfo.fileIdentifierString,fileVersion:e.headerInfo.fileVersion,
imageType:e.headerInfo.imageType,height:e.headerInfo.height,width:e.headerInfo.width,numValidPixel:e.headerInfo.numValidPixel,microBlockSize:e.headerInfo.microBlockSize,blobSize:e.headerInfo.blobSize,maxZError:e.headerInfo.maxZError,pixelType:m.getPixelType(e.headerInfo.imageType),eofOffset:e.eofOffset,mask:e.mask?{numBytes:e.mask.numBytes}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,maxValue:e.headerInfo.zMax,minValue:e.headerInfo.zMin,noDataValue:e.noDataValue}}},
constructConstantSurface:function(e){var d=e.headerInfo.zMax,r=e.headerInfo.numDims,n=e.headerInfo.height*e.headerInfo.width,l=0,g=0,p=0,c=e.pixels.resultMask,a=e.pixels.resultPixels;if(c)if(1<r)for(l=0;l<r;l++)for(p=l*n,d=e.headerInfo.maxValues[l],g=0;g<n;g++)c[g]&&(a[p+g]=d);else for(g=0;g<n;g++)c[g]&&(a[g]=d);else if(1<r)for(l=0;l<r;l++)for(p=l*n,d=e.headerInfo.maxValues[l],g=0;g<n;g++)a[p+g]=d;else for(g=0;g<n;g++)a[g]=d},getDataTypeArray:function(e){switch(e){case 0:e=Int8Array;break;case 1:e=
Uint8Array;break;case 2:e=Int16Array;break;case 3:e=Uint16Array;break;case 4:e=Int32Array;break;case 5:e=Uint32Array;break;case 6:e=Float32Array;break;case 7:e=Float64Array;break;default:e=Float32Array}return e},getPixelType:function(e){switch(e){case 0:e="S8";break;case 1:e="U8";break;case 2:e="S16";break;case 3:e="U16";break;case 4:e="S32";break;case 5:e="U32";break;case 6:e="F32";break;case 7:e="F64";break;default:e="F32"}return e},isValidPixelValue:function(e,d){if(null==d)return!1;switch(e){case 0:e=
-128<=d&&127>=d;break;case 1:e=0<=d&&255>=d;break;case 2:e=-32768<=d&&32767>=d;break;case 3:e=0<=d&&65536>=d;break;case 4:e=-2147483648<=d&&2147483647>=d;break;case 5:e=0<=d&&4294967296>=d;break;case 6:e=-3.4027999387901484E38<=d&&3.4027999387901484E38>=d;break;case 7:e=4.9E-324<=d&&1.7976931348623157E308>=d;break;default:e=!1}return e},getDataTypeSize:function(e){var d=0;switch(e){case 0:case 1:d=1;break;case 2:case 3:d=2;break;case 4:case 5:case 6:d=4;break;case 7:d=8;break;default:d=e}return d},
getDataTypeUsed:function(e,d){var q=e;switch(e){case 2:case 4:q=e-d;break;case 3:case 5:q=e-2*d;break;case 6:q=0===d?e:1===d?2:1;break;case 7:q=0===d?e:e-2*d+1;break;default:q=e}return q},getOnePixel:function(e,d,q,n){e=0;switch(q){case 0:e=n.getInt8(d);break;case 1:e=n.getUint8(d);break;case 2:e=n.getInt16(d,!0);break;case 3:e=n.getUint16(d,!0);break;case 4:e=n.getInt32(d,!0);break;case 5:e=n.getUInt32(d,!0);break;case 6:e=n.getFloat32(d,!0);break;case 7:e=n.getFloat64(d,!0);break;default:throw"the decoder does not understand this pixel type";
}return e}},e=function(e,d,q){this.val=e;this.left=d;this.right=q};return{decode:function(e,d){d=d||{};var q=d.noDataValue,n=0,l={};l.ptr=d.inputOffset||0;l.pixels={};if(m.readHeaderInfo(e,l)){var n=l.headerInfo,g=n.fileVersion,p=m.getDataTypeArray(n.imageType);if(5<g)throw"unsupported lerc version 2."+g;m.readMask(e,l);n.numValidPixel===n.width*n.height||l.pixels.resultMask||(l.pixels.resultMask=d.maskData);var c=n.width*n.height;l.pixels.resultPixels=new p(c*n.numDims);l.counter={onesweep:0,uncompressed:0,
lut:0,bitstuffer:0,constant:0,constantoffset:0};if(0!==n.numValidPixel)if(n.zMax===n.zMin)m.constructConstantSurface(l);else if(4<=g&&m.checkMinMaxRanges(e,l))m.constructConstantSurface(l);else{var a=new DataView(e,l.ptr,2),b=a.getUint8(0);l.ptr++;if(b)m.readDataOneSweep(e,l,p);else if(1<g&&1>=n.imageType&&1E-5>Math.abs(n.maxZError-.5)){a=a.getUint8(1);l.ptr++;l.encodeMode=a;if(2<a||4>g&&1<a)throw"Invalid Huffman flag "+a;a?m.readHuffman(e,l,p):m.readTiles(e,l,p)}else m.readTiles(e,l,p)}l.eofOffset=
l.ptr;d.inputOffset?(e=l.headerInfo.blobSize+d.inputOffset-l.ptr,1<=Math.abs(e)&&(l.eofOffset=d.inputOffset+l.headerInfo.blobSize)):(e=l.headerInfo.blobSize-l.ptr,1<=Math.abs(e)&&(l.eofOffset=l.headerInfo.blobSize));e={width:n.width,height:n.height,pixelData:l.pixels.resultPixels,minValue:n.zMin,maxValue:n.zMax,validPixelCount:n.numValidPixel,dimCount:n.numDims,dimStats:{minValues:n.minValues,maxValues:n.maxValues},maskData:l.pixels.resultMask};if(l.pixels.resultMask&&m.isValidPixelValue(n.imageType,
q)){g=l.pixels.resultMask;for(n=0;n<c;n++)g[n]||(e.pixelData[n]=q);e.noDataValue=q}l.noDataValue=q;d.returnFileInfo&&(e.fileInfo=m.formatFileInfo(l));return e}},getBandCount:function(e){for(var d=0,q=0,n={ptr:0,pixels:{}};q<e.byteLength-58;)m.readHeaderInfo(e,n),q+=n.headerInfo.blobSize,d++,n.ptr=q;return d}}})},"esri/layers/support/rasterFormats/LercCodec":function(){define(["../../../core/mathUtils"],function(A){var m={};m.defaultNoDataValue=A.clampFloat32(-Infinity);m.decode=function(r,d){var q;
d=d||{};var n=d.inputOffset||0,l=d.encodedMaskData||null===d.encodedMaskData,g={},p=new Uint8Array(r,n,10);g.fileIdentifierString=String.fromCharCode.apply(null,p);if("CntZImage"!=g.fileIdentifierString.trim())throw"Unexpected file identifier string: "+g.fileIdentifierString;n+=10;p=new DataView(r,n,24);g.fileVersion=p.getInt32(0,!0);g.imageType=p.getInt32(4,!0);g.height=p.getUint32(8,!0);g.width=p.getUint32(12,!0);g.maxZError=p.getFloat64(16,!0);n+=24;if(!l)if(p=new DataView(r,n,16),g.mask={},g.mask.numBlocksY=
p.getUint32(0,!0),g.mask.numBlocksX=p.getUint32(4,!0),g.mask.numBytes=p.getUint32(8,!0),g.mask.maxValue=p.getFloat32(12,!0),n+=16,0<g.mask.numBytes){var l=new Uint8Array(Math.ceil(g.width*g.height/8)),p=new DataView(r,n,g.mask.numBytes),c=p.getInt16(0,!0),a=2,b=0;do{if(0<c)for(;c--;)l[b++]=p.getUint8(a++);else for(var h=p.getUint8(a++),c=-c;c--;)l[b++]=h;c=p.getInt16(a,!0);a+=2}while(a<g.mask.numBytes);if(-32768!==c||b<l.length)throw"Unexpected end of mask RLE encoding";g.mask.bitset=l;n+=g.mask.numBytes}else 0===
(g.mask.numBytes|g.mask.numBlocksY|g.mask.maxValue)&&(l=new Uint8Array(Math.ceil(g.width*g.height/8)),g.mask.bitset=l);p=new DataView(r,n,16);g.pixels={};g.pixels.numBlocksY=p.getUint32(0,!0);g.pixels.numBlocksX=p.getUint32(4,!0);g.pixels.numBytes=p.getUint32(8,!0);g.pixels.maxValue=p.getFloat32(12,!0);n+=16;l=g.pixels.numBlocksX;p=g.pixels.numBlocksY;l+=0<g.width%l?1:0;c=p+(0<g.height%p?1:0);g.pixels.blocks=Array(l*c);a=1E9;for(h=b=0;h<c;h++)for(var k=0;k<l;k++){var f=0,p=new DataView(r,n,Math.min(10,
r.byteLength-n)),D={};g.pixels.blocks[b++]=D;var F=p.getUint8(0);f++;D.encoding=F&63;if(3<D.encoding)throw"Invalid block encoding ("+D.encoding+")";if(2===D.encoding)n++,a=Math.min(a,0);else{if(0!==F&&2!==F){F>>=6;D.offsetType=F;if(2===F)D.offset=p.getInt8(1),f++;else if(1===F)D.offset=p.getInt16(1,!0),f+=2;else if(0===F)D.offset=p.getFloat32(1,!0),f+=4;else throw"Invalid block offset type";a=Math.min(D.offset,a);if(1===D.encoding)if(F=p.getUint8(f),f++,D.bitsPerPixel=F&63,F>>=6,D.numValidPixelsType=
F,2===F)D.numValidPixels=p.getUint8(f),f++;else if(1===F)D.numValidPixels=p.getUint16(f,!0),f+=2;else if(0===F)D.numValidPixels=p.getUint32(f,!0),f+=4;else throw"Invalid valid pixel count type";}n+=f;if(3!=D.encoding)if(0===D.encoding){p=(g.pixels.numBytes-1)/4;if(p!==Math.floor(p))throw"uncompressed block has invalid length";f=new ArrayBuffer(4*p);F=new Uint8Array(f);F.set(new Uint8Array(r,n,4*p));f=new Float32Array(f);for(F=0;F<f.length;F++)a=Math.min(a,f[F]);D.rawData=f;n+=4*p}else 1===D.encoding&&
(p=Math.ceil(D.numValidPixels*D.bitsPerPixel/8),f=new ArrayBuffer(4*Math.ceil(p/4)),F=new Uint8Array(f),F.set(new Uint8Array(r,n,p)),D.stuffedData=new Uint32Array(f),n+=p)}}g.pixels.minValue=a;g.eofOffset=n;r=null!=d.noDataValue?A.clampFloat32(d.noDataValue):m.defaultNoDataValue;var l=d.encodedMaskData,D=d.returnMask,p=0,c=g.pixels.numBlocksX,a=g.pixels.numBlocksY,b=Math.floor(g.width/c),h=Math.floor(g.height/a),k=2*g.maxZError,l=l||(g.mask?g.mask.bitset:null),v,n=new (d.pixelType||Float32Array)(g.width*
g.height);D&&l&&(v=new Uint8Array(g.width*g.height));for(var D=new Float32Array(b*h),u,w,f=0;f<=a;f++)if(F=f!==a?h:g.height%a,0!==F)for(var y=0;y<=c;y++){var C=y!==c?b:g.width%c;if(0!==C){var x=f*g.width*h+y*b,t=g.width-C,E=g.pixels.blocks[p],z,B;if(2>E.encoding){if(0===E.encoding)z=E.rawData;else{z=E.stuffedData;B=E.bitsPerPixel;u=E.numValidPixels;w=E.offset;var H=k,G=D,K=g.pixels.maxValue,I=(1<<B)-1,J=0,L=void 0,M=0,R=void 0,V=void 0,W=Math.ceil((K-w)/H);z[z.length-1]<<=8*(4*z.length-Math.ceil(B*
u/8));for(L=0;L<u;L++)0===M&&(V=z[J++],M=32),M>=B?(R=V>>>M-B&I,M-=B):(M=B-M,R=(V&I)<<M&I,V=z[J++],M=32-M,R+=V>>>M),G[L]=R<W?w+R*H:K;z=D}B=0}else q=2===E.encoding?0:E.offset;var S;if(l)for(w=0;w<F;w++){x&7&&(S=l[x>>3],S<<=x&7);for(u=0;u<C;u++)x&7||(S=l[x>>3]),S&128?(v&&(v[x]=1),n[x++]=2>E.encoding?z[B++]:q):(v&&(v[x]=0),n[x++]=r),S<<=1;x+=t}else if(2>E.encoding)for(w=0;w<F;w++){for(u=0;u<C;u++)n[x++]=z[B++];x+=t}else for(w=0;w<F;w++)if(n.fill)n.fill(q,x,x+C),x+=C+t;else{for(u=0;u<C;u++)n[x++]=q;x+=
t}if(1===E.encoding&&B!==E.numValidPixels)throw"Block and Mask do not match";p++}}q=v;v={width:g.width,height:g.height,pixelData:n,minValue:g.pixels.minValue,maxValue:g.pixels.maxValue,noDataValue:r};q&&(v.maskData=q);d.returnEncodedMask&&g.mask&&(v.encodedMaskData=g.mask.bitset?g.mask.bitset:null);if(d.returnFileInfo&&(v.fileInfo=e(g),d.computeUsedBitDepths)){d=v.fileInfo;q=g.pixels.numBlocksX*g.pixels.numBlocksY;S={};for(z=0;z<q;z++)B=g.pixels.blocks[z],0===B.encoding?S.float32=!0:1===B.encoding?
S[B.bitsPerPixel]=!0:S[0]=!0;g=Object.keys(S);d.bitDepths=g}return v};var e=function(e){return{fileIdentifierString:e.fileIdentifierString,fileVersion:e.fileVersion,imageType:e.imageType,height:e.height,width:e.width,maxZError:e.maxZError,eofOffset:e.eofOffset,mask:e.mask?{numBlocksX:e.mask.numBlocksX,numBlocksY:e.mask.numBlocksY,numBytes:e.mask.numBytes,maxValue:e.mask.maxValue}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,numBytes:e.pixels.numBytes,maxValue:e.pixels.maxValue,
minValue:e.pixels.minValue,noDataValue:this.noDataValue}}};return m})},"esri/layers/support/rasterFormats/Png":function(){define(["./Zlib"],function(A){return function(m){function e(d){var e,g,n,c;this.data=d;this.pos=8;this.palette=[];this.imgData=[];this.transparency={};this.animation=null;this.text={};for(n=null;;){e=this.readUInt32();c=d=void 0;c=[];for(d=0;4>d;++d)c.push(String.fromCharCode(this.data[this.pos++]));d=c.join("");switch(d){case "IHDR":this.width=this.readUInt32();this.height=this.readUInt32();
this.bits=this.data[this.pos++];this.colorType=this.data[this.pos++];this.compressionMethod=this.data[this.pos++];this.filterMethod=this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||Infinity,frames:[]};break;case "PLTE":this.palette=this.read(e);break;case "fcTL":n&&this.animation.frames.push(n);this.pos+=4;n={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};
d=this.readUInt16();e=this.readUInt16()||100;n.delay=1E3*d/e;n.disposeOp=this.data[this.pos++];n.blendOp=this.data[this.pos++];n.data=[];break;case "IDAT":case "fdAT":"fdAT"===d&&(this.pos+=4,e-=4);d=(null!=n?n.data:void 0)||this.imgData;for(c=0;0<=e?c<e:c>e;0<=e?++c:--c)d.push(this.data[this.pos++]);break;case "tRNS":this.transparency={};switch(this.colorType){case 3:this.transparency.indexed=this.read(e);e=255-this.transparency.indexed.length;if(0<e)for(d=0;0<=e?d<e:d>e;0<=e?++d:--d)this.transparency.indexed.push(255);
break;case 0:this.transparency.grayscale=this.read(e)[0];break;case 2:this.transparency.rgb=this.read(e)}break;case "tEXt":c=this.read(e);e=c.indexOf(0);d=String.fromCharCode.apply(String,c.slice(0,e));this.text[d]=String.fromCharCode.apply(String,c.slice(e+1));break;case "IEND":n&&this.animation.frames.push(n);a:{switch(this.colorType){case 0:case 3:case 4:n=1;break a;case 2:case 6:n=3;break a}n=void 0}this.colors=n;this.hasAlphaChannel=4===(g=this.colorType)||6===g;g=this.colors+(this.hasAlphaChannel?
1:0);this.pixelBitlength=this.bits*g;a:{switch(this.colors){case 1:g="DeviceGray";break a;case 3:g="DeviceRGB";break a}g=void 0}this.colorSpace=g;this.imgData=new Uint8Array(this.imgData);return;default:this.pos+=e}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");}}var r,d,q;e.load=function(d,l,g){var n;"function"===typeof l&&(g=l);n=new XMLHttpRequest;n.open("GET",d,!0);n.responseType="arraybuffer";n.onload=function(){var c;c=new Uint8Array(n.response||n.mozResponseArrayBuffer);
c=new e(c);"function"===typeof(null!=l?l.getContext:void 0)&&c.render(l);return"function"===typeof g?g(c):void 0};return n.send(null)};e.prototype.read=function(d){var e,g;g=[];for(e=0;0<=d?e<d:e>d;0<=d?++e:--e)g.push(this.data[this.pos++]);return g};e.prototype.readUInt32=function(){var d,e,g,p;d=this.data[this.pos++]<<24;e=this.data[this.pos++]<<16;g=this.data[this.pos++]<<8;p=this.data[this.pos++];return d|e|g|p};e.prototype.readUInt16=function(){var d,e;d=this.data[this.pos++]<<8;e=this.data[this.pos++];
return d|e};e.prototype.decodePixels=function(d){var e,g,n,c,a,b,h,k,f,q,m,v,u,w,y;null==d&&(d=this.imgData);if(0===d.length)return new Uint8Array(0);d=new A(d);d=d.getBytes();k=this.pixelBitlength/8;v=k*this.width;f=new Uint8Array(v*this.height);b=d.length;for(g=q=m=0;q<b;){switch(d[q++]){case 0:for(c=e=0;e<v;c=e+=1)f[g++]=d[q++];break;case 1:for(c=u=0;u<v;c=u+=1)e=d[q++],a=c<k?0:f[g-k],f[g++]=(e+a)%256;break;case 2:for(c=a=0;a<v;c=a+=1)e=d[q++],n=(c-c%k)/k,u=m&&f[(m-1)*v+n*k+c%k],f[g++]=(u+e)%256;
break;case 3:for(c=y=0;y<v;c=y+=1)e=d[q++],n=(c-c%k)/k,a=c<k?0:f[g-k],u=m&&f[(m-1)*v+n*k+c%k],f[g++]=(e+Math.floor((a+u)/2))%256;break;case 4:for(c=y=0;y<v;c=y+=1)e=d[q++],n=(c-c%k)/k,a=c<k?0:f[g-k],0===m?u=w=0:(u=f[(m-1)*v+n*k+c%k],w=n&&f[(m-1)*v+(n-1)*k+c%k]),h=a+u-w,c=Math.abs(h-a),n=Math.abs(h-u),h=Math.abs(h-w),a=c<=n&&c<=h?a:n<=h?u:w,f[g++]=(e+a)%256;break;default:throw Error("Invalid filter algorithm: "+d[q-1]);}m++}return f};e.prototype.decodePalette=function(){var d,e,g,p,c,a,b,h,k;g=this.palette;
a=this.transparency.indexed||[];c=new Uint8Array((a.length||0)+g.length);e=b=d=p=0;for(h=g.length;b<h;e=b+=3)c[p++]=g[e],c[p++]=g[e+1],c[p++]=g[e+2],c[p++]=null!=(k=a[d++])?k:255;return c};e.prototype.copyToImageData=function(d,e){var g,l,c,a,b,h,k;l=this.colors;k=null;g=this.hasAlphaChannel;this.palette.length&&(k=null!=(c=this._decodedPalette)?c:this._decodedPalette=this.decodePalette(),l=4,g=!0);d=d.data||d;h=d.length;a=k||e;c=b=0;if(1===l)for(;c<h;)l=k?4*e[c/4]:b,b=a[l++],d[c++]=b,d[c++]=b,d[c++]=
b,d[c++]=g?a[l++]:this.transparency.grayscale&&this.transparency.grayscale===b?0:255,b=l;else for(;c<h;)l=k?4*e[c/4]:b,d[c++]=a[l++],d[c++]=a[l++],d[c++]=a[l++],d[c++]=g?a[l++]:this.transparency.rgb&&this.transparency.rgb[1]===a[l-3]&&this.transparency.rgb[3]===a[l-2]&&this.transparency.rgb[5]===a[l-1]?0:255,b=l};e.prototype.decode=function(){var d;d=new Uint8Array(this.width*this.height*4);this.copyToImageData(d,this.decodePixels());return d};q=(d=m.document&&m.document.createElement("canvas"))&&
d.getContext("2d");r=function(e){q.width=e.width;q.height=e.height;q.clearRect(0,0,e.width,e.height);q.putImageData(e,0,0);e=new Image;e.src=d.toDataURL();return e};e.prototype.decodeFrames=function(d){var e,g,n,c,a,b,h;if(this.animation){b=this.animation.frames;h=[];e=c=0;for(a=b.length;c<a;e=++c)e=b[e],g=d.createImageData(e.width,e.height),n=this.decodePixels(new Uint8Array(e.data)),this.copyToImageData(g,n),e.imageData=g,h.push(e.image=r(g));return h}};e.prototype.renderFrame=function(d,e){var g,
l;l=this.animation.frames;g=l[e];l=l[e-1];0===e&&d.clearRect(0,0,this.width,this.height);1===(null!=l?l.disposeOp:void 0)?d.clearRect(l.xOffset,l.yOffset,l.width,l.height):2===(null!=l?l.disposeOp:void 0)&&d.putImageData(l.imageData,l.xOffset,l.yOffset);0===g.blendOp&&d.clearRect(g.xOffset,g.yOffset,g.width,g.height);return d.drawImage(g.image,g.xOffset,g.yOffset)};e.prototype.animate=function(d){var e,g,n,c,a,b,h=this;g=0;b=this.animation;c=b.numFrames;n=b.frames;a=b.numPlays;return(e=function(){var b,
f;b=g++%c;f=n[b];h.renderFrame(d,b);if(1<c&&g/c<a)return h.animation._timeout=setTimeout(e,f.delay)})()};e.prototype.stopAnimation=function(){var d;return clearTimeout(null!=(d=this.animation)?d._timeout:void 0)};e.prototype.render=function(d){var e;d._png&&d._png.stopAnimation();d._png=this;d.width=this.width;d.height=this.height;d=d.getContext("2d");if(this.animation)return this.decodeFrames(d),this.animate(d);e=d.createImageData(this.width,this.height);this.copyToImageData(e,this.decodePixels());
return d.putImageData(e,0,0)};return e}(this)})},"esri/layers/support/rasterFormats/Raw":function(){define(["require","exports"],function(A,m){var e=function(e){var d=1;switch(e){case Uint8Array:case Int8Array:d=1;break;case Uint16Array:case Int16Array:d=2;break;case Uint32Array:case Int32Array:case Float32Array:d=4;break;case Float64Array:d=8}return d};return function(){function m(){}m.decode=function(d,q){var n=q.pixelType,l=[],g=q.width*q.height,p=Math.floor(d.byteLength/(q.width*q.height*e(q.pixelType))),
c=q.bandIds,a=q.format;q=c&&c.length||Math.floor(d.byteLength/(q.width*q.height*e(q.pixelType)));var b=d.byteLength-d.byteLength%(g*e(n)),h=new n(d,0,g*p),k,f,m,r;if("bip"===a)for(a=0;a<q;a++){m=new n(g);r=c?c[a]:a;for(k=0;k<g;k++)m[k]=h[k*p+r];l.push(m)}else if("bsq"===a)for(a=0;a<q;a++)r=c?c[a]:a,l.push(h.subarray(r*g,(r+1)*g));if(b<d.byteLength-1)if(d=d.slice(b),8*d.byteLength<g)f=null;else{d=new Uint8Array(d,0,Math.ceil(g/8));n=new Uint8Array(g);for(f=q=f=c=p=0;f<d.length-1;f++)for(c=d[f],q=7;0<=
q;q--)n[p++]=c>>q&1;for(q=7;p<g-1;)c=d[d.length-1],n[p++]=c>>q&1,q--;f=n}return{pixels:l,mask:f}};return m}()})},"esri/layers/support/rasterFormats/TiffDecoder":function(){define("require exports tslib ../rasterDatasets/byteStreamUtils ./Jpg ./TiffTags ./Zlib".split(" "),function(A,m,e,r,d,q,n){function l(a,b){var c="unknown";3===a?c="f32":1===a?1===b?c="u1":2===b?c="u2":4===b?c="u4":8>=b?c="u8":16>=b?c="u16":32>=b&&(c="u32"):2===a&&(8>=b?c="s8":16>=b?c="s16":32>=b&&(c="s32"));return c}function g(a){var b=
null;switch(a?a.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":b=Uint8Array;break;case "u16":b=Uint16Array;break;case "u32":b=Uint32Array;break;case "s8":b=Int8Array;break;case "s16":b=Int16Array;break;case "s32":b=Int32Array;break;default:b=Float32Array}return b}function p(a,b){return{x:b[0]*a.x+b[1]*a.y+b[2],y:b[3]*a.x+b[4]*a.y+b[5]}}function c(a,b){return(a=a.get(b))&&a.values}function a(a,b){return(a=a.get(b))&&a.values[0]}function b(a,b,c,d,e,f){void 0===d&&(d=0);void 0===e&&(e=
q.TIFF_TAGS);void 0===f&&(f=4);var g=(new DataView(a,c,2)).getUint16(0,b),k=4+2*f,l=2+g*k;if(c+l>a.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:l};var n=c+l+4<=a.byteLength?(new DataView(a,c+l,4)).getUint32(0,b):null;c+=2;for(var t=new Map,u,v,p,m,w,y,C=0;C<g;C++){u=new DataView(a,c+k*C,k);v=u.getUint16(0,b);m=u.getUint16(2,b);p=q.getTagName(v,e);if(2===f)w=u.getUint16(4,b),y=u.getUint16(6,b);else if(4===f)w=u.getUint32(4,b),y=u.getUint32(8,b);else if(8===f)if(y=w=0,b)for(var x=
0;8>x;x++)w+=u.getUint8(4+x)*Math.pow(2,8*x),y+=u.getUint8(12+x)*Math.pow(2,8*x);else for(x=0;8>x;x++)w+=u.getUint8(4+x)*Math.pow(2,8*(7-x)),y+=u.getUint8(12+x)*Math.pow(2,8*(7-x));u={id:v,type:m,valueCount:w,valueOffset:y,values:null};h(a,b,u,d);t.set(p,u)}return{success:!0,ifd:t,nextIFD:n,requiredBufferSize:l}}function h(a,b,c,d,e){void 0===d&&(d=0);if(c.values)return!0;var f=c.type,h=c.valueCount,g=c.valueOffset,k=[],l=v[f],n=8*l,u=h*l,t=h*v[f]*8;if(32<t&&u>(e?a.byteLength:a?a.byteLength-g+d:0))return c.offlineOffsetSize=
[g,u],c.values=null,!1;if(32>=t)if(b||(g>>>=32-t),1===h)k=[g];else for(a=0;a<h;a++)k.push(g<<n*a>>>32-n);else for(g-=d,e&&(g=0),n=g;n<g+u;n+=l){switch(f){case 1:h=(new DataView(a,n,1)).getUint8(0);break;case 2:h=(new DataView(a,n,1)).getUint8(0);break;case 3:h=(new DataView(a,n,2)).getUint16(0,b);break;case 4:h=(new DataView(a,n,4)).getUint32(0,b);break;case 5:h=(new DataView(a,n,4)).getUint32(0,b)/(new DataView(a,n+4,4)).getUint32(0,b);break;case 6:h=(new DataView(a,n,1)).getInt8(0);break;case 7:h=
(new DataView(a,n,1)).getUint8(0);break;case 8:h=(new DataView(a,n,2)).getInt16(0,b);break;case 9:h=(new DataView(a,n,4)).getInt32(0,b);break;case 10:h=(new DataView(a,n,4)).getInt32(0,b)/(new DataView(a,n+4,4)).getInt32(0,b);break;case 11:h=(new DataView(a,n,4)).getFloat32(0,b);break;case 12:h=(new DataView(a,n,8)).getFloat64(0,b);break;default:h=null}k.push(h)}if(2===f){f="";g=k;k=[];for(a=0;a<g.length;a++)0===g[a]&&""!==f?(k.push(f),f=""):f+=String.fromCharCode(g[a]);""===f&&0!==k.length||k.push(f)}c.values=
k;return!0}function k(b){var d=b[0],e=a(d,"TILEWIDTH"),f=a(d,"TILELENGTH"),h=a(d,"IMAGEWIDTH"),g=a(d,"IMAGELENGTH"),k=a(d,"BITSPERSAMPLE"),n=a(d,"SAMPLESPERPIXEL"),u=a(d,"SAMPLEFORMAT")||1,v=l(u,k),m=c(d,"PLANARCONFIGURATION")?2===c(d,"PLANARCONFIGURATION")[0]:!1,q=c(d,"GDAL_NODATA"),w;null!=q&&("string"===typeof q[0]?(w=q.map(function(a){return parseFloat(a)}),w.some(function(a){return isNaN(a)})&&(w=null)):"number"===typeof q[0]&&(w=q));var C=a(d,"COMPRESSION")||1;switch(C){case 1:q="NONE";break;
case 2:case 3:case 4:case 32771:q="CCITT";break;case 5:q="LZW";break;case 6:case 7:q="JPEG";break;case 32773:q="PACKBITS";break;case 8:case 32946:q="DEFLATE";break;case 34712:q="JPEG2000";break;default:q=String(C)}var r=!0,F="";1!==C&&6!==C&&8!==C&&32946!==C&&(r=!1,F+="unsupported tag compression "+C);3<u&&(r=!1,F+="unsupported tag sampleFormat "+u);0!==k%8&&(r=!1,F+="unsupported tag bitsPerSample "+k);var k=a(d,"GEOASCIIPARAMS"),D;k&&(D=(D=k.split("|").filter(function(a){return-1<a.indexOf("ESRI PE String \x3d ")})[0])?
D.replace("ESRI PE String \x3d ",""):"",D=0===D.indexOf("PROJCS")||0===D.indexOf("GEOGCS")?{wkid:null,wkt:D}:null);var k=c(d,"GEOTIEPOINTS"),u=c(d,"GEOPIXELSCALE"),C=c(d,"GEOTRANSMATRIX"),A=d.has("GEOKEYDIRECTORY")?d.get("GEOKEYDIRECTORY").data:null,d=!1;if(A){var d=2===a(A,"GTRasterTypeGeoKey"),Q=a(A,"GTModelTypeGeoKey");2===Q?(A=a(A,"GeographicTypeGeoKey"),1024<A&&32766>A&&(D={wkid:A})):1===Q&&(A=a(A,"ProjectedCSTypeGeoKey"),1024<A&&32766>A&&(D={wkid:A}))}var N,P;u&&k&&6<=k.length?(N=[u[0],0,k[3]-
k[0]*u[0],0,-Math.abs(u[1]),k[4]-k[1]*u[1]],d&&(N[2]-=.5*N[0]+.5*N[1],N[5]-=.5*N[3]+.5*N[4])):C&&16===C.length&&(N=[C[0],C[1],C[3],C[4],C[5],C[7]]);if(N){P=[{x:0,y:g},{x:0,y:0},{x:h,y:g},{x:h,y:0}];d=void 0;u=k=Number.POSITIVE_INFINITY;A=C=Number.NEGATIVE_INFINITY;for(Q=0;Q<P.length;Q++)d=p(P[Q],N),k=d.x>k?k:d.x,C=d.x<C?C:d.x,u=d.y>u?u:d.y,A=d.y<A?A:d.y;P={xmin:k,xmax:C,ymin:u,ymax:A,spatialReference:D}}N=b.filter(function(b){return 1===a(b,"NEWSUBFILETYPE")});var O,U,X,Z;0<N.length&&(O=Math.round(Math.log(h/
a(N[0],"IMAGEWIDTH"))/Math.LN2),U=Math.round(Math.log(h/a(N[N.length-1],"IMAGEWIDTH"))/Math.LN2),X=a(N[N.length-1],"TILEWIDTH"),Z=a(N[N.length-1],"TILEHEIGHT"));X=0<U?X||e:null;Z=0<U?Z||f:null;var Y;e&&(Y=[{maxCol:Math.ceil(h/e)-1,maxRow:Math.ceil(g/f)-1,minRow:0,minCol:0}],N.forEach(function(b){Y.push({maxCol:Math.ceil(a(b,"IMAGEWIDTH")/a(b,"TILEWIDTH"))-1,maxRow:Math.ceil(a(b,"IMAGELENGTH")/a(b,"TILELENGTH"))-1,minRow:0,minCol:0})}));b=a(b[0],"GDAL_METADATA");b=y(b);return{width:h,height:g,tileWidth:e,
tileHeight:f,planes:n,isBSQ:m,pixelType:v,compression:q,noData:w,isSupported:r,message:F,extent:P,firstPyramidLevel:O,maximumPyramidLevel:U,pyramidBlockWidth:X,pyramidBlockHeight:Z,tileBoundary:Y,metadata:b}}function f(a){var b=new DataView(a,0,8),c=b.getUint16(0,!1),d=null;if(18761===c)d=!0;else if(19789===c)d=!1;else throw"unexpected endianess byte";if(42!==b.getUint16(2,d))throw"unexpected tiff identifier";c=b.getUint32(4,d);b=[];do if(c=D(a,d,c),c.success)b.push(c.ifd),c=c.nextIFD;else break;
while(0<c);a=k(b);return e.__assign(e.__assign({},a),{littleEndian:d,ifds:b})}function D(a,c,d,e,f,h){void 0===e&&(e=0);void 0===f&&(f=q.TIFF_TAGS);void 0===h&&(h=4);d=b(a,c,d,e,f,h);var k,g=d.ifd;g&&(q.ifdTags.forEach(function(d,f){g.has(f)&&(k=g.get(f),k.data=b(a,c,k.valueOffset-e,e,d).ifd)}),g.has("GEOKEYDIRECTORY")&&(k=g.get("GEOKEYDIRECTORY"),(f=k.values)&&4<f.length&&(f=f[0]+"."+f[1]+"."+f[2],k.data=b(a,c,k.valueOffset+6-e,e,q.GEO_KEYS,2).ifd,k.data&&k.data.set("GEOTIFFVersion",{id:0,type:2,
valueCount:1,valueOffset:null,values:[f]}))),g.has("XMP")&&(k=g.get("XMP"),f=k.values,"number"===typeof f[0]&&7===k.type&&(k.values=[r.bytesToUTF8(new Uint8Array(f))])));return d}Object.defineProperty(m,"__esModule",{value:!0});m.decode=m.decodeTileOrStrip=m.parseIFD=m.parseSignature=m.parseHeader=m.getImageInfo=m.parseFieldValues=void 0;var F=function(){var a=new ArrayBuffer(4),b=new Uint8Array(a);(new Uint32Array(a))[0]=1;return 1===b[0]}(),v=[0,1,1,2,4,8,1,1,2,4,8,4,8],u=function(b,c,e,f,h){c=
F===c;var k=a(e,"BITSPERSAMPLE"),u=a(e,"SAMPLEFORMAT")||1,k=l(u,k),u=a(e,"COMPRESSION")[0]||1;e=g(k);var v,t;1===u?(v=b.slice(f,f+h),t=new Uint8Array(v)):8===u||32946===u?(t=new Uint8Array(b,f,h),t=new n(t),b=t.getBytes(),v=new ArrayBuffer(b.length),t=new Uint8Array(v),t.set(b)):6===u&&(t=new Uint8Array(b,f,h),v=new d,v.parse(t),b=v.getData(v.width,v.height,!0),v=new ArrayBuffer(b.length),t=new Uint8Array(v),t.set(b));if("u8"!==k&&"s8"!==k&&!c)switch(v=new ArrayBuffer(t.length),c=new Uint8Array(v),
k){case "u16":case "s16":for(k=0;k<t.length;k+=2)c[k]=t[k+1],c[k+1]=t[k];break;case "u32":case "s32":case "f32":for(k=0;k<t.length;k+=4)c[k]=t[k+3],c[k+1]=t[k+2],c[k+2]=t[k+1],c[k+3]=t[k]}return new e(v)},w=function(a,b,c){if(!(a&&0<a.length&&b&&c))return null;for(var d,e,f,h=a[0].length,k=a.length,g=new Uint8Array(h),l=0;l<k;l++)if(d=a[l],e=b[l],f=c[l],0===l)for(var n=0;n<h;n++)g[n]=d[n]<e||d[n]>f?0:1;else for(n=0;n<h;n++)g[n]&&(g[n]=d[n]<e||d[n]>f?0:1);return g},y=function(a){if(!a)return null;
var b=a.match(/<Item(.*?)Item>/gi);if(!b||0===b.length)return null;a=new Map;for(var c,d,e,f,h=0;h<b.length;h++)c=b[h],d=c.slice(6,c.indexOf("\x3e")),e=c.indexOf("sample\x3d"),-1<e&&(f=c.slice(e+8,c.indexOf('"',e+8))),e=c.indexOf("name\x3d"),-1<e&&(d=c.slice(e+6,c.indexOf('"',e+6))),d&&(c=c.slice(c.indexOf("\x3e")+1,c.indexOf("\x3c/Item\x3e")).trim(),null!=f?a.has(d)?a.get(d)[f]=c:a.set(d,[c]):a.set(d,c)),f=null;b=a.get("STATISTICS_MINIMUM");d=a.get("STATISTICS_MAXIMUM");c=a.get("STATISTICS_MEAN");
e=a.get("STATISTICS_STDDEV");f=null;if(b&&d)for(f=[],h=0;h<b.length;h++)f.push({min:parseFloat(b[h]),max:parseFloat(d[h]),avg:c&&parseFloat(c[h]),stddev:e&&parseFloat(e[h])});d=a.get("BandName");c=a.get("WavelengthMin");e=a.get("WavelengthMax");b=null;if(d)for(b=[],h=0;h<d.length;h++)b.push({BandName:d[h],WavelengthMin:c&&parseFloat(c[h]),WavelengthMax:e&&parseFloat(e[h])});h=a.get("DataType");return{statistics:f,bandProperties:b,dataType:h,rawMetadata:a}};m.parseFieldValues=h;m.getImageInfo=k;m.parseHeader=
f;m.parseSignature=function(a){var b=new DataView(a,0,8),c=b.getUint16(0,!1);a=null;if(18761===c)a=!0;else if(19789===c)a=!1;else throw"unexpected endianess byte";if(42!==b.getUint16(2,a))throw"unexpected tiff identifier";b=b.getUint32(4,a);return{littleEndian:a,firstIFD:b}};m.parseIFD=D;m.decodeTileOrStrip=function(b,c){var d=c.headerInfo,e=c.ifd,f=u(b,d.littleEndian,e,c.offset||0,c.size||b.byteLength);b=d.pixelType;for(var h=d.isBSQ,k=d.planes,l=g(b),n=f.length/k,v,p=[],q=0;q<k;q++){v=new l(n);
if(h)v=f.slice(n*q,n*(q+1));else for(var m=0;m<n;m++)v[m]=f[m*k+q];p.push(v)}var f=a(e,"TILEWIDTH"),e=a(e,"TILELENGTH"),h=d.noData?d.noData[0]:null,d=(k=d.metadata?d.metadata.statistics:null)?k.map(function(a){return a.min}):null,k=k?k.map(function(a){return a.max}):null,y;if(null!=h)if(y=new Uint8Array(n),1E24<Math.abs(h))for(c=0;c<n;c++)y[c]=1E-6>Math.abs((p[0][c]-h)/h)?0:1;else for(c=0;c<n;c++)y[c]=p[0][c]===h?0:1;else d&&k&&c.applyMinMaxConstraint&&(y=w(p,d,k));return{pixelType:b,width:f,height:e,
pixels:p,mask:y,noDataValue:h}};m.decode=function(a,b){b=b||f(a);var e=b.ifds,h=b.noData;if(0===e.length)throw"no valid image file directory";e=e[0];h=h?h[0]:null;if(b.tileWidth){var k=c(e,"TILEOFFSETS");if(void 0===k)e=null;else{for(var l=c(e,"TILEBYTECOUNTS"),v=b.tileWidth,p=b.tileHeight,q=b.width,m=b.height,w=b.pixelType,y=b.isBSQ,r=b.planes,C=q*m,D=c(e,"BITSPERSAMPLE")[0],x=g(w),A=[],T=0;T<r;T++)A.push(new x(C));var Q,N,P,O,U,X,Z,Y,C=Math.ceil(q/v);if(0===D%8)for(D=0;D<k.length;D++)for(Q=Math.floor(D/
C)*p,O=D%C*v,T=Q*q+O,x=u(a,b.littleEndian,e,k[D],l[D]),X=0,U=T,O=Math.min(v,q-O),Z=Math.min(p,m-Q),Q=0;Q<r;Q++)if(Y=A[Q],y)for(N=0;N<Z;N++)for(U=T+N*q,X=v*p*Q+N*v,P=0;P<O;P++,U++,X++)Y[U]=x[X];else for(N=0;N<Z;N++)for(U=T+N*q,X=N*v*r+Q,P=0;P<O;P++,U++,X+=r)Y[U]=x[X];e={width:q,height:m,pixelType:w,pixels:A}}}else if(p=b,A=F===p.littleEndian,C=c(e,"STRIPOFFSETS"),void 0===C)e=null;else{b=p.width;k=p.height;l=p.pixelType;p=p.planes;q=b*k;D=c(e,"BITSPERSAMPLE")[0];m=g(l);w=new m(q*p);x=c(e,"STRIPBYTECOUNTS");
T=c(e,"ROWSPERSTRIP")[0];U=c(e,"COMPRESSION")?c(e,"COMPRESSION")[0]:1;O=T;if(0===D%8)for(e=0;e<C.length;e++){X=e*T*b*p;O=(e+1)*T>k?k-e*T:T;if("u8"===l||"s8"===l||A)8===U||32946===U?(y=new Uint8Array(a,C[e],x[e]),y=new n(y),Q=y.getBytes(),r=new ArrayBuffer(Q.length),y=new Uint8Array(r),y.set(Q),y.length!==O*b*p*D/8&&console.log("strip byte counts is different than expected")):6===U?(y=new Uint8Array(a,C[e],x[e]),r=new d,r.parse(y),O=r.getData(r.width,r.height,!0),r=new ArrayBuffer(O.length),y=new Uint8Array(r),
y.set(O)):1===U&&(x[e]!==O*b*p*D/8&&console.log("strip byte counts is different than expected"),r=a.slice(C[e],C[e]+x[e]));else switch(6===U||8===U||32946===U?(y=new Uint8Array(a,C[e],x[e]),y=new n(y),y=y.getBytes(),r=new ArrayBuffer(y.length),v=new Uint8Array(r),y.length!==O*b*p*D/8&&console.log("strip byte counts is different than expected")):1===U&&(x[e]!==O*b*p*D/8&&console.log("strip byte counts is different than expected"),r=new ArrayBuffer(x[e]),y=new Uint8Array(a,C[e],x[e]),v=new Uint8Array(r)),
l){case "u16":case "s16":for(O=0;O<y.length;O+=2)v[O]=y[O+1],v[O+1]=y[O];break;case "u32":case "s32":case "f32":for(O=0;O<y.length;O+=4)v[O]=y[O+3],v[O+1]=y[O+2],v[O+2]=y[O+1],v[O+3]=y[O]}O=new m(r);w.set(O,X)}y=[];if(1===p)y.push(w);else for(e=0;e<p;e++){v=new m(q);for(a=0;a<q;a++)v[a]=w[a*p+e];y.push(v)}e={width:b,height:k,pixelType:l,pixels:y}}if(null!==h){e.mask=new Uint8Array(e.width*e.height);if(1E24<Math.abs(h))for(a=0;a<e.width*e.height;a++)e.mask[a]=1E-6>Math.abs((e.pixels[0][a]-h)/h)?0:
1;else for(a=0;a<e.width*e.height;a++)e.mask[a]=e.pixels[0][a]===h?0:1;e.noDataValue=h}return e}})},"esri/layers/support/rasterDatasets/byteStreamUtils":function(){define(["require","exports"],function(A,m){Object.defineProperty(m,"__esModule",{value:!0});m.bytesToUTF8=void 0;m.bytesToUTF8=function(e,m){for(var d=0,q="",n=0,l=0,g=e.length;d<g;)if(l=e[d++],n=l>>4,8>n?n=1:15===n?(n=4,l=(l&7)<<18|(e[d++]&63)<<12|(e[d++]&63)<<6|e[d++]&63):14===n?(n=3,l=(l&15)<<12|(e[d++]&63)<<6|e[d++]&63):(n=2,l=(l&31)<<
6|e[d++]&63),0!==l||m)q+=String.fromCharCode(l);return q}})},"esri/layers/support/rasterFormats/TiffTags":function(){define(["require","exports"],function(A,m){var e=function(){var d=[];d[254]="NEWSUBFILETYPE";d[255]="SUBFILETYPE";d[256]="IMAGEWIDTH";d[257]="IMAGELENGTH";d[258]="BITSPERSAMPLE";d[259]="COMPRESSION";d[262]="PHOTOMETRICINTERPRETATION";d[263]="THRESHHOLDING";d[264]="CELLWIDTH";d[265]="CELLLENGTH";d[266]="FILLORDER";d[269]="DOCUMENTNAME";d[270]="IMAGEDESCRIPTION";d[271]="MAKE";d[272]=
"MODEL";d[273]="STRIPOFFSETS";d[274]="ORIENTATION";d[277]="SAMPLESPERPIXEL";d[278]="ROWSPERSTRIP";d[279]="STRIPBYTECOUNTS";d[280]="MINSAMPLEVALUE";d[281]="MAXSAMPLEVALUE";d[282]="XRESOLUTION";d[283]="YRESOLUTION";d[284]="PLANARCONFIGURATION";d[285]="PAGENAME";d[286]="XPOSITION";d[287]="YPOSITION";d[288]="FREEOFFSETS";d[289]="FREEBYTECOUNTS";d[290]="GRAYRESPONSEUNIT";d[291]="GRAYRESPONSECURVE";d[292]="T4OPTIONS";d[293]="T6OPTIONS";d[296]="RESOLUTIONUNIT";d[297]="PAGENUMBER";d[300]="COLORRESPONSEUNIT";
d[301]="TRANSFERFUNCTION";d[305]="SOFTWARE";d[306]="DATETIME";d[315]="ARTIST";d[316]="HOSTCOMPUTER";d[317]="PREDICTOR";d[318]="WHITEPOINT";d[319]="PRIMARYCHROMATICITIES";d[320]="COLORMAP";d[321]="HALFTONEHINTS";d[322]="TILEWIDTH";d[323]="TILELENGTH";d[324]="TILEOFFSETS";d[325]="TILEBYTECOUNTS";d[326]="BADFAXLINES";d[327]="CLEANFAXDATA";d[328]="CONSECUTIVEBADFAXLINES";d[330]="SUBIFD";d[332]="INKSET";d[333]="INKNAMES";d[334]="NUMBEROFINKS";d[336]="DOTRANGE";d[337]="TARGETPRINTER";d[338]="EXTRASAMPLES";
d[339]="SAMPLEFORMAT";d[340]="SMINSAMPLEVALUE";d[341]="SMAXSAMPLEVALUE";d[342]="TRANSFERRANGE";d[347]="JPEGTABLES";d[512]="JPEGPROC";d[513]="JPEGIFOFFSET";d[514]="JPEGIFBYTECOUNT";d[515]="JPEGRESTARTINTERVAL";d[517]="JPEGLOSSLESSPREDICTORS";d[518]="JPEGPOINTTRANSFORM";d[519]="JPEGQTABLES";d[520]="JPEGDCTABLES";d[521]="JPEGACTABLES";d[529]="YCBCRCOEFFICIENTS";d[530]="YCBCRSUBSAMPLING";d[531]="YCBCRPOSITIONING";d[532]="REFERENCEBLACKWHITE";d[700]="XMP";d[33550]="GEOPIXELSCALE";d[33922]="GEOTIEPOINTS";
d[33432]="COPYRIGHT";d[42112]="GDAL_METADATA";d[42113]="GDAL_NODATA";d[50844]="RPCCOEFFICIENT";d[34264]="GEOTRANSMATRIX";d[34735]="GEOKEYDIRECTORY";d[34736]="GEODOUBLEPARAMS";d[34737]="GEOASCIIPARAMS";d[34665]="EXIFIFD";d[34853]="GPSIFD";d[40965]="INTEROPERABILITYIFD";return d}();A=function(){var d=[].concat(e);d[36864]="ExifVersion";d[40960]="FlashpixVersion";d[40961]="ColorSpace";d[42240]="Gamma";d[37121]="ComponentsConfiguration";d[37122]="CompressedBitsPerPixel";d[40962]="PixelXDimension";d[40963]=
"PixelYDimension";d[37500]="MakerNote";d[37510]="UserComment";d[40964]="RelatedSoundFile";d[36867]="DateTimeOriginal";d[36868]="DateTimeDigitized";d[36880]="OffsetTime";d[36881]="OffsetTimeOriginal";d[36882]="OffsetTimeDigitized";d[37520]="SubSecTime";d[37521]="SubSecTimeOriginal";d[37522]="SubSecTimeDigitized";d[37888]="Temperature";d[37889]="Humidity";d[37890]="Pressure";d[37891]="WaterDepth";d[37892]="Acceleration";d[37893]="CameraElevationAngle";d[42016]="ImageUniqueID";d[42032]="CameraOwnerName";
d[42033]="BodySerialNumber";d[42034]="LensSpecification";d[42035]="LensMake";d[42036]="LensModel";d[42037]="LensSerialNumber";d[33434]="ExposureTime";d[33437]="FNumber";d[34850]="ExposureProgram";d[34852]="SpectralSensitivity";d[34855]="PhotographicSensitivity";d[34856]="OECF";d[34864]="SensitivityType";d[34865]="StandardOutputSensitivity";d[34866]="RecommendedExposureIndex";d[34867]="ISOSpeed";d[34868]="ISOSpeedLatitudeyyy";d[34869]="ISOSpeedLatitudezzz";d[37377]="ShutterSpeedValue";d[37378]="ApertureValue";
d[37379]="BrightnessValue";d[37380]="ExposureBiasValue";d[37381]="MaxApertureValue";d[37382]="SubjectDistance";d[37383]="MeteringMode";d[37384]="LightSource";d[37385]="Flash";d[37386]="FocalLength";d[37396]="SubjectArea";d[41483]="FlashEnergy";d[41484]="SpatialFrequencyResponse";d[41486]="FocalPlaneXResolution";d[41487]="FocalPlaneYResolution";d[41488]="FocalPlaneResolutionUnit";d[41492]="SubjectLocation";d[41493]="ExposureIndex";d[41495]="SensingMethod";d[41728]="FileSource";d[41729]="SceneType";
d[41730]="CFAPattern";d[41985]="CustomRendered";d[41986]="ExposureMode";d[41987]="WhiteBalance";d[41988]="DigitalZoomRatio";d[41989]="FocalLengthIn35mmFilm";d[41990]="SceneCaptureType";d[41991]="GainControl";d[41992]="Contrast";d[41993]="Saturation";d[41994]="Sharpness";d[41995]="DeviceSettingDescription";d[41996]="SubjectDistanceRange";return d}();m=function(){var d=[];d[1024]="GTModelTypeGeoKey";d[1025]="GTRasterTypeGeoKey";d[1026]="GTCitationGeoKey";d[2048]="GeographicTypeGeoKey";d[2049]="GeogCitationGeoKey";
d[2050]="GeogGeodeticDatumGeoKey";d[2051]="GeogPrimeMeridianGeoKey";d[2052]="GeogLinearUnitsGeoKey";d[2053]="GeogLinearUnitSizeGeoKey";d[2054]="GeogAngularUnitsGeoKey";d[2055]="GeogAngularUnitSizeGeoKey";d[2056]="GeogEllipsoidGeoKey";d[2057]="GeogSemiMajorAxisGeoKey";d[2058]="GeogSemiMinorAxisGeoKey";d[2059]="GeogInvFlatteningGeoKey";d[2061]="GeogPrimeMeridianLongGeoKey";d[2060]="GeogAzimuthUnitsGeoKey";d[3072]="ProjectedCSTypeGeoKey";d[3073]="PCSCitationGeoKey";d[3074]="ProjectionGeoKey";d[3075]=
"ProjCoordTransGeoKey";d[3076]="ProjLinearUnitsGeoKey";d[3077]="ProjLinearUnitSizeGeoKey";d[3078]="ProjStdParallel1GeoKey";d[3079]="ProjStdParallel2GeoKey";d[3080]="ProjNatOriginLongGeoKey";d[3081]="ProjNatOriginLatGeoKey";d[3082]="ProjFalseEastingGeoKey";d[3083]="ProjFalseNorthingGeoKey";d[3084]="ProjFalseOriginLongGeoKey";d[3085]="ProjFalseOriginLatGeoKey";d[3086]="ProjFalseOriginEastingGeoKey";d[3087]="ProjFalseOriginNorthingGeoKey";d[3088]="ProjCenterLongGeoKey";d[3090]="ProjCenterEastingGeoKey";
d[3091]="ProjCenterNorthingGeoKey";d[3092]="ProjScaleAtNatOriginGeoKey";d[3093]="ProjScaleAtCenterGeoKey";d[3094]="ProjAzimuthAngleGeoKey";d[3095]="ProjStraightVertPoleLongGeoKey";d[4096]="VerticalCSTypeGeoKey";d[4097]="VerticalCitationGeoKey";d[4098]="VerticalDatumGeoKey";d[4099]="VerticalUnitsGeoKey";return d}();var r=new Map;r.set("EXIFIFD",A);r.set("GPSIFD","GPSVersionID GPSLatitudeRef GPSLatitude GPSLongitudeRef GPSLongitude GPSAltitudeRef GPSAltitude GPSTimeStamp GPSSatellites GPSStatus GPSMeasureMode GPSDOP GPSSpeedRef GPSSpeed GPSTrackRef GPSTrack GPSImgDirectionRef GPSImgDirection GPSMapDatum GPSDestLatitudeRef GPSDestLatitude GPSDestLongitudeRef GPSDestLongitude GPSDestBearingRef GPSDestBearing GPSDestDistanceRef GPSDestDistance GPSProcessingMethod GPSAreaInformation GPSDateStamp GPSDifferential GPSHPositioningError".split(" "));
return{TIFF_TAGS:e,ifdTags:r,GEO_KEYS:m,getTagName:function(d,q){q=(q||e)[d];void 0===q&&(q="unknown"+String(d));return q}}})},"esri/renderers/support/rasterRendererHelper":function(){define("require exports tslib ../../Color ../../rasterRenderers ../../core/arrayUtils ../../core/maybe ../../core/unitUtils ../../layers/support/RasterInfo ../../renderers/support/ClassBreakInfo ../../renderers/support/colorRampUtils ../../renderers/support/UniqueValueInfo ../../tasks/support/ClassBreaksDefinition ../../tasks/support/generateRendererUtils ../../tasks/support/MultipartColorRamp".split(" "),
function(A,m,e,r,d,q,n,l,g,p,c,a,b,h,k){function f(a,b){a=D(a,null===b||void 0===b?void 0:b.variableName);var c=a.bandCount,e=b||{};b=e.bandIds;e=e.stretchType;if(null===b||void 0===b?0:b.some(function(a){return a>=c}))b=null;var f=n.unwrap(a.statistics),h=n.unwrap(a.histograms);1<c?(b=(null===b||void 0===b?0:b.length)?b:F(a),f=null==f?null:b.map(function(a){return f[a]}),h=null==h?null:b.map(function(a){return h[a]})):b=[0];null==e&&(e=u(a));var k=!1;switch(e){case "none":k=!1;break;case "percent-clip":k=
!(null===h||void 0===h?0:h.length);break;default:k=!(null===f||void 0===f?0:f.length)}a=new d.RasterStretchRenderer({stretchType:e,dynamicRangeAdjustment:k,colorRamp:1===(null===b||void 0===b?void 0:b.length)&&"scientific"===a.dataType?H:null,outputMin:0,outputMax:255,gamma:1===b.length?[1]:[1,1,1],useGamma:!1});"percent-clip"===e?a.maxPercent=a.minPercent=.25:"standard-deviation"===e&&(a.numberOfStandardDeviations=2);if(!k)if("percent-clip"===e)a.histograms=h;else if("min-max"===e||"standard-deviation"===
e)a.statistics=f;return a}function D(a,b){if(null==b)return a;var c=n.unwrap(a.statistics),d=n.unwrap(a.histograms),f=a.multidimensionalInfo;if(b&&n.isSome(f)){var h=q.find(f.variables,function(a){return a.name===b}),f=h.statistics,h=h.histograms;if(null===f||void 0===f?0:f.length)c=f;if(null===h||void 0===h?0:h.length)d=h}return g.fromJSON(e.__assign(e.__assign({},a.toJSON()),{statistics:c,histograms:d}))}function F(a){var b=a.bandCount;if(1===b)return null;if(2===b)return[0];a=a.keyProperties&&
a.keyProperties.BandProperties;var c;if(a&&a.length===b){var d=v(a);a=d.red;var e=d.green,f=d.blue,d=d.nir;null!=a&&null!=e&&null!=f?c=[a,e,f]:null!=d&&null!=a&&null!=e&&(c=[d,a,e])}!c&&3<=b&&(c=[0,1,2]);return c}function v(a){for(var b,c={},d=0;d<a.length;d++){var e=a[d],f=null===(b=e.BandName)||void 0===b?void 0:b.toLowerCase();"red"===f?c.red=d:"green"===f?c.green=d:"blue"===f?c.blue=d:"nearinfrared"===f||"nearinfrared_1"===f||"nir"===f?c.nir=d:e.WavelengthMax&&e.WavelengthMin&&(f=e.WavelengthMin,
e=e.WavelengthMax,null==c.blue&&410<=f&&480>=f&&480<=e&&540>=e?c.blue=d:null==c.green&&490<=f&&560>=f&&560<=e&&610>=e?c.green=d:null==c.red&&595<=f&&670>=f&&660<=e&&730>=e?c.red=d:null==c.nir&&700<=f&&860>=f&&800<=e&&950>=e&&(c.nir=d))}return c}function u(a){var b="percent-clip",c=a.pixelType,d=a.dataType,e=a.histograms;a=a.statistics;"u8"!==c||"processed"!==d&&n.isSome(e)&&n.isSome(a)?"u8"===c||"elevation"===d||"scientific"===d?b="min-max":n.isSome(e)?b="percent-clip":n.isSome(a)&&(b=b="min-max"):
b="none";return b}function w(b,e){if(!x(b,e))return null;b=b.attributeTable;var f=y(b,e),h=C(b,"red"),k=C(b,"green"),g=C(b,"blue"),l=[],n=new Set,u=!!(h&&k&&g);b.features.forEach(function(b){var c=b.attributes[f.name];n.has(b.attributes[f.name])||null==c||(n.add(c),l.push(new a({value:b.attributes[f.name],label:b.attributes[f.name],symbol:{type:"simple-fill",style:"solid",outline:null,color:u?new r([b.attributes[h.name],b.attributes[k.name],b.attributes[g.name],1]):new r([0,0,0,0])}})))});if(!u){var v=
c.convertColorRampToColormap(G,l.length);l.forEach(function(a,b){return a.symbol.color=new r(v[b].slice(1,4))})}return new d.UniqueValueRenderer({field:f.name,uniqueValueInfos:l})}function y(a,b){var c=q.find(a.fields,function(a){return"string"===a.type&&(b===a.name.toLowerCase()||-1<a.name.toLowerCase().indexOf("class"))});c||(c=q.find(a.fields,function(a){return"string"===a.type}))||(c=C(a,"value"));return c}function C(a,b){return q.find(a.fields,function(a){return a.name.toLowerCase()===b})}function x(a,
b){var c=a.attributeTable;a=a.bandCount;return!n.isSome(c)||1<a||b&&null==q.find(c.fields,function(a){return a.name.toLowerCase()===b.toLowerCase()})?!1:!0}function t(a){var b=a.bandCount;a=a.colormap;return n.isSome(a)&&a.length&&1===b}function E(a){if(!t(a))return null;var b,c=a.attributeTable;a=a.colormap;if(n.isSome(c)){var e=C(c,"value"),f=y(c);"string"===f.type&&(b={},c.features.forEach(function(a){a=a.attributes;b[a[e.name]]=f?a[f.name]:a[e.name]}))}return d.RasterColormapRenderer.createFromColormap(n.unwrap(a),
b)}function z(a){return"elevation"===a.dataType}function B(a){var b=a.attributeTable;return 1===a.bandCount&&(n.isSome(b)||n.isSome(a.histograms))}Object.defineProperty(m,"__esModule",{value:!0});m.createClassBreaksRenderer=m.isClassBreaksSupported=m.createShadedReliefRenderer=m.isShadedReliefRendererSupported=m.createColormapRenderer=m.isColormapRendererSupported=m.isUVRendererSupported=m.getClassField=m.createUVRenderer=m.getWellKnownBandIndexes=m.getDefaultBandCombination=m.createStretchRenderer=
m.getDefaultInterpolation=m.getSupportedRendererTypes=m.createDefaultRenderer=void 0;var H=k.fromJSON({type:"multipart",colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]}),G=k.fromJSON(c.PREDEFINED_JSON_COLOR_RAMPS[0]);m.createDefaultRenderer=function(a,b){var c=a.attributeTable,e=a.colormap,h=a.dataType;return"vector-uv"===h||"vector-magdir"===h?new d.VectorFieldRenderer:n.isSome(e)&&(e=E(a),n.isSome(e))||
n.isSome(c)&&(e=w(a),n.isSome(e))?e:f(a,b)};m.getSupportedRendererTypes=function(a){var b=["raster-stretch"];t(a)&&b.push("raster-colormap");x(a)&&b.push("unique-value");B(a)&&b.push("class-breaks");z(a)&&b.push("raster-shaded-relief");return b};m.getDefaultInterpolation=function(a,b,c){var d=q.find(["nearest","bilinear","cubic","majority"],function(a){return a===(null===c||void 0===c?void 0:c.toLowerCase())});return"Map"===b?null!==d&&void 0!==d?d:"bilinear":"thematic"===a.dataType||a.attributeTable||
a.colormap?"nearest"===d||"majority"===d?d:"nearest":null!==d&&void 0!==d?d:"bilinear"};m.createStretchRenderer=f;m.getDefaultBandCombination=F;m.getWellKnownBandIndexes=v;m.createUVRenderer=w;m.getClassField=y;m.isUVRendererSupported=x;m.isColormapRendererSupported=t;m.createColormapRenderer=E;m.isShadedReliefRendererSupported=z;m.createShadedReliefRenderer=function(a,b){if(!z(a))return null;a=a.extent;a=a.width*l.getMetersPerUnitForSR(a.spatialReference);return new d.RasterShadedReliefRenderer({hillshadeType:null!==
b&&void 0!==b?b:"multi-directional",scalingType:5E6<a?"adjusted":"none"})};m.isClassBreaksSupported=B;m.createClassBreaksRenderer=function(a,e){a=D(a,null===e||void 0===e?void 0:e.variableName);var f=a.attributeTable;if(!B(a))return null;var k=n.isSome(a.histograms)?a.histograms[0]:null,g=(null===e||void 0===e?void 0:e.numClasses)||4,l=null===e||void 0===e?void 0:e.colors;if(l&&l.length!==g)return null;var u=(null===e||void 0===e?void 0:e.field)||"value",v=[];if(n.isSome(f)){var y=q.find(f.fields,
function(a){return"count"===a.name.toLowerCase()}),m=q.find(f.fields,function(a){return a.name.toLowerCase()===u.toLowerCase()}),u=m.name,w=f.features.length,t=0;f.features.forEach(function(a){return t+=a.attributes[y.name]/w});f.features.forEach(function(a){var b=a.attributes[m.name];a=a.attributes[y.name];if(0<a){a=Math.max(1,Math.round(a/w/t*1E3));for(var c=0;c<a;c++)v.push(b)}})}else{a=a.pixelType;var r=(k.max-k.min)/k.size,F=(a=-1<a.indexOf("s")||-1<a.indexOf("u"))&&1===r?Math.floor(k.min+.5):
k.min,C=a&&1===r?Math.floor(k.max-.5):k.max,x=k.size,z=0;k.counts.forEach(function(a){return z+=a/x});k.counts.forEach(function(a,b){if(0<a){a=Math.max(1,Math.round(a/x/z*1E3));b=0===b?F:b===x-1?C:k.min+r*(b+.5);for(var c=0;c<a;c++)v.push(b)}})}a=h.createGenerateRendererClassBreaks({values:v,normalizationTotal:null,definition:new b({classificationMethod:(null===e||void 0===e?void 0:e.classificationMethod)||"equal-interval",breakCount:g})});l||(l=c.convertColorRampToColormap((null===e||void 0===e?
void 0:e.colorRamp)||H,g,!0).map(function(a){return a.slice(1)}));e=a.classBreaks.map(function(a,b){return new p({minValue:a.minValue,maxValue:a.maxValue,label:a.label,symbol:{type:"simple-fill",color:l[b]}})});return new d.ClassBreaksRenderer({field:u,classBreakInfos:e})}})},"esri/tasks/support/ClassBreaksDefinition":function(){define("require exports tslib ../../core/jsonMap ../../core/accessorSupport/decorators ./ClassificationDefinition".split(" "),function(A,m,e,r,d,q){var n=new r.default({esriClassifyEqualInterval:"equal-interval",
esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),l=new r.default({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});return function(g){function p(){var c=null!==g&&g.apply(this,arguments)||this;c.breakCount=null;c.classificationField=null;c.classificationMethod=null;c.normalizationField=null;c.normalizationType=null;c.type="class-breaks-definition";
return c}e.__extends(p,g);Object.defineProperty(p.prototype,"standardDeviationInterval",{set:function(c){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",c)},enumerable:!1,configurable:!0});e.__decorate([d.property({json:{write:!0}})],p.prototype,"breakCount",void 0);e.__decorate([d.property({json:{write:!0}})],p.prototype,"classificationField",void 0);e.__decorate([d.property({type:String,json:{read:n.read,write:n.write}})],p.prototype,"classificationMethod",
void 0);e.__decorate([d.property({json:{write:!0}})],p.prototype,"normalizationField",void 0);e.__decorate([d.property({json:{read:l.read,write:l.write}})],p.prototype,"normalizationType",void 0);e.__decorate([d.property({value:null,json:{write:!0}})],p.prototype,"standardDeviationInterval",null);e.__decorate([d.property()],p.prototype,"type",void 0);return p=e.__decorate([d.subclass("esri.tasks.support.ClassBreaksDefinition")],p)}(q)})},"esri/tasks/support/ClassificationDefinition":function(){define("require exports tslib ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators ../../symbols/Symbol ./colorRamps".split(" "),
function(A,m,e,r,d,q,n,l){var g=new r.default({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});return function(d){function c(){var a=null!==d&&d.apply(this,arguments)||this;a.baseSymbol=null;a.colorRamp=null;a.type=null;return a}e.__extends(c,d);e.__decorate([q.property({type:n,json:{write:!0}})],c.prototype,"baseSymbol",void 0);e.__decorate([q.property({types:l.types,json:{read:{reader:l.fromJSON},write:!0}})],c.prototype,"colorRamp",void 0);e.__decorate([q.property({json:{read:g.read,
write:g.write}})],c.prototype,"type",void 0);return c=e.__decorate([q.subclass("esri.tasks.support.ClassificationDefinition")],c)}(d.JSONSupport)})},"esri/tasks/support/generateRendererUtils":function(){define(["require","exports"],function(A,m){function e(a){var b=a.definition,c=b.classificationMethod,e=b.breakCount,f=b.normalizationType,n=[],m=a.values;if(0===m.length)return[];var m=m.sort(function(a,b){return a-b}),v=m[0];a=m[m.length-1];if("equal-interval"===c)if(m.length>=e){m=(a-v)/e;c=v;for(b=
1;b<e;b++){var u=Number((v+b*m).toFixed(6));n.push({minValue:c,maxValue:u,label:r(c,u,f)});c=u}n.push({minValue:c,maxValue:a,label:r(c,a,f)})}else m.forEach(function(a){n.push({minValue:a,maxValue:a,label:r(a,a,f)})});else if("natural-breaks"===c){for(var m=d(m),w=q(m.uniqueValues,m.valueFrequency,e),c=v,b=1;b<e;b++)m.uniqueValues.length>b&&(u=Number(m.uniqueValues[w[b]].toFixed(6)),n.push({minValue:c,maxValue:u,label:r(c,u,f)}),c=u);n.push({minValue:c,maxValue:a,label:r(c,a,f)})}else if("quantile"===
c)if(m.length>=e&&v!==a){c=v;v=Math.ceil(m.length/e);u=0;for(b=1;b<e;b++)w=v+u-1,w>m.length&&(w=m.length-1),0>w&&(w=0),n.push({minValue:c,maxValue:m[w],label:r(c,m[w],f)}),c=m[w],u+=v,v=Math.ceil((m.length-u)/(e-b));n.push({minValue:c,maxValue:a,label:r(c,a,f)})}else for(c=-1,b=0;b<m.length;b++)u=m[b],u!==c&&(c=u,n.push({minValue:c,maxValue:u,label:r(c,u,f)}),c=u);else if("standard-deviation"===c)if(w=g(m),c=p(m,w),0===c)n.push({minValue:m[0],maxValue:m[0],label:r(m[0],m[0],f)});else{for(var m=l(v,
a,e,w,c),m=m*c,y=0,c=v,b=e;1<=b;b--)v=Number((w-(b-.5)*m).toFixed(6)),n.push({minValue:c,maxValue:v,label:r(c,v,f)}),c=v,y++;u=Number((w+.5*m).toFixed(6));n.push({minValue:c,maxValue:u,label:r(c,u,f)});c=u;y++;for(b=1;b<=e;b++)u=y===2*e?a:Number((w+(b+.5)*m).toFixed(6)),n.push({minValue:c,maxValue:u,label:r(c,u,f)}),c=u,y++}return n}function r(a,b,c){var d=null;return d=a===b?c&&"percent-of-total"===c?a+"%":a.toString():c&&"percent-of-total"===c?a+"% - "+b+"%":a+" - "+b}function d(a){for(var b=[],
c=[],d=Number.MIN_VALUE,e=1,g=-1,l=0;l<a.length;l++){var n=a[l];n===d?(e++,c[g]=e):null!==n&&(b.push(n),d=n,e=1,c.push(e),g++)}return{uniqueValues:b,valueFrequency:c}}function q(a,b,d){var e=a.length,f=[];d>e&&(d=e);for(var h=0;h<d;h++)f.push(Math.round(h*e/d-1));f.push(e-1);for(var h=n(f,a,b,d),e=h.mean,h=h.sdcm,g=d,l=0,u=0,m=0,p=0,q=!0,r=0;2>r&&q;r++){0===r&&(q=!1);for(var t=0;t<g-1;t++)for(;f[t+1]+1!==f[t+2];)if(f[t+1]+=1,l=c(t,f,a,b),m=l.sbMean,l=l.sbSdcm,u=c(t+1,f,a,b),p=u.sbMean,u=u.sbSdcm,
l+u<h[t]+h[t+1])h[t]=l,h[t+1]=u,e[t]=m,e[t+1]=p,q=!0;else{--f[t+1];break}for(t=g-1;0<t;t--)for(;f[t]!==f[t-1]+1;)if(--f[t],l=c(t-1,f,a,b),m=l.sbMean,l=l.sbSdcm,u=c(t,f,a,b),p=u.sbMean,u=u.sbSdcm,l+u<h[t-1]+h[t])h[t-1]=l,h[t]=u,e[t-1]=m,e[t]=p,q=!0;else{f[t]+=1;break}}q&&(h=n(f,a,b,d));return f}function n(a,b,d,e){for(var f=[],h=[],k=[],g=0,l=[],n=[],m=0;m<e;m++){var p=c(m,a,b,d);l.push(p.sbMean);n.push(p.sbSdcm);g+=n[m]}for(var q=g,t=!0;t||g<q;){t=!1;f=[];for(m=0;m<e;m++)f.push(a[m]);for(m=0;m<e;m++)for(k=
a[m]+1;k<=a[m+1];k++)if(h=b[k],0<m&&k!==a[m+1]&&Math.abs(h-l[m])>Math.abs(h-l[m-1]))a[m]=k;else if(m<e-1&&a[m]!==k-1&&Math.abs(h-l[m])>Math.abs(h-l[m+1])){a[m+1]=k-1;break}q=g;g=0;h=[];k=[];for(m=0;m<e;m++)h.push(l[m]),k.push(n[m]),p=c(m,a,b,d),l[m]=p.sbMean,n[m]=p.sbSdcm,g+=n[m]}if(g>q){for(m=0;m<e;m++)a[m]=f[m],l[m]=h[m],n[m]=k[m];g=q}return{mean:l,sdcm:n}}function l(a,b,c,d,e){a=Math.max(d-a,b-d)/e/c;return 1<=a?1:.5<=a?.5:.25}function g(a){for(var b=0,c=0;c<a.length;c++)b+=a[c];return b/=a.length}
function p(a,b){for(var c=0,d=0;d<a.length;d++)var e=a[d],c=c+(e-b)*(e-b);c/=a.length;return Math.sqrt(c)}function c(a,b,c,d){for(var e=0,h=0,k=b[a]+1;k<=b[a+1];k++)var g=d[k],e=e+c[k]*g,h=h+g;0>=h&&console.log("Exception in Natural Breaks calculation");e/=h;h=0;for(k=b[a]+1;k<=b[a+1];k++)h+=d[k]*Math.pow(c[k]-e,2);return{sbMean:e,sbSdcm:h}}Object.defineProperty(m,"__esModule",{value:!0});m.createGenerateRendererClassBreaks=m.createGenerateRendererUniqueValues=void 0;m.createGenerateRendererUniqueValues=
function(a){a=d(a);for(var b=[],c=a.uniqueValues.length,e=0;e<c;e++){var f=a.uniqueValues[e];b.push({value:f,count:a.valueFrequency[e],label:f.toString()})}return{uniqueValues:b}};m.createGenerateRendererClassBreaks=function(a){var b=a.normalizationTotal;return{classBreaks:e(a),normalizationTotal:b}}})},"esri/renderers/support/RasterSymbolizer":function(){define("require exports tslib ../../rasterRenderers ../../core/colorUtils ../../core/JSONSupport ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators ../../layers/support/imageryRendererUtils ../../layers/support/RasterInfo ../../layers/support/rasterFunctions/pixelUtils ../../layers/support/rasterFunctions/surfaceUtils ../support/colorRampUtils ./rasterRendererHelper".split(" "),
function(A,m,e,r,d,q,n,l,g,p,c,a,b,h,k){var f=n.getLogger("esri.renderers.support.RasterSymbolizer");return function(n){function m(a){return n.call(this,a)||this}e.__extends(m,n);m.prototype.readRenderer=function(a,b,c){return r.read(a,c)};m.prototype.bind=function(){if(!this.renderer)return!1;this.lookup={rendererJson:{}};var a;switch(this.renderer.type){case "unique-value":a=this._updateUVRenderer(this.renderer);break;case "raster-colormap":a=this._updateColormapRenderer(this.renderer);break;case "raster-stretch":a=
this._updateStretchRenderer(this.renderer);break;case "class-breaks":a=this._updateClassBreaksRenderer(this.renderer);break;case "raster-shaded-relief":a=this._updateShadedReliefRenderer(this.renderer)}return a};m.prototype.symbolize=function(b){var c=b&&b.pixelBlock;if(!this.isValidPixelBlock(c))return c;if(b.simpleStretchParams&&"raster-stretch"===this.renderer.type)return this.simpleStretch(c,b.simpleStretchParams);try{3<c.pixels.length&&(c=a.extractBands(c,[0,1,2]));var d=void 0;switch(this.renderer.type){case "unique-value":case "raster-colormap":d=
this._symbolize_colormap(c);break;case "class-breaks":d=this._symbolize_classBreaks(c);break;case "raster-stretch":d=this._symbolize_stretch(c,b.bandIds);break;case "raster-shaded-relief":var e=b.extent,d=this._symbolize_shadedRelief(c,{isGCS:e.spatialReference.isGeographic,resolution:{x:(e.xmax-e.xmin)/c.width,y:(e.ymax-e.ymin)/c.height}})}return d}catch(C){return f.error("symbolize",C.message),c}};m.prototype.simpleStretch=function(b,c){if(!this.isValidPixelBlock(b))return b;try{return 3<b.pixels.length&&
(b=a.extractBands(b,[0,1,2])),a.stretch(b,c)}catch(w){return f.error("symbolize",w.message),b}};m.prototype.generateWebGLParameters=function(a){if(-1<["unique-value","raster-colormap","class-breaks"].indexOf(this.renderer.type)){var b=this.lookup.colormapLut;return{colormap:b.indexedColormap,colormapOffset:b.offset,type:"lut"}}var b=a.pixelBlock,c=a.isGCS,d=a.resolution;a=a.bandIds;return"raster-stretch"===this.renderer.type?this.generateStretchWebGLParams(b,this.renderer,a):"raster-shaded-relief"===
this.renderer.type?this.generateShadedReliefWebGLParams(this.renderer,c,d):null};m.prototype._isLUTChanged=function(a){if(!this.lookup||!this.lookup.rendererJson)return!0;if("colorRamp"in this.renderer){var b=this.renderer.colorRamp;if(a)return JSON.stringify(b.toJSON())!==JSON.stringify(this.lookup.rendererJson.colorRamp);a=e.__assign({},this.renderer.toJSON());b=e.__assign({},this.lookup.rendererJson);a.colorRamp=null;b.colorRamp=null}return JSON.stringify(this.renderer.toJSON())!==JSON.stringify(this.lookup.rendererJson)};
m.prototype._symbolize_colormap=function(b){return this._isLUTChanged()&&!this.bind()?b:a.colorize(b,this.lookup.colormapLut)};m.prototype._symbolize_classBreaks=function(b){var c=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType);return this._isLUTChanged()&&!this.bind()?b:c?a.colorize(b,this.lookup.colormapLut):a.remapColor(b,this.lookup.remapLut)};m.prototype._symbolize_stretch=function(b,c){var d=this.rasterInfo,f=d.pixelType,h=d.bandCount,d=this.renderer,k=-1<["u8","u16","s8","s16"].indexOf(f),
g,l=d.gamma,n=d.useGamma;if(k){if(d.dynamicRangeAdjustment)k=this.getStretchCutoff(d,b,c),g=a.createStretchLUT(e.__assign(e.__assign({pixelType:f},k),{gamma:n?l:null}));else{if(this._isLUTChanged()&&(f=this.bind(),!f))return b;g=this.lookup?this.lookup.stretchLut:null}if(!g)return b;1<h&&(null===c||void 0===c?void 0:c.length)===b.pixels.length&&(null===g||void 0===g?void 0:g.lut.length)===h&&(g={lut:c.map(function(a){return g.lut[a]}),offset:g.offset});c=a.lookupPixels(b,g)}else k=this.getStretchCutoff(d,
b,c),c=a.stretch(b,e.__assign(e.__assign({},k),{gamma:n?l:null}));if(d.colorRamp){if(this._isLUTChanged(!0)&&(f=this.bind(),!f))return b;c=a.colorize(c,this.lookup.colormapLut)}return c};m.prototype._symbolize_shadedRelief=function(a,c){var d,f,h=this.renderer;c=e.__assign(e.__assign({},h.toJSON()),c);c=b.hillshade(a,c);if(!h.colorRamp||this._isLUTChanged(!0)&&!this.bind())return c;h=this.lookup?this.lookup.hsvMap:null;if(!h)return c;var k=null!==(f=null===(d=l.unwrap(this.rasterInfo.statistics))||
void 0===d?void 0:d[0])&&void 0!==f?f:{min:0,max:8E3};b.tintHillshade(c,a,h,k);return c};m.prototype._updateUVRenderer=function(b){var c=this.rasterInfo,d=c.bandCount,e=c.attributeTable,f=c.statistics,h=b.field;if(!h)return!1;c=-1<["u8","s8"].indexOf(c.pixelType)&&f&&null!=f[0].min&&null!=f[0].max;if(!(k.isUVRendererSupported(this.rasterInfo,h)||1===d&&c))return!1;var g=[];if(e){var l=e.fields.filter(function(a){return"value"===a.name.toLowerCase()})[0];if(!l)return!1;e.features.forEach(function(a){var c=
b.uniqueValueInfos.filter(function(b){return String(b.value)===String(a.attributes[h])})[0];(c=c&&c.symbol&&c.symbol.color)&&g.push([a.attributes[l.name],c.r,c.g,c.b,1<c.a?c.a:Math.round(255*c.a)])})}else{if("value"!==h.toLowerCase())return!1;b.uniqueValueInfos.forEach(function(a){var b=a&&a.symbol&&a.symbol.color;b&&g.push([parseInt(""+a.value,10),b.r,b.g,b.b,1<b.a?b.a:Math.round(255*b.a)])})}if(0===g.length)return!1;d=a.createColormapLUT({colormap:g});this.lookup={rendererJson:b.toJSON(),colormapLut:d};
return this.canRenderInWebGL=!0};m.prototype._updateColormapRenderer=function(b){var c=b.extractColormap();if(!c||0===c.length)return!1;c=a.createColormapLUT({colormap:c});this.lookup={rendererJson:b.toJSON(),colormapLut:c};return this.canRenderInWebGL=!0};m.prototype._updateShadedReliefRenderer=function(b){if(!k.isShadedReliefRendererSupported(this.rasterInfo))return!1;if(b.colorRamp){for(var c=h.convertColorRampToColormap(b.colorRamp,256,!0),c=a.createColormapLUT({colormap:c}),e=[],f=c.indexedColormap,
g=0;g<f.length;g+=4){var l=d.toHSV({r:f[g],g:f[g+1],b:f[g+2]});e.push([l.h/60,l.s/100,255*l.v/100])}this.lookup={rendererJson:b.toJSON(),colormapLut:c,hsvMap:e}}else this.lookup=null;return this.canRenderInWebGL=!0};m.prototype._updateClassBreaksRenderer=function(b){var c=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType),d=b.classBreakInfos;if(!d||0===d.length)return!1;var e=d.sort(function(a,b){return a.minValue-b.minValue}),d=e[e.length-1];if(!c)return c=e.map(function(a){return{value:a.minValue,
mappedColor:[a.symbol.color.r,a.symbol.color.g,a.symbol.color.b,1<a.symbol.color.a?a.symbol.color.a:Math.round(255*a.symbol.color.a)]}}),c.push({value:d.maxValue,mappedColor:[d.symbol.color.g,d.symbol.color.b,1<d.symbol.color.a?d.symbol.color.a:Math.round(255*d.symbol.color.a)]}),this.lookup={rendererJson:b.toJSON(),remapLut:c},this.canRenderInWebGL=!1,!0;var f=[],h,k=0;e.forEach(function(a){h=Math.ceil(a.minValue);k=Math.floor(a.maxValue);for(var b=h;b<k;b++)f.push([b,a.symbol.color.r,a.symbol.color.g,
a.symbol.color.b,1<a.symbol.color.a?a.symbol.color.a:Math.round(255*a.symbol.color.a)])});f.push([d.maxValue,d.symbol.color.r,d.symbol.color.g,d.symbol.color.b,1<d.symbol.color.a?d.symbol.color.a:Math.round(255*d.symbol.color.a)]);c=a.createColormapLUT({colormap:f,fillUnspecified:!1});this.lookup={rendererJson:b.toJSON(),colormapLut:c};return this.canRenderInWebGL=!0};m.prototype._updateStretchRenderer=function(b){if(!(b.statistics||this.rasterInfo.statistics||b.dynamicRangeAdjustment))return!1;var c=
b.histograms||this.rasterInfo.histograms;if(!b.dynamicRangeAdjustment&&"percent-clip"===b.stretchType&&!c)return!1;var d=b.gamma,f=b.useGamma,c=b.colorRamp,k=this.rasterInfo.pixelType;if(!b.dynamicRangeAdjustment&&-1<["u8","u16","s8","s16"].indexOf(k)){var g=this.getStretchCutoff(b),d=a.createStretchLUT(e.__assign(e.__assign({pixelType:k},g),{gamma:f?d:null}));this.lookup={rendererJson:b.toJSON(),stretchLut:d}}c&&(c=h.convertColorRampToColormap(c,256,!0),this.lookup||(this.lookup={rendererJson:b.toJSON()}),
this.lookup.colormapLut=a.createColormapLUT({colormap:c}),this.lookup.rendererJson=b.toJSON());return this.canRenderInWebGL=!0};m.prototype.getStretchCutoff=function(b,c,d){var e,f,h,k=b.stretchType;b.dynamicRangeAdjustment?"min-max"===k&&c.statistics?f=c.statistics.map(function(a){return[a.minValue,a.maxValue,0,0]}):(h=a.estimateStatisticsHistograms(c),f=h.statistics,h=h.histograms):(f=0<(null===(e=b.statistics)||void 0===e?void 0:e.length)?b.statistics:l.unwrap(this.rasterInfo.statistics),h=b.histograms||
l.unwrap(this.rasterInfo.histograms));var g=f||h?(f||h).length:this.rasterInfo.bandCount;e=[];c=[];var n,m,q,u,v;f&&!Array.isArray(f[0])&&(f=f.map(function(a){return[a.min,a.max,a.avg,a.stddev]}));switch(k){case "none":h=p.pixelTypeRanges[this.rasterInfo.pixelType]||p.pixelTypeRanges.f32;for(k=0;k<g;k++)e[k]=h[0],c[k]=h[1];break;case "min-max":for(k=0;k<g;k++)e[k]=f[k][0],c[k]=f[k][1];break;case "standard-deviation":for(k=0;k<g;k++)e[k]=f[k][2]-b.numberOfStandardDeviations*f[k][3],c[k]=f[k][2]+b.numberOfStandardDeviations*
f[k][3],e[k]<f[k][0]&&(e[k]=f[k][0]),c[k]>f[k][1]&&(c[k]=f[k][1]);break;case "percent-clip":for(k=0;k<h.length;k++){f=h[k];q=new Uint32Array(f.size);m=f.counts;n=0;g=(f.max-f.min)/f.size;u=-.5===f.min&&1===g?.5:0;for(v=0;v<f.size;v++)n+=m[v],q[v]=n;m=b.minPercent*n/100;for(v=0;v<f.size;v++)if(q[v]>m){e[k]=f.min+g*(v+u);break}m=(1-b.maxPercent/100)*n;for(v=f.size-2;0<=v;v--)if(q[v]<m){c[k]=f.min+g*(v+2-u);break}}break;default:for(k=0;k<g;k++)e[k]=f[k][0],c[k]=f[k][1]}return this.getSelectedBandCutoffs({minCutOff:e,
maxCutOff:c,outMax:b.outputMax||255,outMin:b.outputMin||0},d)};m.prototype.getSelectedBandCutoffs=function(a,b){if(null==b||0===b.length)return a;var c=Math.max.apply(null,b),d=a.minCutOff,e=a.maxCutOff,f=a.outMin,h=a.outMax;return d.length===b.length||d.length<=c?a:{minCutOff:b.map(function(a){return d[a]}),maxCutOff:b.map(function(a){return e[a]}),outMin:f,outMax:h}};m.prototype.generateStretchWebGLParams=function(a,b,c){var d=null,e=null,f=this.lookup&&this.lookup.colormapLut;b.colorRamp&&f&&(d=
f.indexedColormap,e=f.offset);var f=b.gamma,h=!!(b.useGamma&&f&&f.some(function(a){return 1!==a})),k=this.getStretchCutoff(b,a,c);b=k.minCutOff;var g=k.maxCutOff,l=k.outMin,k=k.outMax;a&&a.pixels&&2===a.pixels.length&&(a=a.clone(),a.statistics=[a.statistics[0]],a.pixels=[a.pixels[0]]);a=Math.min(3,c&&c.length||a&&a.getPlaneCount()||this.rasterInfo.bandCount);c=new Float32Array(a);var n=d||h?1:255,m;for(m=0;m<a;m++)c[m]=(k-l)/(g[m]-b[m])/n;var p=new Float32Array(a);if(h)for(m=0;m<a;m++)p[m]=1<f[m]?
2<f[m]?6.5+Math.pow(f[m]-2,2.5):6.5+100*Math.pow(2-f[m],4):1;return{bandCount:a,outMin:l/n,outMax:k/n,minCutOff:b,maxCutOff:g,factor:c,useGamma:h,gamma:h?f:[1,1,1],gammaCorrection:h?p:[1,1,1],colormap:d,colormapOffset:e,type:"stretch"}};m.prototype.generateShadedReliefWebGLParams=function(a,c,d){var f,h,k,g=null,n=null,m=this.lookup&&this.lookup.colormapLut;a.colorRamp&&m&&(g=m.indexedColormap,n=m.offset);c=e.__assign(e.__assign({},a.toJSON()),{isGCS:c,resolution:d});c=b.calculateHillshadeParams(c);
d=null===(f=l.unwrap(this.rasterInfo.statistics))||void 0===f?void 0:f[0];return e.__assign(e.__assign({},c),{minValue:null!==(h=d.min)&&void 0!==h?h:0,maxValue:null!==(k=d.max)&&void 0!==k?k:8E3,hillshadeType:"traditional"===a.hillshadeType?0:1,type:"hillshade",colormap:g,colormapOffset:n})};m.prototype.isValidPixelBlock=function(a){return!!(a&&a.pixels&&0<a.pixels.length&&0!==a.validPixelCount)};e.__decorate([g.property({types:r.rasterRendererTypes,json:{write:!0}})],m.prototype,"renderer",void 0);
e.__decorate([g.reader("renderer")],m.prototype,"readRenderer",null);e.__decorate([g.property({type:c,json:{write:!0}})],m.prototype,"rasterInfo",void 0);e.__decorate([g.property({json:{write:!0}})],m.prototype,"lookup",void 0);e.__decorate([g.property({})],m.prototype,"canRenderInWebGL",void 0);return m=e.__decorate([g.subclass("esri.renderers.support.RasterSymbolizer")],m)}(q.JSONSupport)})},"esri/layers/support/rasterFunctions/pixelUtils":function(){define(["require","exports","../PixelBlock"],
function(A,m,e){function r(a,b){a=Math.min(Math.max(a,-100),100);b=Math.min(Math.max(b,-100),100);var c,d,e=new Uint8Array(256);for(c=0;256>c;c++)0<a&&100>a?d=(200*c-25500+510*b)/(2*(100-a))+128:0>=a&&-100<a?d=(200*c-25500+510*b)*(100+a)/2E4+128:100===a?(d=200*c-25500+256*(100-a)+510*b,d=0<d?255:0):-100===a&&(d=128),e[c]=255<d?255:0>d?0:d;return e}function d(a,b,c,d,e,g,l,n){return{xmin:e<=c*a?0:e<c*a+a?e-c*a:a,ymin:g<=d*b?0:g<d*b+b?g-d*b:b,xmax:e+l<=c*a?0:e+l<c*a+a?e+l-c*a:a,ymax:g+n<=d*b?0:g+n<
d*b+b?g+n-d*b:b}}function q(a,b,h,k){var f=a.filter(function(a){return c(a)})[0];if(null==f)return null;var g=k?k.width:b.width;k=k?k.height:b.height;var l=f.width,n=f.height,m=b.width/l;b=b.height/n;var p=h?h.x:0;h=h?h.y:0;var q=f.pixelType,r=e.getPixelArrayConstructor(q),x=f.pixels.length,f=[],t,E,z,B,H,G,A,I,J,L;for(H=0;H<x;H++){E=new r(g*k);for(G=0;G<b;G++)for(A=0;A<m;A++)if(z=a[G*m+A])for(t=z.pixels[H],L=d(l,n,A,G,p,h,g,k),I=L.ymin;I<L.ymax;I++)for(z=(G*n+I-h)*g+(A*l-p),B=I*l,J=L.xmin;J<L.xmax;J++)E[z+
J]=t[B+J];f.push(E)}var M;if(a.some(function(a){return null==a||a.mask&&0<a.mask.length}))for(M=new Uint8Array(g*k),G=0;G<b;G++)for(A=0;A<m;A++)if(r=(z=a[G*m+A])?z.mask:null,L=d(l,n,A,G,p,h,g,k),r)for(I=L.ymin;I<L.ymax;I++)for(z=(G*n+I-h)*g+(A*l-p),B=I*l,J=L.xmin;J<L.xmax;J++)M[z+J]=r[B+J];else if(z)for(I=L.ymin;I<L.ymax;I++)for(z=(G*n+I-h)*g+(A*l-p),B=I*l,J=L.xmin;J<L.xmax;J++)M[z+J]=1;else for(I=L.ymin;I<L.ymax;I++)for(z=(G*n+I-h)*g+(A*l-p),B=I*l,J=L.xmin;J<L.xmax;J++)M[z+J]=0;a=new e({width:g,
height:k,pixels:f,pixelType:q,mask:M});a.updateStatistics();return a}function n(a){if(!c(a))return null;var b=a.clone(),d=a.width,e=a.height,f=a.mask;a=a.pixels[0];for(var n=b.pixels[0],m=2;m<e-1;m++){for(var q=new Map,u=m-2;u<m+2;u++)for(var r=0;4>r;r++){var y=u*d+r;p(q,a[y],f?f[y]:1)}n[m*d]=l(q);n[m*d+1]=n[m*d+2]=n[m*d];for(u=3;u<d-1;u++)y=(m-2)*d+u+1,p(q,a[y],f?f[y]:1),y=(m-1)*d+u+1,p(q,a[y],f?f[y]:1),y=m*d+u+1,p(q,a[y],f?f[y]:1),y=(m+1)*d+u+1,p(q,a[y],f?f[y]:1),y=(m-2)*d+u-3,g(q,a[y],f?f[y]:1),
y=(m-1)*d+u-3,g(q,a[y],f?f[y]:1),y=m*d+u-3,g(q,a[y],f?f[y]:1),y=(m+1)*d+u-3,g(q,a[y],f?f[y]:1),n[m*d+u]=l(q);n[m*d+u+1]=n[m*d+u]}for(u=0;u<d;u++)n[u]=n[d+u]=n[2*d+u],n[(e-1)*d+u]=n[(e-2)*d+u];b.updateStatistics();return b}function l(a){if(0===a.size)return 0;for(var b=0,c=-1,d=0,e=a.keys(),g=e.next();!g.done;)d=a.get(g.value),d>b&&(c=g.value,b=d),g=e.next();return c}function g(a,b,c){0!==c&&(c=a.get(b),1===c?a.delete(b):a.set(b,c-1))}function p(a,b,c){0!==c&&a.set(b,a.has(b)?a.get(b)+1:1)}Object.defineProperty(m,
"__esModule",{value:!0});m.approximateTransform=m.clip=m.resampleByMajority=m.setValidBoundary=m.mosaic=m.mosaicPixelData=m.getClipBounds=m.remapColor=m.lookupPixels=m.stretch=m.createContrastBrightnessLUT=m.createStretchLUT=m.estimateStatisticsFromHistograms=m.estimateStatisticsHistograms=m.colorize=m.createColormapLUT=m.extractBands=void 0;var c=function(a){return a&&"esri.layers.support.PixelBlock"===a.declaredClass&&a.pixels&&0<a.pixels.length};m.extractBands=function(a,b){if(!b||!c(a))return a;
var d=a.pixels.length;return b&&b.some(function(a){return a>=d})||1===d&&1===b.length&&0===b[0]||d===b.length&&!b.some(function(a,b){return a!==b})?a:new e({pixelType:a.pixelType,width:a.width,height:a.height,mask:a.mask,validPixelCount:a.validPixelCount,maskIsAlpha:a.maskIsAlpha,pixels:b.map(function(b){return a.pixels[b]}),statistics:a.statistics&&b.map(function(b){return a.statistics[b]})})};m.createColormapLUT=function(a){if(a){var b=a.colormap;if(b&&0!==b.length){var b=b.sort(function(a,b){return a[0]-
b[0]}),c=0;0>b[0][0]&&(c=b[0][0]);var d=Math.max(256,b[b.length-1][0]-c+1),e=new Uint8Array(4*d),g=[],l=0,n=0,m=5===b[0].length;if(65536<d)return b.forEach(function(a){g[a[0]-c]=m?a.slice(1):a.slice(1).concat([255])}),{indexed2DColormap:g,offset:c,alphaSpecified:m};if(a.fillUnspecified)for(a=b[n],l=a[0]-c;l<d;l++)e[4*l]=a[1],e[4*l+1]=a[2],e[4*l+2]=a[3],e[4*l+3]=m?a[4]:255,l===a[0]-c&&(a=n===b.length-1?a:b[++n]);else for(l=0;l<b.length;l++)a=b[l],n=4*(a[0]-c),e[n]=a[1],e[n+1]=a[2],e[n+2]=a[3],e[n+
3]=m?a[4]:255;return{indexedColormap:e,offset:c,alphaSpecified:m}}}};m.colorize=function(a,b){if(!c(a)||!b&&(b.indexedColormap||b.indexed2DColormap))return a;var d=a.clone(),e=d.pixels,f=d.mask,g=d.width*d.height;if(1!==e.length)return a;var l=b.indexedColormap;a=b.indexed2DColormap;var n=b.offset;b=b.alphaSpecified;var m=l.length-1,q=0,e=e[0],p=new Uint8Array(e.length),r=new Uint8Array(e.length),x=new Uint8Array(e.length),t=0;if(l)if(f)for(q=0;q<g;q++)f[q]&&(t=4*(e[q]-n),t<n||t>m?f[q]=0:(p[q]=l[t],
r[q]=l[t+1],x[q]=l[t+2],f[q]=l[t+3]));else{f=new Uint8Array(g);for(q=0;q<g;q++)t=4*(e[q]-n),t<n||t>m?f[q]=0:(p[q]=l[t],r[q]=l[t+1],x[q]=l[t+2],f[q]=l[t+3]);d.mask=f}else if(f)for(q=0;q<g;q++)f[q]&&(l=a[e[q]],p[q]=l[0],r[q]=l[1],x[q]=l[2],f[q]=l[3]);else{f=new Uint8Array(g);for(q=0;q<g;q++)l=a[e[q]],p[q]=l[0],r[q]=l[1],x[q]=l[2],f[q]=l[3];d.mask=f}d.pixels=[p,r,x];d.statistics=null;d.pixelType="u8";d.maskIsAlpha=b;return d};m.estimateStatisticsHistograms=function(a){if(!c(a))return null;a.statistics||
a.updateStatistics();var b=a.pixels,d=a.mask,e=a.pixelType,f=a.statistics;a=a.width*a.height;var g=b.length,l,n,m,q,p,r=[],x=[],t,E,z;for(q=0;q<g;q++){t=new Uint32Array(256);z=b[q];if("u8"===e)if(l=-.5,n=255.5,d)for(p=0;p<a;p++)d[p]&&t[z[p]]++;else for(p=0;p<a;p++)t[z[p]]++;else{l=f[q].minValue;n=f[q].maxValue;m=(n-l)/256;E=new Uint32Array(257);if(d)for(p=0;p<a;p++)d[p]&&E[Math.floor((z[p]-l)/m)]++;else for(p=0;p<a;p++)E[Math.floor((z[p]-l)/m)]++;for(p=0;255>p;p++)t[p]=E[p];t[255]=E[255]+E[256]}r.push({min:l,
max:n,size:256,counts:t});for(p=z=E=m=0;256>p;p++)m+=t[p],E+=p*t[p];E/=m;for(p=0;256>p;p++)z+=t[p]*Math.pow(p-E,2);t=Math.sqrt(z/(m-1));m=(n-l)/256;p=(E+.5)*m+l;t*=m;x.push({min:l,max:n,avg:p,stddev:t})}return{statistics:x,histograms:r}};m.estimateStatisticsFromHistograms=function(a){for(var b=[],c=0;c<a.length;c++){for(var d=a[c],e=d.min,g=d.max,l=d.size,n=d.counts,m=d=0,q=0;q<l;q++)d+=n[q],m+=q*n[q];for(var m=m/d,p=0,q=0;q<l;q++)p+=n[q]*Math.pow(q-m,2);l=(g-e)/l;b.push({min:e,max:g,avg:(m+.5)*l+
e,stddev:Math.sqrt(p/(d-1))*l})}return b};m.createStretchLUT=function(a){var b=a.minCutOff,c=a.maxCutOff,d=a.gamma,e=a.pixelType,g=a.outMin||0,l=a.outMax||255;if(-1===["u8","u16","s8","s16"].indexOf(e))return null;var n=b.length,m,q=0;"s8"===e?q=-127:"s16"===e&&(q=-32767);var p=256;-1<["u16","s16"].indexOf(e)&&(p=65536);for(var C=[],x=l-g,e=0;e<n;e++)C[e]=c[e]-b[e];m=d&&d.length>=n;var t=[];if(m)for(e=0;e<n;e++)t[e]=1<d[e]?2<d[e]?6.5+Math.pow(d[e]-2,2.5):6.5+100*Math.pow(2-d[e],4):1;var E,z=[],B,
H,A;if(m)for(e=0;e<n;e++){A=[];for(m=0;m<p;m++)B=m+q,E=(B-b[e])/C[e],H=1,1<d[e]&&(H-=Math.pow(1/x,E*t[e])),A[m]=B<c[e]&&B>b[e]?Math.floor(H*x*Math.pow(E,1/d[e]))+g:B>=c[e]?l:g;z[e]=A}else for(e=0;e<n;e++){A=[];for(m=0;m<p;m++)B=m+q,A[m]=B<=b[e]?g:B>=c[e]?l:Math.floor((B-b[e])/C[e]*x)+g;z[e]=A}if(null!=a.contrastOffset)for(a=r(a.contrastOffset,a.brightnessOffset),e=0;e<n;e++)for(A=z[e],m=0;m<p;m++)A[m]=a[A[m]];return{lut:z,offset:q}};m.createContrastBrightnessLUT=r;m.stretch=function(a,b){if(!c(a))return null;
a=a.clone();var d=a.pixels,e=a.mask,f=b.minCutOff,g=b.maxCutOff,l=b.gamma,n=b.outMin||0;b=b.outMax||255;var m=a.width*a.height,q=d.length,p,r,x,t,E,z=b-n,B=[];for(p=0;p<q;p++)B[p]=g[p]-f[p];r=l&&l.length>=q;var A=[];if(r)for(p=0;p<q;p++)A[p]=1<l[p]?2<l[p]?6.5+Math.pow(l[p]-2,2.5):6.5+100*Math.pow(2-l[p],4):1;if(r)if(null!=e)for(r=0;r<m;r++){if(e[r])for(p=0;p<q;p++)x=d[p][r],E=(x-f[p])/B[p],t=1,1<l[p]&&(t-=Math.pow(1/z,E*A[p])),d[p][r]=x<g[p]&&x>f[p]?Math.floor(t*z*Math.pow(E,1/l[p]))+n:x>=g[p]?b:
n}else for(r=0;r<m;r++)for(p=0;p<q;p++)x=d[p][r],E=(x-f[p])/B[p],t=1,1<l[p]&&(t-=Math.pow(1/z,E*A[p])),d[p][r]=x<g[p]&&x>f[p]?Math.floor(t*z*Math.pow(E,1/l[p]))+n:x>=g[p]?b:n;else if(null!=e)for(r=0;r<m;r++){if(e[r])for(p=0;p<q;p++)x=d[p][r],d[p][r]=x<g[p]&&x>f[p]?Math.floor((x-f[p])/B[p]*z)+n:x>=g[p]?b:n}else for(r=0;r<m;r++)for(p=0;p<q;p++)x=d[p][r],d[p][r]=x<g[p]&&x>f[p]?Math.floor((x-f[p])/B[p]*z)+n:x>=g[p]?b:n;a.pixelType="u8";a.updateStatistics();return a};m.lookupPixels=function(a,b){if(!c(a))return null;
var d=a.pixels,g=a.mask,f=a.width*a.height,l=d.length,n=b.lut;b=b.offset;var m,p;n&&1===n[0].length&&(n=d.map(function(){return n}));var q=[],r,C,x;if(b)if(null==g)for(m=0;m<l;m++){r=d[m];C=n[m];x=new Uint8Array(f);for(p=0;p<f;p++)x[p]=C[r[p]-b];q.push(x)}else for(m=0;m<l;m++){r=d[m];C=n[m];x=new Uint8Array(f);for(p=0;p<f;p++)g[p]&&(x[p]=C[r[p]-b]);q.push(x)}else if(null==g)for(m=0;m<l;m++){r=d[m];C=n[m];x=new Uint8Array(f);for(p=0;p<f;p++)x[p]=C[r[p]];q.push(x)}else for(m=0;m<l;m++){r=d[m];C=n[m];
x=new Uint8Array(f);for(p=0;p<f;p++)g[p]&&(x[p]=C[r[p]]);q.push(x)}a=new e({width:a.width,height:a.height,pixels:q,mask:g,pixelType:"u8"});a.updateStatistics();return a};m.remapColor=function(a,b){if(!c(a))return null;a=a.clone();var d=a.width*a.height,e=b.length,f=Math.floor(e/2),g=b[Math.floor(f)],l=a.pixels[0],n,m,p,q,r,x,t=!1,E=new Uint8Array(d),z=new Uint8Array(d),B=new Uint8Array(d),A=a.mask,G=4===b[0].mappedColor.length;A||(A=new Uint8Array(d),A.fill(G?255:1),a.mask=A);for(r=0;r<d;r++)if(A[r]){n=
l[r];t=!1;x=f;m=g;p=0;for(q=e-1;1<q-p;){if(n===m.value){t=!0;break}n>m.value?p=x:q=x;x=Math.floor((p+q)/2);m=b[Math.floor(x)]}t||(n===b[p].value?(m=b[p],t=!0):n===b[q].value?(m=b[q],t=!0):n<b[p].value?(t=!1,m=null):n>b[p].value&&(n<b[q].value?(m=b[p],t=!0):q===e-1?(t=!1,m=null):(m=b[q],t=!0)));t?(E[r]=m.mappedColor[0],z[r]=m.mappedColor[1],B[r]=m.mappedColor[2],A[r]=m.mappedColor[3]):E[r]=z[r]=B[r]=A[r]=0}a.pixels=[E,z,B];a.mask=A;a.pixelType="u8";a.maskIsAlpha=G;return a};m.getClipBounds=d;m.mosaicPixelData=
function(a,b){if(!a||0===a.length)return null;var c=a.filter(function(a){return a.pixelBlock})[0];if(!c)return null;var d=(c.extent.xmax-c.extent.xmin)/c.pixelBlock.width,e=(c.extent.ymax-c.extent.ymin)/c.pixelBlock.height,g=.01*Math.min(d,e),l=a.sort(function(a,b){return Math.abs(a.extent.ymax-b.extent.ymax)>g?b.extent.ymax-a.extent.ymax:Math.abs(a.extent.xmin-b.extent.xmin)>g?a.extent.xmin-b.extent.xmin:0}),m=Math.min.apply(null,l.map(function(a){return a.extent.xmin})),n=Math.min.apply(null,l.map(function(a){return a.extent.ymin})),
p=Math.max.apply(null,l.map(function(a){return a.extent.xmax})),r=Math.max.apply(null,l.map(function(a){return a.extent.ymax}));a={x:Math.round((b.xmin-m)/d),y:Math.round((r-b.ymax)/e)};m={width:Math.round((p-m)/d),height:Math.round((r-n)/e)};d={width:Math.round((b.xmax-b.xmin)/d),height:Math.round((b.ymax-b.ymin)/e)};if(Math.round(m.width/c.pixelBlock.width)*Math.round(m.height/c.pixelBlock.height)!==l.length||0>a.x||0>a.y||m.width<d.width||m.height<d.height)return null;c=l.map(function(a){return a.pixelBlock});
c=q(c,m,a,d);return{extent:b,pixelBlock:c}};m.mosaic=q;m.setValidBoundary=function(a,b,d){if(!c(a))return null;var e=a.width,f=a.height,g=b.x;b=b.y;var h=d.width+g;d=d.height+b;if(0>g||0>b||h>e||d>f||0===g&&0===b&&h===e&&d===f)return a;a.mask||(a.mask=new Uint8Array(e*f));for(var l=a.mask,m=0;m<f;m++)for(var n=m*e,p=0;p<e;p++)l[n+p]=m<b||m>=d||p<g||p>=h?0:1;a.updateStatistics();return a};m.resampleByMajority=n;m.clip=function(a,b,d){var g=b.x;b=b.y;var f=d.width,h=d.height;if(0===g&&0===b&&h===a.height&&
f===a.width)return a;var l=a.width,m=Math.max(0,b),n=Math.max(0,g),p=Math.min(g+f,l),q=Math.min(b+h,a.height);if(0>p||0>q||!c(a))return null;g=Math.max(0,-g);b=Math.max(0,-b);for(var r=a.pixels,x=a.mask,t=f*h,A=r.length,h=[],z=0;z<A;z++){for(var B=r[z],H=e.createEmptyBand(a.pixelType,t),G=m;G<q;G++)for(var K=G*l,I=(G+b)*f+g,J=n;J<p;J++)H[I++]=B[K+J];h.push(H)}a=new Uint8Array(t);for(G=m;G<q;G++)for(K=G*l,I=(G+b)*f+g,J=n;J<p;J++)a[I++]=x?x[K+J]:1;d=new e({width:d.width,height:d.height,pixels:h,mask:a});
d.updateStatistics();return d};m.approximateTransform=function(a,b,d,g,f){void 0===f&&(f="nearest");if(!c(a))return null;"majority"===f&&(a=n(a));var h=a.pixels,k=a.mask,l=a.pixelType,m=a.width,p=a.height;a=e.getPixelArrayConstructor(l);var q=h.length,r=b.width,x=b.height;b=g.cols;var t=g.rows,A=Math.ceil(r/b),z=Math.ceil(x/t);g=!1;for(var B=0;B<d.length;B+=3)-1===d[B]&&-1===d[B+1]&&-1===d[B+2]&&(g=!0);for(var H,G,K,I,J,L,M=new Float32Array(r*x),R=new Float32Array(r*x),V=0,W,S,T="majority"===f?0:
.5,B=0;B<z;B++)for(var Q=0;Q<A;Q++){H=12*(B*A+Q);f=d[H];G=d[H+1];K=d[H+2];I=d[H+3];J=d[H+4];L=d[H+5];for(var N=0;N<t;N++){V=(B*t+N)*r+Q*b;S=(N+.5)/t;for(var P=0;P<N;P++)W=(P+.5)/b,M[V+P]=Math.round((f*W+G*S+K)*m-T),R[V+P]=Math.round((I*W+J*S+L)*p-T)}H+=6;f=d[H];G=d[H+1];K=d[H+2];I=d[H+3];J=d[H+4];L=d[H+5];for(N=0;N<t;N++)for(V=(B*t+N)*r+Q*b,S=(N+.5)/t,P=N;P<b;P++)W=(P+.5)/b,M[V+P]=Math.round((f*W+G*S+K)*m-T),R[V+P]=Math.round((I*W+J*S+L)*p-T)}d=function(a,b){for(var c=0;c<x;c++){H=c*r;for(var d=0;d<
r;d++)a[H]=0>M[H]||0>R[H]?0:b[M[H]+R[H]*m],H++}};p=[];for(B=0;B<q;B++)b=new a(r*x),d(b,h[B]),p.push(b);h=new e({width:r,height:x,pixelType:l,pixels:p});if(k)h.mask=new Uint8Array(r*x),d(h.mask,k);else if(g)for(h.mask=new Uint8Array(r*x),B=0;B<r*x;B++)h.mask[B]=0>M[B]||0>R[B]?0:1;h.updateStatistics();return h}})},"esri/layers/support/rasterFunctions/surfaceUtils":function(){define(["require","exports","../PixelBlock"],function(A,m,e){function r(d){var e=d.altitude,l=d.azimuth,g=d.hillshadeType,m=d.pixelSizePower,
c=d.pixelSizeFactor,a=d.scalingType,b=d.isGCS,h=d.resolution,k="multi-directional"===g?2*d.zFactor:d.zFactor,f=h.x,q=h.y;d=k/(8*f);var r=k/(8*q);b&&.001<k&&(d/=111E3,r/=111E3);"adjusted"===a&&(b?(d=111E3*f,r=111E3*q,d=(k+Math.pow(d,m)*c)/(8*d),r=(k+Math.pow(r,m)*c)/(8*r)):(d=(k+Math.pow(f,m)*c)/(8*f),r=(k+Math.pow(q,m)*c)/(8*q)));var v=(90-e)*Math.PI/180,e=Math.cos(v),u=(360-l+90)*Math.PI/180,l=Math.sin(v)*Math.cos(u),v=Math.sin(v)*Math.sin(u),m=[315,270,225,360,180,0],c=[60,60,60,60,60,90],k=new Float32Array([3,
5,3,2,1,4]),w=k.reduce(function(a,b){return a+b}),k=k.map(function(a){return a/w}),a="multi-directional"===g?m.length:1,b=new Float32Array(6),q=new Float32Array(6),f=new Float32Array(6);if("multi-directional"===g)for(var y=0;y<a;y++)e=c[y],l=m[y],v=(90-e)*Math.PI/180,e=Math.cos(v),u=(360-l+90)*Math.PI/180,l=Math.sin(v)*Math.cos(u),v=Math.sin(v)*Math.sin(u),b[y]=e,q[y]=l,f[y]=v;else b.fill(e),q.fill(l),f.fill(v);return{resolution:h,factor:[d,r],sinZcosA:l,sinZsinA:v,cosZ:e,sinZcosAs:q,sinZsinAs:f,
cosZs:b,weights:k,hillshadeType:["traditional","multi-directional"].indexOf(g)}}Object.defineProperty(m,"__esModule",{value:!0});m.tintHillshade=m.hillshade=m.calculateHillshadeParams=void 0;var d=function(d){return d&&"esri.layers.support.PixelBlock"===d.declaredClass&&d.pixels&&0<d.pixels.length};m.calculateHillshadeParams=r;m.hillshade=function(m,n){if(!d(m))return m;var l=m.width,g=m.height,p=m.mask,c=new Uint8Array(l*g);p&&c.set(p);var a=r(n),b=a.factor,h=a.sinZcosA,k=a.sinZsinA,f=a.cosZ,q=a.sinZcosAs,
A=a.sinZsinAs,v=a.cosZs,a=a.weights,u=b[0],b=b[1];n=n.hillshadeType;for(var w=m.pixels[0],y=new Uint8Array(l*g),C,x,t,E,z,B,H,G,K=1;K<g-1;K++)for(var I=K*l,J=1;J<l-1;J++)if(p&&!p[I+J])y[I+J]=0;else{E=8;if(p&&(E=p[I-l+J-1]+p[I-l+J]+p[I-l+J+1]+p[I+J-1]+p[I+J+1]+p[I+l+J-1]+p[I+l+J]+p[I+l+J+1],7>E)){y[I+J]=0;c[I+J]=0;continue}7===E?(C=p[I-l+J-1]?w[I-l+J-1]:w[I+J],x=p[I-l+J]?w[I-l+J]:w[I+J],t=p[I-l+J+1]?w[I-l+J+1]:w[I+J],E=p[I+J-1]?w[I+J-1]:w[I+J],z=p[I+J+1]?w[I+J+1]:w[I+J],B=p[I+l+J-1]?w[I+l+J-1]:w[I+
J],H=p[I+l+J]?w[I+l+J]:w[I+J],G=p[I+l+J+1]?w[I+l+J+1]:w[I+J]):(C=w[I-l+J-1],x=w[I-l+J],t=w[I-l+J+1],E=w[I+J-1],z=w[I+J+1],B=w[I+l+J-1],H=w[I+l+J],G=w[I+l+J+1]);E=(t+z+z+G-(C+E+E+B))*u;C=(B+H+H+G-(C+x+x+t))*b;x=Math.sqrt(1+E*E+C*C);t=0;if("traditional"===n)B=255*(f+k*C-h*E)/x,0>B&&(B=0),t=B;else for(H=A.length,G=0;G<H;G++)B=255*(v[G]+A[G]*C-q[G]*E)/x,0>B&&(B=0),t+=B*a[G];y[I+J]=t&255}for(K=0;K<g;K++)y[K*l]=y[K*l+1],y[(K+1)*l-1]=y[(K+1)*l-2];for(K=1;K<l-1;K++)y[K]=y[K+l],y[K+(g-1)*l]=y[K+(g-2)*l];return new e({width:l,
height:g,pixels:[y],mask:p?c:null,pixelType:"u8",validPixelCount:m.validPixelCount,statistics:[{minValue:0,maxValue:255}]})};m.tintHillshade=function(e,m,l,g){if(d(e)&&d(m)){var n=g.min,c=e.pixels[0],a=m.mask;m=m.pixels[0];g=255.00001/(g.max-n);for(var b=new Uint8ClampedArray(m.length),h=new Uint8ClampedArray(m.length),k=new Uint8ClampedArray(m.length),f=l.length-1,q=0;q<m.length;q++)if(!a||0!==a[q]){var r=Math.floor((m[q]-n)*g),v=l[0>r?0:r>f?f:r],r=v[0],u=c[q],v=u*v[1],w=v*(1-Math.abs(r%2-1)),u=
u-v;switch(Math.floor(r)){case 0:b[q]=v+u;h[q]=w+u;k[q]=u;break;case 1:b[q]=w+u;h[q]=v+u;k[q]=u;break;case 2:b[q]=u;h[q]=v+u;k[q]=w+u;break;case 3:b[q]=u;h[q]=w+u;k[q]=v+u;break;case 4:b[q]=w+u;h[q]=u;k[q]=v+u;break;case 5:case 6:b[q]=v+u,h[q]=u,k[q]=w+u}}e.pixels=[b,h,k];e.updateStatistics()}}})},"esri/tasks/ImageServiceIdentifyTask":function(){define("require exports tslib ../core/accessorSupport/decorators ../rest/imageServiceIdentify ./Task".split(" "),function(A,m,e,r,d,q){return function(m){function l(){return null!==
m&&m.apply(this,arguments)||this}e.__extends(l,m);l.prototype.execute=function(e,l){return d.imageServiceIdentify(this.url,e,l)};return l=e.__decorate([r.subclass("esri.tasks.ImageServiceIdentifyTask")],l)}(q)})},"esri/rest/imageServiceIdentify":function(){define("require exports tslib ../request ../core/maybe ../geometry/support/normalizeUtils ./utils ../tasks/support/ImageServiceIdentifyResult".split(" "),function(A,m,e,r,d,q,n,l){Object.defineProperty(m,"__esModule",{value:!0});m.imageServiceIdentify=
void 0;m.imageServiceIdentify=function(g,m,c){return e.__awaiter(this,void 0,void 0,function(){var a,b;return e.__generator(this,function(h){a=n.parseUrl(g);b=m.geometry?[m.geometry]:[];return[2,q.normalizeCentralMeridian(b).then(function(b){var f=m.toJSON();b=b&&b[0];d.isSome(b)&&(f.geometry=JSON.stringify(b.toJSON()));f=n.encode(e.__assign(e.__assign(e.__assign({},a.query),{f:"json"}),f));f=n.asValidOptions(f,c);return r(a.path+"/identify",f)}).then(function(a){return l.fromJSON(a.data)})]})})}})},
"esri/rest/utils":function(){define(["require","exports","tslib","../core/urlUtils"],function(A,m,e,r){function d(e,m,l){var g={},n;for(n in e)if("declaredClass"!==n){var c=e[n];if(null!=c&&"function"!==typeof c)if(Array.isArray(c)){g[n]=[];for(var a=0;a<c.length;a++)g[n][a]=d(c[a])}else"object"===typeof c?(c.toJSON&&(c=c.toJSON(l&&l[n])),g[n]=m?c:JSON.stringify(c)):g[n]=c}return g}Object.defineProperty(m,"__esModule",{value:!0});m.encode=m.parseUrl=m.asValidOptions=void 0;m.asValidOptions=function(d,
m){d={query:d};m&&(d=e.__assign(e.__assign({},m),d));return d};m.parseUrl=function(d){return"string"===typeof d?r.urlToObject(d):d};m.encode=d})},"esri/tasks/support/ImageServiceIdentifyResult":function(){define("require exports tslib ../../core/JSONSupport ../../core/accessorSupport/decorators ../../geometry/Point ./FeatureSet".split(" "),function(A,m,e,r,d,q,n){return function(l){function g(){var d=null!==l&&l.apply(this,arguments)||this;d.catalogItemVisibilities=null;d.catalogItems=null;d.location=
null;d.name=null;d.objectId=null;d.processedValues=null;d.properties=null;d.value=null;return d}e.__extends(g,l);e.__decorate([d.property({json:{write:!0}})],g.prototype,"catalogItemVisibilities",void 0);e.__decorate([d.property({type:n,json:{write:!0}})],g.prototype,"catalogItems",void 0);e.__decorate([d.property({type:q,json:{write:!0}})],g.prototype,"location",void 0);e.__decorate([d.property({json:{write:!0}})],g.prototype,"name",void 0);e.__decorate([d.property({json:{write:!0}})],g.prototype,
"objectId",void 0);e.__decorate([d.property({json:{write:!0}})],g.prototype,"processedValues",void 0);e.__decorate([d.property({json:{write:!0}})],g.prototype,"properties",void 0);e.__decorate([d.property({json:{write:!0}})],g.prototype,"value",void 0);return g=e.__decorate([d.subclass("esri.tasks.support.ImageServiceIdentifyResult")],g)}(r.JSONSupport)})},"esri/tasks/support/ImageServiceIdentifyParameters":function(){define("require exports tslib ../../TimeExtent ../../core/JSONSupport ../../core/accessorSupport/decorators ../../geometry/Point ../../geometry/support/jsonUtils ../../layers/support/MosaicRule ../../layers/support/RasterFunction".split(" "),
function(A,m,e,r,d,q,n,l,g,p){return function(c){function a(){var a=null!==c&&c.apply(this,arguments)||this;a.geometry=null;a.renderingRules=null;a.pixelSize=null;a.returnGeometry=!0;a.returnCatalogItems=!0;a.returnPixelValues=!0;a.maxItemCount=null;a.timeExtent=null;a.raster=void 0;a.viewId=void 0;return a}e.__extends(a,c);a.prototype.writeGeometry=function(a,c,d){null!=a&&(c.geometryType=l.getJsonType(a),c[d]=JSON.stringify(a.toJSON()))};Object.defineProperty(a.prototype,"mosaicRule",{set:function(a){a&&
a.mosaicMethod&&(a=g.fromJSON(e.__assign(e.__assign({},a.toJSON()),{mosaicMethod:a.mosaicMethod,mosaicOperation:a.mosaicOperation})));this._set("mosaicRule",a)},enumerable:!1,configurable:!0});a.prototype.writeMosaicRule=function(a,c,d){null!=a&&(c[d]=JSON.stringify(a.toJSON()))};Object.defineProperty(a.prototype,"renderingRule",{set:function(a){a&&a.rasterFunction&&(a=p.fromJSON(e.__assign(e.__assign({},a.toJSON()),{rasterFunction:a.rasterFunction,rasterFunctionArguments:a.rasterFunctionArguments})));
this._set("renderingRule",a)},enumerable:!1,configurable:!0});a.prototype.writeRenderingRule=function(a,c,d){null!=a&&(c[d]=JSON.stringify(a.toJSON()))};a.prototype.writeRenderingRules=function(a,c,d){null!=a&&(c[d]=JSON.stringify(a.map(function(a){return a.toJSON()})))};a.prototype.writePixelSize=function(a,c,d){null!=a&&(c[d]=JSON.stringify(a.toJSON()))};a.prototype.writeTimeExtent=function(a,c,d){if(null!=a){var b=a.start?a.start.getTime():null;a=a.end?a.end.getTime():null;c[d]=null!=b?null!=a?
b+","+a:""+b:null}};e.__decorate([q.property({json:{write:!0}})],a.prototype,"geometry",void 0);e.__decorate([q.writer("geometry")],a.prototype,"writeGeometry",null);e.__decorate([q.property({type:g,json:{write:!0}})],a.prototype,"mosaicRule",null);e.__decorate([q.writer("mosaicRule")],a.prototype,"writeMosaicRule",null);e.__decorate([q.property({type:p,json:{write:!0}})],a.prototype,"renderingRule",null);e.__decorate([q.writer("renderingRule")],a.prototype,"writeRenderingRule",null);e.__decorate([q.property({type:[p],
json:{write:!0}})],a.prototype,"renderingRules",void 0);e.__decorate([q.writer("renderingRules")],a.prototype,"writeRenderingRules",null);e.__decorate([q.property({type:n,json:{write:!0}})],a.prototype,"pixelSize",void 0);e.__decorate([q.writer("pixelSize")],a.prototype,"writePixelSize",null);e.__decorate([q.property({type:Boolean,json:{write:!0}})],a.prototype,"returnGeometry",void 0);e.__decorate([q.property({type:Boolean,json:{write:!0}})],a.prototype,"returnCatalogItems",void 0);e.__decorate([q.property({type:Boolean,
json:{write:!0}})],a.prototype,"returnPixelValues",void 0);e.__decorate([q.property({type:Number,json:{write:!0}})],a.prototype,"maxItemCount",void 0);e.__decorate([q.property({type:r,json:{write:{target:"time"}}})],a.prototype,"timeExtent",void 0);e.__decorate([q.writer("timeExtent")],a.prototype,"writeTimeExtent",null);e.__decorate([q.property({json:{write:!0}})],a.prototype,"raster",void 0);e.__decorate([q.property({json:{write:!0}})],a.prototype,"viewId",void 0);return a=e.__decorate([q.subclass("esri.tasks.support.ImageServiceIdentifyParameters")],
a)}(d.JSONSupport)})},"*noref":1}});
define("require exports tslib ../PopupTemplate ../core/maybe ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/accessorSupport/decorators ./Layer ./mixins/ArcGISImageService ./mixins/ArcGISService ./mixins/BlendLayer ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./mixins/TemporalLayer ./support/commonProperties ../support/popupUtils".split(" "),function(A,m,e,r,d,q,n,l,g,p,c,a,b,h,k,f,D,F,v){return function(a){function b(){for(var b=[],
c=0;c<arguments.length;c++)b[c]=arguments[c];b=a.apply(this,b)||this;b.legendEnabled=!0;b.isReference=null;b.operationalLayerType="ArcGISImageServiceLayer";b.popupEnabled=!0;b.popupTemplate=null;b.type="imagery";return b}e.__extends(b,a);b.prototype.normalizeCtorArgs=function(a,b){return"string"===typeof a?e.__assign({url:a},b):a};b.prototype.load=function(a){var b=this,c=d.isSome(a)?a.signal:null;this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},a).then(function(){return b._fetchService(c)},
function(){return b._fetchService(c)}));return n.resolve(this)};b.prototype.writeOperationalLayerType=function(a,b,c){var d;a="vector-field"===(null===(d=this.renderer)||void 0===d?void 0:d.type);b[c]=a?"ArcGISImageServiceVectorLayer":"ArcGISImageServiceLayer"};Object.defineProperty(b.prototype,"defaultPopupTemplate",{get:function(){return this.createPopupTemplate()},enumerable:!1,configurable:!0});b.prototype.createPopupTemplate=function(a){var b=this.rasterFields,c=this.title,d=new Set,f=!1,g=!1;
this.capabilities&&(g=(f=this.capabilities.operations.supportsQuery&&this.fields&&0<this.fields.length)&&("esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType));var h=new Set;f&&(h.add("raster.itempixelvalue"),g&&h.add("raster.magnitude").add("raster.direction"));for(f=0;f<b.length;f++){var g=b[f],k=g.name.toLowerCase();h.has(k)||-1<k.indexOf("raster.servicepixelvalue.")||d.add(g.name)}return v.createPopupTemplate({fields:b,title:c},
e.__assign(e.__assign({},a),{visibleFieldNames:d}))};b.prototype.redraw=function(){this.emit("redraw")};e.__decorate([l.property(F.legendEnabled)],b.prototype,"legendEnabled",void 0);e.__decorate([l.property({type:["show","hide"]})],b.prototype,"listMode",void 0);e.__decorate([l.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}}})],b.prototype,"isReference",void 0);e.__decorate([l.property({type:["ArcGISImageServiceLayer"],json:{origins:{"web-map":{type:["ArcGISImageServiceLayer",
"ArcGISImageServiceVectorLayer"],read:!1,write:{target:"layerType",ignoreOrigin:!0}}}}})],b.prototype,"operationalLayerType",void 0);e.__decorate([l.writer("web-map","operationalLayerType")],b.prototype,"writeOperationalLayerType",null);e.__decorate([l.property(F.popupEnabled)],b.prototype,"popupEnabled",void 0);e.__decorate([l.property({type:r,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],b.prototype,"popupTemplate",void 0);e.__decorate([l.property({readOnly:!0,dependsOn:["fields",
"title"]})],b.prototype,"defaultPopupTemplate",null);e.__decorate([l.property({readOnly:!0,json:{read:!1}})],b.prototype,"type",void 0);return b=e.__decorate([l.subclass("esri.layers.ImageryLayer")],b)}(a.BlendLayer(D.TemporalLayer(k.RefreshableLayer(f.ScaleRangeLayer(b.OperationalLayer(h.PortalLayer(p.ArcGISImageService(c.ArcGISService(q.MultiOriginJSONMixin(g))))))))))});