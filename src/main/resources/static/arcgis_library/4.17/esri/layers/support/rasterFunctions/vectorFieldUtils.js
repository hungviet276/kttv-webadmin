// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define(["require","exports","../PixelBlock"],function(y,e,t){Object.defineProperty(e,"__esModule",{value:!0});e.convertVectorFieldUnit=e.convertVectorFieldData=e.getUnitConversionFactor=e.isValidPixelBlock=void 0;var u=180/Math.PI;e.isValidPixelBlock=function(a){return a&&"esri.layers.support.PixelBlock"===a.declaredClass&&a.pixels&&0<a.pixels.length};var f=new Map;f.set("meter-per-second",1);f.set("kilometer-per-hour",.277778);f.set("knots",.514444);f.set("feet-per-second",.3048);f.set("mile-per-hour",
.44704);e.getUnitConversionFactor=function(a,e){return f.get(e)/f.get(a)||1};e.convertVectorFieldData=function(a,f,g,h){var b;void 0===g&&(g="geographic");void 0===h&&(h=1);if(!e.isValidPixelBlock(a))return a;for(var n=a.pixels,p=a.width,l=a.height,k=p*l,r=n[0],n=n[1],q=t.createEmptyBand(a.pixelType,k),k=t.createEmptyBand(a.pixelType,k),c=0,w=0;w<l;w++)for(var x=0;x<p;x++){if("vector-uv"===f){var m=[r[c],n[c]];b=g;void 0===b&&(b="geographic");var d=m[0],v=m[1],m=Math.sqrt(d*d+v*v),d=Math.atan2(v,
d)*u,d=(360+d)%360;"geographic"===b&&(d=(450-d)%360);b=[m,d];q[c]=b[0];k[c]=b[1];q[c]*=h}else d=[r[c],n[c]],m=g,void 0===m&&(m="geographic"),b=d[1],"geographic"===m&&(b=(450-b)%360),b%=360,d=d[0],b=[d*Math.cos(b/u),d*Math.sin(b/u)],q[c]=b[0],k[c]=b[1],q[c]*=h,k[c]*=h;c++}a=new t({pixelType:a.pixelType,width:a.width,height:a.height,mask:a.mask,validPixelCount:a.validPixelCount,maskIsAlpha:a.maskIsAlpha,pixels:[q,k]});a.updateStatistics();return a};e.convertVectorFieldUnit=function(a,f,g){void 0===
g&&(g=1);if(1===g||!e.isValidPixelBlock(a))return a;a=a.clone();for(var h=a.pixels,b=a.width,n=a.height,p=h[0],h=h[1],l=0,k=0;k<n;k++)for(var r=0;r<b;r++)"vector-uv"===f?(p[l]*=g,h[l]*=g):p[l]*=g,l++;a.updateStatistics();return a}});