// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define(["require","exports","../../core/string"],function(u,b,l){function d(a){return a.replace(/\[/g,"{").replace(/\]/g,"}")}function c(a){var b={expression:"",type:"none"};a.labelExpressionInfo?a.labelExpressionInfo.value?(b.expression=a.labelExpressionInfo.value,b.type="conventional"):a.labelExpressionInfo.expression&&(b.expression=a.labelExpressionInfo.expression,b.type="arcade"):null!=a.labelExpression&&(b.expression=d(a.labelExpression),b.type="conventional");return b}function e(a){a?(a=l.replace(a,
function(a){return'__begin__$feature["'+a+'"]__end__'}),a=f.test(a)?a.replace(f,""):'"'+a,a=g.test(a)?a.replace(g,""):a+'"',a=a.replace(m,'" + ').replace(n,' + "')):a='""';return a}function h(a){return(a=a.match(p))&&a[1].trim()||null}function k(a){if(!a)return null;var b=q.exec(a)||r.exec(a);return b?b[1]||b[3]:(b=t.exec(a))?b[2]:null}Object.defineProperty(b,"__esModule",{value:!0});b.getSingleFieldArcadeExpression=b.getSingleFieldTemplatedString=b.convertTemplatedStringToArcade=b.getLabelExpressionSingleField=
b.getLabelExpressionArcade=b.getLabelExpression=b.templateStringToSql=b.sqlToTemplateString=void 0;var m=/__begin__/ig,n=/__end__/ig,f=/^__begin__/i,g=/__end__$/i;b.sqlToTemplateString=d;b.templateStringToSql=function(a){return a.replace(/\{/g,"[").replace(/\}/g,"]")};b.getLabelExpression=c;b.getLabelExpressionArcade=function(a){a=c(a);if(!a)return null;switch(a.type){case "conventional":return e(a.expression);case "arcade":return a.expression}return null};b.getLabelExpressionSingleField=function(a){a=
c(a);if(!a)return null;switch(a.type){case "conventional":return h(a.expression);case "arcade":return k(a.expression)}return null};b.convertTemplatedStringToArcade=e;var p=/^\s*\{([^}]+)\}\s*$/i;b.getSingleFieldTemplatedString=h;var q=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,r=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,t=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;
b.getSingleFieldArcadeExpression=k});