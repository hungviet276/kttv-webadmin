// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../geometry ../../core/JSONSupport ../../core/lang ../../core/Warning ../../core/accessorSupport/decorators ../../core/accessorSupport/decorators/persistable ../../views/3d/support/polygonUtils ../../views/3d/support/projectionUtils".split(" "),function(q,r,c,f,k,l,m,d,g,n,p){return function(h){function a(a){a=h.call(this,a)||this;a.geometry=null;a.type="clip";return a}c.__extends(a,h);e=a;a.prototype.writeGeometry=function(a,c,d,b){if(b.layer&&b.layer.spatialReference&&
!b.layer.spatialReference.equals(this.geometry.spatialReference)){if(!p.canProject(a.spatialReference,b.layer.spatialReference)){b&&b.messages&&b.messages.push(new m("scenemodification:unsupported","Scene modifications with incompatible spatial references are not supported",{modification:this,spatialReference:b.layer.spatialReference,context:b}));return}var e=new f.Polygon({spatialReference:b.layer.spatialReference});n.polygonToPolygon(a,e);c[d]=e.toJSON(b)}else c[d]=a.toJSON(b);delete c[d].spatialReference};
a.prototype.clone=function(){return new e({geometry:l.clone(this.geometry),type:this.type})};var e;c.__decorate([d.property({type:f.Polygon}),g.persistable()],a.prototype,"geometry",void 0);c.__decorate([d.writer(["web-scene","portal-item"],"geometry")],a.prototype,"writeGeometry",null);c.__decorate([d.property({type:["clip","mask","replace"],nonNullable:!0}),g.persistable()],a.prototype,"type",void 0);return a=e=c.__decorate([d.subclass("esri.layers.support.SceneModification")],a)}(k.JSONSupport)});