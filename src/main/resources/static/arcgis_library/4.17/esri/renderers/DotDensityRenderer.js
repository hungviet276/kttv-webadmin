// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../Color ../core/lang ../core/accessorSupport/decorators ../layers/support/fieldUtils ./Renderer ./mixins/VisualVariablesMixin ./support/AttributeColorInfo ./support/DotDensityLegendOptions ../symbols/SimpleFillSymbol ../symbols/SimpleLineSymbol".split(" "),function(u,v,c,h,e,d,m,n,p,q,r,t,k){return function(l){function a(b){b=l.call(this,b)||this;b.attributes=null;b.backgroundColor=new h([0,0,0,0]);b.blendDots=!0;b.dotBlendingEnabled=!0;b.dotShape="square";b.dotSize=
1;b.legendOptions=null;b.outline=new k;b.dotValue=null;b.referenceDotValue=null;b.referenceScale=null;b.seed=1;b.type="dot-density";return b}c.__extends(a,l);g=a;a.prototype.calculateDotValue=function(b){if(null==this.referenceScale)return this.dotValue;b=b/this.referenceScale*this.dotValue;return 1>b?1:b};a.prototype.getSymbol=function(){return new t({outline:this.outline})};a.prototype.getSymbolAsync=function(){return c.__awaiter(this,void 0,void 0,function(){return c.__generator(this,function(b){return[2,
this.getSymbol()]})})};a.prototype.getSymbols=function(){return[this.getSymbol()]};a.prototype.getAttributeHash=function(){return this.attributes&&this.attributes.reduce(function(b,a){return b+a.getAttributeHash()},"")};a.prototype.getMeshHash=function(){return JSON.stringify(this.outline)};a.prototype.clone=function(){return new g({attributes:e.clone(this.attributes),backgroundColor:e.clone(this.backgroundColor),dotBlendingEnabled:e.clone(this.dotBlendingEnabled),dotShape:e.clone(this.dotShape),
dotSize:e.clone(this.dotSize),dotValue:e.clone(this.dotValue),legendOptions:e.clone(this.legendOptions),outline:e.clone(this.outline),referenceScale:e.clone(this.referenceScale),visualVariables:e.clone(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})};a.prototype.getControllerHash=function(){var b=this.attributes.map(function(a){return a.field||a.valueExpression||""}),a=this.outline&&JSON.stringify(this.outline.toJSON())||"";return b+"-"+a};a.prototype.collectRequiredFields=
function(a,d){return c.__awaiter(this,void 0,void 0,function(){var b,e,f;return c.__generator(this,function(c){switch(c.label){case 0:return[4,this.collectVVRequiredFields(a,d)];case 1:c.sent(),b=0,e=this.attributes,c.label=2;case 2:if(!(b<e.length))return[3,6];f=e[b];return f.valueExpression?[4,m.collectArcadeFieldNames(a,d,f.valueExpression)]:[3,4];case 3:c.sent(),c.label=4;case 4:f.field&&a.add(f.field),c.label=5;case 5:return b++,[3,2];case 6:return[2]}})})};var g;c.__decorate([d.property({type:[q],
json:{write:!0}})],a.prototype,"attributes",void 0);c.__decorate([d.property({type:h,json:{write:!0}})],a.prototype,"backgroundColor",void 0);c.__decorate([d.property({type:Boolean}),d.aliasOf("dotBlendingEnabled")],a.prototype,"blendDots",void 0);c.__decorate([d.property({type:Boolean,json:{write:!0}})],a.prototype,"dotBlendingEnabled",void 0);c.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"dotShape",void 0);c.__decorate([d.property({type:Number,json:{write:!0}})],a.prototype,
"dotSize",void 0);c.__decorate([d.property({type:r,json:{write:!0}})],a.prototype,"legendOptions",void 0);c.__decorate([d.property({type:k,json:{default:null,write:!0}})],a.prototype,"outline",void 0);c.__decorate([d.property({type:Number,json:{write:!0}})],a.prototype,"dotValue",void 0);c.__decorate([d.property({type:Number}),d.aliasOf("dotValue")],a.prototype,"referenceDotValue",void 0);c.__decorate([d.property({type:Number,json:{write:!0}})],a.prototype,"referenceScale",void 0);c.__decorate([d.property({type:Number,
json:{write:!0}})],a.prototype,"seed",void 0);c.__decorate([d.enumeration({dotDensity:"dot-density"})],a.prototype,"type",void 0);return a=g=c.__decorate([d.subclass("esri.renderers.DotDensityRenderer")],a)}(p.VisualVariablesMixin(n))});