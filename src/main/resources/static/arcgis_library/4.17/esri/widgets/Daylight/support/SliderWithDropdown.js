// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../../core/events ../../../core/accessorSupport/decorators ../../Slider ./SliderWithDropdownViewModel ../../support/widget".split(" "),function(l,m,c,g,e,h,k,d){return function(f){function a(b,a){b=f.call(this,b,a)||this;b.viewModel=new k.SliderWithDropdownViewModel;b.buttonTooltip="";b.showDropDown=!0;b.currentIndex=0;b._rootNode=null;return b}c.__extends(a,f);a.prototype.renderThumbLabel=function(b){var a,c=this,e=(a={},a["esri-slider-with-dropdown__box--drop-down-on"]=
this.showDropDown,a["esri-slider-with-dropdown__box--drop-down-off"]=!this.showDropDown,a);return d.tsx("div",{class:this.classes("esri-slider-with-dropdown__box","esri-slider__label",e)},f.prototype.renderThumbLabel.call(this,b),this.showDropDown?d.tsx("div",{afterCreate:d.storeNode,class:"esri-slider-with-dropdown__dropdown-root",bind:this,"data-node-ref":"_rootNode"},d.tsx("button",{class:this.classes("esri-interactive"," esri-widget__anchor esri-slider-with-dropdown__anchor",this.isDropdownOpen?
"esri-slider-with-dropdown__anchor--open":"esri-slider-with-dropdown__anchor--closed"),bind:this,onclick:this._onAnchorClick,onpointerdown:this._killEvent,"aria-label":this.buttonTooltip,title:this.buttonTooltip,"aria-expanded":this.isDropdownOpen,"aria-haspopup":"listbox",type:"button"},this.currentItem?this.currentItem.name+" ":""),this.isDropdownOpen?d.tsx("ol",{class:this.classes("esri-slider-with-dropdown__list"),onpointerdown:this._killEvent,onblur:this._onDropdownBlur,bind:this,tabindex:"-1",
"aria-label":this.buttonTooltip,role:"listbox",onkeydown:this._onOlKeyDown,afterCreate:function(b){return b.firstChild.focus()}},this.items.map(function(b,a){return d.tsx("li",{class:a===c.currentIndex?c.classes("esri-interactive","esri-slider-with-dropdown__list-item","esri-slider-with-dropdown__list-item--selected"):c.classes("esri-interactive","esri-slider-with-dropdown__list-item"),bind:c,onclick:c._onDropdownItemClick,"data-result":a,"aria-label":b.label.join(" "),role:"option","aria-selected":a===
c.currentIndex,onkeydown:c._onLiKeyDown,onblur:c._onDropdownBlur,tabindex:"0"},b.label.map(function(b){return d.tsx("span",{bind:c},b)}))})):null):null)};a.prototype._onAnchorClick=function(){this.viewModel.toggle();return!0};a.prototype._onDropdownItemClick=function(b){this.viewModel.selectItem(b.currentTarget["data-result"])};a.prototype._onDropdownBlur=function(b){b=b.relatedTarget;null===b&&(b=document.activeElement);this._rootNode.contains(b)||b===this._rootNode.parentElement||b===this._rootNode.parentElement.parentElement||
(this.viewModel.isDropdownOpen=!1)};a.prototype._killEvent=function(b){b.stopPropagation();return!0};a.prototype._onOlKeyDown=function(b){event.stopPropagation();"Escape"===g.eventKey(b)&&(this.viewModel.isDropdownOpen=!1)};a.prototype._onLiKeyDown=function(b){var a=event.target;switch(g.eventKey(b)){case "ArrowUp":a.previousElementSibling&&a.previousElementSibling.focus();break;case "ArrowDown":a.nextElementSibling&&a.nextElementSibling.focus();break;case "Enter":a.click()}};c.__decorate([e.property(),
d.renderable()],a.prototype,"viewModel",void 0);c.__decorate([e.property(),d.renderable()],a.prototype,"buttonTooltip",void 0);c.__decorate([e.property(),d.renderable()],a.prototype,"showDropDown",void 0);c.__decorate([e.property({aliasOf:"viewModel.items"}),d.renderable()],a.prototype,"items",void 0);c.__decorate([e.property({aliasOf:"viewModel.currentIndex"}),d.renderable()],a.prototype,"currentIndex",void 0);c.__decorate([e.property({aliasOf:"viewModel.currentItem"}),d.renderable()],a.prototype,
"currentItem",void 0);c.__decorate([e.property({aliasOf:"viewModel.isDropdownOpen"}),d.renderable()],a.prototype,"isDropdownOpen",void 0);return a=c.__decorate([e.subclass("esri.widgets.Daylight.SliderWithDropdown")],a)}(h)});