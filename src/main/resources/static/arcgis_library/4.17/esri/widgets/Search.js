// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
require({cache:{"esri/widgets/Search/SearchResultRenderer":function(){define("require exports tslib ../../core/accessorSupport/decorators ../Widget ./SearchViewModel ../support/widget".split(" "),function(m,b,a,n,k,f,l){return function(b){function e(a,c){a=b.call(this,a,c)||this;a.messages=null;a.showMoreResultsOpen=!1;a.viewModel=null;return a}a.__extends(e,b);e.prototype.render=function(){var a,c=(a={},a["esri-search-result-renderer__more-results--show-more-results"]=this.showMoreResultsOpen,a);
return l.tsx("div",{class:"esri-search-result-renderer esri-widget"},l.tsx("div",{key:"esri-search-renderer__container",class:this.classes("esri-search-result-renderer__more-results",c)},this.renderSearchResultName(),this.renderMoreResults()))};e.prototype.renderMoreResults=function(){return l.tsx("div",{key:"esri-search-renderer__more-results"},this.renderMoreResultsButton(),this.renderMoreResultsLists())};e.prototype.renderSearchResultName=function(){var a,c=null===(a=this.viewModel)||void 0===
a?void 0:a.selectedResult;return l.tsx("div",{key:"esri-search-renderer__result-name",class:"esri-search-result-renderer__more-results-item"},c&&c.name||"")};e.prototype.renderMoreResultsLists=function(){var a=this,c,e=null===(c=this.viewModel)||void 0===c?void 0:c.results;if(2>this.viewModel.resultCount)return null;c=e.map(function(c){return a.renderMoreResultsList(c)});return l.tsx("div",{key:"esri-search-renderer__more-results-container",class:"esri-search-result-renderer__more-results-list"},
c)};e.prototype.renderMoreResultsButton=function(){var a=this.messages;return 2>this.viewModel.resultCount?null:l.tsx("div",{key:"esri-search-renderer__more-results-button",class:"esri-search-result-renderer__more-results-item"},l.tsx("a",{class:"esri-widget__anchor",href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?a.hideMoreResults:a.showMoreResults))};e.prototype.renderMoreResultsHeader=function(a,c){return l.tsx("div",{key:"esri-search-result-renderer__header-"+
c,class:"esri-search-result-renderer__more-results-list-header"},a)};e.prototype.renderMoreResultsList=function(a){var c=this,d,e,h=a.results,b=h.length,f=!!b,q=null===(d=this.viewModel)||void 0===d?void 0:d.selectedResult;d=1===b&&h[0]===q;b=this._getSourceName(a.source,a.sourceIndex);b=1<(null===(e=this.viewModel)||void 0===e?void 0:e.results.length)&&!d?this.renderMoreResultsHeader(b,a.sourceIndex):null;e=f&&h.map(function(a,d){return c.renderMoreResultsListItem(a,d)});e=f&&!d?l.tsx("ul",{key:"esri-search-result-renderer__list-"+
a.sourceIndex},e):null;return f?l.tsx("div",{key:"esri-search-result-renderer__results-"+a.sourceIndex},b,e):null};e.prototype.renderMoreResultsListItem=function(a,c){var d=this.get("viewModel.selectedResult");return a!==d?l.tsx("li",{key:"esri-search-result-renderer__list-item-"+c},l.tsx("a",{class:"esri-widget__anchor",href:"#",tabindex:"0",bind:this,"data-result":a,onclick:this._selectResultClick,onkeydown:this._selectResultClick},a.name)):null};e.prototype._showMoreResultsClick=function(a){a.preventDefault();
this.showMoreResultsOpen=!this.showMoreResultsOpen;(a=this.get("viewModel.view.popup"))&&a.reposition()};e.prototype._selectResultClick=function(a){a.preventDefault();a=a.currentTarget["data-result"];this.viewModel&&this.viewModel.select(a)};e.prototype._getSourceName=function(a,c){return c===f.ALL_INDEX?this.messages.all:a.name};a.__decorate([n.property(),l.renderable(),l.messageBundle("esri/widgets/Search/t9n/Search")],e.prototype,"messages",void 0);a.__decorate([l.renderable(),n.property()],e.prototype,
"showMoreResultsOpen",void 0);a.__decorate([n.property(),l.renderable(["viewModel.results","viewModel.selectedResult","viewModel.resultCount"])],e.prototype,"viewModel",void 0);a.__decorate([l.accessibleHandler()],e.prototype,"_showMoreResultsClick",null);a.__decorate([l.accessibleHandler()],e.prototype,"_selectResultClick",null);return e=a.__decorate([n.subclass("esri.widgets.Search.SearchResultRenderer")],e)}(k)})},"esri/widgets/Search/SearchViewModel":function(){define("require exports tslib ../../assets ../../Graphic ../../PopupTemplate ../../core/Accessor ../../core/Collection ../../core/Error ../../core/Evented ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/Point ../../geometry/SpatialReference ../../intl/locale ../../intl/messages ../../portal/Portal ../../smartMapping/symbology/location ../../symbols/PictureMarkerSymbol ../../symbols/SimpleFillSymbol ../../symbols/SimpleLineSymbol ../../symbols/SimpleMarkerSymbol ../../symbols/TextSymbol ../../views/support/layerViewUtils ./LayerSearchSource ./LocatorSearchSource ./SearchSource ./support/geometryUtils ./support/locatorUtils ../support/geolocationUtils ../support/GoTo".split(" "),
function(m,b,a,n,k,f,l,g,e,d,c,r,p,h,u,w,q,t,v,z,x,C,D,E,A,H,B,G,O,I,M,P,L,Q,J,R){function y(a,c){return a.hasOwnProperty(c)&&null!=a[c]&&""!==a[c]}var F=p.getLogger("esri.widgets.Search.SearchViewModel"),K=g.ofType({key:function(a){return a.layer?"layer":"locator"},base:P,typeMap:{layer:I,locator:M}}),N=v.WGS84,S=/<(?:.|\s)*?>/g;return function(d){function b(a){a=d.call(this,a)||this;a._handles=new c;a._gotoController=null;a._searching=null;a.autoNavigate=!0;a.autoSelect=!0;a.defaultPopupTemplate=
null;a.defaultSources=new K;a.defaultSymbol=new E({url:n.getAssetUrl(r("trident")?"esri/images/search/search-symbol-32.png":"esri/images/search/search-symbol-32.svg"),size:24,width:24,height:24});a.includeDefaultSources=!0;a.maxInputLength=128;a.maxResults=6;a.maxSuggestions=6;a.messages=null;a.minSuggestCharacters=1;a.popupEnabled=!0;a.popupTemplate=null;a.portal=C.getDefault();a.resultCount=null;a.resultGraphicEnabled=!0;a.resultGraphic=null;a.results=null;a.selectedSuggestion=null;a.searchAllEnabled=
!0;a.selectedResult=null;a.sources=new K;a.suggestionDelay=150;a.suggestionCount=null;a.suggestions=null;a.suggestionsEnabled=!0;a.view=null;return a}a.__extends(b,d);b.prototype.initialize=function(){var c=this,b=function(){return a.__awaiter(c,void 0,void 0,function(){var c;return a.__generator(this,function(a){switch(a.label){case 0:return[4,x.loadMessageBundle("esri/widgets/Search/t9n/Search")];case 1:return this.messages=c=a.sent(),this.defaultPopupTemplate=new f({title:c.searchResult,content:"{Match_addr}"}),
[2]}})})};b();this._handles.add([w.on(this,["defaultSources","sources"],"change",function(){return c.notifyChange("allSources")}),w.init(this,["includeDefaultSources","view","portal"],function(){return c._update()}),z.onLocaleChange(b)])};b.prototype.destroy=function(){this._abortGoTo();this.clearGraphics();this._handles.destroy();this._handles=null};Object.defineProperty(b.prototype,"activeSource",{get:function(){return this.allSources.getItemAt(this.activeSourceIndex)||null},enumerable:!1,configurable:!0});
Object.defineProperty(b.prototype,"activeSourceIndex",{get:function(){return 1!==this.allSources.length&&this.searchAllEnabled?-1:0},set:function(a){void 0===a?this._clearOverride("activeSourceIndex"):this._override("activeSourceIndex",a)},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"allPlaceholder",{get:function(){var a;return null===(a=this.messages)||void 0===a?void 0:a.allPlaceholder},set:function(a){a?this._override("allPlaceholder",a):this._clearOverride("allPlaceholder")},
enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"allSources",{get:function(){var a=this.sources,c=this.defaultSources,b=this.includeDefaultSources,a="function"===typeof b?b.call(null,{sources:a,defaultSources:c}):b?c.concat(a):a,c=this._get("allSources")||new K;c.removeAll();c.addMany(a.filter(Boolean));return c},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"locationEnabled",{get:function(){return this._get("locationEnabled")||J.supported()},set:function(a){if(void 0===
a)this._clearOverride("locationEnabled");else{var c=J.supported();if(a&&!c){var b=new e("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});F.error(b)}this._override("locationEnabled",a&&c)}},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"placeholder",{get:function(){var a=this.activeSourceIndex,c=this.allPlaceholder;return-1===a?c:(a=this.allSources.getItemAt(a))?a.placeholder:""},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,
"searchTerm",{get:function(){return this._get("searchTerm")||""},set:function(a){this._set("searchTerm",a||"");this.clearGraphics();this.selectedSuggestion&&this.selectedSuggestion.text!==a&&this._set("selectedSuggestion",null);""===a&&this._clear()},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"state",{get:function(){return this._searching?"searching":this.updating?"loading":0===this.allSources.length?"disabled":"ready"},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,
"updating",{get:function(){return null!=this._updatingPromise},enumerable:!1,configurable:!0});b.prototype.clear=function(){this.searchTerm=""};b.prototype.clearGraphics=function(){this._removeHighlight();this._closePopup();this.view&&this.view.graphics.remove(this.resultGraphic);this._set("resultGraphic",null)};b.prototype.search=function(a,c){var b=this;this.emit("search-start");this.clearGraphics();var d=this._createSuggestionForSearch(a);this._searching=a=this.when().then(function(){return b._getResultsFromSources(d,
c).then(function(a){var c={activeSourceIndex:b.activeSourceIndex,searchTerm:d.text,numResults:0,numErrors:0,errors:[],results:[]};b._formatResponse(c,a,d);a=b._getFirstResult(c.results);var h=(d.location&&a?a.name:d.text).replace(S,"");b._set("searchTerm",h);(d.key&&"number"===typeof d.sourceIndex||d.location)&&b._set("selectedSuggestion",d);b._set("results",c.results);b._set("resultCount",c.results.reduce(function(a,c){return a+c.results.length},0));b.emit("search-complete",c);return b._selectFirstResult(a).then(function(){return c})})}).then(function(a){b._clearSearching();
return a},function(a){b._clearSearching();throw a;});this.notifyChange("state");return a};b.prototype.searchNearby=function(a){var c=this;if(!this.locationEnabled){var b=new e("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});F.error(b);return u.reject(b)}this._searching=b=J.getCurrentPosition().then(function(b){return J.positionToPoint({position:b,view:c.view},a)}).then(function(b){return c.search(b,a)});this.notifyChange("state");b.catch(function(){}).then(function(){return c._clearSearching()});
return b};b.prototype.select=function(a){var c=this;this.clearGraphics();if(!a){var b=new e("select:missing-parameter","Cannot select without a searchResult.",{searchResult:a});F.error(b);return u.reject(b)}var d=this.view,q=y(a,"sourceIndex")?a.sourceIndex:this._getSourceIndexOfResult(a),f=this.allSources.getItemAt(q);if(!f)return b=new e("select:missing-source","Cannot select without a source.",{source:f}),F.error(b),u.reject(b);var b=f instanceof I?this._getLayerSourcePopupTemplate(f):f.popupTemplate,
r=f.resultSymbol||this._getDefaultSymbol(a),p=y(f,"resultGraphicEnabled")?f.resultGraphicEnabled:this.resultGraphicEnabled,g=y(f,"autoNavigate")?f.autoNavigate:this.autoNavigate,l=y(f,"popupEnabled")?f.popupEnabled:this.popupEnabled,t=l?b||this.popupTemplate||this.defaultPopupTemplate:null,v=a.feature;if(!v)return b=new e("select:missing-feature","Cannot select without a feature.",{feature:v}),F.error(b),u.reject(b);var z=v.attributes,w=v.geometry,T=v.layer,n=v.sourceLayer,x=L.getPointFromGeometry(w),
b={layerViewQuery:this._getLayerView(v),elevationQuery:d&&h.isSome(x)?L.getPointWithElevation(x,d).catch(function(){return x}):u.resolve(x)};return u.eachAlways(b).then(function(b){var e=b.layerViewQuery.value,U=b.elevationQuery.value;r instanceof G&&(r.text=a.name);b=d&&g?a.target||a.extent:null;return(h.isSome(b)?c._goToSearchResult(b):u.resolve()).then(function(){var b=e?v:new k({geometry:w,symbol:r,attributes:z,layer:T,sourceLayer:n,popupTemplate:t}),h=l&&c.get("view.popup");if(h=h&&b.getEffectivePopupTemplate(h.defaultPopupTemplateEnabled))d.popup.open({features:[b],
location:U}),d.popup.focus();e&&O.highlightsSupported(e)&&!h&&c._highlightFeature({graphic:b,layerView:e});!e&&p&&d&&d.graphics.push(b);c._set("selectedResult",a);c._set("resultGraphic",b);c.emit("select-result",{result:a,source:f,sourceIndex:q});return a})})};b.prototype.suggest=function(a,c,b){var d=this,h=a||this.searchTerm;this.emit("suggest-start",{searchTerm:h});return this._suggestTimer(c,b).then(function(){return d._suggestImmediate(h,b).then(function(a){d._set("suggestions",a.results);d._set("suggestionCount",
a.results.reduce(function(a,c){return a+c.results.length},0));d.emit("suggest-complete",a);return a})})};b.prototype.when=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(a){switch(a.label){case 0:return[4,w.whenFalseOnce(this,"updating")];case 1:return a.sent(),[2]}})})};b.prototype._update=function(){return a.__awaiter(this,void 0,void 0,function(){var c,b,d,h,e;return a.__generator(this,function(a){switch(a.label){case 0:c=this;b=c.portal;d=c.view;
if(!this.includeDefaultSources)return[3,2];h=this._updatingPromise=u.eachAlways([null===b||void 0===b?void 0:b.load(),null===d||void 0===d?void 0:d.when()]);if(this.destroyed)return[2];this.notifyChange("updating");return[4,h];case 1:a.sent();if(h!==this._updatingPromise)return[2];a.label=2;case 2:this._updatingPromise=null;this.notifyChange("updating");e=w.whenOnce(this,"messages");if(this.destroyed)return[2];this._handles.add(e);return[4,e];case 3:return a.sent(),this._updateDefaultSources(),[2]}})})};
b.prototype._clearSearching=function(){this._searching=null;this.notifyChange("state")};b.prototype._convertHelperServices=function(){var a=this,c=this.get("portal.helperServices.geocode");return c?c.map(function(c){if(!1!==c.placefinding&&(c=M.fromJSON(c),Q.isArcGISWorldGeocoder(c.get("locator.url"))&&c.set({singleLineFieldName:"SingleLine",outFields:c.outFields||["Addr_type","Match_addr","StAddr","City"],placeholder:c.placeholder||a.messages.placeholder,defaultZoomScale:"number"===typeof c.defaultZoomScale?
c.defaultZoomScale:2500}),c.singleLineFieldName))return c}).filter(Boolean):[]};b.prototype._convertApplicationProperties=function(){var a=this,c=this.get("view.map.applicationProperties.viewing.search"),b=this.get("view.map");if(!b||!c)return[];var d=c.hintText;return c.enabled?c.layers.map(function(c){var h=b.findLayerById(c.id);if(h){c=a._getLayerJSON(c);var e=I.fromJSON(c);e.placeholder=d;a._getLayer(h,c).then(function(a){e.layer=a});return e}}).filter(Boolean).toArray():[]};b.prototype._getSubLayer=
function(a,c){return a&&a.allSublayers?(a=a.allSublayers.find(function(a){return a.id===c.subLayer}))?a.createFeatureLayer():u.reject():u.reject()};b.prototype._getLayer=function(a,c){var b=this;if("feature"===a.type||"scene"===a.type)return u.resolve(a);if("map-image"===a.type)return a.load().then(function(){return b._getSubLayer(a,c).catch(function(){var c=new e("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:a});F.error(c);return null})})};b.prototype._getLayerJSON=
function(a){return"function"===typeof a.toJSON?a.toJSON():a};b.prototype._updateDefaultSources=function(){var c=this.defaultSources,b=this.includeDefaultSources;c.removeAll();b&&c.addMany(a.__spreadArrays(this._convertApplicationProperties(),this._convertHelperServices()));this.notifyChange("allSources")};b.prototype._abortGoTo=function(){this._gotoController&&this._gotoController.abort();this._gotoController=null};b.prototype._clear=function(){this._abortGoTo();this._set("resultCount",null);this._set("results",
null);this._set("suggestions",null);this._set("suggestionCount",null);this._set("selectedResult",null);this._set("selectedSuggestion",null);this.emit("search-clear")};b.prototype._closePopup=function(){var a=this.get("view.popup"),c=this.resultGraphic;if(a&&c){var b=a.selectedFeature;b&&b===c&&a.close()}};b.prototype._suggestTimer=function(a,c){return u.after(null!=a?a:this.suggestionDelay,null,c&&c.signal)};b.prototype._createLocationForSearch=function(a){return a instanceof k?L.getPointFromGeometry(a.geometry):
a instanceof t?a:Array.isArray(a)&&2===a.length?new t({longitude:a[0],latitude:a[1]}):null};b.prototype._createSuggestionForSearch=function(a){if(a&&y(a,"key")&&y(a,"text")&&y(a,"sourceIndex"))return a;var c=this._createLocationForSearch(a),b="string"===typeof a?a:this.searchTerm,d=this.selectedSuggestion,e=this.selectedResult,f=(a=!a&&d&&e)&&d.location;return a&&d.key===e.key&&d.sourceIndex===e.sourceIndex||f?d:{location:h.unwrap(c),text:c?"":b,sourceIndex:null,key:null}};b.prototype._getFirstResult=
function(a){var c=null;a&&a.some(function(a){a=a.results[0];var b=!!a;b&&(c=a);return b});return c};b.prototype._selectFirstResult=function(a){return this.autoSelect&&a?this.select(a):u.resolve()};b.prototype._suggestImmediate=function(a,c){var b=this;return this.when().then(function(){return b._getSuggestionsFromSources(a,c)}).then(function(c){var d={activeSourceIndex:b.activeSourceIndex,searchTerm:a,numResults:0,numErrors:0,errors:[],results:[]};b._formatResponse(d,c);return d})};b.prototype._formatSourceResponse=
function(a,c,b){var d=c&&c.value||[];c=c&&c.error;var h=this.allSources.getItemAt(b);c?(a.errors.push({sourceIndex:b,source:h,error:c}),a.numErrors++):(a.results.push({sourceIndex:b,source:h,results:d}),a.numResults+=d.length)};b.prototype._formatResponse=function(a,c,b){var d=this;if(c)if(-1===a.activeSourceIndex){var h=b&&y(b,"sourceIndex")&&-1!==b.sourceIndex?b.sourceIndex:void 0;c.forEach(function(c,b){d._formatSourceResponse(a,c,void 0!==h?h:b)})}else this._formatSourceResponse(a,c[0],a.activeSourceIndex)};
b.prototype._getResultsFromSources=function(a,c){var b=this,d=this.allSources,h=!a.location&&y(a,"sourceIndex")?a.sourceIndex:this.activeSourceIndex,f=[];if(!d.length)return d=new e("search:no-sources-defined","At least one source is required.",{allSources:d}),F.error(d),u.reject(d);-1===h?d.forEach(function(d,h){f.push(b._getResultsFromSource(a,h,c))}):f.push(this._getResultsFromSource(a,h,c));return u.eachAlways(f)};b.prototype._getSuggestionsFromSources=function(a,c){var b=this,d=this.allSources,
h=this.activeSourceIndex,f=[];if(!d.length)return d=new e("suggest:no-sources-defined","At least one source is required.",{allSources:d}),F.error(d),u.reject(d);-1===h?d.forEach(function(d,h){f.push(b._getSuggestionsFromSource(a,h,c))}):f.push(this._getSuggestionsFromSource(a,h,c));return u.eachAlways(f)};b.prototype._getResultsFromSource=function(a,c,b){var d=this.allSources.getItemAt(c),h=a.location,h=void 0===h?null:h,e=this.get("view.spatialReference")||N,f=y(d,"maxResults")?d.maxResults:this.maxResults,
q=d instanceof I&&y(d,"exactMatch")?d.exactMatch:!1;return d.getResults({view:this.view,sourceIndex:c,location:h,suggestResult:a,spatialReference:e,exactMatch:q,maxResults:f},b)};b.prototype._getSuggestionsFromSource=function(a,c,b){var d=this.allSources.getItemAt(c),h=y(d,"suggestionsEnabled")?d.suggestionsEnabled:this.suggestionsEnabled,e=a.length,f=y(d,"minSuggestCharacters")?d.minSuggestCharacters:this.minSuggestCharacters;return h&&a.trim()&&e>=f?(h=this.get("view.spatialReference")||N,e=y(d,
"maxSuggestions")?d.maxSuggestions:this.maxSuggestions,d.getSuggestions({view:this.view,sourceIndex:c,suggestTerm:a,spatialReference:h,maxSuggestions:e},b)):u.resolve()};b.prototype.createDefaultSymbol=function(a,c){if("point"===c)return new B({color:a.color,size:a.size,outline:{color:a.outline.color,width:a.outline.width}});if("polyline"===c)return new H({color:a.color,width:a.width});if("polygon"===c)return new A({color:a.color,outline:{color:a.outline.color,width:a.outline.width}})};b.prototype._getLayerSourcePopupTemplate=
function(a){var c=a.layer;if(c)return y(a,"popupTemplate")?a.popupTemplate:c.popupTemplate};b.prototype._getSourceIndexOfResult=function(a){var c=null;this.results.some(function(b){return b.results.some(function(d){return d===a?(c=b.sourceIndex,!0):!1})});return c};b.prototype._goToSearchResult=function(c){return a.__awaiter(this,void 0,void 0,function(){var b,d,h;return a.__generator(this,function(a){switch(a.label){case 0:return b=!!c,this._abortGoTo(),this._gotoController=d=u.createAbortController(),
h={target:{target:c},options:{animate:b,signal:d.signal}},[4,this.callGoTo(h)];case 1:return a.sent(),this._gotoController=null,[2]}})})};b.prototype._getDefaultSymbol=function(a){var c=this.get("view.map.basemap.id");a=h.get(a,"feature","geometry","type");return h.isSome(a)&&(c=(c=D.getSchemes({basemap:c,geometryType:a})||D.getSchemes({basemap:"topo",geometryType:a}))&&c.primaryScheme)?(c.color&&y(c,"opacity")&&(c.color.a=c.opacity),this.createDefaultSymbol(c,a)):this.defaultSymbol};b.prototype._removeHighlight=
function(){this._handles.remove("highlight")};b.prototype._getLayerView=function(c){return a.__awaiter(this,void 0,void 0,function(){var b,d;return a.__generator(this,function(a){switch(a.label){case 0:b=this.view;if(!c||!b)return[2,u.resolve(null)];d=c.layer;return[4,b.when()];case 1:return a.sent(),[2,b.whenLayerView(d)]}})})};b.prototype._highlightFeature=function(a){var c=a.graphic,b=c.attributes,d=c.layer.objectIdField;a=a.layerView.highlight(b&&b[d]||c);this._handles.add(a,"highlight")};b.ALL_INDEX=
-1;a.__decorate([q.property({readOnly:!0,dependsOn:["activeSourceIndex","allSources.length"],value:null})],b.prototype,"activeSource",null);a.__decorate([q.property({dependsOn:["allSources.length","searchAllEnabled"]})],b.prototype,"activeSourceIndex",null);a.__decorate([q.property({dependsOn:["messages"]})],b.prototype,"allPlaceholder",null);a.__decorate([q.property({dependsOn:["defaultSources.length","sources.length","includeDefaultSources"],readOnly:!0})],b.prototype,"allSources",null);a.__decorate([q.property()],
b.prototype,"autoNavigate",void 0);a.__decorate([q.property()],b.prototype,"autoSelect",void 0);a.__decorate([q.property()],b.prototype,"defaultPopupTemplate",void 0);a.__decorate([q.property({readOnly:!0})],b.prototype,"defaultSources",void 0);a.__decorate([q.property()],b.prototype,"defaultSymbol",void 0);a.__decorate([q.property()],b.prototype,"includeDefaultSources",void 0);a.__decorate([q.property()],b.prototype,"locationEnabled",null);a.__decorate([q.property()],b.prototype,"maxInputLength",
void 0);a.__decorate([q.property()],b.prototype,"maxResults",void 0);a.__decorate([q.property()],b.prototype,"maxSuggestions",void 0);a.__decorate([q.property()],b.prototype,"messages",void 0);a.__decorate([q.property()],b.prototype,"minSuggestCharacters",void 0);a.__decorate([q.property({readOnly:!0,dependsOn:["activeSourceIndex","activeSource.placeholder","allPlaceholder","allSources"]})],b.prototype,"placeholder",null);a.__decorate([q.property()],b.prototype,"popupEnabled",void 0);a.__decorate([q.property({type:f})],
b.prototype,"popupTemplate",void 0);a.__decorate([q.property({type:C})],b.prototype,"portal",void 0);a.__decorate([q.property()],b.prototype,"resultCount",void 0);a.__decorate([q.property()],b.prototype,"resultGraphicEnabled",void 0);a.__decorate([q.property({readOnly:!0})],b.prototype,"resultGraphic",void 0);a.__decorate([q.property({readOnly:!0})],b.prototype,"results",void 0);a.__decorate([q.property({readOnly:!0})],b.prototype,"selectedSuggestion",void 0);a.__decorate([q.property()],b.prototype,
"searchAllEnabled",void 0);a.__decorate([q.property({readOnly:!0})],b.prototype,"selectedResult",void 0);a.__decorate([q.property()],b.prototype,"searchTerm",null);a.__decorate([q.property({type:K})],b.prototype,"sources",void 0);a.__decorate([q.property({readOnly:!0,dependsOn:["allSources.length","updating"]})],b.prototype,"state",null);a.__decorate([q.property()],b.prototype,"suggestionDelay",void 0);a.__decorate([q.property()],b.prototype,"suggestionCount",void 0);a.__decorate([q.property({readOnly:!0})],
b.prototype,"suggestions",void 0);a.__decorate([q.property()],b.prototype,"suggestionsEnabled",void 0);a.__decorate([q.property({readOnly:!0})],b.prototype,"updating",null);a.__decorate([q.property()],b.prototype,"view",void 0);a.__decorate([q.property()],b.prototype,"clear",null);return b=a.__decorate([q.subclass("esri.widgets.Search.SearchViewModel")],b)}(R.GoToMixin(d.EventedMixin(l)))})},"esri/smartMapping/symbology/location":function(){define("require exports tslib ../../Color ./support/SymbologyBase ./support/utils".split(" "),
function(m,b,a,n,k,f){function l(b,d){var c="mesh"!==b.geometryType&&b.worldScale?b.view:null;switch(b.geometryType){case "point":case "multipoint":b=d.color;var e=a.__assign({},d.outline);d=d.size;return{color:new n(b),outline:{color:new n(e.color),width:e.width},size:c?f.toWorldScale(d,c):d,opacity:1};case "polyline":return b=d.width,{color:new n(d.color),width:c?f.toWorldScale(b,c):b,opacity:1};case "polygon":b=d.size;var e=d.color,p=a.__assign({},d.outline);d=d.opacity;return{color:new n(e),outline:{color:new n(p.color),
width:p.width},size:c?f.toWorldScale(b,c):b,opacity:d};case "mesh":return c=d.opacity,{color:new n(d.color),opacity:c}}}var g={default:{name:"default",label:"Default",description:"Default theme for basic visualization of features.",schemes:{point:{light:{primary:{color:[77,77,77,1],outline:{color:[255,255,255,.25],width:"1px"},size:"8px"},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,.25],width:"1px"},size:"8px"},{color:[255,255,255,1],outline:{color:[51,51,51,.25],width:"1px"},size:"8px"}]},
dark:{primary:{color:[255,255,255,1],outline:{color:[92,92,92,.25],width:"1px"},size:"8px"},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,.25],width:"1px"},size:"8px"},{color:[26,26,26,1],outline:{color:[178,178,178,.25],width:"1px"},size:"8px"}]}},polyline:{light:{primary:{color:[77,77,77,1],width:"2px"},secondary:[{color:[226,119,40,1],width:"2px"},{color:[255,255,255,1],width:"2px"}]},dark:{primary:{color:[255,255,255,1],width:"2px"},secondary:[{color:[226,119,40,1],width:"2px"},
{color:[26,26,26,1],width:"2px"}]}},polygon:{light:{primary:{size:"12px",color:[227,139,79,1],outline:{color:[255,255,255,.25],width:"1px"},opacity:.8},secondary:[{size:"12px",color:[128,128,128,1],outline:{color:[255,255,255,.25],width:"1px"},opacity:.8},{size:"12px",color:[255,255,255,1],outline:{color:[128,128,128,.25],width:"1px"},opacity:.8}]},dark:{primary:{size:"12px",color:[227,139,79,1],outline:{color:[92,92,92,.25],width:"1px"},opacity:.8},secondary:[{size:"12px",color:[178,178,178,1],outline:{color:[92,
92,92,.25],width:"1px"},opacity:.8},{size:"12px",color:[26,26,26,1],outline:{color:[128,128,128,.25],width:"1px"},opacity:.8}]}}}}};return new (function(b){function d(){return b.call(this,{themeDictionary:g})||this}a.__extends(d,b);d.prototype.getSchemes=function(a){var c=this.getRawSchemes({theme:"default",basemap:a.basemap,geometryType:a.geometryType,basemapTheme:a.basemapTheme});if(c){var b=c.schemesInfo,d=c.basemapId,c=c.basemapTheme;return{primaryScheme:l(a,b.primary),secondarySchemes:b.secondary.map(function(c){return l(a,
c)}).filter(Boolean),basemapId:d,basemapTheme:c}}};d.prototype.cloneScheme=function(c){if(c)return c=a.__assign({},c),c.color&&(c.color=new n(c.color)),"outline"in c&&c.outline&&(c.outline={color:c.outline.color&&new n(c.outline.color),width:c.outline.width}),c};return d}(k))})},"esri/smartMapping/symbology/support/SymbologyBase":function(){define(["require","exports","tslib","./Theme"],function(m,b,a,n){return function(){function b(a){this.themes=null;a=a.themeDictionary;var b=new Map,f;for(f in a)b.set(f,
new n(a[f]));this.themes=b}b.prototype.getThemes=function(b){var f=[];this.themes.forEach(function(g){g.isBasemapSupported(b)&&f.push({name:g.name,label:g.label,description:g.description,basemaps:a.__spreadArrays(g.supportedBasemaps)})});return f};b.prototype.filterSchemesByName=function(b){var f=b.name;b=a.__rest(b,["name"]);if(f){var g=this.getSchemes(b);if(g){b=null;for(var e=0,g=a.__spreadArrays([g.primaryScheme],g.secondarySchemes);e<g.length;e++){var d=g[e];if(d.name.toLowerCase()===f.toLowerCase()){b=
d;break}}return b}}};b.prototype.filterSchemesByTag=function(b){var f=b.includedTags,g=b.excludedTags;b=a.__rest(b,["includedTags","excludedTags"]);if(!f&&!g)return[];var e=this.getSchemes(b);if(!e)return[];var d=!(f&&f.length),c=!(g&&g.length),r=[];b=function(a){var b=d?!0:f.some(function(c){return-1<a.tags.indexOf(c)}),h=!c&&g.some(function(c){return-1<a.tags.indexOf(c)});b&&!h&&r.push(a)};for(var p=0,e=a.__spreadArrays([e.primaryScheme],e.secondarySchemes);p<e.length;p++)b(e[p]);return r};b.prototype.getRawSchemes=
function(a){var b=this.themes.get(a.theme);if(b)return b.getRawSchemes({basemap:a.basemap,geometryType:a.geometryType,basemapTheme:a.basemapTheme})};return b}()})},"esri/smartMapping/symbology/support/Theme":function(){define(["require","exports","../../../core/lang","../../../core/maybe","../../support/utils"],function(m,b,a,n,k){return function(){function b(a){this.schemes=this.basemapGroups=this.supportedBasemaps=this.description=this.label=this.name=null;var b=a.label,e=a.description,d=a.schemes;
this.name=a.name;this.label=b;this.description=e;this.schemes=d;a=a.basemapGroups||k.defaultBasemapGroups;b=[];if(a)for(var c in a)b=b.concat(a[c]);this.supportedBasemaps=b;this.basemapGroups=a}b.prototype.isBasemapSupported=function(a){return(a=k.getBasemapId(a,this.supportedBasemaps))&&-1<this.supportedBasemaps.indexOf(a)?!0:!1};b.prototype.getRawSchemes=function(b){var f,e=b.basemap;f=b.basemapTheme;var d=null,c=null;e&&(d=k.getBasemapId(e,this.supportedBasemaps,!1))&&(e=k.getBasemapGroup(d),n.isSome(e)&&
(c=e));!d&&f&&(d="dark"===f?"dark-gray":"gray",c=f);d||c||(d="gray",c="light");f=d;d=c;f&&(e=k.getBasemapGroup(f,this.basemapGroups),n.isSome(e)&&(d=e));b=b.geometryType;"multipoint"===b?b="point":"mesh"===b&&(b="polygon");return{schemesInfo:a.clone((this.schemes[b]||this.schemes["default"])[d]),basemapId:f,basemapTheme:c}};return b}()})},"esri/smartMapping/support/utils":function(){define("require exports tslib ../../Basemap ../../core/string ../../support/arcadeOnDemand ../../support/basemapUtils".split(" "),
function(m,b,a,n,k,f,l){function g(a){return k.padStart(a,2,"0")}function e(a,c,b){if("date"===c||"number"===c){"number"===c&&(a=new Date(a));c=b?a.getFullYear():a.getUTCFullYear();var d=g((b?a.getMonth():a.getUTCMonth())+1),h=g(b?a.getDate():a.getUTCDate()),e=g(b?a.getHours():a.getUTCHours()),f=g(b?a.getMinutes():a.getUTCMinutes());a=g(b?a.getSeconds():a.getUTCSeconds());a="TIMESTAMP'"+c+"-"+d+"-"+h+" "+e+":"+f+":"+a+"'"}return a}function d(a,c){if(c instanceof Date)return"date";if("number"===typeof c)return"number";
if("string"===typeof c&&(a=a.getField(c),"\x3cnow\x3e"!==c.toLowerCase()&&a&&"date"===a.type))return"field"}Object.defineProperty(b,"__esModule",{value:!0});b.castIntegerFieldToFloat=b.isIntegerField=b.getBasemapId=b.getBasemapGroup=b.getDateType=b.getDateDiffSQL=b.getNormalizationType=b.getFieldsList=b.unitValueInDays=b.defaultBasemapGroups=void 0;b.defaultBasemapGroups={light:"streets gray topo terrain national-geographic oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector".split(" "),
dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"]};b.unitValueInDays={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864E5};var c=["integer","small-integer"],r=null;b.getFieldsList=function(c){return a.__awaiter(this,void 0,void 0,function(){var b,d,e,q,g;return a.__generator(this,function(a){switch(a.label){case 0:return b=c.field,d=c.normalizationField,e=c.valueExpression,q=[],e?r?[3,2]:[4,f.loadArcade()]:[3,3];case 1:r=g=a.sent().arcadeUtils,
a.label=2;case 2:q=r.extractFieldNames(e),a.label=3;case 3:return b&&q.push(b),d&&q.push(d),[2,q]}})})};b.getNormalizationType=function(a){var c=a.normalizationType;c||(a.normalizationField?c="field":null!=a.normalizationTotal&&(c="percent-of-total"));return c};b.getDateDiffSQL=function(a,c,f,r){var h=a.hasQueryEngine;f=e(f,d(a,f),h);a=e(c,d(a,c),h);a="("+f+" - "+a+")";h&&(a="("+a+" * "+b.unitValueInDays.milliseconds+")");r=b.unitValueInDays[r];h="/";1>r&&(r=1/r,h="*");return{sqlExpression:1===r?
a:"("+a+" "+h+" "+r+")",sqlWhere:null}};b.getDateType=d;b.getBasemapGroup=function(a,c){void 0===c&&(c=b.defaultBasemapGroups);for(var d in c)if(-1<c[d].indexOf(a))return d};b.getBasemapId=function(a,c,b){void 0===b&&(b=!0);var d=null;"string"===typeof a&&-1<c.indexOf(a)?d=a:a instanceof n&&(d=l.getWellKnownBasemapId(a));return b?d||"gray":d};b.isIntegerField=function(a,b){return(a=b&&a.getField(b))&&-1<c.indexOf(a.type)};b.castIntegerFieldToFloat=function(a){return"cast("+a+" as float)"}})},"esri/smartMapping/symbology/support/utils":function(){define(["require",
"exports","../../../core/arrayUtils","../../../core/screenUtils","../../support/utils"],function(m,b,a,n,k){function f(a,b){return a.r===b.r&&a.g===b.g&&a.b===b.b}function l(a){var c=a.width,b=a.height,d=a.pixelSizeAt(a.toMap(n.createScreenPoint(.5*c,.5*b),{exclude:[]}));0>=d&&(d=a.pixelSizeAt(a.toMap(n.createScreenPoint(.5*c,.95*b),{exclude:[]})),0>=d&&(c=a.camera.position.clone(),c.z=0,d=2*a.pixelSizeAt(c)));return d}Object.defineProperty(b,"__esModule",{value:!0});b.getTagsFromSchemes=b.getBasemapTheme=
b.getStorageType=b.toWorldScale=b.getPixelSize=b.hasIdenticalColors=void 0;var g="streets gray topo terrain national-geographic oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector".split(" "),e=["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"],d=[].concat(g).concat(e);b.hasIdenticalColors=function(a,b){var c=0;if(a.length===b.length){var d=a.every(function(a,c){return f(a,b[c])});d?c=1:(d=a.slice(0).reverse().every(function(a,
c){return f(a,b[c])}))&&(c=-1)}return c};b.getPixelSize=l;b.toWorldScale=function(a,b){return Math.ceil(l(b)*n.pt2px(n.toPt(a)))};b.getStorageType=function(a){return"multipoint"===a?"point":"mesh"===a?"polygon":a};b.getBasemapTheme=function(a){a=k.getBasemapId(a,d,!1);if(!a)return null;if(-1<g.indexOf(a))return"light";if(-1<e.indexOf(a))return"dark"};b.getTagsFromSchemes=function(c){if(!c)return[];var b=new Set,d=[c.primaryScheme];c.secondarySchemes&&d.push.apply(d,c.secondarySchemes);for(c=0;c<d.length;c++){var e=
d[c];e&&"tags"in e&&e.tags&&e.tags.forEach(function(a){return b.add(a)})}return a.keysOfSet(b)}})},"esri/widgets/Search/LayerSearchSource":function(){define("require exports tslib ../../core/lang ../../core/accessorSupport/decorators ./SearchSource ./support/layerSearchUtils".split(" "),function(m,b,a,n,k,f,l){return function(b){function e(){var c=null!==b&&b.apply(this,arguments)||this;c.displayField=null;c.exactMatch=null;c.orderByFields=null;c.searchFields=null;c.searchTemplate=null;c.suggestionTemplate=
null;c.getResults=function(b,d){return l.getResults(a.__assign({source:c},b),d)};c.getSuggestions=function(b,d){return l.getSuggestions(a.__assign({source:c},b),d)};return c}a.__extends(e,b);d=e;Object.defineProperty(e.prototype,"layer",{set:function(a){this._set("layer",a);a&&a.load().catch(function(){})},enumerable:!1,configurable:!0});Object.defineProperty(e.prototype,"name",{get:function(){return this._getLayerTitle()||""},set:function(a){void 0===a?this._clearOverride("name"):this._override("name",
a)},enumerable:!1,configurable:!0});e.prototype.clone=function(){return new d({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?n.clone(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,
suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?n.clone(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})};e.prototype._getFirstStringField=function(){var a=this.layer,b="";a&&a.fields&&a.fields.some(function(a){return"string"===a.type?(b=a.name,!0):!1});return b};e.prototype._getDisplayField=function(){return this.displayField||this.layer.displayField||
this._getFirstStringField()};e.prototype._getSearchFieldsString=function(){var a=this.layer;return a.loaded?": "+(this.searchFields||[this._getDisplayField()]).map(function(b){var c=a.getField(b);return c&&c.alias||b}).join(", "):""};e.prototype._getLayerTitle=function(){var a=this.layer;if(a&&(a=a.title))return""+a+this._getSearchFieldsString()};var d;a.__decorate([k.property({json:{read:{source:"field.name"},write:{target:"field.name"}}})],e.prototype,"displayField",void 0);a.__decorate([k.property({json:{read:{source:"field.exactMatch"},
write:{target:"field.exactMatch"}}})],e.prototype,"exactMatch",void 0);a.__decorate([k.property({value:null})],e.prototype,"layer",null);a.__decorate([k.property({dependsOn:["layer.title","layer.loaded"]})],e.prototype,"name",null);a.__decorate([k.property({type:[String],json:{write:!0}})],e.prototype,"orderByFields",void 0);a.__decorate([k.property()],e.prototype,"searchFields",void 0);a.__decorate([k.property()],e.prototype,"searchTemplate",void 0);a.__decorate([k.property()],e.prototype,"suggestionTemplate",
void 0);return e=d=a.__decorate([k.subclass("esri.widgets.Search.LayerSearchSource")],e)}(f)})},"esri/widgets/Search/SearchSource":function(){define("require exports tslib ../../core/Identifiable ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(m,b,a,n,k,f){return function(b){function g(a){a=b.call(this,a)||this;a.autoNavigate=null;a.filter=null;a.getResults=null;a.getSuggestions=null;a.maxResults=null;a.maxSuggestions=null;a.minSuggestCharacters=null;a.outFields=
null;a.placeholder="";a.popupEnabled=null;a.popupTemplate=null;a.prefix="";a.resultGraphicEnabled=null;a.resultSymbol=null;a.suggestionsEnabled=null;a.suffix="";a.withinViewEnabled=!1;a.zoomScale=null;return a}a.__extends(g,b);a.__decorate([f.property()],g.prototype,"autoNavigate",void 0);a.__decorate([f.property()],g.prototype,"filter",void 0);a.__decorate([f.property()],g.prototype,"getResults",void 0);a.__decorate([f.property()],g.prototype,"getSuggestions",void 0);a.__decorate([f.property()],
g.prototype,"maxResults",void 0);a.__decorate([f.property()],g.prototype,"maxSuggestions",void 0);a.__decorate([f.property()],g.prototype,"minSuggestCharacters",void 0);a.__decorate([f.property()],g.prototype,"outFields",void 0);a.__decorate([f.property()],g.prototype,"placeholder",void 0);a.__decorate([f.property()],g.prototype,"popupEnabled",void 0);a.__decorate([f.property()],g.prototype,"popupTemplate",void 0);a.__decorate([f.property()],g.prototype,"prefix",void 0);a.__decorate([f.property()],
g.prototype,"resultGraphicEnabled",void 0);a.__decorate([f.property()],g.prototype,"resultSymbol",void 0);a.__decorate([f.property()],g.prototype,"suggestionsEnabled",void 0);a.__decorate([f.property()],g.prototype,"suffix",void 0);a.__decorate([f.property()],g.prototype,"withinViewEnabled",void 0);a.__decorate([f.property()],g.prototype,"zoomScale",void 0);return g=a.__decorate([f.subclass("esri.widgets.Search.SearchSource")],g)}(n.IdentifiableMixin(k.JSONSupport))})},"esri/widgets/Search/support/layerSearchUtils":function(){define("require exports ../../../intl ../../../core/Error ../../../core/lang ../../../core/Logger ../../../core/maybe ../../../core/promiseUtils ../../../core/unitUtils ../../../geometry/Polygon ./geometryUtils".split(" "),
function(m,b,a,n,k,f,l,g,e,d,c){function r(a,b){var c=a.filter;b=b&&b.extent;a=a.withinViewEnabled&&b?b:void 0;return c&&c.geometry||a}function p(a){return a?a.load().then(g.resolve).catch(g.reject):g.resolve()}function h(a){return a&&!!a.get("capabilities.query.supportsPagination")}function u(a){var b="";a&&(a=a.fields)&&a.some(function(a){return"string"===a.type?(b=a.name,!0):!1});return b}function w(a,b){return a&&b?b.every(function(b){return!!a.getField(b)}):!1}function q(a){for(var b=0;b<a.length;b++)if(255<
a.charCodeAt(b))return!0;return!1}function t(a,b,c){var d=null;(a=a.codedValues)&&a.some(function(a){var h=a.name,h=c?h:h.toLowerCase();return(c?b:b.toLowerCase())===h?(d=a.code.toString(),!0):!1});return d}function v(a,b){return(b=b&&b.where)?"("+a+") AND ("+b+")":a}function z(a,b,c,d,h){var e=b.definitionExpression,f="";if(a){var g=A.test(b.url)&&q(a)?"N":"";c&&c.forEach(function(c){var e=b.getField(c);c=((c="function"===typeof b.getFieldDomain&&b.getFieldDomain(c))&&"coded-value"===c.type?t(c,
a,h):null)||a||null;if(null!==c){var q=e.type,e=e.name;"string"===q||"date"===q||"global-id"===q?h?e=v(e+" \x3d "+g+"'"+c+"'",d):(c=c.toUpperCase(),e=v("UPPER("+e+") LIKE "+g+"'%"+c+"%'",d)):"oid"===q||"small-integer"===q||"integer"===q||"single"===q||"double"===q?(c=Number(c),e=isNaN(c)?null:v(e+" \x3d "+c,d)):e=v(e+" \x3d "+c,d);e&&(f+=f?" OR ("+e+")":"("+e+")")}})}return e?"("+e+") AND ("+f+")":f}function x(a,b){var c=null;(a=a.codedValues)&&a.length&&a.some(function(a){return a.code===b?(c=a.name,
!0):!1});return c}function C(b,c,d){var e=b.layer,h=b.attributes,f="function"===typeof e.getFieldDomain&&e.getFieldDomain(d);return c?a.substitute(c,h):d&&b.hasOwnProperty("attributes")&&h.hasOwnProperty(d)?(b=h[d],d=e.getField(d),f&&"coded-value"===f.type?x(f,b):d&&"date"===d.type?a.formatDate(new Date(b)):"number"===typeof b?b.toString():"string"!==typeof b?"":b.trim()):""}function D(a,b,c,d){return a.features.map(function(a){var e=a.attributes[a.layer.objectIdField];return{text:C(a,b.suggestionTemplate,
d),key:e,sourceIndex:c}})}function E(a,b,e,h,f,q,g){return a.features.map(function(a){var t=a.clone(),r=a.layer,r=(r=r&&r.objectIdField)&&a.attributes[r],v=C(a,e.searchTemplate,f),z=c.createExtentFromGeometry(t.geometry,b,q),z="number"===typeof g?c.scaleExtent(k.clone(z),b,g):z;a=a.clone();l.isSome(z)&&(a.geometry=d.fromExtent(z));return{extent:z,target:a,feature:t,key:r,name:v,sourceIndex:h}})}Object.defineProperty(b,"__esModule",{value:!0});b.getSuggestions=b.getResults=void 0;var A=/https?:\/\/services.*\.arcgis\.com/i,
H=/(?:\{([^}]+)\})/g,B=f.getLogger("esri.widgets.Search.support.layerSearchUtils");b.getResults=function(a,b){var c=a.exactMatch,d=void 0===c?!1:c,f=a.location,q=a.maxResults,g=a.spatialReference,t=a.source,v=a.sourceIndex,k=a.suggestResult,l=a.view,x=t.layer,m=t.filter,C=t.zoomScale,D=l&&l.scale,A=r(t,l),G=b&&b.signal;return p(x).then(function(){var a=x.popupTemplate;return a?a.getRequiredFields(x.fields):null}).then(function(a){var b=x.objectIdField,c=x.returnZ,r=t.displayField||t.layer.displayField||
u(t.layer);if(!x.getField(r))throw B.error("invalid-field: displayField is invalid."),new n("getResults():invalid-field","displayField is invalid.");a=a&&a.length?a:[r];var p=(a=t.outFields||a)&&-1!==a.indexOf("*");-1!==a.indexOf(b)||p||a.push(b);if(!p&&!w(x,a))throw B.error("invalid-field: outField is invalid."),new n("getResults():invalid-field","outField is invalid.");b=x.createQuery();if(p=t.orderByFields)b.orderByFields=p;g&&(b.outSpatialReference=g,p=1/e.getMetersPerUnitForSR(g))&&(b.maxAllowableOffset=
p);p=!!x.get("capabilities.data.supportsZ");b.returnZ=p&&!1!==c;b.returnGeometry=!0;a&&(b.outFields=a);if(f)b.geometry=f;else if(k.key)b.objectIds=[parseInt(k.key,10)];else{c=t.searchFields||[r];if(!w(x,c))throw B.error("invalid-field: search field is invalid."),new n("getResults():invalid-field","search field is invalid.");h(x)&&(b.num=q);A&&(b.geometry=A);if(!k.text.trim())return[];a=t.prefix;p=t.suffix;a=(""+(void 0===a?"":a)+k.text+(void 0===p?"":p)).replace(/\'/g,"''");c=z(a,x,c,m,d);if(!c)return[];
b.where=c}return x.queryFeatures(b,{signal:G}).then(function(a){return E(a,l,t,v,r,D,C)})})};b.getSuggestions=function(a,b){var c=a.source,d=a.spatialReference,e=a.suggestTerm,f=a.maxSuggestions,q=a.sourceIndex,t=c.layer,g=c.filter,v=b&&b.signal,k=r(c,a.view);return p(t).then(function(){if(!h(t))return[];var a=c.displayField||c.layer.displayField||u(c.layer),b=c.searchFields||[a],r=[];c.suggestionTemplate?c.suggestionTemplate.replace(H,function(a,b){r.push(b);return a}):r.push(a);var l=r&&-1!==r.indexOf("*");
-1!==r.indexOf(t.objectIdField)||l||r.push(t.objectIdField);var p=!!t.getField(a),l=l||w(t,r),x=w(t,b);if(!p)throw B.error("invalid-field: displayField is invalid."),new n("getSuggestions():invalid-field","displayField is invalid.");if(!l)throw B.error("invalid-field: outField is invalid."),new n("getSuggestions():invalid-field","outField is invalid.");if(!x)throw B.error("invalid-field: search field is invalid."),new n("getSuggestions():invalid-field","search field is invalid.");p=t.createQuery();
if(l=c.orderByFields)p.orderByFields=l;p.outSpatialReference=d;p.returnGeometry=!1;p.num=f;p.outFields=r;k&&(p.geometry=k);if(!e.trim())return[];l=c.prefix;x=c.suffix;l=(""+(void 0===l?"":l)+e+(void 0===x?"":x)).replace(/\'/g,"''");b=z(l,t,b,g,!1);if(!b)return[];p.where=b;return t.queryFeatures(p,{signal:v}).then(function(b){return D(b,c,q,a)})})}})},"esri/widgets/Search/support/geometryUtils":function(){define("require exports ../../../geometry ../../../core/Error ../../../core/Logger ../../../core/maybe ../../../core/promiseUtils ../../../geometry/support/scaleUtils".split(" "),
function(m,b,a,n,k,f,l,g){function e(b,d,e){var c=b.hasZ?b.z:void 0;return d&&d.map?(e?g.getExtentForScale(d,e):d.extent).clone().centerAt(b).set({zmax:c,zmin:c}):new a.Extent({xmin:b.x-.25,ymin:b.y-.25,xmax:b.x+.25,ymax:b.y+.25,spatialReference:b.spatialReference,zmin:c,zmax:c})}Object.defineProperty(b,"__esModule",{value:!0});b.scaleExtent=b.createExtentFromGeometry=b.getPointFromGeometry=b.getPointWithElevation=void 0;var d=k.getLogger("esri.widgets.Search.support.geometryUtils");b.getPointWithElevation=
function(a,b){return b?a?a.hasZ||"2d"===b.type?l.resolve(a):(b=b.get("map.ground"))&&b.layers.length?b.queryElevation(a).then(function(a){return a.geometry}):l.resolve(a):(d.error("missing-parameter: point is missing."),l.reject(new n("searchgeometryutils:missing-parameter","point is missing."))):(d.error("missing-parameter: view is missing."),l.reject(new n("searchgeometryutils:missing-parameter","view is missing.")))};b.getPointFromGeometry=function(a){if(f.isNone(a))return null;switch(a.type){case "point":return a;
case "extent":return a.center;case "polygon":return a.centroid;case "multipoint":return a.getPoint(0);case "polyline":return a.getPoint(0,0)}return null};b.createExtentFromGeometry=function(a,b,d){if(f.isNone(a))return null;if("extent"===a.type)return a;if("multipoint"===a.type||"polygon"===a.type||"polyline"===a.type)return a.extent;if("point"===a.type)return e(a,b,d)};b.scaleExtent=function(a,b,d){return f.isNone(a)||f.isNone(b)?null:e(a.center,b,d)}})},"esri/geometry/support/scaleUtils":function(){define(["require",
"exports","../../core/unitUtils"],function(m,b,a){function n(b,f){f=a.getMetersPerUnitForSR(f);return b/(f*a.inchesPerMeter*96)}Object.defineProperty(b,"__esModule",{value:!0});b.getExtentForScale=b.getScaleForResolution=b.getResolutionForScale=b.getScale=void 0;b.getScale=function(b,f){f=f||b.extent;b=b.width;var k=a.getMetersPerUnitForSR(f&&f.spatialReference);return f&&b?f.width/b*k*a.inchesPerMeter*96:0};b.getResolutionForScale=n;b.getScaleForResolution=function(b,f){f=a.getMetersPerUnitForSR(f);
return b*f*a.inchesPerMeter*96};b.getExtentForScale=function(a,b){var f=a.extent;a=a.width;b=n(b,f.spatialReference);return f.clone().expand(b*a/f.width)}})},"esri/widgets/Search/LocatorSearchSource":function(){define("require exports tslib ../../core/lang ../../core/accessorSupport/decorators ../../tasks/Locator ./SearchSource ./support/locatorUtils".split(" "),function(m,b,a,n,k,f,l,g){return function(b){function d(){var c=null!==b&&b.apply(this,arguments)||this;c.categories=null;c.countryCode=
null;c.defaultZoomScale=null;c.locator=null;c.locationType=null;c.name="";c.placeholder="";c.searchTemplate="";c.singleLineFieldName=null;c.suggestionsEnabled=null;c.zoomScale=null;c.getResults=function(b,d){return g.getResults(a.__assign({source:c},b),d)};c.getSuggestions=function(b,d){return g.getSuggestions(a.__assign({source:c},b),d)};return c}a.__extends(d,b);c=d;d.prototype.readLocator=function(a,b){return(a=b.url)?new f({url:a}):null};d.prototype.writeLocator=function(a,b){b.url=a?a.url:null};
d.prototype.clone=function(){return new c({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?n.clone(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,
withinViewEnabled:this.withinViewEnabled,categories:this.categories?n.clone(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,locator:this.locator,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})};var c;a.__decorate([k.property()],d.prototype,"categories",void 0);a.__decorate([k.property()],d.prototype,"countryCode",void 0);a.__decorate([k.property({json:{write:!0}})],d.prototype,"defaultZoomScale",void 0);a.__decorate([k.property({type:f})],
d.prototype,"locator",void 0);a.__decorate([k.reader("locator",["url"])],d.prototype,"readLocator",null);a.__decorate([k.writer("locator")],d.prototype,"writeLocator",null);a.__decorate([k.property()],d.prototype,"locationType",void 0);a.__decorate([k.property({json:{write:!0}})],d.prototype,"name",void 0);a.__decorate([k.property({json:{write:!0}})],d.prototype,"placeholder",void 0);a.__decorate([k.property()],d.prototype,"searchTemplate",void 0);a.__decorate([k.property({json:{write:!0}})],d.prototype,
"singleLineFieldName",void 0);a.__decorate([k.property({json:{read:{source:"suggest"},write:{target:"suggest"}}})],d.prototype,"suggestionsEnabled",void 0);a.__decorate([k.property({json:{write:!0}})],d.prototype,"zoomScale",void 0);return d=c=a.__decorate([k.subclass("esri.widgets.Search.LocatorSearchSource")],d)}(l)})},"esri/tasks/Locator":function(){define("require exports tslib ../request ../core/accessorSupport/decorators ../geometry/SpatialReference ./Task ./support/AddressCandidate".split(" "),
function(m,b,a,n,k,f,l,g){return function(b){function d(a){a=b.call(this,a)||this;a.outSpatialReference=null;a.url=null;return a}a.__extends(d,b);d.prototype.addressToLocations=function(b,d){var c=b.address,e=b.categories,f=b.countryCode,g=b.forStorage,q=b.location,t=b.locationType,v=b.magicKey,k=b.maxLocations,r=b.outFields;b=b.searchExtent;var l=q?q.clone().normalize():null,m=b?b.shiftCentralMeridian():null,E=this.outSpatialReference,q=this.parsedUrl;b=this.requestOptions;e={f:"json",outSR:E?JSON.stringify(E.toJSON()):
null,outFields:r?r.join(","):null,searchExtent:m?JSON.stringify(m.toJSON()):null,category:e?e.join(","):null,countryCode:f||null,magicKey:v||null,location:l,locationType:t||null,maxLocations:k||null,forStorage:g||null};c={query:this._encode(a.__assign(a.__assign(a.__assign({},q.query),c),e))};d=a.__assign(a.__assign(a.__assign({},b),d),c);return n(q.path+"/findAddressCandidates",d).then(this._handleAddressToLocationsResponse)};d.prototype.suggestLocations=function(b,d){var c=this.parsedUrl,e=this.requestOptions,
f=b.location,g=b.searchExtent,f=f?f.clone().normalize():null,g=g?g.shiftCentralMeridian():null;b={f:"json",text:b.text,maxSuggestions:b.maxSuggestions,searchExtent:g?JSON.stringify(g.toJSON()):null,category:b.categories?b.categories.join(","):null,countryCode:b.countryCode||null,location:f};b={query:this._encode(a.__assign(a.__assign({},c.query),b))};d=a.__assign(a.__assign(a.__assign({},e),d),b);return n(c.path+"/suggest",d).then(this._handleSuggestLocationsResponse)};d.prototype.addressesToLocations=
function(b,d){var c=this.outSpatialReference,e=this.parsedUrl,f=this.requestOptions,g=b.addresses,q=b.categories,t=b.locationType;b=b.countryCode;var v=[];Array.isArray(g)&&g.forEach(function(a){v.push({attributes:a})});c={category:q?q.join(","):null,sourceCountry:b||null,addresses:JSON.stringify({records:v}),locationType:t||null,f:"json",outSR:c?JSON.stringify(c):null};c={query:this._encode(a.__assign(a.__assign({},e.query),c))};d=a.__assign(a.__assign(a.__assign({},f),d),c);return n(e.path+"/geocodeAddresses",
d).then(this._handleAddressesToLocationsResponse)};d.prototype.locationToAddress=function(b,d){var c=b.locationType,e=(b=b.location)?b.clone().normalize():null,f="undefined"!==typeof e,g=this.outSpatialReference;b=this.parsedUrl;var q=this.requestOptions,c={outSR:g?JSON.stringify(g.toJSON()):null,location:f?JSON.stringify(e.toJSON()):null,locationType:c||null,f:"json"},c={query:this._encode(a.__assign(a.__assign({},b.query),c))};d=a.__assign(a.__assign(a.__assign({},q),d),c);return n(b.path+"/reverseGeocode",
d).then(this._handleLocationToAddressResponse)};d.prototype._handleAddressToLocationsResponse=function(a){a=a.data;if(!a)return[];var b=a.candidates,c=a.spatialReference;return b?b.map(function(a){if(a){var b=a.extent,d=a.location,e=b?b&&"number"===typeof b.xmin&&"number"===typeof b.ymin&&"number"===typeof b.xmax&&"number"===typeof b.ymax:!0;if(d&&"number"===typeof d.x&&"number"===typeof d.y&&e)return b&&(b.spatialReference=c),d.spatialReference=c,g.fromJSON(a)}}):[]};d.prototype._handleSuggestLocationsResponse=
function(a){return(a=a.data)?a.suggestions||[]:[]};d.prototype._handleAddressesToLocationsResponse=function(a){a=a.data;if(!a)return[];var b=a.locations,c=a.spatialReference;return b?b.map(function(a){var b=a.location;b&&(b.spatialReference=c);return g.fromJSON(a)}):[]};d.prototype._handleLocationToAddressResponse=function(a){if(a=a.data){var b=a.address;return g.fromJSON({address:b&&b.Match_addr||"",attributes:b||{},location:a.location,score:100})}};a.__decorate([k.property({type:f})],d.prototype,
"outSpatialReference",void 0);a.__decorate([k.property()],d.prototype,"url",void 0);return d=a.__decorate([k.subclass("esri.tasks.Locator")],d)}(l)})},"esri/tasks/support/AddressCandidate":function(){define("require exports tslib ../../core/JSONSupport ../../core/accessorSupport/decorators ../../geometry/Extent ../../geometry/Point".split(" "),function(m,b,a,n,k,f,l){return function(b){function e(a){a=b.call(this,a)||this;a.address=null;a.attributes=null;a.extent=null;a.location=null;a.score=null;
return a}a.__extends(e,b);a.__decorate([k.property({type:String,json:{write:!0}})],e.prototype,"address",void 0);a.__decorate([k.property({type:Object,json:{write:!0}})],e.prototype,"attributes",void 0);a.__decorate([k.property({type:f,json:{write:!0}})],e.prototype,"extent",void 0);a.__decorate([k.property({type:l,json:{write:!0}})],e.prototype,"location",void 0);a.__decorate([k.property({type:Number,json:{write:!0}})],e.prototype,"score",void 0);return e=a.__decorate([k.subclass("esri.tasks.support.AddressCandidate")],
e)}(n.JSONSupport)})},"esri/widgets/Search/support/locatorUtils":function(){define("require exports ../../../Graphic ../../../core/maybe ../../../core/maybe ../../../core/promiseUtils ../../../geometry/Polygon ./geometryUtils".split(" "),function(m,b,a,n,k,f,l,g){function e(a,b){var c=a.source,d=a.spatialReference,e=a.location,f=a.sourceIndex,h=a.view;a=c.locator;var g=c.zoomScale,k=c.defaultZoomScale,l=h&&h.scale;b=b&&b.signal;d&&(a.outSpatialReference=d);return a.locationToAddress({location:e},
{signal:b}).then(function(a){return p([a],{sourceIndex:f,scale:l,view:h,zoomScale:g,defaultZoomScale:k})})}function d(a,b){var c=a.filter;a=a.withinViewEnabled;var d=b&&b.extent;return(b=g.createExtentFromGeometry(c&&c.geometry,b,b&&b.scale))||(a&&d?d:void 0)}function c(a,b){var c=a.source,e=a.suggestResult,h=a.spatialReference,g=a.view,k=a.maxResults,l=a.sourceIndex,r=c&&c.zoomScale,u=c&&c.defaultZoomScale;if(!e.text.trim())return f.resolve();a=""+(!e.key&&c.prefix?c.prefix:"")+e.text+(!e.key&&c.suffix?
c.suffix:"");var m={},A=c.locator,H=g&&g.scale,B=d(c,g);b=b&&b.signal;if(!A)return f.resolve();c.categories&&(m.categories=c.categories);c.locationType&&(m.locationType=c.locationType);h&&(A.outSpatialReference=h);if(h=g&&g.get("extent.center"))m.location=h;m.maxLocations=k;B&&(m.searchExtent=n.unwrap(B));c.countryCode&&(m.countryCode=c.countryCode);var G=e.key;G&&(m.magicKey=G);m.address={};m.address[c.singleLineFieldName||"Single Line Input"]=a;c.outFields&&(m.outFields=c.outFields);return A.addressToLocations(m,
{signal:b}).then(function(a){return p(a,{key:G,scale:H,sourceIndex:l,view:g,zoomScale:r,defaultZoomScale:u})})}function r(a,b){return a.map(function(a){return{text:a.text,key:a.magicKey,sourceIndex:b}})}function p(b,c){return b.map(function(b){var d=c.key,e=c.scale,f=c.sourceIndex,h=c.view,r=c.zoomScale,n=c.defaultZoomScale,p=b.extent,m=b.location,u=b.address;b=new a({geometry:m,attributes:b.attributes});p=p||m;e=g.createExtentFromGeometry(p,h,e);h="number"===typeof r?g.scaleExtent(e,h,r):"number"===
typeof n&&"point"===p.type?g.scaleExtent(e,h,n):e;m=m?m.x+","+m.y:"";u=u||m;m=b.clone();k.isSome(h)&&(m.geometry=l.fromExtent(h));return{extent:h,feature:b,target:m,key:d,name:u,sourceIndex:f}})}Object.defineProperty(b,"__esModule",{value:!0});b.isArcGISWorldGeocoder=b.getSuggestions=b.getResults=void 0;b.getResults=function(a,b){return a.location?e(a,b):c(a,b)};b.getSuggestions=function(a,b){var c=a.source,e=a.spatialReference,g=a.view,h=a.suggestTerm,k=a.maxSuggestions,l=a.sourceIndex;a={};var p=
c.locator,m=d(c,g);b=b&&b.signal;if(!p)return f.resolve();c.categories&&(a.categories=c.categories);p.outSpatialReference=e;if(e=g&&g.get("extent.center"))a.location=e;if(!h.trim())return f.resolve();e=c.prefix;g=c.suffix;a.text=""+(void 0===e?"":e)+h+(void 0===g?"":g);m&&(a.searchExtent=n.unwrap(m));a.maxSuggestions=k;c.countryCode&&(a.countryCode=c.countryCode);return p.suggestLocations(a,{signal:b}).then(function(a){return r(a,l)})};b.isArcGISWorldGeocoder=function(a){return a?/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(a)||
/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/gi.test(a):!1}})},"esri/widgets/support/geolocationUtils":function(){define("require exports ../../config ../../core/Error ../../core/has ../../core/Logger ../../core/promiseUtils ../../geometry/Point ../../geometry/support/webMercatorUtils ../../portal/Portal ../../rest/geometryService ../../tasks/support/ProjectParameters".split(" "),function(m,b,a,n,k,f,l,g,e,d,c,r){function p(a,b,d){if(!b)return l.resolve(a);var f=b.spatialReference;
return f.isWGS84?l.resolve(a):f.isWebMercator?l.resolve(e.geographicToWebMercator(a)):h(d).then(function(b){if(!b)throw new n("geometry-service:missing-url","Geometry service URL is missing");var e=new r({geometries:[a],outSR:f});return c.project(b,e,d).then(function(a){return a[0]})})}function h(b){if(a.geometryServiceUrl)return l.resolve(a.geometryServiceUrl);var c=d.getDefault();return c.load(b).catch(function(){}).then(function(){return c.get("helperServices.geometry.url")})}Object.defineProperty(b,
"__esModule",{value:!0});b.positionToPoint=b.getCurrentPosition=b.supported=void 0;var u=f.getLogger("esri.core.geolocationUtils"),w={maximumAge:0,timeout:15E3,enableHighAccuracy:!0};b.supported=function(){var a=k("esri-geolocation");a||u.warn("geolocation-unsupported","Geolocation unsupported.");a&&((a=k("esri-secure-context"))||u.warn("insecure-context","Geolocation requires a secure origin."));return a};b.getCurrentPosition=function(a){a||(a=w);return l.create(function(b,c){setTimeout(function(){return c(new n("geolocation:timeout",
"getting the current geolocation position timed out"))},15E3);navigator.geolocation.getCurrentPosition(b,c,a)})};b.positionToPoint=function(a,b){var c=a.position;a=a.view;var d=c&&c.coords||{},d={accuracy:d.accuracy,altitude:d.altitude,altitudeAccuracy:d.altitudeAccuracy,heading:d.heading,latitude:d.latitude,longitude:d.longitude,speed:d.speed},c=c?{coords:d,timestamp:c.timestamp}:c;c=(c=c&&c.coords)?new g({longitude:c.longitude,latitude:c.latitude,z:c.altitude||null,spatialReference:{wkid:4326}}):
null;return p(c,a,b)}})},"esri/rest/geometryService":function(){define("require exports tslib ./geometryService/areasAndLengths ./geometryService/autoComplete ./geometryService/buffer ./geometryService/convexHull ./geometryService/cut ./geometryService/densify ./geometryService/difference ./geometryService/distance ./geometryService/fromGeoCoordinateString ./geometryService/generalize ./geometryService/intersect ./geometryService/labelPoints ./geometryService/lengths ./geometryService/offset ./geometryService/project ./geometryService/relation ./geometryService/reshape ./geometryService/simplify ./geometryService/toGeoCoordinateString ./geometryService/trimExtend ./geometryService/union ./geometryService/units".split(" "),
function(m,b,a,n,k,f,l,g,e,d,c,r,p,h,u,w,q,t,v,z,x,C,D,E,A){Object.defineProperty(b,"__esModule",{value:!0});a.__exportStar(n,b);a.__exportStar(k,b);a.__exportStar(f,b);a.__exportStar(l,b);a.__exportStar(g,b);a.__exportStar(e,b);a.__exportStar(d,b);a.__exportStar(c,b);a.__exportStar(r,b);a.__exportStar(p,b);a.__exportStar(h,b);a.__exportStar(u,b);a.__exportStar(w,b);a.__exportStar(q,b);a.__exportStar(t,b);a.__exportStar(v,b);a.__exportStar(z,b);a.__exportStar(x,b);a.__exportStar(C,b);a.__exportStar(D,
b);a.__exportStar(E,b);a.__exportStar(A,b)})},"esri/rest/geometryService/areasAndLengths":function(){define(["require","exports","tslib","../../request","../utils"],function(m,b,a,n,k){Object.defineProperty(b,"__esModule",{value:!0});b.areasAndLengths=void 0;b.areasAndLengths=function(b,l,g){return a.__awaiter(this,void 0,void 0,function(){var e,d,c;return a.__generator(this,function(f){e=k.parseUrl(b);d=a.__assign(a.__assign(a.__assign({},e.query),{f:"json"}),l.toJSON());c=k.asValidOptions(d,g);
return[2,n(e.path+"/areasAndLengths",c).then(function(a){return a.data})]})})}})},"esri/rest/utils":function(){define(["require","exports","tslib","../core/urlUtils"],function(m,b,a,n){function k(a,b,g){var e={},d;for(d in a)if("declaredClass"!==d){var c=a[d];if(null!=c&&"function"!==typeof c)if(Array.isArray(c)){e[d]=[];for(var f=0;f<c.length;f++)e[d][f]=k(c[f])}else"object"===typeof c?(c.toJSON&&(c=c.toJSON(g&&g[d])),e[d]=b?c:JSON.stringify(c)):e[d]=c}return e}Object.defineProperty(b,"__esModule",
{value:!0});b.encode=b.parseUrl=b.asValidOptions=void 0;b.asValidOptions=function(b,k){b={query:b};k&&(b=a.__assign(a.__assign({},k),b));return b};b.parseUrl=function(a){return"string"===typeof a?n.urlToObject(a):a};b.encode=k})},"esri/rest/geometryService/autoComplete":function(){define("require exports tslib ../../geometry ../../request ./../utils ./utils".split(" "),function(m,b,a,n,k,f,l){Object.defineProperty(b,"__esModule",{value:!0});b.autoComplete=void 0;b.autoComplete=function(b,e,d,c){return a.__awaiter(this,
void 0,void 0,function(){var g,p,h,m;return a.__generator(this,function(r){g=e[0].spatialReference;p=f.parseUrl(b);h=a.__assign(a.__assign({},p.query),{f:"json",sr:JSON.stringify(g.toJSON()),polygons:JSON.stringify(l.encodeGeometries(e).geometries),polylines:JSON.stringify(l.encodeGeometries(d).geometries)});m=f.asValidOptions(h,c);return[2,k(p.path+"/autoComplete",m).then(function(a){return(a.data.geometries||[]).map(function(a){return new n.Polygon({spatialReference:g,rings:a.rings})})})]})})}})},
"esri/rest/geometryService/utils":function(){define(["require","exports","../../geometry/support/jsonUtils"],function(m,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.decodeGeometries=b.encodeGeometries=void 0;b.encodeGeometries=function(b){return{geometryType:a.getJsonType(b[0]),geometries:b.map(function(a){return a.toJSON()})}};b.decodeGeometries=function(b,k,f){var l=a.getGeometryType(k);return b.map(function(a){a=l.fromJSON(a);a.spatialReference=f;return a})}})},"esri/rest/geometryService/buffer":function(){define("require exports tslib ../../geometry ../../request ../utils".split(" "),
function(m,b,a,n,k,f){Object.defineProperty(b,"__esModule",{value:!0});b.buffer=void 0;b.buffer=function(b,g,e){return a.__awaiter(this,void 0,void 0,function(){var d,c,l,p;return a.__generator(this,function(h){d=f.parseUrl(b);c=a.__assign(a.__assign(a.__assign({},d.query),{f:"json"}),g.toJSON());l=g.outSpatialReference||g.geometries[0].spatialReference;p=f.asValidOptions(c,e);return[2,k(d.path+"/buffer",p).then(function(a){return(a.data.geometries||[]).map(function(a){return new n.Polygon({spatialReference:l,
rings:a.rings})})})]})})}})},"esri/rest/geometryService/convexHull":function(){define("require exports tslib ../../request ../../geometry/support/jsonUtils ../utils ./utils".split(" "),function(m,b,a,n,k,f,l){Object.defineProperty(b,"__esModule",{value:!0});b.convexHull=void 0;b.convexHull=function(b,e,d){return a.__awaiter(this,void 0,void 0,function(){var c,g,p,h;return a.__generator(this,function(r){c=e[0].spatialReference;g=f.parseUrl(b);p=a.__assign(a.__assign({},g.query),{f:"json",sr:JSON.stringify(c.toJSON()),
geometries:JSON.stringify(l.encodeGeometries(e))});h=f.asValidOptions(p,d);return[2,n(g.path+"/convexHull",h).then(function(a){return k.fromJSON(a.data.geometry).set({spatialReference:c})})]})})}})},"esri/rest/geometryService/cut":function(){define("require exports tslib ../../geometry ../../request ../../geometry/support/jsonUtils ../utils".split(" "),function(m,b,a,n,k,f,l){Object.defineProperty(b,"__esModule",{value:!0});b.cut=void 0;b.cut=function(b,e,d,c){return a.__awaiter(this,void 0,void 0,
function(){var g,p,h,m,w,q,t,v;return a.__generator(this,function(r){switch(r.label){case 0:return g=l.parseUrl(b),p=e[0].spatialReference,h=a.__assign(a.__assign({},c),{query:a.__assign(a.__assign({},g.query),{f:"json",sr:JSON.stringify(p),target:JSON.stringify({geometryType:f.getJsonType(e[0]),geometries:e}),cutter:JSON.stringify(d)})}),[4,k(g.path+"/cut",h)];case 1:return m=r.sent(),w=m.data,q=w.cutIndexes,t=w.geometries,v=void 0===t?[]:t,[2,{cutIndexes:q,geometries:v.map(function(a){a=n.fromJSON(a);
a.spatialReference=p;return a})}]}})})}})},"esri/rest/geometryService/densify":function(){define("require exports tslib ../../request ../../geometry/support/jsonUtils ../utils".split(" "),function(m,b,a,n,k,f){Object.defineProperty(b,"__esModule",{value:!0});b.densify=void 0;b.densify=function(b,g,e){return a.__awaiter(this,void 0,void 0,function(){var d,c,l,p;return a.__generator(this,function(h){d=g.geometries[0].spatialReference;c=f.parseUrl(b);l=a.__assign(a.__assign(a.__assign({},c.query),{f:"json"}),
g.toJSON());p=f.asValidOptions(l,e);return[2,n(c.path+"/densify",p).then(function(a){return(a.data.geometries||[]).map(function(a){return k.fromJSON(a).set({spatialReference:d})})})]})})}})},"esri/rest/geometryService/difference":function(){define("require exports tslib ../../request ../../geometry/support/jsonUtils ../utils ./utils".split(" "),function(m,b,a,n,k,f,l){Object.defineProperty(b,"__esModule",{value:!0});b.difference=void 0;b.difference=function(b,e,d,c){return a.__awaiter(this,void 0,
void 0,function(){var g,p,h,m;return a.__generator(this,function(r){g=e[0].spatialReference;p=f.parseUrl(b);h=a.__assign(a.__assign({},p.query),{f:"json",sr:JSON.stringify(g.toJSON()),geometries:JSON.stringify(l.encodeGeometries(e)),geometry:JSON.stringify({geometryType:k.getJsonType(d),geometry:d.toJSON()})});m={query:h};c&&(m=a.__assign(a.__assign({},c),m));return[2,n(p.path+"/difference",m).then(function(a){return(a.data.geometries||[]).map(function(a){return k.fromJSON(a).set({spatialReference:g})})})]})})}})},
"esri/rest/geometryService/distance":function(){define(["require","exports","tslib","../../request","../utils"],function(m,b,a,n,k){Object.defineProperty(b,"__esModule",{value:!0});b.distance=void 0;b.distance=function(b,l,g){return a.__awaiter(this,void 0,void 0,function(){var e,d,c;return a.__generator(this,function(f){e=k.parseUrl(b);d=a.__assign(a.__assign(a.__assign({},e.query),{f:"json"}),l.toJSON());c=k.asValidOptions(d,g);return[2,n(e.path+"/distance",c).then(function(a){return(a=a.data)&&
a.distance})]})})}})},"esri/rest/geometryService/fromGeoCoordinateString":function(){define("require exports tslib ../../request ../utils ./units".split(" "),function(m,b,a,n,k,f){Object.defineProperty(b,"__esModule",{value:!0});b.fromGeoCoordinateString=void 0;b.fromGeoCoordinateString=function(b,g,e){return a.__awaiter(this,void 0,void 0,function(){var d,c,l,p,h;return a.__generator(this,function(r){d={};d.sr=null!=g.sr&&"object"===typeof g.sr?g.sr.wkid||JSON.stringify(g.sr):g.sr;d.strings=JSON.stringify(g.strings);
c=g.conversionType||"mgrs";d.conversionType=f.conversionTypeKebabDict.toJSON(c);d.conversionMode=g.conversionMode;l=k.parseUrl(b);p=a.__assign(a.__assign(a.__assign({},l.query),{f:"json"}),d);h=k.asValidOptions(p,e);return[2,n(l.path+"/fromGeoCoordinateString",h).then(function(a){return a.data.coordinates})]})})}})},"esri/rest/geometryService/units":function(){define(["require","exports","../../core/jsonMap"],function(m,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.units=b.conversionTypeKebabDict=
void 0;b.conversionTypeKebabDict=new a.JSONMap({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"});b.units={UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,
UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,
UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,
UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",
UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"}})},"esri/rest/geometryService/generalize":function(){define("require exports tslib ../../request ../../geometry/support/jsonUtils ../utils ../../tasks/operations/generalize ../../tasks/support/GeneralizeParameters".split(" "),function(m,b,a,n,k,f,l,g){Object.defineProperty(b,"__esModule",{value:!0});b.generalize=void 0;b.generalize=function(b,d,c){return a.__awaiter(this,void 0,void 0,function(){var e,p,h,m,w,q;return a.__generator(this,
function(t){d=g.from(d);e=d.toJSON();p=l.generalizeToRESTParameters(d);h=f.parseUrl(b);m=a.__assign(a.__assign(a.__assign({},h.query),{f:"json"}),p);w=e.geometries[0].spatialReference;q=f.asValidOptions(m,c);return[2,n(h.path+"/generalize",q).then(function(a){return(a.data.geometries||[]).map(function(a){return k.fromJSON(a).set({spatialReference:w})})})]})})}})},"esri/tasks/operations/generalize":function(){define(["require","exports","../../core/jsonMap","../../geometry/support/jsonUtils"],function(m,
b,a,n){Object.defineProperty(b,"__esModule",{value:!0});b.generalizeToRESTParameters=void 0;var k=new a.default({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});b.generalizeToRESTParameters=function(a){var b=a.toJSON();a=b.geometries;var f=b.deviationUnit,b={maxDeviation:b.maxDeviation};a&&a.length&&(b.geometries=JSON.stringify({geometryType:n.getJsonType(a[0]),
geometries:a}),b.sr=JSON.stringify(a[0].spatialReference));k.write(f,b,"deviationUnit");return b}})},"esri/tasks/support/GeneralizeParameters":function(){define("require exports tslib ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils".split(" "),function(m,b,a,n,k,f,l){m=function(b){function e(a){a=b.call(this,a)||this;a.deviationUnit=null;a.geometries=null;a.maxDeviation=null;return a}a.__extends(e,b);a.__decorate([k.property({type:String,
json:{write:!0}})],e.prototype,"deviationUnit",void 0);a.__decorate([k.property({json:{read:{reader:function(a){return a?a.map(function(a){return l.fromJSON(a)}):null}},write:{writer:function(a,b){b.geometries=a.map(function(a){return a.toJSON()})}}}})],e.prototype,"geometries",void 0);a.__decorate([k.property({type:Number,json:{write:!0}})],e.prototype,"maxDeviation",void 0);return e=a.__decorate([k.subclass("esri.tasks.support.GeneralizeParameters")],e)}(n.JSONSupport);m.from=f.default(m);return m})},
"esri/rest/geometryService/intersect":function(){define("require exports tslib ../../request ../../geometry/support/jsonUtils ../utils ./utils".split(" "),function(m,b,a,n,k,f,l){Object.defineProperty(b,"__esModule",{value:!0});b.intersect=void 0;b.intersect=function(b,e,d,c){return a.__awaiter(this,void 0,void 0,function(){var g,p,h,m;return a.__generator(this,function(r){g=e[0].spatialReference;p=f.parseUrl(b);h=a.__assign(a.__assign({},p.query),{f:"json",sr:JSON.stringify(g.toJSON()),geometries:JSON.stringify(l.encodeGeometries(e)),
geometry:JSON.stringify({geometryType:k.getJsonType(d),geometry:d.toJSON()})});m=f.asValidOptions(h,c);return[2,n(p.path+"/intersect",m).then(function(a){return(a.data.geometries||[]).map(function(a){return k.fromJSON(a).set({spatialReference:g})})})]})})}})},"esri/rest/geometryService/labelPoints":function(){define("require exports tslib ../../request ../../geometry/support/jsonUtils ../utils".split(" "),function(m,b,a,n,k,f){Object.defineProperty(b,"__esModule",{value:!0});b.labelPoints=void 0;
b.labelPoints=function(b,g,e){var d=g.map(function(a){return a.toJSON()}),c=g[0].spatialReference;b=f.parseUrl(b);d=a.__assign(a.__assign({},b.query),{f:"json",sr:c.wkid?c.wkid:JSON.stringify(c.toJSON()),polygons:JSON.stringify(d)});e=f.asValidOptions(d,e);return n(b.path+"/labelPoints",e).then(function(a){return(a.data.labelPoints||[]).map(function(a){return k.fromJSON(a).set({spatialReference:c})})})}})},"esri/rest/geometryService/lengths":function(){define("require exports tslib ../../request ../utils ../../tasks/operations/lengths ../../tasks/support/LengthsParameters".split(" "),
function(m,b,a,n,k,f,l){Object.defineProperty(b,"__esModule",{value:!0});b.lengths=void 0;b.lengths=function(b,e,d){return a.__awaiter(this,void 0,void 0,function(){var c,g,p,h;return a.__generator(this,function(r){e=l.from(e);c=f.lengthsToRESTParameters(e);g=k.parseUrl(b);p=a.__assign(a.__assign(a.__assign({},g.query),{f:"json"}),c);h=k.asValidOptions(p,d);return[2,n(g.path+"/lengths",h).then(function(a){return a.data})]})})}})},"esri/tasks/operations/lengths":function(){define(["require","exports",
"../../core/jsonMap"],function(m,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.lengthsToRESTParameters=void 0;var n=new a.default({preserveShape:"preserve-shape"});b.lengthsToRESTParameters=function(a){var b=a.toJSON(),k=b.lengthUnit,g=b.geodesic,e=b.calculationType,d={};d.polylines=JSON.stringify(b.polylines);a=a.polylines[0].spatialReference;d.sr=a.wkid?a.wkid:JSON.stringify(a.toJSON());k&&(d.lengthUnit=k);g&&(d.geodesic=g);e&&(d.calculationType=n.toJSON(e));return d}})},"esri/tasks/support/LengthsParameters":function(){define("require exports tslib ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils".split(" "),
function(m,b,a,n,k,f,l,g){m=function(b){function d(a){a=b.call(this,a)||this;a.calculationType=null;a.geodesic=null;a.lengthUnit=null;a.polylines=null;return a}a.__extends(d,b);a.__decorate([f.property({type:String,json:{write:!0}})],d.prototype,"calculationType",void 0);a.__decorate([f.property({type:Boolean,json:{write:!0}})],d.prototype,"geodesic",void 0);a.__decorate([f.property({json:{write:!0}})],d.prototype,"lengthUnit",void 0);a.__decorate([f.property({type:[n.Polyline],json:{read:{reader:function(a){return a?
a.map(function(a){return g.fromJSON(a)}):null}},write:{writer:function(a,b){b.polylines=a.map(function(a){return a.toJSON()})}}}})],d.prototype,"polylines",void 0);return d=a.__decorate([f.subclass("esri.tasks.support.LengthsParameters")],d)}(k.JSONSupport);m.from=l.default(m);return m})},"esri/rest/geometryService/offset":function(){define("require exports tslib ../../request ../../geometry/support/jsonUtils ../utils ../../tasks/operations/offset ../../tasks/support/OffsetParameters".split(" "),
function(m,b,a,n,k,f,l,g){Object.defineProperty(b,"__esModule",{value:!0});b.offset=void 0;b.offset=function(b,d,c){return a.__awaiter(this,void 0,void 0,function(){var e,p,h,m,w;return a.__generator(this,function(q){d=g.from(d);e=l.offsetToRESTParameters(d);p=f.parseUrl(b);h=a.__assign(a.__assign(a.__assign({},p.query),{f:"json"}),e);m=d.geometries[0].spatialReference;w=f.asValidOptions(h,c);return[2,n(p.path+"/offset",w).then(function(a){return(a.data.geometries||[]).map(function(a){return k.fromJSON(a).set({spatialReference:m})})})]})})}})},
"esri/tasks/operations/offset":function(){define(["require","exports","../../core/jsonMap","../../geometry/support/jsonUtils"],function(m,b,a,n){Object.defineProperty(b,"__esModule",{value:!0});b.offsetToRESTParameters=void 0;var k=new a.default({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"}),f=new a.default({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});b.offsetToRESTParameters=function(a){var b=
a.toJSON();a=b.geometries;var e=b.offsetHow,d=b.offsetUnit,b={bevelRatio:b.bevelRatio,offsetDistance:b.offsetDistance};a&&a.length&&(b.geometries=JSON.stringify({geometryType:n.getJsonType(a[0]),geometries:a}),b.sr=JSON.stringify(a[0].spatialReference));e&&(b.offsetHow=k.toJSON(e));d&&(b.offsetUnit=f.toJSON(d));return b}})},"esri/tasks/support/OffsetParameters":function(){define("require exports tslib ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils".split(" "),
function(m,b,a,n,k,f,l){m=function(b){function e(a){a=b.call(this,a)||this;a.bevelRatio=null;a.geometries=null;a.offsetDistance=null;a.offsetHow=null;a.offsetUnit=null;return a}a.__extends(e,b);a.__decorate([k.property({type:Number,json:{write:!0}})],e.prototype,"bevelRatio",void 0);a.__decorate([k.property({json:{read:{reader:function(a){return a?a.map(function(a){return l.fromJSON(a)}):null}},write:{writer:function(a,b){b.geometries=a.map(function(a){return a.toJSON()})}}}})],e.prototype,"geometries",
void 0);a.__decorate([k.property({type:Number,json:{write:!0}})],e.prototype,"offsetDistance",void 0);a.__decorate([k.property({type:String,json:{write:!0}})],e.prototype,"offsetHow",void 0);a.__decorate([k.property({type:String,json:{write:!0}})],e.prototype,"offsetUnit",void 0);return e=a.__decorate([k.subclass("esri.tasks.support.OffsetParameters")],e)}(n.JSONSupport);m.from=f.default(m);return m})},"esri/rest/geometryService/project":function(){define("require exports tslib ../../request ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils ../utils ./utils ../../tasks/support/ProjectParameters".split(" "),
function(m,b,a,n,k,f,l,g,e){Object.defineProperty(b,"__esModule",{value:!0});b.project=void 0;var d=k.ensureType(e);b.project=function(b,e,k){return a.__awaiter(this,void 0,void 0,function(){var c,m,p,q,t;return a.__generator(this,function(h){e=d(e);c=l.parseUrl(b);m=a.__assign(a.__assign(a.__assign({},c.query),{f:"json"}),e.toJSON());p=e.outSpatialReference;q=f.getJsonType(e.geometries[0]);t=l.asValidOptions(m,k);return[2,n(c.path+"/project",t).then(function(a){return g.decodeGeometries(a.data.geometries,
q,p)})]})})}})},"esri/tasks/support/ProjectParameters":function(){define("require exports tslib ../../core/JSONSupport ../../core/Logger ../../core/accessorSupport/decorators ../../geometry/support/jsonUtils".split(" "),function(m,b,a,n,k,f,l){var g=k.getLogger("esri.tasks.support.ProjectParameters");return function(b){function d(a){a=b.call(this,a)||this;a.geometries=null;a.outSpatialReference=null;a.transformation=null;a.transformForward=null;return a}a.__extends(d,b);Object.defineProperty(d.prototype,
"outSR",{get:function(){g.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");return this.outSpatialReference},set:function(a){g.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");this.outSpatialReference=a},enumerable:!1,configurable:!0});d.prototype.toJSON=function(){var a=this.geometries.map(function(a){return a.toJSON()}),b=this.geometries[0],d={};d.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON());d.inSR=
b.spatialReference.wkid||JSON.stringify(b.spatialReference.toJSON());d.geometries=JSON.stringify({geometryType:l.getJsonType(b),geometries:a});this.transformation&&(d.transformation=this.transformation.wkid||JSON.stringify(this.transformation));null!=this.transformForward&&(d.transformForward=this.transformForward);return d};a.__decorate([f.property()],d.prototype,"geometries",void 0);a.__decorate([f.property({json:{read:{source:"outSR"}}})],d.prototype,"outSpatialReference",void 0);a.__decorate([f.property({json:{read:!1}})],
d.prototype,"outSR",null);a.__decorate([f.property()],d.prototype,"transformation",void 0);a.__decorate([f.property()],d.prototype,"transformForward",void 0);return d=a.__decorate([f.subclass("esri.tasks.support.ProjectParameters")],d)}(n.JSONSupport)})},"esri/rest/geometryService/relation":function(){define("require exports tslib ../../request ../utils ../../tasks/operations/relation ../../tasks/support/RelationParameters".split(" "),function(m,b,a,n,k,f,l){Object.defineProperty(b,"__esModule",{value:!0});
b.relation=void 0;b.relation=function(b,e,d){return a.__awaiter(this,void 0,void 0,function(){var c,g,m,h;return a.__generator(this,function(p){e=l.from(e);c=f.relationToRESTParameters(e);g=k.parseUrl(b);m=a.__assign(a.__assign(a.__assign({},g.query),{f:"json"}),c);h=k.asValidOptions(m,d);return[2,n(g.path+"/relation",h).then(function(a){return a.data.relations})]})})}})},"esri/tasks/operations/relation":function(){define(["require","exports","../../core/jsonMap","../../geometry/support/jsonUtils"],
function(m,b,a,n){Object.defineProperty(b,"__esModule",{value:!0});b.relationToRESTParameters=void 0;var k=new a.default({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",
esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});b.relationToRESTParameters=function(a){var b=a.toJSON(),f=b.geometries1;a=b.geometries2;var e=b.relation,b=b.relationParameter,d={};f&&f.length&&(d.geometries1=JSON.stringify({geometryType:n.getJsonType(f[0]),geometries:f}),f=f[0].spatialReference,d.sr=f.wkid?f.wkid:JSON.stringify(f));a&&0<a.length&&(d.geometries2=JSON.stringify({geometryType:n.getJsonType(a[0]),geometries:a}));e&&(d.relation=
k.toJSON(e));b&&(d.relationParam=b);return d}})},"esri/tasks/support/RelationParameters":function(){define("require exports tslib ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils".split(" "),function(m,b,a,n,k,f,l){m=function(b){function e(a){a=b.call(this,a)||this;a.geometries1=null;a.geometries2=null;a.relation=null;a.relationParameter=null;return a}a.__extends(e,b);a.__decorate([k.property({json:{read:{reader:function(a){return a?
a.map(function(a){return l.fromJSON(a)}):null}},write:{writer:function(a,b){b.geometries1=a.map(function(a){return a.toJSON()})}}}})],e.prototype,"geometries1",void 0);a.__decorate([k.property({json:{read:{reader:function(a){return a?a.map(function(a){return l.fromJSON(a)}):null}},write:{writer:function(a,b){b.geometries2=a.map(function(a){return a.toJSON()})}}}})],e.prototype,"geometries2",void 0);a.__decorate([k.property({type:String,json:{write:!0}})],e.prototype,"relation",void 0);a.__decorate([k.property({type:String,
json:{write:!0}})],e.prototype,"relationParameter",void 0);return e=a.__decorate([k.subclass("esri.tasks.support.RelationParameters")],e)}(n.JSONSupport);m.from=f.default(m);return m})},"esri/rest/geometryService/reshape":function(){define("require exports tslib ../../request ../../geometry/support/jsonUtils ../utils".split(" "),function(m,b,a,n,k,f){Object.defineProperty(b,"__esModule",{value:!0});b.reshape=void 0;b.reshape=function(b,g,e,d){return a.__awaiter(this,void 0,void 0,function(){var c,
l,m,h;return a.__generator(this,function(p){c=g.spatialReference;l=f.parseUrl(b);m=a.__assign(a.__assign({},l.query),{f:"json",sr:JSON.stringify(c.toJSON()),target:JSON.stringify({geometryType:k.getJsonType(g),geometry:g.toJSON()}),reshaper:JSON.stringify(e.toJSON())});h=f.asValidOptions(m,d);return[2,n(l.path+"/reshape",h).then(function(a){return k.fromJSON(a.data.geometry).set({spatialReference:c})})]})})}})},"esri/rest/geometryService/simplify":function(){define("require exports tslib ../../request ../../core/urlUtils ../../geometry/support/jsonUtils ./utils".split(" "),
function(m,b,a,n,k,f,l){Object.defineProperty(b,"__esModule",{value:!0});b.simplify=void 0;b.simplify=function(b,e,d){return a.__awaiter(this,void 0,void 0,function(){var c,g,m,h,u;return a.__generator(this,function(p){switch(p.label){case 0:return c="string"===typeof b?k.urlToObject(b):b,g=e[0].spatialReference,m=f.getJsonType(e[0]),h=a.__assign(a.__assign({},d),{query:a.__assign(a.__assign({},c.query),{f:"json",sr:g.wkid?g.wkid:JSON.stringify(g),geometries:JSON.stringify(l.encodeGeometries(e))})}),
[4,n(c.path+"/simplify",h)];case 1:return u=p.sent().data,[2,l.decodeGeometries(u.geometries,m,g)]}})})}})},"esri/rest/geometryService/toGeoCoordinateString":function(){define("require exports tslib ../../request ../utils ./units".split(" "),function(m,b,a,n,k,f){Object.defineProperty(b,"__esModule",{value:!0});b.toGeoCoordinateString=void 0;b.toGeoCoordinateString=function(b,g,e){return a.__awaiter(this,void 0,void 0,function(){var d,c,l,m,h;return a.__generator(this,function(p){d={};d.sr=null!=
g.sr&&"object"===typeof g.sr?g.sr.wkid||JSON.stringify(g.sr):g.sr;d.coordinates=JSON.stringify(g.coordinates);c=g.conversionType||"mgrs";d.conversionType=f.conversionTypeKebabDict.toJSON(c);d.conversionMode=g.conversionMode;d.numOfDigits=g.numOfDigits;d.rounding=g.rounding;d.addSpaces=g.addSpaces;l=k.parseUrl(b);m=a.__assign(a.__assign(a.__assign({},l.query),{f:"json"}),d);h=k.asValidOptions(m,e);return[2,n(l.path+"/toGeoCoordinateString",h).then(function(a){return a.data.strings})]})})}})},"esri/rest/geometryService/trimExtend":function(){define("require exports tslib ../../geometry ../../request ../utils ../../tasks/operations/trimExtend ../../tasks/support/TrimExtendParameters".split(" "),
function(m,b,a,n,k,f,l,g){Object.defineProperty(b,"__esModule",{value:!0});b.trimExtend=void 0;b.trimExtend=function(b,d,c){return a.__awaiter(this,void 0,void 0,function(){var e,m,h,u,w;return a.__generator(this,function(q){d=g.from(d);e=l.trimExtendToRESTParameters(d);m=f.parseUrl(b);h=a.__assign(a.__assign(a.__assign({},m.query),{f:"json"}),e);u=d.sr;w=f.asValidOptions(h,c);return[2,k(m.path+"/trimExtend",w).then(function(a){return(a.data.geometries||[]).map(function(a){return new n.Polyline({spatialReference:u,
paths:a.paths})})})]})})}})},"esri/tasks/operations/trimExtend":function(){define(["require","exports","../../core/jsonMap"],function(m,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.trimExtendToRESTParameters=void 0;var n=new a.default({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});b.trimExtendToRESTParameters=function(a){a=a.toJSON();var b=a.polylines,k=a.trimExtendTo,g={};g.extendHow=n.toJSON(a.extendHow);
b&&b.length&&(g.polylines=JSON.stringify(b),g.sr=JSON.stringify(b[0].spatialReference));k&&(g.trimExtendTo=JSON.stringify(k));return g}})},"esri/tasks/support/TrimExtendParameters":function(){define("require exports tslib ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils".split(" "),function(m,b,a,n,k,f,l,g){m=function(b){function d(a){a=b.call(this,a)||this;a.extendHow="default-curve-extension";a.polylines=
null;a.trimExtendTo=null;return a}a.__extends(d,b);a.__decorate([f.property({type:String,json:{write:!0}})],d.prototype,"extendHow",void 0);a.__decorate([f.property({type:[n.Polyline],json:{read:{reader:function(a){return a?a.map(function(a){return g.fromJSON(a)}):null}},write:{writer:function(a,b){b.polylines=a.map(function(a){return a.toJSON()})}}}})],d.prototype,"polylines",void 0);a.__decorate([f.property({json:{read:{reader:function(a){return a?g.fromJSON(a):null}},write:{writer:function(a,b){b.trimExtendTo=
a.toJSON()}}}})],d.prototype,"trimExtendTo",void 0);return d=a.__decorate([f.subclass("esri.tasks.support.TrimExtendParameters")],d)}(k.JSONSupport);m.from=l.default(m);return m})},"esri/rest/geometryService/union":function(){define("require exports tslib ../../request ../../geometry/support/jsonUtils ../utils ./utils".split(" "),function(m,b,a,n,k,f,l){Object.defineProperty(b,"__esModule",{value:!0});b.union=void 0;b.union=function(b,e,d){return a.__awaiter(this,void 0,void 0,function(){var c,g,
m,h;return a.__generator(this,function(p){c=e[0].spatialReference;g=f.parseUrl(b);m=a.__assign(a.__assign({},g.query),{f:"json",sr:JSON.stringify(c.toJSON()),geometries:JSON.stringify(l.encodeGeometries(e))});h=f.asValidOptions(m,d);return[2,n(g.path+"/union",h).then(function(a){return k.fromJSON(a.data.geometry).set({spatialReference:c})})]})})}})},"*noref":1}});
define("require exports tslib ../intl ../../esri/core/promiseUtils ../core/events ../core/Handles ../core/string ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./Search/SearchResultRenderer ./Search/SearchViewModel ./support/widget".split(" "),function(m,b,a,n,k,f,l,g,e,d,c,r,p,h){var u=/<[a-z/][\s\S]*>/i;return function(b){function c(a,c){var d=b.call(this,a,c)||this;d._activeMenuItemIndex=-1;d._handles=new l;d._inputNode=null;d._menuItemCount=0;d._sourceMenuButtonNode=null;d._sourceListNode=
null;d._suggestionListNode=null;d._searchResultRenderer=new r;d._relatedTarget=null;d._locateFailed=null;d.activeMenu="none";d.activeSource=null;d.activeSourceIndex=null;d.allPlaceholder=null;d.allSources=null;d.autoNavigate=null;d.autoSelect=null;d.defaultSources=null;d.disabled=!1;d.goToOverride=null;d.iconClass="esri-icon-search";d.includeDefaultSources=null;d.label=void 0;d.locationEnabled=null;d.maxResults=null;d.maxSuggestions=null;d.messages=null;d.messagesCommon=null;d.minSuggestCharacters=
null;d.popupEnabled=null;d.popupTemplate=null;d.portal=null;d.resultGraphic=null;d.resultGraphicEnabled=null;d.results=null;d.searchAllEnabled=null;d.searchTerm=null;d.selectedResult=null;d.sources=null;d.suggestions=null;d.suggestionsEnabled=null;d.view=null;d.viewModel=new p;d.own(e.watch(d,"searchTerm",function(a){if(a&&"warning"===d.activeMenu||!a&&!d.get("viewModel.selectedSuggestion.location"))d.activeMenu="none"}),e.on(d,"viewModel.allSources","change",function(){return d._watchSourceChanges()}),
e.init(d,"viewModel.defaultPopupTemplate",function(a){a&&(a.content=d._renderSearchResultsContent.bind(d))}));return d}a.__extends(c,b);c.prototype.destroy=function(){this._handles.destroy();this._handles=null;this._cancelSuggest();this._cancelSearch();this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=null)};Object.defineProperty(c.prototype,"displayedSearchTerm",{get:function(){return(""+this.viewModel.searchTerm).trim()},
enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"suggestionsMenuId",{get:function(){return this._buildId("suggest-menu")},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"sourceMenuId",{get:function(){return this._buildId("source-menu")},enumerable:!1,configurable:!0});c.prototype.clear=function(){};c.prototype.focus=function(){this._inputNode&&(this.activeMenu="suggestion",this._inputNode.focus(),this.emit("search-focus"))};c.prototype.blur=function(a){this._inputNode&&
(this._inputNode.blur(),this._inputBlur(a),this.emit("search-blur"))};c.prototype.search=function(a){var b=this;this.activeMenu="none";this._cancelSuggest();this._cancelSearch();var c=k.createAbortController(),d=c.signal;this._searchController=c;return this.viewModel.search(a,{signal:d}).catch(function(a){if(b._searchController===c)return b.activeMenu="none",b._searchController=null,a}).then(function(a){if(b._searchController===c)return b.activeMenu=a.numResults?"none":"warning",b._searchController=
null,a})};c.prototype.suggest=function(a){var b=this;this._cancelSuggest();var c=k.createAbortController(),d=c.signal;this._suggestController=c;return this.viewModel.suggest(a,null,{signal:d}).then(function(a){if(b._suggestController===c)return b._suggestController=null,a.numResults&&(b.activeMenu="suggestion"),b._scrollToTopSuggestion(),a}).catch(function(){if(b._suggestController===c)return b._suggestController=null})};c.prototype.render=function(){var a,b=this.viewModel.state,c=(a={},a["esri-disabled"]=
"disabled"===b,a["esri-widget--disabled"]=this.disabled,a);return h.tsx("div",{class:this.classes("esri-search esri-widget",c)},"loading"===b?this.renderLoader():this.renderContainer())};c.prototype.renderSubmitButton=function(){var a=this.messages;return h.tsx("button",{"aria-label":a.searchButtonTitle,bind:this,class:this.classes("esri-search__submit-button","esri-widget--button"),key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:a.searchButtonTitle},h.tsx("span",{"aria-hidden":"true",
role:"presentation",class:"esri-icon-search"}))};c.prototype.renderWarningMenu=function(){return h.tsx("div",{key:"esri-search__error-menu",class:this.classes("esri-menu","esri-search__warning-menu")},h.tsx("div",{class:"esri-search__warning-body"},this.renderWarning()))};c.prototype.renderSourceMenuButton=function(){var a=this.messages,b=this.activeMenu,c=this.sourceMenuId,d=this.viewModel,e=d.activeSourceIndex,d=d.allSources,f="source"===b?this._buildId("source-item",e):null;return 1<d.length?h.tsx("button",
{"aria-activedescendant":f,key:"esri-search__source-menu-button",bind:this,title:a.searchIn,"aria-haspopup":"true","aria-expanded":"source"===b,"aria-controls":c,class:this.classes("esri-search__sources-button","esri-widget--button"),onkeydown:this._handleSourceMenuButtonKeydown,onclick:this._handleSourcesMenuToggleClick,onkeyup:this._handleSourceMenuButtonKeyup,onblur:this._sourcesButtonBlur,afterCreate:h.storeNode,"data-node-ref":"_sourceMenuButtonNode"},h.tsx("span",{"aria-hidden":"true",role:"presentation",
class:"esri-icon-down-arrow esri-search__sources-button--down"}),h.tsx("span",{"aria-hidden":"true",role:"presentation",class:"esri-icon-up-arrow esri-search__sources-button--up"}),h.tsx("span",{class:"esri-search__source-name"},this._getSourceName(e))):null};c.prototype.renderSourcesList=function(){var a=this,b=this.viewModel,c=b.allSources,b=b.searchAllEnabled;return 1<c.length?h.tsx("ul",{id:this.sourceMenuId,role:"menu",bind:this,afterCreate:h.storeNode,"data-node-ref":"_sourceListNode",class:"esri-menu__list"},
b?this.renderSource(p.ALL_INDEX):null,c.map(function(b,c){return a.renderSource(c)}).toArray()):null};c.prototype.renderSourcesMenu=function(){return 1<this.viewModel.allSources.length?h.tsx("div",{key:"esri-search__source-menu",class:this.classes("esri-menu","esri-search__sources-menu")},this.renderSourcesList()):null};c.prototype.renderLoader=function(){var a=this.messages,b=this.messagesCommon;return h.tsx("div",{role:"presentation",class:"esri-widget__loader",key:"base-loader"},h.tsx("span",{"aria-hidden":"true",
role:"presentation",class:"esri-widget__loader-animation"}),h.tsx("span",{class:"esri-icon-font-fallback-text"},a.searchButtonTitle),h.tsx("span",{class:"esri-widget__loader-text"},b.loading))};c.prototype.renderContainer=function(){var a,b=this.viewModel,c=b.allSources,b=b.state,d=this.activeMenu,c=(a={},a["esri-search--multiple-sources"]=1<c.length,a["esri-search--loading"]="loading"===b,a["esri-search--searching"]="searching"===b,a["esri-search--warning"]="warning"===d,a["esri-search--sources"]=
"source"===d,a["esri-search--show-suggestions"]="suggestion"===d,a);return h.tsx("div",{role:"presentation",class:this.classes(c,"esri-search__container"),key:"base-container"},this.renderSourceMenuButton(),this.renderSourcesMenu(),this.renderInputContainer(),this.renderSubmitButton(),this.renderWarningMenu())};c.prototype.renderClearButton=function(){return this.searchTerm?h.tsx("button",{bind:this,class:this.classes("esri-search__clear-button","esri-widget--button"),key:"esri-search__clear-button",
onclick:this._handleClearButtonClick,onfocus:this._clearButtonFocus,title:this.messages.clearButtonTitle},h.tsx("span",{"aria-hidden":"true",class:"esri-icon-close"})):null};c.prototype.renderLocationGroup=function(){var a=this.messages,b=this.displayedSearchTerm,c=0===this._activeMenuItemIndex;return this.locationEnabled&&!b?h.tsx("ul",{role:"presentation",key:"esri-search__suggestion-list-current-location",class:this.classes("esri-menu__list","esri-search__suggestions-list","esri-search__suggestions-list--current-location")},
h.tsx("li",{bind:this,"data-current-location-item":!0,onclick:this._handleUseCurrentLocationClick,role:"menuitem",class:this.classes("esri-menu__list-item",c?"esri-menu__list-item--focus":null)},h.tsx("span",{"aria-hidden":"true",role:"presentation",class:"esri-icon-locate-circled"})," ",a.useCurrentLocation)):null};c.prototype.renderInput=function(){var a=this._activeMenuItemIndex,b=this.displayedSearchTerm,c=this.messages,d=this.suggestionsMenuId,e=this.viewModel,f=e.maxInputLength,g=e.placeholder,
k=e.searchTerm,e=e.suggestionCount,b=this.locationEnabled&&!b||e,a="suggestion"===this.activeMenu?this._buildId("suggestion-item",a):null;return h.tsx("input",{"aria-activedescendant":a,bind:this,placeholder:g,"aria-label":c.searchButtonTitle,maxlength:f,autocomplete:"off",type:"text",class:this.classes("esri-input","esri-search__input"),"aria-autocomplete":"list",value:k,"aria-haspopup":"true","aria-owns":b?d:null,role:"textbox",onkeyup:this._handleInputKeyup,onclick:this._handleInputClick,oninput:this._handleInputPaste,
onpaste:this._handleInputPaste,afterCreate:h.storeNode,"data-node-ref":"_inputNode",onfocusout:this._storeRelatedTarget,onfocus:this.focus,onblur:this.blur,title:k?"":g})};c.prototype.renderForm=function(){return h.tsx("form",{key:"esri-search__form",bind:this,class:"esri-search__form",onsubmit:this._formSubmit,role:"search"},this.renderInput())};c.prototype.renderSuggestList=function(a){var b=this,c=a.sourceIndex,d=a.results;return a.results.length?h.tsx("ul",{role:"presentation",key:"esri-search__suggestion-list-"+
c,class:this.classes("esri-menu__list","esri-search__suggestions-list")},d.map(function(a){return b.renderSuggestion(a,b._menuItemCount++)})):null};c.prototype.renderSuggestionsGroup=function(){var a=this,b=this.viewModel.suggestions;return b?b.map(function(b){return[a.renderSuggestionHeader(b),a.renderSuggestList(b)]}):null};c.prototype.renderSuggestionsMenu=function(){var a=this.activeMenu,b=this.displayedSearchTerm,c=this.suggestionsMenuId,d=this.viewModel.suggestionCount,b=this.locationEnabled&&
!b||d;this._menuItemCount=0;return b?h.tsx("div",{id:c,"aria-expanded":"suggestion"===a,key:"esri-search__suggestions-menu",class:this.classes("esri-menu","esri-search__suggestions-menu"),role:"menu",bind:this,afterCreate:h.storeNode,"data-node-ref":"_suggestionListNode"},this.renderLocationGroup(),this.renderSuggestionsGroup()):null};c.prototype.renderInputContainer=function(){return h.tsx("div",{key:"esri-search__input-container",class:"esri-search__input-container"},this.renderForm(),this.renderSuggestionsMenu(),
this.renderClearButton())};c.prototype.renderSuggestionHeader=function(a){var b=this.viewModel,c=b.activeSourceIndex,d=a.sourceIndex,b=1<b.allSources.length&&c===p.ALL_INDEX;return a.results.length&&b?h.tsx("div",{key:"esri-search__suggestion-header-"+d,class:"esri-menu__header"},this._getSourceName(d)):null};c.prototype.renderSuggestion=function(a,b){var c=this._activeMenuItemIndex,d=this.messages,e=this.viewModel.searchTerm;if(e){var d=a.text||d.untitledResult,f=[];if(u.test(d))f.push(h.tsx("div",
{innerHTML:d}));else{var d=this._splitResult(d,e),g=e.toLowerCase();d.forEach(function(a,b){a&&a.length&&(a.toLowerCase()===g?f.push(h.tsx("strong",{key:b},a)):f.push(a))})}c=c===b;return h.tsx("li",{bind:this,id:this._buildId("suggestion-item",b),onclick:this._handleSuggestionClick,key:"esri-search__suggestion_"+b,"data-suggestion":a,role:"menuitem",class:this.classes("esri-menu__list-item",c?"esri-menu__list-item--focus":null)},f)}};c.prototype.renderSource=function(a){var b,c=this.viewModel,d=
c.activeSourceIndex,c=c.searchAllEnabled,d=(b={},b["esri-menu__list-item--active"]=a===d,b["esri-menu__list-item--focus"]=a===(c?this._activeMenuItemIndex-1:this._activeMenuItemIndex),b);return h.tsx("li",{bind:this,key:"esri-search__source-"+a,id:this._buildId("source-item",a),onclick:this._handleSourceClick,"data-source-index":a,role:"menuitem",class:this.classes("esri-search__source","esri-menu__list-item",d)},this._getSourceName(a))};c.prototype.renderNoResultsWarning=function(a){var b=this.messages;
a=a?n.substitute(b.noResultsFoundForValue,{value:'"'+a+'"'}):b.noResultsFound;return h.tsx("div",{key:"esri-search__no_results"},h.tsx("div",{class:"esri-search__warning-header"},b.noResults),h.tsx("div",{class:"esri-search__warning-text"},a))};c.prototype.renderEmptySearchWarning=function(){var a=this.messages;return h.tsx("div",{key:"esri-search__empty-search"},h.tsx("span",{"aria-hidden":"true",class:"esri-icon-notice-triangle"}),h.tsx("span",{class:"esri-search__no-value-text"},a.emptyValue))};
c.prototype.renderLocateWarning=function(){var a=this.messages;return h.tsx("div",{key:"esri-search__locate-error"},h.tsx("span",{"aria-hidden":"true",class:"esri-icon-notice-triangle"}),h.tsx("span",{class:"esri-search__no-value-text"},a.locateError))};c.prototype.renderWarning=function(){var a,b=this.displayedSearchTerm,c=this.viewModel;return this._locateFailed?this.renderLocateWarning():(null===(a=c.selectedSuggestion)||void 0===a?0:a.location)||b?this.renderNoResultsWarning(b):this.renderEmptySearchWarning()};
c.prototype._buildId=function(a,b){return this.id+"-"+a+(void 0===b?"":"-"+b)};c.prototype._watchSourceChanges=function(){var a=this,b=this._handles,c=this.viewModel.allSources;b.remove("sources");c.forEach(function(c){return b.add(e.watch(c,"name",function(){return a.scheduleRender()}),"sources")})};c.prototype._handleSourcesMenuToggleClick=function(){if("source"===this.activeMenu){var a=this._sourceListNode.getElementsByTagName("li")[this._activeMenuItemIndex];this._setSourceFromMenuItem(a)}else this.activeMenu=
"source",this.renderNow(),this._sourceMenuButtonNode&&this._sourceMenuButtonNode.focus(),this._activeMenuItemIndex=this.searchAllEnabled?this.activeSourceIndex+1:this.activeSourceIndex};c.prototype._handleClearButtonClick=function(){this.viewModel.clear();this._focus()};c.prototype._handleSearchButtonClick=function(){this.search()};c.prototype._handleSuggestionClick=function(a){if(a=a.currentTarget["data-suggestion"])this._focus(),this.search(a)};c.prototype._handleUseCurrentLocationClick=function(){this._useCurrentLocation()};
c.prototype._useCurrentLocation=function(){var a=this;this._focus("none");this._cancelSuggest();this._cancelSearch();var b=k.createAbortController(),c=b.signal;this._searchController=b;this.viewModel.searchNearby({signal:c}).catch(function(){a._locateFailed=!0;a.activeMenu="warning"}).then(function(){a._searchController=null})};c.prototype._handleSourceClick=function(a){this._setSourceFromMenuItem(a.currentTarget)};c.prototype._setSourceFromMenuItem=function(a){this.viewModel.activeSourceIndex=a["data-source-index"];
this._focus("none")};c.prototype._sourcesButtonBlur=function(a){this._removeActiveMenu(a&&a.relatedTarget,this._sourceListNode)};c.prototype._inputBlur=function(a){a=a&&a.relatedTarget;this._removeActiveMenu(a?a:this._relatedTarget,this._suggestionListNode)};c.prototype._storeRelatedTarget=function(a){this._relatedTarget=a.relatedTarget};c.prototype._clearButtonFocus=function(){this.activeMenu="none"};c.prototype._removeActiveMenu=function(a,b){!a||a&&b&&b.contains(a)||(this.activeMenu="none")};c.prototype._cancelSuggest=
function(){this._suggestController&&(this._suggestController.abort(),this._suggestController=null)};c.prototype._cancelSearch=function(){this._searchController&&(this._searchController.abort(),this._searchController=null);this._locateFailed=!1};c.prototype._handleInputKeyup=function(a){var b=f.eventKey(a);if(!a.ctrlKey&&!a.metaKey&&"Copy"!==b&&"ArrowLeft"!==b&&"ArrowRight"!==b&&"Shift"!==b)if("Tab"===b||"Escape"===b||a.shiftKey&&"Tab"===b)this._cancelSuggest(),"Escape"===b&&(this.activeMenu="none"),
this._activeMenuItemIndex=-1;else{var c="Home"===b||"End"===b||"ArrowUp"===b||"ArrowDown"===b,d=this._suggestionListNode.getElementsByTagName("li");if(0<d.length){"suggestion"!==this.activeMenu&&(this.activeMenu="suggestion");if(c){a.preventDefault();this._cancelSuggest();this.handleItemNavigation(b,d,this._suggestionListNode);return}a=d[this._activeMenuItemIndex];if("Enter"===b&&a){(b=a["data-suggestion"])?(this._focus(),this.search(b)):a["data-current-location-item"]&&this._useCurrentLocation();
return}}this.viewModel.searchTerm&&this.suggest()}};c.prototype.handleItemNavigation=function(a,b,c){var d=this._activeMenuItemIndex;"Home"===a&&(this._activeMenuItemIndex=0);"End"===a&&(this._activeMenuItemIndex=b.length-1);"ArrowUp"===a&&(this._activeMenuItemIndex=0===this._activeMenuItemIndex?b.length-1:this._activeMenuItemIndex-1);"ArrowDown"===a&&(this._activeMenuItemIndex=this._activeMenuItemIndex===b.length-1?0:this._activeMenuItemIndex+1);d!==this._activeMenuItemIndex&&h.keepMenuItemWithinView(b[this._activeMenuItemIndex],
c)};c.prototype._scrollToTopSuggestion=function(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)};c.prototype._handleInputClick=function(){this.activeMenu="suggestion"};c.prototype._handleInputPaste=function(a){a=a.target;this.viewModel.searchTerm!==a.value&&(this.viewModel.searchTerm=a.value);this.viewModel.searchTerm&&this.suggest()};c.prototype._handleSourceMenuButtonKeydown=function(a){var b=f.eventKey(a);"ArrowUp"!==b&&"ArrowDown"!==b&&"End"!==b&&"Home"!==b||a.preventDefault()};
c.prototype._handleSourceMenuButtonKeyup=function(a){var b=f.eventKey(a),c="ArrowUp"===b||"ArrowDown"===b||"End"===b||"Home"===b;c&&a.preventDefault();"Escape"===b?this._focus("none"):(a=this._sourceListNode.getElementsByTagName("li"),0!==a.length&&c&&("source"!==this.activeMenu&&(this.activeMenu="source"),this.handleItemNavigation(b,a,this._sourceListNode.parentElement)))};c.prototype._focus=function(a){this.focus();this._activeMenuItemIndex=-1;a&&(this.activeMenu=a)};c.prototype._formSubmit=function(a){a.preventDefault();
-1===this._activeMenuItemIndex&&this.search()};c.prototype._getSourceName=function(a){var b=this.messages,c=this.viewModel.allSources.getItemAt(a);return a===p.ALL_INDEX?b.all:c?c.name||b.untitledSource:b.untitledSource};c.prototype._splitResult=function(a,b){b=g.escapeRegExpString(b);return a.replace(new RegExp("(^|)("+b+")(|$)","ig"),"$1|$2|$3").split("|")};c.prototype._renderSearchResultsContent=function(){this._searchResultRenderer.showMoreResultsOpen=!1;this._searchResultRenderer.viewModel=this.viewModel;
return this._searchResultRenderer};a.__decorate([d.property({dependsOn:["viewModel.searchTerm"]}),h.renderable()],c.prototype,"displayedSearchTerm",null);a.__decorate([d.property({readOnly:!0,dependsOn:["id"]}),h.renderable()],c.prototype,"suggestionsMenuId",null);a.__decorate([d.property({readOnly:!0,dependsOn:["id"]}),h.renderable()],c.prototype,"sourceMenuId",null);a.__decorate([d.property(),h.renderable()],c.prototype,"activeMenu",void 0);a.__decorate([d.aliasOf("viewModel.activeSource"),h.renderable()],
c.prototype,"activeSource",void 0);a.__decorate([d.aliasOf("viewModel.activeSourceIndex"),h.renderable()],c.prototype,"activeSourceIndex",void 0);a.__decorate([d.aliasOf("viewModel.allPlaceholder"),h.renderable()],c.prototype,"allPlaceholder",void 0);a.__decorate([d.aliasOf("viewModel.allSources")],c.prototype,"allSources",void 0);a.__decorate([d.aliasOf("viewModel.autoNavigate")],c.prototype,"autoNavigate",void 0);a.__decorate([d.aliasOf("viewModel.autoSelect")],c.prototype,"autoSelect",void 0);
a.__decorate([d.aliasOf("viewModel.defaultSources")],c.prototype,"defaultSources",void 0);a.__decorate([h.renderable(),d.property()],c.prototype,"disabled",void 0);a.__decorate([d.aliasOf("viewModel.goToOverride")],c.prototype,"goToOverride",void 0);a.__decorate([d.property()],c.prototype,"iconClass",void 0);a.__decorate([d.aliasOf("viewModel.includeDefaultSources")],c.prototype,"includeDefaultSources",void 0);a.__decorate([d.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],c.prototype,
"label",void 0);a.__decorate([h.renderable(),d.aliasOf("viewModel.locationEnabled")],c.prototype,"locationEnabled",void 0);a.__decorate([d.aliasOf("viewModel.maxResults")],c.prototype,"maxResults",void 0);a.__decorate([d.aliasOf("viewModel.maxSuggestions")],c.prototype,"maxSuggestions",void 0);a.__decorate([d.property(),h.renderable(),h.messageBundle("esri/widgets/Search/t9n/Search")],c.prototype,"messages",void 0);a.__decorate([d.property(),h.renderable(),h.messageBundle("esri/t9n/common")],c.prototype,
"messagesCommon",void 0);a.__decorate([d.aliasOf("viewModel.minSuggestCharacters")],c.prototype,"minSuggestCharacters",void 0);a.__decorate([d.aliasOf("viewModel.popupEnabled")],c.prototype,"popupEnabled",void 0);a.__decorate([d.aliasOf("viewModel.popupTemplate")],c.prototype,"popupTemplate",void 0);a.__decorate([d.aliasOf("viewModel.portal")],c.prototype,"portal",void 0);a.__decorate([d.aliasOf("viewModel.resultGraphic")],c.prototype,"resultGraphic",void 0);a.__decorate([d.aliasOf("viewModel.resultGraphicEnabled")],
c.prototype,"resultGraphicEnabled",void 0);a.__decorate([d.aliasOf("viewModel.results"),h.renderable()],c.prototype,"results",void 0);a.__decorate([d.aliasOf("viewModel.searchAllEnabled"),h.renderable()],c.prototype,"searchAllEnabled",void 0);a.__decorate([d.aliasOf("viewModel.searchTerm"),h.renderable()],c.prototype,"searchTerm",void 0);a.__decorate([d.aliasOf("viewModel.selectedResult")],c.prototype,"selectedResult",void 0);a.__decorate([d.aliasOf("viewModel.sources")],c.prototype,"sources",void 0);
a.__decorate([d.aliasOf("viewModel.suggestions"),h.renderable()],c.prototype,"suggestions",void 0);a.__decorate([d.aliasOf("viewModel.suggestionsEnabled")],c.prototype,"suggestionsEnabled",void 0);a.__decorate([d.aliasOf("viewModel.view"),h.renderable()],c.prototype,"view",void 0);a.__decorate([h.vmEvent("search-complete search-clear search-start select-result suggest-start suggest-complete".split(" ")),d.property({type:p}),h.renderable(["viewModel.allSources","viewModel.activeSource.placeholder",
"viewModel.activeSource.name","viewModel.state"])],c.prototype,"viewModel",void 0);a.__decorate([d.aliasOf("viewModel.clear")],c.prototype,"clear",null);return c=a.__decorate([d.subclass("esri.widgets.Search")],c)}(c)});