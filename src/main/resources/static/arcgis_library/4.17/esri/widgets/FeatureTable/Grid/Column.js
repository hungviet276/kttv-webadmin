// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../../core/Evented ../../../core/HandleOwner ../../../core/watchUtils ../../../core/accessorSupport/decorators ./support/ButtonMenu ../../support/widgetUtils".split(" "),function(p,q,d,g,h,k,e,l,m){return function(f){function c(b){var a=f.call(this,b)||this;a._menuContainer=null;a.activeRowIndex=null;a.autoWidth=!1;a.cellValueFormatFunction=function(a){return m.renderingSanitizer.sanitize(a.value)};a.flexGrow=1;a.footerRenderFunction=null;a.frozen=!1;a.grid=null;a.header=
null;a.headerRenderFunction=function(b){var c=b.root,n=a.header,d=a.headerMenuEnabled,e=a.path,f=a.sortable;a.removeCellContent(c);f?(a.headerSorterRenderFunction(b),d&&a.headerMenuRenderFunction(b)):(d&&a.headerMenuRenderFunction(b),b=n||e,c.innerHTML!==b&&(c.innerHTML=b))};a.headerMenuRenderFunction=function(b){var c,d;b=b.root;(null===(d=null===(c=a.menu)||void 0===c?void 0:c.items)||void 0===d?0:d.length)&&b.appendChild(a._menuContainer)};a.headerSorterRenderFunction=function(b){var c;b=b.root;
var d=a.path,e=a.sortElement,d=a.header||d;e?(e.setAttribute("innerHTML",d),b.appendChild(e),b=null===(c=a.grid)||void 0===c?void 0:c.getSlotElementByName(b.slot),(c=null===b||void 0===b?void 0:b.parentElement)&&!c.onkeydown&&(c.onkeydown=function(a){a=a.key;"Enter"!==a&&"Spacebar"!==a||e.click()})):b.innerHTML=d};a.hidden=!1;a.headerMenuEnabled=!0;a.menu=null;a.menuConfig=null;a.messages=null;a.messagesCommon=null;a.renderFunction=function(b){var c=b.root,d=b.column;b=b.rowData;var e=a.getCellValue(d,
b),d=a.cellValueFormatFunction({column:d,rowData:b,value:e});c.innerHTML!==d&&(c.innerHTML=d)};a.resizable=!0;a.sortable=!0;a.sortElement=null;a.textAlign="start";a.width=200;return a}d.__extends(c,f);c.prototype.initialize=function(){var b=this,a=this.path;this._set("sortElement",this.createSortElement());this.sortElement.setAttribute("path",a);this._menuContainer=document.createElement("div");this._menuContainer.classList.add("esri-column__menu-container");this.menu=new l(d.__assign({iconClass:"esri-icon-handle-horizontal"},
this.menuConfig));this.menu.container=this._menuContainer;this.menu.set("items",this.getMenuItems());this.handles.add([k.watch(this,"hidden",function(){var a;return null===(a=b.menu)||void 0===a?void 0:a.set("open",!1)})])};c.prototype.destroy=function(){var b;null===(b=this.menu)||void 0===b?void 0:b.destroy()};Object.defineProperty(c.prototype,"direction",{set:function(b){var a,c;this.sortable&&(b?null===(c=this.sortElement)||void 0===c?void 0:c.setAttribute("direction",b):null===(a=this.sortElement)||
void 0===a?void 0:a.removeAttribute("direction"),this._set("direction",b))},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"path",{set:function(b){var a;null===(a=this.sortElement)||void 0===a?void 0:a.setAttribute("path",b);this._set("path",b)},enumerable:!1,configurable:!0});c.prototype.getMenuItems=function(){var b=this.menuConfig,a=this.sortable,b=null===b||void 0===b?void 0:b.items,c=this.getSortMenuItems(),d=[];a&&d.push.apply(d,c);(null===b||void 0===b?0:b.length)&&d.push.apply(d,
b);return d.length?d:null};c.prototype.getSortMenuItems=function(){var b=this,a=this.messages;return[{selected:"asc"===this.direction,iconClass:"esri-icon-arrow-up",label:null===a||void 0===a?void 0:a.sortAsc,autoCloseMenu:!0,clickFunction:function(){return b.set("direction","asc"!==b.direction?"asc":null)}},{selected:"desc"===this.direction,iconClass:"esri-icon-arrow-down",label:null===a||void 0===a?void 0:a.sortDesc,autoCloseMenu:!0,clickFunction:function(){return b.set("direction","desc"!==b.direction?
"desc":null)}}]};c.prototype.getCellValue=function(b,a){return(null===a||void 0===a?void 0:a.item[null===b||void 0===b?void 0:b.path])||""};c.prototype.createSortElement=function(){var b=this.direction,a=this.path,c=this.header||a,d=document.createElement("vaadin-grid-sorter");d.classList.add("esri-column__sorter");d.setAttribute("path",a);b&&d.setAttribute("direction",b);d.innerHTML=c;return d};c.prototype.removeCellContent=function(b){if(b)for(;b.firstChild;)try{b.removeChild(b.firstChild)}catch(a){}};
d.__decorate([e.property()],c.prototype,"activeRowIndex",void 0);d.__decorate([e.property()],c.prototype,"autoWidth",void 0);d.__decorate([e.property()],c.prototype,"cellValueFormatFunction",void 0);d.__decorate([e.property()],c.prototype,"direction",null);d.__decorate([e.property()],c.prototype,"flexGrow",void 0);d.__decorate([e.property()],c.prototype,"footerRenderFunction",void 0);d.__decorate([e.property()],c.prototype,"frozen",void 0);d.__decorate([e.property()],c.prototype,"grid",void 0);d.__decorate([e.property()],
c.prototype,"header",void 0);d.__decorate([e.property()],c.prototype,"headerRenderFunction",void 0);d.__decorate([e.property()],c.prototype,"headerMenuRenderFunction",void 0);d.__decorate([e.property()],c.prototype,"headerSorterRenderFunction",void 0);d.__decorate([e.property()],c.prototype,"hidden",void 0);d.__decorate([e.property()],c.prototype,"headerMenuEnabled",void 0);d.__decorate([e.property()],c.prototype,"menu",void 0);d.__decorate([e.property()],c.prototype,"menuConfig",void 0);d.__decorate([e.property()],
c.prototype,"messages",void 0);d.__decorate([e.property()],c.prototype,"messagesCommon",void 0);d.__decorate([e.property()],c.prototype,"path",null);d.__decorate([e.property()],c.prototype,"renderFunction",void 0);d.__decorate([e.property()],c.prototype,"resizable",void 0);d.__decorate([e.property()],c.prototype,"sortable",void 0);d.__decorate([e.property({readOnly:!0})],c.prototype,"sortElement",void 0);d.__decorate([e.property()],c.prototype,"textAlign",void 0);d.__decorate([e.property()],c.prototype,
"width",void 0);return c=d.__decorate([e.subclass("esri.widgets.FeatureTable.Grid.Column")],c)}(h.HandleOwnerMixin(g.EventedAccessor))});