// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../Color ../../core/maybe ../../core/accessorSupport/decorators ../../renderers/visualVariables/SizeVariable ../../renderers/visualVariables/support/SizeStop ./SmartMappingSliderBase ./SizeSlider/SizeSliderViewModel ./support/utils ./../support/widget".split(" "),function(x,y,c,k,p,f,q,r,u,v,l,h){var t={trackFillColor:new k([149,149,149]),trackBackgroundColor:new k([224,224,224])};return function(k){function b(a,g){a=k.call(this,a,g)||this;a._maxRampFillWidth=1;a._minRampFillWidth=
.2;a._rampNode=null;a.label=void 0;a.messages=null;a.stops=null;a.style=c.__assign({},t);a.viewModel=new v;a.zoomOptions=null;return a}c.__extends(b,k);m=b;b.prototype.castStyle=function(a){return c.__assign(c.__assign({},t),a)};b.fromRendererResult=function(a,g){var d=a.statistics,w=d.avg,d=d.stddev,b=a.visualVariables[0],e=l.getSizesFromVariable(b);a=a.renderer.authoringInfo.visualVariables[0];return new m({max:a.maxSliderValue,min:a.minSliderValue,stops:[{value:b.minDataValue,size:e[1]},{value:b.maxDataValue,
size:e[0]}],histogramConfig:{average:w,standardDeviation:d,bins:g?g.bins:[]}})};b.prototype.updateFromRendererResult=function(a,g){var d=a.statistics,b=d.avg,d=d.stddev,c=a.visualVariables[0],e=l.getSizesFromVariable(c);a=a.renderer.authoringInfo.visualVariables[0];this.set({max:a.maxSliderValue,min:a.minSliderValue,stops:[{value:c.minDataValue,size:e[1]},{value:c.maxDataValue,size:e[0]}],histogramConfig:{average:b,standardDeviation:d,bins:g?g.bins:[]}})};b.prototype.updateVisualVariable=function(a){var g=
a.clone(),d=this.stops;if(!a||!d)return null;if(g.stops)return g.stops=d,g;a=d[0];var d=d[d.length-1],b=g.maxSize,c=g.minSize;if(b instanceof q){var e=b.stops,h=d.size/e[0].size,e=e.map(function(a){a.size*=h;return a});b.stops=e}else b=d.size;if(c instanceof q){var e=c.stops,f=a.size/e[0].size,e=e.map(function(a){a.size*=f;return a});c.stops=e}else c=a.size;g.set({maxDataValue:d.value,minDataValue:a.value,maxSize:b,minSize:c});return g};b.prototype.updateFromVisualVariable=function(a){if(a){var b=
a.maxDataValue,d=a.minDataValue,c=a.stops;c?this.stops=c:(a=l.getSizesFromVariable(a),c=a[0],this.stops=[new r({value:d,size:a[1]}),new r({value:b,size:c})])}};b.prototype.render=function(){var a,b=this.label,c="disabled"===this.state,f=this.classes("esri-size-slider","esri-widget","esri-widget--panel",(a={},a["esri-disabled"]=c,a));return h.tsx("div",{"aria-label":b,class:f},c?null:this.renderContent(this.renderRamp(),"esri-size-slider__slider-container","esri-size-slider__histogram-container"))};
b.prototype.renderRamp=function(){var a=this.zoomOptions;return h.tsx("div",{afterCreate:h.storeNode,bind:this,class:"esri-size-slider__ramp","data-node-ref":"_rampNode"},h.tsx("svg",{key:"ramp-svg",xmlns:"http://www.w3.org/2000/svg"},h.tsx("rect",{x:"0",y:"0",fill:l.getFillFromColor(this.style.trackBackgroundColor),height:"100%",width:"100%"}),this.renderPath()),a?this.renderZoomCaps():null)};b.prototype.renderPath=function(){if(this._rampNode){var a=this._rampNode,b=a.offsetHeight,b=void 0===b?
0:b,a=a.offsetWidth,c=void 0===a?0:a;if(p.isSome(b)&&p.isSome(c)){var f=this.stops,a=this.style.trackFillColor,k=this.values,e=this.viewModel,m=e.max,e=e.min,n=[this._maxRampFillWidth,this._minRampFillWidth];f[0].size<f[f.length-1].size&&n.reverse();b=l.getPathForSizeStops({bottomValue:k[0],bottomWidth:n[0],max:m,min:e,pathHeight:b,pathWidth:c,topValue:k[1],topWidth:n[1]});return h.tsx("path",{d:b,fill:l.getFillFromColor(a)})}}};var m;c.__decorate([f.property({aliasOf:{source:"messages.widgetLabel",
overridable:!0}})],b.prototype,"label",void 0);c.__decorate([f.property(),h.renderable(),h.messageBundle("esri/widgets/smartMapping/SizeSlider/t9n/SizeSlider")],b.prototype,"messages",void 0);c.__decorate([f.aliasOf("viewModel.stops")],b.prototype,"stops",void 0);c.__decorate([f.property(),h.renderable()],b.prototype,"style",void 0);c.__decorate([f.cast("style")],b.prototype,"castStyle",null);c.__decorate([f.property(),h.renderable("viewModel.hasTimeData viewModel.inputFormatFunction viewModel.inputParseFunction viewModel.labelFormatFunction viewModel.max viewModel.min viewModel.stops viewModel.values viewModel.zoomOptions".split(" "))],
b.prototype,"viewModel",void 0);c.__decorate([f.aliasOf("viewModel.zoomOptions")],b.prototype,"zoomOptions",void 0);return b=m=c.__decorate([f.subclass("esri.widgets.smartMapping.SizeSlider")],b)}(u.SmartMappingSliderBase)});