// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../core/maybe ../../core/accessorSupport/decorators ../../renderers/visualVariables/support/ColorSizeStop ../../renderers/visualVariables/support/ColorStop ../../renderers/visualVariables/support/SizeStop ./SmartMappingSliderBase ./ColorSizeSlider/ColorSizeSliderViewModel ./support/utils ./../support/widget".split(" "),function(x,y,e,m,g,n,r,t,u,v,w,f){return function(q){function b(a,c){a=q.call(this,a,c)||this;a._bgFillId=null;a._backgroundFillColor="#e0e0e0";a._minRampFillWidth=
.2;a._rampFillId=null;a._rampNode=null;a._maxRampFillWidth=1;a.label=void 0;a.messages=null;a.stops=null;a.viewModel=new v;a.zoomOptions=null;a._bgFillId=a.id+"-bg-fill";a._rampFillId=a.id+"-linear-gradient";return a}e.__extends(b,q);k=b;b.fromRendererResult=function(a,c){var l=a.color.visualVariable.stops,d=a.statistics,b=d.avg,d=d.stddev,h=a.renderer.authoringInfo.visualVariables[0],f=h.minSliderValue,h=h.maxSliderValue,e=a.size.visualVariables[0];a=l.map(function(a,c){return new n({color:a.color,
label:a.label,value:a.value,size:0===c?e.minSize:c===l.length-1?e.maxSize:null})});return new k({max:h,min:f,stops:a,histogramConfig:{average:b,standardDeviation:d,bins:c?c.bins:[]}})};b.prototype.updateFromRendererResult=function(a,c){var l=a.color.visualVariable.stops,d=a.statistics,b=d.avg,d=d.stddev,h=a.renderer.authoringInfo.visualVariables[0],f=h.minSliderValue,h=h.maxSliderValue,e=a.size.visualVariables[0];a=l.map(function(a,c){return new n({color:a.color,label:a.label,value:a.value,size:0===
c?e.minSize:c===l.length-1?e.maxSize:null})});this.set({max:h,min:f,stops:a,histogramConfig:{average:b,standardDeviation:d,bins:c?c.bins:[]}})};b.prototype.updateVisualVariables=function(a){var c=this;return a.map(function(a){var d=a.clone();if("size"===a.type)if(m.isSome(a.minSize)&&m.isSome(a.maxSize)){var b=c.stops;a=b[0];b=b[b.length-1];d.set({maxDataValue:b.value,minDataValue:a.value,maxSize:b.size,minSize:a.size})}else a.stops&&d.set({stops:c.stops.map(function(a){return new t({label:a.label,
size:a.size,value:a.value})})});else"color"===a.type&&d.set({stops:c.stops.map(function(a){return new r({color:a.color,label:a.label,value:a.value})})});return d})};b.prototype.render=function(){var a,c=this.label,b="disabled"===this.state,d=this.classes("esri-color-size-slider","esri-widget","esri-widget--panel",(a={},a["esri-disabled"]=b,a));return f.tsx("div",{"aria-label":c,class:d},b?null:this.renderContent(this.renderRamp(),"esri-color-size-slider__slider-container","esri-color-size-slider__histogram-container"))};
b.prototype.renderRamp=function(){var a=this._bgFillId,c=this._rampFillId,b=this.zoomOptions,d=this.viewModel.getColorStopInfo();return f.tsx("div",{afterCreate:f.storeNode,bind:this,class:"esri-color-size-slider__ramp","data-node-ref":"_rampNode"},f.tsx("svg",{xmlns:"http://www.w3.org/2000/svg"},f.tsx("defs",null,this.renderRampFillDefinition(c,d),this.renderBackgroundFillDefinition(a)),f.tsx("rect",{x:"0",y:"0",fill:this._backgroundFillColor,height:"100%",width:"100%"}),this.renderPaths()),b?this.renderZoomCaps():
null)};b.prototype.renderPaths=function(){if(this._rampNode){var a=this._rampNode,b=a.offsetHeight,b=void 0===b?0:b,a=a.offsetWidth,a=void 0===a?0:a;if(m.isSome(b)&&m.isSome(a)){var e=this.stops,d=this.values,g=this.viewModel,h=g.max,k=g.min,g=this._bgFillId,n=this._rampFillId,p=[this._maxRampFillWidth,this._minRampFillWidth];e[0].size<e[e.length-1].size&&p.reverse();b=w.getPathForSizeStops({bottomValue:d[0],bottomWidth:p[0],max:h,min:k,pathHeight:b,pathWidth:a,topValue:d[1],topWidth:p[1]});return[f.tsx("path",
{key:"background",d:b,fill:"url(#"+g+")"}),f.tsx("path",{key:"fill",d:b,fill:"url(#"+n+")"})]}}};var k;e.__decorate([g.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],b.prototype,"label",void 0);e.__decorate([g.property(),f.renderable(),f.messageBundle("esri/widgets/smartMapping/ColorSizeSlider/t9n/ColorSizeSlider")],b.prototype,"messages",void 0);e.__decorate([g.aliasOf("viewModel.stops")],b.prototype,"stops",void 0);e.__decorate([g.property(),f.renderable("viewModel.hasTimeData viewModel.inputFormatFunction viewModel.inputParseFunction viewModel.labelFormatFunction viewModel.max viewModel.min viewModel.stops viewModel.values viewModel.zoomOptions".split(" "))],
b.prototype,"viewModel",void 0);e.__decorate([g.aliasOf("viewModel.zoomOptions")],b.prototype,"zoomOptions",void 0);return b=k=e.__decorate([g.subclass("esri.widgets.smartMapping.ColorSizeSlider")],b)}(u.SmartMappingSliderBase)});