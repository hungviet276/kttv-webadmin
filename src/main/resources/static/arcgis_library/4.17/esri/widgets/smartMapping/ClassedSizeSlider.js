// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../Color ../../core/maybe ../../core/accessorSupport/decorators ../../renderers/support/ClassBreakInfo ./SmartMappingSliderBase ./ClassedSizeSlider/ClassedSizeSliderViewModel ./support/utils ./../support/widget".split(" "),function(w,x,d,g,q,e,t,u,v,r,f){var h={trackFillColor:new g([149,149,149]),trackBackgroundColor:new g([224,224,224])};return function(g){function b(a,c){a=g.call(this,a,c)||this;a._rampNode=null;a.breaks=null;a.label=void 0;a.messages=null;a.style=
d.__assign({},h);a.viewModel=new v;return a}d.__extends(b,g);k=b;b.prototype.castStyle=function(a){return d.__assign(d.__assign({},h),a)};b.fromRendererResult=function(a,c){a=a.renderer.classBreakInfos.map(function(a){var c=a.symbol,l;switch(c.type){case "simple-line":l=c.width;break;case "simple-marker":l=c.size;break;case "picture-marker":l=c.size}return{min:a.minValue,max:a.maxValue,size:l}});return new k({breaks:a,histogramConfig:{bins:c?c.bins:[]}})};b.prototype.updateClassBreakInfos=function(a){var c=
this.breaks;if(c.length!==a.length)console.error("Number of input breakInfos must match number of slider breaks: "+c.length);else return a.map(function(a,b){a=a.symbol;switch(a.type){case "simple-line":a.width=c[b].size;break;case "simple-marker":a.size=c[b].size;break;case "picture-marker":a.size=c[b].size}return new t({minValue:c[b].min,maxValue:c[b].max,symbol:a})})};b.prototype.updateFromRendererResult=function(a,c){a=a.renderer.classBreakInfos.map(function(a){var c=a.symbol,b;switch(c.type){case "simple-line":b=
c.width;break;case "simple-marker":b=c.size;break;case "picture-marker":b=c.size}return{min:a.minValue,max:a.maxValue,size:b}});this.set({breaks:a,histogramConfig:{bins:c?c.bins:[]}})};b.prototype.render=function(){var a,c=this.label,b="disabled"===this.state,d=this.classes("esri-classed-size-slider","esri-widget","esri-widget--panel",(a={},a["esri-disabled"]=b,a));return f.tsx("div",{"aria-label":c,class:d},b?null:this.renderContent(this.renderRamp(),"esri-classed-size-slider__slider-container",
"esri-classed-size-slider__histogram-container"))};b.prototype.renderRamp=function(){return f.tsx("div",{afterCreate:f.storeNode,bind:this,class:"esri-classed-size-slider__ramp","data-node-ref":"_rampNode"},f.tsx("svg",{xmlns:"http://www.w3.org/2000/svg"},f.tsx("rect",{x:"0",y:"0",fill:r.getFillFromColor(this.style.trackBackgroundColor),height:"100%",width:"100%"}),this.renderPath()))};b.prototype.renderPath=function(){if(this._rampNode){var a=this._rampNode,c=a.offsetHeight,b=void 0===c?0:c,a=a.offsetWidth,
d=void 0===a?0:a;if(q.isSome(b)&&q.isSome(d)){var a=this.breaks,e=this.viewModel,g=e.min,c=this.style.trackFillColor,k=e.max-g,p=d/a.length,e=a.map(function(a){return b-Math.round((a.min-g)/k*b)+1}).reverse(),h=a[0].size>a[a.length-1].size||!1,m=h?p:d,n="M"+m+" 0 ";e.forEach(function(a,b){b=p*(b+1);n+="L"+m+" "+a+" ";m=h?p+b:d-b;n+="L"+m+" "+a+" "});n+="L0 "+b+" L0 "+b+" L0 0 Z";return f.tsx("path",{d:n,fill:r.getFillFromColor(c)})}}};var k;d.__decorate([e.aliasOf("viewModel.breaks")],b.prototype,
"breaks",void 0);d.__decorate([e.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],b.prototype,"label",void 0);d.__decorate([e.property(),f.renderable(),f.messageBundle("esri/widgets/smartMapping/ClassedSizeSlider/t9n/ClassedSizeSlider")],b.prototype,"messages",void 0);d.__decorate([e.property(),f.renderable()],b.prototype,"style",void 0);d.__decorate([e.cast("style")],b.prototype,"castStyle",null);d.__decorate([e.property(),f.renderable("viewModel.hasTimeData viewModel.inputFormatFunction viewModel.inputParseFunction viewModel.labelFormatFunction viewModel.max viewModel.min viewModel.values".split(" "))],
b.prototype,"viewModel",void 0);return b=k=d.__decorate([e.subclass("esri.widgets.smartMapping.ClassedSizeSlider")],b)}(u.SmartMappingSliderBase)});