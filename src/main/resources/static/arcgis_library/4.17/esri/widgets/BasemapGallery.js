// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../assets ../core/Handles ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./BasemapGallery/BasemapGalleryViewModel ./support/widget".split(" "),function(t,u,d,m,n,h,e,p,q,c){var r=m.getAssetUrl("esri/themes/base/images/basemap-toggle-64.svg");return function(k){function b(a,f){a=k.call(this,a,f)||this;a._handles=new n;a.activeBasemap=null;a.disabled=!1;a.iconClass="esri-icon-basemap";a.label=void 0;a.messages=null;a.source=null;a.view=null;a.viewModel=
new q;return a}d.__extends(b,k);b.prototype.initialize=function(){var a=this,f=this._handles;this.own([h.on(this,"viewModel.items","change",function(c){var b=c.added;c=c.moved;f.remove("basemap-gallery-item-changes");f.add(d.__spreadArrays(b,c).map(function(c){return c.watch("state",function(){return a.scheduleRender()})}),"basemap-gallery-item-changes");a.scheduleRender()}),f,h.whenOnce(this,"source",function(){return a.viewModel.load()})])};b.prototype.render=function(){var a,b="loading"===this.get("source.state"),
d=this.disabled||"disabled"===this.get("viewModel.state"),e=this.get("viewModel.items").toArray().map(this._renderBasemapGalleryItem,this),d=(a={},a["esri-basemap-gallery--source-loading"]=b,a["esri-disabled"]=d,a);a=b?c.tsx("div",{class:"esri-basemap-gallery__loader",key:"esri-basemap-gallery__loader"}):null;b=b?null:0<e.length?c.tsx("ul",{class:"esri-basemap-gallery__item-container",key:"esri-basemap-gallery__item-container",role:"menu"},e):c.tsx("div",{class:"esri-widget__content--empty",key:"esri-basemap-gallery__empty-message"},
c.tsx("h2",{class:"esri-widget__heading"},this.messages.noBasemaps));return c.tsx("div",{class:this.classes("esri-basemap-gallery esri-widget esri-widget--panel-height-only",d)},a,b)};b.prototype._handleClick=function(a){a=a.currentTarget["data-item"];"ready"===a.state&&(this.activeBasemap=a.basemap)};b.prototype._renderBasemapGalleryItem=function(a){var b,d=a.get("basemap.thumbnailUrl")||r,e=a.get("basemap.title"),l=a.get("basemap.portalItem.snippet"),l=a.get("error.message")||l||e,g=this.viewModel,
h=this.disabled||"ready"!==g.state||"ready"!==a.state?-1:0,g=g.basemapEquals(a.basemap,this.activeBasemap),k=(b={},b["esri-basemap-gallery__item--selected"]=g,b["esri-basemap-gallery__item--loading"]="loading"===a.state,b["esri-basemap-gallery__item--error"]="error"===a.state,b);return c.tsx("li",{"aria-selected":g,bind:this,class:this.classes("esri-basemap-gallery__item",k),"data-item":a,onkeydown:this._handleClick,onclick:this._handleClick,role:"menuitem",tabIndex:h,title:l},c.tsx("img",{alt:"",
class:"esri-basemap-gallery__item-thumbnail",src:d}),c.tsx("div",{class:"esri-basemap-gallery__item-title"},e))};d.__decorate([e.aliasOf("viewModel.activeBasemap"),c.renderable()],b.prototype,"activeBasemap",void 0);d.__decorate([e.property(),c.renderable()],b.prototype,"disabled",void 0);d.__decorate([e.property()],b.prototype,"iconClass",void 0);d.__decorate([e.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],b.prototype,"label",void 0);d.__decorate([e.property(),c.renderable(),
c.messageBundle("esri/widgets/BasemapGallery/t9n/BasemapGallery")],b.prototype,"messages",void 0);d.__decorate([e.aliasOf("viewModel.source"),c.renderable("source.state")],b.prototype,"source",void 0);d.__decorate([e.aliasOf("viewModel.view"),c.renderable()],b.prototype,"view",void 0);d.__decorate([e.property(),c.renderable(["viewModel.state"])],b.prototype,"viewModel",void 0);d.__decorate([c.accessibleHandler()],b.prototype,"_handleClick",null);return b=d.__decorate([e.subclass("esri.widgets.BasemapGallery")],
b)}(p)});