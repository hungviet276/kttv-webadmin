// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../../Graphic ../../../core/Accessor ../../../core/HandleOwner ../../../core/watchUtils ../../../core/accessorSupport/decorators ../support/featureUtils".split(" "),function(m,n,c,g,h,k,l,d,f){return function(e){function a(a){var b=e.call(this,a)||this;b._loadingPromise=null;b.created=null;b.creator=null;b.destroyer=null;b.graphic=null;b.handles.add(l.init(b,"creator",function(a){b._destroyContent();b._createContent(a)}));return b}c.__extends(a,e);a.prototype.destroy=
function(){this._destroyContent()};Object.defineProperty(a.prototype,"state",{get:function(){return this._loadingPromise?"loading":"ready"},enumerable:!1,configurable:!0});a.prototype._destroyContent=function(){var a=this.graphic,b=this.destroyer;this.created&&(f.graphicCallback(b,{graphic:a}).catch(function(){return null}),this._set("created",null))};a.prototype._createContent=function(a){return c.__awaiter(this,void 0,void 0,function(){var b,d,e;return c.__generator(this,function(c){switch(c.label){case 0:return b=
this.graphic,this._loadingPromise=d=f.graphicCallback(a,{graphic:b}).catch(function(){return null}),this.notifyChange("state"),[4,d];case 1:e=c.sent();if(d!==this._loadingPromise)return[2];this._loadingPromise=null;this.notifyChange("state");this._set("created",e);return[2]}})})};c.__decorate([d.property({readOnly:!0})],a.prototype,"created",void 0);c.__decorate([d.property()],a.prototype,"creator",void 0);c.__decorate([d.property()],a.prototype,"destroyer",void 0);c.__decorate([d.property({type:g})],
a.prototype,"graphic",void 0);c.__decorate([d.property({readOnly:!0})],a.prototype,"state",null);return a=c.__decorate([d.subclass("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],a)}(k.HandleOwnerMixin(h))});