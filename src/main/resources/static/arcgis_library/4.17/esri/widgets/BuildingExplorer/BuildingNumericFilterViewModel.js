// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../core/Accessor ../../core/arrayUtils ../../core/Collection ../../core/collectionUtils ../../core/Handles ../../core/maybe ../../core/promiseUtils ../../core/accessorSupport/decorators ./support/layerUtils ./support/validation".split(" "),function(q,r,b,h,k,e,l,m,f,n,c,p,d){return function(g){function a(a){a=g.call(this,a)||this;a.state="disabled";a._handles=new m;a._domainInfo=d.getDomainInfo([]);a._loadLayers=p.createLoadLayersFunction();a.layers=new e;return a}
b.__extends(a,g);a.prototype.initialize=function(){var a=this;this._handles.add(this.layers.on("change",function(){return a._onLayersChange()}));this._onLayersChange()};a.prototype.destroy=function(){this._set("state","disabled");this._handles.destroy()};Object.defineProperty(a.prototype,"enabled",{get:function(){return 0<this.allowedValues.length&&this._get("enabled")},set:function(a){a!==this.enabled&&0<this.allowedValues.length&&this._set("enabled",a)},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,
"value",{set:function(a){a!==this.value&&(a=d.getValidNumber(a,this),f.isNone(a)||this._set("value",a))},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"min",{get:function(){return d.getMin(this.allowedValues)},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"max",{get:function(){return d.getMax(this.allowedValues)},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"allowedValues",{get:function(){return this._domainInfo.allowedValues},enumerable:!1,
configurable:!0});Object.defineProperty(a.prototype,"hasNext",{get:function(){if(!this.enabled)return!0;var a=this._valueIndex;return 0<=a&&a<this.allowedValues.length-1},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"hasPrevious",{get:function(){return this.enabled?0<this._valueIndex:!0},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"layers",{set:function(a){var b=this._get("layers");this._set("layers",l.referenceSetter(a,b))},enumerable:!1,configurable:!0});
Object.defineProperty(a.prototype,"filterExpressions",{get:function(){return{solid:null,xRay:null}},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"_valueIndex",{get:function(){return k.binaryIndexOf(this.allowedValues,this.value)},enumerable:!1,configurable:!0});a.prototype.select=function(a){var b=d.getValidNumber(a,this);f.isSome(b)&&(this.enabled=!0,this.value=a)};a.prototype.clear=function(){this.enabled=!1};a.prototype.next=function(){0!==this.allowedValues.length&&(this.enabled?
this.hasNext&&(this.value=this.allowedValues[this._valueIndex+1]):(this.enabled=!0,this.value=this.allowedValues[0]))};a.prototype.previous=function(){0!==this.allowedValues.length&&(this.enabled?this.hasPrevious&&(this.value=this.allowedValues[this._valueIndex-1]):(this.enabled=!0,this.value=this.allowedValues[this.allowedValues.length-1]))};a.prototype.getValueLabel=function(a){var b;return 0===this.layers.length?null:null!==(b=this._domainInfo.fieldValueMap.get(a))&&void 0!==b?b:null};a.prototype._onLayersChange=
function(){return b.__awaiter(this,void 0,void 0,function(){var a;return b.__generator(this,function(b){switch(b.label){case 0:this._set("state","loading");this._domainInfo=d.getDomainInfo([]);if(0===this.layers.length)return[2];b.label=1;case 1:return b.trys.push([1,3,,4]),[4,this._loadLayers(this.layers)];case 2:return b.sent(),this._setup(),this._set("state","ready"),[3,4];case 3:return a=b.sent(),n.isAbortError(a)||this._set("state","failed"),[3,4];case 4:return[2]}})})};b.__decorate([c.property({value:!1,
nonNullable:!0,dependsOn:["allowedValues"]})],a.prototype,"enabled",null);b.__decorate([c.property({value:0,nonNullable:!0})],a.prototype,"value",null);b.__decorate([c.property({readOnly:!0,dependsOn:["allowedValues"]})],a.prototype,"min",null);b.__decorate([c.property({readOnly:!0,dependsOn:["allowedValues"]})],a.prototype,"max",null);b.__decorate([c.property({readOnly:!0,dependsOn:["_domainInfo"]})],a.prototype,"allowedValues",null);b.__decorate([c.property({readOnly:!0,dependsOn:["allowedValues",
"_valueIndex","enabled"]})],a.prototype,"hasNext",null);b.__decorate([c.property({readOnly:!0,dependsOn:["_valueIndex","enabled"]})],a.prototype,"hasPrevious",null);b.__decorate([c.property({type:e,nonNullable:!0})],a.prototype,"layers",null);b.__decorate([c.property({nonNullable:!0})],a.prototype,"state",void 0);b.__decorate([c.property({readOnly:!0,dependsOn:["value","allowedValues"]})],a.prototype,"_valueIndex",null);b.__decorate([c.property()],a.prototype,"_domainInfo",void 0);return a=b.__decorate([c.subclass("esri.widgets.BuildingExplorer.BuildingNumericFilterViewModel")],
a)}(h)});