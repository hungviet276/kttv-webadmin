// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../core/maybe ../../core/accessorSupport/decorators ./BuildingNumericFilterViewModel ./support/buildingLayerUtils ./support/filterUtils ./support/validation".split(" "),function(q,r,b,h,c,k,l,m,n){return function(d){function a(){var e=null!==d&&d.apply(this,arguments)||this;e._levelFieldName=null;e._parseValueFromFilter=function(a){var b=new RegExp(e._levelFieldName+"\\s*\x3d\\s*(\\d+)","gi"),p=new RegExp(e._levelFieldName+"\\s*\x3c\\s*(\\d+)","gi"),c=0;for(a=a.filterBlocks.items;c<
a.length;c++){var f=a[c],d=f.filterMode,f=f.filterExpression,g=null;"solid"===d.type?g=b.exec(f):"x-ray"===d.type&&(g=p.exec(f));if(h.isSome(g))return parseInt(g[1],10)}return null};return e}b.__extends(a,d);Object.defineProperty(a.prototype,"filterExpressions",{get:function(){return this.enabled&&this._levelFieldName?{xRay:this._levelFieldName+" \x3c "+this.value,solid:this._levelFieldName+" \x3d "+this.value}:{solid:null,xRay:null}},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,
"_firstValue",{get:function(){var a=this.allowedValues;return 0<a.length?a[0]:0},enumerable:!1,configurable:!0});a.prototype._setup=function(){var a=this,c=[];this.layers.forEach(function(b){b=l.findFieldInfoByModelName(b,"bldglevel");h.isSome(b)&&(a._levelFieldName=b.fieldName,c.push(b))});this._domainInfo=n.getDomainInfo(c);var b=m.getValueFromFilters(this.layers,this._parseValueFromFilter);h.isSome(b)?this.select(b):(this.enabled=!1,this.value=this._firstValue)};b.__decorate([c.property({readOnly:!0,
dependsOn:["enabled","value","_levelFieldName"]})],a.prototype,"filterExpressions",null);b.__decorate([c.property()],a.prototype,"_levelFieldName",void 0);b.__decorate([c.property({readOnly:!0,dependsOn:["allowedValues.length"]})],a.prototype,"_firstValue",null);return a=b.__decorate([c.subclass("esri.widgets.BuildingExplorer.BuildingLevel")],a)}(k)});