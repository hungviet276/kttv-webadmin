// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../core/lang ../../core/accessorSupport/decorators ./SearchSource ./support/layerSearchUtils".split(" "),function(l,m,d,g,c,k,h){return function(e){function b(){var a=null!==e&&e.apply(this,arguments)||this;a.displayField=null;a.exactMatch=null;a.orderByFields=null;a.searchFields=null;a.searchTemplate=null;a.suggestionTemplate=null;a.getResults=function(b,c){return h.getResults(d.__assign({source:a},b),c)};a.getSuggestions=function(b,c){return h.getSuggestions(d.__assign({source:a},
b),c)};return a}d.__extends(b,e);f=b;Object.defineProperty(b.prototype,"layer",{set:function(a){this._set("layer",a);a&&a.load().catch(function(){})},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"name",{get:function(){return this._getLayerTitle()||""},set:function(a){void 0===a?this._clearOverride("name"):this._override("name",a)},enumerable:!1,configurable:!0});b.prototype.clone=function(){return new f({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,
maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?g.clone(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,
searchFields:this.searchFields?g.clone(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})};b.prototype._getFirstStringField=function(){var a=this.layer,b="";a&&a.fields&&a.fields.some(function(a){return"string"===a.type?(b=a.name,!0):!1});return b};b.prototype._getDisplayField=function(){return this.displayField||this.layer.displayField||this._getFirstStringField()};b.prototype._getSearchFieldsString=function(){var a=this.layer;return a.loaded?": "+(this.searchFields||
[this._getDisplayField()]).map(function(b){var c=a.getField(b);return c&&c.alias||b}).join(", "):""};b.prototype._getLayerTitle=function(){var a=this.layer;if(a&&(a=a.title))return""+a+this._getSearchFieldsString()};var f;d.__decorate([c.property({json:{read:{source:"field.name"},write:{target:"field.name"}}})],b.prototype,"displayField",void 0);d.__decorate([c.property({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],b.prototype,"exactMatch",void 0);d.__decorate([c.property({value:null})],
b.prototype,"layer",null);d.__decorate([c.property({dependsOn:["layer.title","layer.loaded"]})],b.prototype,"name",null);d.__decorate([c.property({type:[String],json:{write:!0}})],b.prototype,"orderByFields",void 0);d.__decorate([c.property()],b.prototype,"searchFields",void 0);d.__decorate([c.property()],b.prototype,"searchTemplate",void 0);d.__decorate([c.property()],b.prototype,"suggestionTemplate",void 0);return b=f=d.__decorate([c.subclass("esri.widgets.Search.LayerSearchSource")],b)}(k)});