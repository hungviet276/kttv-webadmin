// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../core/Accessor ../../core/accessorSupport/decorators ../../core/libs/gl-matrix-2/vec3 ../../core/libs/gl-matrix-2/vec4f64 ../../layers/support/ElevationQuery ../../views/3d/support/geometryUtils ../../views/3d/webgl-engine/lib/Intersector".split(" "),function(A,B,f,n,w,u,p,x,y,z){return function(g){function a(b){b=g.call(this,b)||this;b.numSamplesForPreview=20;b.numSamplesPerChunk=50;return b}f.__extends(a,g);a.prototype.queryElevation=function(b,a){var q,c=a.view,
g=a.noDataValue;return f.__awaiter(this,void 0,void 0,function(){var a,r,k,l,d,h,m,t,e,v,n;return f.__generator(this,function(f){if("3d"!==c.type)throw Error("can only query SceneView");a=c.spatialReference;r=x.GeometryDescriptor.fromGeometry(b).project(a);k=new z.Intersector(c.state.mode);k.options.selectionMode=!0;k.options.store=2;l=p.vec4f64.create();d=p.vec4f64.create();h=p.vec4f64.create();m=0;for(t=r.coordinates;m<t.length;m++)e=t[m],u.vec3.set(d,e.x,e.y,null!==(q=e.z)&&void 0!==q?q:0),c.renderCoordsHelper.toRenderCoords(d,
a,d),u.vec3.copy(l,d),c.renderCoordsHelper.setAltitude(2E5,l),v=y.ray.fromPoints(l,d),(n=c.sceneIntersectionHelper.intersectRay(v,k,h))?(c.renderCoordsHelper.fromRenderCoords(h,h,a),e.z=h[2]):e.z=g;return[2,{geometry:r.export(),noDataValue:g}]})})};return a=f.__decorate([w.subclass("esri.widgets.ElevationProfile.SceneElevationProvider")],a)}(n)});