// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../core/domUtils ../../core/maybe ../../core/watchUtils ../../core/accessorSupport/decorators ../../libs/popper/index ../Widget ./widget".split(" "),function(r,t,d,h,g,k,e,m,n,f){var p="bottom bottom-start bottom-end left left-start left-end right right-start right-end top top-start top-end".split(" "),q={position:"fixed","z-index":"1000"};return function(l){function b(a,b){var c=l.call(this,a,b)||this;c._popper=null;c._contentNode=null;c._renderAttached=!1;c._rootNode=
null;c.anchorElement=null;c.offset=[0,0];c.open=!1;c.renderContentFunction=null;c._afterRootCreate=function(a){c._rootNode=a};c._afterContentCreate=function(a){c._contentNode=a};c._updatePosition=function(){g.isSome(c._popper)&&c._popper.update()};return c}d.__extends(b,l);b.prototype.initialize=function(){var a=this;this.when(function(){a._projector.append(document.body,a.render);a._renderAttached=!0});this.own(k.init(this,["open","anchorElement"],function(){return a._buildPopper()}),k.init(this,
["placement","offset"],function(){return a._setPopperOptions()}))};b.prototype.destroy=function(){this.renderContentFunction=this.anchorElement=this.owner=null;this._renderAttached&&(this._projector.detach(this.render),this._renderAttached=!1);g.isSome(this._rootNode)&&(h.remove(this._rootNode),this._rootNode=null);this._contentNode=null;g.isSome(this._popper)&&(this._popper.destroy(),this._popper=null)};Object.defineProperty(b.prototype,"container",{set:function(a){},enumerable:!1,configurable:!0});
Object.defineProperty(b.prototype,"owner",{set:function(a){this._set("owner",a)},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"placement",{get:function(){return"top"},set:function(a){-1===p.indexOf(a)?this._clearOverride("placement"):this._override("placement",a)},enumerable:!1,configurable:!0});b.prototype.render=function(){var a=this.open,b=this.owner,c=this.renderContentFunction;return f.tsx("div",{afterCreate:this._afterRootCreate,class:this.classes("esri-popover",a?"esri-popover--open":
null),styles:q},f.tsx("div",{afterCreate:this._afterContentCreate,afterUpdate:this._updatePosition},a&&(null===c||void 0===c?void 0:c.call(b))))};b.prototype._buildPopper=function(){g.isSome(this._popper)&&(this._popper.destroy(),this._popper=null);var a=this._contentNode;if(!g.isNone(a)&&this.open&&this.renderContentFunction){var b=this._getAnchor();b&&(this._popper=m.createPopper(b,a),this._setPopperOptions())}};b.prototype._setPopperOptions=function(){var a=this.placement,b=this.offset,c=this._popper;
g.isNone(c)||(c.setOptions({placement:a,modifiers:[{name:"offset",options:{offset:b}}]}),c.forceUpdate())};b.prototype._getAnchor=function(){var a=this.anchorElement;return h.byId("function"===typeof a?a():a)};d.__decorate([e.property(),f.renderable()],b.prototype,"anchorElement",void 0);d.__decorate([e.property()],b.prototype,"container",null);d.__decorate([e.property(),f.renderable()],b.prototype,"offset",void 0);d.__decorate([e.property(),f.renderable()],b.prototype,"open",void 0);d.__decorate([e.property(),
f.renderable()],b.prototype,"owner",null);d.__decorate([e.property(),f.renderable()],b.prototype,"placement",null);d.__decorate([e.property(),f.renderable()],b.prototype,"renderContentFunction",void 0);return b=d.__decorate([e.subclass("esri.widgets.support.Popover")],b)}(n)});