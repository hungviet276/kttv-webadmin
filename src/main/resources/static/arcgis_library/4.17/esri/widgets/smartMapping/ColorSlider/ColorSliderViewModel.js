// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../../core/maybe ../../../core/accessorSupport/decorators ../SmartMappingSliderViewModel".split(" "),function(q,r,f,m,h,p){return function(n){function c(a){a=n.call(this,a)||this;a.handlesSyncedToPrimary=!0;return a}f.__extends(c,n);Object.defineProperty(c.prototype,"primaryHandleEnabled",{get:function(){var a=this.stops;if(!a||!a.length)return!1;a=a.length;return 3===a||5===a?this._get("primaryHandleEnabled"):!1},set:function(a){this._set("primaryHandleEnabled",a)},
enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"stops",{set:function(a){if(a&&a.length){var b=a.map(function(a){return a.value}),d=this.max,g=this.min,e={};m.isSome(g)&&b.some(function(a){return a<g})&&(e.min=Math.min.apply(Math,b));m.isSome(d)&&b.some(function(a){return a>d})&&(e.max=Math.max.apply(Math,b));this.set(f.__assign({},e))}this._set("stops",a)},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"values",{get:function(){var a=this.primaryHandleEnabled,
b=this.stops;if(!b||!b.length||2>b.length)return[];b=b.map(function(a){return a.value});return a?3===b.length?[b[0],b[1],b[2]]:[b[0],b[2],b[4]]:[b[0],b[b.length-1]]},enumerable:!1,configurable:!0});c.prototype.setValue=function(a,b){var d=this.values,g=d[a];b=this.toPrecision(b);g!==b&&(g=this.min,b>this.max||b<g||(this.primaryHandleEnabled&&(d=d[1],0===a&&b>d?b=d:2===a&&b<d&&(b=d)),a=this._getColorStopChanges(a,b),this._updateColorStops(a),this.notifyChange("values"),this.notifyChange("labels")))};
c.prototype.getStopInfo=function(){var a=this.min,b=this.max,d=this.stops;return d&&d.length?d.map(function(d){return{color:d.color,offset:(b-d.value)/(b-a)}}):[]};c.prototype._getStopIndexFromValueIndex=function(a){var b=this.primaryHandleEnabled,d=this.stops;return 0===a?0:b&&1===a?2:d.length-1};c.prototype._getColorStopChanges=function(a,b){return this.primaryHandleEnabled?1===a?this._getColorStopChangesAfterPrimaryHandleMove(a,b):this._getColorStopChangesAfterSecondaryHandleMove(a,b):this._getColorStopChangesAfterHandleMove(a,
b)};c.prototype._getColorStopChangesAfterPrimaryHandleMove=function(a,b){var d=this.handlesSyncedToPrimary,g=this.stops,e=this.values,c=this._getStopIndexFromValueIndex(a);if(d){var d=this.max,c=this.min,k=b-e[a];a=Math.max(Math.min(e[0]+k,d),c);e=Math.max(Math.min(e[2]+k,d),c);return 5===g.length?[{index:0,value:this.toPrecision(a)},{index:1,value:this.toPrecision((b+a)/2)},{index:2,value:b},{index:3,value:this.toPrecision((b+e)/2)},{index:4,value:this.toPrecision(e)}]:[{index:0,value:a},{index:1,
value:b},{index:2,value:e}]}return 5===g.length?[{index:1,value:this.toPrecision((e[1]+e[0])/2)},{index:2,value:b},{index:3,value:this.toPrecision((e[1]+e[2])/2)}]:[{index:c,value:b}]};c.prototype._getColorStopChangesAfterSecondaryHandleMove=function(a,b){var d=this.stops,c=this.values;a=this._getStopIndexFromValueIndex(a);return 5===d.length?(d=0===a?1:3,c=this.toPrecision((b+c[1])/2),[{index:a,value:b},{index:d,value:c}]):[{index:a,value:b}]};c.prototype._getColorStopChangesAfterHandleMove=function(a,
b){var d=this,c=this.max,e=this.min,f=this.stops,k=this.values,h=this._getStopIndexFromValueIndex(a),e=0===a?e:k[a-1];a=a===k.length-1?c:k[a+1];var l=f.map(function(a){return a.value});l[h]=Math.max(Math.min(b,a),e);var m=l[l.length-1]-l[0],n=f.length-1;return l.map(function(a,b){return{index:b,value:d.toPrecision(l[0]+b*m/n)}})};c.prototype._updateColorStops=function(a){for(var b=this.stops,d=b.map(function(a){return a.value}),c=0;c<a.length;c++){var e=a[c];d[e.index]=e.value}b.forEach(function(a,
b){return a.value=d[b]})};f.__decorate([h.property()],c.prototype,"handlesSyncedToPrimary",void 0);f.__decorate([h.property({dependsOn:["stops"]})],c.prototype,"primaryHandleEnabled",null);f.__decorate([h.property()],c.prototype,"stops",null);f.__decorate([h.property({dependsOn:["primaryHandleEnabled","stops"],readOnly:!0})],c.prototype,"values",null);return c=f.__decorate([h.subclass("esri.widgets.smartMapping.ColorSlider.ColorSliderViewModel")],c)}(p)});