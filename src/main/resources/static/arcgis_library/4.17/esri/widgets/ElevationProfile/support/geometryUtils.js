// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../../core/promiseUtils ../../../core/unitUtils ../../../geometry/Polyline ../../../geometry/SpatialReference @dojo/framework/shim/Promise".split(" "),function(t,m,p,g,v,w,x){function u(a,d,b){return p.__awaiter(this,void 0,void 0,function(){var e,h,k,c;return p.__generator(this,function(l){switch(l.label){case 0:return[4,new Promise(function(a,b){t(["../../../views/3d/support/projectionUtils"],a,b)})];case 1:return e=l.sent(),g.throwIfAborted(b),h=a.spatialReference,
e.canProject(h,d)?(k=[],e.pathsToPaths(a.paths,a.hasZ,a.hasM,h,k,d),[2,new w({spatialReference:d,hasZ:a.hasZ,hasM:a.hasM,paths:k})]):[4,new Promise(function(a,b){t(["../../../geometry/projection"],a,b)})];case 2:return c=l.sent(),g.throwIfAborted(b),c.isLoaded()?[3,4]:[4,c.load()];case 3:l.sent(),g.throwIfAborted(b),l.label=4;case 4:if(!c.getTransformation(h,d))throw Error("failed to project path");return[2,c.project(a,d)]}})})}Object.defineProperty(m,"__esModule",{value:!0});m.densifyPath=void 0;
m.densifyPath=function(a,d,b){return p.__awaiter(this,void 0,void 0,function(){var e,h,k,c,l,n,m,q,r;return p.__generator(this,function(f){switch(f.label){case 0:return k=null,c=a.spatialReference,l=v.getMetersPerUnitForSR(c),[4,new Promise(function(a,b){t(["../../../geometry/geometryEngineAsync"],a,b)})];case 1:return n=f.sent(),g.throwIfAborted(b),c.isGeographic||c.isWebMercator?[4,u(a,x.WGS84,b)]:[3,6];case 2:return m=f.sent(),[4,n.geodesicLength(m,"meters")];case 3:return e=f.sent(),g.throwIfAborted(b),
q=e/d.maxSamples,r=Math.max(d.samplingDistance,q),[4,n.geodesicDensify(m,r,"meters")];case 4:return k=f.sent(),g.throwIfAborted(b),[4,u(k,c,b)];case 5:return h=f.sent(),[3,9];case 6:return[4,n.planarLength(a,"meters")];case 7:return e=f.sent(),g.throwIfAborted(b),q=e/d.maxSamples,r=Math.max(d.samplingDistance,q),[4,n.densify(a,r,"meters")];case 8:h=f.sent(),g.throwIfAborted(b),f.label=9;case 9:return[2,{densifiedPath:h,densifiedPathWgs84:k,pathLength:e/l}]}})})}});