// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define(["require","exports","../../../intl","../../../core/string"],function(r,b,f,q){function e(a){return"esriNAUSeconds"===a||"esriNAUMinutes"===a||"esriNAUHours"===a||"esriNAUDays"===a}function l(a,d,b){var c=e(d),m=e(b);d=c?h(a,d):k(a,d);return c===m?m?n(d,b):p(d,b):a}function h(a,d,b){a=a||0;switch(d){case "esriNAUSeconds":a/=Math.pow(60,b?-1:1);break;case "esriNAUHours":a*=Math.pow(60,b?-1:1);break;case "esriNAUDays":a*=Math.pow(1440,b?-1:1)}return a}function n(a,b){return h(a,b,!0)}function k(a,
b,c){a=a||0;switch((b||"").replace("esriNAU","esri")){case "esriInches":a*=Math.pow(.0254,c?-1:1);break;case "esriFeet":a*=Math.pow(.3048,c?-1:1);break;case "esriYards":a*=Math.pow(.9144,c?-1:1);break;case "esriMiles":a*=Math.pow(1609.344,c?-1:1);break;case "esriNauticalMiles":a*=Math.pow(1851.995396854,c?-1:1);break;case "esriMillimeters":a/=Math.pow(1E3,c?-1:1);break;case "esriCentimeters":a/=Math.pow(100,c?-1:1);break;case "esriKilometers":a*=Math.pow(1E3,c?-1:1);break;case "esriDecimeters":a/=
Math.pow(10,c?-1:1)}return a}function p(a,b){return k(a,b,!0)}Object.defineProperty(b,"__esModule",{value:!0});b.formatDistance=b.formatTime=b.getAssociatedStop=b.isStopLocated=b.isWaypoint=b.isLastStop=b.isMiddleStop=b.isFirstStop=b.fromMeters=b.toMeters=b.fromMinutes=b.toMinutes=b.convertCostValue=b.isTimeUnits=b.toSpatiallyLocalTimeString=b.useSpatiallyLocalTime=void 0;b.useSpatiallyLocalTime=function(a,b){return!(!a._associatedStop||!b||-22091616E5===a.get("attributes.ETA"))};b.toSpatiallyLocalTimeString=
function(a,b,c,g){var d=new Date(c),e=new Date(d.getTime()+6E4*d.getTimezoneOffset()),d=f.formatDate(e,{hour:"2-digits",minute:"2-digits",hour12:!1});return b?(c=(c-b)/1E3/60/60,b=Math.floor(c),g=60*(c-b),c=f.formatNumber(b,{minimumIntegerDigits:2}),g=f.formatNumber(g,{minimumIntegerDigits:2}),d+" "+a.gmt+(0>b?"":"+")+c+g):g?f.formatDate(e,{hour:"numeric",minute:"numeric"}):d};b.isTimeUnits=e;b.convertCostValue=l;b.toMinutes=h;b.fromMinutes=n;b.toMeters=k;b.fromMeters=p;b.isFirstStop=function(a){a=
a&&a.attributes||{};return null===(a.ArriveCurbApproach||null)&&null!==(a.DepartCurbApproach||null)};b.isMiddleStop=function(a){a=a&&a.attributes||{};return null!==(a.ArriveCurbApproach||null)&&null!==(a.DepartCurbApproach||null)};b.isLastStop=function(a){a=a&&a.attributes||{};return null!==(a.ArriveCurbApproach||null)&&null===(a.DepartCurbApproach||null)};b.isWaypoint=function(a){return a&&a.get("attributes.isWaypoint")};b.isStopLocated=function(a){a=a&&a.get("attributes.Status");return!a||6===a};
b.getAssociatedStop=function(a){return a._associatedStop};b.formatTime=function(a,b){void 0===b&&(b={});b=b.unit;b=(void 0===b?"minutes":b).toLowerCase();a="days"===b?24*a:"hours"===b?a:"minutes"===b?a/60:a/60/60;a=1>a?Math.floor(60*a)+"m":Math.floor(a)+":"+q.padStart(""+Math.floor(a%1*60),2,"0")+"h";return a};b.formatDistance=function(a,b,c){void 0===c&&(c={});var d=c.toUnits;b=l(b,c.fromUnits,d);if(!b)return"";d=(c=a.units[d])?c.abbr:d.replace("esri","").toLowerCase();return f.substitute(a.distanceTemplate,
{distance:b,units:d},{format:{distance:{type:"number",intlOptions:{minimumFractionDigits:2,maximumFractionDigits:2}}}})}});