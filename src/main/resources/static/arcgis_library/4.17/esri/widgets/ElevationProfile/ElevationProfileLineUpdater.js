// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../core/Accessor ../../core/Handles ../../core/maybe ../../core/promiseUtils ../../core/throttle ../../core/watchUtils ../../core/accessorSupport/decorators ./ElevationProfileLine ./support/constants ./support/profileUtils".split(" "),function(E,F,d,x,y,k,l,z,A,e,B,C,D){return function(f){function a(a){var c=f.call(this,a)||this;c._abortController=null;c._handles=new y;c._update=function(){return d.__awaiter(c,void 0,void 0,function(){var a,c,g,e,n,f,r,t,m,h,u,v,p,
q,w;return d.__generator(this,function(b){switch(b.label){case 0:k.isSome(this._abortController)&&this._abortController.abort();a=l.createAbortController();c=a.signal;this._abortController=a;g=this.parentViewModel;e=g.path;n=g.queue;f=g.options;r=g.view;if(k.isNone(e)||k.isNone(n))return this.line.updateFromResult(null),[2];t=D.generateProfile({path:e,provider:this.line.provider,options:f,queryOptions:{view:r,signal:c},queue:n});b.label=1;case 1:b.trys.push([1,14,,15]),b.label=2;case 2:b.trys.push([2,
7,8,13]),m=d.__asyncValues(t),b.label=3;case 3:return[4,m.next()];case 4:if(h=b.sent(),h.done)return[3,6];u=h.value;l.throwIfAborted(c);this.line.updateFromResult(u);b.label=5;case 5:return[3,3];case 6:return[3,13];case 7:return v=b.sent(),q={error:v},[3,13];case 8:return b.trys.push([8,,11,12]),h&&!h.done&&(w=m.return)?[4,w.call(m)]:[3,10];case 9:b.sent(),b.label=10;case 10:return[3,12];case 11:if(q)throw q.error;return[7];case 12:return[7];case 13:return[3,15];case 14:p=b.sent();if(l.isAbortError(p))this._abortController===
a&&(this._abortController=null);else throw p;return[3,15];case 15:return[2]}})})};c._throttledUpdate=z.default(function(){return l.ignoreAbortErrors(c._update())},C.UPDATE_THROTTLE_MILLIS);return c}d.__extends(a,f);a.prototype.initialize=function(){var a=this;this._handles.add([A.init(this,"line.provider parentViewModel.options parentViewModel.path.paths parentViewModel.view parentViewModel.queue parentViewModel.unit".split(" "),function(){return a._throttledUpdate()})])};a.prototype.destroy=function(){this._handles.destroy();
k.isSome(this._abortController)&&(this._abortController.abort(),this._abortController=null)};d.__decorate([e.property({type:B,nonNullable:!0})],a.prototype,"line",void 0);d.__decorate([e.property({nonNullable:!0})],a.prototype,"parentViewModel",void 0);return a=d.__decorate([e.subclass("esri.widgets.ElevationProfile.ElevationProfileLineUpdater")],a)}(x)});