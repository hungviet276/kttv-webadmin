// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define(["require","exports","../../../geometry/support/jsonUtils","../CurveHelper"],function(h,f,g,k){Object.defineProperty(f,"__esModule",{value:!0});f.EffectOffset=void 0;h=function(){function b(){}b.local=function(){null===b.instance&&(b.instance=new b);return b.instance};b.prototype.execute=function(a,c,d){return new l(a,c,d)};b.instance=null;return b}();f.EffectOffset=h;var l=function(){function b(a,c,d){this._inputGeometries=a;this._curveHelper=new k.CurveHelper;this._offset=(void 0!==c.offset?
c.offset:1)*d;this._method=c.method;this._option=c.option;this._offsetFlattenError=k.PIXEL_TOLERANCE*d;this._option}b.prototype.next=function(){for(var a=this._inputGeometries.next();a;){if(0===this._offset)return a;if(g.isExtent(a)){if("Rounded"===this._method&&0<this._offset){var c=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];return(c=this._curveHelper.offset(c,this._offset,this._method,4,this._offsetFlattenError))?{rings:[c]}:null}if(0<Math.min(a.xmax-a.xmin,
a.ymax-a.ymin)+2*this._offset)return{xmin:a.xmin-this._offset,xmax:a.xmax+this._offset,ymin:a.ymin-this._offset,ymax:a.ymax+this._offset}}if(g.isPolygon(a)){for(var d=[],b=0,e=a.rings;b<e.length;b++)c=e[b],(c=this._curveHelper.offset(c,this._offset,this._method,4,this._offsetFlattenError))&&d.push(c);if(d.length)return{rings:d}}if(g.isPolyline(a)){d=[];b=0;for(a=a.paths;b<a.length;b++)(e=this._curveHelper.offset(a[b],this._offset,this._method,4,this._offsetFlattenError))&&d.push(e);if(d.length)return{paths:d}}a=
this._inputGeometries.next()}return null};return b}()});