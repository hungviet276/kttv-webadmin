// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports ../../assets ../../Color ../../request ../../core/ItemCache ../../core/promiseUtils ../../core/screenUtils ./cimSymbolUtils".split(" "),function(x,b,l,m,n,p,q,e,r){function k(a){if(!a)return null;var d;switch(a.type){case "simple-fill":case "picture-fill":case "simple-marker":d=k(a.outline);break;case "simple-line":var c=e.pt2px(a.width);"none"!==a.style&&0!==c&&(d={color:a.color,style:t(a.style),width:c,cap:a.cap,join:"miter"===a.join?e.pt2px(a.miterLimit):a.join});break;
default:d=null}return d}Object.defineProperty(b,"__esModule",{value:!0});b.defaultThematicColor=b.getStroke=b.getPatternUrlWithColor=b.getFill=b.getSVGBaselineShift=b.getSVGBaseline=b.getSVGAlign=void 0;var u=l.getAssetUrl("esri/symbols/patterns/"),v={left:"start",center:"middle",right:"end",justify:"start"},w={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},h=new p(1E3);b.getSVGAlign=function(a){return a=(a=a.horizontalAlignment)&&v[a.toLowerCase()]||"middle"};
b.getSVGBaseline=function(a){return(a=a.verticalAlignment)&&w[a.toLowerCase()]||"alphabetic"};b.getSVGBaselineShift=function(a){return"bottom"===a.verticalAlignment?"super":null};b.getFill=function(a){var d=a.style,c=null;if(a)switch(a.type){case "simple-marker":"cross"!==d&&"x"!==d&&(c=a.color);break;case "simple-fill":"solid"===d?c=a.color:"none"!==d&&(c={type:"pattern",x:0,y:0,src:u+d+".png",width:5,height:5});break;case "picture-fill":c={type:"pattern",src:a.url,width:e.pt2px(a.width)*a.xscale,
height:e.pt2px(a.height)*a.yscale,x:e.pt2px(a.xoffset),y:e.pt2px(a.yoffset)};break;case "text":c=a.color;break;case "cim":c=r.getCIMSymbolColor(a)}return c};b.getPatternUrlWithColor=function(a,d){var c=a+"-"+d;return void 0!==h.get(c)?q.resolve(h.get(c)):n(a,{responseType:"image"}).then(function(a){a=a.data;var b=a.naturalWidth,e=a.naturalHeight,f=document.createElement("canvas");f.width=b;f.height=e;var g=f.getContext("2d");g.fillStyle=d;g.fillRect(0,0,b,e);g.globalCompositeOperation="destination-in";
g.drawImage(a,0,0);a=f.toDataURL();h.put(c,a);return a})};b.getStroke=k;var t=function(){var a={};return function(b){if(a[b])return a[b];var c=b.replace(/-/g,"");return a[b]=c}}();b.defaultThematicColor=new m([128,128,128])});