// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define(["require","exports","../../core/urlUtils","../../support/persistableUrlUtils"],function(l,b,d,e){function g(c,a,b){return a.imageData?d.makeData({mediaType:a.contentType||"image/png",isBase64:!0,data:a.imageData}):f(a.url,b)}function f(c,a){return!a||"service"!==a.origin&&"portal-item"!==a.origin||!a.layer||"feature"!==a.layer.type&&"stream"!==a.layer.type||d.isAbsolute(c)||!a.layer.parsedUrl?e.fromJSON(c,a):d.join(a.layer.parsedUrl.path,"images",c)}function h(c,a,b,k){d.isDataProtocol(c)?
(c=d.dataComponents(c),a.contentType=c.mediaType,a.imageData=c.data,b&&b.imageData===a.imageData&&b.url&&e.write(b.url,a,"url",k)):e.write(c,a,"url",k)}Object.defineProperty(b,"__esModule",{value:!0});b.sourcePropertyDefinition=b.urlPropertyDefinition=b.writeImageDataAndUrl=b.read=b.readImageDataOrUrl=void 0;b.readImageDataOrUrl=g;b.read=f;b.writeImageDataAndUrl=h;b.urlPropertyDefinition={json:{read:{source:["imageData","url"],reader:g},write:{writer:function(c,a,b,d){h(c,a,this.source,d)}}}};b.sourcePropertyDefinition=
{readOnly:!0,json:{read:{source:["imageData","url"],reader:function(b,a,d){b={};a.imageData&&(b.imageData=a.imageData);a.contentType&&(b.contentType=a.contentType);a.url&&(b.url=f(a.url,d));return b}}}}});