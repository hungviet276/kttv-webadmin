// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define(["require","exports","../../core/lang","../../geometry/support/jsonUtils","./CIMPlacements"],function(e,b,p,d,q){function f(a){if(a)for(var c=a.length-1;0<c;--c)a[c][0]-=a[c-1][0],a[c][1]-=a[c-1][1]}function g(a){if(a)for(var c=0;c<a.length;c++)f(a[c])}function h(a){if(a)for(var c=a.length,b=1;b<c;++b)a[b][0]+=a[b-1][0],a[b][1]+=a[b-1][1]}function k(a){if(a)for(var c=0;c<a.length;c++)h(a[c])}function l(a){a&&(d.isPolygon(a)?k(a.rings):d.isPolyline(a)?k(a.paths):d.isMultipoint(a)&&h(a.points))}
function m(a){a&&a.reverse()}function n(a){return{rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]]}}Object.defineProperty(b,"__esModule",{value:!0});b.PathGeometryCursor=b.PathTransformationCursor=b.setId=b.getId=b.isClosedPath=b.getCoord2D=b.reversePath=b.reverseMultipath=b.deltaEncodeGeometry=b.deltaDecodeGeometry=b.cloneAndDecodeGeometry=void 0;b.cloneAndDecodeGeometry=function(a){a=p.clone(a);l(a);return a};b.deltaDecodeGeometry=l;b.deltaEncodeGeometry=
function(a){a&&(d.isPolygon(a)?g(a.rings):d.isPolyline(a)?g(a.paths):d.isMultipoint(a)&&f(a.points))};b.reverseMultipath=function(a){if(a)for(var c=0;c<a.length;c++)m(a[c])};b.reversePath=m;b.getCoord2D=function(a,c,b){return[a[0]+(c[0]-a[0])*b,a[1]+(c[1]-a[1])*b]};b.isClosedPath=function(a){return a&&0!==a.length?a[0][0]===a[a.length-1][0]&&a[0][1]===a[a.length-1][1]:!1};b.getId=function(a){return a[4]};b.setId=function(a,c){a[4]=c};e=function(){function a(a,b,e,r){this.acceptPolygon=b;this.acceptPolyline=
e;this.geomUnitsPerPoint=r;this.pathIndex=this.pathCount=-1;this.iteratePath=!1;a&&(d.isPolygon(a)?b&&(this.multiPath=a.rings,this.isClosed=!0):d.isPolyline(a)?e&&(this.multiPath=a.paths,this.isClosed=!1):d.isExtent(a)&&b&&(this.multiPath=n(a).rings,this.isClosed=!0),this.multiPath&&(this.pathCount=this.multiPath.length));this.internalPlacement=new q.Placement}a.prototype.next=function(){if(!this.multiPath)return null;for(;this.iteratePath||this.pathIndex<this.pathCount-1;){this.iteratePath||this.pathIndex++;
var a=this.processPath(this.multiPath[this.pathIndex]);if(a)return a}this.pathIndex=this.pathCount=-1;return this.multiPath=null};return a}();b.PathTransformationCursor=e;e=function(){function a(a,b,d,e){this.inputGeometries=a;this.acceptPolygon=b;this.acceptPolyline=d;this.geomUnitsPerPoint=e;this.pathIndex=this.pathCount=-1;this.iteratePath=!1}a.prototype.next=function(){for(;;){if(!this.multiPath){for(var a=this.inputGeometries.next();a;)if(d.isPolygon(a)?this.acceptPolygon&&(this.multiPath=a.rings,
this.isClosed=!0):d.isPolyline(a)?this.acceptPolyline&&(this.multiPath=a.paths,this.isClosed=!1):d.isExtent(a)&&this.acceptPolygon&&(this.multiPath=n(a).rings,this.isClosed=!0),this.multiPath){this.pathCount=this.multiPath.length;this.pathIndex=-1;break}else a=this.inputGeometries.next();if(!this.multiPath)return null}for(;this.iteratePath||this.pathIndex<this.pathCount-1;)if(this.iteratePath||this.pathIndex++,a=this.processPath(this.multiPath[this.pathIndex]))return a;this.pathIndex=this.pathCount=
-1;this.multiPath=null}};return a}();b.PathGeometryCursor=e});