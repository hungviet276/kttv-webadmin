// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports ../../../core/lang ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils".split(" "),function(g,f,e,l,m,d){Object.defineProperty(f,"__esModule",{value:!0});f.EffectRotate=void 0;g=function(){function b(){}b.local=function(){null===b.instance&&(b.instance=new b);return b.instance};b.prototype.execute=function(a,c,b){return new n(a,c,b)};b.instance=null;return b}();f.EffectRotate=g;var n=function(){function b(a,c,b){this._inputGeometries=
a;this._rotateAngle=void 0!==c.angle?-c.angle*Math.PI/180:0;b}b.prototype.next=function(){for(var a=this._inputGeometries.next();a;){if(0===this._rotateAngle)return a;var c=l.create();m.getBoundsXY(c,a);var b=(c[2]+c[0])/2,c=(c[3]+c[1])/2;if(d.isExtent(a))return a={rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]]},this._rotateMultipath(a.rings,b,c),a;if(d.isPolygon(a))return a=e.clone(a),this._rotateMultipath(a.rings,b,c),a;if(d.isPolyline(a))return a=e.clone(a),
this._rotateMultipath(a.paths,b,c),a;if(d.isMultipoint(a))return a=e.clone(a),this._rotatePath(a.points,b,c),a;if(d.isPoint(a))return a;a=this._inputGeometries.next()}return null};b.prototype._rotateMultipath=function(a,b,d){if(a)for(var c=0;c<a.length;c++)this._rotatePath(a[c],b,d)};b.prototype._rotatePath=function(a,b,d){if(a)for(var c=Math.cos(this._rotateAngle),f=Math.sin(this._rotateAngle),e=0;e<a.length;e++){var h=a[e],g=h[0]-b,k=h[1]-d;h[0]=b+g*c-k*f;h[1]=d+g*f+k*c}};return b}()});