// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../PopupTemplate ../../core/Error ../../core/promiseUtils ../../intl/messages ./support/utils".split(" "),function(x,k,a,m,t,u,v,p){function w(l){return a.__awaiter(this,void 0,void 0,function(){var c,d,b;return a.__generator(this,function(e){switch(e.label){case 0:return c=l.layer,d=l.renderer,[4,c.load()];case 1:e.sent();b=d||c.renderer;if("unique-value"!==b.type)throw new t("unique-values-popup:invalid-parameters","renderer.type must be 'unique-value'");return[2,
{layer:c,renderer:b}]}})})}function r(l,c,d){void 0===d&&(d="divide");return a.__awaiter(this,void 0,void 0,function(){var b,e,g,n,f;return a.__generator(this,function(h){switch(h.label){case 0:return[4,p.getFieldAndExpressionInfos({renderer:l,layer:c,normFieldExpressionTemplate:d})];case 1:return b=h.sent(),e=b.fieldInfos,g=b.expressionInfos,n=m.bind,f={},[4,p.getContentFromFieldInfos(c,{fieldInfos:e,expressionInfos:g})];case 2:return[2,new (n.apply(m,[void 0,(f.content=h.sent(),f.fieldInfos=e,f.expressionInfos=
g,f)]))]}})})}Object.defineProperty(k,"__esModule",{value:!0});k.getTemplates=void 0;k.getTemplates=function(l){return a.__awaiter(this,void 0,void 0,function(){var c,d,b,e,g,n,f,h,k,m,q;return a.__generator(this,function(a){switch(a.label){case 0:return[4,u.all([w(l),v.loadMessageBundle("esri/smartMapping/t9n/smartMapping")])];case 1:return c=a.sent(),d=c[0],b=d.renderer,e=d.layer,g=c[1],f={name:"unique-values",title:g.uniqueValues},[4,r(b,e)];case 2:n=(f.value=a.sent(),f);h=[];if(!p.hasNormalizedField(b))return[3,
4];m=(k=h).push;q={name:"unique-values-percent",title:g.uniqueValuesNormFieldAsPercent};return[4,r(b,e,"percentage")];case 3:m.apply(k,[(q.value=a.sent(),q)]),a.label=4;case 4:return[2,{primaryTemplate:n,secondaryTemplates:h}]}})})}});