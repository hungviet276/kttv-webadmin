// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../PopupTemplate ../../core/Error ../../core/promiseUtils ../../intl/messages ./support/utils".split(" "),function(y,h,a,l,u,v,w,n){function x(k){return a.__awaiter(this,void 0,void 0,function(){var c,d,b;return a.__generator(this,function(e){switch(e.label){case 0:return c=k.layer,d=k.renderer,[4,c.load()];case 1:e.sent();b=d||c.renderer;if("simple"!==b.type)throw new u("simple-popup:invalid-parameters","renderer.type must be 'simple'");return[2,{layer:c,renderer:b}]}})})}
function r(k,c,d){void 0===d&&(d="divide");return a.__awaiter(this,void 0,void 0,function(){var b,e,g,m,f;return a.__generator(this,function(a){switch(a.label){case 0:return[4,n.getFieldAndExpressionInfos({renderer:k,layer:c,normFieldExpressionTemplate:d})];case 1:return b=a.sent(),e=b.fieldInfos,g=b.expressionInfos,m=l.bind,f={},[4,n.getContentFromFieldInfos(c,{fieldInfos:e,expressionInfos:g})];case 2:return[2,new (m.apply(l,[void 0,(f.content=a.sent(),f.expressionInfos=g,f.fieldInfos=e,f)]))]}})})}
Object.defineProperty(h,"__esModule",{value:!0});h.getTemplates=void 0;h.getTemplates=function(k){return a.__awaiter(this,void 0,void 0,function(){var c,d,b,e,g,m,f,h,p,l,t,q;return a.__generator(this,function(a){switch(a.label){case 0:return[4,v.all([x(k),w.loadMessageBundle("esri/smartMapping/t9n/smartMapping")])];case 1:c=a.sent();d=c[0];b=d.renderer;e=d.layer;g=c[1];m=n.getPrimaryVisualVariables(b);f=[];if(!m.length)return[2,null];p={name:"simple",title:g.simple};return[4,r(b,e)];case 2:h=(p.value=
a.sent(),p);if(!n.hasNormalizedField(b))return[3,4];t=(l=f).push;q={name:"simple-percent",title:g.simpleNormFieldAsPercent};return[4,r(b,e,"percentage")];case 3:t.apply(l,[(q.value=a.sent(),q)]),a.label=4;case 4:return[2,{primaryTemplate:h,secondaryTemplates:f}]}})})}});