// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define(["require","exports","../../../core/Error","../../../layers/support/fieldUtils"],function(n,b,k,f){function e(a,c){return new k(a,c)}function g(a,c){c&&(a=a?"("+a+") AND ("+c+")":c);return a}function l(a){var c=a.layer;return a.fields.filter(function(a){return!c.getField(a)})}function m(a){var c=a.layer;return a.fields.filter(function(a){a=c.getFieldUsageInfo(a);return!a||!a.supportsStatistics})}Object.defineProperty(b,"__esModule",{value:!0});b.verifyBasicFieldValidity=b.mergeWhereClauses=
b.verifyNumericField=b.verifyFieldType=b.getRangeExpr=b.createError=b.getSQLFilterForNormalization=void 0;b.getSQLFilterForNormalization=function(a){var c=a.field,d=a.normalizationType;a=a.normalizationField;var b;"log"===d?b="(NOT "+c+" \x3d 0)":"field"===d&&(b="(NOT "+a+" \x3d 0)");return b};b.createError=e;b.getRangeExpr=function(a,c,b){c=null!=c?a+" \x3e\x3d "+c:"";a=null!=b?a+" \x3c\x3d "+b:"";b="";return(b=c&&a?g(c,a):c||a)?"("+b+")":""};b.verifyFieldType=function(a,c,b,h){var d=null;if(!c)d=
e(b,"'field' is not defined in the layer schema");else if(c.name===a.objectIdField||-1===h.indexOf(c.type))d=e(b,"'field' should be one of these types: "+h.join(","));return d};b.verifyNumericField=function(a,c,b){var d;c?c.name!==a.objectIdField&&f.isNumericField(c)||(d=e(b,"'field' should be one of these numeric types: "+f.numericTypes.join(","))):d=e(b,"'field' is not defined in the layer schema");return d};b.mergeWhereClauses=g;b.verifyBasicFieldValidity=function(a,b,d){var c=l({layer:a,fields:b});
if(c.length)return e(d,"Unknown fields: "+c.join(", ")+". You can only use fields defined in the layer schema");a=m({layer:a,fields:b});if(a.length)return e(d,"Unsupported fields: "+a.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true")}});