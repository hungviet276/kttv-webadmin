// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../core/Error ../../core/maybe ../../layers/support/fieldUtils ./support/utils ../support/utils ../support/adapters/support/layerUtils".split(" "),function(A,B,c,m,v,w,n,x,p){function y(d){return c.__awaiter(this,void 0,void 0,function(){var e,f,g,a,b,q,h,k,r,t,u;return c.__generator(this,function(l){switch(l.label){case 0:if(!(d&&d.layer&&d.view))throw new m("heatmap-statistics:missing-parameters","'layer' and 'view' parameters are required");e=[0,2,1];f=d.layer;
g=c.__rest(d,["layer"]);a=p.createLayerAdapter(f,e);b=c.__assign({layerAdapter:a},g);b.blurRadius=null==b.blurRadius?10:b.blurRadius;if(!a)throw new m("heatmap-statistics:invalid-parameters","'layer' must be one of these types: "+p.getLayerTypeLabels(e).join(", "));q=v.isSome(b.signal)?{signal:b.signal}:null;return[4,a.load(q)];case 1:return l.sent(),k=(h=b.field)?a.getField(h):null,[4,x.getFieldsList({field:h})];case 2:r=l.sent();if(t=n.verifyBasicFieldValidity(a,r,"heatmap-statistics:invalid-parameters"))throw t;
if(k&&(u=n.verifyFieldType(a,k,"heatmap-statistics:invalid-parameters",z)))throw u;return[2,b]}})})}var z=w.numericTypes;return function(d){return c.__awaiter(this,void 0,void 0,function(){var e,f,g;return c.__generator(this,function(a){switch(a.label){case 0:return[4,y(d)];case 1:return e=a.sent(),f=e.layerAdapter,g=c.__rest(e,["layerAdapter"]),[2,f.heatmapStatistics(g)]}})})}});