// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports ../Dictionary ../Feature ../languageUtils ../featureset/support/shared".split(" "),function(m,h,f,g,b,k){function l(b){return b&&b.domain?"coded-value"===b.domain.type||"codedValue"===b.domain.type?f.convertObjectToArcadeDictionary({type:"codedValue",name:b.domain.name,dataType:k.layerFieldEsriConstants[b.field.type],codedValues:b.domain.codedValues.map(function(b){return{name:b.name,code:b.code}})}):f.convertObjectToArcadeDictionary({type:"range",name:b.domain.name,dataType:k.layerFieldEsriConstants[b.field.type],
min:b.domain.min,max:b.domain.max}):null}Object.defineProperty(h,"__esModule",{value:!0});h.registerFunctions=void 0;h.registerFunctions=function(c){"async"===c.mode&&(c.functions.domain=function(d,e){return c.standardFunctionAsync(d,e,function(c,d,a){b.pcCheck(a,2,3);if(a[0]instanceof g)return c=a[0].fullDomain(b.toString(a[1]),void 0===a[2]?void 0:b.toNumber(a[2])),l(c);if(b.isFeatureSet(a[0]))return a[0]._ensureLoaded().then(function(){var c=b.getDomain(b.toString(a[1]),a[0],null,void 0===a[2]?
void 0:b.toNumber(a[2]));return l(c)});throw Error("Invalid Parameter");})},c.functions.subtypes=function(d,e){return c.standardFunctionAsync(d,e,function(c,d,a){b.pcCheck(a,1,1);if(a[0]instanceof g)return(c=a[0].subtypes())?f.convertObjectToArcadeDictionary(c):null;if(b.isFeatureSet(a[0]))return a[0]._ensureLoaded().then(function(){var b=a[0].subtypes();return b?f.convertObjectToArcadeDictionary(b):null});throw Error("Invalid Parameter");})},c.functions.domainname=function(d,e){return c.standardFunctionAsync(d,
e,function(c,d,a){b.pcCheck(a,2,4);if(a[0]instanceof g)return a[0].domainValueLookup(b.toString(a[1]),a[2],void 0===a[3]?void 0:b.toNumber(a[3]));if(b.isFeatureSet(a[0]))return a[0]._ensureLoaded().then(function(){var c=b.getDomain(b.toString(a[1]),a[0],null,void 0===a[3]?void 0:b.toNumber(a[3]));return b.getDomainValue(c,a[2])});throw Error("Invalid Parameter");})},c.signatures.push({name:"domainname",min:"2",max:"4"}),c.functions.domaincode=function(d,e){return c.standardFunctionAsync(d,e,function(c,
d,a){b.pcCheck(a,2,4);if(a[0]instanceof g)return a[0].domainCodeLookup(b.toString(a[1]),a[2],void 0===a[3]?void 0:b.toNumber(a[3]));if(b.isFeatureSet(a[0]))return a[0]._ensureLoaded().then(function(){var c=b.getDomain(b.toString(a[1]),a[0],null,void 0===a[3]?void 0:b.toNumber(a[3]));return b.getDomainCode(c,a[2])});throw Error("Invalid Parameter");})},c.signatures.push({name:"domaincode",min:"2",max:"4"}));c.functions.text=function(d,e){return c.standardFunctionAsync(d,e,function(c,d,a){b.pcCheck(a,
1,2);if(b.isFeatureSet(a[0])){d=b.defaultUndefined(a[1],"");if(""===d)return a[0].castToText();if("schema"===d.toLowerCase())return a[0].convertToText("schema",c.abortSignal);if("featureset"===d.toLowerCase())return a[0].convertToText("featureset",c.abortSignal)}else return b.toStringExplicit(a[0],a[1])})};c.functions.schema=function(d,e){return c.standardFunctionAsync(d,e,function(c,d,a){b.pcCheck(a,1,1);if(b.isFeatureSet(a[0]))return a[0].load().then(function(){return f.convertObjectToArcadeDictionary(a[0].schema())});
if(a[0]instanceof g)return(c=a[0].schema())?f.convertObjectToArcadeDictionary(c):null;throw Error("Invalid Parameter");})}}});