// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports ./ArcadePortal ./Attachment ./Dictionary ./Feature ./FunctionWrapper ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/SpatialReference".split(" "),function(sa,m,V,W,x,A,G,E,X,c,k,Y,Z,aa,ba,ca,da,ea,K,fa,ga,
ha,ia,ja){function L(b,a){for(var e=[],c=0;c<a.arguments.length;c++)e.push(h(b,a.arguments[c]));return e}function q(b,a,e){try{return e(b,a,L(b,a))}catch(f){throw f;}}function h(b,a){try{switch(a.type){case "EmptyStatement":return c.voidOperation;case "VariableDeclarator":var e=null===a.init?null:h(b,a.init);e===c.voidOperation&&(e=null);if("Identifier"!==a.id.type)throw Error("Can only assign a regular variable");var f=a.id.name.toLowerCase();null!==b.localScope?b.localScope[f]={value:e,valueset:!0,
node:a.init}:b.globalScope[f]={value:e,valueset:!0,node:a.init};return c.voidOperation;case "VariableDeclaration":for(var d=0;d<a.declarations.length;d++)h(b,a.declarations[d]);return c.voidOperation;case "BlockStatement":var l;a:{for(var t=c.voidOperation,d=0;d<a.body.length;d++)if(t=h(b,a.body[d]),t instanceof c.ReturnResult||t===c.breakResult||t===c.continueResult){l=t;break a}l=t}return l;case "FunctionDeclaration":var p=a.id.name.toLowerCase();b.globalScope[p]={valueset:!0,node:null,value:new G(a,
b)};return c.voidOperation;case "ReturnStatement":var H;if(null===a.argument)H=new c.ReturnResult(c.voidOperation);else{var ka=h(b,a.argument);H=new c.ReturnResult(ka)}return H;case "IfStatement":var m;if("AssignmentExpression"===a.test.type||"UpdateExpression"===a.test.type)throw Error(k.nodeErrorMessage(a.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var q=h(b,a.test);if(!0===q)m=h(b,a.consequent);else if(!1===q)m=null!==a.alternate?h(b,a.alternate):c.voidOperation;else throw Error(k.nodeErrorMessage(a,
"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));return m;case "ExpressionStatement":var r;if("AssignmentExpression"===a.expression.type||"UpdateExpression"===a.expression.type)r=h(b,a.expression);else{var v=h(b,a.expression);r=v===c.voidOperation?c.voidOperation:new c.ImplicitResult(v)}return r;case "AssignmentExpression":var y;var B=h(b,a.right),d=null,g="";if("MemberExpression"===a.left.type){d=h(b,a.left.object);!0===a.left.computed?g=h(b,a.left.property):"Identifier"===a.left.property.type&&
(g=a.left.property.name);if(c.isArray(d))if(c.isNumber(g)){0>g&&(g=d.length+g);if(0>g||g>d.length)throw Error("Assignment outside of array bounds");if(g===d.length&&"\x3d"!==a.operator)throw Error("Invalid Parameter");d[g]=C(B,a.operator,d[g],a)}else throw Error("Invalid Parameter");else if(d instanceof x){if(!1===c.isString(g))throw Error("Dictionary accessor must be a string");if(!0===d.hasField(g))d.setField(g,C(B,a.operator,d.field(g),a));else{if("\x3d"!==a.operator)throw Error("Invalid Parameter");
d.setField(g,C(B,a.operator,null,a))}}else if(d instanceof A){if(!1===c.isString(g))throw Error("Feature accessor must be a string");if(!0===d.hasField(g))d.setField(g,C(B,a.operator,d.field(g),a));else{if("\x3d"!==a.operator)throw Error("Invalid Parameter");d.setField(g,C(B,a.operator,null,a))}}else{if(c.isImmutableArray(d))throw Error("Array is Immutable");throw Error("Invalid Parameter");}y=c.voidOperation}else if(d=a.left.name.toLowerCase(),null!==b.localScope&&void 0!==b.localScope[d])b.localScope[d]=
{value:C(B,a.operator,b.localScope[d].value,a),valueset:!0,node:a.right},y=c.voidOperation;else if(void 0!==b.globalScope[d])b.globalScope[d]={value:C(B,a.operator,b.globalScope[d].value,a),valueset:!0,node:a.right},y=c.voidOperation;else throw Error("Variable not recognised");return y;case "UpdateExpression":var w;var n,d=null,g="";if("MemberExpression"===a.argument.type){d=h(b,a.argument.object);!0===a.argument.computed?g=h(b,a.argument.property):"Identifier"===a.argument.property.type&&(g=a.argument.property.name);
if(c.isArray(d))if(c.isNumber(g)){0>g&&(g=d.length+g);if(0>g||g>=d.length)throw Error("Assignment outside of array bounds");n=c.toNumber(d[g]);d[g]="++"===a.operator?n+1:n-1}else throw Error("Invalid Parameter");else if(d instanceof x){if(!1===c.isString(g))throw Error("Dictionary accessor must be a string");if(!0===d.hasField(g))n=c.toNumber(d.field(g)),d.setField(g,"++"===a.operator?n+1:n-1);else throw Error("Invalid Parameter");}else if(d instanceof A){if(!1===c.isString(g))throw Error("Feature accessor must be a string");
if(!0===d.hasField(g))n=c.toNumber(d.field(g)),d.setField(g,"++"===a.operator?n+1:n-1);else throw Error("Invalid Parameter");}else{if(c.isImmutableArray(d))throw Error("Array is Immutable");throw Error("Invalid Parameter");}w=!1===a.prefix?n:"++"===a.operator?n+1:n-1}else{d="Identifier"===a.argument.type?a.argument.name.toLowerCase():"";if(!d)throw Error("Invalid identifier");if(null!==b.localScope&&void 0!==b.localScope[d])n=c.toNumber(b.localScope[d].value),b.localScope[d]={value:"++"===a.operator?
n+1:n-1,valueset:!0,node:a},w=!1===a.prefix?n:"++"===a.operator?n+1:n-1;else if(void 0!==b.globalScope[d])n=c.toNumber(b.globalScope[d].value),b.globalScope[d]={value:"++"===a.operator?n+1:n-1,valueset:!0,node:a},w=!1===a.prefix?n:"++"===a.operator?n+1:n-1;else throw Error("Variable not recognised");}return w;case "BreakStatement":return c.breakResult;case "ContinueStatement":return c.continueResult;case "TemplateElement":return a.value?a.value.cooked:"";case "TemplateLiteral":var D="",z=0;y=0;for(d=
a.quasis;y<d.length;y++)if(g=d[y],D+=g.value?g.value.cooked:"",!1===g.tail){var u=a.expressions[z]?c.toString(h(b,a.expressions[z])):"",D=D+u;z++}return D;case "ForStatement":null!==a.init&&h(b,a.init);z={testResult:!0,lastAction:c.voidOperation};do b:{d=b;g=a;u=z;if(null!==g.test){u.testResult=h(d,g.test);if(!1===u.testResult)break b;if(!0!==u.testResult)throw Error(k.nodeErrorMessage(g,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}u.lastAction=h(d,g.body);u.lastAction===c.breakResult?u.testResult=
!1:u.lastAction instanceof c.ReturnResult?u.testResult=!1:null!==g.update&&h(d,g.update)}while(!0===z.testResult);D=z.lastAction instanceof c.ReturnResult?z.lastAction:c.voidOperation;return D;case "ForInStatement":return la(b,a);case "Identifier":return M(b,a);case "MemberExpression":return ma(b,a);case "Literal":return a.value;case "CallExpression":return na(b,a);case "UnaryExpression":return oa(b,a);case "BinaryExpression":return pa(b,a);case "LogicalExpression":return qa(b,a);case "ConditionalExpression":throw Error(k.nodeErrorMessage(a,
"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{for(d=[],g=0;g<a.elements.length;g++){var I=h(b,a.elements[g]);if(c.isFunctionParameter(I))throw Error(k.nodeErrorMessage(a,"RUNTIME","FUNCTIONCONTEXTILLEGAL"));I===c.voidOperation?d.push(null):d.push(I)}}catch(J){throw J;}return d;case "ObjectExpression":d={};for(g=0;g<a.properties.length;g++){var F=h(b,a.properties[g]);if(c.isFunctionParameter(F.value))throw Error("Illegal Argument");if(!1===c.isString(F.key))throw Error("Illegal Argument");
d[F.key.toString()]=F.value===c.voidOperation?null:F.value}var E=new x(d);E.immutable=!1;return E;case "Property":return{key:"Identifier"===a.key.type?a.key.name:h(b,a.key),value:h(b,a.value)};default:throw Error(k.nodeErrorMessage(a,"RUNTIME","UNREOGNISED"));}}catch(J){throw J;}}function la(b,a){var e=h(b,a.right);"VariableDeclaration"===a.left.type&&h(b,a.left);var f=null,d="";if("VariableDeclaration"===a.left.type){var l=a.left.declarations[0].id;"Identifier"===l.type&&(d=l.name)}else"Identifier"===
a.left.type&&(d=a.left.name);if(!d)throw Error(k.nodeErrorMessage(a,"RUNTIME","INVALIDVARIABLE"));d=d.toLowerCase();null!==b.localScope&&void 0!==b.localScope[d]&&(f=b.localScope[d]);null===f&&void 0!==b.globalScope[d]&&(f=b.globalScope[d]);if(null===f)throw Error(k.nodeErrorMessage(a,"RUNTIME","VARIABLENOTDECLARED"));if(c.isArray(e)||c.isString(e)){e=e.length;for(l=0;l<e;l++){f.value=l;d=h(b,a.body);if(d===c.breakResult)break;if(d instanceof c.ReturnResult)return d}return c.voidOperation}if(c.isImmutableArray(e)){for(l=
0;l<e.length();l++){f.value=l;d=h(b,a.body);if(d===c.breakResult)break;if(d instanceof c.ReturnResult)return d}return c.voidOperation}if(e instanceof x||e instanceof A)for(e=e.keys(),l=0;l<e.length;l++){f.value=e[l];d=h(b,a.body);if(d===c.breakResult)break;if(d instanceof c.ReturnResult)return d}else return c.voidOperation}function C(b,a,e,f){switch(a){case "\x3d":return b===c.voidOperation?null:b;case "/\x3d":return c.toNumber(e)/c.toNumber(b);case "*\x3d":return c.toNumber(e)*c.toNumber(b);case "-\x3d":return c.toNumber(e)-
c.toNumber(b);case "+\x3d":return c.isString(e)||c.isString(b)?c.toString(e)+c.toString(b):c.toNumber(e)+c.toNumber(b);case "%\x3d":return c.toNumber(e)%c.toNumber(b);default:throw Error(k.nodeErrorMessage(f,"RUNTIME","OPERATORNOTRECOGNISED"));}}function N(b,a,e){a=a.toLowerCase();switch(a){case "hasz":return b=b.hasZ,void 0===b?!1:b;case "hasm":return b=b.hasM,void 0===b?!1:b;case "spatialreference":return a=b.spatialReference._arcadeCacheId,void 0===a&&(e=!0,Object.freeze&&Object.isFrozen(b.spatialReference)&&
(e=!1),e&&(r++,a=b.spatialReference._arcadeCacheId=r)),b=new x({wkt:b.spatialReference.wkt,wkid:b.spatialReference.wkid}),void 0!==a&&(b._arcadeCacheId="SPREF"+a.toString()),b}switch(b.type){case "extent":switch(a){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return b=b[a],void 0!==b?b:null;case "type":return"Extent"}break;case "polygon":switch(a){case "rings":return a=b.cache._arcadeCacheId,void 0===a&&(r++,a=r,b.cache._arcadeCacheId=a),b=new E(b.rings,
b.spatialReference,!0===b.hasZ,!0===b.hasM,a);case "type":return"Polygon"}break;case "point":switch(a){case "x":case "y":case "z":case "m":return void 0!==b[a]?b[a]:null;case "type":return"Point"}break;case "polyline":switch(a){case "paths":return a=b.cache._arcadeCacheId,void 0===a&&(r++,a=r,b.cache._arcadeCacheId=a),b=new E(b.paths,b.spatialReference,!0===b.hasZ,!0===b.hasM,a);case "type":return"Polyline"}break;case "multipoint":switch(a){case "points":return a=b.cache._arcadeCacheId,void 0===a&&
(r++,a=r,b.cache._arcadeCacheId=a),b=new X(b.points,b.spatialReference,!0===b.hasZ,!0===b.hasM,a,1);case "type":return"Multipoint"}}throw Error(k.nodeErrorMessage(e,"RUNTIME","PROPERTYNOTFOUND"));}function ma(b,a){try{var e=h(b,a.object);if(null===e)throw Error(k.nodeErrorMessage(a,"RUNTIME","NOTFOUND"));if(!1===a.computed){if("Identifier"===a.property.type){if(e instanceof x||e instanceof A)return e.field(a.property.name);if(e instanceof K)return N(e,a.property.name,a)}throw Error(k.nodeErrorMessage(a,
"RUNTIME","INVALIDTYPE"));}var f=h(b,a.property);if(e instanceof x||e instanceof A){if(c.isString(f))return e.field(f);throw Error(k.nodeErrorMessage(a,"RUNTIME","INVALIDTYPE"));}if(e instanceof K){if(c.isString(f))return N(e,f,a);throw Error(k.nodeErrorMessage(a,"RUNTIME","INVALIDTYPE"));}if(c.isArray(e)){if(c.isNumber(f)&&isFinite(f)&&Math.floor(f)===f){0>f&&(f=e.length+f);if(f>=e.length||0>f)throw Error(k.nodeErrorMessage(a,"RUNTIME","OUTOFBOUNDS"));return e[f]}throw Error(k.nodeErrorMessage(a,
"RUNTIME","INVALIDTYPE"));}if(c.isString(e)){if(c.isNumber(f)&&isFinite(f)&&Math.floor(f)===f){0>f&&(f=e.length+f);if(f>=e.length||0>f)throw Error(k.nodeErrorMessage(a,"RUNTIME","OUTOFBOUNDS"));return e[f]}throw Error(k.nodeErrorMessage(a,"RUNTIME","INVALIDTYPE"));}if(c.isImmutableArray(e)&&c.isNumber(f)&&isFinite(f)&&Math.floor(f)===f){0>f&&(f=e.length()+f);if(f>=e.length()||0>f)throw Error(k.nodeErrorMessage(a,"RUNTIME","OUTOFBOUNDS"));return e.get(f)}throw Error(k.nodeErrorMessage(a,"RUNTIME",
"INVALIDTYPE"));}catch(d){throw d;}}function oa(b,a){try{var e=h(b,a.argument);if(c.isBoolean(e)){if("!"===a.operator)return!e;if("-"===a.operator)return-1*c.toNumber(e);if("+"===a.operator)return 1*c.toNumber(e);if("~"===a.operator)return~c.toNumber(e);throw Error(k.nodeErrorMessage(a,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("~"===a.operator)return~c.toNumber(e);if("-"===a.operator)return-1*c.toNumber(e);if("+"===a.operator)return 1*c.toNumber(e);throw Error(k.nodeErrorMessage(a,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));
}catch(f){throw f;}}function pa(b,a){try{var e=[h(b,a.left),h(b,a.right)],f=e[0],d=e[1];switch(a.operator){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return c.binaryOperator(c.toNumber(f),c.toNumber(d),a.operator);case "\x3d\x3d":return c.equalityTest(f,d);case "!\x3d":return!c.equalityTest(f,d);case "\x3c":return c.greaterThanLessThan(f,d,a.operator);case "\x3e":return c.greaterThanLessThan(f,d,a.operator);case "\x3c\x3d":return c.greaterThanLessThan(f,d,a.operator);
case "\x3e\x3d":return c.greaterThanLessThan(f,d,a.operator);case "+":return c.isString(f)||c.isString(d)?c.toString(f)+c.toString(d):c.toNumber(f)+c.toNumber(d);case "-":return c.toNumber(f)-c.toNumber(d);case "*":return c.toNumber(f)*c.toNumber(d);case "/":return c.toNumber(f)/c.toNumber(d);case "%":return c.toNumber(f)%c.toNumber(d);default:throw Error(k.nodeErrorMessage(a,"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(l){throw l;}}function qa(b,a){try{if("AssignmentExpression"===a.left.type||"UpdateExpression"===
a.left.type)throw Error(k.nodeErrorMessage(a.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===a.right.type||"UpdateExpression"===a.right.type)throw Error(k.nodeErrorMessage(a.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var e=h(b,a.left);if(c.isBoolean(e))switch(a.operator){case "||":if(!0===e)return e;var f=h(b,a.right);if(c.isBoolean(f))return f;throw Error(k.nodeErrorMessage(a,"RUNTIME","ONLYORORAND"));case "\x26\x26":if(!1===e)return e;f=h(b,a.right);
if(c.isBoolean(f))return f;throw Error(k.nodeErrorMessage(a,"RUNTIME","ONLYORORAND"));default:throw Error(k.nodeErrorMessage(a,"RUNTIME","ONLYORORAND"));}throw Error(k.nodeErrorMessage(a,"RUNTIME","ONLYBOOLEAN"));}catch(d){throw d;}}function M(b,a){var e;try{var c=a.name.toLowerCase();if(null!==b.localScope&&void 0!==b.localScope[c]){e=b.localScope[c];if(!0===e.valueset)return e.value;e.value=h(b,e.node);e.valueset=!0;return e.value}if(void 0!==b.globalScope[c]){e=b.globalScope[c];if(!0===e.valueset)return e.value;
e.value=h(b,e.node);e.valueset=!0;return e.value}throw Error(k.nodeErrorMessage(a,"RUNTIME","VARIABLENOTFOUND"));}catch(d){throw d;}}function na(b,a){try{if("Identifier"!==a.callee.type)throw Error(k.nodeErrorMessage(a,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==b.localScope&&void 0!==b.localScope[a.callee.name.toLowerCase()]){var e=b.localScope[a.callee.name.toLowerCase()];if(e.value instanceof c.NativeFunction)return e.value.fn(b,a);if(e.value instanceof G)return O(b,a,e.value.definition);throw Error(k.nodeErrorMessage(a,
"RUNTIME","NOTAFUNCTION"));}if(void 0!==b.globalScope[a.callee.name.toLowerCase()]){e=b.globalScope[a.callee.name.toLowerCase()];if(e.value instanceof c.NativeFunction)return e.value.fn(b,a);if(e.value instanceof G)return O(b,a,e.value.definition);throw Error(k.nodeErrorMessage(a,"RUNTIME","NOTAFUNCTION"));}throw Error(k.nodeErrorMessage(a,"RUNTIME","NOTFOUND"));}catch(f){throw f;}}function P(b){return null==b?"":c.isArray(b)||c.isImmutableArray(b)?"Array":c.isDate(b)?"Date":c.isString(b)?"String":
c.isBoolean(b)?"Boolean":c.isNumber(b)?"Number":b instanceof W?"Attachment":b instanceof V?"Portal":b instanceof x?"Dictionary":b instanceof A?"Feature":b instanceof ga?"Point":b instanceof ha?"Polygon":b instanceof ia?"Polyline":b instanceof fa?"Multipoint":b instanceof ea?"Extent":c.isFunctionParameter(b)?"Function":c.isFeatureSet(b)?"FeatureSet":c.isFeatureSetCollection(b)?"FeatureSetCollection":b===c.voidOperation?"":"number"===typeof b&&isNaN(b)?"Number":"Unrecognised Type"}function Q(b,a,e,
f){try{var d=h(b,a.arguments[e]);if(c.equalityTest(d,f))return h(b,a.arguments[e+1]);var l=a.arguments.length-e;return 1===l?h(b,a.arguments[e]):2===l?null:3===l?h(b,a.arguments[e+2]):Q(b,a,e+2,f)}catch(t){throw t;}}function R(b,a,e,f){try{if(!0===f)return h(b,a.arguments[e+1]);if(3===a.arguments.length-e)return h(b,a.arguments[e+2]);var d=h(b,a.arguments[e+2]);if(!1===c.isBoolean(d))throw Error("WHEN needs boolean test conditions");return R(b,a,e+2,d)}catch(l){throw l;}}function v(b,a){var e=b.length,
c=Math.floor(e/2);if(0===e)return[];if(1===e)return[b[0]];var d=v(b.slice(0,c),a);b=v(b.slice(c,e),a);for(e=[];0<d.length||0<b.length;)0<d.length&&0<b.length?(c=a(d[0],b[0]),isNaN(c)&&(c=0),0>=c?(e.push(d[0]),d=d.slice(1)):(e.push(b[0]),b=b.slice(1))):0<d.length?(e.push(d[0]),d=d.slice(1)):0<b.length&&(e.push(b[0]),b=b.slice(1));return e}function S(b,a,e){try{var f=b.body;if(e.length!==b.params.length)throw Error("Invalid Parameter calls to function.");for(var d=0;d<e.length;d++)a.localScope[b.params[d].name.toLowerCase()]=
{value:e[d],valueset:!0,node:null};var l=h(a,f);if(l instanceof c.ReturnResult)return l.value;if(l===c.breakResult)throw Error("Cannot Break from a Function");if(l===c.continueResult)throw Error("Cannot Continue from a Function");return l instanceof c.ImplicitResult?l.value:l}catch(t){throw t;}}function O(b,a,c){return q(b,a,function(a,d,e){a={spatialReference:b.spatialReference,globalScope:b.globalScope,depthCounter:b.depthCounter+1,console:b.console,lrucache:b.lrucache,localScope:{}};if(64<a.depthCounter)throw Error("Exceeded maximum function depth");
return S(c,a,e)})}function T(b){return function(){var a={spatialReference:b.context.spatialReference,console:b.context.console,lrucache:b.context.lrucache,localScope:{},depthCounter:b.context.depthCounter+1,globalScope:b.context.globalScope};if(64<a.depthCounter)throw Error("Exceeded maximum function depth");return S(b.definition,a,arguments)}}function ra(b){console.log(b)}Object.defineProperty(m,"__esModule",{value:!0});m.findFunctionCalls=m.referencesFunction=m.referencesMember=m.validateScript=
m.extractFieldLiterals=m.executeScript=m.extend=m.functionHelper=void 0;var r=0,p={};Y.registerFunctions(p,q);da.registerFunctions(p,q);ba.registerFunctions(p,q);Z.registerFunctions(p,q);ca.registerFunctions(p,q);aa.registerFunctions(p,q);p["typeof"]=function(b,a){return q(b,a,function(a,b,d){c.pcCheck(d,1,1);a=P(d[0]);if("Unrecognised Type"===a)throw Error("Unrecognised Type");return a})};p.iif=function(b,a){try{c.pcCheck(null===a.arguments?[]:a.arguments,3,3);var e=h(b,a.arguments[0]);if(!1===c.isBoolean(e))throw Error("IF Function must have a boolean test condition");
var f=h(b,a.arguments[1]),d=h(b,a.arguments[2]);return!0===e?f:d}catch(l){throw l;}};p.decode=function(b,a){try{if(2>a.arguments.length)throw Error("Missing Parameters");if(2===a.arguments.length)return h(b,a.arguments[1]);if(0===(a.arguments.length-1)%2)throw Error("Must have a default value result.");var c=h(b,a.arguments[0]);return Q(b,a,1,c)}catch(f){throw f;}};p.when=function(b,a){try{if(3>a.arguments.length)throw Error("Missing Parameters");if(0===a.arguments.length%2)throw Error("Must have a default value result.");
var e=h(b,a.arguments[0]);if(!1===c.isBoolean(e))throw Error("WHEN needs boolean test conditions");return R(b,a,0,e)}catch(f){throw f;}};p.top=function(b,a){return q(b,a,function(a,b,d){c.pcCheck(d,2,2);if(c.isArray(d[0]))return c.toNumber(d[1])>=d[0].length?d[0].slice(0):d[0].slice(0,c.toNumber(d[1]));if(c.isImmutableArray(d[0]))return c.toNumber(d[1])>=d[0].length()?d[0].slice(0):d[0].slice(0,c.toNumber(d[1]));throw Error("Top cannot accept this parameter type");})};p.first=function(b,a){return q(b,
a,function(a,b,d){c.pcCheck(d,1,1);return c.isArray(d[0])?0===d[0].length?null:d[0][0]:c.isImmutableArray(d[0])?0===d[0].length()?null:d[0].get(0):null})};p.sort=function(b,a){return q(b,a,function(a,b,d){c.pcCheck(d,1,2);a=d[0];c.isImmutableArray(a)&&(a=a.toArray());if(!1===c.isArray(a))throw Error("Illegal Argument");if(1<d.length){if(!1===c.isFunctionParameter(d[1]))throw Error("Illegal Argument");var e=T(d[1]);return a=v(a,function(a,b){return e(a,b)})}if(0===a.length)return[];d={};for(b=0;b<
a.length;b++){var f=P(a[b]);""!==f&&(d[f]=!0)}if(!0===d.Array||!0===d.Dictionary||!0===d.Feature||!0===d.Point||!0===d.Polygon||!0===d.Polyline||!0===d.Multipoint||!0===d.Extent||!0===d.Function)return a.slice(0);b=0;var f="",h;for(h in d)b++,f=h;return a=1<b||"String"===f?v(a,function(a,b){if(null===a||void 0===a||a===c.voidOperation)return null===b||void 0===b||b===c.voidOperation?0:1;if(null===b||void 0===b||b===c.voidOperation)return-1;a=c.toString(a);b=c.toString(b);return a<b?-1:a===b?0:1}):
"Number"===f?v(a,function(a,b){return a-b}):"Boolean"===f?v(a,function(a,b){return a===b?0:b?-1:1}):"Date"===f?v(a,function(a,b){return b-a}):a.slice(0)})};for(var U in p)p[U]={value:new c.NativeFunction(p[U]),valueset:!0,node:null};var w=function(){};w.prototype=p;w.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};w.prototype.pi={value:Math.PI,valueset:!0,node:null};m.functionHelper={fixSpatialReference:c.fixSpatialReference,parseArguments:L,standardFunction:q};m.extend=
function(b){for(var a={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:q,evaluateIdentifier:M,arcadeCustomFunctionHandler:T},e=0;e<b.length;e++)b[e].registerFunctions(a);for(var f in a.functions)p[f]={value:new c.NativeFunction(a.functions[f]),valueset:!0,node:null},w.prototype[f]=p[f];for(e=0;e<a.signatures.length;e++)k.addFunctionDeclaration(a.signatures[e],"async")};m.executeScript=function(b,a){var e=a.spatialReference;if(null===e||void 0===e)e=new ja({wkid:102100});var f=
a.vars,d=a.customfunctions,l=new w;f||(f={});d||(d={});var k=new x({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});k.immutable=!1;l.textformatting={value:k,valueset:!0,node:null};for(var m in d)l[m]={value:new c.NativeFunction(d[m]),native:!0,valueset:!0,node:null};for(m in f)l[m]=f[m]&&"esri.Graphic"===f[m].declaredClass?{value:A.createFromGraphic(f[m]),valueset:!0,node:null}:{value:f[m],valueset:!0,node:null};b=h({spatialReference:e,globalScope:l,localScope:null,
console:a.console?a.console:ra,lrucache:a.lrucache,depthCounter:1},b.body[0].body);b instanceof c.ReturnResult&&(b=b.value);b instanceof c.ImplicitResult&&(b=b.value);b===c.voidOperation&&(b=null);if(b===c.breakResult)throw Error("Cannot return BREAK");if(b===c.continueResult)throw Error("Cannot return CONTINUE");if(b instanceof G)throw Error("Cannot return FUNCTION");if(b instanceof c.NativeFunction)throw Error("Cannot return FUNCTION");return b};m.extractFieldLiterals=function(b,a){void 0===a&&
(a=!1);return k.findFieldLiterals(b)};m.validateScript=function(b,a){return k.validateScript(b,a,"simple")};m.referencesMember=function(b,a){return k.referencesMember(b,a)};m.referencesFunction=function(b,a){return k.referencesFunction(b,a)};m.findFunctionCalls=function(b){return k.findFunctionCalls(b)}});