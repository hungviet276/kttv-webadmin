// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports ../ArcadePortal ../Dictionary ../Feature ../languageUtils ../featureset/support/shared".split(" "),function(q,m,p,l,k,d,n){Object.defineProperty(m,"__esModule",{value:!0});m.registerFunctions=void 0;m.registerFunctions=function(h,g){h.portal=function(b,e){return g(b,e,function(c,f,a){d.pcCheck(a,1,1);return new p(d.toString(a[0]))})};h.trim=function(b,e){return g(b,e,function(c,f,a){d.pcCheck(a,1,1);return d.toString(a[0]).trim()})};h.upper=function(b,e){return g(b,e,function(c,
f,a){d.pcCheck(a,1,1);return d.toString(a[0]).toUpperCase()})};h.proper=function(b,e){return g(b,e,function(c,f,a){d.pcCheck(a,1,2);c=1;2===a.length&&"firstword"===d.toString(a[1]).toLowerCase()&&(c=2);f=/\s/;a=d.toString(a[0]);for(var b="",e=!0,h=0;h<a.length;h++){var g=a[h];f.test(g)?1===c&&(e=!0):g.toUpperCase()!==g.toLowerCase()&&(e?(g=g.toUpperCase(),e=!1):g=g.toLowerCase());b+=g}return b})};h.lower=function(b,e){return g(b,e,function(c,f,a){d.pcCheck(a,1,1);return d.toString(a[0]).toLowerCase()})};
h.guid=function(b,e){return g(b,e,function(c,f,a){d.pcCheck(a,0,1);if(0<a.length)switch(d.toString(a[0]).toLowerCase()){case "digits":return d.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return d.generateUUID();case "digits-hyphen-parentheses":return"("+d.generateUUID()+")"}return"{"+d.generateUUID()+"}"})};h.console=function(b,e){return g(b,e,function(c,f,a){0!==a.length&&(1===a.length?b.console(d.toString(a[0])):b.console(d.toString(a)));return d.voidOperation})};
h.mid=function(b,e){return g(b,e,function(c,f,a){d.pcCheck(a,2,3);c=d.toNumber(a[1]);if(isNaN(c))return"";0>c&&(c=0);if(2===a.length)return d.toString(a[0]).substr(c);f=d.toNumber(a[2]);if(isNaN(f))return"";0>f&&(f=0);return d.toString(a[0]).substr(c,f)})};h.find=function(b,e){return g(b,e,function(c,f,a){d.pcCheck(a,2,3);c=0;if(2<a.length){c=d.toNumber(d.defaultUndefined(a[2],0));if(isNaN(c))return-1;0>c&&(c=0)}return d.toString(a[1]).indexOf(d.toString(a[0]),c)})};h.left=function(b,e){return g(b,
e,function(c,f,a){d.pcCheck(a,2,2);c=d.toNumber(a[1]);if(isNaN(c))return"";0>c&&(c=0);return d.toString(a[0]).substr(0,c)})};h.right=function(b,e){return g(b,e,function(c,f,a){d.pcCheck(a,2,2);c=d.toNumber(a[1]);if(isNaN(c))return"";0>c&&(c=0);return d.toString(a[0]).substr(-1*c,c)})};h.split=function(b,e){return g(b,e,function(c,f,a){d.pcCheck(a,2,4);c=d.toNumber(d.defaultUndefined(a[2],-1));f=d.toBoolean(d.defaultUndefined(a[3],!1));-1===c||null===c||!0===f?a=d.toString(a[0]).split(d.toString(a[1])):
(isNaN(c)&&(c=-1),-1>c&&(c=-1),a=d.toString(a[0]).split(d.toString(a[1]),c));if(!1===f)return a;f=[];for(var b=0;b<a.length&&!(-1!==c&&f.length>=c);b++)""!==a[b]&&void 0!==a[b]&&f.push(a[b]);return f})};h.text=function(b,e){return g(b,e,function(c,f,a){d.pcCheck(a,1,2);return d.toStringExplicit(a[0],a[1])})};h.concatenate=function(b,e){return g(b,e,function(c,f,a){c=[];if(1>a.length)return"";if(d.isArray(a[0])){f=d.defaultUndefined(a[2],"");for(var b=0;b<a[0].length;b++)c[b]=d.toStringExplicit(a[0][b],
f);return 1<a.length?c.join(a[1]):c.join("")}if(d.isImmutableArray(a[0])){f=d.defaultUndefined(a[2],"");for(b=0;b<a[0].length();b++)c[b]=d.toStringExplicit(a[0].get(b),f);return 1<a.length?c.join(a[1]):c.join("")}for(b=0;b<a.length;b++)c[b]=d.toStringExplicit(a[b]);return c.join("")})};h.reverse=function(b,e){return g(b,e,function(c,b,a){d.pcCheck(a,1,1);if(d.isArray(a[0]))return c=a[0].slice(0),c.reverse(),c;if(d.isImmutableArray(a[0]))return c=a[0].toArray().slice(0),c.reverse(),c;throw Error("Invalid Parameter");
})};h.replace=function(b,e){return g(b,e,function(c,b,a){d.pcCheck(a,3,4);c=d.toString(a[0]);b=d.toString(a[1]);var f=d.toString(a[2]);return(4===a.length?d.toBoolean(a[3]):1)?d.multiReplace(c,b,f):c.replace(b,f)})};h.schema=function(b,d){return g(b,d,function(c,d,a){if(a[0]instanceof k)return(c=a[0].schema())?l.convertObjectToArcadeDictionary(c):null;throw Error("Invalid Parameter");})};h.subtypes=function(b,e){return g(b,e,function(c,b,a){d.pcCheck(a,1,1);if(a[0]instanceof k)return(c=a[0].subtypes())?
l.convertObjectToArcadeDictionary(c):null;throw Error("Invalid Parameter");})};h.subtypecode=function(b,e){return g(b,e,function(c,b,a){d.pcCheck(a,1,1);if(a[0]instanceof k){b=a[0].subtypes();if(!b)return null;if(b.subtypeField&&a[0].hasField(b.subtypeField))for(a=a[0].field(b.subtypeField),c=0,b=b.subtypes;c<b.length;c++){var f=b[c];if(f.code===a)return f.code}return null}throw Error("Invalid Parameter");})};h.subtypename=function(b,e){return g(b,e,function(c,b,a){d.pcCheck(a,1,1);if(a[0]instanceof
k){b=a[0].subtypes();if(!b)return"";if(b.subtypeField&&a[0].hasField(b.subtypeField))for(a=a[0].field(b.subtypeField),c=0,b=b.subtypes;c<b.length;c++){var e=b[c];if(e.code===a)return e.name}return""}throw Error("Invalid Parameter");})};h.domain=function(b,e){return g(b,e,function(c,b,a){d.pcCheck(a,2,3);if(a[0]instanceof k)return(c=a[0].fullDomain(d.toString(a[1]),void 0===a[2]?void 0:d.toNumber(a[2])))&&c.domain?"coded-value"===c.domain.type||"codedValue"===c.domain.type?l.convertObjectToArcadeDictionary({type:"codedValue",
name:c.domain.name,dataType:n.layerFieldEsriConstants[c.field.type],codedValues:c.domain.codedValues.map(function(a){return{name:a.name,code:a.code}})}):l.convertObjectToArcadeDictionary({type:"range",name:c.domain.name,dataType:n.layerFieldEsriConstants[c.field.type],min:c.domain.min,max:c.domain.max}):null;throw Error("Invalid Parameter");})};h.domainname=function(b,e){return g(b,e,function(c,b,a){d.pcCheck(a,2,4);if(a[0]instanceof k)return a[0].domainValueLookup(d.toString(a[1]),a[2],void 0===
a[3]?void 0:d.toNumber(a[3]));throw Error("Invalid Parameter");})};h.domaincode=function(b,e){return g(b,e,function(c,b,a){d.pcCheck(a,2,4);if(a[0]instanceof k)return a[0].domainCodeLookup(d.toString(a[1]),a[2],void 0===a[3]?void 0:d.toNumber(a[3]));throw Error("Invalid Parameter");})};h.urlencode=function(b,e){return g(b,e,function(c,b,a){d.pcCheck(a,1,1);if(null===a[0])return"";if(a[0]instanceof l){c="";b=0;for(var e=a[0].keys();b<e.length;b++){var f=e[b],g=a[0].field(f);""!==c&&(c+="\x26");c=null===
g?c+(encodeURIComponent(f)+"\x3d"):c+(encodeURIComponent(f)+"\x3d"+encodeURIComponent(g))}return c}return encodeURIComponent(d.toString(a[0]))})}}});