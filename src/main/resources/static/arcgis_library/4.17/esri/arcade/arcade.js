// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports ./arcadeCompiler ./arcadeRuntime ./languageUtils ./parser ./treeAnalysis ../core/has ../core/promiseUtils ../intl/moment @dojo/framework/shim/Promise".split(" "),function(d,c,g,f,J,k,l,n,m,K){function L(a,b){if(null===e)throw Error("Async Arcade must be enabled for this script");return n("csp-restrictions")||!1===M?function(b){return e.executeScript(a,b)}:g.compileScript(a,b,!0)}function z(a,b){void 0===b&&(b=[]);return k.parseScript(a,b)}function A(a,b){if(!0===b.useAsync||
!0===a.isAsync){if(null===e)throw Error("Async Arcade must be enabled for this script");return e.executeScript(a,b)}return f.executeScript(a,b)}function B(a,b){return f.referencesMember(a,b)}function p(a,b){void 0===b&&(b=[]);void 0===a.usesGeometry&&l.findScriptDependencies(a,b);return!0===a.usesGeometry}function C(){return q?q:q=m.all([new Promise(function(a,b){d(["../geometry/geometryEngine"],a,b)}),new Promise(function(a,b){d(["./functions/geomsync"],a,b)})]).then(function(a){var b=a[0];a=a[1];
r=!0;a.setGeometryEngine(b);return!0})}function t(){return null!==u?u:u=g.enableAsyncSupport().then(function(){return new Promise(function(a,b){d(["./arcadeAsyncRuntime"],a,b)})}).then(function(a){e=a;a=0;for(var b=v;a<b.length;a++){var c=b[a];e.extend(c);g.extend(c,"async")}v=null;return!0})}function D(){return e?!0:!1}function E(){return w?w:w=t().then(function(){return m.all([new Promise(function(a,b){d(["./featureSetUtils"],a,b)}),new Promise(function(a,b){d(["./functions/featuresetbase"],a,b)}),
new Promise(function(a,b){d(["./functions/featuresetgeom"],a,b)}),new Promise(function(a,b){d(["./functions/featuresetstats"],a,b)}),new Promise(function(a,b){d(["./functions/featuresetstring"],a,b)})]).then(function(a){var b=a[1],c=a[2],F=a[3],d=a[4];G=a[0];e.extend([b,c,F,d]);g.extend([b,c,F,d],"async");return x=!0})})}function H(a,b){void 0===b&&(b=[]);void 0===a.usesFeatureSet&&l.findScriptDependencies(a,b);return!0===a.usesFeatureSet}function N(a,b){if(b)for(var c=0;c<b.length;c++)if(B(a,b[c]))return!0;
return!1}function I(){return null!==y?y:y=K.loadMoment().then(function(a){J.MomentLibrary.Moment=a;return!0})}Object.defineProperty(c,"__esModule",{value:!0});c.load=c.featureSetUtils=c.scriptTouchesGeometry=c.loadScriptDependencies=c.scriptIsAsync=c.scriptUsesFeatureSet=c.enableFeatureSetSupport=c.isGeometryEnabled=c.isAsyncEnabled=c.isFeatureSetSupportEnabled=c.enableAsyncSupport=c.enableGeometrySupport=c.scriptUsesGeometryEngine=c.extractFieldLiterals=c.referencesFunction=c.referencesMember=c.executeScript=
c.parseAndExecuteScript=c.scriptCheck=c.validateScript=c.parseScript=c.extend=c.compileScript=void 0;var M=function(){if(n("csp-restrictions"))return!1;try{return(new Function("function* test() {}; return true"))()}catch(a){return!1}}(),x=!1,r=!1,e=null,v=[];c.compileScript=function(a,b){return!0===b.useAsync||!0===a.isAsync?L(a,b):n("csp-restrictions")?function(b){return f.executeScript(a,b)}:g.compileScript(a,b)};c.extend=function(a){f.extend(a);g.extend(a,"sync");null===e?v.push(a):(g.extend(a,
"async"),e.extend(a))};c.parseScript=z;c.validateScript=function(a,b,c){void 0===c&&(c="");return k.validateScript(a,b,c)};c.scriptCheck=function(a,b,c,d){void 0===d&&(d="");return k.scriptCheck(a,b,c,d)};c.parseAndExecuteScript=function(a,b,c){void 0===c&&(c=[]);a=k.parseScript(a,c);return A(a,b)};c.executeScript=A;c.referencesMember=B;c.referencesFunction=function(a,b){return f.referencesFunction(a,b)};c.extractFieldLiterals=function(a,b){void 0===b&&(b=!1);return k.extractFieldLiterals(a,b)};c.scriptUsesGeometryEngine=
p;var q=null;c.enableGeometrySupport=C;var u=null;c.enableAsyncSupport=t;c.isFeatureSetSupportEnabled=function(){return x};c.isAsyncEnabled=D;c.isGeometryEnabled=function(){return r};var w=null;c.enableFeatureSetSupport=E;c.scriptUsesFeatureSet=H;c.scriptIsAsync=function(a,b){void 0===b&&(b=[]);void 0===a.isAsync&&l.findScriptDependencies(a,b);return!0===a.isAsync};c.loadScriptDependencies=function(a,b,c,d){void 0===c&&(c=[]);void 0===d&&(d=!1);return m.create(function(e,g){var f="string"===typeof a?
z(a):a,h=[];h.push(I());f&&(!1===r&&(p(f)||d)&&h.push(C()),!1===D()&&(!0===f.isAsync||b)&&h.push(t()),!1===x&&(H(f)||N(f,c))&&h.push(E()));h?m.all(h).then(function(){e(!0)},g):e(!0)})};c.scriptTouchesGeometry=function(a){if(p(a))return!0;a=l.findFunctionCalls(a);return-1<a.indexOf("geometry")||-1<a.indexOf("feature")?!0:!1};var G=null;c.featureSetUtils=function(){return G};c.load=I;var y=null});