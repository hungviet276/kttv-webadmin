// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define(["require","exports","./jsonUtils"],function(M,a,u){function k(c,b){return Math.round((b-c.translate[0])/c.scale[0])}function q(c,b){return Math.round((c.translate[1]-b)/c.scale[1])}function w(c,b,d){for(var e=[],a,h,v,l,g=0;g<d.length;g++){var m=d[g];if(0<g){if(v=k(c,m[0]),l=q(c,m[1]),v!==a||l!==h)e.push(b(m,v-a,l-h)),a=v,h=l}else a=k(c,m[0]),h=q(c,m[1]),e.push(b(m,a,h))}return 0<e.length?e:null}function B(c,b,d,e){return w(c,d?e?r:g:e?g:t,b)}function C(c,b,d,e){var a=[];d=d?e?r:g:e?g:t;for(e=
0;e<b.length;e++){var h=w(c,d,b[e]);h&&3<=h.length&&a.push(h)}return a.length?a:null}function D(c,b,d,a){var e=[];d=d?a?r:g:a?g:t;for(a=0;a<b.length;a++){var h=w(c,d,b[a]);h&&2<=h.length&&e.push(h)}return e.length?e:null}function n(c,b){return b*c.scale[0]+c.translate[0]}function p(c,b){return c.translate[1]-b*c.scale[1]}function x(c,b,d){var a=Array(d.length);if(!d.length)return a;var f=c.scale,h=f[0],f=f[1],g=n(c,d[0][0]);c=p(c,d[0][1]);a[0]=b(d[0],g,c);for(var l=1;l<d.length;l++){var k=d[l],g=
g+k[0]*h;c-=k[1]*f;a[l]=b(k,g,c)}return a}function y(c,b,d){for(var a=Array(d.length),f=0;f<d.length;f++)a[f]=x(c,b,d[f]);return a}function E(c,b,d,a){return x(c,d?a?r:g:a?g:t,b)}function F(c,b,d,a){return y(c,d?a?r:g:a?g:t,b)}function G(c,b,d,a){return y(c,d?a?r:g:a?g:t,b)}function z(c,b,d){var a=d[0],f=a[0],a=a[1],h=Math.min(f,b[0]),g=Math.min(a,b[1]),l=Math.max(f,b[2]);b=Math.max(a,b[3]);for(var k=1;k<d.length;k++){var m=d[k],n=m[0],m=m[1],f=f+n,a=a+m;0>n&&(h=Math.min(h,f));0<n&&(l=Math.max(l,
f));0>m?g=Math.min(g,a):0<m&&(b=Math.max(b,a))}c[0]=h;c[1]=g;c[2]=l;c[3]=b;return c}function A(c,b){if(!b.length)return null;c[0]=c[1]=Number.POSITIVE_INFINITY;c[2]=c[3]=Number.NEGATIVE_INFINITY;for(var a=0;a<b.length;a++)z(c,c,b[a]);return c}function H(c,b,a,e,f){b.xmin=k(c,a.xmin);b.ymin=q(c,a.ymin);b.xmax=k(c,a.xmax);b.ymax=q(c,a.ymax);b!==a&&(e&&(b.zmin=a.zmin,b.zmax=a.zmax),f&&(b.mmin=a.mmin,b.mmax=a.mmax));return b}function I(c,b,a,e,f){b.points=B(c,a.points,e,f);return b}function J(c,b,a,e,
f){b.x=k(c,a.x);b.y=q(c,a.y);b!==a&&(e&&(b.z=a.z),f&&(b.m=a.m));return b}function K(c,b,a,e,f){c=C(c,a.rings,e,f);if(!c)return null;b.rings=c;return b}function L(c,b,a,e,f){c=D(c,a.paths,e,f);if(!c)return null;b.paths=c;return b}Object.defineProperty(a,"__esModule",{value:!0});a.unquantizePolyline=a.unquantizePolygon=a.unquantizePoint=a.unquantizeMultipoint=a.unquantizeExtent=a.quantizeGeometry=a.quantizePolyline=a.quantizePolygon=a.quantizePoint=a.quantizeMultipoint=a.quantizeExtent=a.getQuantizedBoundsRings=
a.getQuantizedBoundsPaths=a.getQuantizedBoundsPoints=a.getQuantizedBoundsCoordsArrayArray=a.getQuantizedBoundsCoordsArray=a.unquantizeRings=a.unquantizePaths=a.unquantizePoints=a.unquantizeBounds=a.unquantizeCoordsArrayArray=a.unquantizeCoordsArray=a.unquantizeY=a.unquantizeX=a.quantizePaths=a.quantizeRings=a.quantizePoints=a.quantizeBounds=a.quantizeY=a.quantizeX=a.equals=a.toQuantizationTransform=void 0;var t=function(c,b,a){return[b,a]},g=function(c,b,a){return[b,a,c[2]]},r=function(c,b,a){return[b,
a,c[2],c[3]]};a.toQuantizationTransform=function(c){return c?{originPosition:"upper-left"===c.originPosition?"upperLeft":"lower-left"===c.originPosition?"lowerLeft":c.originPosition,scale:[c.tolerance,c.tolerance],translate:[c.extent.xmin,c.extent.ymax]}:null};a.equals=function(c,b){if(c===b||null==c&&null==b)return!0;if(null==c||null==b)return!1;var a,e,f,g;c&&"upperLeft"===c.originPosition?(a=c.translate[0],e=c.translate[1],c=c.scale[0]):(a=c.extent.xmin,e=c.extent.ymax,c=c.tolerance);b&&"upperLeft"===
b.originPosition?(f=b.translate[0],g=b.translate[1],b=b.scale[0]):(f=b.extent.xmin,g=b.extent.ymax,b=b.tolerance);return a===f&&e===g&&c===b};a.quantizeX=k;a.quantizeY=q;a.quantizeBounds=function(a,b,d){b[0]=k(a,d[0]);b[3]=q(a,d[1]);b[2]=k(a,d[2]);b[1]=q(a,d[3]);return b};a.quantizePoints=B;a.quantizeRings=C;a.quantizePaths=D;a.unquantizeX=n;a.unquantizeY=p;a.unquantizeCoordsArray=x;a.unquantizeCoordsArrayArray=y;a.unquantizeBounds=function(a,b,d){return d?(b[0]=n(a,d[0]),b[1]=p(a,d[3]),b[2]=n(a,
d[2]),b[3]=p(a,d[1]),b):[n(a,b[0]),p(a,b[3]),n(a,b[2]),p(a,b[1])]};a.unquantizePoints=E;a.unquantizePaths=F;a.unquantizeRings=G;a.getQuantizedBoundsCoordsArray=z;a.getQuantizedBoundsCoordsArrayArray=A;a.getQuantizedBoundsPoints=function(a){var b=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return z(b,b,a)};a.getQuantizedBoundsPaths=function(a){return A([0,0,0,0],a)};a.getQuantizedBoundsRings=function(a){return A([0,0,0,0],a)};a.quantizeExtent=
H;a.quantizeMultipoint=I;a.quantizePoint=J;a.quantizePolygon=K;a.quantizePolyline=L;a.quantizeGeometry=function(a,b){return a&&b?u.isPoint(b)?J(a,{},b,!1,!1):u.isPolyline(b)?L(a,{},b,!1,!1):u.isPolygon(b)?K(a,{},b,!1,!1):u.isMultipoint(b)?I(a,{},b,!1,!1):u.isExtent(b)?H(a,{},b,!1,!1):null:null};a.unquantizeExtent=function(a,b,d,e,f){b.xmin=n(a,d.xmin);b.ymin=p(a,d.ymin);b.xmax=n(a,d.xmax);b.ymax=p(a,d.ymax);b!==d&&(e&&(b.zmin=d.zmin,b.zmax=d.zmax),f&&(b.mmin=d.mmin,b.mmax=d.mmax));return b};a.unquantizeMultipoint=
function(a,b,d,e,f){b.points=E(a,d.points,e,f);return b};a.unquantizePoint=function(a,b,d,e,f){b.x=n(a,d.x);b.y=p(a,d.y);b!==d&&(e&&(b.z=d.z),f&&(b.m=d.m));return b};a.unquantizePolygon=function(a,b,d,e,f){b.rings=G(a,d.rings,e,f);return b};a.unquantizePolyline=function(a,b,d,e,f){b.paths=F(a,d.paths,e,f);return b}});