// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports ../../../core/libs/gl-matrix-2/mat3f64 ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ./georeference".split(" "),function(C,d,z,x,A,B){Object.defineProperty(d,"__esModule",{value:!0});d.boxFaceOrder=d.convertUnitGeometry=d.createUnitSizePlane=d.createUnitSizeCylinder=d.createUnitSizeSphere=d.createUnitSizeBox=void 0;d.createUnitSizeBox=function(){for(var a=y.faceDescriptions,f=y.faceVertexOffsets,q=y.uvScales,b=4*a.length,g=new Float64Array(3*b),
c=new Float32Array(3*b),b=new Float32Array(2*b),h=new Uint32Array(6*a.length),w=0,m=0,l=0,e=0,d=0;d<a.length;d++){for(var u=a[d],k=w/3,n=0,p=f;n<p.length;n++){var r=p[n];h[e++]=k+r}k=u.corners;for(n=0;4>n;n++){p=k[n];r=0;b[l++]=.25*q[n][0]+u.uvOrigin[0];b[l++]=u.uvOrigin[1]-.25*q[n][1];for(var v=0;3>v;v++)0!==u.axis[v]?(g[w++]=.5*u.axis[v],c[m++]=u.axis[v]):(g[w++]=.5*p[r++],c[m++]=0)}}return{position:g,normal:c,uv:b,faces:h}};d.createUnitSizeSphere=function(a){void 0===a&&(a=0);a=Math.round(8*Math.pow(2,
a));for(var f=2*a,q=(a-1)*(f+1)+2*f,b=new Float64Array(3*q),g=new Float32Array(3*q),q=new Float32Array(2*q),c=new Uint32Array((a-1)*f*6),d=0,w=0,m=0,l=0,e=0;e<=a;e++){var k=e/a*Math.PI+.5*Math.PI,u=Math.cos(k);h[2]=Math.sin(k);for(var t=(k=0===e||e===a)?f-1:f,n=0;n<=t;n++){var p=n/t*2*Math.PI;h[0]=-Math.sin(p)*u;h[1]=Math.cos(p)*u;for(p=0;3>p;p++)b[d]=.5*h[p],g[d]=h[p],++d;q[w++]=(n+(k?.5:0))/f;q[w++]=e/a;0!==e&&n!==f&&(e!==a&&(c[m++]=l,c[m++]=l+1,c[m++]=l-f),1!==e&&(c[m++]=l,c[m++]=l-f,c[m++]=l-
f-1));l++}}return{position:b,normal:g,uv:q,faces:c}};d.createUnitSizeCylinder=function(a){void 0===a&&(a=0);a=Math.round(16*Math.pow(2,a));for(var f=4*(a+1)+2*a,q=new Float64Array(3*f),b=new Float32Array(3*f),f=new Float32Array(2*f),g=new Uint32Array(12*a),c=0,d=0,k=0,m=0,l=0,e=0;5>=e;e++)for(var t=0===e||5===e,u=1>=e||4<=e,x=2===e||4===e,n=t?a-1:a,p=0;p<=n;p++){var r=p/n*2*Math.PI,v=t?0:.5;h[0]=v*Math.sin(r);h[1]=v*-Math.cos(r);h[2]=2>=e?.5:-.5;for(r=0;3>r;r++)q[c++]=h[r],u?b[d++]=2===r?1>=e?1:-1:
0:b[d++]=2===r?0:h[r]/v;f[k++]=(p+(t?.5:0))/a;1>=e?f[k++]=1*e/3:3>=e?f[k++]=1*(e-2)/3+1/3:f[k++]=1*(e-4)/3+2/3;x||0===e||p===a||(5!==e&&(g[m++]=l,g[m++]=l+1,g[m++]=l-a),1!==e&&(g[m++]=l,g[m++]=l-a,g[m++]=l-a-1));l++}return{position:q,normal:b,uv:f,faces:g}};d.createUnitSizePlane=function(a){a=t.facingAxisOrderSwap[a];for(var f=t.position,d=t.normal,b=new Float64Array(f.length),g=new Float32Array(d.length),c=0,h=0;4>h;h++)for(var k=c,m=0;3>m;m++){var l=a[m],e=Math.abs(l)-1,l=0<=l?1:-1;b[c]=f[k+e]*
l;g[c]=d[k+e]*l;c++}return{position:b,normal:g,uv:new Float32Array(t.uv),faces:new Uint32Array(t.faces)}};var t={position:[-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],normal:[0,0,1,0,0,1,0,0,1,0,0,1],uv:[0,1,1,1,1,0,0,0],faces:[0,1,2,0,2,3],facingAxisOrderSwap:{east:[3,1,2],west:[-3,-1,2],north:[-1,3,2],south:[1,-3,2],up:[1,2,3],down:[1,-2,-3]}};d.convertUnitGeometry=function(a,f,d){for(var b=0;b<a.position.length;b+=3)a.position[b+2]+=.5;b=d&&d.size;if(null!=b){b="number"===typeof b?[b,b,b]:[null!=b.width?
b.width:1,null!=b.depth?b.depth:1,null!=b.height?b.height:1];k[0]=b[0];k[4]=b[1];k[8]=b[2];for(var g=0;g<a.position.length;g+=3){for(var c=0;3>c;c++)h[c]=a.position[g+c];x.vec3.transformMat3(h,h,k);for(c=0;3>c;c++)a.position[g+c]=h[c]}if(b[0]!==b[1]||b[1]!==b[2])for(k[0]=1/b[0],k[4]=1/b[1],k[8]=1/b[2],g=0;g<a.normal.length;g+=3){for(c=0;3>c;c++)h[c]=a.normal[g+c];x.vec3.transformMat3(h,h,k);x.vec3.normalize(h,h);for(c=0;3>c;c++)a.normal[g+c]=h[c]}}b=B.georeference(a,f,d);return{vertexAttributes:{position:b.position,
normal:b.normal,uv:a.uv},components:[{faces:a.faces,material:d&&d.material||null}],spatialReference:f.spatialReference}};var y={faceDescriptions:[{axis:[0,-1,0],uvOrigin:[0,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[1,0,0],uvOrigin:[.25,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,1,0],uvOrigin:[.5,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[-1,0,0],uvOrigin:[.75,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[0,0,1],uvOrigin:[0,.375],corners:[[-1,-1],[1,-1],[1,1],[-1,
1]]},{axis:[0,0,-1],uvOrigin:[0,.875],corners:[[-1,1],[1,1],[1,-1],[-1,-1]]}],uvScales:[[0,0],[1,0],[1,1],[0,1]],faceVertexOffsets:[0,1,2,0,2,3]};d.boxFaceOrder={south:0,east:1,north:2,west:3,up:4,down:5};var h=A.vec3f64.create(),k=z.mat3f64.create()});