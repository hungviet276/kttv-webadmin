// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports ../../../core/Logger ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ./projection ../../../views/3d/support/pointUtils ../../../views/3d/support/projectionUtils".split(" "),function(w,h,t,u,k,e,n,p){function q(c,e,b){void 0===b&&(b=k.vec3f64.ZEROS);if(c)for(var d=0;d<c.length;d+=3){for(var a=0;3>a;a++)f[a]=c[d+a]-b[a];u.vec3.scale(f,f,e);for(a=0;3>a;a++)c[d+a]=f[a]+b[a]}}Object.defineProperty(h,"__esModule",{value:!0});h.scale=void 0;var v=t.getLogger("esri.geometry.support.meshUtils.scale");
h.scale=function(c,f,b){if(c.vertexAttributes&&c.vertexAttributes.position){var d=c.spatialReference,a=b&&b.origin||c.extent.center;if(d.isWGS84||d.isWebMercator&&(!b||!1!==b.geographic)){b=c.spatialReference;d=r;n.pointToVector(a,d,p.SphericalECEFSpatialReference)||n.pointToVector(c.extent.center,d,p.SphericalECEFSpatialReference);var a=c.vertexAttributes.position,l=c.vertexAttributes.normal,m=c.vertexAttributes.tangent,g=new Float64Array(a.length),h=new Float32Array(l?l.length:0),k=new Float32Array(m?
m.length:0);e.projectToECEF(a,b,g);l&&e.projectNormalToECEF(l,a,g,b,h);m&&e.projectTangentToECEF(m,a,g,b,k);q(g,f,d);e.projectFromECEF(g,a,b);l&&e.projectNormalFromECEF(h,a,g,b,l);m&&e.projectTangentFromECEF(k,a,g,b,m)}else b=r,n.pointToVector(a,b,c.spatialReference)||(d=c.extent.center,b[0]=d.x,b[1]=d.y,b[2]=d.z,v.error("Failed to project specified origin (wkid:"+a.spatialReference.wkid+") to mesh spatial reference (wkid:"+c.spatialReference.wkid+"). Using mesh extent.center instead")),q(c.vertexAttributes.position,
f,b);c.clearCache()}};var f=k.vec3f64.create(),r=k.vec3f64.create()});