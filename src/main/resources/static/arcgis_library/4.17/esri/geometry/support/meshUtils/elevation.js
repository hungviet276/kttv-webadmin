// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../../geometry ../../../Ground ../../../core/promiseUtils ../../../core/unitUtils ../../Mesh".split(" "),function(H,e,c,v,C,D,E,F){function G(a){return c.__awaiter(this,void 0,void 0,function(){return c.__generator(this,function(b){switch(b.label){case 0:return y(a)?[2,a.load()]:[4,a.load()];case 1:return b.sent(),[4,D.eachAlways(a.layers.map(function(a){return a.load()}))];case 2:return b.sent(),[2,a]}})})}function y(a){return"type"in a&&("elevation"===a.type||"base-elevation"===
a.type)}Object.defineProperty(e,"__esModule",{value:!0});e.create=void 0;e.create=function(a,b,q){return c.__awaiter(this,void 0,void 0,function(){var e,z;return c.__generator(this,function(f){switch(f.label){case 0:return y(a)||a instanceof C?[4,G(a)]:[3,3];case 1:return z=f.sent(),[4,z.createElevationSampler(b,{demResolution:q&&q.demResolution||"finest-contiguous"})];case 2:return e=f.sent(),[3,4];case 3:e=a,f.label=4;case 4:f=e;var g=E.getMetersPerUnitForSR(b.spatialReference),d=f.demResolution.min/
g,g=Math.round(b.width/d),d=Math.round(b.height/d),l=g+1,c=d+1,r=new Float64Array(l*c*3),w=new Float32Array(l*c*2),x=0,A=0,h=new Uint32Array(g*d*6),k=0,m=0;t.spatialReference=b.spatialReference;for(var n=0;n<c;n++)for(var B=b.ymin+n/d*b.height,p=0;p<l;p++){var u=b.xmin+p/g*b.width;t.x=u;t.y=B;r[x++]=u;r[x++]=B;r[x++]=f.elevationAt(t)||0;var u=p/g,v=n/d;w[A++]=u;w[A++]=v;n!==d&&p!==g&&(h[m++]=k+1,h[m++]=k+l+1,h[m++]=k+l,h[m++]=k,h[m++]=k+1,h[m++]=k+l);k++}return[2,new F({vertexAttributes:{position:r,
uv:w},components:[{faces:h,shading:"smooth",material:q&&q.material||null}],spatialReference:b.spatialReference})]}})})};var t=new v.Point});