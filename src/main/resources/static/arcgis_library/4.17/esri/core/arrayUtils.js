// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define(["require","exports","@dojo/framework/shim/array","./RandomLCG"],function(n,b,l,y){function p(a){return a}function q(a,c){void 0===c&&(c=p);if(a&&0!==a.length){for(var d=a[0],f=c(d),e=1;e<a.length;++e){var b=a[e],h=Number(c(b));h>f&&(f=h,d=b)}return d}}function r(a,c,d,f){f=f||t;for(var b=Math.max(0,f.last-10),g=b;g<d;++g)if(a[g]===c)return f.last=g;d=Math.min(b,d);for(g=0;g<d;++g)if(a[g]===c)return f.last=g;return-1}function u(a){return a?(v.seed=a,function(){return v.getFloat()}):Math.random}
function w(a,c){return-1===a.indexOf(c)}function x(a,c,d){return!a.some(c.bind(null,d))}function z(a){return a}Object.defineProperty(b,"__esModule",{value:!0});b.remove=b.fromMapValues=b.keysOfSet=b.keysOfMap=b.shuffle=b.pickRandom=b.removeUnorderedMany=b.removeUnordered=b.indexOf=b.PositionHint=b.flatten=b.binaryFindClosest=b.binaryIndexOf=b.range=b.constant=b.splitIntoChunks=b.intersect=b.difference=b.equals=b.unique=b.min=b.max=b.last=b.first=b.includes=b.from=b.findIndex=b.find=void 0;Object.defineProperty(b,
"find",{enumerable:!0,get:function(){return l.find}});Object.defineProperty(b,"findIndex",{enumerable:!0,get:function(){return l.findIndex}});Object.defineProperty(b,"from",{enumerable:!0,get:function(){return l.from}});Object.defineProperty(b,"includes",{enumerable:!0,get:function(){return l.includes}});b.first=function(a){if(a)return 0<a.length?a[0]:void 0};b.last=function(a){if(a){var c=a.length;return 0<c?a[c-1]:void 0}};b.max=q;b.min=function(a,c){void 0===c&&(c=p);return q(a,function(a){return-c(a)})};
b.unique=function(a,c){return c?a.filter(function(a,f,b){return l.findIndex(b,c.bind(null,a))===f}):a.filter(function(a,c,b){return b.indexOf(a)===c})};b.equals=function(a,c,d){if(!a&&!c)return!0;if(!a||!c||a.length!==c.length)return!1;if(d)for(var f=0;f<a.length;f++){if(!d(a[f],c[f]))return!1}else for(f=0;f<a.length;f++)if(a[f]!==c[f])return!1;return!0};b.difference=function(a,c,d){var f;d?(f=c.filter(x.bind(null,a,d)),a=a.filter(x.bind(null,c,d))):(f=c.filter(w.bind(null,a)),a=a.filter(w.bind(null,
c)));return{added:f,removed:a}};b.intersect=function(a,c,d){return a&&c?d?a.filter(function(a){return-1<l.findIndex(c,function(c){return d(a,c)})}):a.filter(function(a){return-1<c.indexOf(a)}):[]};b.splitIntoChunks=function(a,c){var d=a.length;if(0===d)return[];for(var b=[],e=0;e<d;e+=c)b.push(a.slice(e,e+c));return b};var A=!!Array.prototype.fill;b.constant=function(a,c){if(A)return Array(a).fill(c);for(var d=Array(a),b=0;b<a;b++)d[b]=c;return d};b.range=function(a,c){void 0===c&&(c=a,a=0);for(var d=
Array(c-a),b=a;b<c;b++)d[b-a]=b;return d};b.binaryIndexOf=function(a,c,b){for(var d=a.length,e=0,g=d-1;e<g;){var h=e+Math.floor((g-e)/2);c>a[h]?e=h+1:g=h}g=a[e];return b?c>=a[d-1]?-1:g===c?e:e-1:g===c?e:-1};b.binaryFindClosest=function(a,c,b){if(a&&0!==a.length){var d=a.length-1,e=a[0];if(c<=b(e))return e;e=a[d];if(c>=b(e))return e;for(var g=0,e=0,h=d;g<h;){var e=g+Math.floor((h-g)/2),k=a[e],l=b(k);if(l===c)return k;if(c<l){if(0<e){var h=a[e-1],m=b(h);if(c>m)return c-m>=l-c?k:h}h=e}else{if(e<d&&(g=
a[e+1],m=b(g),c<m))return c-l>=m-c?g:k;g=e+1}}return a[e]}};b.flatten=function(a){return a.reduce(function(a,b){return a.concat(b||[])},[])};n=function(){return function(){this.last=0}}();b.PositionHint=n;var t=new n;b.indexOf=r;b.removeUnordered=function(a,c,b,f){var d=null==b?a.length:b;f=r(a,c,d,f);if(-1!==f)return a[f]=a[d-1],null==b&&a.pop(),c};var k=new Set;b.removeUnorderedMany=function(a,c,b,f,e,g){void 0===b&&(b=a.length);void 0===f&&(f=c.length);if(0===f||0===b)return b;k.clear();for(var d=
0;d<f;++d)k.add(c[d]);e=e||t;for(d=c=Math.max(0,e.last-10);d<b;++d)if(k.has(a[d])&&(g&&g.push(a[d]),k.delete(a[d]),a[d]=a[b-1],--b,--d,0===k.size||0===b))return k.clear(),b;for(d=0;d<c;++d)if(k.has(a[d])&&(g&&g.push(a[d]),k.delete(a[d]),a[d]=a[b-1],--b,--d,0===k.size||0===b))return k.clear(),b;k.clear();return b};b.pickRandom=function(a,b,d){var c=a.length;if(b>=c)return a.slice(0);d=u(d);for(var e=new Set,g=[];g.length<b;){var h=Math.floor(d()*c);e.has(h)||(e.add(h),g.push(a[h]))}return g};b.shuffle=
function(a,b){b=u(b);for(var c=a.length-1;0<c;c--){var f=Math.floor(b()*(c+1)),e=a[c];a[c]=a[f];a[f]=e}return a};var v=new y;b.keysOfMap=function(a){var b=Array(a.size),d=0;a.forEach(function(a,c){return b[d++]=c});return b};b.keysOfSet=function(a,b){void 0===b&&(b=z);var c=Array(a.size),f=0;a.forEach(function(a){return c[f++]=b(a)});return c};b.fromMapValues=function(a){if(Array.from)return Array.from(a.values());var b=Array(a.size),d=0;a.forEach(function(a){return b[d++]=a});return b};b.remove=
function(a,b){var c=a.indexOf(b);return-1!==c?(a.splice(c,1),b):null}});