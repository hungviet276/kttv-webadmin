// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define(["require","exports","../compilerUtils","../Logger"],function(N,c,r,J){function y(a){return null==a?a:new Date(a)}function z(a){return null==a?a:!!a}function A(a){return null==a?a:a.toString()}function B(a){if(null==a)return a;a=parseFloat(a);return isNaN(a)?0:a}function C(a){return null==a?a:Math.round(parseFloat(a))}function t(a){return a&&a.constructor&&void 0!==a.constructor.__accessorMetadata__}function n(a,b){return null!=b&&a&&!(b instanceof a)}function D(a){return a&&a.Type?"function"===
typeof a.Type?a.Type:a.Type.base:null}function K(a,b){var d;(d=!b||!b.constructor)||(d=b.constructor,d=!(d&&"isCollection"in d));if(d)return u(a,b)?b:new a(b);d=D(a.prototype.itemType);var c=D(b.constructor.prototype.itemType);if(!d)return b;if(!c)return new a(b);if(d===c)return b;if(d.prototype.isPrototypeOf(c.prototype))return new a(b);u(a,b);return b}function u(a,b){return t(b)?(k.error("Accessor#set","Assigning an instance of '"+(b.declaredClass||"unknown")+"' which is not a subclass of '"+p(a)+
"'"),!0):!1}function E(a,b){return null==b?b:a&&"isCollection"in a?K(a,b):n(a,b)?u(a,b)?b:new a(b):b}function p(a){return a&&a.prototype&&a.prototype.declaredClass||"unknown"}function L(a){switch(a){case Number:return B;case l:return C;case Boolean:return z;case String:return A;case Date:return y;default:return E.bind(null,a)}}function e(a,b){var c=L(a);return 1===arguments.length?c:c(b)}function h(a,b,c){return 1===arguments.length?h.bind(null,a):b?Array.isArray(b)?b.map(function(b){return a(b,c)}):
[a(b,c)]:b}function F(a,b,c){return 0!==b&&Array.isArray(c)?c.map(function(c){return F(a,b-1,c)}):a(c)}function q(a,b,c){if(2===arguments.length)return q.bind(null,a,b);if(!c)return c;c=F(a,b,c);for(var d=b,g=c;0<d&&Array.isArray(g);)d--,g=g[0];if(void 0!==g)for(g=0;g<d;g++)c=[c];return c}function G(a,b){if(2===arguments.length)return G(a).call(null,b);for(var c=new Set,e=a.filter(function(a){return"function"!==typeof a}),g=a.filter(function(a){return"function"===typeof a}),f=0;f<a.length;f++){var m=
a[f];"string"!==typeof m&&"number"!==typeof m||c.add(m)}var h=null,v=null;return function(a,b){if(null==a)return a;var d=typeof a,f="string"===d||"number"===d;if(f&&(c.has(a)||g.some(function(a){return"string"===d&&a===String||"number"===d&&a===Number}))||"object"===d&&g.some(function(b){return!n(a,b)}))return a;f&&e.length?(h||(h=e.map(function(a){return"string"===typeof a?"'"+a+"'":""+a}).join(", ")),k.error("Accessor#set","'"+a+"' is not a valid value for this property, only the following values are valid: "+
h)):"object"===typeof a&&g.length?(v||(v=g.map(function(a){return p(a)}).join(", ")),k.error("Accessor#set","'"+a+"' is not a valid value for this property, value must be one of "+v)):k.error("Accessor#set","'"+a+"' is not a valid value for this property");b&&(b.valid=!1);return null}}function H(a,b){if(2===arguments.length)return H(a).call(null,b);var c={},h=[],g=[],f;for(f in a.typeMap){var m=a.typeMap[f];c[f]=e(m);h.push(p(m));g.push(f)}var l="string"===typeof a.key?function(b){return b[a.key]}:
a.key;return function(b){if(a.base&&!n(a.base,b)||null==b)return b;var d=l(b)||a.defaultKeyValue,e=c[d];if(!e)return k.error("Accessor#set","Invalid property value, value needs to be one of "+("'"+h.join("', '")+"'")+", or a plain object that can autocast (having .type \x3d "+("'"+g.join("', '")+"'")+")"),null;if(!n(a.typeMap[d],b))return b;if("string"===typeof a.key&&!t(b)){var d={},f;for(f in b)f!==a.key&&(d[f]=b[f]);return e(d)}return e(b)}}function I(a){switch(a.type){case "native":return e(a.value);
case "array":return h(I(a.value));case "one-of":return M(a);default:return r.neverReached(a),null}}function M(a){var b=null;return function(c,e){if(w(c,a))return c;null==b&&(b=x(a));k.error("Accessor#set","Invalid property value, value needs to be of type "+b);e&&(e.valid=!1);return null}}function x(a){switch(a.type){case "native":switch(a.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case l:return"integer";case Date:return"date";default:return p(a.value)}case "array":return"array of "+
x(a.value);case "one-of":return a=a.values.map(function(a){return x(a)}),"one of "+a.slice(0,a.length-1)+" or "+a[a.length-1];default:r.neverReached(a)}return"unknown"}function w(a,b){if(null==a)return!0;switch(b.type){case "native":switch(b.value){case Number:case l:return"number"===typeof a;case Boolean:return"boolean"===typeof a;case String:return"string"===typeof a}return a instanceof b.value;case "array":return Array.isArray(a)?!a.some(function(a){return!w(a,b.value)}):!1;case "one-of":return b.values.some(function(b){return w(a,
b)})}}Object.defineProperty(c,"__esModule",{value:!0});c.ensureLongFormType=c.isLongFormType=c.types=c.Integer=c.ensureOneOfType=c.ensureOneOf=c.isOneOf=c.ensureNArray=c.ensureNArrayTyped=c.ensureArray=c.ensureArrayTyped=c.ensureType=c.ensureClass=c.requiresType=c.isClassedType=c.ensureInteger=c.ensureNumber=c.ensureString=c.ensureBoolean=c.ensureDate=void 0;var k=J.getLogger("esri.core.Accessor");c.ensureDate=y;c.ensureBoolean=z;c.ensureString=A;c.ensureNumber=B;c.ensureInteger=C;c.isClassedType=
t;c.requiresType=n;c.ensureClass=E;c.ensureType=e;c.ensureArrayTyped=h;c.ensureArray=function(a,b){return 1===arguments.length?h(e.bind(null,a)):h(e.bind(null,a),b)};c.ensureNArrayTyped=q;c.ensureNArray=function(a,b,c){return 2===arguments.length?q(e.bind(null,a),b):q(e.bind(null,a),b,c)};c.isOneOf=function(a){return Array.isArray(a)?!a.some(function(b){b=typeof b;return!("string"===b||"number"===b||"function"===b&&1<a.length)}):!1};c.ensureOneOf=G;c.ensureOneOfType=H;var l=function(){return function(){}}();
c.Integer=l;c.types={native:function(a){return{type:"native",value:a}},array:function(a){return{type:"array",value:a}},oneOf:function(a){return{type:"one-of",values:a}}};c.isLongFormType=function(a){if(!(a&&"type"in a))return!1;switch(a.type){case "native":case "array":case "one-of":return!0;default:r.neverReachedSilent(a)}return!1};c.ensureLongFormType=I;c.default=e});