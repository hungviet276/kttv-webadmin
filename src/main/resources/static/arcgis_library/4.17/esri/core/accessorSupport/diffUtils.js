// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports ../Accessor ../Collection ../maybe ./utils".split(" "),function(D,e,u,w,p,A){function x(a){return a instanceof w?Object.keys(a.items):a instanceof u?A.getProperties(a).keys():a?Object.keys(a):[]}function q(a,b){return a instanceof w?a.items[b]:a[b]}function B(a,b){return Array.isArray(a)&&Array.isArray(b)?a.length!==b.length:!1}function l(a){return a?a.declaredClass:null}function y(a,b){var c,d=a.diff;if(d&&"function"===typeof d)return d(a,b);var e=x(a),f=x(b);if(0!==e.length||
0!==f.length){if(!e.length||!f.length||B(a,b))return{type:"complete",oldValue:a,newValue:b};var m=f.filter(function(a){return-1===e.indexOf(a)}),n=e.filter(function(a){return-1===f.indexOf(a)}),m=e.filter(function(c){return-1<f.indexOf(c)&&q(a,c)!==q(b,c)}).concat(m,n).sort();if((n=l(a))&&-1<C.indexOf(n)&&m.length)return{type:"complete",oldValue:a,newValue:b};for(var r,n=a instanceof u&&b instanceof u,v=0;v<m.length;v++){var k=m[v],g=q(a,k),h=q(b,k),t=void 0;!(n||"function"!==typeof g&&"function"!==
typeof h)||g===h||null==g&&null==h||(t=d&&d[k]&&"function"===typeof d[k]?d[k](g,h):"object"===typeof g&&"object"===typeof h&&l(g)===l(h)?y(g,h):{type:"complete",oldValue:g,newValue:h},p.isSome(t)&&(p.isSome(r)?r.diff[k]=t:r={type:"partial",diff:(c={},c[k]=t,c)}))}return r}}function z(a,b){if(p.isNone(a))return!1;b=b.split(".");var c=a;for(a=0;a<b.length;a++){var d=b[a];if("complete"===c.type)break;if("partial"===c.type){if(c=c.diff[d],!c)return!1}else return!1}return!0}function f(a){if(p.isNone(a))return!0;
switch(a.type){case "complete":return!1;case "collection":for(var b=0,c=a.added;b<c.length;b++){var d=c[b];if(!f(d))return!1}b=0;for(c=a.removed;b<c.length;b++)if(d=c[b],!f(d))return!1;b=0;for(a=a.changed;b<a.length;b++)if(d=a[b],!f(d))return!1;return!0;case "partial":for(b in a.diff)if(d=a.diff[b],!f(d))return!1;return!0}}Object.defineProperty(e,"__esModule",{value:!0});e.isEmpty=e.diff=e.hasDiffAny=e.hasDiff=void 0;var C=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D",
"esri.symbols.support.Symbol3DAnchorPosition3D"];e.hasDiff=z;e.hasDiffAny=function(a,b){for(var c=0;c<b.length;c++)if(z(a,b[c]))return!0;return!1};e.diff=function(a,b){if("function"!==typeof a&&"function"!==typeof b&&(a||b))return!a||!b||"object"===typeof a&&"object"===typeof b&&l(a)!==l(b)?{type:"complete",oldValue:a,newValue:b}:y(a,b)};e.isEmpty=f});