// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports ../factories/mat3f64 ../factories/quatf64 ../factories/vec3f64 ./common ./vec3 ./vec4".split(" "),function(D,a,z,t,q,r,n,k){function u(c,b,d){d*=.5;var e=Math.sin(d);c[0]=e*b[0];c[1]=e*b[1];c[2]=e*b[2];c[3]=Math.cos(d);return c}function v(c,b,d){var e=b[0],a=b[1],f=b[2];b=b[3];var h=d[0],k=d[1],l=d[2];d=d[3];c[0]=e*d+b*h+a*l-f*k;c[1]=a*d+b*k+f*h-e*l;c[2]=f*d+b*l+e*k-a*h;c[3]=b*d-e*h-a*k-f*l;return c}function p(c,b,d,e){var a=b[0],f=b[1],h=b[2];b=b[3];var k=d[0],l=d[1],n=d[2];
d=d[3];var p,m,q;m=a*k+f*l+h*n+b*d;0>m&&(m=-m,k=-k,l=-l,n=-n,d=-d);1-m>r.EPSILON?(p=Math.acos(m),q=Math.sin(p),m=Math.sin((1-e)*p)/q,e=Math.sin(e*p)/q):m=1-e;c[0]=m*a+e*k;c[1]=m*f+e*l;c[2]=m*h+e*n;c[3]=m*b+e*d;return c}function w(c,b){var d=b[0]+b[4]+b[8];if(0<d)d=Math.sqrt(d+1),c[3]=.5*d,d=.5/d,c[0]=(b[5]-b[7])*d,c[1]=(b[6]-b[2])*d,c[2]=(b[1]-b[3])*d;else{var a=0;b[4]>b[0]&&(a=1);b[8]>b[3*a+a]&&(a=2);var g=(a+1)%3,f=(a+2)%3,d=Math.sqrt(b[3*a+a]-b[3*g+g]-b[3*f+f]+1);c[a]=.5*d;d=.5/d;c[3]=(b[3*g+f]-
b[3*f+g])*d;c[g]=(b[3*g+a]+b[3*a+g])*d;c[f]=(b[3*f+a]+b[3*a+f])*d}return c}Object.defineProperty(a,"__esModule",{value:!0});a.setAxes=a.sqlerp=a.rotationTo=a.equals=a.exactEquals=a.normalize=a.sqrLen=a.squaredLength=a.len=a.length=a.lerp=a.dot=a.scale=a.mul=a.add=a.set=a.copy=a.str=a.fromEuler=a.fromMat3=a.conjugate=a.invert=a.random=a.slerp=a.calculateW=a.rotateZ=a.rotateY=a.rotateX=a.multiply=a.getAxisAngle=a.setAxisAngle=a.identity=void 0;a.identity=function(c){c[0]=0;c[1]=0;c[2]=0;c[3]=1;return c};
a.setAxisAngle=u;a.getAxisAngle=function(c,b){var d=2*Math.acos(b[3]),a=Math.sin(d/2);a>r.EPSILON?(c[0]=b[0]/a,c[1]=b[1]/a,c[2]=b[2]/a):(c[0]=1,c[1]=0,c[2]=0);return d};a.multiply=v;a.rotateX=function(c,b,d){d*=.5;var a=b[0],g=b[1],f=b[2];b=b[3];var h=Math.sin(d);d=Math.cos(d);c[0]=a*d+b*h;c[1]=g*d+f*h;c[2]=f*d-g*h;c[3]=b*d-a*h;return c};a.rotateY=function(c,b,a){a*=.5;var d=b[0],g=b[1],f=b[2];b=b[3];var h=Math.sin(a);a=Math.cos(a);c[0]=d*a-f*h;c[1]=g*a+b*h;c[2]=f*a+d*h;c[3]=b*a-g*h;return c};a.rotateZ=
function(c,b,a){a*=.5;var d=b[0],g=b[1],f=b[2];b=b[3];var h=Math.sin(a);a=Math.cos(a);c[0]=d*a+g*h;c[1]=g*a-d*h;c[2]=f*a+b*h;c[3]=b*a-f*h;return c};a.calculateW=function(a,b){var c=b[0],e=b[1];b=b[2];a[0]=c;a[1]=e;a[2]=b;a[3]=Math.sqrt(Math.abs(1-c*c-e*e-b*b));return a};a.slerp=p;a.random=function(a){var b=r.RANDOM(),c=r.RANDOM(),e=r.RANDOM(),g=Math.sqrt(1-b),b=Math.sqrt(b);a[0]=g*Math.sin(2*Math.PI*c);a[1]=g*Math.cos(2*Math.PI*c);a[2]=b*Math.sin(2*Math.PI*e);a[3]=b*Math.cos(2*Math.PI*e);return a};
a.invert=function(a,b){var c=b[0],e=b[1],g=b[2];b=b[3];var f=c*c+e*e+g*g+b*b,f=f?1/f:0;a[0]=-c*f;a[1]=-e*f;a[2]=-g*f;a[3]=b*f;return a};a.conjugate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=b[3];return a};a.fromMat3=w;a.fromEuler=function(a,b,d,e){var c=.5*Math.PI/180;b*=c;d*=c;e*=c;c=Math.sin(b);b=Math.cos(b);var f=Math.sin(d);d=Math.cos(d);var h=Math.sin(e);e=Math.cos(e);a[0]=c*d*e-b*f*h;a[1]=b*f*e+c*d*h;a[2]=b*d*h-c*f*e;a[3]=b*d*e+c*f*h;return a};a.str=function(a){return"quat("+a[0]+
", "+a[1]+", "+a[2]+", "+a[3]+")"};a.copy=k.copy;a.set=k.set;a.add=k.add;a.mul=v;a.scale=k.scale;a.dot=k.dot;a.lerp=k.lerp;a.length=k.length;a.len=a.length;a.squaredLength=k.squaredLength;a.sqrLen=a.squaredLength;a.normalize=k.normalize;a.exactEquals=k.exactEquals;a.equals=k.equals;a.rotationTo=function(c,b,d){var e=n.dot(b,d);if(-.999999>e)return n.cross(l,A,b),1E-6>n.len(l)&&n.cross(l,B,b),n.normalize(l,l),u(c,l,Math.PI),c;if(.999999<e)return c[0]=0,c[1]=0,c[2]=0,c[3]=1,c;n.cross(l,b,d);c[0]=l[0];
c[1]=l[1];c[2]=l[2];c[3]=1+e;return a.normalize(c,c)};var l=q.create(),A=q.fromValues(1,0,0),B=q.fromValues(0,1,0);a.sqlerp=function(a,b,d,e,g,f){p(x,b,g,f);p(y,d,e,f);p(a,x,y,2*f*(1-f));return a};var x=t.create(),y=t.create();a.setAxes=function(c,b,d,e){var g=C;g[0]=d[0];g[3]=d[1];g[6]=d[2];g[1]=e[0];g[4]=e[1];g[7]=e[2];g[2]=-b[0];g[5]=-b[1];g[8]=-b[2];return a.normalize(c,w(c,g))};var C=z.create()});