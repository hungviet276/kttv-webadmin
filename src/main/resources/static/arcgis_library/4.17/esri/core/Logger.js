// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports tslib ../config ./has ./maybe ./string @dojo/framework/shim/Promise".split(" "),function(n,p,e,h,q,k,m){var l={info:0,warn:1,error:2,none:3};return function(){function c(b){this.level=null;this._module="";this.writer=this._parent=null;this._loggedMessages={error:new Map,warn:new Map,info:new Map};null!=b.level&&(this.level=b.level);null!=b.writer&&(this.writer=b.writer);this._module=b.module;c._loggers[this.module]=this;b=this.module.lastIndexOf(".");-1!==b&&(this._parent=
c.getLogger(this.module.slice(0,b)))}Object.defineProperty(c.prototype,"module",{get:function(){return this._module},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0});c.prototype.error=function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];this._log.apply(this,e.__spreadArrays(["error","always"],b))};c.prototype.warn=function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];this._log.apply(this,
e.__spreadArrays(["warn","always"],b))};c.prototype.info=function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];this._log.apply(this,e.__spreadArrays(["info","always"],b))};c.prototype.errorOnce=function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];this._log.apply(this,e.__spreadArrays(["error","once"],b))};c.prototype.warnOnce=function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];this._log.apply(this,e.__spreadArrays(["warn","once"],b))};c.prototype.infoOnce=
function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];this._log.apply(this,e.__spreadArrays(["info","once"],b))};c.prototype.errorOncePerTick=function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];this._log.apply(this,e.__spreadArrays(["error","oncePerTick"],b))};c.prototype.warnOncePerTick=function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];this._log.apply(this,e.__spreadArrays(["warn","oncePerTick"],b))};c.prototype.infoOncePerTick=function(){for(var b=
[],a=0;a<arguments.length;a++)b[a]=arguments[a];this._log.apply(this,e.__spreadArrays(["info","oncePerTick"],b))};Object.defineProperty(c,"test",{get:function(){return{resetLoggers:function(b){void 0===b&&(b={});var a=c._loggers;c._loggers=b;return a},set throttlingDisabled(b){c._throttlingDisabled=b}}},enumerable:!1,configurable:!0});c.getLogger=function(b){var a=c._loggers[b];a||(a=new c({module:b}));return a};c.prototype._log=function(b,a){for(var g=[],d=2;d<arguments.length;d++)g[d-2]=arguments[d];
if(this._matchLevel(b)){if("always"!==a&&!c._throttlingDisabled){var d=this._argsToKey(g),f=this._loggedMessages[b].get(d);if("once"===a&&null!=f||"oncePerTick"===a&&f&&f>=c._tickCounter)return;this._loggedMessages[b].set(d,c._tickCounter);c._scheduleTickCounterIncrement()}d=0;for(f=h.log.interceptors;d<f.length;d++)if(f[d].apply(void 0,e.__spreadArrays([b,this.module],g)))return;this._inheritedWriter().apply(void 0,e.__spreadArrays([b,this.module],g))}};c.prototype._parentWithMember=function(b,a){for(var c=
this;k.isSome(c);){var d=c[b];if(k.isSome(d))return d;c=c.parent}return a};c.prototype._inheritedWriter=function(){return this._parentWithMember("writer",this._consoleWriter)};c.prototype._consoleWriter=function(b,a){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];console[b].apply(console,e.__spreadArrays(["["+a+"]"],c))};c.prototype._matchLevel=function(b){return l[this._parentWithMember("level",h.log.level?h.log.level:"warn")]<=l[b]};c.prototype._argsToKey=function(){for(var b=[],a=
0;a<arguments.length;a++)b[a]=arguments[a];return m.numericHash(JSON.stringify(b,function(a,b){return"object"!==typeof b||Array.isArray(b)?b:"[Object]"}))};c._scheduleTickCounterIncrement=function(){c._tickCounterScheduled||(c._tickCounterScheduled=!0,Promise.resolve().then(function(){c._tickCounter++;c._tickCounterScheduled=!1}))};c._loggers={};c._tickCounter=0;c._tickCounterScheduled=!1;c._throttlingDisabled=!1;return c}()});