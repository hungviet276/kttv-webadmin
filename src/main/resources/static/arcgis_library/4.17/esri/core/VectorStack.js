// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports ./maybe ./nextTick ./libs/gl-matrix-2/mat3f64 ./libs/gl-matrix-2/mat4f64 ./libs/gl-matrix-2/quatf64 ./libs/gl-matrix-2/vec2f64 ./libs/gl-matrix-2/vec3f64 ./libs/gl-matrix-2/vec4f64".split(" "),function(f,d,e,g,h,k,l,m,n,p){Object.defineProperty(d,"__esModule",{value:!0});d.VectorStack=void 0;f=function(){function b(a,b,c){var d=this;this.itemByteSize=a;this.itemCreate=b;this.buffers=[];this.items=[];this.itemsPtr=this.itemsPerBuffer=0;this.itemsPerBuffer=Math.ceil(c/this.itemByteSize);
this.tickHandle=g.before(function(){return d.reset()})}b.prototype.destroy=function(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=e.nullifyNonnullableForDispose(this.tickHandle));this.itemsPtr=0;this.items=e.nullifyNonnullableForDispose(this.items);this.buffers=e.nullifyNonnullableForDispose(this.buffers)};b.prototype.get=function(){0===this.itemsPtr&&g(function(){});for(var a=Math.floor(this.itemsPtr/this.itemsPerBuffer);this.buffers.length<=a;){for(var b=new ArrayBuffer(this.itemsPerBuffer*
this.itemByteSize),c=0;c<this.itemsPerBuffer;++c)this.items.push(this.itemCreate(b,c*this.itemByteSize));this.buffers.push(b)}return this.items[this.itemsPtr++]};b.prototype.reset=function(){for(var a=2*(Math.floor(this.itemsPtr/this.itemsPerBuffer)+1);this.buffers.length>a;)this.buffers.pop(),this.items.length=this.buffers.length*this.itemsPerBuffer;this.itemsPtr=0};b.createVec2f64=function(a){void 0===a&&(a=c);return new b(16,m.vec2f64.createView,a)};b.createVec3f64=function(a){void 0===a&&(a=c);
return new b(24,n.vec3f64.createView,a)};b.createVec4f64=function(a){void 0===a&&(a=c);return new b(32,p.vec4f64.createView,a)};b.createMat3f64=function(a){void 0===a&&(a=c);return new b(72,h.mat3f64.createView,a)};b.createMat4f64=function(a){void 0===a&&(a=c);return new b(128,k.mat4f64.createView,a)};b.createQuatf64=function(a){void 0===a&&(a=c);return new b(32,l.quatf64.createView,a)};Object.defineProperty(b.prototype,"test",{get:function(){return{size:this.buffers.length*this.itemsPerBuffer*this.itemByteSize}},
enumerable:!1,configurable:!0});return b}();d.VectorStack=f;var c=4096});