// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.17/esri/copyright.txt for details.
//>>built
define("require exports ../factories/quatf64 ../factories/vec3f64 ./common ./mat4 ./quat".split(" "),function(F,c,B,C,t,x,w){function y(a,b,d){var k=.5*d[0],f=.5*d[1];d=.5*d[2];var e=b[0],g=b[1],h=b[2];b=b[3];a[0]=e;a[1]=g;a[2]=h;a[3]=b;a[4]=k*b+f*h-d*g;a[5]=f*b+d*e-k*h;a[6]=d*b+k*g-f*e;a[7]=-k*e-f*g-d*h;return a}function z(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];return a}function A(a,b,d){var k=b[0],f=b[1],e=b[2],g=b[3],h=d[4],c=d[5],l=d[6],n=d[7],p=b[4],
q=b[5],r=b[6];b=b[7];var u=d[0],v=d[1],t=d[2];d=d[3];a[0]=k*d+g*u+f*t-e*v;a[1]=f*d+g*v+e*u-k*t;a[2]=e*d+g*t+k*v-f*u;a[3]=g*d-k*u-f*v-e*t;a[4]=k*n+g*h+f*l-e*c+p*d+b*u+q*t-r*v;a[5]=f*n+g*c+e*h-k*l+q*d+b*v+r*u-p*t;a[6]=e*n+g*l+k*c-f*h+r*d+b*t+p*v-q*u;a[7]=g*n-k*h-f*c-e*l+b*d-p*u-q*v-r*t;return a}Object.defineProperty(c,"__esModule",{value:!0});c.equals=c.exactEquals=c.str=c.normalize=c.sqrLen=c.squaredLength=c.len=c.length=c.conjugate=c.invert=c.lerp=c.dot=c.scale=c.mul=c.multiply=c.add=c.rotateAroundAxis=
c.rotateByQuatPrepend=c.rotateByQuatAppend=c.rotateZ=c.rotateY=c.rotateX=c.translate=c.getTranslation=c.setDual=c.setReal=c.getDual=c.getReal=c.set=c.identity=c.copy=c.fromMat4=c.fromRotation=c.fromTranslation=c.fromRotationTranslation=void 0;c.fromRotationTranslation=y;c.fromTranslation=function(a,b){a[0]=0;a[1]=0;a[2]=0;a[3]=1;a[4]=.5*b[0];a[5]=.5*b[1];a[6]=.5*b[2];a[7]=0;return a};c.fromRotation=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=0;a[5]=0;a[6]=0;a[7]=0;return a};c.fromMat4=
function(a,b){var d=D;x.getRotation(d,b);var k=E;x.getTranslation(k,b);y(a,d,k);return a};var D=B.create(),E=C.create();c.copy=z;c.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;a[6]=0;a[7]=0;return a};c.set=function(a,b,d,k,f,e,g,h,c){a[0]=b;a[1]=d;a[2]=k;a[3]=f;a[4]=e;a[5]=g;a[6]=h;a[7]=c;return a};c.getReal=w.copy;c.getDual=function(a,b){a[0]=b[4];a[1]=b[5];a[2]=b[6];a[3]=b[7];return a};c.setReal=w.copy;c.setDual=function(a,b){a[4]=b[0];a[5]=b[1];a[6]=b[2];a[7]=b[3];return a};c.getTranslation=
function(a,b){var d=b[4],k=b[5],f=b[6],e=b[7],g=-b[0],h=-b[1],c=-b[2];b=b[3];a[0]=2*(d*b+e*g+k*c-f*h);a[1]=2*(k*b+e*h+f*g-d*c);a[2]=2*(f*b+e*c+d*h-k*g);return a};c.translate=function(a,b,d){var k=b[0],f=b[1],e=b[2],g=b[3],c=.5*d[0],m=.5*d[1];d=.5*d[2];var l=b[4],n=b[5],p=b[6];b=b[7];a[0]=k;a[1]=f;a[2]=e;a[3]=g;a[4]=g*c+f*d-e*m+l;a[5]=g*m+e*c-k*d+n;a[6]=g*d+k*m-f*c+p;a[7]=-k*c-f*m-e*d+b;return a};c.rotateX=function(a,b,d){var k=-b[0],f=-b[1],e=-b[2],c=b[3],h=b[4],m=b[5],l=b[6],n=b[7],p=h*c+n*k+m*e-
l*f,q=m*c+n*f+l*k-h*e,r=l*c+n*e+h*f-m*k,h=n*c-h*k-m*f-l*e;w.rotateX(a,b,d);k=a[0];f=a[1];e=a[2];c=a[3];a[4]=p*c+h*k+q*e-r*f;a[5]=q*c+h*f+r*k-p*e;a[6]=r*c+h*e+p*f-q*k;a[7]=h*c-p*k-q*f-r*e;return a};c.rotateY=function(a,b,d){var k=-b[0],c=-b[1],e=-b[2],g=b[3],h=b[4],m=b[5],l=b[6],n=b[7],p=h*g+n*k+m*e-l*c,q=m*g+n*c+l*k-h*e,r=l*g+n*e+h*c-m*k,h=n*g-h*k-m*c-l*e;w.rotateY(a,b,d);k=a[0];c=a[1];e=a[2];g=a[3];a[4]=p*g+h*k+q*e-r*c;a[5]=q*g+h*c+r*k-p*e;a[6]=r*g+h*e+p*c-q*k;a[7]=h*g-p*k-q*c-r*e;return a};c.rotateZ=
function(a,b,d){var c=-b[0],f=-b[1],e=-b[2],g=b[3],h=b[4],m=b[5],l=b[6],n=b[7],p=h*g+n*c+m*e-l*f,q=m*g+n*f+l*c-h*e,r=l*g+n*e+h*f-m*c,h=n*g-h*c-m*f-l*e;w.rotateZ(a,b,d);c=a[0];f=a[1];e=a[2];g=a[3];a[4]=p*g+h*c+q*e-r*f;a[5]=q*g+h*f+r*c-p*e;a[6]=r*g+h*e+p*f-q*c;a[7]=h*g-p*c-q*f-r*e;return a};c.rotateByQuatAppend=function(a,b,d){var c=d[0],f=d[1],e=d[2];d=d[3];var g=b[0],h=b[1],m=b[2],l=b[3];a[0]=g*d+l*c+h*e-m*f;a[1]=h*d+l*f+m*c-g*e;a[2]=m*d+l*e+g*f-h*c;a[3]=l*d-g*c-h*f-m*e;g=b[4];h=b[5];m=b[6];l=b[7];
a[4]=g*d+l*c+h*e-m*f;a[5]=h*d+l*f+m*c-g*e;a[6]=m*d+l*e+g*f-h*c;a[7]=l*d-g*c-h*f-m*e;return a};c.rotateByQuatPrepend=function(a,b,d){var c=b[0],f=b[1],e=b[2];b=b[3];var g=d[0],h=d[1],m=d[2],l=d[3];a[0]=c*l+b*g+f*m-e*h;a[1]=f*l+b*h+e*g-c*m;a[2]=e*l+b*m+c*h-f*g;a[3]=b*l-c*g-f*h-e*m;g=d[4];h=d[5];m=d[6];l=d[7];a[4]=c*l+b*g+f*m-e*h;a[5]=f*l+b*h+e*g-c*m;a[6]=e*l+b*m+c*h-f*g;a[7]=b*l-c*g-f*h-e*m;return a};c.rotateAroundAxis=function(a,b,d,c){if(Math.abs(c)<t.EPSILON)return z(a,b);var f=Math.sqrt(d[0]*d[0]+
d[1]*d[1]+d[2]*d[2]);c*=.5;var e=Math.sin(c),g=e*d[0]/f,h=e*d[1]/f;d=e*d[2]/f;c=Math.cos(c);var f=b[0],e=b[1],k=b[2],l=b[3];a[0]=f*c+l*g+e*d-k*h;a[1]=e*c+l*h+k*g-f*d;a[2]=k*c+l*d+f*h-e*g;a[3]=l*c-f*g-e*h-k*d;f=b[4];e=b[5];k=b[6];b=b[7];a[4]=f*c+b*g+e*d-k*h;a[5]=e*c+b*h+k*g-f*d;a[6]=k*c+b*d+f*h-e*g;a[7]=b*c-f*g-e*h-k*d;return a};c.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];a[6]=b[6]+c[6];a[7]=b[7]+c[7];return a};c.multiply=A;c.mul=
A;c.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*c;a[6]=b[6]*c;a[7]=b[7]*c;return a};c.dot=w.dot;c.lerp=function(a,b,d,k){var f=1-k;0>c.dot(b,d)&&(k=-k);a[0]=b[0]*f+d[0]*k;a[1]=b[1]*f+d[1]*k;a[2]=b[2]*f+d[2]*k;a[3]=b[3]*f+d[3]*k;a[4]=b[4]*f+d[4]*k;a[5]=b[5]*f+d[5]*k;a[6]=b[6]*f+d[6]*k;a[7]=b[7]*f+d[7]*k;return a};c.invert=function(a,b){var d=c.squaredLength(b);a[0]=-b[0]/d;a[1]=-b[1]/d;a[2]=-b[2]/d;a[3]=b[3]/d;a[4]=-b[4]/d;a[5]=-b[5]/d;a[6]=-b[6]/d;a[7]=
b[7]/d;return a};c.conjugate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=b[3];a[4]=-b[4];a[5]=-b[5];a[6]=-b[6];a[7]=b[7];return a};c.length=w.length;c.len=c.length;c.squaredLength=w.squaredLength;c.sqrLen=c.squaredLength;c.normalize=function(a,b){var d=c.squaredLength(b);if(0<d){var d=Math.sqrt(d),k=b[0]/d,f=b[1]/d,e=b[2]/d,g=b[3]/d,h=b[4],m=b[5],l=b[6];b=b[7];var n=k*h+f*m+e*l+g*b;a[0]=k;a[1]=f;a[2]=e;a[3]=g;a[4]=(h-k*n)/d;a[5]=(m-f*n)/d;a[6]=(l-e*n)/d;a[7]=(b-g*n)/d}return a};c.str=function(a){return"quat2("+
a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+")"};c.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]};c.equals=function(a,b){var c=a[0],k=a[1],f=a[2],e=a[3],g=a[4],h=a[5],m=a[6];a=a[7];var l=b[0],n=b[1],p=b[2],q=b[3],r=b[4],u=b[5],v=b[6];b=b[7];return Math.abs(c-l)<=t.EPSILON*Math.max(1,Math.abs(c),Math.abs(l))&&Math.abs(k-n)<=t.EPSILON*Math.max(1,Math.abs(k),Math.abs(n))&&Math.abs(f-
p)<=t.EPSILON*Math.max(1,Math.abs(f),Math.abs(p))&&Math.abs(e-q)<=t.EPSILON*Math.max(1,Math.abs(e),Math.abs(q))&&Math.abs(g-r)<=t.EPSILON*Math.max(1,Math.abs(g),Math.abs(r))&&Math.abs(h-u)<=t.EPSILON*Math.max(1,Math.abs(h),Math.abs(u))&&Math.abs(m-v)<=t.EPSILON*Math.max(1,Math.abs(m),Math.abs(v))&&Math.abs(a-b)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))}});